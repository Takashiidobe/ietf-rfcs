  RFC 9114   HTTP/3            June 2022
  ---------- ----------------- -----------
  Bishop     Standards Track   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9114](https://www.rfc-editor.org/rfc/rfc9114){.eref}

Category:
:   Standards Track

Published:
:   June 2022

ISSN:
:   2070-1721

Author:

:   ::: author
    ::: author-name
    M. Bishop, [Ed.]{.editor}
    :::

    ::: org
    Akamai
    :::
    :::
:::

# RFC 9114 {#rfcnum}

# HTTP/3 {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The QUIC transport protocol has several features that are desirable in a
transport for HTTP, such as stream multiplexing, per-stream flow
control, and low-latency connection establishment. This document
describes a mapping of HTTP semantics over QUIC. This document also
identifies HTTP/2 features that are subsumed by QUIC and describes how
HTTP/2 extensions can be ported to
HTTP/3.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9114>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Prior Versions of
        HTTP](#name-prior-versions-of-http){.xref}
        :::

    -   ::: {#section-toc.1-1.1.2.2}
        [1.2](#section-1.2){.xref}.  [Delegation to
        QUIC](#name-delegation-to-quic){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [HTTP/3 Protocol
    Overview](#name-http-3-protocol-overview){.xref}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Document
        Organization](#name-document-organization){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Conventions and
        Terminology](#name-conventions-and-terminology){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Connection Setup and
    Management](#name-connection-setup-and-manage){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Discovering an HTTP/3
        Endpoint](#name-discovering-an-http-3-endpo){.xref}

        -   ::: {#section-toc.1-1.3.2.1.2.1}
            [3.1.1](#section-3.1.1){.xref}.  [HTTP Alternative
            Services](#name-http-alternative-services){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.1.2.2}
            [3.1.2](#section-3.1.2){.xref}.  [Other
            Schemes](#name-other-schemes){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Connection
        Establishment](#name-connection-establishment){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Connection
        Reuse](#name-connection-reuse){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Expressing HTTP Semantics in
    HTTP/3](#name-expressing-http-semantics-i){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [HTTP Message
        Framing](#name-http-message-framing){.xref}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [Request Cancellation and
            Rejection](#name-request-cancellation-and-re){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.2}
            [4.1.2](#section-4.1.2){.xref}.  [Malformed Requests and
            Responses](#name-malformed-requests-and-resp){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [HTTP
        Fields](#name-http-fields){.xref}

        -   ::: {#section-toc.1-1.4.2.2.2.1}
            [4.2.1](#section-4.2.1){.xref}.  [Field
            Compression](#name-field-compression){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.2.2.2}
            [4.2.2](#section-4.2.2){.xref}.  [Header Size
            Constraints](#name-header-size-constraints){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [HTTP Control
        Data](#name-http-control-data){.xref}

        -   ::: {#section-toc.1-1.4.2.3.2.1}
            [4.3.1](#section-4.3.1){.xref}.  [Request Pseudo-Header
            Fields](#name-request-pseudo-header-field){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.3.2.2}
            [4.3.2](#section-4.3.2){.xref}.  [Response Pseudo-Header
            Fields](#name-response-pseudo-header-fiel){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [The CONNECT
        Method](#name-the-connect-method){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [HTTP
        Upgrade](#name-http-upgrade){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [Server
        Push](#name-server-push){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Connection
    Closure](#name-connection-closure){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Idle
        Connections](#name-idle-connections){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [Connection
        Shutdown](#name-connection-shutdown){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Immediate Application
        Closure](#name-immediate-application-closu){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [Transport
        Closure](#name-transport-closure){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Stream Mapping and
    Usage](#name-stream-mapping-and-usage){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Bidirectional
        Streams](#name-bidirectional-streams){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Unidirectional
        Streams](#name-unidirectional-streams){.xref}

        -   ::: {#section-toc.1-1.6.2.2.2.1}
            [6.2.1](#section-6.2.1){.xref}.  [Control
            Streams](#name-control-streams){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.2}
            [6.2.2](#section-6.2.2){.xref}.  [Push
            Streams](#name-push-streams){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.3}
            [6.2.3](#section-6.2.3){.xref}.  [Reserved Stream
            Types](#name-reserved-stream-types){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [HTTP Framing
    Layer](#name-http-framing-layer){.xref}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Frame
        Layout](#name-frame-layout){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Frame
        Definitions](#name-frame-definitions){.xref}

        -   ::: {#section-toc.1-1.7.2.2.2.1}
            [7.2.1](#section-7.2.1){.xref}.  [DATA](#name-data){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.2}
            [7.2.2](#section-7.2.2){.xref}.  [HEADERS](#name-headers){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.3}
            [7.2.3](#section-7.2.3){.xref}.  [CANCEL_PUSH](#name-cancel_push){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.4}
            [7.2.4](#section-7.2.4){.xref}.  [SETTINGS](#name-settings){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.5}
            [7.2.5](#section-7.2.5){.xref}.  [PUSH_PROMISE](#name-push_promise){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.6}
            [7.2.6](#section-7.2.6){.xref}.  [GOAWAY](#name-goaway){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.7}
            [7.2.7](#section-7.2.7){.xref}.  [MAX_PUSH_ID](#name-max_push_id){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.8}
            [7.2.8](#section-7.2.8){.xref}.  [Reserved Frame
            Types](#name-reserved-frame-types){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Error
    Handling](#name-error-handling){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [HTTP/3 Error
        Codes](#name-http-3-error-codes){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Extensions to
    HTTP/3](#name-extensions-to-http-3){.xref}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Security
    Considerations](#name-security-considerations){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Server
        Authority](#name-server-authority){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Cross-Protocol
        Attacks](#name-cross-protocol-attacks){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.3}
        [10.3](#section-10.3){.xref}.  [Intermediary-Encapsulation
        Attacks](#name-intermediary-encapsulation-){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.4}
        [10.4](#section-10.4){.xref}.  [Cacheability of Pushed
        Responses](#name-cacheability-of-pushed-resp){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.5}
        [10.5](#section-10.5){.xref}.  [Denial-of-Service
        Considerations](#name-denial-of-service-considera){.xref}

        -   ::: {#section-toc.1-1.10.2.5.2.1}
            [10.5.1](#section-10.5.1){.xref}.  [Limits on Field Section
            Size](#name-limits-on-field-section-siz){.xref}
            :::

        -   ::: {#section-toc.1-1.10.2.5.2.2}
            [10.5.2](#section-10.5.2){.xref}.  [CONNECT
            Issues](#name-connect-issues){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.10.2.6}
        [10.6](#section-10.6){.xref}.  [Use of
        Compression](#name-use-of-compression){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.7}
        [10.7](#section-10.7){.xref}.  [Padding and Traffic
        Analysis](#name-padding-and-traffic-analysi){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.8}
        [10.8](#section-10.8){.xref}.  [Frame
        Parsing](#name-frame-parsing){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.9}
        [10.9](#section-10.9){.xref}.  [Early
        Data](#name-early-data){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.10}
        [10.10](#section-10.10){.xref}. [Migration](#name-migration){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.11}
        [10.11](#section-10.11){.xref}. [Privacy
        Considerations](#name-privacy-considerations){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.11.2.1}
        [11.1](#section-11.1){.xref}.  [Registration of HTTP/3
        Identification String](#name-registration-of-http-3-iden){.xref}
        :::

    -   ::: {#section-toc.1-1.11.2.2}
        [11.2](#section-11.2){.xref}.  [New
        Registries](#name-new-registries){.xref}

        -   ::: {#section-toc.1-1.11.2.2.2.1}
            [11.2.1](#section-11.2.1){.xref}.  [Frame
            Types](#name-frame-types){.xref}
            :::

        -   ::: {#section-toc.1-1.11.2.2.2.2}
            [11.2.2](#section-11.2.2){.xref}.  [Settings
            Parameters](#name-settings-parameters){.xref}
            :::

        -   ::: {#section-toc.1-1.11.2.2.2.3}
            [11.2.3](#section-11.2.3){.xref}.  [Error
            Codes](#name-error-codes){.xref}
            :::

        -   ::: {#section-toc.1-1.11.2.2.2.4}
            [11.2.4](#section-11.2.4){.xref}.  [Stream
            Types](#name-stream-types){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.12.2.1}
        [12.1](#section-12.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.12.2.2}
        [12.2](#section-12.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.13}
    [Appendix A](#appendix-A){.xref}.  [Considerations for Transitioning
    from HTTP/2](#name-considerations-for-transiti){.xref}

    -   ::: {#section-toc.1-1.13.2.1}
        [A.1](#appendix-A.1){.xref}.  [Streams](#name-streams){.xref}
        :::

    -   ::: {#section-toc.1-1.13.2.2}
        [A.2](#appendix-A.2){.xref}.  [HTTP Frame
        Types](#name-http-frame-types){.xref}

        -   ::: {#section-toc.1-1.13.2.2.2.1}
            [A.2.1](#appendix-A.2.1){.xref}.  [Prioritization
            Differences](#name-prioritization-differences){.xref}
            :::

        -   ::: {#section-toc.1-1.13.2.2.2.2}
            [A.2.2](#appendix-A.2.2){.xref}.  [Field Compression
            Differences](#name-field-compression-differenc){.xref}
            :::

        -   ::: {#section-toc.1-1.13.2.2.2.3}
            [A.2.3](#appendix-A.2.3){.xref}.  [Flow-Control
            Differences](#name-flow-control-differences){.xref}
            :::

        -   ::: {#section-toc.1-1.13.2.2.2.4}
            [A.2.4](#appendix-A.2.4){.xref}.  [Guidance for New Frame
            Type Definitions](#name-guidance-for-new-frame-type){.xref}
            :::

        -   ::: {#section-toc.1-1.13.2.2.2.5}
            [A.2.5](#appendix-A.2.5){.xref}.  [Comparison of HTTP/2 and
            HTTP/3 Frame
            Types](#name-comparison-of-http-2-and-ht){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.13.2.3}
        [A.3](#appendix-A.3){.xref}.  [HTTP/2 SETTINGS
        Parameters](#name-http-2-settings-parameters){.xref}
        :::

    -   ::: {#section-toc.1-1.13.2.4}
        [A.4](#appendix-A.4){.xref}.  [HTTP/2 Error
        Codes](#name-http-2-error-codes){.xref}

        -   ::: {#section-toc.1-1.13.2.4.2.1}
            [A.4.1](#appendix-A.4.1){.xref}.  [Mapping between HTTP/2
            and HTTP/3 Errors](#name-mapping-between-http-2-and-){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.14}
    [](#appendix-B){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.15}
    [](#appendix-C){.xref}[Index](#name-index){.xref}
    :::

-   ::: {#section-toc.1-1.16}
    [](#appendix-D){.xref}[Author\'s
    Address](#name-authors-address){.xref}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

HTTP semantics (\[[HTTP](#RFC9110){.xref}\]) are used for a broad range
of services on the Internet. These semantics have most commonly been
used with HTTP/1.1 and HTTP/2. HTTP/1.1 has been used over a variety of
transport and session layers, while HTTP/2 has been used primarily with
TLS over TCP. HTTP/3 supports the same semantics over a new transport
protocol: QUIC.[¶](#section-1-1){.pilcrow}

::: {#prior-versions-of-http}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Prior Versions of HTTP](#name-prior-versions-of-http){.section-name .selfRef} {#name-prior-versions-of-http}

HTTP/1.1 (\[[HTTP/1.1](#RFC9112){.xref}\]) uses whitespace-delimited
text fields to convey HTTP messages. While these exchanges are human
readable, using whitespace for message formatting leads to parsing
complexity and excessive tolerance of variant
behavior.[¶](#section-1.1-1){.pilcrow}

Because HTTP/1.1 does not include a multiplexing layer, multiple TCP
connections are often used to service requests in parallel. However,
that has a negative impact on congestion control and network efficiency,
since TCP does not share congestion control across multiple
connections.[¶](#section-1.1-2){.pilcrow}

HTTP/2 (\[[HTTP/2](#RFC9113){.xref}\]) introduced a binary framing and
multiplexing layer to improve latency without modifying the transport
layer. However, because the parallel nature of HTTP/2\'s multiplexing is
not visible to TCP\'s loss recovery mechanisms, a lost or reordered
packet causes all active transactions to experience a stall regardless
of whether that transaction was directly impacted by the lost
packet.[¶](#section-1.1-3){.pilcrow}
:::
:::

::: {#delegation-to-quic}
::: {#section-1.2 .section}
### [1.2.](#section-1.2){.section-number .selfRef} [Delegation to QUIC](#name-delegation-to-quic){.section-name .selfRef} {#name-delegation-to-quic}

The QUIC transport protocol incorporates stream multiplexing and
per-stream flow control, similar to that provided by the HTTP/2 framing
layer. By providing reliability at the stream level and congestion
control across the entire connection, QUIC has the capability to improve
the performance of HTTP compared to a TCP mapping. QUIC also
incorporates TLS 1.3 (\[[TLS](#TLS){.xref}\]) at the transport layer,
offering comparable confidentiality and integrity to running TLS over
TCP, with the improved connection setup latency of TCP Fast Open
(\[[TFO](#TFO){.xref}\]).[¶](#section-1.2-1){.pilcrow}

This document defines HTTP/3: a mapping of HTTP semantics over the QUIC
transport protocol, drawing heavily on the design of HTTP/2. HTTP/3
relies on QUIC to provide confidentiality and integrity protection of
data; peer authentication; and reliable, in-order, per-stream delivery.
While delegating stream lifetime and flow-control issues to QUIC, a
binary framing similar to the HTTP/2 framing is used on each stream.
Some HTTP/2 features are subsumed by QUIC, while other features are
implemented atop QUIC.[¶](#section-1.2-2){.pilcrow}

QUIC is described in \[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. For a
full description of HTTP/2, see
\[[HTTP/2](#RFC9113){.xref}\].[¶](#section-1.2-3){.pilcrow}
:::
:::
:::
:::

::: {#http3-protocol-overview}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [HTTP/3 Protocol Overview](#name-http-3-protocol-overview){.section-name .selfRef} {#name-http-3-protocol-overview}

HTTP/3 provides a transport for HTTP semantics using the QUIC transport
protocol and an internal framing layer similar to
HTTP/2.[¶](#section-2-1){.pilcrow}

Once a client knows that an HTTP/3 server exists at a certain endpoint,
it opens a QUIC connection. QUIC provides protocol negotiation,
stream-based multiplexing, and flow control. Discovery of an HTTP/3
endpoint is described in [Section
3.1](#discovery){.xref}.[¶](#section-2-2){.pilcrow}

Within each stream, the basic unit of HTTP/3 communication is a frame
([Section 7.2](#frames){.xref}). Each frame type serves a different
purpose. For example, [HEADERS](#frame-headers){.xref}[]{#iref-headers-1
.iref} and [DATA](#frame-data){.xref}[]{#iref-data-2 .iref} frames form
the basis of HTTP requests and responses ([Section
4.1](#request-response){.xref}). Frames that apply to the entire
connection are conveyed on a dedicated [control
stream](#control-streams){.xref}[]{#iref-control-stream-3
.iref}.[¶](#section-2-3){.pilcrow}

Multiplexing of requests is performed using the QUIC stream abstraction,
which is described in [Section
2](https://www.rfc-editor.org/rfc/rfc9000#section-2){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. Each request-response pair
consumes a single QUIC stream. Streams are independent of each other, so
one stream that is blocked or suffers packet loss does not prevent
progress on other streams.[¶](#section-2-4){.pilcrow}

Server push is an interaction mode introduced in HTTP/2
(\[[HTTP/2](#RFC9113){.xref}\]) that permits a server to push a
request-response exchange to a client in anticipation of the client
making the indicated request. This trades off network usage against a
potential latency gain. Several HTTP/3 frames are used to manage server
push, such as
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-4
.iref}, [MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-5
.iref}, and
[CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-6
.iref}.[¶](#section-2-5){.pilcrow}

As in HTTP/2, request and response fields are compressed for
transmission. Because HPACK (\[[HPACK](#HPACK){.xref}\]) relies on
in-order transmission of compressed field sections (a guarantee not
provided by QUIC), HTTP/3 replaces HPACK with QPACK
(\[[QPACK](#RFC9204){.xref}\]). QPACK uses separate unidirectional
streams to modify and track field table state, while encoded field
sections refer to the state of the table without modifying
it.[¶](#section-2-6){.pilcrow}

::: {#document-organization}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Document Organization](#name-document-organization){.section-name .selfRef} {#name-document-organization}

The following sections provide a detailed overview of the lifecycle of
an HTTP/3 connection:[¶](#section-2.1-1){.pilcrow}

-   [\"[Connection Setup and Management](#connection-setup){.xref}\"
    ([Section 3](#connection-setup){.xref}) covers how an HTTP/3
    endpoint is discovered and an HTTP/3 connection is
    established.[¶](#section-2.1-2.1){.pilcrow}]{#section-2.1-2.1}
-   [\"[Expressing HTTP Semantics in
    HTTP/3](#http-request-lifecycle){.xref}\" ([Section
    4](#http-request-lifecycle){.xref}) describes how HTTP semantics are
    expressed using
    frames.[¶](#section-2.1-2.2){.pilcrow}]{#section-2.1-2.2}
-   [\"[Connection Closure](#connection-closure){.xref}\" ([Section
    5](#connection-closure){.xref}) describes how HTTP/3 connections are
    terminated, either gracefully or
    abruptly.[¶](#section-2.1-2.3){.pilcrow}]{#section-2.1-2.3}

The details of the wire protocol and interactions with the transport are
described in subsequent sections:[¶](#section-2.1-3){.pilcrow}

-   [\"[Stream Mapping and Usage](#stream-mapping){.xref}\" ([Section
    6](#stream-mapping){.xref}) describes the way QUIC streams are
    used.[¶](#section-2.1-4.1){.pilcrow}]{#section-2.1-4.1}
-   [\"[HTTP Framing Layer](#http-framing-layer){.xref}\" ([Section
    7](#http-framing-layer){.xref}) describes the frames used on most
    streams.[¶](#section-2.1-4.2){.pilcrow}]{#section-2.1-4.2}
-   [\"[Error Handling](#errors){.xref}\" ([Section 8](#errors){.xref})
    describes how error conditions are handled and expressed, either on
    a particular stream or for the connection as a
    whole.[¶](#section-2.1-4.3){.pilcrow}]{#section-2.1-4.3}

Additional resources are provided in the final
sections:[¶](#section-2.1-5){.pilcrow}

-   [\"[Extensions to HTTP/3](#extensions){.xref}\" ([Section
    9](#extensions){.xref}) describes how new capabilities can be added
    in future
    documents.[¶](#section-2.1-6.1){.pilcrow}]{#section-2.1-6.1}
-   [A more detailed comparison between HTTP/2 and HTTP/3 can be found
    in [Appendix
    A](#h2-considerations){.xref}.[¶](#section-2.1-6.2){.pilcrow}]{#section-2.1-6.2}
:::
:::

::: {#conventions-and-terminology}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Conventions and Terminology](#name-conventions-and-terminology){.section-name .selfRef} {#name-conventions-and-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2.2-1){.pilcrow}

This document uses the variable-length integer encoding from
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\].[¶](#section-2.2-2){.pilcrow}

The following terms are used:[¶](#section-2.2-3){.pilcrow}

[]{.break}

abort:

:   An abrupt termination of a connection or stream, possibly due to an
    error condition.[¶](#section-2.2-4.2.1){.pilcrow}

:   

client:

:   The endpoint that initiates an HTTP/3 connection. Clients send HTTP
    requests and receive HTTP
    responses.[¶](#section-2.2-4.4.1){.pilcrow}

:   

connection:

:   A transport-layer connection between two endpoints using QUIC as the
    transport protocol.[¶](#section-2.2-4.6.1){.pilcrow}

:   

[connection error](#errors){.xref}[]{#iref-connection-error-7 .iref}:

:   An error that affects the entire HTTP/3
    connection.[¶](#section-2.2-4.8.1){.pilcrow}

:   

endpoint:

:   Either the client or server of the
    connection.[¶](#section-2.2-4.10.1){.pilcrow}

:   

frame:

:   The smallest unit of communication on a stream in HTTP/3, consisting
    of a header and a variable-length sequence of bytes structured
    according to the frame type.[¶](#section-2.2-4.12.1){.pilcrow}

    Protocol elements called \"frames\" exist in both this document and
    \[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. Where frames from
    \[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\] are referenced, the
    frame name will be prefaced with \"QUIC\". For example, \"QUIC
    CONNECTION_CLOSE frames\". References without this preface refer to
    frames defined in [Section
    7.2](#frames){.xref}.[¶](#section-2.2-4.12.2){.pilcrow}

:   

HTTP/3 connection:

:   A QUIC connection where the negotiated application protocol is
    HTTP/3.[¶](#section-2.2-4.14.1){.pilcrow}

:   

peer:

:   An endpoint. When discussing a particular endpoint, \"peer\" refers
    to the endpoint that is remote to the primary subject of
    discussion.[¶](#section-2.2-4.16.1){.pilcrow}

:   

receiver:

:   An endpoint that is receiving
    frames.[¶](#section-2.2-4.18.1){.pilcrow}

:   

sender:

:   An endpoint that is transmitting
    frames.[¶](#section-2.2-4.20.1){.pilcrow}

:   

server:

:   The endpoint that accepts an HTTP/3 connection. Servers receive HTTP
    requests and send HTTP responses.[¶](#section-2.2-4.22.1){.pilcrow}

:   

stream:

:   A bidirectional or unidirectional bytestream provided by the QUIC
    transport. All streams within an HTTP/3 connection can be considered
    \"HTTP/3 streams\", but multiple stream types are defined within
    HTTP/3.[¶](#section-2.2-4.24.1){.pilcrow}

:   

[stream error](#errors){.xref}[]{#iref-stream-error-8 .iref}:

:   An application-level error on the individual
    stream.[¶](#section-2.2-4.26.1){.pilcrow}

:   

The term \"content\" is defined in [Section
6.4](https://www.rfc-editor.org/rfc/rfc9110#section-6.4){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-2.2-5){.pilcrow}

Finally, the terms \"resource\", \"message\", \"user agent\", \"origin
server\", \"gateway\", \"intermediary\", \"proxy\", and \"tunnel\" are
defined in [Section
3](https://www.rfc-editor.org/rfc/rfc9110#section-3){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-2.2-6){.pilcrow}

Packet diagrams in this document use the format defined in [Section
1.3](https://www.rfc-editor.org/rfc/rfc9000#section-1.3){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\] to illustrate the order and
size of fields.[¶](#section-2.2-7){.pilcrow}
:::
:::
:::
:::

::: {#connection-setup}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Connection Setup and Management](#name-connection-setup-and-manage){.section-name .selfRef} {#name-connection-setup-and-manage}

::: {#discovery}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Discovering an HTTP/3 Endpoint](#name-discovering-an-http-3-endpo){.section-name .selfRef} {#name-discovering-an-http-3-endpo}

HTTP relies on the notion of an authoritative response: a response that
has been determined to be the most appropriate response for that request
given the state of the target resource at the time of response message
origination by (or at the direction of) the origin server identified
within the target URI. Locating an authoritative server for an HTTP URI
is discussed in [Section
4.3](https://www.rfc-editor.org/rfc/rfc9110#section-4.3){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-3.1-1){.pilcrow}

The \"https\" scheme associates authority with possession of a
certificate that the client considers to be trustworthy for the host
identified by the authority component of the URI. Upon receiving a
server certificate in the TLS handshake, the client [MUST]{.bcp14}
verify that the certificate is an acceptable match for the URI\'s origin
server using the process described in [Section
4.3.4](https://www.rfc-editor.org/rfc/rfc9110#section-4.3.4){.relref} of
\[[HTTP](#RFC9110){.xref}\]. If the certificate cannot be verified with
respect to the URI\'s origin server, the client [MUST NOT]{.bcp14}
consider the server authoritative for that
origin.[¶](#section-3.1-2){.pilcrow}

A client [MAY]{.bcp14} attempt access to a resource with an \"https\"
URI by resolving the host identifier to an IP address, establishing a
QUIC connection to that address on the indicated port (including
validation of the server certificate as described above), and sending an
HTTP/3 request message targeting the URI to the server over that secured
connection. Unless some other mechanism is used to select HTTP/3, the
token \"h3\" is used in the Application-Layer Protocol Negotiation
(ALPN; see \[[RFC7301](#RFC7301){.xref}\]) extension during the TLS
handshake.[¶](#section-3.1-3){.pilcrow}

Connectivity problems (e.g., blocking UDP) can result in a failure to
establish a QUIC connection; clients [SHOULD]{.bcp14} attempt to use
TCP-based versions of HTTP in this case.[¶](#section-3.1-4){.pilcrow}

Servers [MAY]{.bcp14} serve HTTP/3 on any UDP port; an alternative
service advertisement always includes an explicit port, and URIs contain
either an explicit port or a default port associated with the
scheme.[¶](#section-3.1-5){.pilcrow}

::: {#alt-svc}
::: {#section-3.1.1 .section}
#### [3.1.1.](#section-3.1.1){.section-number .selfRef} [HTTP Alternative Services](#name-http-alternative-services){.section-name .selfRef} {#name-http-alternative-services}

An HTTP origin can advertise the availability of an equivalent HTTP/3
endpoint via the Alt-Svc HTTP response header field or the HTTP/2 ALTSVC
frame (\[[ALTSVC](#ALTSVC){.xref}\]) using the \"h3\" ALPN
token.[¶](#section-3.1.1-1){.pilcrow}

For example, an origin could indicate in an HTTP response that HTTP/3
was available on UDP port 50781 at the same hostname by including the
following header field:[¶](#section-3.1.1-2){.pilcrow}

::: {#section-3.1.1-3}
``` {.lang-http-message .sourcecode}
Alt-Svc: h3=":50781"
```

[¶](#section-3.1.1-3){.pilcrow}
:::

On receipt of an Alt-Svc record indicating HTTP/3 support, a client
[MAY]{.bcp14} attempt to establish a QUIC connection to the indicated
host and port; if this connection is successful, the client can send
HTTP requests using the mapping described in this
document.[¶](#section-3.1.1-4){.pilcrow}
:::
:::

::: {#other-schemes}
::: {#section-3.1.2 .section}
#### [3.1.2.](#section-3.1.2){.section-number .selfRef} [Other Schemes](#name-other-schemes){.section-name .selfRef} {#name-other-schemes}

Although HTTP is independent of the transport protocol, the \"http\"
scheme associates authority with the ability to receive TCP connections
on the indicated port of whatever host is identified within the
authority component. Because HTTP/3 does not use TCP, HTTP/3 cannot be
used for direct access to the authoritative server for a resource
identified by an \"http\" URI. However, protocol extensions such as
\[[ALTSVC](#ALTSVC){.xref}\] permit the authoritative server to identify
other services that are also authoritative and that might be reachable
over HTTP/3.[¶](#section-3.1.2-1){.pilcrow}

Prior to making requests for an origin whose scheme is not \"https\",
the client [MUST]{.bcp14} ensure the server is willing to serve that
scheme. For origins whose scheme is \"http\", an experimental method to
accomplish this is described in \[[RFC8164](#RFC8164){.xref}\]. Other
mechanisms might be defined for various schemes in the
future.[¶](#section-3.1.2-2){.pilcrow}
:::
:::
:::
:::

::: {#connection-establishment}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Connection Establishment](#name-connection-establishment){.section-name .selfRef} {#name-connection-establishment}

HTTP/3 relies on QUIC version 1 as the underlying transport. The use of
other QUIC transport versions with HTTP/3 [MAY]{.bcp14} be defined by
future specifications.[¶](#section-3.2-1){.pilcrow}

QUIC version 1 uses TLS version 1.3 or greater as its handshake
protocol. HTTP/3 clients [MUST]{.bcp14} support a mechanism to indicate
the target host to the server during the TLS handshake. If the server is
identified by a domain name (\[[DNS-TERMS](#DNS-TERMS){.xref}\]),
clients [MUST]{.bcp14} send the Server Name Indication (SNI;
\[[RFC6066](#RFC6066){.xref}\]) TLS extension unless an alternative
mechanism to indicate the target host is
used.[¶](#section-3.2-2){.pilcrow}

QUIC connections are established as described in
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. During connection
establishment, HTTP/3 support is indicated by selecting the ALPN token
\"h3\" in the TLS handshake. Support for other application-layer
protocols [MAY]{.bcp14} be offered in the same
handshake.[¶](#section-3.2-3){.pilcrow}

While connection-level options pertaining to the core QUIC protocol are
set in the initial crypto handshake, settings specific to HTTP/3 are
conveyed in the [SETTINGS](#frame-settings){.xref}[]{#iref-settings-9
.iref} frame. After the QUIC connection is established, a
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-10 .iref} frame
[MUST]{.bcp14} be sent by each endpoint as the initial frame of their
respective HTTP [control
stream](#control-streams){.xref}[]{#iref-control-stream-11
.iref}.[¶](#section-3.2-4){.pilcrow}
:::
:::

::: {#connection-reuse}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Connection Reuse](#name-connection-reuse){.section-name .selfRef} {#name-connection-reuse}

HTTP/3 connections are persistent across multiple requests. For best
performance, it is expected that clients will not close connections
until it is determined that no further communication with a server is
necessary (for example, when a user navigates away from a particular web
page) or until the server closes the
connection.[¶](#section-3.3-1){.pilcrow}

Once a connection to a server endpoint exists, this connection
[MAY]{.bcp14} be reused for requests with multiple different URI
authority components. To use an existing connection for a new origin,
clients [MUST]{.bcp14} validate the certificate presented by the server
for the new origin server using the process described in [Section
4.3.4](https://www.rfc-editor.org/rfc/rfc9110#section-4.3.4){.relref} of
\[[HTTP](#RFC9110){.xref}\]. This implies that clients will need to
retain the server certificate and any additional information needed to
verify that certificate; clients that do not do so will be unable to
reuse the connection for additional
origins.[¶](#section-3.3-2){.pilcrow}

If the certificate is not acceptable with regard to the new origin for
any reason, the connection [MUST NOT]{.bcp14} be reused and a new
connection [SHOULD]{.bcp14} be established for the new origin. If the
reason the certificate cannot be verified might apply to other origins
already associated with the connection, the client [SHOULD]{.bcp14}
revalidate the server certificate for those origins. For instance, if
validation of a certificate fails because the certificate has expired or
been revoked, this might be used to invalidate all other origins for
which that certificate was used to establish
authority.[¶](#section-3.3-3){.pilcrow}

Clients [SHOULD NOT]{.bcp14} open more than one HTTP/3 connection to a
given IP address and UDP port, where the IP address and port might be
derived from a URI, a selected alternative service
(\[[ALTSVC](#ALTSVC){.xref}\]), a configured proxy, or name resolution
of any of these. A client [MAY]{.bcp14} open multiple HTTP/3 connections
to the same IP address and UDP port using different transport or TLS
configurations but [SHOULD]{.bcp14} avoid creating multiple connections
with the same configuration.[¶](#section-3.3-4){.pilcrow}

Servers are encouraged to maintain open HTTP/3 connections for as long
as possible but are permitted to terminate idle connections if
necessary. When either endpoint chooses to close the HTTP/3 connection,
the terminating endpoint [SHOULD]{.bcp14} first send a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-12 .iref} frame ([Section
5.2](#connection-shutdown){.xref}) so that both endpoints can reliably
determine whether previously sent frames have been processed and
gracefully complete or terminate any necessary remaining
tasks.[¶](#section-3.3-5){.pilcrow}

A server that does not wish clients to reuse HTTP/3 connections for a
particular origin can indicate that it is not authoritative for a
request by sending a 421 (Misdirected Request) status code in response
to the request; see [Section
7.4](https://www.rfc-editor.org/rfc/rfc9110#section-7.4){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-3.3-6){.pilcrow}
:::
:::
:::
:::

::: {#http-request-lifecycle}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Expressing HTTP Semantics in HTTP/3](#name-expressing-http-semantics-i){.section-name .selfRef} {#name-expressing-http-semantics-i}

::: {#request-response}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [HTTP Message Framing](#name-http-message-framing){.section-name .selfRef} {#name-http-message-framing}

A client sends an HTTP request on a [request
stream](#request-streams){.xref}[]{#iref-request-stream-13 .iref}, which
is a client-initiated bidirectional QUIC stream; see [Section
6.1](#request-streams){.xref}. A client [MUST]{.bcp14} send only a
single request on a given stream. A server sends zero or more interim
HTTP responses on the same stream as the request, followed by a single
final HTTP response, as detailed below. See [Section
15](https://www.rfc-editor.org/rfc/rfc9110#section-15){.relref} of
\[[HTTP](#RFC9110){.xref}\] for a description of interim and final HTTP
responses.[¶](#section-4.1-1){.pilcrow}

Pushed responses are sent on a server-initiated unidirectional QUIC
stream; see [Section 6.2.2](#push-streams){.xref}. A server sends zero
or more interim HTTP responses, followed by a single final HTTP
response, in the same manner as a standard response. Push is described
in more detail in [Section
4.6](#server-push){.xref}.[¶](#section-4.1-2){.pilcrow}

On a given stream, receipt of multiple requests or receipt of an
additional HTTP response following a final HTTP response [MUST]{.bcp14}
be treated as [malformed](#malformed){.xref}[]{#iref-malformed-14
.iref}.[¶](#section-4.1-3){.pilcrow}

An HTTP message (request or response) consists
of:[¶](#section-4.1-4){.pilcrow}

1.  [the header section, including message control data, sent as a
    single [HEADERS](#frame-headers){.xref}[]{#iref-headers-15 .iref}
    frame,[¶](#section-4.1-5.1){.pilcrow}]{#section-4.1-5.1}
2.  [optionally, the content, if present, sent as a series of
    [DATA](#frame-data){.xref}[]{#iref-data-16 .iref} frames,
    and[¶](#section-4.1-5.2){.pilcrow}]{#section-4.1-5.2}
3.  [optionally, the trailer section, if present, sent as a single
    [HEADERS](#frame-headers){.xref}[]{#iref-headers-17 .iref}
    frame.[¶](#section-4.1-5.3){.pilcrow}]{#section-4.1-5.3}

Header and trailer sections are described in Sections
[6.3](https://www.rfc-editor.org/rfc/rfc9110#section-6.3){.relref} and
[6.5](https://www.rfc-editor.org/rfc/rfc9110#section-6.5){.relref} of
\[[HTTP](#RFC9110){.xref}\]; the content is described in [Section
6.4](https://www.rfc-editor.org/rfc/rfc9110#section-6.4){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-4.1-6){.pilcrow}

Receipt of an invalid sequence of frames [MUST]{.bcp14} be treated as a
[connection error](#errors){.xref}[]{#iref-connection-error-18 .iref} of
type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-19
.iref}. In particular, a [DATA](#frame-data){.xref}[]{#iref-data-20
.iref} frame before any
[HEADERS](#frame-headers){.xref}[]{#iref-headers-21 .iref} frame, or a
[HEADERS](#frame-headers){.xref}[]{#iref-headers-22 .iref} or
[DATA](#frame-data){.xref}[]{#iref-data-23 .iref} frame after the
trailing [HEADERS](#frame-headers){.xref}[]{#iref-headers-24 .iref}
frame, is considered invalid. Other frame types, especially unknown
frame types, might be permitted subject to their own rules; see [Section
9](#extensions){.xref}.[¶](#section-4.1-7){.pilcrow}

A server [MAY]{.bcp14} send one or more
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-25
.iref} frames before, after, or interleaved with the frames of a
response message. These
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-26
.iref} frames are not part of the response; see [Section
4.6](#server-push){.xref} for more details.
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-27
.iref} frames are not permitted on [push
streams](#push-streams){.xref}[]{#iref-push-stream-28 .iref}; a pushed
response that includes
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-29
.iref} frames [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-30 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-31
.iref}.[¶](#section-4.1-8){.pilcrow}

Frames of unknown types ([Section 9](#extensions){.xref}), including
reserved frames ([Section 7.2.8](#frame-reserved){.xref}) [MAY]{.bcp14}
be sent on a request or [push
stream](#push-streams){.xref}[]{#iref-push-stream-32 .iref} before,
after, or interleaved with other frames described in this
section.[¶](#section-4.1-9){.pilcrow}

The [HEADERS](#frame-headers){.xref}[]{#iref-headers-33 .iref} and
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-34
.iref} frames might reference updates to the QPACK dynamic table. While
these updates are not directly part of the message exchange, they must
be received and processed before the message can be consumed. See
[Section 4.2](#header-formatting){.xref} for more
details.[¶](#section-4.1-10){.pilcrow}

Transfer codings (see [Section
7](https://www.rfc-editor.org/rfc/rfc9112#section-7){.relref} of
\[[HTTP/1.1](#RFC9112){.xref}\]) are not defined for HTTP/3; the
Transfer-Encoding header field [MUST NOT]{.bcp14} be
used.[¶](#section-4.1-11){.pilcrow}

A response [MAY]{.bcp14} consist of multiple messages when and only when
one or more interim responses (1xx; see [Section
15.2](https://www.rfc-editor.org/rfc/rfc9110#section-15.2){.relref} of
\[[HTTP](#RFC9110){.xref}\]) precede a final response to the same
request. Interim responses do not contain content or trailer
sections.[¶](#section-4.1-12){.pilcrow}

An HTTP request/response exchange fully consumes a client-initiated
bidirectional QUIC stream. After sending a request, a client
[MUST]{.bcp14} close the stream for sending. Unless using the CONNECT
method (see [Section 4.4](#connect){.xref}), clients [MUST NOT]{.bcp14}
make stream closure dependent on receiving a response to their request.
After sending a final response, the server [MUST]{.bcp14} close the
stream for sending. At this point, the QUIC stream is fully
closed.[¶](#section-4.1-13){.pilcrow}

When a stream is closed, this indicates the end of the final HTTP
message. Because some messages are large or unbounded, endpoints
[SHOULD]{.bcp14} begin processing partial HTTP messages once enough of
the message has been received to make progress. If a client-initiated
stream terminates without enough of the HTTP message to provide a
complete response, the server [SHOULD]{.bcp14} abort its response stream
with the error code
[H3_REQUEST_INCOMPLETE](#H3_REQUEST_INCOMPLETE){.xref}[]{#iref-h3_request_incomplete-35
.iref}.[¶](#section-4.1-14){.pilcrow}

A server can send a complete response prior to the client sending an
entire request if the response does not depend on any portion of the
request that has not been sent and received. When the server does not
need to receive the remainder of the request, it [MAY]{.bcp14} abort
reading the [request
stream](#request-streams){.xref}[]{#iref-request-stream-36 .iref}, send
a complete response, and cleanly close the sending part of the stream.
The error code [H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-37
.iref} [SHOULD]{.bcp14} be used when requesting that the client stop
sending on the [request
stream](#request-streams){.xref}[]{#iref-request-stream-38 .iref}.
Clients [MUST NOT]{.bcp14} discard complete responses as a result of
having their request terminated abruptly, though clients can always
discard responses at their discretion for other reasons. If the server
sends a partial or complete response but does not abort reading the
request, clients [SHOULD]{.bcp14} continue sending the content of the
request and close the stream normally.[¶](#section-4.1-15){.pilcrow}

::: {#request-cancellation}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [Request Cancellation and Rejection](#name-request-cancellation-and-re){.section-name .selfRef} {#name-request-cancellation-and-re}

Once a [request
stream](#request-streams){.xref}[]{#iref-request-stream-39 .iref} has
been opened, the request [MAY]{.bcp14} be cancelled by either endpoint.
Clients cancel requests if the response is no longer of interest;
servers cancel requests if they are unable to or choose not to respond.
When possible, it is [RECOMMENDED]{.bcp14} that servers send an HTTP
response with an appropriate status code rather than cancelling a
request it has already begun processing.[¶](#section-4.1.1-1){.pilcrow}

Implementations [SHOULD]{.bcp14} cancel requests by abruptly terminating
any directions of a stream that are still open. To do so, an
implementation resets the sending parts of streams and aborts reading on
the receiving parts of streams; see [Section
2.4](https://www.rfc-editor.org/rfc/rfc9000#section-2.4){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\].[¶](#section-4.1.1-2){.pilcrow}

When the server cancels a request without performing any application
processing, the request is considered \"rejected\". The server
[SHOULD]{.bcp14} abort its response stream with the error code
[H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-40
.iref}. In this context, \"processed\" means that some data from the
stream was passed to some higher layer of software that might have taken
some action as a result. The client can treat requests rejected by the
server as though they had never been sent at all, thereby allowing them
to be retried later.[¶](#section-4.1.1-3){.pilcrow}

Servers [MUST NOT]{.bcp14} use the
[H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-41
.iref} error code for requests that were partially or fully processed.
When a server abandons a response after partial processing, it
[SHOULD]{.bcp14} abort its response stream with the error code
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-42
.iref}.[¶](#section-4.1.1-4){.pilcrow}

Client [SHOULD]{.bcp14} use the error code
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-43
.iref} to cancel requests. Upon receipt of this error code, a server
[MAY]{.bcp14} abruptly terminate the response using the error code
[H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-44
.iref} if no processing was performed. Clients [MUST NOT]{.bcp14} use
the
[H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-45
.iref} error code, except when a server has requested closure of the
[request stream](#request-streams){.xref}[]{#iref-request-stream-46
.iref} with this error code.[¶](#section-4.1.1-5){.pilcrow}

If a stream is cancelled after receiving a complete response, the client
[MAY]{.bcp14} ignore the cancellation and use the response. However, if
a stream is cancelled after receiving a partial response, the response
[SHOULD NOT]{.bcp14} be used. Only idempotent actions such as GET, PUT,
or DELETE can be safely retried; a client [SHOULD NOT]{.bcp14}
automatically retry a request with a non-idempotent method unless it has
some means to know that the request semantics are idempotent independent
of the method or some means to detect that the original request was
never applied. See [Section
9.2.2](https://www.rfc-editor.org/rfc/rfc9110#section-9.2.2){.relref} of
\[[HTTP](#RFC9110){.xref}\] for more
details.[¶](#section-4.1.1-6){.pilcrow}
:::
:::

::: {#malformed}
::: {#section-4.1.2 .section}
#### [4.1.2.](#section-4.1.2){.section-number .selfRef} [Malformed Requests and Responses](#name-malformed-requests-and-resp){.section-name .selfRef} {#name-malformed-requests-and-resp}

[]{#iref-malformed-47 .iref}

A malformed request or response is one that is an otherwise valid
sequence of frames but is invalid due to:[¶](#section-4.1.2-1){.pilcrow}

-   [the presence of prohibited fields or pseudo-header
    fields,[¶](#section-4.1.2-2.1){.pilcrow}]{#section-4.1.2-2.1}
-   [the absence of mandatory pseudo-header
    fields,[¶](#section-4.1.2-2.2){.pilcrow}]{#section-4.1.2-2.2}
-   [invalid values for pseudo-header
    fields,[¶](#section-4.1.2-2.3){.pilcrow}]{#section-4.1.2-2.3}
-   [pseudo-header fields after
    fields,[¶](#section-4.1.2-2.4){.pilcrow}]{#section-4.1.2-2.4}
-   [an invalid sequence of HTTP
    messages,[¶](#section-4.1.2-2.5){.pilcrow}]{#section-4.1.2-2.5}
-   [the inclusion of uppercase field names,
    or[¶](#section-4.1.2-2.6){.pilcrow}]{#section-4.1.2-2.6}
-   [the inclusion of invalid characters in field names or
    values.[¶](#section-4.1.2-2.7){.pilcrow}]{#section-4.1.2-2.7}

A request or response that is defined as having content when it contains
a Content-Length header field ([Section
8.6](https://www.rfc-editor.org/rfc/rfc9110#section-8.6){.relref} of
\[[HTTP](#RFC9110){.xref}\]) is malformed if the value of the
Content-Length header field does not equal the sum of the
[DATA](#frame-data){.xref}[]{#iref-data-48 .iref} frame lengths
received. A response that is defined as never having content, even when
a Content-Length is present, can have a non-zero Content-Length header
field even though no content is included in
[DATA](#frame-data){.xref}[]{#iref-data-49 .iref}
frames.[¶](#section-4.1.2-3){.pilcrow}

Intermediaries that process HTTP requests or responses (i.e., any
intermediary not acting as a tunnel) [MUST NOT]{.bcp14} forward a
malformed request or response. Malformed requests or responses that are
detected [MUST]{.bcp14} be treated as a [stream
error](#errors){.xref}[]{#iref-stream-error-50 .iref} of type
[H3_MESSAGE_ERROR](#H3_MESSAGE_ERROR){.xref}[]{#iref-h3_message_error-51
.iref}.[¶](#section-4.1.2-4){.pilcrow}

For malformed requests, a server [MAY]{.bcp14} send an HTTP response
indicating the error prior to closing or resetting the stream. Clients
[MUST NOT]{.bcp14} accept a malformed response. Note that these
requirements are intended to protect against several types of common
attacks against HTTP; they are deliberately strict because being
permissive can expose implementations to these
vulnerabilities.[¶](#section-4.1.2-5){.pilcrow}
:::
:::
:::
:::

::: {#header-formatting}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [HTTP Fields](#name-http-fields){.section-name .selfRef} {#name-http-fields}

HTTP messages carry metadata as a series of key-value pairs called
\"HTTP fields\"; see Sections
[6.3](https://www.rfc-editor.org/rfc/rfc9110#section-6.3){.relref} and
[6.5](https://www.rfc-editor.org/rfc/rfc9110#section-6.5){.relref} of
\[[HTTP](#RFC9110){.xref}\]. For a listing of registered HTTP fields,
see the \"Hypertext Transfer Protocol (HTTP) Field Name Registry\"
maintained at \<<https://www.iana.org/assignments/http-fields/>\>. Like
HTTP/2, HTTP/3 has additional considerations related to the use of
characters in field names, the Connection header field, and
pseudo-header fields.[¶](#section-4.2-1){.pilcrow}

Field names are strings containing a subset of ASCII characters.
Properties of HTTP field names and values are discussed in more detail
in [Section
5.1](https://www.rfc-editor.org/rfc/rfc9110#section-5.1){.relref} of
\[[HTTP](#RFC9110){.xref}\]. Characters in field names [MUST]{.bcp14} be
converted to lowercase prior to their encoding. A request or response
containing uppercase characters in field names [MUST]{.bcp14} be treated
as [malformed](#malformed){.xref}[]{#iref-malformed-52
.iref}.[¶](#section-4.2-2){.pilcrow}

HTTP/3 does not use the Connection header field to indicate
connection-specific fields; in this protocol, connection-specific
metadata is conveyed by other means. An endpoint [MUST NOT]{.bcp14}
generate an HTTP/3 field section containing connection-specific fields;
any message containing connection-specific fields [MUST]{.bcp14} be
treated as [malformed](#malformed){.xref}[]{#iref-malformed-53
.iref}.[¶](#section-4.2-3){.pilcrow}

The only exception to this is the TE header field, which [MAY]{.bcp14}
be present in an HTTP/3 request header; when it is, it [MUST
NOT]{.bcp14} contain any value other than
\"trailers\".[¶](#section-4.2-4){.pilcrow}

An intermediary transforming an HTTP/1.x message to HTTP/3
[MUST]{.bcp14} remove connection-specific header fields as discussed in
[Section
7.6.1](https://www.rfc-editor.org/rfc/rfc9110#section-7.6.1){.relref} of
\[[HTTP](#RFC9110){.xref}\], or their messages will be treated by other
HTTP/3 endpoints as [malformed](#malformed){.xref}[]{#iref-malformed-54
.iref}.[¶](#section-4.2-5){.pilcrow}

::: {#field-compression}
::: {#section-4.2.1 .section}
#### [4.2.1.](#section-4.2.1){.section-number .selfRef} [Field Compression](#name-field-compression){.section-name .selfRef} {#name-field-compression}

\[[QPACK](#RFC9204){.xref}\] describes a variation of HPACK that gives
an encoder some control over how much head-of-line blocking can be
caused by compression. This allows an encoder to balance compression
efficiency with latency. HTTP/3 uses QPACK to compress header and
trailer sections, including the control data present in the header
section.[¶](#section-4.2.1-1){.pilcrow}

To allow for better compression efficiency, the Cookie header field
(\[[COOKIES](#COOKIES){.xref}\]) [MAY]{.bcp14} be split into separate
field lines, each with one or more cookie-pairs, before compression. If
a decompressed field section contains multiple cookie field lines, these
[MUST]{.bcp14} be concatenated into a single byte string using the
two-byte delimiter of \"`; `\" (ASCII 0x3b, 0x20) before being passed
into a context other than HTTP/2 or HTTP/3, such as an HTTP/1.1
connection, or a generic HTTP server
application.[¶](#section-4.2.1-2){.pilcrow}
:::
:::

::: {#header-size-constraints}
::: {#section-4.2.2 .section}
#### [4.2.2.](#section-4.2.2){.section-number .selfRef} [Header Size Constraints](#name-header-size-constraints){.section-name .selfRef} {#name-header-size-constraints}

An HTTP/3 implementation [MAY]{.bcp14} impose a limit on the maximum
size of the message header it will accept on an individual HTTP message.
A server that receives a larger header section than it is willing to
handle can send an HTTP 431 (Request Header Fields Too Large) status
code (\[[RFC6585](#RFC6585){.xref}\]). A client can discard responses
that it cannot process. The size of a field list is calculated based on
the uncompressed size of fields, including the length of the name and
value in bytes plus an overhead of 32 bytes for each
field.[¶](#section-4.2.2-1){.pilcrow}

If an implementation wishes to advise its peer of this limit, it can be
conveyed as a number of bytes in the
[SETTINGS_MAX_FIELD_SECTION_SIZE](#SETTINGS_MAX_FIELD_SECTION_SIZE){.xref}[]{#iref-settings_max_field_section_
.iref} parameter. An implementation that has received this parameter
[SHOULD NOT]{.bcp14} send an HTTP message header that exceeds the
indicated size, as the peer will likely refuse to process it. However,
an HTTP message can traverse one or more intermediaries before reaching
the origin server; see [Section
3.7](https://www.rfc-editor.org/rfc/rfc9110#section-3.7){.relref} of
\[[HTTP](#RFC9110){.xref}\]. Because this limit is applied separately by
each implementation that processes the message, messages below this
limit are not guaranteed to be accepted.[¶](#section-4.2.2-2){.pilcrow}
:::
:::
:::
:::

::: {#http-control-data}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [HTTP Control Data](#name-http-control-data){.section-name .selfRef} {#name-http-control-data}

Like HTTP/2, HTTP/3 employs a series of pseudo-header fields, where the
field name begins with the `:` character (ASCII 0x3a). These
pseudo-header fields convey message control data; see [Section
6.2](https://www.rfc-editor.org/rfc/rfc9110#section-6.2){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-4.3-1){.pilcrow}

Pseudo-header fields are not HTTP fields. Endpoints [MUST NOT]{.bcp14}
generate pseudo-header fields other than those defined in this document.
However, an extension could negotiate a modification of this
restriction; see [Section
9](#extensions){.xref}.[¶](#section-4.3-2){.pilcrow}

Pseudo-header fields are only valid in the context in which they are
defined. Pseudo-header fields defined for requests [MUST NOT]{.bcp14}
appear in responses; pseudo-header fields defined for responses [MUST
NOT]{.bcp14} appear in requests. Pseudo-header fields [MUST NOT]{.bcp14}
appear in trailer sections. Endpoints [MUST]{.bcp14} treat a request or
response that contains undefined or invalid pseudo-header fields as
[malformed](#malformed){.xref}[]{#iref-malformed-56
.iref}.[¶](#section-4.3-3){.pilcrow}

All pseudo-header fields [MUST]{.bcp14} appear in the header section
before regular header fields. Any request or response that contains a
pseudo-header field that appears in a header section after a regular
header field [MUST]{.bcp14} be treated as
[malformed](#malformed){.xref}[]{#iref-malformed-57
.iref}.[¶](#section-4.3-4){.pilcrow}

::: {#request-pseudo-header-fields}
::: {#section-4.3.1 .section}
#### [4.3.1.](#section-4.3.1){.section-number .selfRef} [Request Pseudo-Header Fields](#name-request-pseudo-header-field){.section-name .selfRef} {#name-request-pseudo-header-field}

The following pseudo-header fields are defined for
requests:[¶](#section-4.3.1-1){.pilcrow}

[]{.break}

\":method\":

:   Contains the HTTP method ([Section
    9](https://www.rfc-editor.org/rfc/rfc9110#section-9){.relref} of
    \[[HTTP](#RFC9110){.xref}\])[¶](#section-4.3.1-2.2.1){.pilcrow}

:   

\":scheme\":

:   Contains the scheme portion of the target URI ([Section
    3.1](https://www.rfc-editor.org/rfc/rfc3986#section-3.1){.relref} of
    \[[URI](#URI){.xref}\]).[¶](#section-4.3.1-2.4.1){.pilcrow}

:   

:   The :scheme pseudo-header is not restricted to URIs with scheme
    \"http\" and \"https\". A proxy or gateway can translate requests
    for non-HTTP schemes, enabling the use of HTTP to interact with
    non-HTTP services.[¶](#section-4.3.1-2.6.1){.pilcrow}

:   

:   See [Section 3.1.2](#other-schemes){.xref} for guidance on using a
    scheme other than \"https\".[¶](#section-4.3.1-2.8.1){.pilcrow}

:   

\":authority\":

:   Contains the authority portion of the target URI ([Section
    3.2](https://www.rfc-editor.org/rfc/rfc3986#section-3.2){.relref} of
    \[[URI](#URI){.xref}\]). The authority [MUST NOT]{.bcp14} include
    the deprecated userinfo subcomponent for URIs of scheme \"http\" or
    \"https\".[¶](#section-4.3.1-2.10.1){.pilcrow}

:   

:   To ensure that the HTTP/1.1 request line can be reproduced
    accurately, this pseudo-header field [MUST]{.bcp14} be omitted when
    translating from an HTTP/1.1 request that has a request target in a
    method-specific form; see [Section
    7.1](https://www.rfc-editor.org/rfc/rfc9110#section-7.1){.relref} of
    \[[HTTP](#RFC9110){.xref}\]. Clients that generate HTTP/3 requests
    directly [SHOULD]{.bcp14} use the :authority pseudo-header field
    instead of the Host header field. An intermediary that converts an
    HTTP/3 request to HTTP/1.1 [MUST]{.bcp14} create a Host field if one
    is not present in a request by copying the value of the :authority
    pseudo-header field.[¶](#section-4.3.1-2.12.1){.pilcrow}

:   

\":path\":

:   Contains the path and query parts of the target URI (the
    \"path-absolute\" production and optionally a `?` character (ASCII
    0x3f) followed by the \"query\" production; see Sections
    [3.3](https://www.rfc-editor.org/rfc/rfc3986#section-3.3){.relref}
    and
    [3.4](https://www.rfc-editor.org/rfc/rfc3986#section-3.4){.relref}
    of \[[URI](#URI){.xref}\].[¶](#section-4.3.1-2.14.1){.pilcrow}

:   

:   This pseudo-header field [MUST NOT]{.bcp14} be empty for \"http\" or
    \"https\" URIs; \"http\" or \"https\" URIs that do not contain a
    path component [MUST]{.bcp14} include a value of `/` (ASCII 0x2f).
    An OPTIONS request that does not include a path component includes
    the value `*` (ASCII 0x2a) for the :path pseudo-header field; see
    [Section
    7.1](https://www.rfc-editor.org/rfc/rfc9110#section-7.1){.relref} of
    \[[HTTP](#RFC9110){.xref}\].[¶](#section-4.3.1-2.16.1){.pilcrow}

:   

All HTTP/3 requests [MUST]{.bcp14} include exactly one value for the
:method, :scheme, and :path pseudo-header fields, unless the request is
a CONNECT request; see [Section
4.4](#connect){.xref}.[¶](#section-4.3.1-3){.pilcrow}

If the :scheme pseudo-header field identifies a scheme that has a
mandatory authority component (including \"http\" and \"https\"), the
request [MUST]{.bcp14} contain either an :authority pseudo-header field
or a Host header field. If these fields are present, they [MUST
NOT]{.bcp14} be empty. If both fields are present, they [MUST]{.bcp14}
contain the same value. If the scheme does not have a mandatory
authority component and none is provided in the request target, the
request [MUST NOT]{.bcp14} contain the :authority pseudo-header or Host
header fields.[¶](#section-4.3.1-4){.pilcrow}

An HTTP request that omits mandatory pseudo-header fields or contains
invalid values for those pseudo-header fields is
[malformed](#malformed){.xref}[]{#iref-malformed-58
.iref}.[¶](#section-4.3.1-5){.pilcrow}

HTTP/3 does not define a way to carry the version identifier that is
included in the HTTP/1.1 request line. HTTP/3 requests implicitly have a
protocol version of \"3.0\".[¶](#section-4.3.1-6){.pilcrow}
:::
:::

::: {#response-pseudo-header-fields}
::: {#section-4.3.2 .section}
#### [4.3.2.](#section-4.3.2){.section-number .selfRef} [Response Pseudo-Header Fields](#name-response-pseudo-header-fiel){.section-name .selfRef} {#name-response-pseudo-header-fiel}

For responses, a single \":status\" pseudo-header field is defined that
carries the HTTP status code; see [Section
15](https://www.rfc-editor.org/rfc/rfc9110#section-15){.relref} of
\[[HTTP](#RFC9110){.xref}\]. This pseudo-header field [MUST]{.bcp14} be
included in all responses; otherwise, the response is
[malformed](#malformed){.xref}[]{#iref-malformed-59 .iref} (see [Section
4.1.2](#malformed){.xref}).[¶](#section-4.3.2-1){.pilcrow}

HTTP/3 does not define a way to carry the version or reason phrase that
is included in an HTTP/1.1 status line. HTTP/3 responses implicitly have
a protocol version of \"3.0\".[¶](#section-4.3.2-2){.pilcrow}
:::
:::
:::
:::

::: {#connect}
::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [The CONNECT Method](#name-the-connect-method){.section-name .selfRef} {#name-the-connect-method}

The CONNECT method requests that the recipient establish a tunnel to the
destination origin server identified by the request-target; see [Section
9.3.6](https://www.rfc-editor.org/rfc/rfc9110#section-9.3.6){.relref} of
\[[HTTP](#RFC9110){.xref}\]. It is primarily used with HTTP proxies to
establish a TLS session with an origin server for the purposes of
interacting with \"https\" resources.[¶](#section-4.4-1){.pilcrow}

In HTTP/1.x, CONNECT is used to convert an entire HTTP connection into a
tunnel to a remote host. In HTTP/2 and HTTP/3, the CONNECT method is
used to establish a tunnel over a single
stream.[¶](#section-4.4-2){.pilcrow}

A CONNECT request [MUST]{.bcp14} be constructed as
follows:[¶](#section-4.4-3){.pilcrow}

-   [The :method pseudo-header field is set to
    \"CONNECT\"[¶](#section-4.4-4.1){.pilcrow}]{#section-4.4-4.1}
-   [The :scheme and :path pseudo-header fields are
    omitted[¶](#section-4.4-4.2){.pilcrow}]{#section-4.4-4.2}
-   [The :authority pseudo-header field contains the host and port to
    connect to (equivalent to the authority-form of the request-target
    of CONNECT requests; see [Section
    7.1](https://www.rfc-editor.org/rfc/rfc9110#section-7.1){.relref} of
    \[[HTTP](#RFC9110){.xref}\]).[¶](#section-4.4-4.3){.pilcrow}]{#section-4.4-4.3}

The [request stream](#request-streams){.xref}[]{#iref-request-stream-60
.iref} remains open at the end of the request to carry the data to be
transferred. A CONNECT request that does not conform to these
restrictions is [malformed](#malformed){.xref}[]{#iref-malformed-61
.iref}.[¶](#section-4.4-5){.pilcrow}

A proxy that supports CONNECT establishes a TCP connection
(\[[RFC0793](#RFC0793){.xref}\]) to the server identified in the
:authority pseudo-header field. Once this connection is successfully
established, the proxy sends a
[HEADERS](#frame-headers){.xref}[]{#iref-headers-62 .iref} frame
containing a 2xx series status code to the client, as defined in
[Section
15.3](https://www.rfc-editor.org/rfc/rfc9110#section-15.3){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-4.4-6){.pilcrow}

All [DATA](#frame-data){.xref}[]{#iref-data-63 .iref} frames on the
stream correspond to data sent or received on the TCP connection. The
payload of any [DATA](#frame-data){.xref}[]{#iref-data-64 .iref} frame
sent by the client is transmitted by the proxy to the TCP server; data
received from the TCP server is packaged into
[DATA](#frame-data){.xref}[]{#iref-data-65 .iref} frames by the proxy.
Note that the size and number of TCP segments is not guaranteed to map
predictably to the size and number of HTTP
[DATA](#frame-data){.xref}[]{#iref-data-66 .iref} or QUIC STREAM
frames.[¶](#section-4.4-7){.pilcrow}

Once the CONNECT method has completed, only
[DATA](#frame-data){.xref}[]{#iref-data-67 .iref} frames are permitted
to be sent on the stream. Extension frames [MAY]{.bcp14} be used if
specifically permitted by the definition of the extension. Receipt of
any other known frame type [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-68 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-69
.iref}.[¶](#section-4.4-8){.pilcrow}

The TCP connection can be closed by either peer. When the client ends
the [request stream](#request-streams){.xref}[]{#iref-request-stream-70
.iref} (that is, the receive stream at the proxy enters the \"Data
Recvd\" state), the proxy will set the FIN bit on its connection to the
TCP server. When the proxy receives a packet with the FIN bit set, it
will close the send stream that it sends to the client. TCP connections
that remain half closed in a single direction are not invalid, but are
often handled poorly by servers, so clients [SHOULD NOT]{.bcp14} close a
stream for sending while they still expect to receive data from the
target of the CONNECT.[¶](#section-4.4-9){.pilcrow}

A TCP [connection error](#errors){.xref}[]{#iref-connection-error-71
.iref} is signaled by abruptly terminating the stream. A proxy treats
any error in the TCP connection, which includes receiving a TCP segment
with the RST bit set, as a [stream
error](#errors){.xref}[]{#iref-stream-error-72 .iref} of type
[H3_CONNECT_ERROR](#H3_CONNECT_ERROR){.xref}[]{#iref-h3_connect_error-73
.iref}.[¶](#section-4.4-10){.pilcrow}

Correspondingly, if a proxy detects an error with the stream or the QUIC
connection, it [MUST]{.bcp14} close the TCP connection. If the proxy
detects that the client has reset the stream or aborted reading from the
stream, it [MUST]{.bcp14} close the TCP connection. If the stream is
reset or reading is aborted by the client, a proxy [SHOULD]{.bcp14}
perform the same operation on the other direction in order to ensure
that both directions of the stream are cancelled. In all these cases, if
the underlying TCP implementation permits it, the proxy [SHOULD]{.bcp14}
send a TCP segment with the RST bit set.[¶](#section-4.4-11){.pilcrow}

Since CONNECT creates a tunnel to an arbitrary server, proxies that
support CONNECT [SHOULD]{.bcp14} restrict its use to a set of known
ports or a list of safe request targets; see [Section
9.3.6](https://www.rfc-editor.org/rfc/rfc9110#section-9.3.6){.relref} of
\[[HTTP](#RFC9110){.xref}\] for more
details.[¶](#section-4.4-12){.pilcrow}
:::
:::

::: {#http-upgrade}
::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [HTTP Upgrade](#name-http-upgrade){.section-name .selfRef} {#name-http-upgrade}

HTTP/3 does not support the HTTP Upgrade mechanism ([Section
7.8](https://www.rfc-editor.org/rfc/rfc9110#section-7.8){.relref} of
\[[HTTP](#RFC9110){.xref}\]) or the 101 (Switching Protocols)
informational status code ([Section
15.2.2](https://www.rfc-editor.org/rfc/rfc9110#section-15.2.2){.relref}
of \[[HTTP](#RFC9110){.xref}\]).[¶](#section-4.5-1){.pilcrow}
:::
:::

::: {#server-push}
::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [Server Push](#name-server-push){.section-name .selfRef} {#name-server-push}

[]{#iref-push-id-74 .iref}

Server push is an interaction mode that permits a server to push a
request-response exchange to a client in anticipation of the client
making the indicated request. This trades off network usage against a
potential latency gain. HTTP/3 server push is similar to what is
described in [Section
8.2](https://www.rfc-editor.org/rfc/rfc9113#section-8.2){.relref} of
\[[HTTP/2](#RFC9113){.xref}\], but it uses different
mechanisms.[¶](#section-4.6-1){.pilcrow}

Each server push is assigned a unique push ID by the server. The push ID
is used to refer to the push in various contexts throughout the lifetime
of the HTTP/3 connection.[¶](#section-4.6-2){.pilcrow}

The push ID space begins at zero and ends at a maximum value set by the
[MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-75 .iref}
frame. In particular, a server is not able to push until after the
client sends a
[MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-76 .iref}
frame. A client sends
[MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-77 .iref}
frames to control the number of pushes that a server can promise. A
server [SHOULD]{.bcp14} use push IDs sequentially, beginning from zero.
A client [MUST]{.bcp14} treat receipt of a [push
stream](#push-streams){.xref}[]{#iref-push-stream-78 .iref} as a
[connection error](#errors){.xref}[]{#iref-connection-error-79 .iref} of
type [H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-80 .iref}
when no [MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-81
.iref} frame has been sent or when the stream references a push ID that
is greater than the maximum push ID.[¶](#section-4.6-3){.pilcrow}

The push ID is used in one or more
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-82
.iref} frames that carry the control data and header fields of the
request message. These frames are sent on the [request
stream](#request-streams){.xref}[]{#iref-request-stream-83 .iref} that
generated the push. This allows the server push to be associated with a
client request. When the same push ID is promised on multiple [request
streams](#request-streams){.xref}[]{#iref-request-stream-84 .iref}, the
decompressed request field sections [MUST]{.bcp14} contain the same
fields in the same order, and both the name and the value in each field
[MUST]{.bcp14} be identical.[¶](#section-4.6-4){.pilcrow}

The push ID is then included with the [push
stream](#push-streams){.xref}[]{#iref-push-stream-85 .iref} that
ultimately fulfills those promises. The [push
stream](#push-streams){.xref}[]{#iref-push-stream-86 .iref} identifies
the push ID of the promise that it fulfills, then contains a response to
the promised request as described in [Section
4.1](#request-response){.xref}.[¶](#section-4.6-5){.pilcrow}

Finally, the push ID can be used in
[CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-87 .iref}
frames; see [Section 7.2.3](#frame-cancel-push){.xref}. Clients use this
frame to indicate they do not wish to receive a promised resource.
Servers use this frame to indicate they will not be fulfilling a
previous promise.[¶](#section-4.6-6){.pilcrow}

Not all requests can be pushed. A server [MAY]{.bcp14} push requests
that have the following properties:[¶](#section-4.6-7){.pilcrow}

-   [cacheable; see [Section
    9.2.3](https://www.rfc-editor.org/rfc/rfc9110#section-9.2.3){.relref}
    of
    \[[HTTP](#RFC9110){.xref}\][¶](#section-4.6-8.1){.pilcrow}]{#section-4.6-8.1}
-   [safe; see [Section
    9.2.1](https://www.rfc-editor.org/rfc/rfc9110#section-9.2.1){.relref}
    of
    \[[HTTP](#RFC9110){.xref}\][¶](#section-4.6-8.2){.pilcrow}]{#section-4.6-8.2}
-   [does not include request content or a trailer
    section[¶](#section-4.6-8.3){.pilcrow}]{#section-4.6-8.3}

The server [MUST]{.bcp14} include a value in the :authority
pseudo-header field for which the server is authoritative. If the client
has not yet validated the connection for the origin indicated by the
pushed request, it [MUST]{.bcp14} perform the same verification process
it would do before sending a request for that origin on the connection;
see [Section 3.3](#connection-reuse){.xref}. If this verification fails,
the client [MUST NOT]{.bcp14} consider the server authoritative for that
origin.[¶](#section-4.6-9){.pilcrow}

Clients [SHOULD]{.bcp14} send a
[CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-88 .iref}
frame upon receipt of a
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-89
.iref} frame carrying a request that is not cacheable, is not known to
be safe, that indicates the presence of request content, or for which it
does not consider the server authoritative. Any corresponding responses
[MUST NOT]{.bcp14} be used or cached.[¶](#section-4.6-10){.pilcrow}

Each pushed response is associated with one or more client requests. The
push is associated with the [request
stream](#request-streams){.xref}[]{#iref-request-stream-90 .iref} on
which the
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-91
.iref} frame was received. The same server push can be associated with
additional client requests using a
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-92
.iref} frame with the same push ID on multiple [request
streams](#request-streams){.xref}[]{#iref-request-stream-93 .iref}.
These associations do not affect the operation of the protocol, but they
[MAY]{.bcp14} be considered by user agents when deciding how to use
pushed resources.[¶](#section-4.6-11){.pilcrow}

Ordering of a
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-94
.iref} frame in relation to certain parts of the response is important.
The server [SHOULD]{.bcp14} send
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-95
.iref} frames prior to sending
[HEADERS](#frame-headers){.xref}[]{#iref-headers-96 .iref} or
[DATA](#frame-data){.xref}[]{#iref-data-97 .iref} frames that reference
the promised responses. This reduces the chance that a client requests a
resource that will be pushed by the
server.[¶](#section-4.6-12){.pilcrow}

Due to reordering, [push
stream](#push-streams){.xref}[]{#iref-push-stream-98 .iref} data can
arrive before the corresponding
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-99
.iref} frame. When a client receives a new [push
stream](#push-streams){.xref}[]{#iref-push-stream-100 .iref} with an
as-yet-unknown push ID, both the associated client request and the
pushed request header fields are unknown. The client can buffer the
stream data in expectation of the matching
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-101
.iref}. The client can use stream flow control ([Section
4.1](https://www.rfc-editor.org/rfc/rfc9000#section-4.1){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]) to limit the amount of
data a server may commit to the pushed stream. Clients [SHOULD]{.bcp14}
abort reading and discard data already read from [push
streams](#push-streams){.xref}[]{#iref-push-stream-102 .iref} if no
corresponding
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-103
.iref} frame is processed in a reasonable amount of
time.[¶](#section-4.6-13){.pilcrow}

Push stream data can also arrive after a client has cancelled a push. In
this case, the client can abort reading the stream with an error code of
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-104
.iref}. This asks the server not to transfer additional data and
indicates that it will be discarded upon
receipt.[¶](#section-4.6-14){.pilcrow}

Pushed responses that are cacheable (see [Section
3](https://www.rfc-editor.org/rfc/rfc9111#section-3){.relref} of
\[[HTTP-CACHING](#RFC9111){.xref}\]) can be stored by the client, if it
implements an HTTP cache. Pushed responses are considered successfully
validated on the origin server (e.g., if the \"no-cache\" cache response
directive is present; see [Section
5.2.2.4](https://www.rfc-editor.org/rfc/rfc9111#section-5.2.2.4){.relref}
of \[[HTTP-CACHING](#RFC9111){.xref}\]) at the time the pushed response
is received.[¶](#section-4.6-15){.pilcrow}

Pushed responses that are not cacheable [MUST NOT]{.bcp14} be stored by
any HTTP cache. They [MAY]{.bcp14} be made available to the application
separately.[¶](#section-4.6-16){.pilcrow}
:::
:::
:::
:::

::: {#connection-closure}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Connection Closure](#name-connection-closure){.section-name .selfRef} {#name-connection-closure}

Once established, an HTTP/3 connection can be used for many requests and
responses over time until the connection is closed. Connection closure
can happen in any of several different ways.[¶](#section-5-1){.pilcrow}

::: {#idle-connections}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Idle Connections](#name-idle-connections){.section-name .selfRef} {#name-idle-connections}

Each QUIC endpoint declares an idle timeout during the handshake. If the
QUIC connection remains idle (no packets received) for longer than this
duration, the peer will assume that the connection has been closed.
HTTP/3 implementations will need to open a new HTTP/3 connection for new
requests if the existing connection has been idle for longer than the
idle timeout negotiated during the QUIC handshake, and they
[SHOULD]{.bcp14} do so if approaching the idle timeout; see [Section
10.1](https://www.rfc-editor.org/rfc/rfc9000#section-10.1){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\].[¶](#section-5.1-1){.pilcrow}

HTTP clients are expected to request that the transport keep connections
open while there are responses outstanding for requests or server
pushes, as described in [Section
10.1.2](https://www.rfc-editor.org/rfc/rfc9000#section-10.1.2){.relref}
of \[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. If the client is not
expecting a response from the server, allowing an idle connection to
time out is preferred over expending effort maintaining a connection
that might not be needed. A gateway [MAY]{.bcp14} maintain connections
in anticipation of need rather than incur the latency cost of connection
establishment to servers. Servers [SHOULD NOT]{.bcp14} actively keep
connections open.[¶](#section-5.1-2){.pilcrow}
:::
:::

::: {#connection-shutdown}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [Connection Shutdown](#name-connection-shutdown){.section-name .selfRef} {#name-connection-shutdown}

Even when a connection is not idle, either endpoint can decide to stop
using the connection and initiate a graceful connection close. Endpoints
initiate the graceful shutdown of an HTTP/3 connection by sending a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-105 .iref} frame. The
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-106 .iref} frame contains
an identifier that indicates to the receiver the range of requests or
pushes that were or might be processed in this connection. The server
sends a client-initiated bidirectional stream ID; the client sends a
[push ID](#server-push){.xref}[]{#iref-push-id-107 .iref}. Requests or
pushes with the indicated identifier or greater are rejected ([Section
4.1.1](#request-cancellation){.xref}) by the sender of the
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-108 .iref}. This
identifier [MAY]{.bcp14} be zero if no requests or pushes were
processed.[¶](#section-5.2-1){.pilcrow}

The information in the [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-109
.iref} frame enables a client and server to agree on which requests or
pushes were accepted prior to the shutdown of the HTTP/3 connection.
Upon sending a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-110 .iref}
frame, the endpoint [SHOULD]{.bcp14} explicitly cancel (see Sections
[4.1.1](#request-cancellation){.xref} and
[7.2.3](#frame-cancel-push){.xref}) any requests or pushes that have
identifiers greater than or equal to the one indicated, in order to
clean up transport state for the affected streams. The endpoint
[SHOULD]{.bcp14} continue to do so as more requests or pushes
arrive.[¶](#section-5.2-2){.pilcrow}

Endpoints [MUST NOT]{.bcp14} initiate new requests or promise new pushes
on the connection after receipt of a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-111 .iref} frame from the
peer. Clients [MAY]{.bcp14} establish a new connection to send
additional requests.[¶](#section-5.2-3){.pilcrow}

Some requests or pushes might already be in
transit:[¶](#section-5.2-4){.pilcrow}

-   ::: {#section-5.2-5.1}
    Upon receipt of a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-112
    .iref} frame, if the client has already sent requests with a stream
    ID greater than or equal to the identifier contained in the
    [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-113 .iref} frame,
    those requests will not be processed. Clients can safely retry
    unprocessed requests on a different HTTP connection. A client that
    is unable to retry requests loses all requests that are in flight
    when the server closes the
    connection.[¶](#section-5.2-5.1.1){.pilcrow}

    Requests on stream IDs less than the stream ID in a
    [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-114 .iref} frame from
    the server might have been processed; their status cannot be known
    until a response is received, the stream is reset individually,
    another [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-115 .iref} is
    received with a lower stream ID than that of the request in
    question, or the connection
    terminates.[¶](#section-5.2-5.1.2){.pilcrow}

    Servers [MAY]{.bcp14} reject individual requests on streams below
    the indicated ID if these requests were not
    processed.[¶](#section-5.2-5.1.3){.pilcrow}
    :::

-   [If a server receives a
    [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-116 .iref} frame after
    having promised pushes with a [push
    ID](#server-push){.xref}[]{#iref-push-id-117 .iref} greater than or
    equal to the identifier contained in the
    [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-118 .iref} frame,
    those pushes will not be
    accepted.[¶](#section-5.2-5.2){.pilcrow}]{#section-5.2-5.2}

Servers [SHOULD]{.bcp14} send a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-119 .iref} frame when the
closing of a connection is known in advance, even if the advance notice
is small, so that the remote peer can know whether or not a request has
been partially processed. For example, if an HTTP client sends a POST at
the same time that a server closes a QUIC connection, the client cannot
know if the server started to process that POST request if the server
does not send a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-120 .iref}
frame to indicate what streams it might have acted
on.[¶](#section-5.2-6){.pilcrow}

An endpoint [MAY]{.bcp14} send multiple
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-121 .iref} frames
indicating different identifiers, but the identifier in each frame [MUST
NOT]{.bcp14} be greater than the identifier in any previous frame, since
clients might already have retried unprocessed requests on another HTTP
connection. Receiving a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-122 .iref} containing a
larger identifier than previously received [MUST]{.bcp14} be treated as
a [connection error](#errors){.xref}[]{#iref-connection-error-123 .iref}
of type [H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-124
.iref}.[¶](#section-5.2-7){.pilcrow}

An endpoint that is attempting to gracefully shut down a connection can
send a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-125 .iref} frame
with a value set to the maximum possible value (2^62^-4 for servers,
2^62^-1 for clients). This ensures that the peer stops creating new
requests or pushes. After allowing time for any in-flight requests or
pushes to arrive, the endpoint can send another
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-126 .iref} frame
indicating which requests or pushes it might accept before the end of
the connection. This ensures that a connection can be cleanly shut down
without losing requests.[¶](#section-5.2-8){.pilcrow}

A client has more flexibility in the value it chooses for the Push ID
field in a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-127 .iref} that
it sends. A value of 2^62^-1 indicates that the server can continue
fulfilling pushes that have already been promised. A smaller value
indicates the client will reject pushes with push IDs greater than or
equal to this value. Like the server, the client [MAY]{.bcp14} send
subsequent [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-128 .iref}
frames so long as the specified [push
ID](#server-push){.xref}[]{#iref-push-id-129 .iref} is no greater than
any previously sent value.[¶](#section-5.2-9){.pilcrow}

Even when a [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-130 .iref}
indicates that a given request or push will not be processed or accepted
upon receipt, the underlying transport resources still exist. The
endpoint that initiated these requests can cancel them to clean up
transport state.[¶](#section-5.2-10){.pilcrow}

Once all accepted requests and pushes have been processed, the endpoint
can permit the connection to become idle, or it [MAY]{.bcp14} initiate
an immediate closure of the connection. An endpoint that completes a
graceful shutdown [SHOULD]{.bcp14} use the
[H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-131 .iref} error
code when closing the connection.[¶](#section-5.2-11){.pilcrow}

If a client has consumed all available bidirectional stream IDs with
requests, the server need not send a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-132 .iref} frame, since
the client is unable to make further
requests.[¶](#section-5.2-12){.pilcrow}
:::
:::

::: {#immediate-application-closure}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Immediate Application Closure](#name-immediate-application-closu){.section-name .selfRef} {#name-immediate-application-closu}

An HTTP/3 implementation can immediately close the QUIC connection at
any time. This results in sending a QUIC CONNECTION_CLOSE frame to the
peer indicating that the application layer has terminated the
connection. The application error code in this frame indicates to the
peer why the connection is being closed. See [Section 8](#errors){.xref}
for error codes that can be used when closing a connection in
HTTP/3.[¶](#section-5.3-1){.pilcrow}

Before closing the connection, a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-133 .iref} frame
[MAY]{.bcp14} be sent to allow the client to retry some requests.
Including the [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-134 .iref}
frame in the same packet as the QUIC CONNECTION_CLOSE frame improves the
chances of the frame being received by
clients.[¶](#section-5.3-2){.pilcrow}

If there are open streams that have not been explicitly closed, they are
implicitly closed when the connection is closed; see [Section
10.2](https://www.rfc-editor.org/rfc/rfc9000#section-10.2){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\].[¶](#section-5.3-3){.pilcrow}
:::
:::

::: {#transport-closure}
::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [Transport Closure](#name-transport-closure){.section-name .selfRef} {#name-transport-closure}

For various reasons, the QUIC transport could indicate to the
application layer that the connection has terminated. This might be due
to an explicit closure by the peer, a transport-level error, or a change
in network topology that interrupts
connectivity.[¶](#section-5.4-1){.pilcrow}

If a connection terminates without a
[GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-135 .iref} frame, clients
[MUST]{.bcp14} assume that any request that was sent, whether in whole
or in part, might have been processed.[¶](#section-5.4-2){.pilcrow}
:::
:::
:::
:::

::: {#stream-mapping}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Stream Mapping and Usage](#name-stream-mapping-and-usage){.section-name .selfRef} {#name-stream-mapping-and-usage}

A QUIC stream provides reliable in-order delivery of bytes, but makes no
guarantees about order of delivery with regard to bytes on other
streams. In version 1 of QUIC, the stream data containing HTTP frames is
carried by QUIC STREAM frames, but this framing is invisible to the HTTP
framing layer. The transport layer buffers and orders received stream
data, exposing a reliable byte stream to the application. Although QUIC
permits out-of-order delivery within a stream, HTTP/3 does not make use
of this feature.[¶](#section-6-1){.pilcrow}

QUIC streams can be either unidirectional, carrying data only from
initiator to receiver, or bidirectional, carrying data in both
directions. Streams can be initiated by either the client or the server.
For more detail on QUIC streams, see [Section
2](https://www.rfc-editor.org/rfc/rfc9000#section-2){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\].[¶](#section-6-2){.pilcrow}

When HTTP fields and data are sent over QUIC, the QUIC layer handles
most of the stream management. HTTP does not need to do any separate
multiplexing when using QUIC: data sent over a QUIC stream always maps
to a particular HTTP transaction or to the entire HTTP/3 connection
context.[¶](#section-6-3){.pilcrow}

::: {#request-streams}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Bidirectional Streams](#name-bidirectional-streams){.section-name .selfRef} {#name-bidirectional-streams}

[]{#iref-request-stream-136 .iref}

All client-initiated bidirectional streams are used for HTTP requests
and responses. A bidirectional stream ensures that the response can be
readily correlated with the request. These streams are referred to as
request streams.[¶](#section-6.1-1){.pilcrow}

This means that the client\'s first request occurs on QUIC stream 0,
with subsequent requests on streams 4, 8, and so on. In order to permit
these streams to open, an HTTP/3 server [SHOULD]{.bcp14} configure
non-zero minimum values for the number of permitted streams and the
initial stream flow-control window. So as to not unnecessarily limit
parallelism, at least 100 request streams [SHOULD]{.bcp14} be permitted
at a time.[¶](#section-6.1-2){.pilcrow}

HTTP/3 does not use server-initiated bidirectional streams, though an
extension could define a use for these streams. Clients [MUST]{.bcp14}
treat receipt of a server-initiated bidirectional stream as a
[connection error](#errors){.xref}[]{#iref-connection-error-137 .iref}
of type
[H3_STREAM_CREATION_ERROR](#H3_STREAM_CREATION_ERROR){.xref}[]{#iref-h3_stream_creation_error-13
.iref} unless such an extension has been
negotiated.[¶](#section-6.1-3){.pilcrow}
:::
:::

::: {#unidirectional-streams}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Unidirectional Streams](#name-unidirectional-streams){.section-name .selfRef} {#name-unidirectional-streams}

Unidirectional streams, in either direction, are used for a range of
purposes. The purpose is indicated by a stream type, which is sent as a
variable-length integer at the start of the stream. The format and
structure of data that follows this integer is determined by the stream
type.[¶](#section-6.2-1){.pilcrow}

[]{#name-unidirectional-stream-heade}

::: {#section-6.2-2.1 .alignLeft .art-ascii-art .art-text .artwork}
    Unidirectional Stream Header {
      Stream Type (i),
    }
:::

[Figure 1](#figure-1){.selfRef}: [Unidirectional Stream
Header](#name-unidirectional-stream-heade){.selfRef}

Two stream types are defined in this document: [control
streams](#control-streams){.xref}[]{#iref-control-stream-139 .iref}
([Section 6.2.1](#control-streams){.xref}) and [push
streams](#push-streams){.xref}[]{#iref-push-stream-140 .iref} ([Section
6.2.2](#push-streams){.xref}). \[[QPACK](#RFC9204){.xref}\] defines two
additional stream types. Other stream types can be defined by extensions
to HTTP/3; see [Section 9](#extensions){.xref} for more details. Some
stream types are reserved ([Section
6.2.3](#stream-grease){.xref}).[¶](#section-6.2-3){.pilcrow}

The performance of HTTP/3 connections in the early phase of their
lifetime is sensitive to the creation and exchange of data on
unidirectional streams. Endpoints that excessively restrict the number
of streams or the flow-control window of these streams will increase the
chance that the remote peer reaches the limit early and becomes blocked.
In particular, implementations should consider that remote peers may
wish to exercise reserved stream behavior ([Section
6.2.3](#stream-grease){.xref}) with some of the unidirectional streams
they are permitted to use.[¶](#section-6.2-4){.pilcrow}

Each endpoint needs to create at least one unidirectional stream for the
HTTP [control
stream](#control-streams){.xref}[]{#iref-control-stream-141 .iref}.
QPACK requires two additional unidirectional streams, and other
extensions might require further streams. Therefore, the transport
parameters sent by both clients and servers [MUST]{.bcp14} allow the
peer to create at least three unidirectional streams. These transport
parameters [SHOULD]{.bcp14} also provide at least 1,024 bytes of
flow-control credit to each unidirectional
stream.[¶](#section-6.2-5){.pilcrow}

Note that an endpoint is not required to grant additional credits to
create more unidirectional streams if its peer consumes all the initial
credits before creating the critical unidirectional streams. Endpoints
[SHOULD]{.bcp14} create the HTTP [control
stream](#control-streams){.xref}[]{#iref-control-stream-142 .iref} as
well as the unidirectional streams required by mandatory extensions
(such as the QPACK encoder and decoder streams) first, and then create
additional streams as allowed by their
peer.[¶](#section-6.2-6){.pilcrow}

If the stream header indicates a stream type that is not supported by
the recipient, the remainder of the stream cannot be consumed as the
semantics are unknown. Recipients of unknown stream types [MUST]{.bcp14}
either abort reading of the stream or discard incoming data without
further processing. If reading is aborted, the recipient
[SHOULD]{.bcp14} use the
[H3_STREAM_CREATION_ERROR](#H3_STREAM_CREATION_ERROR){.xref}[]{#iref-h3_stream_creation_error-14
.iref} error code or a reserved error code ([Section
8.1](#http-error-codes){.xref}). The recipient [MUST NOT]{.bcp14}
consider unknown stream types to be a [connection
error](#errors){.xref}[]{#iref-connection-error-144 .iref} of any
kind.[¶](#section-6.2-7){.pilcrow}

As certain stream types can affect connection state, a recipient [SHOULD
NOT]{.bcp14} discard data from incoming unidirectional streams prior to
reading the stream type.[¶](#section-6.2-8){.pilcrow}

Implementations [MAY]{.bcp14} send stream types before knowing whether
the peer supports them. However, stream types that could modify the
state or semantics of existing protocol components, including QPACK or
other extensions, [MUST NOT]{.bcp14} be sent until the peer is known to
support them.[¶](#section-6.2-9){.pilcrow}

A sender can close or reset a unidirectional stream unless otherwise
specified. A receiver [MUST]{.bcp14} tolerate unidirectional streams
being closed or reset prior to the reception of the unidirectional
stream header.[¶](#section-6.2-10){.pilcrow}

::: {#control-streams}
::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [Control Streams](#name-control-streams){.section-name .selfRef} {#name-control-streams}

[]{#iref-control-stream-145 .iref}

A control stream is indicated by a stream type of 0x00. Data on this
stream consists of HTTP/3 frames, as defined in [Section
7.2](#frames){.xref}.[¶](#section-6.2.1-1){.pilcrow}

Each side [MUST]{.bcp14} initiate a single control stream at the
beginning of the connection and send its
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-146 .iref} frame as
the first frame on this stream. If the first frame of the control stream
is any other frame type, this [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-147 .iref} of type
[H3_MISSING_SETTINGS](#H3_MISSING_SETTINGS){.xref}[]{#iref-h3_missing_settings-148
.iref}. Only one control stream per peer is permitted; receipt of a
second stream claiming to be a control stream [MUST]{.bcp14} be treated
as a [connection error](#errors){.xref}[]{#iref-connection-error-149
.iref} of type
[H3_STREAM_CREATION_ERROR](#H3_STREAM_CREATION_ERROR){.xref}[]{#iref-h3_stream_creation_error-15
.iref}. The sender [MUST NOT]{.bcp14} close the control stream, and the
receiver [MUST NOT]{.bcp14} request that the sender close the control
stream. If either control stream is closed at any point, this
[MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-151 .iref} of type
[H3_CLOSED_CRITICAL_STREAM](#H3_CLOSED_CRITICAL_STREAM){.xref}[]{#iref-h3_closed_critical_stream-1
.iref}. Connection errors are described in [Section
8](#errors){.xref}.[¶](#section-6.2.1-2){.pilcrow}

Because the contents of the control stream are used to manage the
behavior of other streams, endpoints [SHOULD]{.bcp14} provide enough
flow-control credit to keep the peer\'s control stream from becoming
blocked.[¶](#section-6.2.1-3){.pilcrow}

A pair of unidirectional streams is used rather than a single
bidirectional stream. This allows either peer to send data as soon as it
is able. Depending on whether 0-RTT is available on the QUIC connection,
either client or server might be able to send stream data
first.[¶](#section-6.2.1-4){.pilcrow}
:::
:::

::: {#push-streams}
::: {#section-6.2.2 .section}
#### [6.2.2.](#section-6.2.2){.section-number .selfRef} [Push Streams](#name-push-streams){.section-name .selfRef} {#name-push-streams}

[]{#iref-push-stream-153 .iref}

Server push is an optional feature introduced in HTTP/2 that allows a
server to initiate a response before a request has been made. See
[Section 4.6](#server-push){.xref} for more
details.[¶](#section-6.2.2-1){.pilcrow}

A push stream is indicated by a stream type of 0x01, followed by the
[push ID](#server-push){.xref}[]{#iref-push-id-154 .iref} of the promise
that it fulfills, encoded as a variable-length integer. The remaining
data on this stream consists of HTTP/3 frames, as defined in [Section
7.2](#frames){.xref}, and fulfills a promised server push by zero or
more interim HTTP responses followed by a single final HTTP response, as
defined in [Section 4.1](#request-response){.xref}. Server push and push
IDs are described in [Section
4.6](#server-push){.xref}.[¶](#section-6.2.2-2){.pilcrow}

Only servers can push; if a server receives a client-initiated push
stream, this [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-155 .iref} of type
[H3_STREAM_CREATION_ERROR](#H3_STREAM_CREATION_ERROR){.xref}[]{#iref-h3_stream_creation_error-156
.iref}.[¶](#section-6.2.2-3){.pilcrow}

[]{#name-push-stream-header}

::: {#section-6.2.2-4.1 .alignLeft .art-ascii-art .art-text .artwork}
    Push Stream Header {
      Stream Type (i) = 0x01,
      Push ID (i),
    }
:::

[Figure 2](#figure-2){.selfRef}: [Push Stream
Header](#name-push-stream-header){.selfRef}

A client [SHOULD NOT]{.bcp14} abort reading on a push stream prior to
reading the push stream header, as this could lead to disagreement
between client and server on which push IDs have already been
consumed.[¶](#section-6.2.2-5){.pilcrow}

Each [push ID](#server-push){.xref}[]{#iref-push-id-157 .iref}
[MUST]{.bcp14} only be used once in a push stream header. If a client
detects that a push stream header includes a [push
ID](#server-push){.xref}[]{#iref-push-id-158 .iref} that was used in
another push stream header, the client [MUST]{.bcp14} treat this as a
[connection error](#errors){.xref}[]{#iref-connection-error-159 .iref}
of type [H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-160
.iref}.[¶](#section-6.2.2-6){.pilcrow}
:::
:::

::: {#stream-grease}
::: {#section-6.2.3 .section}
#### [6.2.3.](#section-6.2.3){.section-number .selfRef} [Reserved Stream Types](#name-reserved-stream-types){.section-name .selfRef} {#name-reserved-stream-types}

Stream types of the format `0x1f * N + 0x21` for non-negative integer
values of `N` are reserved to exercise the requirement that unknown
types be ignored. These streams have no semantics, and they can be sent
when application-layer padding is desired. They [MAY]{.bcp14} also be
sent on connections where no data is currently being transferred.
Endpoints [MUST NOT]{.bcp14} consider these streams to have any meaning
upon receipt.[¶](#section-6.2.3-1){.pilcrow}

The payload and length of the stream are selected in any manner the
sending implementation chooses. When sending a reserved stream type, the
implementation [MAY]{.bcp14} either terminate the stream cleanly or
reset it. When resetting the stream, either the
[H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-161 .iref} error
code or a reserved error code ([Section 8.1](#http-error-codes){.xref})
[SHOULD]{.bcp14} be used.[¶](#section-6.2.3-2){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#http-framing-layer}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [HTTP Framing Layer](#name-http-framing-layer){.section-name .selfRef} {#name-http-framing-layer}

HTTP frames are carried on QUIC streams, as described in [Section
6](#stream-mapping){.xref}. HTTP/3 defines three stream types: [control
stream](#control-streams){.xref}[]{#iref-control-stream-162 .iref},
[request stream](#request-streams){.xref}[]{#iref-request-stream-163
.iref}, and [push stream](#push-streams){.xref}[]{#iref-push-stream-164
.iref}. This section describes HTTP/3 frame formats and their permitted
stream types; see [Table 1](#stream-frame-mapping){.xref} for an
overview. A comparison between HTTP/2 and HTTP/3 frames is provided in
[Appendix A.2](#h2-frames){.xref}.[¶](#section-7-1){.pilcrow}

[]{#name-http-3-frames-and-stream-ty}

::: {#stream-frame-mapping}
  Frame                                                                        Control Stream   Request Stream   Push Stream   Section
  ---------------------------------------------------------------------------- ---------------- ---------------- ------------- ---------------------------------------------
  [DATA](#frame-data){.xref}[]{#iref-data-165 .iref}                           No               Yes              Yes           [Section 7.2.1](#frame-data){.xref}
  [HEADERS](#frame-headers){.xref}[]{#iref-headers-166 .iref}                  No               Yes              Yes           [Section 7.2.2](#frame-headers){.xref}
  [CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-167 .iref}      Yes              No               No            [Section 7.2.3](#frame-cancel-push){.xref}
  [SETTINGS](#frame-settings){.xref}[]{#iref-settings-168 .iref}               Yes (1)          No               No            [Section 7.2.4](#frame-settings){.xref}
  [PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-169 .iref}   No               Yes              No            [Section 7.2.5](#frame-push-promise){.xref}
  [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-170 .iref}                     Yes              No               No            [Section 7.2.6](#frame-goaway){.xref}
  [MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-171 .iref}      Yes              No               No            [Section 7.2.7](#frame-max-push-id){.xref}
  Reserved                                                                     Yes              Yes              Yes           [Section 7.2.8](#frame-reserved){.xref}

  : [Table 1](#table-1){.selfRef}: [HTTP/3 Frames and Stream Type
  Overview](#name-http-3-frames-and-stream-ty){.selfRef}
:::

The [SETTINGS](#frame-settings){.xref}[]{#iref-settings-172 .iref} frame
can only occur as the first frame of a Control stream; this is indicated
in [Table 1](#stream-frame-mapping){.xref} with a (1). Specific guidance
is provided in the relevant section.[¶](#section-7-3){.pilcrow}

Note that, unlike QUIC frames, HTTP/3 frames can span multiple
packets.[¶](#section-7-4){.pilcrow}

::: {#frame-layout}
::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Frame Layout](#name-frame-layout){.section-name .selfRef} {#name-frame-layout}

All frames have the following format:[¶](#section-7.1-1){.pilcrow}

[]{#name-http-3-frame-format}

::: {#section-7.1-2.1 .alignLeft .art-ascii-art .art-text .artwork}
    HTTP/3 Frame Format {
      Type (i),
      Length (i),
      Frame Payload (..),
    }
:::

[Figure 3](#figure-3){.selfRef}: [HTTP/3 Frame
Format](#name-http-3-frame-format){.selfRef}

A frame includes the following fields:[¶](#section-7.1-3){.pilcrow}

[]{.break}

Type:

:   A variable-length integer that identifies the frame
    type.[¶](#section-7.1-4.2.1){.pilcrow}

:   

Length:

:   A variable-length integer that describes the length in bytes of the
    Frame Payload.[¶](#section-7.1-4.4.1){.pilcrow}

:   

Frame Payload:

:   A payload, the semantics of which are determined by the Type
    field.[¶](#section-7.1-4.6.1){.pilcrow}

:   

Each frame\'s payload [MUST]{.bcp14} contain exactly the fields
identified in its description. A frame payload that contains additional
bytes after the identified fields or a frame payload that terminates
before the end of the identified fields [MUST]{.bcp14} be treated as a
[connection error](#errors){.xref}[]{#iref-connection-error-173 .iref}
of type
[H3_FRAME_ERROR](#H3_FRAME_ERROR){.xref}[]{#iref-h3_frame_error-174
.iref}. In particular, redundant length encodings [MUST]{.bcp14} be
verified to be self-consistent; see [Section
10.8](#frame-parsing){.xref}.[¶](#section-7.1-5){.pilcrow}

When a stream terminates cleanly, if the last frame on the stream was
truncated, this [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-175 .iref} of type
[H3_FRAME_ERROR](#H3_FRAME_ERROR){.xref}[]{#iref-h3_frame_error-176
.iref}. Streams that terminate abruptly may be reset at any point in a
frame.[¶](#section-7.1-6){.pilcrow}
:::
:::

::: {#frames}
::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Frame Definitions](#name-frame-definitions){.section-name .selfRef} {#name-frame-definitions}

::: {#frame-data}
::: {#section-7.2.1 .section}
#### [7.2.1.](#section-7.2.1){.section-number .selfRef} [DATA](#name-data){.section-name .selfRef} {#name-data}

[]{#iref-data-177 .iref}

DATA frames (type=0x00) convey arbitrary, variable-length sequences of
bytes associated with HTTP request or response
content.[¶](#section-7.2.1-1){.pilcrow}

DATA frames [MUST]{.bcp14} be associated with an HTTP request or
response. If a DATA frame is received on a [control
stream](#control-streams){.xref}[]{#iref-control-stream-178 .iref}, the
recipient [MUST]{.bcp14} respond with a [connection
error](#errors){.xref}[]{#iref-connection-error-179 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-180
.iref}.[¶](#section-7.2.1-2){.pilcrow}

[]{#name-data-frame}

::: {#section-7.2.1-3.1 .alignLeft .art-ascii-art .art-text .artwork}
    DATA Frame {
      Type (i) = 0x00,
      Length (i),
      Data (..),
    }
:::

[Figure 4](#figure-4){.selfRef}: [DATA
Frame](#name-data-frame){.selfRef}
:::
:::

::: {#frame-headers}
::: {#section-7.2.2 .section}
#### [7.2.2.](#section-7.2.2){.section-number .selfRef} [HEADERS](#name-headers){.section-name .selfRef} {#name-headers}

[]{#iref-headers-181 .iref}

The HEADERS frame (type=0x01) is used to carry an HTTP field section
that is encoded using QPACK. See \[[QPACK](#RFC9204){.xref}\] for more
details.[¶](#section-7.2.2-1){.pilcrow}

[]{#name-headers-frame}

::: {#section-7.2.2-2.1 .alignLeft .art-ascii-art .art-text .artwork}
    HEADERS Frame {
      Type (i) = 0x01,
      Length (i),
      Encoded Field Section (..),
    }
:::

[Figure 5](#figure-5){.selfRef}: [HEADERS
Frame](#name-headers-frame){.selfRef}

HEADERS frames can only be sent on [request
streams](#request-streams){.xref}[]{#iref-request-stream-182 .iref} or
[push streams](#push-streams){.xref}[]{#iref-push-stream-183 .iref}. If
a HEADERS frame is received on a [control
stream](#control-streams){.xref}[]{#iref-control-stream-184 .iref}, the
recipient [MUST]{.bcp14} respond with a [connection
error](#errors){.xref}[]{#iref-connection-error-185 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-186
.iref}.[¶](#section-7.2.2-3){.pilcrow}
:::
:::

::: {#frame-cancel-push}
::: {#section-7.2.3 .section}
#### [7.2.3.](#section-7.2.3){.section-number .selfRef} [CANCEL_PUSH](#name-cancel_push){.section-name .selfRef} {#name-cancel_push}

[]{#iref-cancel_push-187 .iref}

The CANCEL_PUSH frame (type=0x03) is used to request cancellation of a
server push prior to the [push
stream](#push-streams){.xref}[]{#iref-push-stream-188 .iref} being
received. The CANCEL_PUSH frame identifies a server push by [push
ID](#server-push){.xref}[]{#iref-push-id-189 .iref} (see [Section
4.6](#server-push){.xref}), encoded as a variable-length
integer.[¶](#section-7.2.3-1){.pilcrow}

When a client sends a CANCEL_PUSH frame, it is indicating that it does
not wish to receive the promised resource. The server [SHOULD]{.bcp14}
abort sending the resource, but the mechanism to do so depends on the
state of the corresponding [push
stream](#push-streams){.xref}[]{#iref-push-stream-190 .iref}. If the
server has not yet created a [push
stream](#push-streams){.xref}[]{#iref-push-stream-191 .iref}, it does
not create one. If the [push
stream](#push-streams){.xref}[]{#iref-push-stream-192 .iref} is open,
the server [SHOULD]{.bcp14} abruptly terminate that stream. If the [push
stream](#push-streams){.xref}[]{#iref-push-stream-193 .iref} has already
ended, the server [MAY]{.bcp14} still abruptly terminate the stream or
[MAY]{.bcp14} take no action.[¶](#section-7.2.3-2){.pilcrow}

A server sends a CANCEL_PUSH frame to indicate that it will not be
fulfilling a promise that was previously sent. The client cannot expect
the corresponding promise to be fulfilled, unless it has already
received and processed the promised response. Regardless of whether a
[push stream](#push-streams){.xref}[]{#iref-push-stream-194 .iref} has
been opened, a server [SHOULD]{.bcp14} send a CANCEL_PUSH frame when it
determines that promise will not be fulfilled. If a stream has already
been opened, the server can abort sending on the stream with an error
code of
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-195
.iref}.[¶](#section-7.2.3-3){.pilcrow}

Sending a CANCEL_PUSH frame has no direct effect on the state of
existing [push streams](#push-streams){.xref}[]{#iref-push-stream-196
.iref}. A client [SHOULD NOT]{.bcp14} send a CANCEL_PUSH frame when it
has already received a corresponding [push
stream](#push-streams){.xref}[]{#iref-push-stream-197 .iref}. A [push
stream](#push-streams){.xref}[]{#iref-push-stream-198 .iref} could
arrive after a client has sent a CANCEL_PUSH frame, because a server
might not have processed the CANCEL_PUSH. The client [SHOULD]{.bcp14}
abort reading the stream with an error code of
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-199
.iref}.[¶](#section-7.2.3-4){.pilcrow}

A CANCEL_PUSH frame is sent on the [control
stream](#control-streams){.xref}[]{#iref-control-stream-200 .iref}.
Receiving a CANCEL_PUSH frame on a stream other than the [control
stream](#control-streams){.xref}[]{#iref-control-stream-201 .iref}
[MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-202 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-203
.iref}.[¶](#section-7.2.3-5){.pilcrow}

[]{#name-cancel_push-frame}

::: {#section-7.2.3-6.1 .alignLeft .art-ascii-art .art-text .artwork}
    CANCEL_PUSH Frame {
      Type (i) = 0x03,
      Length (i),
      Push ID (i),
    }
:::

[Figure 6](#figure-6){.selfRef}: [CANCEL_PUSH
Frame](#name-cancel_push-frame){.selfRef}

The CANCEL_PUSH frame carries a [push
ID](#server-push){.xref}[]{#iref-push-id-204 .iref} encoded as a
variable-length integer. The Push ID field identifies the server push
that is being cancelled; see [Section 4.6](#server-push){.xref}. If a
CANCEL_PUSH frame is received that references a [push
ID](#server-push){.xref}[]{#iref-push-id-205 .iref} greater than
currently allowed on the connection, this [MUST]{.bcp14} be treated as a
[connection error](#errors){.xref}[]{#iref-connection-error-206 .iref}
of type [H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-207
.iref}.[¶](#section-7.2.3-7){.pilcrow}

If the client receives a CANCEL_PUSH frame, that frame might identify a
[push ID](#server-push){.xref}[]{#iref-push-id-208 .iref} that has not
yet been mentioned by a
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-209
.iref} frame due to reordering. If a server receives a CANCEL_PUSH frame
for a [push ID](#server-push){.xref}[]{#iref-push-id-210 .iref} that has
not yet been mentioned by a
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-211
.iref} frame, this [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-212 .iref} of type
[H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-213
.iref}.[¶](#section-7.2.3-8){.pilcrow}
:::
:::

::: {#frame-settings}
::: {#section-7.2.4 .section}
#### [7.2.4.](#section-7.2.4){.section-number .selfRef} [SETTINGS](#name-settings){.section-name .selfRef} {#name-settings}

[]{#iref-settings-214 .iref}

The SETTINGS frame (type=0x04) conveys configuration parameters that
affect how endpoints communicate, such as preferences and constraints on
peer behavior. Individually, a SETTINGS parameter can also be referred
to as a \"setting\"; the identifier and value of each setting parameter
can be referred to as a \"setting identifier\" and a \"setting
value\".[¶](#section-7.2.4-1){.pilcrow}

SETTINGS frames always apply to an entire HTTP/3 connection, never a
single stream. A SETTINGS frame [MUST]{.bcp14} be sent as the first
frame of each [control
stream](#control-streams){.xref}[]{#iref-control-stream-215 .iref} (see
[Section 6.2.1](#control-streams){.xref}) by each peer, and it [MUST
NOT]{.bcp14} be sent subsequently. If an endpoint receives a second
SETTINGS frame on the [control
stream](#control-streams){.xref}[]{#iref-control-stream-216 .iref}, the
endpoint [MUST]{.bcp14} respond with a [connection
error](#errors){.xref}[]{#iref-connection-error-217 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-218
.iref}.[¶](#section-7.2.4-2){.pilcrow}

SETTINGS frames [MUST NOT]{.bcp14} be sent on any stream other than the
[control stream](#control-streams){.xref}[]{#iref-control-stream-219
.iref}. If an endpoint receives a SETTINGS frame on a different stream,
the endpoint [MUST]{.bcp14} respond with a [connection
error](#errors){.xref}[]{#iref-connection-error-220 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-221
.iref}.[¶](#section-7.2.4-3){.pilcrow}

SETTINGS parameters are not negotiated; they describe characteristics of
the sending peer that can be used by the receiving peer. However, a
negotiation can be implied by the use of SETTINGS: each peer uses
SETTINGS to advertise a set of supported values. The definition of the
setting would describe how each peer combines the two sets to conclude
which choice will be used. SETTINGS does not provide a mechanism to
identify when the choice takes effect.[¶](#section-7.2.4-4){.pilcrow}

Different values for the same parameter can be advertised by each peer.
For example, a client might be willing to consume a very large response
field section, while servers are more cautious about request
size.[¶](#section-7.2.4-5){.pilcrow}

The same setting identifier [MUST NOT]{.bcp14} occur more than once in
the SETTINGS frame. A receiver [MAY]{.bcp14} treat the presence of
duplicate setting identifiers as a [connection
error](#errors){.xref}[]{#iref-connection-error-222 .iref} of type
[H3_SETTINGS_ERROR](#H3_SETTINGS_ERROR){.xref}[]{#iref-h3_settings_error-223
.iref}.[¶](#section-7.2.4-6){.pilcrow}

The payload of a SETTINGS frame consists of zero or more parameters.
Each parameter consists of a setting identifier and a value, both
encoded as QUIC variable-length integers.[¶](#section-7.2.4-7){.pilcrow}

[]{#name-settings-frame}

::: {#section-7.2.4-8.1 .alignLeft .art-ascii-art .art-text .artwork}
    Setting {
      Identifier (i),
      Value (i),
    }

    SETTINGS Frame {
      Type (i) = 0x04,
      Length (i),
      Setting (..) ...,
    }
:::

[Figure 7](#figure-7){.selfRef}: [SETTINGS
Frame](#name-settings-frame){.selfRef}

An implementation [MUST]{.bcp14} ignore any parameter with an identifier
it does not understand.[¶](#section-7.2.4-9){.pilcrow}

::: {#settings-parameters}
::: {#section-7.2.4.1 .section}
##### [7.2.4.1.](#section-7.2.4.1){.section-number .selfRef} [Defined SETTINGS Parameters](#name-defined-settings-parameters){.section-name .selfRef} {#name-defined-settings-parameters}

The following settings are defined in
HTTP/3:[¶](#section-7.2.4.1-1){.pilcrow}

[]{.break}

SETTINGS_MAX_FIELD_SECTION_SIZE (0x06)[]{#iref-settings_max_field_section_s .iref}:

:   ::: {#SETTINGS_MAX_FIELD_SECTION_SIZE}
    The default value is unlimited. See [Section
    4.2.2](#header-size-constraints){.xref} for
    usage.[¶](#section-7.2.4.1-2.2.1){.pilcrow}
    :::

:   

Setting identifiers of the format `0x1f * N + 0x21` for non-negative
integer values of `N` are reserved to exercise the requirement that
unknown identifiers be ignored. Such settings have no defined meaning.
Endpoints [SHOULD]{.bcp14} include at least one such setting in their
SETTINGS frame. Endpoints [MUST NOT]{.bcp14} consider such settings to
have any meaning upon receipt.[¶](#section-7.2.4.1-3){.pilcrow}

Because the setting has no defined meaning, the value of the setting can
be any value the implementation
selects.[¶](#section-7.2.4.1-4){.pilcrow}

Setting identifiers that were defined in \[[HTTP/2](#RFC9113){.xref}\]
where there is no corresponding HTTP/3 setting have also been reserved
([Section 11.2.2](#iana-settings){.xref}). These reserved settings [MUST
NOT]{.bcp14} be sent, and their receipt [MUST]{.bcp14} be treated as a
[connection error](#errors){.xref}[]{#iref-connection-error-225 .iref}
of type
[H3_SETTINGS_ERROR](#H3_SETTINGS_ERROR){.xref}[]{#iref-h3_settings_error-226
.iref}.[¶](#section-7.2.4.1-5){.pilcrow}

Additional settings can be defined by extensions to HTTP/3; see [Section
9](#extensions){.xref} for more
details.[¶](#section-7.2.4.1-6){.pilcrow}
:::
:::

::: {#settings-initialization}
::: {#section-7.2.4.2 .section}
##### [7.2.4.2.](#section-7.2.4.2){.section-number .selfRef} [Initialization](#name-initialization){.section-name .selfRef} {#name-initialization}

An HTTP implementation [MUST NOT]{.bcp14} send frames or requests that
would be invalid based on its current understanding of the peer\'s
settings.[¶](#section-7.2.4.2-1){.pilcrow}

All settings begin at an initial value. Each endpoint [SHOULD]{.bcp14}
use these initial values to send messages before the peer\'s SETTINGS
frame has arrived, as packets carrying the settings can be lost or
delayed. When the SETTINGS frame arrives, any settings are changed to
their new values.[¶](#section-7.2.4.2-2){.pilcrow}

This removes the need to wait for the SETTINGS frame before sending
messages. Endpoints [MUST NOT]{.bcp14} require any data to be received
from the peer prior to sending the SETTINGS frame; settings
[MUST]{.bcp14} be sent as soon as the transport is ready to send
data.[¶](#section-7.2.4.2-3){.pilcrow}

For servers, the initial value of each client setting is the default
value.[¶](#section-7.2.4.2-4){.pilcrow}

For clients using a 1-RTT QUIC connection, the initial value of each
server setting is the default value. 1-RTT keys will always become
available prior to the packet containing SETTINGS being processed by
QUIC, even if the server sends SETTINGS immediately. Clients [SHOULD
NOT]{.bcp14} wait indefinitely for SETTINGS to arrive before sending
requests, but they [SHOULD]{.bcp14} process received datagrams in order
to increase the likelihood of processing SETTINGS before sending the
first request.[¶](#section-7.2.4.2-5){.pilcrow}

When a 0-RTT QUIC connection is being used, the initial value of each
server setting is the value used in the previous session. Clients
[SHOULD]{.bcp14} store the settings the server provided in the HTTP/3
connection where resumption information was provided, but they
[MAY]{.bcp14} opt not to store settings in certain cases (e.g., if the
session ticket is received before the SETTINGS frame). A client
[MUST]{.bcp14} comply with stored settings \-- or default values if no
values are stored \-- when attempting 0-RTT. Once a server has provided
new settings, clients [MUST]{.bcp14} comply with those
values.[¶](#section-7.2.4.2-6){.pilcrow}

A server can remember the settings that it advertised or store an
integrity-protected copy of the values in the ticket and recover the
information when accepting 0-RTT data. A server uses the HTTP/3 settings
values in determining whether to accept 0-RTT data. If the server cannot
determine that the settings remembered by a client are compatible with
its current settings, it [MUST NOT]{.bcp14} accept 0-RTT data.
Remembered settings are compatible if a client complying with those
settings would not violate the server\'s current
settings.[¶](#section-7.2.4.2-7){.pilcrow}

A server [MAY]{.bcp14} accept 0-RTT and subsequently provide different
settings in its SETTINGS frame. If 0-RTT data is accepted by the server,
its SETTINGS frame [MUST NOT]{.bcp14} reduce any limits or alter any
values that might be violated by the client with its 0-RTT data. The
server [MUST]{.bcp14} include all settings that differ from their
default values. If a server accepts 0-RTT but then sends settings that
are not compatible with the previously specified settings, this
[MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-227 .iref} of type
[H3_SETTINGS_ERROR](#H3_SETTINGS_ERROR){.xref}[]{#iref-h3_settings_error-228
.iref}. If a server accepts 0-RTT but then sends a SETTINGS frame that
omits a setting value that the client understands (apart from reserved
setting identifiers) that was previously specified to have a non-default
value, this [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-229 .iref} of type
[H3_SETTINGS_ERROR](#H3_SETTINGS_ERROR){.xref}[]{#iref-h3_settings_error-230
.iref}.[¶](#section-7.2.4.2-8){.pilcrow}
:::
:::
:::
:::

::: {#frame-push-promise}
::: {#section-7.2.5 .section}
#### [7.2.5.](#section-7.2.5){.section-number .selfRef} [PUSH_PROMISE](#name-push_promise){.section-name .selfRef} {#name-push_promise}

[]{#iref-push_promise-231 .iref}

The PUSH_PROMISE frame (type=0x05) is used to carry a promised request
header section from server to client on a [request
stream](#request-streams){.xref}[]{#iref-request-stream-232
.iref}.[¶](#section-7.2.5-1){.pilcrow}

[]{#name-push_promise-frame}

::: {#section-7.2.5-2.1 .alignLeft .art-ascii-art .art-text .artwork}
    PUSH_PROMISE Frame {
      Type (i) = 0x05,
      Length (i),
      Push ID (i),
      Encoded Field Section (..),
    }
:::

[Figure 8](#figure-8){.selfRef}: [PUSH_PROMISE
Frame](#name-push_promise-frame){.selfRef}

The payload consists of:[¶](#section-7.2.5-3){.pilcrow}

[]{.break}

Push ID:

:   A variable-length integer that identifies the server push operation.
    A [push ID](#server-push){.xref}[]{#iref-push-id-233 .iref} is used
    in [push stream](#push-streams){.xref}[]{#iref-push-stream-234
    .iref} headers ([Section 4.6](#server-push){.xref}) and
    [CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-235
    .iref} frames.[¶](#section-7.2.5-4.2.1){.pilcrow}

:   

Encoded Field Section:

:   QPACK-encoded request header fields for the promised response. See
    \[[QPACK](#RFC9204){.xref}\] for more
    details.[¶](#section-7.2.5-4.4.1){.pilcrow}

:   

A server [MUST NOT]{.bcp14} use a [push
ID](#server-push){.xref}[]{#iref-push-id-236 .iref} that is larger than
the client has provided in a
[MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-237 .iref}
frame ([Section 7.2.7](#frame-max-push-id){.xref}). A client
[MUST]{.bcp14} treat receipt of a PUSH_PROMISE frame that contains a
larger [push ID](#server-push){.xref}[]{#iref-push-id-238 .iref} than
the client has advertised as a [connection
error](#errors){.xref}[]{#iref-connection-error-239 .iref} of
[H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-240
.iref}.[¶](#section-7.2.5-5){.pilcrow}

A server [MAY]{.bcp14} use the same [push
ID](#server-push){.xref}[]{#iref-push-id-241 .iref} in multiple
PUSH_PROMISE frames. If so, the decompressed request header sets
[MUST]{.bcp14} contain the same fields in the same order, and both the
name and the value in each field [MUST]{.bcp14} be exact matches.
Clients [SHOULD]{.bcp14} compare the request header sections for
resources promised multiple times. If a client receives a [push
ID](#server-push){.xref}[]{#iref-push-id-242 .iref} that has already
been promised and detects a mismatch, it [MUST]{.bcp14} respond with a
[connection error](#errors){.xref}[]{#iref-connection-error-243 .iref}
of type
[H3_GENERAL_PROTOCOL_ERROR](#H3_GENERAL_PROTOCOL_ERROR){.xref}[]{#iref-h3_general_protocol_error-2
.iref}. If the decompressed field sections match exactly, the client
[SHOULD]{.bcp14} associate the pushed content with each stream on which
a PUSH_PROMISE frame was received.[¶](#section-7.2.5-6){.pilcrow}

Allowing duplicate references to the same [push
ID](#server-push){.xref}[]{#iref-push-id-245 .iref} is primarily to
reduce duplication caused by concurrent requests. A server
[SHOULD]{.bcp14} avoid reusing a [push
ID](#server-push){.xref}[]{#iref-push-id-246 .iref} over a long period.
Clients are likely to consume server push responses and not retain them
for reuse over time. Clients that see a PUSH_PROMISE frame that uses a
[push ID](#server-push){.xref}[]{#iref-push-id-247 .iref} that they have
already consumed and discarded are forced to ignore the
promise.[¶](#section-7.2.5-7){.pilcrow}

If a PUSH_PROMISE frame is received on the [control
stream](#control-streams){.xref}[]{#iref-control-stream-248 .iref}, the
client [MUST]{.bcp14} respond with a [connection
error](#errors){.xref}[]{#iref-connection-error-249 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-250
.iref}.[¶](#section-7.2.5-8){.pilcrow}

A client [MUST NOT]{.bcp14} send a PUSH_PROMISE frame. A server
[MUST]{.bcp14} treat the receipt of a PUSH_PROMISE frame as a
[connection error](#errors){.xref}[]{#iref-connection-error-251 .iref}
of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-252
.iref}.[¶](#section-7.2.5-9){.pilcrow}

See [Section 4.6](#server-push){.xref} for a description of the overall
server push mechanism.[¶](#section-7.2.5-10){.pilcrow}
:::
:::

::: {#frame-goaway}
::: {#section-7.2.6 .section}
#### [7.2.6.](#section-7.2.6){.section-number .selfRef} [GOAWAY](#name-goaway){.section-name .selfRef} {#name-goaway}

[]{#iref-goaway-253 .iref}

The GOAWAY frame (type=0x07) is used to initiate graceful shutdown of an
HTTP/3 connection by either endpoint. GOAWAY allows an endpoint to stop
accepting new requests or pushes while still finishing processing of
previously received requests and pushes. This enables administrative
actions, like server maintenance. GOAWAY by itself does not close a
connection.[¶](#section-7.2.6-1){.pilcrow}

[]{#name-goaway-frame}

::: {#section-7.2.6-2.1 .alignLeft .art-ascii-art .art-text .artwork}
    GOAWAY Frame {
      Type (i) = 0x07,
      Length (i),
      Stream ID/Push ID (i),
    }
:::

[Figure 9](#figure-9){.selfRef}: [GOAWAY
Frame](#name-goaway-frame){.selfRef}

The GOAWAY frame is always sent on the [control
stream](#control-streams){.xref}[]{#iref-control-stream-254 .iref}. In
the server-to-client direction, it carries a QUIC stream ID for a
client-initiated bidirectional stream encoded as a variable-length
integer. A client [MUST]{.bcp14} treat receipt of a GOAWAY frame
containing a stream ID of any other type as a [connection
error](#errors){.xref}[]{#iref-connection-error-255 .iref} of type
[H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-256
.iref}.[¶](#section-7.2.6-3){.pilcrow}

In the client-to-server direction, the GOAWAY frame carries a [push
ID](#server-push){.xref}[]{#iref-push-id-257 .iref} encoded as a
variable-length integer.[¶](#section-7.2.6-4){.pilcrow}

The GOAWAY frame applies to the entire connection, not a specific
stream. A client [MUST]{.bcp14} treat a GOAWAY frame on a stream other
than the [control
stream](#control-streams){.xref}[]{#iref-control-stream-258 .iref} as a
[connection error](#errors){.xref}[]{#iref-connection-error-259 .iref}
of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-260
.iref}.[¶](#section-7.2.6-5){.pilcrow}

See [Section 5.2](#connection-shutdown){.xref} for more information on
the use of the GOAWAY frame.[¶](#section-7.2.6-6){.pilcrow}
:::
:::

::: {#frame-max-push-id}
::: {#section-7.2.7 .section}
#### [7.2.7.](#section-7.2.7){.section-number .selfRef} [MAX_PUSH_ID](#name-max_push_id){.section-name .selfRef} {#name-max_push_id}

[]{#iref-max_push_id-261 .iref}

The MAX_PUSH_ID frame (type=0x0d) is used by clients to control the
number of server pushes that the server can initiate. This sets the
maximum value for a [push ID](#server-push){.xref}[]{#iref-push-id-262
.iref} that the server can use in
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-263
.iref} and
[CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-264 .iref}
frames. Consequently, this also limits the number of [push
streams](#push-streams){.xref}[]{#iref-push-stream-265 .iref} that the
server can initiate in addition to the limit maintained by the QUIC
transport.[¶](#section-7.2.7-1){.pilcrow}

The MAX_PUSH_ID frame is always sent on the [control
stream](#control-streams){.xref}[]{#iref-control-stream-266 .iref}.
Receipt of a MAX_PUSH_ID frame on any other stream [MUST]{.bcp14} be
treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-267 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-268
.iref}.[¶](#section-7.2.7-2){.pilcrow}

A server [MUST NOT]{.bcp14} send a MAX_PUSH_ID frame. A client
[MUST]{.bcp14} treat the receipt of a MAX_PUSH_ID frame as a [connection
error](#errors){.xref}[]{#iref-connection-error-269 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-270
.iref}.[¶](#section-7.2.7-3){.pilcrow}

The maximum [push ID](#server-push){.xref}[]{#iref-push-id-271 .iref} is
unset when an HTTP/3 connection is created, meaning that a server cannot
push until it receives a MAX_PUSH_ID frame. A client that wishes to
manage the number of promised server pushes can increase the maximum
[push ID](#server-push){.xref}[]{#iref-push-id-272 .iref} by sending
MAX_PUSH_ID frames as the server fulfills or cancels server
pushes.[¶](#section-7.2.7-4){.pilcrow}

[]{#name-max_push_id-frame}

::: {#section-7.2.7-5.1 .alignLeft .art-ascii-art .art-text .artwork}
    MAX_PUSH_ID Frame {
      Type (i) = 0x0d,
      Length (i),
      Push ID (i),
    }
:::

[Figure 10](#figure-10){.selfRef}: [MAX_PUSH_ID
Frame](#name-max_push_id-frame){.selfRef}

The MAX_PUSH_ID frame carries a single variable-length integer that
identifies the maximum value for a [push
ID](#server-push){.xref}[]{#iref-push-id-273 .iref} that the server can
use; see [Section 4.6](#server-push){.xref}. A MAX_PUSH_ID frame cannot
reduce the maximum [push ID](#server-push){.xref}[]{#iref-push-id-274
.iref}; receipt of a MAX_PUSH_ID frame that contains a smaller value
than previously received [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-275 .iref} of type
[H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-276
.iref}.[¶](#section-7.2.7-6){.pilcrow}
:::
:::

::: {#frame-reserved}
::: {#section-7.2.8 .section}
#### [7.2.8.](#section-7.2.8){.section-number .selfRef} [Reserved Frame Types](#name-reserved-frame-types){.section-name .selfRef} {#name-reserved-frame-types}

Frame types of the format `0x1f * N + 0x21` for non-negative integer
values of `N` are reserved to exercise the requirement that unknown
types be ignored ([Section 9](#extensions){.xref}). These frames have no
semantics, and they [MAY]{.bcp14} be sent on any stream where frames are
allowed to be sent. This enables their use for application-layer
padding. Endpoints [MUST NOT]{.bcp14} consider these frames to have any
meaning upon receipt.[¶](#section-7.2.8-1){.pilcrow}

The payload and length of the frames are selected in any manner the
implementation chooses.[¶](#section-7.2.8-2){.pilcrow}

Frame types that were used in HTTP/2 where there is no corresponding
HTTP/3 frame have also been reserved ([Section
11.2.1](#iana-frames){.xref}). These frame types [MUST NOT]{.bcp14} be
sent, and their receipt [MUST]{.bcp14} be treated as a [connection
error](#errors){.xref}[]{#iref-connection-error-277 .iref} of type
[H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-278
.iref}.[¶](#section-7.2.8-3){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#errors}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Error Handling](#name-error-handling){.section-name .selfRef} {#name-error-handling}

[]{#iref-connection-error-279 .iref}[]{#iref-stream-error-280 .iref}

When a stream cannot be completed successfully, QUIC allows the
application to abruptly terminate (reset) that stream and communicate a
reason; see [Section
2.4](https://www.rfc-editor.org/rfc/rfc9000#section-2.4){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. This is referred to as a
\"stream error\". An HTTP/3 implementation can decide to close a QUIC
stream and communicate the type of error. Wire encodings of error codes
are defined in [Section 8.1](#http-error-codes){.xref}. Stream errors
are distinct from HTTP status codes that indicate error conditions.
Stream errors indicate that the sender did not transfer or consume the
full request or response, while HTTP status codes indicate the result of
a request that was successfully received.[¶](#section-8-1){.pilcrow}

If an entire connection needs to be terminated, QUIC similarly provides
mechanisms to communicate a reason; see [Section
5.3](https://www.rfc-editor.org/rfc/rfc9000#section-5.3){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. This is referred to as a
\"connection error\". Similar to stream errors, an HTTP/3 implementation
can terminate a QUIC connection and communicate the reason using an
error code from [Section
8.1](#http-error-codes){.xref}.[¶](#section-8-2){.pilcrow}

Although the reasons for closing streams and connections are called
\"errors\", these actions do not necessarily indicate a problem with the
connection or either implementation. For example, a stream can be reset
if the requested resource is no longer
needed.[¶](#section-8-3){.pilcrow}

An endpoint [MAY]{.bcp14} choose to treat a stream error as a connection
error under certain circumstances, closing the entire connection in
response to a condition on a single stream. Implementations need to
consider the impact on outstanding requests before making this
choice.[¶](#section-8-4){.pilcrow}

Because new error codes can be defined without negotiation (see [Section
9](#extensions){.xref}), use of an error code in an unexpected context
or receipt of an unknown error code [MUST]{.bcp14} be treated as
equivalent to [H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-281
.iref}. However, closing a stream can have other effects regardless of
the error code; for example, see [Section
4.1](#request-response){.xref}.[¶](#section-8-5){.pilcrow}

::: {#http-error-codes}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [HTTP/3 Error Codes](#name-http-3-error-codes){.section-name .selfRef} {#name-http-3-error-codes}

The following error codes are defined for use when abruptly terminating
streams, aborting reading of streams, or immediately closing HTTP/3
connections.[¶](#section-8.1-1){.pilcrow}

[]{.break}

H3_NO_ERROR (0x0100)[]{#iref-h3_no_error-282 .iref}:

:   ::: {#H3_NO_ERROR}
    No error. This is used when the connection or stream needs to be
    closed, but there is no error to
    signal.[¶](#section-8.1-2.2.1){.pilcrow}
    :::

:   

H3_GENERAL_PROTOCOL_ERROR (0x0101)[]{#iref-h3_general_protocol_error-28 .iref}:

:   ::: {#H3_GENERAL_PROTOCOL_ERROR}
    Peer violated protocol requirements in a way that does not match a
    more specific error code or endpoint declines to use the more
    specific error code.[¶](#section-8.1-2.4.1){.pilcrow}
    :::

:   

H3_INTERNAL_ERROR (0x0102)[]{#iref-h3_internal_error-284 .iref}:

:   ::: {#H3_INTERNAL_ERROR}
    An internal error has occurred in the HTTP
    stack.[¶](#section-8.1-2.6.1){.pilcrow}
    :::

:   

H3_STREAM_CREATION_ERROR (0x0103)[]{#iref-h3_stream_creation_error-28 .iref}:

:   ::: {#H3_STREAM_CREATION_ERROR}
    The endpoint detected that its peer created a stream that it will
    not accept.[¶](#section-8.1-2.8.1){.pilcrow}
    :::

:   

H3_CLOSED_CRITICAL_STREAM (0x0104)[]{#iref-h3_closed_critical_stream-2 .iref}:

:   ::: {#H3_CLOSED_CRITICAL_STREAM}
    A stream required by the HTTP/3 connection was closed or
    reset.[¶](#section-8.1-2.10.1){.pilcrow}
    :::

:   

H3_FRAME_UNEXPECTED (0x0105)[]{#iref-h3_frame_unexpected-287 .iref}:

:   ::: {#H3_FRAME_UNEXPECTED}
    A frame was received that was not permitted in the current state or
    on the current stream.[¶](#section-8.1-2.12.1){.pilcrow}
    :::

:   

H3_FRAME_ERROR (0x0106)[]{#iref-h3_frame_error-288 .iref}:

:   ::: {#H3_FRAME_ERROR}
    A frame that fails to satisfy layout requirements or with an invalid
    size was received.[¶](#section-8.1-2.14.1){.pilcrow}
    :::

:   

H3_EXCESSIVE_LOAD (0x0107)[]{#iref-h3_excessive_load-289 .iref}:

:   ::: {#H3_EXCESSIVE_LOAD}
    The endpoint detected that its peer is exhibiting a behavior that
    might be generating excessive
    load.[¶](#section-8.1-2.16.1){.pilcrow}
    :::

:   

H3_ID_ERROR (0x0108)[]{#iref-h3_id_error-290 .iref}:

:   ::: {#H3_ID_ERROR}
    A stream ID or [push ID](#server-push){.xref}[]{#iref-push-id-291
    .iref} was used incorrectly, such as exceeding a limit, reducing a
    limit, or being reused.[¶](#section-8.1-2.18.1){.pilcrow}
    :::

:   

H3_SETTINGS_ERROR (0x0109)[]{#iref-h3_settings_error-292 .iref}:

:   ::: {#H3_SETTINGS_ERROR}
    An endpoint detected an error in the payload of a
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-293 .iref}
    frame.[¶](#section-8.1-2.20.1){.pilcrow}
    :::

:   

H3_MISSING_SETTINGS (0x010a)[]{#iref-h3_missing_settings-294 .iref}:

:   ::: {#H3_MISSING_SETTINGS}
    No [SETTINGS](#frame-settings){.xref}[]{#iref-settings-295 .iref}
    frame was received at the beginning of the [control
    stream](#control-streams){.xref}[]{#iref-control-stream-296
    .iref}.[¶](#section-8.1-2.22.1){.pilcrow}
    :::

:   

H3_REQUEST_REJECTED (0x010b)[]{#iref-h3_request_rejected-297 .iref}:

:   ::: {#H3_REQUEST_REJECTED}
    A server rejected a request without performing any application
    processing.[¶](#section-8.1-2.24.1){.pilcrow}
    :::

:   

H3_REQUEST_CANCELLED (0x010c)[]{#iref-h3_request_cancelled-298 .iref}:

:   ::: {#H3_REQUEST_CANCELLED}
    The request or its response (including pushed response) is
    cancelled.[¶](#section-8.1-2.26.1){.pilcrow}
    :::

:   

H3_REQUEST_INCOMPLETE (0x010d)[]{#iref-h3_request_incomplete-299 .iref}:

:   ::: {#H3_REQUEST_INCOMPLETE}
    The client\'s stream terminated without containing a fully formed
    request.[¶](#section-8.1-2.28.1){.pilcrow}
    :::

:   

H3_MESSAGE_ERROR (0x010e)[]{#iref-h3_message_error-300 .iref}:

:   ::: {#H3_MESSAGE_ERROR}
    An HTTP message was
    [malformed](#malformed){.xref}[]{#iref-malformed-301 .iref} and
    cannot be processed.[¶](#section-8.1-2.30.1){.pilcrow}
    :::

:   

H3_CONNECT_ERROR (0x010f)[]{#iref-h3_connect_error-302 .iref}:

:   ::: {#H3_CONNECT_ERROR}
    The TCP connection established in response to a CONNECT request was
    reset or abnormally closed.[¶](#section-8.1-2.32.1){.pilcrow}
    :::

:   

H3_VERSION_FALLBACK (0x0110)[]{#iref-h3_version_fallback-303 .iref}:

:   ::: {#H3_VERSION_FALLBACK}
    The requested operation cannot be served over HTTP/3. The peer
    should retry over HTTP/1.1.[¶](#section-8.1-2.34.1){.pilcrow}
    :::

:   

Error codes of the format `0x1f * N + 0x21` for non-negative integer
values of `N` are reserved to exercise the requirement that unknown
error codes be treated as equivalent to
[H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-304 .iref}
([Section 9](#extensions){.xref}). Implementations [SHOULD]{.bcp14}
select an error code from this space with some probability when they
would have sent
[H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-305
.iref}.[¶](#section-8.1-3){.pilcrow}
:::
:::
:::
:::

::: {#extensions}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Extensions to HTTP/3](#name-extensions-to-http-3){.section-name .selfRef} {#name-extensions-to-http-3}

HTTP/3 permits extension of the protocol. Within the limitations
described in this section, protocol extensions can be used to provide
additional services or alter any aspect of the protocol. Extensions are
effective only within the scope of a single HTTP/3
connection.[¶](#section-9-1){.pilcrow}

This applies to the protocol elements defined in this document. This
does not affect the existing options for extending HTTP, such as
defining new methods, status codes, or
fields.[¶](#section-9-2){.pilcrow}

Extensions are permitted to use new frame types ([Section
7.2](#frames){.xref}), new settings ([Section
7.2.4.1](#settings-parameters){.xref}), new error codes ([Section
8](#errors){.xref}), or new unidirectional stream types ([Section
6.2](#unidirectional-streams){.xref}). Registries are established for
managing these extension points: frame types ([Section
11.2.1](#iana-frames){.xref}), settings ([Section
11.2.2](#iana-settings){.xref}), error codes ([Section
11.2.3](#iana-error-codes){.xref}), and stream types ([Section
11.2.4](#iana-stream-types){.xref}).[¶](#section-9-3){.pilcrow}

Implementations [MUST]{.bcp14} ignore unknown or unsupported values in
all extensible protocol elements. Implementations [MUST]{.bcp14} discard
data or abort reading on unidirectional streams that have unknown or
unsupported types. This means that any of these extension points can be
safely used by extensions without prior arrangement or negotiation.
However, where a known frame type is required to be in a specific
location, such as the
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-306 .iref} frame as
the first frame of the [control
stream](#control-streams){.xref}[]{#iref-control-stream-307 .iref} (see
[Section 6.2.1](#control-streams){.xref}), an unknown frame type does
not satisfy that requirement and [SHOULD]{.bcp14} be treated as an
error.[¶](#section-9-4){.pilcrow}

Extensions that could change the semantics of existing protocol
components [MUST]{.bcp14} be negotiated before being used. For example,
an extension that changes the layout of the
[HEADERS](#frame-headers){.xref}[]{#iref-headers-308 .iref} frame cannot
be used until the peer has given a positive signal that this is
acceptable. Coordinating when such a revised layout comes into effect
could prove complex. As such, allocating new identifiers for new
definitions of existing protocol elements is likely to be more
effective.[¶](#section-9-5){.pilcrow}

This document does not mandate a specific method for negotiating the use
of an extension, but it notes that a setting ([Section
7.2.4.1](#settings-parameters){.xref}) could be used for that purpose.
If both peers set a value that indicates willingness to use the
extension, then the extension can be used. If a setting is used for
extension negotiation, the default value [MUST]{.bcp14} be defined in
such a fashion that the extension is disabled if the setting is
omitted.[¶](#section-9-6){.pilcrow}
:::
:::

::: {#security-considerations}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

The security considerations of HTTP/3 should be comparable to those of
HTTP/2 with TLS. However, many of the considerations from [Section
10](https://www.rfc-editor.org/rfc/rfc9113#section-10){.relref} of
\[[HTTP/2](#RFC9113){.xref}\] apply to
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\] and are discussed in that
document.[¶](#section-10-1){.pilcrow}

::: {#server-authority}
::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Server Authority](#name-server-authority){.section-name .selfRef} {#name-server-authority}

HTTP/3 relies on the HTTP definition of authority. The security
considerations of establishing authority are discussed in [Section
17.1](https://www.rfc-editor.org/rfc/rfc9110#section-17.1){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-10.1-1){.pilcrow}
:::
:::

::: {#cross-protocol-attacks}
::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Cross-Protocol Attacks](#name-cross-protocol-attacks){.section-name .selfRef} {#name-cross-protocol-attacks}

The use of ALPN in the TLS and QUIC handshakes establishes the target
application protocol before application-layer bytes are processed. This
ensures that endpoints have strong assurances that peers are using the
same protocol.[¶](#section-10.2-1){.pilcrow}

This does not guarantee protection from all cross-protocol attacks.
[Section
21.5](https://www.rfc-editor.org/rfc/rfc9000#section-21.5){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\] describes some ways in
which the plaintext of QUIC packets can be used to perform request
forgery against endpoints that don\'t use authenticated
transports.[¶](#section-10.2-2){.pilcrow}
:::
:::

::: {#intermediary-encapsulation-attacks}
::: {#section-10.3 .section}
### [10.3.](#section-10.3){.section-number .selfRef} [Intermediary-Encapsulation Attacks](#name-intermediary-encapsulation-){.section-name .selfRef} {#name-intermediary-encapsulation-}

The HTTP/3 field encoding allows the expression of names that are not
valid field names in the syntax used by HTTP ([Section
5.1](https://www.rfc-editor.org/rfc/rfc9110#section-5.1){.relref} of
\[[HTTP](#RFC9110){.xref}\]). Requests or responses containing invalid
field names [MUST]{.bcp14} be treated as
[malformed](#malformed){.xref}[]{#iref-malformed-309 .iref}. Therefore,
an intermediary cannot translate an HTTP/3 request or response
containing an invalid field name into an HTTP/1.1
message.[¶](#section-10.3-1){.pilcrow}

Similarly, HTTP/3 can transport field values that are not valid. While
most values that can be encoded will not alter field parsing, carriage
return (ASCII 0x0d), line feed (ASCII 0x0a), and the null character
(ASCII 0x00) might be exploited by an attacker if they are translated
verbatim. Any request or response that contains a character not
permitted in a field value [MUST]{.bcp14} be treated as
[malformed](#malformed){.xref}[]{#iref-malformed-310 .iref}. Valid
characters are defined by the \"field-content\" ABNF rule in [Section
5.5](https://www.rfc-editor.org/rfc/rfc9110#section-5.5){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-10.3-2){.pilcrow}
:::
:::

::: {#cacheability-of-pushed-responses}
::: {#section-10.4 .section}
### [10.4.](#section-10.4){.section-number .selfRef} [Cacheability of Pushed Responses](#name-cacheability-of-pushed-resp){.section-name .selfRef} {#name-cacheability-of-pushed-resp}

Pushed responses do not have an explicit request from the client; the
request is provided by the server in the
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-311
.iref} frame.[¶](#section-10.4-1){.pilcrow}

Caching responses that are pushed is possible based on the guidance
provided by the origin server in the Cache-Control header field.
However, this can cause issues if a single server hosts more than one
tenant. For example, a server might offer multiple users each a small
portion of its URI space.[¶](#section-10.4-2){.pilcrow}

Where multiple tenants share space on the same server, that server
[MUST]{.bcp14} ensure that tenants are not able to push representations
of resources that they do not have authority over. Failure to enforce
this would allow a tenant to provide a representation that would be
served out of cache, overriding the actual representation that the
authoritative tenant provides.[¶](#section-10.4-3){.pilcrow}

Clients are required to reject pushed responses for which an origin
server is not authoritative; see [Section
4.6](#server-push){.xref}.[¶](#section-10.4-4){.pilcrow}
:::
:::

::: {#denial-of-service-considerations}
::: {#section-10.5 .section}
### [10.5.](#section-10.5){.section-number .selfRef} [Denial-of-Service Considerations](#name-denial-of-service-considera){.section-name .selfRef} {#name-denial-of-service-considera}

An HTTP/3 connection can demand a greater commitment of resources to
operate than an HTTP/1.1 or HTTP/2 connection. The use of field
compression and flow control depend on a commitment of resources for
storing a greater amount of state. Settings for these features ensure
that memory commitments for these features are strictly
bounded.[¶](#section-10.5-1){.pilcrow}

The number of
[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-312
.iref} frames is constrained in a similar fashion. A client that accepts
server push [SHOULD]{.bcp14} limit the number of push IDs it issues at a
time.[¶](#section-10.5-2){.pilcrow}

Processing capacity cannot be guarded as effectively as state
capacity.[¶](#section-10.5-3){.pilcrow}

The ability to send undefined protocol elements that the peer is
required to ignore can be abused to cause a peer to expend additional
processing time. This might be done by setting multiple undefined
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-313 .iref}
parameters, unknown frame types, or unknown stream types. Note, however,
that some uses are entirely legitimate, such as optional-to-understand
extensions and padding to increase resistance to traffic
analysis.[¶](#section-10.5-4){.pilcrow}

Compression of field sections also offers some opportunities to waste
processing resources; see [Section
7](https://www.rfc-editor.org/rfc/rfc9204#section-7){.relref} of
\[[QPACK](#RFC9204){.xref}\] for more details on potential
abuses.[¶](#section-10.5-5){.pilcrow}

All these features \-- i.e., server push, unknown protocol elements,
field compression \-- have legitimate uses. These features become a
burden only when they are used unnecessarily or to
excess.[¶](#section-10.5-6){.pilcrow}

An endpoint that does not monitor such behavior exposes itself to a risk
of denial-of-service attack. Implementations [SHOULD]{.bcp14} track the
use of these features and set limits on their use. An endpoint
[MAY]{.bcp14} treat activity that is suspicious as a [connection
error](#errors){.xref}[]{#iref-connection-error-314 .iref} of type
[H3_EXCESSIVE_LOAD](#H3_EXCESSIVE_LOAD){.xref}[]{#iref-h3_excessive_load-315
.iref}, but false positives will result in disrupting valid connections
and requests.[¶](#section-10.5-7){.pilcrow}

::: {#limits-on-field-section-size}
::: {#section-10.5.1 .section}
#### [10.5.1.](#section-10.5.1){.section-number .selfRef} [Limits on Field Section Size](#name-limits-on-field-section-siz){.section-name .selfRef} {#name-limits-on-field-section-siz}

A large field section ([Section 4.1](#request-response){.xref}) can
cause an implementation to commit a large amount of state. Header fields
that are critical for routing can appear toward the end of a header
section, which prevents streaming of the header section to its ultimate
destination. This ordering and other reasons, such as ensuring cache
correctness, mean that an endpoint likely needs to buffer the entire
header section. Since there is no hard limit to the size of a field
section, some endpoints could be forced to commit a large amount of
available memory for header fields.[¶](#section-10.5.1-1){.pilcrow}

An endpoint can use the
[SETTINGS_MAX_FIELD_SECTION_SIZE](#SETTINGS_MAX_FIELD_SECTION_SIZE){.xref}[]{#iref-settings_max_field_section_si
.iref} ([Section 4.2.2](#header-size-constraints){.xref}) setting to
advise peers of limits that might apply on the size of field sections.
This setting is only advisory, so endpoints [MAY]{.bcp14} choose to send
field sections that exceed this limit and risk having the request or
response being treated as
[malformed](#malformed){.xref}[]{#iref-malformed-317 .iref}. This
setting is specific to an HTTP/3 connection, so any request or response
could encounter a hop with a lower, unknown limit. An intermediary can
attempt to avoid this problem by passing on values presented by
different peers, but they are not obligated to do
so.[¶](#section-10.5.1-2){.pilcrow}

A server that receives a larger field section than it is willing to
handle can send an HTTP 431 (Request Header Fields Too Large) status
code (\[[RFC6585](#RFC6585){.xref}\]). A client can discard responses
that it cannot process.[¶](#section-10.5.1-3){.pilcrow}
:::
:::

::: {#connect-issues}
::: {#section-10.5.2 .section}
#### [10.5.2.](#section-10.5.2){.section-number .selfRef} [CONNECT Issues](#name-connect-issues){.section-name .selfRef} {#name-connect-issues}

The CONNECT method can be used to create disproportionate load on a
proxy, since stream creation is relatively inexpensive when compared to
the creation and maintenance of a TCP connection. Therefore, a proxy
that supports CONNECT might be more conservative in the number of
simultaneous requests it accepts.[¶](#section-10.5.2-1){.pilcrow}

A proxy might also maintain some resources for a TCP connection beyond
the closing of the stream that carries the CONNECT request, since the
outgoing TCP connection remains in the TIME_WAIT state. To account for
this, a proxy might delay increasing the QUIC stream limits for some
time after a TCP connection terminates.[¶](#section-10.5.2-2){.pilcrow}
:::
:::
:::
:::

::: {#use-of-compression}
::: {#section-10.6 .section}
### [10.6.](#section-10.6){.section-number .selfRef} [Use of Compression](#name-use-of-compression){.section-name .selfRef} {#name-use-of-compression}

Compression can allow an attacker to recover secret data when it is
compressed in the same context as data under attacker control. HTTP/3
enables compression of fields ([Section
4.2](#header-formatting){.xref}); the following concerns also apply to
the use of HTTP compressed content-codings; see [Section
8.4.1](https://www.rfc-editor.org/rfc/rfc9110#section-8.4.1){.relref} of
\[[HTTP](#RFC9110){.xref}\].[¶](#section-10.6-1){.pilcrow}

There are demonstrable attacks on compression that exploit the
characteristics of the web (e.g., \[[BREACH](#BREACH){.xref}\]). The
attacker induces multiple requests containing varying plaintext,
observing the length of the resulting ciphertext in each, which reveals
a shorter length when a guess about the secret is
correct.[¶](#section-10.6-2){.pilcrow}

Implementations communicating on a secure channel [MUST NOT]{.bcp14}
compress content that includes both confidential and attacker-controlled
data unless separate compression contexts are used for each source of
data. Compression [MUST NOT]{.bcp14} be used if the source of data
cannot be reliably determined.[¶](#section-10.6-3){.pilcrow}

Further considerations regarding the compression of field sections are
described in \[[QPACK](#RFC9204){.xref}\].[¶](#section-10.6-4){.pilcrow}
:::
:::

::: {#padding-and-traffic-analysis}
::: {#section-10.7 .section}
### [10.7.](#section-10.7){.section-number .selfRef} [Padding and Traffic Analysis](#name-padding-and-traffic-analysi){.section-name .selfRef} {#name-padding-and-traffic-analysi}

Padding can be used to obscure the exact size of frame content and is
provided to mitigate specific attacks within HTTP, for example, attacks
where compressed content includes both attacker-controlled plaintext and
secret data (e.g.,
\[[BREACH](#BREACH){.xref}\]).[¶](#section-10.7-1){.pilcrow}

Where HTTP/2 employs PADDING frames and Padding fields in other frames
to make a connection more resistant to traffic analysis, HTTP/3 can
either rely on transport-layer padding or employ the reserved frame and
stream types discussed in Sections [7.2.8](#frame-reserved){.xref} and
[6.2.3](#stream-grease){.xref}. These methods of padding produce
different results in terms of the granularity of padding, how padding is
arranged in relation to the information that is being protected, whether
padding is applied in the case of packet loss, and how an implementation
might control padding.[¶](#section-10.7-2){.pilcrow}

Reserved stream types can be used to give the appearance of sending
traffic even when the connection is idle. Because HTTP traffic often
occurs in bursts, apparent traffic can be used to obscure the timing or
duration of such bursts, even to the point of appearing to send a
constant stream of data. However, as such traffic is still flow
controlled by the receiver, a failure to promptly drain such streams and
provide additional flow-control credit can limit the sender\'s ability
to send real traffic.[¶](#section-10.7-3){.pilcrow}

To mitigate attacks that rely on compression, disabling or limiting
compression might be preferable to padding as a
countermeasure.[¶](#section-10.7-4){.pilcrow}

Use of padding can result in less protection than might seem immediately
obvious. Redundant padding could even be counterproductive. At best,
padding only makes it more difficult for an attacker to infer length
information by increasing the number of frames an attacker has to
observe. Incorrectly implemented padding schemes can be easily defeated.
In particular, randomized padding with a predictable distribution
provides very little protection; similarly, padding payloads to a fixed
size exposes information as payload sizes cross the fixed-sized
boundary, which could be possible if an attacker can control
plaintext.[¶](#section-10.7-5){.pilcrow}
:::
:::

::: {#frame-parsing}
::: {#section-10.8 .section}
### [10.8.](#section-10.8){.section-number .selfRef} [Frame Parsing](#name-frame-parsing){.section-name .selfRef} {#name-frame-parsing}

Several protocol elements contain nested length elements, typically in
the form of frames with an explicit length containing variable-length
integers. This could pose a security risk to an incautious implementer.
An implementation [MUST]{.bcp14} ensure that the length of a frame
exactly matches the length of the fields it
contains.[¶](#section-10.8-1){.pilcrow}
:::
:::

::: {#early-data}
::: {#section-10.9 .section}
### [10.9.](#section-10.9){.section-number .selfRef} [Early Data](#name-early-data){.section-name .selfRef} {#name-early-data}

The use of 0-RTT with HTTP/3 creates an exposure to replay attack. The
anti-replay mitigations in \[[HTTP-REPLAY](#HTTP-REPLAY){.xref}\]
[MUST]{.bcp14} be applied when using HTTP/3 with 0-RTT. When applying
\[[HTTP-REPLAY](#HTTP-REPLAY){.xref}\] to HTTP/3, references to the TLS
layer refer to the handshake performed within QUIC, while all references
to application data refer to the contents of
streams.[¶](#section-10.9-1){.pilcrow}
:::
:::

::: {#migration}
::: {#section-10.10 .section}
### [10.10.](#section-10.10){.section-number .selfRef} [Migration](#name-migration){.section-name .selfRef} {#name-migration}

Certain HTTP implementations use the client address for logging or
access-control purposes. Since a QUIC client\'s address might change
during a connection (and future versions might support simultaneous use
of multiple addresses), such implementations will need to either
actively retrieve the client\'s current address or addresses when they
are relevant or explicitly accept that the original address might
change.[¶](#section-10.10-1){.pilcrow}
:::
:::

::: {#privacy-considerations}
::: {#section-10.11 .section}
### [10.11.](#section-10.11){.section-number .selfRef} [Privacy Considerations](#name-privacy-considerations){.section-name .selfRef} {#name-privacy-considerations}

Several characteristics of HTTP/3 provide an observer an opportunity to
correlate actions of a single client or server over time. These include
the value of settings, the timing of reactions to stimulus, and the
handling of any features that are controlled by
settings.[¶](#section-10.11-1){.pilcrow}

As far as these create observable differences in behavior, they could be
used as a basis for fingerprinting a specific
client.[¶](#section-10.11-2){.pilcrow}

HTTP/3\'s preference for using a single QUIC connection allows
correlation of a user\'s activity on a site. Reusing connections for
different origins allows for correlation of activity across those
origins.[¶](#section-10.11-3){.pilcrow}

Several features of QUIC solicit immediate responses and can be used by
an endpoint to measure latency to their peer; this might have privacy
implications in certain scenarios.[¶](#section-10.11-4){.pilcrow}
:::
:::
:::
:::

::: {#iana-considerations}
::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document registers a new ALPN protocol ID ([Section
11.1](#iana-alpn){.xref}) and creates new registries that manage the
assignment of code points in HTTP/3.[¶](#section-11-1){.pilcrow}

::: {#iana-alpn}
::: {#section-11.1 .section}
### [11.1.](#section-11.1){.section-number .selfRef} [Registration of HTTP/3 Identification String](#name-registration-of-http-3-iden){.section-name .selfRef} {#name-registration-of-http-3-iden}

This document creates a new registration for the identification of
HTTP/3 in the \"TLS Application-Layer Protocol Negotiation (ALPN)
Protocol IDs\" registry established in
\[[RFC7301](#RFC7301){.xref}\].[¶](#section-11.1-1){.pilcrow}

The \"h3\" string identifies HTTP/3:[¶](#section-11.1-2){.pilcrow}

[]{.break}

Protocol:

:   HTTP/3[¶](#section-11.1-3.2.1){.pilcrow}

:   

Identification Sequence:

:   0x68 0x33 (\"h3\")[¶](#section-11.1-3.4.1){.pilcrow}

:   

Specification:

:   This document[¶](#section-11.1-3.6.1){.pilcrow}

:   
:::
:::

::: {#iana-policy}
::: {#section-11.2 .section}
### [11.2.](#section-11.2){.section-number .selfRef} [New Registries](#name-new-registries){.section-name .selfRef} {#name-new-registries}

New registries created in this document operate under the QUIC
registration policy documented in [Section
22.1](https://www.rfc-editor.org/rfc/rfc9000#section-22.1){.relref} of
\[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. These registries all
include the common set of fields listed in [Section
22.1.1](https://www.rfc-editor.org/rfc/rfc9000#section-22.1.1){.relref}
of \[[QUIC-TRANSPORT](#QUIC-TRANSPORT){.xref}\]. These registries are
collected under the \"Hypertext Transfer Protocol version 3 (HTTP/3)\"
heading.[¶](#section-11.2-1){.pilcrow}

The initial allocations in these registries are all assigned permanent
status and list a change controller of the IETF and a contact of the
HTTP working group (ietf-http-wg\@w3.org).[¶](#section-11.2-2){.pilcrow}

::: {#iana-frames}
::: {#section-11.2.1 .section}
#### [11.2.1.](#section-11.2.1){.section-number .selfRef} [Frame Types](#name-frame-types){.section-name .selfRef} {#name-frame-types}

This document establishes a registry for HTTP/3 frame type codes. The
\"HTTP/3 Frame Types\" registry governs a 62-bit space. This registry
follows the QUIC registry policy; see [Section
11.2](#iana-policy){.xref}. Permanent registrations in this registry are
assigned using the Specification Required policy
(\[[RFC8126](#RFC8126){.xref}\]), except for values between 0x00 and
0x3f (in hexadecimal; inclusive), which are assigned using Standards
Action or IESG Approval as defined in Sections
[4.9](https://www.rfc-editor.org/rfc/rfc8126#section-4.9){.relref} and
[4.10](https://www.rfc-editor.org/rfc/rfc8126#section-4.10){.relref} of
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-11.2.1-1){.pilcrow}

While this registry is separate from the \"HTTP/2 Frame Type\" registry
defined in \[[HTTP/2](#RFC9113){.xref}\], it is preferable that the
assignments parallel each other where the code spaces overlap. If an
entry is present in only one registry, every effort [SHOULD]{.bcp14} be
made to avoid assigning the corresponding value to an unrelated
operation. Expert reviewers [MAY]{.bcp14} reject unrelated registrations
that would conflict with the same value in the corresponding
registry.[¶](#section-11.2.1-2){.pilcrow}

In addition to common fields as described in [Section
11.2](#iana-policy){.xref}, permanent registrations in this registry
[MUST]{.bcp14} include the following
field:[¶](#section-11.2.1-3){.pilcrow}

[]{.break}

Frame Type:

:   A name or label for the frame
    type.[¶](#section-11.2.1-4.2.1){.pilcrow}

:   

Specifications of frame types [MUST]{.bcp14} include a description of
the frame layout and its semantics, including any parts of the frame
that are conditionally present.[¶](#section-11.2.1-5){.pilcrow}

The entries in [Table 2](#iana-frame-table){.xref} are registered by
this document.[¶](#section-11.2.1-6){.pilcrow}

[]{#name-initial-http-3-frame-types}

::: {#iana-frame-table}
  Frame Type                                                                   Value   Specification
  ---------------------------------------------------------------------------- ------- ---------------------------------------------
  [DATA](#frame-data){.xref}[]{#iref-data-318 .iref}                           0x00    [Section 7.2.1](#frame-data){.xref}
  [HEADERS](#frame-headers){.xref}[]{#iref-headers-319 .iref}                  0x01    [Section 7.2.2](#frame-headers){.xref}
  Reserved                                                                     0x02    This document
  [CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-320 .iref}      0x03    [Section 7.2.3](#frame-cancel-push){.xref}
  [SETTINGS](#frame-settings){.xref}[]{#iref-settings-321 .iref}               0x04    [Section 7.2.4](#frame-settings){.xref}
  [PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-322 .iref}   0x05    [Section 7.2.5](#frame-push-promise){.xref}
  Reserved                                                                     0x06    This document
  [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-323 .iref}                     0x07    [Section 7.2.6](#frame-goaway){.xref}
  Reserved                                                                     0x08    This document
  Reserved                                                                     0x09    This document
  [MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-324 .iref}      0x0d    [Section 7.2.7](#frame-max-push-id){.xref}

  : [Table 2](#table-2){.selfRef}: [Initial HTTP/3 Frame
  Types](#name-initial-http-3-frame-types){.selfRef}
:::

Each code of the format `0x1f * N + 0x21` for non-negative integer
values of `N` (that is, 0x21, 0x40, \..., through 0x3ffffffffffffffe)
[MUST NOT]{.bcp14} be assigned by IANA and [MUST NOT]{.bcp14} appear in
the listing of assigned values.[¶](#section-11.2.1-8){.pilcrow}
:::
:::

::: {#iana-settings}
::: {#section-11.2.2 .section}
#### [11.2.2.](#section-11.2.2){.section-number .selfRef} [Settings Parameters](#name-settings-parameters){.section-name .selfRef} {#name-settings-parameters}

This document establishes a registry for HTTP/3 settings. The \"HTTP/3
Settings\" registry governs a 62-bit space. This registry follows the
QUIC registry policy; see [Section 11.2](#iana-policy){.xref}. Permanent
registrations in this registry are assigned using the Specification
Required policy (\[[RFC8126](#RFC8126){.xref}\]), except for values
between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned
using Standards Action or IESG Approval as defined in Sections
[4.9](https://www.rfc-editor.org/rfc/rfc8126#section-4.9){.relref} and
[4.10](https://www.rfc-editor.org/rfc/rfc8126#section-4.10){.relref} of
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-11.2.2-1){.pilcrow}

While this registry is separate from the \"HTTP/2 Settings\" registry
defined in \[[HTTP/2](#RFC9113){.xref}\], it is preferable that the
assignments parallel each other. If an entry is present in only one
registry, every effort [SHOULD]{.bcp14} be made to avoid assigning the
corresponding value to an unrelated operation. Expert reviewers
[MAY]{.bcp14} reject unrelated registrations that would conflict with
the same value in the corresponding
registry.[¶](#section-11.2.2-2){.pilcrow}

In addition to common fields as described in [Section
11.2](#iana-policy){.xref}, permanent registrations in this registry
[MUST]{.bcp14} include the following
fields:[¶](#section-11.2.2-3){.pilcrow}

[]{.break}

Setting Name:

:   A symbolic name for the setting. Specifying a setting name is
    optional.[¶](#section-11.2.2-4.2.1){.pilcrow}

:   

Default:

:   The value of the setting unless otherwise indicated. A default
    [SHOULD]{.bcp14} be the most restrictive possible
    value.[¶](#section-11.2.2-4.4.1){.pilcrow}

:   

The entries in [Table 3](#iana-setting-table){.xref} are registered by
this document.[¶](#section-11.2.2-5){.pilcrow}

[]{#name-initial-http-3-settings}

::: {#iana-setting-table}
  Setting Name             Value   Specification                                    Default
  ------------------------ ------- ------------------------------------------------ -----------
  Reserved                 0x00    This document                                    N/A
  Reserved                 0x02    This document                                    N/A
  Reserved                 0x03    This document                                    N/A
  Reserved                 0x04    This document                                    N/A
  Reserved                 0x05    This document                                    N/A
  MAX_FIELD_SECTION_SIZE   0x06    [Section 7.2.4.1](#settings-parameters){.xref}   Unlimited

  : [Table 3](#table-3){.selfRef}: [Initial HTTP/3
  Settings](#name-initial-http-3-settings){.selfRef}
:::

For formatting reasons, setting names can be abbreviated by removing the
\'SETTINGS\_\' prefix.[¶](#section-11.2.2-7){.pilcrow}

Each code of the format `0x1f * N + 0x21` for non-negative integer
values of `N` (that is, 0x21, 0x40, \..., through 0x3ffffffffffffffe)
[MUST NOT]{.bcp14} be assigned by IANA and [MUST NOT]{.bcp14} appear in
the listing of assigned values.[¶](#section-11.2.2-8){.pilcrow}
:::
:::

::: {#iana-error-codes}
::: {#section-11.2.3 .section}
#### [11.2.3.](#section-11.2.3){.section-number .selfRef} [Error Codes](#name-error-codes){.section-name .selfRef} {#name-error-codes}

This document establishes a registry for HTTP/3 error codes. The
\"HTTP/3 Error Codes\" registry manages a 62-bit space. This registry
follows the QUIC registry policy; see [Section
11.2](#iana-policy){.xref}. Permanent registrations in this registry are
assigned using the Specification Required policy
(\[[RFC8126](#RFC8126){.xref}\]), except for values between 0x00 and
0x3f (in hexadecimal; inclusive), which are assigned using Standards
Action or IESG Approval as defined in Sections
[4.9](https://www.rfc-editor.org/rfc/rfc8126#section-4.9){.relref} and
[4.10](https://www.rfc-editor.org/rfc/rfc8126#section-4.10){.relref} of
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-11.2.3-1){.pilcrow}

Registrations for error codes are required to include a description of
the error code. An expert reviewer is advised to examine new
registrations for possible duplication with existing error codes. Use of
existing registrations is to be encouraged, but not mandated. Use of
values that are registered in the \"HTTP/2 Error Code\" registry is
discouraged, and expert reviewers [MAY]{.bcp14} reject such
registrations.[¶](#section-11.2.3-2){.pilcrow}

In addition to common fields as described in [Section
11.2](#iana-policy){.xref}, this registry includes two additional
fields. Permanent registrations in this registry [MUST]{.bcp14} include
the following field:[¶](#section-11.2.3-3){.pilcrow}

[]{.break}

Name:

:   A name for the error code.[¶](#section-11.2.3-4.2.1){.pilcrow}

:   

Description:

:   A brief description of the error code
    semantics.[¶](#section-11.2.3-4.4.1){.pilcrow}

:   

The entries in [Table 4](#iana-error-table){.xref} are registered by
this document. These error codes were selected from the range that
operates on a Specification Required policy to avoid collisions with
HTTP/2 error codes.[¶](#section-11.2.3-5){.pilcrow}

[]{#name-initial-http-3-error-codes}

::: {#iana-error-table}
  Name                                                                                                        Value    Description                                                                                     Specification
  ----------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------------------------- -----------------------------------------
  [H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-325 .iref}                                           0x0100   No error                                                                                        [Section 8.1](#http-error-codes){.xref}
  [H3_GENERAL_PROTOCOL_ERROR](#H3_GENERAL_PROTOCOL_ERROR){.xref}[]{#iref-h3_general_protocol_error-3 .iref}   0x0101   General protocol error                                                                          [Section 8.1](#http-error-codes){.xref}
  [H3_INTERNAL_ERROR](#H3_INTERNAL_ERROR){.xref}[]{#iref-h3_internal_error-327 .iref}                         0x0102   Internal error                                                                                  [Section 8.1](#http-error-codes){.xref}
  [H3_STREAM_CREATION_ERROR](#H3_STREAM_CREATION_ERROR){.xref}[]{#iref-h3_stream_creation_error-32 .iref}     0x0103   Stream creation error                                                                           [Section 8.1](#http-error-codes){.xref}
  [H3_CLOSED_CRITICAL_STREAM](#H3_CLOSED_CRITICAL_STREAM){.xref}[]{#iref-h3_closed_critical_stream-3 .iref}   0x0104   Critical stream was closed                                                                      [Section 8.1](#http-error-codes){.xref}
  [H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-330 .iref}                   0x0105   Frame not permitted in the current state                                                        [Section 8.1](#http-error-codes){.xref}
  [H3_FRAME_ERROR](#H3_FRAME_ERROR){.xref}[]{#iref-h3_frame_error-331 .iref}                                  0x0106   Frame violated layout or size rules                                                             [Section 8.1](#http-error-codes){.xref}
  [H3_EXCESSIVE_LOAD](#H3_EXCESSIVE_LOAD){.xref}[]{#iref-h3_excessive_load-332 .iref}                         0x0107   Peer generating excessive load                                                                  [Section 8.1](#http-error-codes){.xref}
  [H3_ID_ERROR](#H3_ID_ERROR){.xref}[]{#iref-h3_id_error-333 .iref}                                           0x0108   An identifier was used incorrectly                                                              [Section 8.1](#http-error-codes){.xref}
  [H3_SETTINGS_ERROR](#H3_SETTINGS_ERROR){.xref}[]{#iref-h3_settings_error-334 .iref}                         0x0109   [SETTINGS](#frame-settings){.xref}[]{#iref-settings-335 .iref} frame contained invalid values   [Section 8.1](#http-error-codes){.xref}
  [H3_MISSING_SETTINGS](#H3_MISSING_SETTINGS){.xref}[]{#iref-h3_missing_settings-336 .iref}                   0x010a   No [SETTINGS](#frame-settings){.xref}[]{#iref-settings-337 .iref} frame received                [Section 8.1](#http-error-codes){.xref}
  [H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-338 .iref}                   0x010b   Request not processed                                                                           [Section 8.1](#http-error-codes){.xref}
  [H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-339 .iref}                0x010c   Data no longer needed                                                                           [Section 8.1](#http-error-codes){.xref}
  [H3_REQUEST_INCOMPLETE](#H3_REQUEST_INCOMPLETE){.xref}[]{#iref-h3_request_incomplete-340 .iref}             0x010d   Stream terminated early                                                                         [Section 8.1](#http-error-codes){.xref}
  [H3_MESSAGE_ERROR](#H3_MESSAGE_ERROR){.xref}[]{#iref-h3_message_error-341 .iref}                            0x010e   Malformed message                                                                               [Section 8.1](#http-error-codes){.xref}
  [H3_CONNECT_ERROR](#H3_CONNECT_ERROR){.xref}[]{#iref-h3_connect_error-342 .iref}                            0x010f   TCP reset or error on CONNECT request                                                           [Section 8.1](#http-error-codes){.xref}
  [H3_VERSION_FALLBACK](#H3_VERSION_FALLBACK){.xref}[]{#iref-h3_version_fallback-343 .iref}                   0x0110   Retry over HTTP/1.1                                                                             [Section 8.1](#http-error-codes){.xref}

  : [Table 4](#table-4){.selfRef}: [Initial HTTP/3 Error
  Codes](#name-initial-http-3-error-codes){.selfRef}
:::

Each code of the format `0x1f * N + 0x21` for non-negative integer
values of `N` (that is, 0x21, 0x40, \..., through 0x3ffffffffffffffe)
[MUST NOT]{.bcp14} be assigned by IANA and [MUST NOT]{.bcp14} appear in
the listing of assigned values.[¶](#section-11.2.3-7){.pilcrow}
:::
:::

::: {#iana-stream-types}
::: {#section-11.2.4 .section}
#### [11.2.4.](#section-11.2.4){.section-number .selfRef} [Stream Types](#name-stream-types){.section-name .selfRef} {#name-stream-types}

This document establishes a registry for HTTP/3 unidirectional stream
types. The \"HTTP/3 Stream Types\" registry governs a 62-bit space. This
registry follows the QUIC registry policy; see [Section
11.2](#iana-policy){.xref}. Permanent registrations in this registry are
assigned using the Specification Required policy
(\[[RFC8126](#RFC8126){.xref}\]), except for values between 0x00 and
0x3f (in hexadecimal; inclusive), which are assigned using Standards
Action or IESG Approval as defined in Sections
[4.9](https://www.rfc-editor.org/rfc/rfc8126#section-4.9){.relref} and
[4.10](https://www.rfc-editor.org/rfc/rfc8126#section-4.10){.relref} of
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-11.2.4-1){.pilcrow}

In addition to common fields as described in [Section
11.2](#iana-policy){.xref}, permanent registrations in this registry
[MUST]{.bcp14} include the following
fields:[¶](#section-11.2.4-2){.pilcrow}

[]{.break}

Stream Type:

:   A name or label for the stream
    type.[¶](#section-11.2.4-3.2.1){.pilcrow}

:   

Sender:

:   Which endpoint on an HTTP/3 connection may initiate a stream of this
    type. Values are \"Client\", \"Server\", or
    \"Both\".[¶](#section-11.2.4-3.4.1){.pilcrow}

:   

Specifications for permanent registrations [MUST]{.bcp14} include a
description of the stream type, including the layout and semantics of
the stream contents.[¶](#section-11.2.4-4){.pilcrow}

The entries in [Table 5](#iana-stream-type-table){.xref} are registered
by this document.[¶](#section-11.2.4-5){.pilcrow}

[]{#name-initial-stream-types}

::: {#iana-stream-type-table}
  Stream Type      Value   Specification                              Sender
  ---------------- ------- ------------------------------------------ --------
  Control Stream   0x00    [Section 6.2.1](#control-streams){.xref}   Both
  Push Stream      0x01    [Section 4.6](#server-push){.xref}         Server

  : [Table 5](#table-5){.selfRef}: [Initial Stream
  Types](#name-initial-stream-types){.selfRef}
:::

Each code of the format `0x1f * N + 0x21` for non-negative integer
values of `N` (that is, 0x21, 0x40, \..., through 0x3ffffffffffffffe)
[MUST NOT]{.bcp14} be assigned by IANA and [MUST NOT]{.bcp14} appear in
the listing of assigned values.[¶](#section-11.2.4-7){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-12.1 .section}
### [12.1.](#section-12.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[ALTSVC\]
:   [Nottingham, M.]{.refAuthor}, [McManus, P.]{.refAuthor}, and [J.
    Reschke]{.refAuthor}, [\"HTTP Alternative Services\"]{.refTitle},
    [RFC 7838]{.seriesInfo}, [DOI 10.17487/RFC7838]{.seriesInfo}, April
    2016, \<<https://www.rfc-editor.org/info/rfc7838>\>.
:   

\[COOKIES\]
:   [Barth, A.]{.refAuthor}, [\"HTTP State Management
    Mechanism\"]{.refTitle}, [RFC 6265]{.seriesInfo}, [DOI
    10.17487/RFC6265]{.seriesInfo}, April 2011,
    \<<https://www.rfc-editor.org/info/rfc6265>\>.
:   

\[HTTP\]
:   [Fielding, R., Ed.]{.refAuthor}, [Nottingham, M., Ed.]{.refAuthor},
    and [J. Reschke, Ed.]{.refAuthor}, [\"HTTP Semantics\"]{.refTitle},
    [STD 97]{.seriesInfo}, [RFC 9110]{.seriesInfo}, [DOI
    10.17487/RFC9110]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9110>\>.
:   

\[HTTP-CACHING\]
:   [Fielding, R., Ed.]{.refAuthor}, [Nottingham, M., Ed.]{.refAuthor},
    and [J. Reschke, Ed.]{.refAuthor}, [\"HTTP Caching\"]{.refTitle},
    [STD 98]{.seriesInfo}, [RFC 9111]{.seriesInfo}, [DOI
    10.17487/RFC9111]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9111>\>.
:   

\[HTTP-REPLAY\]
:   [Thomson, M.]{.refAuthor}, [Nottingham, M.]{.refAuthor}, and [W.
    Tarreau]{.refAuthor}, [\"Using Early Data in HTTP\"]{.refTitle},
    [RFC 8470]{.seriesInfo}, [DOI 10.17487/RFC8470]{.seriesInfo},
    September 2018, \<<https://www.rfc-editor.org/info/rfc8470>\>.
:   

\[QPACK\]
:   [Krasic, C.]{.refAuthor}, [Bishop, M.]{.refAuthor}, and [A.
    Frindell, Ed.]{.refAuthor}, [\"QPACK: Field Compression for
    HTTP/3\"]{.refTitle}, [RFC 9204]{.seriesInfo}, [DOI
    10.17487/RFC9204]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9204>\>.
:   

\[QUIC-TRANSPORT\]
:   [Iyengar, J., Ed.]{.refAuthor} and [M. Thomson, Ed.]{.refAuthor},
    [\"QUIC: A UDP-Based Multiplexed and Secure Transport\"]{.refTitle},
    [RFC 9000]{.seriesInfo}, [DOI 10.17487/RFC9000]{.seriesInfo}, May
    2021, \<<https://www.rfc-editor.org/info/rfc9000>\>.
:   

\[RFC0793\]
:   [Postel, J.]{.refAuthor}, [\"Transmission Control
    Protocol\"]{.refTitle}, [STD 7]{.seriesInfo}, [RFC
    793]{.seriesInfo}, [DOI 10.17487/RFC0793]{.seriesInfo}, September
    1981, \<<https://www.rfc-editor.org/info/rfc793>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC6066\]
:   [Eastlake 3rd, D.]{.refAuthor}, [\"Transport Layer Security (TLS)
    Extensions: Extension Definitions\"]{.refTitle}, [RFC
    6066]{.seriesInfo}, [DOI 10.17487/RFC6066]{.seriesInfo}, January
    2011, \<<https://www.rfc-editor.org/info/rfc6066>\>.
:   

\[RFC7301\]
:   [Friedl, S.]{.refAuthor}, [Popov, A.]{.refAuthor},
    [Langley, A.]{.refAuthor}, and [E. Stephan]{.refAuthor},
    [\"Transport Layer Security (TLS) Application-Layer Protocol
    Negotiation Extension\"]{.refTitle}, [RFC 7301]{.seriesInfo}, [DOI
    10.17487/RFC7301]{.seriesInfo}, July 2014,
    \<<https://www.rfc-editor.org/info/rfc7301>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[URI\]
:   [Berners-Lee, T.]{.refAuthor}, [Fielding, R.]{.refAuthor}, and [L.
    Masinter]{.refAuthor}, [\"Uniform Resource Identifier (URI): Generic
    Syntax\"]{.refTitle}, [STD 66]{.seriesInfo}, [RFC
    3986]{.seriesInfo}, [DOI 10.17487/RFC3986]{.seriesInfo}, January
    2005, \<<https://www.rfc-editor.org/info/rfc3986>\>.
:   
:::

::: {#section-12.2 .section}
### [12.2.](#section-12.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[BREACH\]
:   [Gluck, Y.]{.refAuthor}, [Harris, N.]{.refAuthor}, and [A.
    Prado]{.refAuthor}, [\"BREACH: Reviving the CRIME
    Attack\"]{.refTitle}, July 2013,
    \<<http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf>\>.
:   

\[DNS-TERMS\]
:   [Hoffman, P.]{.refAuthor}, [Sullivan, A.]{.refAuthor}, and [K.
    Fujiwara]{.refAuthor}, [\"DNS Terminology\"]{.refTitle}, [BCP
    219]{.seriesInfo}, [RFC 8499]{.seriesInfo}, [DOI
    10.17487/RFC8499]{.seriesInfo}, January 2019,
    \<<https://www.rfc-editor.org/info/rfc8499>\>.
:   

\[HPACK\]
:   [Peon, R.]{.refAuthor} and [H. Ruellan]{.refAuthor}, [\"HPACK:
    Header Compression for HTTP/2\"]{.refTitle}, [RFC
    7541]{.seriesInfo}, [DOI 10.17487/RFC7541]{.seriesInfo}, May 2015,
    \<<https://www.rfc-editor.org/info/rfc7541>\>.
:   

\[HTTP/1.1\]
:   [Fielding, R., Ed.]{.refAuthor}, [Nottingham, M., Ed.]{.refAuthor},
    and [J. Reschke, Ed.]{.refAuthor}, [\"HTTP/1.1\"]{.refTitle}, [STD
    99]{.seriesInfo}, [RFC 9112]{.seriesInfo}, [DOI
    10.17487/RFC9112]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9112>\>.
:   

\[HTTP/2\]
:   [Thomson, M., Ed.]{.refAuthor} and [C. Benfield, Ed.]{.refAuthor},
    [\"HTTP/2\"]{.refTitle}, [RFC 9113]{.seriesInfo}, [DOI
    10.17487/RFC9113]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9113>\>.
:   

\[RFC6585\]
:   [Nottingham, M.]{.refAuthor} and [R. Fielding]{.refAuthor},
    [\"Additional HTTP Status Codes\"]{.refTitle}, [RFC
    6585]{.seriesInfo}, [DOI 10.17487/RFC6585]{.seriesInfo}, April 2012,
    \<<https://www.rfc-editor.org/info/rfc6585>\>.
:   

\[RFC8164\]
:   [Nottingham, M.]{.refAuthor} and [M. Thomson]{.refAuthor},
    [\"Opportunistic Security for HTTP/2\"]{.refTitle}, [RFC
    8164]{.seriesInfo}, [DOI 10.17487/RFC8164]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8164>\>.
:   

\[TFO\]
:   [Cheng, Y.]{.refAuthor}, [Chu, J.]{.refAuthor},
    [Radhakrishnan, S.]{.refAuthor}, and [A. Jain]{.refAuthor}, [\"TCP
    Fast Open\"]{.refTitle}, [RFC 7413]{.seriesInfo}, [DOI
    10.17487/RFC7413]{.seriesInfo}, December 2014,
    \<<https://www.rfc-editor.org/info/rfc7413>\>.
:   

\[TLS\]
:   [Rescorla, E.]{.refAuthor}, [\"The Transport Layer Security (TLS)
    Protocol Version 1.3\"]{.refTitle}, [RFC 8446]{.seriesInfo}, [DOI
    10.17487/RFC8446]{.seriesInfo}, August 2018,
    \<<https://www.rfc-editor.org/info/rfc8446>\>.
:   
:::
:::

::: {#h2-considerations}
::: {#appendix-A .section}
## [Appendix A.](#appendix-A){.section-number .selfRef} [Considerations for Transitioning from HTTP/2](#name-considerations-for-transiti){.section-name .selfRef} {#name-considerations-for-transiti}

HTTP/3 is strongly informed by HTTP/2, and it bears many similarities.
This section describes the approach taken to design HTTP/3, points out
important differences from HTTP/2, and describes how to map HTTP/2
extensions into HTTP/3.[¶](#appendix-A-1){.pilcrow}

HTTP/3 begins from the premise that similarity to HTTP/2 is preferable,
but not a hard requirement. HTTP/3 departs from HTTP/2 where QUIC
differs from TCP, either to take advantage of QUIC features (like
streams) or to accommodate important shortcomings (such as a lack of
total ordering). While HTTP/3 is similar to HTTP/2 in key aspects, such
as the relationship of requests and responses to streams, the details of
the HTTP/3 design are substantially different from
HTTP/2.[¶](#appendix-A-2){.pilcrow}

Some important departures are noted in this
section.[¶](#appendix-A-3){.pilcrow}

::: {#h2-streams}
::: {#appendix-A.1 .section}
### [A.1.](#appendix-A.1){.section-number .selfRef} [Streams](#name-streams){.section-name .selfRef} {#name-streams}

HTTP/3 permits use of a larger number of streams (2^62^-1) than HTTP/2.
The same considerations about exhaustion of stream identifier space
apply, though the space is significantly larger such that it is likely
that other limits in QUIC are reached first, such as the limit on the
connection flow-control window.[¶](#appendix-A.1-1){.pilcrow}

In contrast to HTTP/2, stream concurrency in HTTP/3 is managed by QUIC.
QUIC considers a stream closed when all data has been received and sent
data has been acknowledged by the peer. HTTP/2 considers a stream closed
when the frame containing the END_STREAM bit has been committed to the
transport. As a result, the stream for an equivalent exchange could
remain \"active\" for a longer period of time. HTTP/3 servers might
choose to permit a larger number of concurrent client-initiated
bidirectional streams to achieve equivalent concurrency to HTTP/2,
depending on the expected usage patterns.[¶](#appendix-A.1-2){.pilcrow}

In HTTP/2, only request and response bodies (the frame payload of
[DATA](#frame-data){.xref}[]{#iref-data-344 .iref} frames) are subject
to flow control. All HTTP/3 frames are sent on QUIC streams, so all
frames on all streams are flow controlled in
HTTP/3.[¶](#appendix-A.1-3){.pilcrow}

Due to the presence of other unidirectional stream types, HTTP/3 does
not rely exclusively on the number of concurrent unidirectional streams
to control the number of concurrent in-flight pushes. Instead, HTTP/3
clients use the
[MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-345 .iref}
frame to control the number of pushes received from an HTTP/3
server.[¶](#appendix-A.1-4){.pilcrow}
:::
:::

::: {#h2-frames}
::: {#appendix-A.2 .section}
### [A.2.](#appendix-A.2){.section-number .selfRef} [HTTP Frame Types](#name-http-frame-types){.section-name .selfRef} {#name-http-frame-types}

Many framing concepts from HTTP/2 can be elided on QUIC, because the
transport deals with them. Because frames are already on a stream, they
can omit the stream number. Because frames do not block multiplexing
(QUIC\'s multiplexing occurs below this layer), the support for
variable-maximum-length packets can be removed. Because stream
termination is handled by QUIC, an END_STREAM flag is not required. This
permits the removal of the Flags field from the generic frame
layout.[¶](#appendix-A.2-1){.pilcrow}

Frame payloads are largely drawn from \[[HTTP/2](#RFC9113){.xref}\].
However, QUIC includes many features (e.g., flow control) that are also
present in HTTP/2. In these cases, the HTTP mapping does not
re-implement them. As a result, several HTTP/2 frame types are not
required in HTTP/3. Where an HTTP/2-defined frame is no longer used, the
frame ID has been reserved in order to maximize portability between
HTTP/2 and HTTP/3 implementations. However, even frame types that appear
in both mappings do not have identical
semantics.[¶](#appendix-A.2-2){.pilcrow}

Many of the differences arise from the fact that HTTP/2 provides an
absolute ordering between frames across all streams, while QUIC provides
this guarantee on each stream only. As a result, if a frame type makes
assumptions that frames from different streams will still be received in
the order sent, HTTP/3 will break them.[¶](#appendix-A.2-3){.pilcrow}

Some examples of feature adaptations are described below, as well as
general guidance to extension frame implementors converting an HTTP/2
extension to HTTP/3.[¶](#appendix-A.2-4){.pilcrow}

::: {#h2-diff-priority}
::: {#appendix-A.2.1 .section}
#### [A.2.1.](#appendix-A.2.1){.section-number .selfRef} [Prioritization Differences](#name-prioritization-differences){.section-name .selfRef} {#name-prioritization-differences}

HTTP/2 specifies priority assignments in PRIORITY frames and
(optionally) in [HEADERS](#frame-headers){.xref}[]{#iref-headers-346
.iref} frames. HTTP/3 does not provide a means of signaling
priority.[¶](#appendix-A.2.1-1){.pilcrow}

Note that, while there is no explicit signaling for priority, this does
not mean that prioritization is not important for achieving good
performance.[¶](#appendix-A.2.1-2){.pilcrow}
:::
:::

::: {#field-compression-differences}
::: {#appendix-A.2.2 .section}
#### [A.2.2.](#appendix-A.2.2){.section-number .selfRef} [Field Compression Differences](#name-field-compression-differenc){.section-name .selfRef} {#name-field-compression-differenc}

HPACK was designed with the assumption of in-order delivery. A sequence
of encoded field sections must arrive (and be decoded) at an endpoint in
the same order in which they were encoded. This ensures that the dynamic
state at the two endpoints remains in
sync.[¶](#appendix-A.2.2-1){.pilcrow}

Because this total ordering is not provided by QUIC, HTTP/3 uses a
modified version of HPACK, called QPACK. QPACK uses a single
unidirectional stream to make all modifications to the dynamic table,
ensuring a total order of updates. All frames that contain encoded
fields merely reference the table state at a given time without
modifying it.[¶](#appendix-A.2.2-2){.pilcrow}

\[[QPACK](#RFC9204){.xref}\] provides additional
details.[¶](#appendix-A.2.2-3){.pilcrow}
:::
:::

::: {#flow-control-differences}
::: {#appendix-A.2.3 .section}
#### [A.2.3.](#appendix-A.2.3){.section-number .selfRef} [Flow-Control Differences](#name-flow-control-differences){.section-name .selfRef} {#name-flow-control-differences}

HTTP/2 specifies a stream flow-control mechanism. Although all HTTP/2
frames are delivered on streams, only the
[DATA](#frame-data){.xref}[]{#iref-data-347 .iref} frame payload is
subject to flow control. QUIC provides flow control for stream data and
all HTTP/3 frame types defined in this document are sent on streams.
Therefore, all frame headers and payload are subject to flow
control.[¶](#appendix-A.2.3-1){.pilcrow}
:::
:::

::: {#guidance-for-new-frame-type-definitions}
::: {#appendix-A.2.4 .section}
#### [A.2.4.](#appendix-A.2.4){.section-number .selfRef} [Guidance for New Frame Type Definitions](#name-guidance-for-new-frame-type){.section-name .selfRef} {#name-guidance-for-new-frame-type}

Frame type definitions in HTTP/3 often use the QUIC variable-length
integer encoding. In particular, stream IDs use this encoding, which
allows for a larger range of possible values than the encoding used in
HTTP/2. Some frames in HTTP/3 use an identifier other than a stream ID
(e.g., push IDs). Redefinition of the encoding of extension frame types
might be necessary if the encoding includes a stream
ID.[¶](#appendix-A.2.4-1){.pilcrow}

Because the Flags field is not present in generic HTTP/3 frames, those
frames that depend on the presence of flags need to allocate space for
flags as part of their frame payload.[¶](#appendix-A.2.4-2){.pilcrow}

Other than these issues, frame type HTTP/2 extensions are typically
portable to QUIC simply by replacing stream 0 in HTTP/2 with a [control
stream](#control-streams){.xref}[]{#iref-control-stream-348 .iref} in
HTTP/3. HTTP/3 extensions will not assume ordering, but would not be
harmed by ordering, and are expected to be portable to
HTTP/2.[¶](#appendix-A.2.4-3){.pilcrow}
:::
:::

::: {#comparison-of-http2-and-http3-frame-types}
::: {#appendix-A.2.5 .section}
#### [A.2.5.](#appendix-A.2.5){.section-number .selfRef} [Comparison of HTTP/2 and HTTP/3 Frame Types](#name-comparison-of-http-2-and-ht){.section-name .selfRef} {#name-comparison-of-http-2-and-ht}

[]{.break}

[DATA](#frame-data){.xref} (0x00)[]{#iref-data-349 .iref}:

:   Padding is not defined in HTTP/3 frames. See [Section
    7.2.1](#frame-data){.xref}.[¶](#appendix-A.2.5-1.2.1){.pilcrow}

:   

[HEADERS](#frame-headers){.xref} (0x01)[]{#iref-headers-350 .iref}:

:   The PRIORITY region of
    [HEADERS](#frame-headers){.xref}[]{#iref-headers-351 .iref} is not
    defined in HTTP/3 frames. Padding is not defined in HTTP/3 frames.
    See [Section
    7.2.2](#frame-headers){.xref}.[¶](#appendix-A.2.5-1.4.1){.pilcrow}

:   

PRIORITY (0x02):

:   As described in [Appendix A.2.1](#h2-diff-priority){.xref}, HTTP/3
    does not provide a means of signaling
    priority.[¶](#appendix-A.2.5-1.6.1){.pilcrow}

:   

RST_STREAM (0x03):

:   RST_STREAM frames do not exist in HTTP/3, since QUIC provides stream
    lifecycle management. The same code point is used for the
    [CANCEL_PUSH](#frame-cancel-push){.xref}[]{#iref-cancel_push-352
    .iref} frame ([Section
    7.2.3](#frame-cancel-push){.xref}).[¶](#appendix-A.2.5-1.8.1){.pilcrow}

:   

[SETTINGS](#frame-settings){.xref} (0x04)[]{#iref-settings-353 .iref}:

:   [SETTINGS](#frame-settings){.xref}[]{#iref-settings-354 .iref}
    frames are sent only at the beginning of the connection. See
    [Section 7.2.4](#frame-settings){.xref} and [Appendix
    A.3](#h2-settings){.xref}.[¶](#appendix-A.2.5-1.10.1){.pilcrow}

:   

[PUSH_PROMISE](#frame-push-promise){.xref} (0x05)[]{#iref-push_promise-355 .iref}:

:   The
    [PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-356
    .iref} frame does not reference a stream; instead, the [push
    stream](#push-streams){.xref}[]{#iref-push-stream-357 .iref}
    references the
    [PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-358
    .iref} frame using a [push
    ID](#server-push){.xref}[]{#iref-push-id-359 .iref}. See [Section
    7.2.5](#frame-push-promise){.xref}.[¶](#appendix-A.2.5-1.12.1){.pilcrow}

:   

PING (0x06):

:   PING frames do not exist in HTTP/3, as QUIC provides equivalent
    functionality.[¶](#appendix-A.2.5-1.14.1){.pilcrow}

:   

[GOAWAY](#frame-goaway){.xref} (0x07)[]{#iref-goaway-360 .iref}:

:   [GOAWAY](#frame-goaway){.xref}[]{#iref-goaway-361 .iref} does not
    contain an error code. In the client-to-server direction, it carries
    a [push ID](#server-push){.xref}[]{#iref-push-id-362 .iref} instead
    of a server-initiated stream ID. See [Section
    7.2.6](#frame-goaway){.xref}.[¶](#appendix-A.2.5-1.16.1){.pilcrow}

:   

WINDOW_UPDATE (0x08):

:   WINDOW_UPDATE frames do not exist in HTTP/3, since QUIC provides
    flow control.[¶](#appendix-A.2.5-1.18.1){.pilcrow}

:   

CONTINUATION (0x09):

:   CONTINUATION frames do not exist in HTTP/3; instead, larger
    [HEADERS](#frame-headers){.xref}[]{#iref-headers-363
    .iref}/[PUSH_PROMISE](#frame-push-promise){.xref}[]{#iref-push_promise-364
    .iref} frames than HTTP/2 are
    permitted.[¶](#appendix-A.2.5-1.20.1){.pilcrow}

:   

Frame types defined by extensions to HTTP/2 need to be separately
registered for HTTP/3 if still applicable. The IDs of frames defined in
\[[HTTP/2](#RFC9113){.xref}\] have been reserved for simplicity. Note
that the frame type space in HTTP/3 is substantially larger (62 bits
versus 8 bits), so many HTTP/3 frame types have no equivalent HTTP/2
code points. See [Section
11.2.1](#iana-frames){.xref}.[¶](#appendix-A.2.5-2){.pilcrow}
:::
:::
:::
:::

::: {#h2-settings}
::: {#appendix-A.3 .section}
### [A.3.](#appendix-A.3){.section-number .selfRef} [HTTP/2 SETTINGS Parameters](#name-http-2-settings-parameters){.section-name .selfRef} {#name-http-2-settings-parameters}

An important difference from HTTP/2 is that settings are sent once, as
the first frame of the [control
stream](#control-streams){.xref}[]{#iref-control-stream-365 .iref}, and
thereafter cannot change. This eliminates many corner cases around
synchronization of changes.[¶](#appendix-A.3-1){.pilcrow}

Some transport-level options that HTTP/2 specifies via the
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-366 .iref} frame are
superseded by QUIC transport parameters in HTTP/3. The HTTP-level
setting that is retained in HTTP/3 has the same value as in HTTP/2. The
superseded settings are reserved, and their receipt is an error. See
[Section 7.2.4.1](#settings-parameters){.xref} for discussion of both
the retained and reserved values.[¶](#appendix-A.3-2){.pilcrow}

Below is a listing of how each HTTP/2
[SETTINGS](#frame-settings){.xref}[]{#iref-settings-367 .iref} parameter
is mapped:[¶](#appendix-A.3-3){.pilcrow}

[]{.break}

SETTINGS_HEADER_TABLE_SIZE (0x01):

:   See \[[QPACK](#RFC9204){.xref}\].[¶](#appendix-A.3-4.2.1){.pilcrow}

:   

SETTINGS_ENABLE_PUSH (0x02):

:   This is removed in favor of the
    [MAX_PUSH_ID](#frame-max-push-id){.xref}[]{#iref-max_push_id-368
    .iref} frame, which provides a more granular control over server
    push. Specifying a setting with the identifier 0x02 (corresponding
    to the SETTINGS_ENABLE_PUSH parameter) in the HTTP/3
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-369 .iref} frame
    is an error.[¶](#appendix-A.3-4.4.1){.pilcrow}

:   

SETTINGS_MAX_CONCURRENT_STREAMS (0x03):

:   QUIC controls the largest open stream ID as part of its flow-control
    logic. Specifying a setting with the identifier 0x03 (corresponding
    to the SETTINGS_MAX_CONCURRENT_STREAMS parameter) in the HTTP/3
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-370 .iref} frame
    is an error.[¶](#appendix-A.3-4.6.1){.pilcrow}

:   

SETTINGS_INITIAL_WINDOW_SIZE (0x04):

:   QUIC requires both stream and connection flow-control window sizes
    to be specified in the initial transport handshake. Specifying a
    setting with the identifier 0x04 (corresponding to the
    SETTINGS_INITIAL_WINDOW_SIZE parameter) in the HTTP/3
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-371 .iref} frame
    is an error.[¶](#appendix-A.3-4.8.1){.pilcrow}

:   

SETTINGS_MAX_FRAME_SIZE (0x05):

:   This setting has no equivalent in HTTP/3. Specifying a setting with
    the identifier 0x05 (corresponding to the SETTINGS_MAX_FRAME_SIZE
    parameter) in the HTTP/3
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-372 .iref} frame
    is an error.[¶](#appendix-A.3-4.10.1){.pilcrow}

:   

SETTINGS_MAX_HEADER_LIST_SIZE (0x06):

:   This setting identifier has been renamed
    [SETTINGS_MAX_FIELD_SECTION_SIZE](#SETTINGS_MAX_FIELD_SECTION_SIZE){.xref}[]{#iref-settings_max_field_section_siz
    .iref}.[¶](#appendix-A.3-4.12.1){.pilcrow}

:   

In HTTP/3, setting values are variable-length integers (6, 14, 30, or 62
bits long) rather than fixed-length 32-bit fields as in HTTP/2. This
will often produce a shorter encoding, but can produce a longer encoding
for settings that use the full 32-bit space. Settings ported from HTTP/2
might choose to redefine their value to limit it to 30 bits for more
efficient encoding or to make use of the 62-bit space if more than 30
bits are required.[¶](#appendix-A.3-5){.pilcrow}

Settings need to be defined separately for HTTP/2 and HTTP/3. The IDs of
settings defined in \[[HTTP/2](#RFC9113){.xref}\] have been reserved for
simplicity. Note that the settings identifier space in HTTP/3 is
substantially larger (62 bits versus 16 bits), so many HTTP/3 settings
have no equivalent HTTP/2 code point. See [Section
11.2.2](#iana-settings){.xref}.[¶](#appendix-A.3-6){.pilcrow}

As QUIC streams might arrive out of order, endpoints are advised not to
wait for the peers\' settings to arrive before responding to other
streams. See [Section
7.2.4.2](#settings-initialization){.xref}.[¶](#appendix-A.3-7){.pilcrow}
:::
:::

::: {#http2-error-codes}
::: {#appendix-A.4 .section}
### [A.4.](#appendix-A.4){.section-number .selfRef} [HTTP/2 Error Codes](#name-http-2-error-codes){.section-name .selfRef} {#name-http-2-error-codes}

QUIC has the same concepts of \"stream\" and \"connection\" errors that
HTTP/2 provides. However, the differences between HTTP/2 and HTTP/3 mean
that error codes are not directly portable between
versions.[¶](#appendix-A.4-1){.pilcrow}

The HTTP/2 error codes defined in [Section
7](https://www.rfc-editor.org/rfc/rfc9113#section-7){.relref} of
\[[HTTP/2](#RFC9113){.xref}\] logically map to the HTTP/3 error codes as
follows:[¶](#appendix-A.4-2){.pilcrow}

[]{.break}

NO_ERROR (0x00):

:   [H3_NO_ERROR](#H3_NO_ERROR){.xref}[]{#iref-h3_no_error-374 .iref} in
    [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.2.1){.pilcrow}

:   

PROTOCOL_ERROR (0x01):

:   This is mapped to
    [H3_GENERAL_PROTOCOL_ERROR](#H3_GENERAL_PROTOCOL_ERROR){.xref}[]{#iref-h3_general_protocol_error-37
    .iref} except in cases where more specific error codes have been
    defined. Such cases include
    [H3_FRAME_UNEXPECTED](#H3_FRAME_UNEXPECTED){.xref}[]{#iref-h3_frame_unexpected-376
    .iref},
    [H3_MESSAGE_ERROR](#H3_MESSAGE_ERROR){.xref}[]{#iref-h3_message_error-377
    .iref}, and
    [H3_CLOSED_CRITICAL_STREAM](#H3_CLOSED_CRITICAL_STREAM){.xref}[]{#iref-h3_closed_critical_stream-37
    .iref} defined in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.4.1){.pilcrow}

:   

INTERNAL_ERROR (0x02):

:   [H3_INTERNAL_ERROR](#H3_INTERNAL_ERROR){.xref}[]{#iref-h3_internal_error-379
    .iref} in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.6.1){.pilcrow}

:   

FLOW_CONTROL_ERROR (0x03):

:   Not applicable, since QUIC handles flow
    control.[¶](#appendix-A.4-3.8.1){.pilcrow}

:   

SETTINGS_TIMEOUT (0x04):

:   Not applicable, since no acknowledgment of
    [SETTINGS](#frame-settings){.xref}[]{#iref-settings-380 .iref} is
    defined.[¶](#appendix-A.4-3.10.1){.pilcrow}

:   

STREAM_CLOSED (0x05):

:   Not applicable, since QUIC handles stream
    management.[¶](#appendix-A.4-3.12.1){.pilcrow}

:   

FRAME_SIZE_ERROR (0x06):

:   [H3_FRAME_ERROR](#H3_FRAME_ERROR){.xref}[]{#iref-h3_frame_error-381
    .iref} error code defined in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.14.1){.pilcrow}

:   

REFUSED_STREAM (0x07):

:   [H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-382
    .iref} (in [Section 8.1](#http-error-codes){.xref}) is used to
    indicate that a request was not processed. Otherwise, not applicable
    because QUIC handles stream
    management.[¶](#appendix-A.4-3.16.1){.pilcrow}

:   

CANCEL (0x08):

:   [H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-383
    .iref} in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.18.1){.pilcrow}

:   

COMPRESSION_ERROR (0x09):

:   Multiple error codes are defined in
    \[[QPACK](#RFC9204){.xref}\].[¶](#appendix-A.4-3.20.1){.pilcrow}

:   

CONNECT_ERROR (0x0a):

:   [H3_CONNECT_ERROR](#H3_CONNECT_ERROR){.xref}[]{#iref-h3_connect_error-384
    .iref} in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.22.1){.pilcrow}

:   

ENHANCE_YOUR_CALM (0x0b):

:   [H3_EXCESSIVE_LOAD](#H3_EXCESSIVE_LOAD){.xref}[]{#iref-h3_excessive_load-385
    .iref} in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.24.1){.pilcrow}

:   

INADEQUATE_SECURITY (0x0c):

:   Not applicable, since QUIC is assumed to provide sufficient security
    on all connections.[¶](#appendix-A.4-3.26.1){.pilcrow}

:   

HTTP_1\_1_REQUIRED (0x0d):

:   [H3_VERSION_FALLBACK](#H3_VERSION_FALLBACK){.xref}[]{#iref-h3_version_fallback-386
    .iref} in [Section
    8.1](#http-error-codes){.xref}.[¶](#appendix-A.4-3.28.1){.pilcrow}

:   

Error codes need to be defined for HTTP/2 and HTTP/3 separately. See
[Section
11.2.3](#iana-error-codes){.xref}.[¶](#appendix-A.4-4){.pilcrow}

::: {#mapping-between-http2-and-http3-errors}
::: {#appendix-A.4.1 .section}
#### [A.4.1.](#appendix-A.4.1){.section-number .selfRef} [Mapping between HTTP/2 and HTTP/3 Errors](#name-mapping-between-http-2-and-){.section-name .selfRef} {#name-mapping-between-http-2-and-}

An intermediary that converts between HTTP/2 and HTTP/3 may encounter
error conditions from either upstream. It is useful to communicate the
occurrence of errors to the downstream, but error codes largely reflect
connection-local problems that generally do not make sense to
propagate.[¶](#appendix-A.4.1-1){.pilcrow}

An intermediary that encounters an error from an upstream origin can
indicate this by sending an HTTP status code such as 502 (Bad Gateway),
which is suitable for a broad class of
errors.[¶](#appendix-A.4.1-2){.pilcrow}

There are some rare cases where it is beneficial to propagate the error
by mapping it to the closest matching error type to the receiver. For
example, an intermediary that receives an HTTP/2 [stream
error](#errors){.xref}[]{#iref-stream-error-387 .iref} of type
REFUSED_STREAM from the origin has a clear signal that the request was
not processed and that the request is safe to retry. Propagating this
error condition to the client as an HTTP/3 [stream
error](#errors){.xref}[]{#iref-stream-error-388 .iref} of type
[H3_REQUEST_REJECTED](#H3_REQUEST_REJECTED){.xref}[]{#iref-h3_request_rejected-389
.iref} allows the client to take the action it deems most appropriate.
In the reverse direction, the intermediary might deem it beneficial to
pass on client request cancellations that are indicated by terminating a
stream with
[H3_REQUEST_CANCELLED](#H3_REQUEST_CANCELLED){.xref}[]{#iref-h3_request_cancelled-390
.iref}; see [Section
4.1.1](#request-cancellation){.xref}.[¶](#appendix-A.4.1-3){.pilcrow}

Conversion between errors is described in the logical mapping. The error
codes are defined in non-overlapping spaces in order to protect against
accidental conversion that could result in the use of inappropriate or
unknown error codes for the target version. An intermediary is permitted
to promote [stream errors](#errors){.xref}[]{#iref-stream-error-391
.iref} to [connection
errors](#errors){.xref}[]{#iref-connection-error-392 .iref} but they
should be aware of the cost to the HTTP/3 connection for what might be a
temporary or intermittent error.[¶](#appendix-A.4.1-4){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#acknowledgments}
::: {#appendix-B .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

[Robbie Shade]{.contact-name} and [Mike Warres]{.contact-name} were the
authors of draft-shade-quic-http2-mapping, a precursor of this
document.[¶](#appendix-B-1){.pilcrow}

The IETF QUIC Working Group received an enormous amount of support from
many people. Among others, the following people provided substantial
contributions to this document:[¶](#appendix-B-2){.pilcrow}

-   ::: {#appendix-B-3.1}
    [Bence Beky]{.contact-name}[¶](#appendix-B-3.1.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.2}
    [Daan De Meyer]{.contact-name}[¶](#appendix-B-3.2.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.3}
    [Martin Duke]{.contact-name}[¶](#appendix-B-3.3.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.4}
    [Roy Fielding]{.contact-name}[¶](#appendix-B-3.4.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.5}
    [Alan Frindell]{.contact-name}[¶](#appendix-B-3.5.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.6}
    [Alessandro Ghedini]{.contact-name}[¶](#appendix-B-3.6.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.7}
    [Nick Harper]{.contact-name}[¶](#appendix-B-3.7.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.8}
    [Ryan Hamilton]{.contact-name}[¶](#appendix-B-3.8.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.9}
    [Christian Huitema]{.contact-name}[¶](#appendix-B-3.9.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.10}
    [Subodh Iyengar]{.contact-name}[¶](#appendix-B-3.10.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.11}
    [Robin Marx]{.contact-name}[¶](#appendix-B-3.11.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.12}
    [Patrick McManus]{.contact-name}[¶](#appendix-B-3.12.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.13}
    [Luca Niccolini]{.contact-name}[¶](#appendix-B-3.13.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.14}
    [[奥 一穂]{.non-ascii} ([Kazuho
    Oku]{.ascii})]{.contact-name}[¶](#appendix-B-3.14.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.15}
    [Lucas Pardue]{.contact-name}[¶](#appendix-B-3.15.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.16}
    [Roberto Peon]{.contact-name}[¶](#appendix-B-3.16.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.17}
    [Julian Reschke]{.contact-name}[¶](#appendix-B-3.17.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.18}
    [Eric Rescorla]{.contact-name}[¶](#appendix-B-3.18.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.19}
    [Martin Seemann]{.contact-name}[¶](#appendix-B-3.19.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.20}
    [Ben Schwartz]{.contact-name}[¶](#appendix-B-3.20.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.21}
    [Ian Swett]{.contact-name}[¶](#appendix-B-3.21.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.22}
    [Willy Taureau]{.contact-name}[¶](#appendix-B-3.22.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.23}
    [Martin Thomson]{.contact-name}[¶](#appendix-B-3.23.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.24}
    [Dmitri Tikhonov]{.contact-name}[¶](#appendix-B-3.24.1){.pilcrow}
    :::

-   ::: {#appendix-B-3.25}
    [Tatsuhiro
    Tsujikawa]{.contact-name}[¶](#appendix-B-3.25.1){.pilcrow}
    :::

A portion of [Mike Bishop]{.contact-name}\'s contribution was supported
by Microsoft during his employment there.[¶](#appendix-B-4){.pilcrow}
:::
:::

::: {#appendix-C .section}
## [Index](#name-index){.section-name .selfRef} {#name-index}

::: {#rfc.index.index}
[C](#rfc.index.u67){.xref} [D](#rfc.index.u68){.xref}
[G](#rfc.index.u71){.xref} [H](#rfc.index.u72){.xref}
[M](#rfc.index.u77){.xref} [P](#rfc.index.u80){.xref}
[R](#rfc.index.u82){.xref}
[S](#rfc.index.u83){.xref}[¶](#appendix-C-1){.pilcrow}
:::

-   ::: {#appendix-C-2.1}
    ::: {#rfc.index.u67}
    [C](#rfc.index.u67){.xref}[¶](#appendix-C-2.1.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.1.2.1}

        CANCEL_PUSH

        :   [Section 2, Paragraph 5](#section-2-5){.xref}; [Section 4.6,
            Paragraph 6](#section-4.6-6){.xref}; [Section 4.6, Paragraph
            10](#section-4.6-10){.xref}; [Table
            1](#stream-frame-mapping){.xref}; ***[Section
            7.2.3](#frame-cancel-push){.xref}***; [Section 7.2.5,
            Paragraph 4.2.1](#section-7.2.5-4.2.1){.xref}; [Section
            7.2.7, Paragraph 1](#section-7.2.7-1){.xref}; [Table
            2](#iana-frame-table){.xref}; [Appendix A.2.5, Paragraph
            1.8.1](#appendix-A.2.5-1.8.1){.xref}[¶](#appendix-C-2.1.2.1.1.2.1){.pilcrow}

        :   

        connection error

        :   [Section 2.2](#section-2.2-4.7){.xref}; [Section 4.1,
            Paragraph 7](#section-4.1-7){.xref}; [Section 4.1, Paragraph
            8](#section-4.1-8){.xref}; [Section 4.4, Paragraph
            8](#section-4.4-8){.xref}; [Section 4.4, Paragraph
            10](#section-4.4-10){.xref}; [Section 4.6, Paragraph
            3](#section-4.6-3){.xref}; [Section 5.2, Paragraph
            7](#section-5.2-7){.xref}; [Section 6.1, Paragraph
            3](#section-6.1-3){.xref}; [Section 6.2, Paragraph
            7](#section-6.2-7){.xref}; [Section 6.2.1, Paragraph
            2](#section-6.2.1-2){.xref}; [Section 6.2.1, Paragraph
            2](#section-6.2.1-2){.xref}; [Section 6.2.1, Paragraph
            2](#section-6.2.1-2){.xref}; [Section 6.2.2, Paragraph
            3](#section-6.2.2-3){.xref}; [Section 6.2.2, Paragraph
            6](#section-6.2.2-6){.xref}; [Section 7.1, Paragraph
            5](#section-7.1-5){.xref}; [Section 7.1, Paragraph
            6](#section-7.1-6){.xref}; [Section 7.2.1, Paragraph
            2](#section-7.2.1-2){.xref}; [Section 7.2.2, Paragraph
            3](#section-7.2.2-3){.xref}; [Section 7.2.3, Paragraph
            5](#section-7.2.3-5){.xref}; [Section 7.2.3, Paragraph
            7](#section-7.2.3-7){.xref}; [Section 7.2.3, Paragraph
            8](#section-7.2.3-8){.xref}; [Section 7.2.4, Paragraph
            2](#section-7.2.4-2){.xref}; [Section 7.2.4, Paragraph
            3](#section-7.2.4-3){.xref}; [Section 7.2.4, Paragraph
            6](#section-7.2.4-6){.xref}; [Section 7.2.4.1, Paragraph
            5](#section-7.2.4.1-5){.xref}; [Section 7.2.4.2, Paragraph
            8](#section-7.2.4.2-8){.xref}; [Section 7.2.4.2, Paragraph
            8](#section-7.2.4.2-8){.xref}; [Section 7.2.5, Paragraph
            5](#section-7.2.5-5){.xref}; [Section 7.2.5, Paragraph
            6](#section-7.2.5-6){.xref}; [Section 7.2.5, Paragraph
            8](#section-7.2.5-8){.xref}; [Section 7.2.5, Paragraph
            9](#section-7.2.5-9){.xref}; [Section 7.2.6, Paragraph
            3](#section-7.2.6-3){.xref}; [Section 7.2.6, Paragraph
            5](#section-7.2.6-5){.xref}; [Section 7.2.7, Paragraph
            2](#section-7.2.7-2){.xref}; [Section 7.2.7, Paragraph
            3](#section-7.2.7-3){.xref}; [Section 7.2.7, Paragraph
            6](#section-7.2.7-6){.xref}; [Section 7.2.8, Paragraph
            3](#section-7.2.8-3){.xref}; ***[Section
            8](#errors){.xref}***; [Section 10.5, Paragraph
            7](#section-10.5-7){.xref}; [Appendix A.4.1, Paragraph
            4](#appendix-A.4.1-4){.xref}[¶](#appendix-C-2.1.2.1.1.4.1){.pilcrow}

        :   

        control stream

        :   [Section 2, Paragraph 3](#section-2-3){.xref}; [Section 3.2,
            Paragraph 4](#section-3.2-4){.xref}; [Section 6.2, Paragraph
            3](#section-6.2-3){.xref}; [Section 6.2, Paragraph
            5](#section-6.2-5){.xref}; [Section 6.2, Paragraph
            6](#section-6.2-6){.xref}; ***[Section
            6.2.1](#control-streams){.xref}***; [Section 7, Paragraph
            1](#section-7-1){.xref}; [Section 7.2.1, Paragraph
            2](#section-7.2.1-2){.xref}; [Section 7.2.2, Paragraph
            3](#section-7.2.2-3){.xref}; [Section 7.2.3, Paragraph
            5](#section-7.2.3-5){.xref}; [Section 7.2.3, Paragraph
            5](#section-7.2.3-5){.xref}; [Section 7.2.4, Paragraph
            2](#section-7.2.4-2){.xref}; [Section 7.2.4, Paragraph
            2](#section-7.2.4-2){.xref}; [Section 7.2.4, Paragraph
            3](#section-7.2.4-3){.xref}; [Section 7.2.5, Paragraph
            8](#section-7.2.5-8){.xref}; [Section 7.2.6, Paragraph
            3](#section-7.2.6-3){.xref}; [Section 7.2.6, Paragraph
            5](#section-7.2.6-5){.xref}; [Section 7.2.7, Paragraph
            2](#section-7.2.7-2){.xref}; [Section 8.1, Paragraph
            2.22.1](#H3_MISSING_SETTINGS){.xref}; [Section 9, Paragraph
            4](#section-9-4){.xref}; [Appendix A.2.4, Paragraph
            3](#appendix-A.2.4-3){.xref}; [Appendix A.3, Paragraph
            1](#appendix-A.3-1){.xref}[¶](#appendix-C-2.1.2.1.1.6.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.2}
    ::: {#rfc.index.u68}
    [D](#rfc.index.u68){.xref}[¶](#appendix-C-2.2.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.2.2.1}

        DATA

        :   [Section 2, Paragraph 3](#section-2-3){.xref}; [Section 4.1,
            Paragraph 5, Item 2](#section-4.1-5.2){.xref}; [Section 4.1,
            Paragraph 7](#section-4.1-7){.xref}; [Section 4.1, Paragraph
            7](#section-4.1-7){.xref}; [Section 4.1.2, Paragraph
            3](#section-4.1.2-3){.xref}; [Section 4.1.2, Paragraph
            3](#section-4.1.2-3){.xref}; [Section 4.4, Paragraph
            7](#section-4.4-7){.xref}; [Section 4.4, Paragraph
            7](#section-4.4-7){.xref}; [Section 4.4, Paragraph
            7](#section-4.4-7){.xref}; [Section 4.4, Paragraph
            7](#section-4.4-7){.xref}; [Section 4.4, Paragraph
            8](#section-4.4-8){.xref}; [Section 4.6, Paragraph
            12](#section-4.6-12){.xref}; [Table
            1](#stream-frame-mapping){.xref}; ***[Section
            7.2.1](#frame-data){.xref}***; [Table
            2](#iana-frame-table){.xref}; [Appendix A.1, Paragraph
            3](#appendix-A.1-3){.xref}; [Appendix A.2.3, Paragraph
            1](#appendix-A.2.3-1){.xref}; [Appendix
            A.2.5](#appendix-A.2.5-1.1){.xref}[¶](#appendix-C-2.2.2.1.1.2.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.3}
    ::: {#rfc.index.u71}
    [G](#rfc.index.u71){.xref}[¶](#appendix-C-2.3.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.3.2.1}

        GOAWAY

        :   [Section 3.3, Paragraph 5](#section-3.3-5){.xref}; [Section
            5.2, Paragraph 1](#section-5.2-1){.xref}; [Section 5.2,
            Paragraph 1](#section-5.2-1){.xref}; [Section 5.2, Paragraph
            1](#section-5.2-1){.xref}; [Section 5.2, Paragraph
            2](#section-5.2-2){.xref}; [Section 5.2, Paragraph
            2](#section-5.2-2){.xref}; [Section 5.2, Paragraph
            3](#section-5.2-3){.xref}; [Section 5.2, Paragraph
            5.1.1](#section-5.2-5.1.1){.xref}; [Section 5.2, Paragraph
            5.1.1](#section-5.2-5.1.1){.xref}; [Section 5.2, Paragraph
            5.1.2](#section-5.2-5.1.2){.xref}; [Section 5.2, Paragraph
            5.1.2](#section-5.2-5.1.2){.xref}; [Section 5.2, Paragraph
            5, Item 2](#section-5.2-5.2){.xref}; [Section 5.2, Paragraph
            5, Item 2](#section-5.2-5.2){.xref}; [Section 5.2, Paragraph
            6](#section-5.2-6){.xref}; [Section 5.2, Paragraph
            6](#section-5.2-6){.xref}; [Section 5.2, Paragraph
            7](#section-5.2-7){.xref}; [Section 5.2, Paragraph
            7](#section-5.2-7){.xref}; [Section 5.2, Paragraph
            8](#section-5.2-8){.xref}; [Section 5.2, Paragraph
            8](#section-5.2-8){.xref}; [Section 5.2, Paragraph
            9](#section-5.2-9){.xref}; [Section 5.2, Paragraph
            9](#section-5.2-9){.xref}; [Section 5.2, Paragraph
            10](#section-5.2-10){.xref}; [Section 5.2, Paragraph
            12](#section-5.2-12){.xref}; [Section 5.3, Paragraph
            2](#section-5.3-2){.xref}; [Section 5.3, Paragraph
            2](#section-5.3-2){.xref}; [Section 5.4, Paragraph
            2](#section-5.4-2){.xref}; [Table
            1](#stream-frame-mapping){.xref}; ***[Section
            7.2.6](#frame-goaway){.xref}***; [Table
            2](#iana-frame-table){.xref}; [Appendix
            A.2.5](#appendix-A.2.5-1.15){.xref}; [Appendix A.2.5,
            Paragraph
            1.16.1](#appendix-A.2.5-1.16.1){.xref}[¶](#appendix-C-2.3.2.1.1.2.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.4}
    ::: {#rfc.index.u72}
    [H](#rfc.index.u72){.xref}[¶](#appendix-C-2.4.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.4.2.1}

        H3_CLOSED_CRITICAL_STREAM

        :   [Section 6.2.1, Paragraph 2](#section-6.2.1-2){.xref};
            [Section 8.1](#section-8.1-2.9){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.4.1](#appendix-A.4-3.4.1){.xref}[¶](#appendix-C-2.4.2.1.1.2.1){.pilcrow}

        :   

        H3_CONNECT_ERROR

        :   [Section 4.4, Paragraph 10](#section-4.4-10){.xref};
            [Section 8.1](#section-8.1-2.31){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.22.1](#appendix-A.4-3.22.1){.xref}[¶](#appendix-C-2.4.2.1.1.4.1){.pilcrow}

        :   

        H3_EXCESSIVE_LOAD

        :   [Section 8.1](#section-8.1-2.15){.xref}; [Section 10.5,
            Paragraph 7](#section-10.5-7){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.24.1](#appendix-A.4-3.24.1){.xref}[¶](#appendix-C-2.4.2.1.1.6.1){.pilcrow}

        :   

        H3_FRAME_ERROR

        :   [Section 7.1, Paragraph 5](#section-7.1-5){.xref}; [Section
            7.1, Paragraph 6](#section-7.1-6){.xref}; [Section
            8.1](#section-8.1-2.13){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.14.1](#appendix-A.4-3.14.1){.xref}[¶](#appendix-C-2.4.2.1.1.8.1){.pilcrow}

        :   

        H3_FRAME_UNEXPECTED

        :   [Section 4.1, Paragraph 7](#section-4.1-7){.xref}; [Section
            4.1, Paragraph 8](#section-4.1-8){.xref}; [Section 4.4,
            Paragraph 8](#section-4.4-8){.xref}; [Section 7.2.1,
            Paragraph 2](#section-7.2.1-2){.xref}; [Section 7.2.2,
            Paragraph 3](#section-7.2.2-3){.xref}; [Section 7.2.3,
            Paragraph 5](#section-7.2.3-5){.xref}; [Section 7.2.4,
            Paragraph 2](#section-7.2.4-2){.xref}; [Section 7.2.4,
            Paragraph 3](#section-7.2.4-3){.xref}; [Section 7.2.5,
            Paragraph 8](#section-7.2.5-8){.xref}; [Section 7.2.5,
            Paragraph 9](#section-7.2.5-9){.xref}; [Section 7.2.6,
            Paragraph 5](#section-7.2.6-5){.xref}; [Section 7.2.7,
            Paragraph 2](#section-7.2.7-2){.xref}; [Section 7.2.7,
            Paragraph 3](#section-7.2.7-3){.xref}; [Section 7.2.8,
            Paragraph 3](#section-7.2.8-3){.xref}; [Section
            8.1](#section-8.1-2.11){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.4.1](#appendix-A.4-3.4.1){.xref}[¶](#appendix-C-2.4.2.1.1.10.1){.pilcrow}

        :   

        H3_GENERAL_PROTOCOL_ERROR

        :   [Section 7.2.5, Paragraph 6](#section-7.2.5-6){.xref};
            [Section 8.1](#section-8.1-2.3){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.4.1](#appendix-A.4-3.4.1){.xref}[¶](#appendix-C-2.4.2.1.1.12.1){.pilcrow}

        :   

        H3_ID_ERROR

        :   [Section 4.6, Paragraph 3](#section-4.6-3){.xref}; [Section
            5.2, Paragraph 7](#section-5.2-7){.xref}; [Section 6.2.2,
            Paragraph 6](#section-6.2.2-6){.xref}; [Section 7.2.3,
            Paragraph 7](#section-7.2.3-7){.xref}; [Section 7.2.3,
            Paragraph 8](#section-7.2.3-8){.xref}; [Section 7.2.5,
            Paragraph 5](#section-7.2.5-5){.xref}; [Section 7.2.6,
            Paragraph 3](#section-7.2.6-3){.xref}; [Section 7.2.7,
            Paragraph 6](#section-7.2.7-6){.xref}; [Section
            8.1](#section-8.1-2.17){.xref}; [Table
            4](#iana-error-table){.xref}[¶](#appendix-C-2.4.2.1.1.14.1){.pilcrow}

        :   

        H3_INTERNAL_ERROR

        :   [Section 8.1](#section-8.1-2.5){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.6.1](#appendix-A.4-3.6.1){.xref}[¶](#appendix-C-2.4.2.1.1.16.1){.pilcrow}

        :   

        H3_MESSAGE_ERROR

        :   [Section 4.1.2, Paragraph 4](#section-4.1.2-4){.xref};
            [Section 8.1](#section-8.1-2.29){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.4.1](#appendix-A.4-3.4.1){.xref}[¶](#appendix-C-2.4.2.1.1.18.1){.pilcrow}

        :   

        H3_MISSING_SETTINGS

        :   [Section 6.2.1, Paragraph 2](#section-6.2.1-2){.xref};
            [Section 8.1](#section-8.1-2.21){.xref}; [Table
            4](#iana-error-table){.xref}[¶](#appendix-C-2.4.2.1.1.20.1){.pilcrow}

        :   

        H3_NO_ERROR

        :   [Section 4.1, Paragraph 15](#section-4.1-15){.xref};
            [Section 5.2, Paragraph 11](#section-5.2-11){.xref};
            [Section 6.2.3, Paragraph 2](#section-6.2.3-2){.xref};
            [Section 8, Paragraph 5](#section-8-5){.xref}; [Section
            8.1](#section-8.1-2.1){.xref}; [Section 8.1, Paragraph
            3](#section-8.1-3){.xref}; [Section 8.1, Paragraph
            3](#section-8.1-3){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.2.1](#appendix-A.4-3.2.1){.xref}[¶](#appendix-C-2.4.2.1.1.22.1){.pilcrow}

        :   

        H3_REQUEST_CANCELLED

        :   [Section 4.1.1, Paragraph 4](#section-4.1.1-4){.xref};
            [Section 4.1.1, Paragraph 5](#section-4.1.1-5){.xref};
            [Section 4.6, Paragraph 14](#section-4.6-14){.xref};
            [Section 7.2.3, Paragraph 3](#section-7.2.3-3){.xref};
            [Section 7.2.3, Paragraph 4](#section-7.2.3-4){.xref};
            [Section 8.1](#section-8.1-2.25){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.18.1](#appendix-A.4-3.18.1){.xref}; [Appendix A.4.1,
            Paragraph
            3](#appendix-A.4.1-3){.xref}[¶](#appendix-C-2.4.2.1.1.24.1){.pilcrow}

        :   

        H3_REQUEST_INCOMPLETE

        :   [Section 4.1, Paragraph 14](#section-4.1-14){.xref};
            [Section 8.1](#section-8.1-2.27){.xref}; [Table
            4](#iana-error-table){.xref}[¶](#appendix-C-2.4.2.1.1.26.1){.pilcrow}

        :   

        H3_REQUEST_REJECTED

        :   [Section 4.1.1, Paragraph 3](#section-4.1.1-3){.xref};
            [Section 4.1.1, Paragraph 4](#section-4.1.1-4){.xref};
            [Section 4.1.1, Paragraph 5](#section-4.1.1-5){.xref};
            [Section 4.1.1, Paragraph 5](#section-4.1.1-5){.xref};
            [Section 8.1](#section-8.1-2.23){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.16.1](#appendix-A.4-3.16.1){.xref}; [Appendix A.4.1,
            Paragraph
            3](#appendix-A.4.1-3){.xref}[¶](#appendix-C-2.4.2.1.1.28.1){.pilcrow}

        :   

        H3_SETTINGS_ERROR

        :   [Section 7.2.4, Paragraph 6](#section-7.2.4-6){.xref};
            [Section 7.2.4.1, Paragraph 5](#section-7.2.4.1-5){.xref};
            [Section 7.2.4.2, Paragraph 8](#section-7.2.4.2-8){.xref};
            [Section 7.2.4.2, Paragraph 8](#section-7.2.4.2-8){.xref};
            [Section 8.1](#section-8.1-2.19){.xref}; [Table
            4](#iana-error-table){.xref}[¶](#appendix-C-2.4.2.1.1.30.1){.pilcrow}

        :   

        H3_STREAM_CREATION_ERROR

        :   [Section 6.1, Paragraph 3](#section-6.1-3){.xref}; [Section
            6.2, Paragraph 7](#section-6.2-7){.xref}; [Section 6.2.1,
            Paragraph 2](#section-6.2.1-2){.xref}; [Section 6.2.2,
            Paragraph 3](#section-6.2.2-3){.xref}; [Section
            8.1](#section-8.1-2.7){.xref}; [Table
            4](#iana-error-table){.xref}[¶](#appendix-C-2.4.2.1.1.32.1){.pilcrow}

        :   

        H3_VERSION_FALLBACK

        :   [Section 8.1](#section-8.1-2.33){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix A.4, Paragraph
            3.28.1](#appendix-A.4-3.28.1){.xref}[¶](#appendix-C-2.4.2.1.1.34.1){.pilcrow}

        :   

        HEADERS

        :   [Section 2, Paragraph 3](#section-2-3){.xref}; [Section 4.1,
            Paragraph 5, Item 1](#section-4.1-5.1){.xref}; [Section 4.1,
            Paragraph 5, Item 3](#section-4.1-5.3){.xref}; [Section 4.1,
            Paragraph 7](#section-4.1-7){.xref}; [Section 4.1, Paragraph
            7](#section-4.1-7){.xref}; [Section 4.1, Paragraph
            7](#section-4.1-7){.xref}; [Section 4.1, Paragraph
            10](#section-4.1-10){.xref}; [Section 4.4, Paragraph
            6](#section-4.4-6){.xref}; [Section 4.6, Paragraph
            12](#section-4.6-12){.xref}; [Table
            1](#stream-frame-mapping){.xref}; ***[Section
            7.2.2](#frame-headers){.xref}***; [Section 9, Paragraph
            5](#section-9-5){.xref}; [Table
            2](#iana-frame-table){.xref}; [Appendix A.2.1, Paragraph
            1](#appendix-A.2.1-1){.xref}; [Appendix
            A.2.5](#appendix-A.2.5-1.3){.xref}; [Appendix A.2.5,
            Paragraph 1.4.1](#appendix-A.2.5-1.4.1){.xref}; [Appendix
            A.2.5, Paragraph
            1.20.1](#appendix-A.2.5-1.20.1){.xref}[¶](#appendix-C-2.4.2.1.1.36.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.5}
    ::: {#rfc.index.u77}
    [M](#rfc.index.u77){.xref}[¶](#appendix-C-2.5.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.5.2.1}

        malformed

        :   [Section 4.1, Paragraph 3](#section-4.1-3){.xref};
            ***[Section 4.1.2](#malformed){.xref}***; [Section 4.2,
            Paragraph 2](#section-4.2-2){.xref}; [Section 4.2, Paragraph
            3](#section-4.2-3){.xref}; [Section 4.2, Paragraph
            5](#section-4.2-5){.xref}; [Section 4.3, Paragraph
            3](#section-4.3-3){.xref}; [Section 4.3, Paragraph
            4](#section-4.3-4){.xref}; [Section 4.3.1, Paragraph
            5](#section-4.3.1-5){.xref}; [Section 4.3.2, Paragraph
            1](#section-4.3.2-1){.xref}; [Section 4.4, Paragraph
            5](#section-4.4-5){.xref}; [Section 8.1, Paragraph
            2.30.1](#H3_MESSAGE_ERROR){.xref}; [Section 10.3, Paragraph
            1](#section-10.3-1){.xref}; [Section 10.3, Paragraph
            2](#section-10.3-2){.xref}; [Section 10.5.1, Paragraph
            2](#section-10.5.1-2){.xref}[¶](#appendix-C-2.5.2.1.1.2.1){.pilcrow}

        :   

        MAX_PUSH_ID

        :   [Section 2, Paragraph 5](#section-2-5){.xref}; [Section 4.6,
            Paragraph 3](#section-4.6-3){.xref}; [Section 4.6, Paragraph
            3](#section-4.6-3){.xref}; [Section 4.6, Paragraph
            3](#section-4.6-3){.xref}; [Section 4.6, Paragraph
            3](#section-4.6-3){.xref}; [Table
            1](#stream-frame-mapping){.xref}; [Section 7.2.5, Paragraph
            5](#section-7.2.5-5){.xref}; ***[Section
            7.2.7](#frame-max-push-id){.xref}***; [Table
            2](#iana-frame-table){.xref}; [Appendix A.1, Paragraph
            4](#appendix-A.1-4){.xref}; [Appendix A.3, Paragraph
            4.4.1](#appendix-A.3-4.4.1){.xref}[¶](#appendix-C-2.5.2.1.1.4.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.6}
    ::: {#rfc.index.u80}
    [P](#rfc.index.u80){.xref}[¶](#appendix-C-2.6.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.6.2.1}

        push ID

        :   ***[Section 4.6](#server-push){.xref}***; [Section 5.2,
            Paragraph 1](#section-5.2-1){.xref}; [Section 5.2, Paragraph
            5, Item 2](#section-5.2-5.2){.xref}; [Section 5.2, Paragraph
            9](#section-5.2-9){.xref}; [Section 6.2.2, Paragraph
            2](#section-6.2.2-2){.xref}; [Section 6.2.2, Paragraph
            6](#section-6.2.2-6){.xref}; [Section 6.2.2, Paragraph
            6](#section-6.2.2-6){.xref}; [Section 7.2.3, Paragraph
            1](#section-7.2.3-1){.xref}; [Section 7.2.3, Paragraph
            7](#section-7.2.3-7){.xref}; [Section 7.2.3, Paragraph
            7](#section-7.2.3-7){.xref}; [Section 7.2.3, Paragraph
            8](#section-7.2.3-8){.xref}; [Section 7.2.3, Paragraph
            8](#section-7.2.3-8){.xref}; [Section 7.2.5, Paragraph
            4.2.1](#section-7.2.5-4.2.1){.xref}; [Section 7.2.5,
            Paragraph 5](#section-7.2.5-5){.xref}; [Section 7.2.5,
            Paragraph 5](#section-7.2.5-5){.xref}; [Section 7.2.5,
            Paragraph 6](#section-7.2.5-6){.xref}; [Section 7.2.5,
            Paragraph 6](#section-7.2.5-6){.xref}; [Section 7.2.5,
            Paragraph 7](#section-7.2.5-7){.xref}; [Section 7.2.5,
            Paragraph 7](#section-7.2.5-7){.xref}; [Section 7.2.5,
            Paragraph 7](#section-7.2.5-7){.xref}; [Section 7.2.6,
            Paragraph 4](#section-7.2.6-4){.xref}; [Section 7.2.7,
            Paragraph 1](#section-7.2.7-1){.xref}; [Section 7.2.7,
            Paragraph 4](#section-7.2.7-4){.xref}; [Section 7.2.7,
            Paragraph 4](#section-7.2.7-4){.xref}; [Section 7.2.7,
            Paragraph 6](#section-7.2.7-6){.xref}; [Section 7.2.7,
            Paragraph 6](#section-7.2.7-6){.xref}; [Section 8.1,
            Paragraph 2.18.1](#H3_ID_ERROR){.xref}; [Appendix A.2.5,
            Paragraph 1.12.1](#appendix-A.2.5-1.12.1){.xref}; [Appendix
            A.2.5, Paragraph
            1.16.1](#appendix-A.2.5-1.16.1){.xref}[¶](#appendix-C-2.6.2.1.1.2.1){.pilcrow}

        :   

        push stream

        :   [Section 4.1, Paragraph 8](#section-4.1-8){.xref}; [Section
            4.1, Paragraph 9](#section-4.1-9){.xref}; [Section 4.6,
            Paragraph 3](#section-4.6-3){.xref}; [Section 4.6, Paragraph
            5](#section-4.6-5){.xref}; [Section 4.6, Paragraph
            5](#section-4.6-5){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Section 6.2, Paragraph
            3](#section-6.2-3){.xref}; ***[Section
            6.2.2](#push-streams){.xref}***; [Section 7, Paragraph
            1](#section-7-1){.xref}; [Section 7.2.2, Paragraph
            3](#section-7.2.2-3){.xref}; [Section 7.2.3, Paragraph
            1](#section-7.2.3-1){.xref}; [Section 7.2.3, Paragraph
            2](#section-7.2.3-2){.xref}; [Section 7.2.3, Paragraph
            2](#section-7.2.3-2){.xref}; [Section 7.2.3, Paragraph
            2](#section-7.2.3-2){.xref}; [Section 7.2.3, Paragraph
            2](#section-7.2.3-2){.xref}; [Section 7.2.3, Paragraph
            3](#section-7.2.3-3){.xref}; [Section 7.2.3, Paragraph
            4](#section-7.2.3-4){.xref}; [Section 7.2.3, Paragraph
            4](#section-7.2.3-4){.xref}; [Section 7.2.3, Paragraph
            4](#section-7.2.3-4){.xref}; [Section 7.2.5, Paragraph
            4.2.1](#section-7.2.5-4.2.1){.xref}; [Section 7.2.7,
            Paragraph 1](#section-7.2.7-1){.xref}; [Appendix A.2.5,
            Paragraph
            1.12.1](#appendix-A.2.5-1.12.1){.xref}[¶](#appendix-C-2.6.2.1.1.4.1){.pilcrow}

        :   

        PUSH_PROMISE

        :   [Section 2, Paragraph 5](#section-2-5){.xref}; [Section 4.1,
            Paragraph 8](#section-4.1-8){.xref}; [Section 4.1, Paragraph
            8](#section-4.1-8){.xref}; [Section 4.1, Paragraph
            8](#section-4.1-8){.xref}; [Section 4.1, Paragraph
            8](#section-4.1-8){.xref}; [Section 4.1, Paragraph
            10](#section-4.1-10){.xref}; [Section 4.6, Paragraph
            4](#section-4.6-4){.xref}; [Section 4.6, Paragraph
            10](#section-4.6-10){.xref}; [Section 4.6, Paragraph
            11](#section-4.6-11){.xref}; [Section 4.6, Paragraph
            11](#section-4.6-11){.xref}; [Section 4.6, Paragraph
            12](#section-4.6-12){.xref}; [Section 4.6, Paragraph
            12](#section-4.6-12){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Section 4.6, Paragraph
            13](#section-4.6-13){.xref}; [Table
            1](#stream-frame-mapping){.xref}; [Section 7.2.3, Paragraph
            8](#section-7.2.3-8){.xref}; [Section 7.2.3, Paragraph
            8](#section-7.2.3-8){.xref}; ***[Section
            7.2.5](#frame-push-promise){.xref}***; [Section 7.2.7,
            Paragraph 1](#section-7.2.7-1){.xref}; [Section 10.4,
            Paragraph 1](#section-10.4-1){.xref}; [Section 10.5,
            Paragraph 2](#section-10.5-2){.xref}; [Table
            2](#iana-frame-table){.xref}; [Appendix
            A.2.5](#appendix-A.2.5-1.11){.xref}; [Appendix A.2.5,
            Paragraph 1.12.1](#appendix-A.2.5-1.12.1){.xref}; [Appendix
            A.2.5, Paragraph 1.12.1](#appendix-A.2.5-1.12.1){.xref};
            [Appendix A.2.5, Paragraph
            1.20.1](#appendix-A.2.5-1.20.1){.xref}[¶](#appendix-C-2.6.2.1.1.6.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.7}
    ::: {#rfc.index.u82}
    [R](#rfc.index.u82){.xref}[¶](#appendix-C-2.7.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.7.2.1}

        request stream

        :   [Section 4.1, Paragraph 1](#section-4.1-1){.xref}; [Section
            4.1, Paragraph 15](#section-4.1-15){.xref}; [Section 4.1,
            Paragraph 15](#section-4.1-15){.xref}; [Section 4.1.1,
            Paragraph 1](#section-4.1.1-1){.xref}; [Section 4.1.1,
            Paragraph 5](#section-4.1.1-5){.xref}; [Section 4.4,
            Paragraph 5](#section-4.4-5){.xref}; [Section 4.4, Paragraph
            9](#section-4.4-9){.xref}; [Section 4.6, Paragraph
            4](#section-4.6-4){.xref}; [Section 4.6, Paragraph
            4](#section-4.6-4){.xref}; [Section 4.6, Paragraph
            11](#section-4.6-11){.xref}; [Section 4.6, Paragraph
            11](#section-4.6-11){.xref}; ***[Section
            6.1](#request-streams){.xref}***; [Section 7, Paragraph
            1](#section-7-1){.xref}; [Section 7.2.2, Paragraph
            3](#section-7.2.2-3){.xref}; [Section 7.2.5, Paragraph
            1](#section-7.2.5-1){.xref}[¶](#appendix-C-2.7.2.1.1.2.1){.pilcrow}

        :   
    :::

-   ::: {#appendix-C-2.8}
    ::: {#rfc.index.u83}
    [S](#rfc.index.u83){.xref}[¶](#appendix-C-2.8.1){.pilcrow}
    :::

    -   [[]{.break}]{#appendix-C-2.8.2.1}

        SETTINGS

        :   [Section 3.2, Paragraph 4](#section-3.2-4){.xref}; [Section
            3.2, Paragraph 4](#section-3.2-4){.xref}; [Section 6.2.1,
            Paragraph 2](#section-6.2.1-2){.xref}; [Table
            1](#stream-frame-mapping){.xref}; [Section 7, Paragraph
            3](#section-7-3){.xref}; ***[Section
            7.2.4](#frame-settings){.xref}***; [Section 8.1, Paragraph
            2.20.1](#H3_SETTINGS_ERROR){.xref}; [Section 8.1, Paragraph
            2.22.1](#H3_MISSING_SETTINGS){.xref}; [Section 9, Paragraph
            4](#section-9-4){.xref}; [Section 10.5, Paragraph
            4](#section-10.5-4){.xref}; [Table
            2](#iana-frame-table){.xref}; [Table
            4](#iana-error-table){.xref}; [Table
            4](#iana-error-table){.xref}; [Appendix
            A.2.5](#appendix-A.2.5-1.9){.xref}; [Appendix A.2.5,
            Paragraph 1.10.1](#appendix-A.2.5-1.10.1){.xref}; [Appendix
            A.3, Paragraph 2](#appendix-A.3-2){.xref}; [Appendix A.3,
            Paragraph 3](#appendix-A.3-3){.xref}; [Appendix A.3,
            Paragraph 4.4.1](#appendix-A.3-4.4.1){.xref}; [Appendix A.3,
            Paragraph 4.6.1](#appendix-A.3-4.6.1){.xref}; [Appendix A.3,
            Paragraph 4.8.1](#appendix-A.3-4.8.1){.xref}; [Appendix A.3,
            Paragraph 4.10.1](#appendix-A.3-4.10.1){.xref}; [Appendix
            A.4, Paragraph
            3.10.1](#appendix-A.4-3.10.1){.xref}[¶](#appendix-C-2.8.2.1.1.2.1){.pilcrow}

        :   

        SETTINGS_MAX_FIELD_SECTION_SIZE

        :   [Section 4.2.2, Paragraph 2](#section-4.2.2-2){.xref};
            [Section 7.2.4.1](#section-7.2.4.1-2.1){.xref}; [Section
            10.5.1, Paragraph 2](#section-10.5.1-2){.xref}; [Appendix
            A.3, Paragraph
            4.12.1](#appendix-A.3-4.12.1){.xref}[¶](#appendix-C-2.8.2.1.1.4.1){.pilcrow}

        :   

        stream error

        :   [Section 2.2](#section-2.2-4.25){.xref}; [Section 4.1.2,
            Paragraph 4](#section-4.1.2-4){.xref}; [Section 4.4,
            Paragraph 10](#section-4.4-10){.xref}; ***[Section
            8](#errors){.xref}***; [Appendix A.4.1, Paragraph
            3](#appendix-A.4.1-3){.xref}; [Appendix A.4.1, Paragraph
            3](#appendix-A.4.1-3){.xref}; [Appendix A.4.1, Paragraph
            4](#appendix-A.4.1-4){.xref}[¶](#appendix-C-2.8.2.1.1.6.1){.pilcrow}

        :   
    :::
:::

::: {#authors-addresses}
::: {#appendix-D .section}
## [Author\'s Address](#name-authors-address){.section-name .selfRef} {#name-authors-address}

::: {.left dir="auto"}
[Mike Bishop ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Akamai]{.org}
:::

::: email
Email: <mbishop@evequefou.be>
:::
:::
:::
