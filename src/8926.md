  RFC 8926        Geneve Protocol   November 2020
  --------------- ----------------- ---------------
  Gross, et al.   Standards Track   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8926](https://www.rfc-editor.org/rfc/rfc8926){.eref}

Category:
:   Standards Track

Published:
:   November 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    J. Gross, [Ed.]{.editor}
    :::
    :::

    ::: author
    ::: author-name
    I. Ganga, [Ed.]{.editor}
    :::

    ::: org
    Intel
    :::
    :::

    ::: author
    ::: author-name
    T. Sridhar, [Ed.]{.editor}
    :::

    ::: org
    VMware
    :::
    :::
:::

# RFC 8926 {#rfcnum}

# Geneve: Generic Network Virtualization Encapsulation {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Network virtualization involves the cooperation of devices with a wide
variety of capabilities such as software and hardware tunnel endpoints,
transit fabrics, and centralized control clusters. As a result of their
role in tying together different elements of the system, the
requirements on tunnels are influenced by all of these components.
Therefore, flexibility is the most important aspect of a tunneling
protocol if it is to keep pace with the evolution of technology. This
document describes Geneve, an encapsulation protocol designed to
recognize and accommodate these changing capabilities and
needs.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8926>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.1.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.1.2.2}
        [1.2](#section-1.2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.1.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Design
    Requirements](#name-design-requirements){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Control Plane
        Independence](#name-control-plane-independence){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Data Plane
        Extensibility](#name-data-plane-extensibility){.xref}[¶](#section-toc.1-1.2.2.2.1){.pilcrow}

        -   ::: {#section-toc.1-1.2.2.2.2.1}
            [2.2.1](#section-2.2.1){.xref}.  [Efficient
            Implementation](#name-efficient-implementation){.xref}[¶](#section-toc.1-1.2.2.2.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.2.2.3}
        [2.3](#section-2.3){.xref}.  [Use of Standard IP
        Fabrics](#name-use-of-standard-ip-fabrics){.xref}[¶](#section-toc.1-1.2.2.3.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Geneve Encapsulation
    Details](#name-geneve-encapsulation-detail){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Geneve Packet Format over
        IPv4](#name-geneve-packet-format-over-i){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Geneve Packet Format over
        IPv6](#name-geneve-packet-format-over-ipv){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [UDP
        Header](#name-udp-header){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [Tunnel Header
        Fields](#name-tunnel-header-fields){.xref}[¶](#section-toc.1-1.3.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [Tunnel
        Options](#name-tunnel-options){.xref}[¶](#section-toc.1-1.3.2.5.1){.pilcrow}

        -   ::: {#section-toc.1-1.3.2.5.2.1}
            [3.5.1](#section-3.5.1){.xref}.  [Options
            Processing](#name-options-processing){.xref}[¶](#section-toc.1-1.3.2.5.2.1.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Implementation and Deployment
    Considerations](#name-implementation-and-deployme){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Applicability
        Statement](#name-applicability-statement){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Congestion-Control
        Functionality](#name-congestion-control-function){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [UDP
        Checksum](#name-udp-checksum){.xref}[¶](#section-toc.1-1.4.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.3.2.1}
            [4.3.1](#section-4.3.1){.xref}.  [Zero UDP Checksum Handling
            with
            IPv6](#name-zero-udp-checksum-handling-){.xref}[¶](#section-toc.1-1.4.2.3.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [Encapsulation of Geneve in
        IP](#name-encapsulation-of-geneve-in-){.xref}[¶](#section-toc.1-1.4.2.4.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.4.2.1}
            [4.4.1](#section-4.4.1){.xref}.  [IP
            Fragmentation](#name-ip-fragmentation){.xref}[¶](#section-toc.1-1.4.2.4.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.4.2.2}
            [4.4.2](#section-4.4.2){.xref}.  [DSCP, ECN, and
            TTL](#name-dscp-ecn-and-ttl){.xref}[¶](#section-toc.1-1.4.2.4.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.4.2.3}
            [4.4.3](#section-4.4.3){.xref}.  [Broadcast and
            Multicast](#name-broadcast-and-multicast){.xref}[¶](#section-toc.1-1.4.2.4.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.4.2.4}
            [4.4.4](#section-4.4.4){.xref}.  [Unidirectional
            Tunnels](#name-unidirectional-tunnels){.xref}[¶](#section-toc.1-1.4.2.4.2.4.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [Constraints on Protocol
        Features](#name-constraints-on-protocol-fea){.xref}[¶](#section-toc.1-1.4.2.5.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.5.2.1}
            [4.5.1](#section-4.5.1){.xref}.  [Constraints on
            Options](#name-constraints-on-options){.xref}[¶](#section-toc.1-1.4.2.5.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [NIC
        Offloads](#name-nic-offloads){.xref}[¶](#section-toc.1-1.4.2.6.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.7}
        [4.7](#section-4.7){.xref}.  [Inner VLAN
        Handling](#name-inner-vlan-handling){.xref}[¶](#section-toc.1-1.4.2.7.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Transition
    Considerations](#name-transition-considerations){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Data
        Confidentiality](#name-data-confidentiality){.xref}[¶](#section-toc.1-1.6.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.6.2.1.2.1}
            [6.1.1](#section-6.1.1){.xref}.  [Inter-Data Center
            Traffic](#name-inter-data-center-traffic){.xref}[¶](#section-toc.1-1.6.2.1.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Data
        Integrity](#name-data-integrity){.xref}[¶](#section-toc.1-1.6.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [Authentication of NVE
        Peers](#name-authentication-of-nve-peers){.xref}[¶](#section-toc.1-1.6.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Options Interpretation by Transit
        Devices](#name-options-interpretation-by-t){.xref}[¶](#section-toc.1-1.6.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.5}
        [6.5](#section-6.5){.xref}.  [Multicast/Broadcast](#name-multicast-broadcast){.xref}[¶](#section-toc.1-1.6.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.6}
        [6.6](#section-6.6){.xref}.  [Control Plane
        Communications](#name-control-plane-communication){.xref}[¶](#section-toc.1-1.6.2.6.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.8.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.8.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [](#section-appendix.b){.xref}[Contributors](#name-contributors){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.11}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}
    :::
:::
:::

::: {#sec-1}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Networking has long featured a variety of tunneling, tagging, and other
encapsulation mechanisms. However, the advent of network virtualization
has caused a surge of renewed interest and a corresponding increase in
the introduction of new protocols. The large number of protocols in this
space \-- for example, ranging all the way from VLANs
\[[IEEE.802.1Q_2018](#IEEE.802.1Q_2018){.xref}\] and MPLS
\[[RFC3031](#RFC3031){.xref}\] through the more recent VXLAN (Virtual
eXtensible Local Area Network) \[[RFC7348](#RFC7348){.xref}\] and NVGRE
(Network Virtualization Using Generic Routing Encapsulation)
\[[RFC7637](#RFC7637){.xref}\] \-- often leads to questions about the
need for new encapsulation formats and what it is about network
virtualization in particular that leads to their proliferation. Note
that the list of protocols presented above is
non-exhaustive.[¶](#section-1-1){.pilcrow}

While many encapsulation protocols seek to simply partition the underlay
network or bridge two domains, network virtualization views the transit
network as providing connectivity between multiple components of a
distributed system. In many ways, this system is similar to a chassis
switch with the IP underlay network playing the role of the backplane
and tunnel endpoints on the edge as line cards. When viewed in this
light, the requirements placed on the tunneling protocol are
significantly different in terms of the quantity of metadata necessary
and the role of transit nodes.[¶](#section-1-2){.pilcrow}

Work such as \"VL2: A Scalable and Flexible Data Center Network\"
\[[VL2](#VL2){.xref}\] and \"NVO3 Data Plane Requirements\"
\[[NVO3-DATAPLANE](#I-D.ietf-nvo3-dataplane-requirements){.xref}\] have
described some of the properties that the data plane must have to
support network virtualization. However, one additional defining
requirement is the need to carry metadata (e.g., system state) along
with the packet data; example use cases of metadata are noted below. The
use of some metadata is certainly not a foreign concept \-- nearly all
protocols used for network virtualization have at least 24 bits of
identifier space as a way to partition between tenants. This is often
described as overcoming the limits of 12-bit VLANs; when seen in that
context or any context where it is a true tenant identifier, 16 million
possible entries is a large number. However, the reality is that the
metadata is not exclusively used to identify tenants, and encoding other
information quickly starts to crowd the space. In fact, when compared to
the tags used to exchange metadata between line cards on a chassis
switch, 24-bit identifiers start to look quite small. There are nearly
endless uses for this metadata, ranging from storing input port
identifiers for simple security policies to sending service-based
context for advanced middlebox applications that terminate and
re-encapsulate Geneve traffic.[¶](#section-1-3){.pilcrow}

Existing tunneling protocols have each attempted to solve different
aspects of these new requirements only to be quickly rendered out of
date by changing control plane implementations and advancements.
Furthermore, software and hardware components and controllers all have
different advantages and rates of evolution \-- a fact that should be
viewed as a benefit, not a liability or limitation. This document
describes Geneve, a protocol that seeks to avoid these problems by
providing a framework for tunneling for network virtualization rather
than being prescriptive about the entire
system.[¶](#section-1-4){.pilcrow}

::: {#sec-1.1}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.1-1){.pilcrow}
:::
:::

::: {#sec-1.2}
::: {#section-1.2 .section}
### [1.2.](#section-1.2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The Network Virtualization over Layer 3 (NVO3) Framework
\[[RFC7365](#RFC7365){.xref}\] defines many of the concepts commonly
used in network virtualization. In addition, the following terms are
specifically meaningful in this document:[¶](#section-1.2-1){.pilcrow}

[]{.break}

Checksum offload:
:   An optimization implemented by many NICs (Network Interface
    Controllers) that enables computation and verification of
    upper-layer protocol checksums in hardware on transmit and receive,
    respectively. This typically includes IP and TCP/UDP checksums that
    would otherwise be computed by the protocol stack in
    software.[¶](#section-1.2-2.2){.pilcrow}
:   

Clos network:
:   A technique for composing network fabrics larger than a single
    switch while maintaining non-blocking bandwidth across connection
    points. ECMP is used to divide traffic across the multiple links and
    switches that constitute the fabric. Sometimes termed \"leaf and
    spine\" or \"fat tree\" topologies.[¶](#section-1.2-2.4){.pilcrow}
:   

ECMP:
:   Equal Cost Multipath. A routing mechanism for selecting from among
    multiple best next-hop paths by hashing packet headers in order to
    better utilize network bandwidth while avoiding reordering of
    packets within a flow.[¶](#section-1.2-2.6){.pilcrow}
:   

Geneve:
:   Generic Network Virtualization Encapsulation. The tunneling protocol
    described in this document.[¶](#section-1.2-2.8){.pilcrow}
:   

LRO:
:   Large Receive Offload. The receiver-side equivalent function of LSO,
    in which multiple protocol segments (primarily TCP) are coalesced
    into larger data units.[¶](#section-1.2-2.10){.pilcrow}
:   

LSO:
:   Large Segmentation Offload. A function provided by many commercial
    NICs that allows data units larger than the MTU to be passed to the
    NIC to improve performance, the NIC being responsible for creating
    smaller segments of a size less than or equal to the MTU with
    correct protocol headers. When referring specifically to TCP/IP,
    this feature is often known as TSO (TCP Segmentation
    Offload).[¶](#section-1.2-2.12){.pilcrow}
:   

Middlebox:
:   In the context of this document, the term \"middlebox\" refers to
    network service functions or service interposition appliances that
    typically implement tunnel endpoint functionality, terminating and
    re-encapsulating Geneve traffic.[¶](#section-1.2-2.14){.pilcrow}
:   

NIC:
:   Network Interface Controller. Also called \"Network Interface Card\"
    or \"Network Adapter\". A NIC could be part of a tunnel endpoint or
    transit device and can either process or aid in the processing of
    Geneve packets.[¶](#section-1.2-2.16){.pilcrow}
:   

Transit device:
:   A forwarding element (e.g., router or switch) along the path of the
    tunnel making up part of the underlay network. A transit device may
    be capable of understanding the Geneve packet format but does not
    originate or terminate Geneve
    packets.[¶](#section-1.2-2.18){.pilcrow}
:   

Tunnel endpoint:
:   A component performing encapsulation and decapsulation of packets,
    such as Ethernet frames or IP datagrams, in Geneve headers. As the
    ultimate consumer of any tunnel metadata, tunnel endpoints have the
    highest level of requirements for parsing and interpreting tunnel
    headers. Tunnel endpoints may consist of either software or hardware
    implementations or a combination of the two. Tunnel endpoints are
    frequently a component of a Network Virtualization Edge (NVE) but
    may also be found in middleboxes or other elements making up an NVO3
    network.[¶](#section-1.2-2.20){.pilcrow}
:   

VM:
:   Virtual Machine.[¶](#section-1.2-2.22){.pilcrow}
:   
:::
:::
:::
:::

::: {#sec-2}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Design Requirements](#name-design-requirements){.section-name .selfRef} {#name-design-requirements}

Geneve is designed to support network virtualization use cases for data
center environments. In these situations, tunnels are typically
established to act as a backplane between the virtual switches residing
in hypervisors, physical switches, or middleboxes or other appliances.
An arbitrary IP network can be used as an underlay, although Clos
networks composed using ECMP links are a common choice to provide
consistent bisectional bandwidth across all connection points. Many of
the concepts of network virtualization overlays over IP networks are
described in the NVO3 Framework \[[RFC7365](#RFC7365){.xref}\]. [Figure
1](#ref-sample-geneve-deployment){.xref} shows an example of a
hypervisor, a top-of-rack switch for connectivity to physical servers,
and a WAN uplink connected using Geneve tunnels over a simplified Clos
network. These tunnels are used to encapsulate and forward frames from
the attached components, such as VMs or physical
links.[¶](#section-2-1){.pilcrow}

[]{#name-sample-geneve-deployment}

::: {#ref-sample-geneve-deployment}
::: {#section-2-2.1 .artwork .art-text .alignLeft}
      +---------------------+           +-------+  +------+
      | +--+  +-------+---+ |           |Transit|--|Top of|==Physical
      | |VM|--|       |   | | +------+ /|Router |  | Rack |==Servers
      | +--+  |Virtual|NIC|---|Top of|/ +-------+\/+------+
      | +--+  |Switch |   | | | Rack |\ +-------+/\+------+
      | |VM|--|       |   | | +------+ \|Transit|  |Uplink|   WAN
      | +--+  +-------+---+ |           |Router |--|      |=========>
      +---------------------+           +-------+  +------+
             Hypervisor

                  ()===================================()
                          Switch-Switch Geneve Tunnels
:::

[Figure 1](#figure-1){.selfRef}: [Sample Geneve
Deployment](#name-sample-geneve-deployment){.selfRef}
:::

To support the needs of network virtualization, the tunneling protocol
should be able to take advantage of the differing (and evolving)
capabilities of each type of device in both the underlay and overlay
networks. This results in the following requirements being placed on the
data plane tunneling protocol:[¶](#section-2-3){.pilcrow}

-   [The data plane is generic and extensible enough to support current
    and future control
    planes.[¶](#section-2-4.1){.pilcrow}]{#section-2-4.1}
-   [Tunnel components are efficiently implementable in both hardware
    and software without restricting capabilities to the lowest common
    denominator.[¶](#section-2-4.2){.pilcrow}]{#section-2-4.2}
-   [High performance over existing IP fabrics is
    maintained.[¶](#section-2-4.3){.pilcrow}]{#section-2-4.3}

These requirements are described further in the following
subsections.[¶](#section-2-5){.pilcrow}

::: {#sec-2.1}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Control Plane Independence](#name-control-plane-independence){.section-name .selfRef} {#name-control-plane-independence}

Although some protocols for network virtualization have included a
control plane as part of the tunnel format specification (most notably,
VXLAN \[[RFC7348](#RFC7348){.xref}\] prescribed a
multicast-learning-based control plane), these specifications have
largely been treated as describing only the data format. The VXLAN
packet format has actually seen a wide variety of control planes built
on top of it.[¶](#section-2.1-1){.pilcrow}

There is a clear advantage in settling on a data format: most of the
protocols are only superficially different and there is little advantage
in duplicating effort. However, the same cannot be said of control
planes, which are diverse in very fundamental ways. The case for
standardization is also less clear given the wide variety in
requirements, goals, and deployment
scenarios.[¶](#section-2.1-2){.pilcrow}

As a result of this reality, Geneve is a pure tunnel format
specification that is capable of fulfilling the needs of many control
planes by explicitly not selecting any one of them. This simultaneously
promotes a shared data format and reduces the chance of obsolescence by
future control plane enhancements.[¶](#section-2.1-3){.pilcrow}
:::
:::

::: {#sec-2.2}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Data Plane Extensibility](#name-data-plane-extensibility){.section-name .selfRef} {#name-data-plane-extensibility}

Achieving the level of flexibility needed to support current and future
control planes effectively requires an options infrastructure to allow
new metadata types to be defined, deployed, and either finalized or
retired. Options also allow for differentiation of products by
encouraging independent development in each vendor\'s core specialty,
leading to an overall faster pace of advancement. By far, the most
common mechanism for implementing options is the Type-Length-Value (TLV)
format.[¶](#section-2.2-1){.pilcrow}

It should be noted that, while options can be used to support
non-wirespeed control packets, they are equally important in data
packets as well for segregating and directing forwarding. (For instance,
the examples given before regarding input-port-based security policies
and terminating/re-encapsulating service interposition both require tags
to be placed on data packets.) Therefore, while it would be desirable to
limit the extensibility to only control packets for the purposes of
simplifying the datapath, that would not satisfy the design
requirements.[¶](#section-2.2-2){.pilcrow}

::: {#sec-2.2.1}
::: {#section-2.2.1 .section}
#### [2.2.1.](#section-2.2.1){.section-number .selfRef} [Efficient Implementation](#name-efficient-implementation){.section-name .selfRef} {#name-efficient-implementation}

There is often a conflict between software flexibility and hardware
performance that is difficult to resolve. For a given set of
functionality, it is obviously desirable to maximize performance.
However, that does not mean new features that cannot be run at a desired
speed today should be disallowed. Therefore, for a protocol to be
considered efficiently implementable, it is expected to have a set of
common capabilities that can be reasonably handled across platforms as
well as a graceful mechanism to handle more advanced features in the
appropriate situations.[¶](#section-2.2.1-1){.pilcrow}

The use of a variable-length header and options in a protocol often
raises questions about whether the protocol is truly efficiently
implementable in hardware. To answer this question in the context of
Geneve, it is important to first divide \"hardware\" into two
categories: tunnel endpoints and transit
devices.[¶](#section-2.2.1-2){.pilcrow}

Tunnel endpoints must be able to parse the variable-length header,
including any options, and take action. Since these devices are actively
participating in the protocol, they are the most affected by Geneve.
However, as tunnel endpoints are the ultimate consumers of the data,
transmitters can tailor their output to the capabilities of the
recipient.[¶](#section-2.2.1-3){.pilcrow}

Transit devices may be able to interpret the options; however, as
non-terminating devices, transit devices do not originate or terminate
the Geneve packet. Hence, they [MUST NOT]{.bcp14} modify Geneve headers
and [MUST NOT]{.bcp14} insert or delete options, as that is the
responsibility of tunnel endpoints. Options, if present in the packet,
[MUST]{.bcp14} only be generated and terminated by tunnel endpoints. The
participation of transit devices in interpreting options is
[OPTIONAL]{.bcp14}.[¶](#section-2.2.1-4){.pilcrow}

Further, either tunnel endpoints or transit devices [MAY]{.bcp14} use
offload capabilities of NICs, such as checksum offload, to improve the
performance of Geneve packet processing. The presence of a Geneve
variable-length header should not prevent the tunnel endpoints and
transit devices from using such offload
capabilities.[¶](#section-2.2.1-5){.pilcrow}
:::
:::
:::
:::

::: {#sec-2.3}
::: {#section-2.3 .section}
### [2.3.](#section-2.3){.section-number .selfRef} [Use of Standard IP Fabrics](#name-use-of-standard-ip-fabrics){.section-name .selfRef} {#name-use-of-standard-ip-fabrics}

IP has clearly cemented its place as the dominant transport mechanism,
and many techniques have evolved over time to make it robust, efficient,
and inexpensive. As a result, it is natural to use IP fabrics as a
transit network for Geneve. Fortunately, the use of IP encapsulation and
addressing is enough to achieve the primary goal of delivering packets
to the correct point in the network through standard switching and
routing.[¶](#section-2.3-1){.pilcrow}

In addition, nearly all underlay fabrics are designed to exploit
parallelism in traffic to spread load across multiple links without
introducing reordering in individual flows. These ECMP techniques
typically involve parsing and hashing the addresses and port numbers
from the packet to select an outgoing link. However, the use of tunnels
often results in poor ECMP performance, as without additional knowledge
of the protocol, the encapsulated traffic is hidden from the fabric by
design, and only tunnel endpoint addresses are available for
hashing.[¶](#section-2.3-2){.pilcrow}

Since it is desirable for Geneve to perform well on these existing
fabrics, it is necessary for entropy from encapsulated packets to be
exposed in the tunnel header. The most common technique for this is to
use the UDP source port, which is discussed further in [Section
3.3](#sec-3.3){.xref}.[¶](#section-2.3-3){.pilcrow}
:::
:::
:::
:::

::: {#sec-3}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Geneve Encapsulation Details](#name-geneve-encapsulation-detail){.section-name .selfRef} {#name-geneve-encapsulation-detail}

The Geneve packet format consists of a compact tunnel header
encapsulated in UDP over either IPv4 or IPv6. A small fixed tunnel
header provides control information plus a base level of functionality
and interoperability with a focus on simplicity. This header is then
followed by a set of variable-length options to allow for future
innovation. Finally, the payload consists of a protocol data unit of the
indicated type, such as an Ethernet frame. Sections
[3.1](#sec-3.1){.xref} and [3.2](#sec-3.2){.xref} illustrate the Geneve
packet format transported (for example) over Ethernet along with an
Ethernet payload.[¶](#section-3-1){.pilcrow}

::: {#sec-3.1}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Geneve Packet Format over IPv4](#name-geneve-packet-format-over-i){.section-name .selfRef} {#name-geneve-packet-format-over-i}

[]{#name-geneve-packet-format-over-ip}

::: {#section-3.1-1.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

    Outer Ethernet Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                 Outer Destination MAC Address                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Outer Destination MAC Address |   Outer Source MAC Address    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   Outer Source MAC Address                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Optional Ethertype=C-Tag 802.1Q|  Outer VLAN Tag Information   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    Ethertype = 0x0800 IPv4    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Outer IPv4 Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Version|  IHL  |Type of Service|          Total Length         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Identification        |Flags|      Fragment Offset    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |  Time to Live |Protocol=17 UDP|         Header Checksum       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                     Outer Source IPv4 Address                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   Outer Destination IPv4 Address              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Outer UDP Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |       Source Port = xxxx      |    Dest Port = 6081 Geneve    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           UDP Length          |        UDP Checksum           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Geneve Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Ver|  Opt Len  |O|C|    Rsvd.  |          Protocol Type        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |        Virtual Network Identifier (VNI)       |    Reserved   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       ~                    Variable-Length Options                    ~
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Inner Ethernet Header (example payload):
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                 Inner Destination MAC Address                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Inner Destination MAC Address |   Inner Source MAC Address    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   Inner Source MAC Address                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Optional Ethertype=C-Tag 802.1Q|  Inner VLAN Tag Information   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Payload:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Ethertype of Original Payload |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
       |                                  Original Ethernet Payload    |
       |                                                               |
       ~ (Note that the original Ethernet frame's preamble, start      ~
       | frame delimiter (SFD), and frame check sequence (FCS) are not |
       | included, and the Ethernet payload need not be 4-byte aligned)|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Frame Check Sequence:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   New Frame Check Sequence (FCS) for Outer Ethernet Frame     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 2](#figure-2){.selfRef}: [Geneve Packet Format over
IPv4](#name-geneve-packet-format-over-ip){.selfRef}
:::
:::

::: {#sec-3.2}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Geneve Packet Format over IPv6](#name-geneve-packet-format-over-ipv){.section-name .selfRef} {#name-geneve-packet-format-over-ipv}

[]{#name-geneve-packet-format-over-ipv6}

::: {#section-3.2-1.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

    Outer Ethernet Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                 Outer Destination MAC Address                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Outer Destination MAC Address |   Outer Source MAC Address    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   Outer Source MAC Address                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Optional Ethertype=C-Tag 802.1Q|  Outer VLAN Tag Information   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    Ethertype = 0x86DD IPv6    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Outer IPv6 Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Version| Traffic Class |           Flow Label                  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Payload Length        | NxtHdr=17 UDP |   Hop Limit   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                     Outer Source IPv6 Address                 +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                  Outer Destination IPv6 Address               +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Outer UDP Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |       Source Port = xxxx      |    Dest Port = 6081 Geneve    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           UDP Length          |        UDP Checksum           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Geneve Header:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Ver|  Opt Len  |O|C|    Rsvd.  |          Protocol Type        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |        Virtual Network Identifier (VNI)       |    Reserved   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       ~                    Variable-Length Options                    ~
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Inner Ethernet Header (example payload):
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                 Inner Destination MAC Address                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Inner Destination MAC Address |   Inner Source MAC Address    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   Inner Source MAC Address                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Optional Ethertype=C-Tag 802.1Q|  Inner VLAN Tag Information   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Payload:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Ethertype of Original Payload |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
       |                                  Original Ethernet Payload    |
       |                                                               |
       ~ (Note that the original Ethernet frame's preamble, start      ~
       | frame delimiter (SFD), and frame check sequence (FCS) are not |
       | included, and the Ethernet payload need not be 4-byte aligned)|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Frame Check Sequence:
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   New Frame Check Sequence (FCS) for Outer Ethernet Frame     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 3](#figure-3){.selfRef}: [Geneve Packet Format over
IPv6](#name-geneve-packet-format-over-ipv6){.selfRef}
:::
:::

::: {#sec-3.3}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [UDP Header](#name-udp-header){.section-name .selfRef} {#name-udp-header}

The use of an encapsulating UDP \[[RFC0768](#RFC0768){.xref}\] header
follows the connectionless semantics of Ethernet and IP in addition to
providing entropy to routers performing ECMP. Therefore, header fields
are interpreted as follows:[¶](#section-3.3-1){.pilcrow}

[]{.break}

Source Port:

:   A source port selected by the originating tunnel endpoint. This
    source port [SHOULD]{.bcp14} be the same for all packets belonging
    to a single encapsulated flow to prevent reordering due to the use
    of different paths. To encourage an even distribution of flows
    across multiple links, the source port [SHOULD]{.bcp14} be
    calculated using a hash of the encapsulated packet headers using,
    for example, a traditional 5-tuple. Since the port represents a flow
    identifier rather than a true UDP connection, the entire 16-bit
    range [MAY]{.bcp14} be used to maximize entropy. In addition to
    setting the source port, for IPv6, the flow label [MAY]{.bcp14} also
    be used for providing entropy. For an example of using the IPv6 flow
    label for tunnel use cases, see
    \[[RFC6438](#RFC6438){.xref}\].[¶](#section-3.3-2.2.1){.pilcrow}

    If Geneve traffic is shared with other UDP listeners on the same IP
    address, tunnel endpoints [SHOULD]{.bcp14} implement a mechanism to
    ensure ICMP return traffic arising from network errors is directed
    to the correct listener. The definition of such a mechanism is
    beyond the scope of this document.[¶](#section-3.3-2.2.2){.pilcrow}

:   

Dest Port:

:   IANA has assigned port 6081 as the fixed well-known destination port
    for Geneve. Although the well-known value should be used by default,
    it is [RECOMMENDED]{.bcp14} that implementations make this
    configurable. The chosen port is used for identification of Geneve
    packets and [MUST NOT]{.bcp14} be reversed for different ends of a
    connection as is done with TCP. It is the responsibility of the
    control plane to manage any reconfiguration of the assigned port and
    its interpretation by respective devices. The definition of the
    control plane is beyond the scope of this
    document.[¶](#section-3.3-2.4.1){.pilcrow}

:   

UDP Length:

:   The length of the UDP packet including the UDP
    header.[¶](#section-3.3-2.6.1){.pilcrow}

:   

UDP Checksum:

:   In order to protect the Geneve header, options, and payload from
    potential data corruption, the UDP checksum [SHOULD]{.bcp14} be
    generated as specified in \[[RFC0768](#RFC0768){.xref}\] and
    \[[RFC1122](#RFC1122){.xref}\] when Geneve is encapsulated in IPv4.
    To protect the IP header, Geneve header, options, and payload from
    potential data corruption, the UDP checksum [MUST]{.bcp14} be
    generated by default as specified in \[[RFC0768](#RFC0768){.xref}\]
    and \[[RFC8200](#RFC8200){.xref}\] when Geneve is encapsulated in
    IPv6, except under certain conditions, which are outlined in the
    next paragraph. Upon receiving such packets with a non-zero UDP
    checksum, the receiving tunnel endpoints [MUST]{.bcp14} validate the
    checksum. If the checksum is not correct, the packet [MUST]{.bcp14}
    be dropped; otherwise, the packet [MUST]{.bcp14} be accepted for
    decapsulation.[¶](#section-3.3-2.8.1){.pilcrow}

    Under certain conditions, the UDP checksum [MAY]{.bcp14} be set to
    zero on transmit for packets encapsulated in both IPv4 and IPv6
    \[[RFC8200](#RFC8200){.xref}\]. See [Section 4.3](#sec-4.3){.xref}
    for additional requirements that apply when using zero UDP checksum
    with IPv4 and IPv6. Disabling the use of UDP checksums is an
    operational consideration that should take into account the risks
    and effects of packet corruption.[¶](#section-3.3-2.8.2){.pilcrow}

:   
:::
:::

::: {#sec-3.4}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [Tunnel Header Fields](#name-tunnel-header-fields){.section-name .selfRef} {#name-tunnel-header-fields}

[]{.break}

Ver (2 bits):

:   The current version number is 0. Packets received by a tunnel
    endpoint with an unknown version [MUST]{.bcp14} be dropped. Transit
    devices interpreting Geneve packets with an unknown version number
    [MUST]{.bcp14} treat them as UDP packets with an unknown
    payload.[¶](#section-3.4-1.2.1){.pilcrow}

:   

Opt Len (6 bits):

:   The length of the option fields, expressed in 4-byte multiples, not
    including the 8-byte fixed tunnel header. This results in a minimum
    total Geneve header size of 8 bytes and a maximum of 260 bytes. The
    start of the payload headers can be found using this offset from the
    end of the base Geneve header.[¶](#section-3.4-1.4.1){.pilcrow}

    Transit devices [MUST]{.bcp14} maintain consistent forwarding
    behavior irrespective of the value of \'Opt Len\', including ECMP
    link selection.[¶](#section-3.4-1.4.2){.pilcrow}

:   

O (1 bit):

:   Control packet. This packet contains a control message. Control
    messages are sent between tunnel endpoints. Tunnel endpoints [MUST
    NOT]{.bcp14} forward the payload, and transit devices [MUST
    NOT]{.bcp14} attempt to interpret it. Since control messages are
    less frequent, it is [RECOMMENDED]{.bcp14} that tunnel endpoints
    direct these packets to a high-priority control queue (for example,
    to direct the packet to a general purpose CPU from a forwarding
    Application-Specific Integrated Circuit (ASIC) or to separate out
    control traffic on a NIC). Transit devices [MUST NOT]{.bcp14} alter
    forwarding behavior on the basis of this bit, such as ECMP link
    selection.[¶](#section-3.4-1.6.1){.pilcrow}

:   

C (1 bit):

:   Critical options present. One or more options has the critical bit
    set (see [Section 3.5](#sec-3.5){.xref}). If this bit is set, then
    tunnel endpoints [MUST]{.bcp14} parse the options list to interpret
    any critical options. On tunnel endpoints where option parsing is
    not supported, the packet [MUST]{.bcp14} be dropped on the basis of
    the \'C\' bit in the base header. If the bit is not set, tunnel
    endpoints [MAY]{.bcp14} strip all options using \'Opt Len\' and
    forward the decapsulated packet. Transit devices [MUST NOT]{.bcp14}
    drop packets on the basis of this
    bit.[¶](#section-3.4-1.8.1){.pilcrow}

:   

Rsvd. (6 bits):

:   Reserved field, which [MUST]{.bcp14} be zero on transmission and
    [MUST]{.bcp14} be ignored on
    receipt.[¶](#section-3.4-1.10.1){.pilcrow}

:   

Protocol Type (16 bits):

:   The type of protocol data unit appearing after the Geneve header.
    This follows the Ethertype \[[ETYPES](#ETYPES){.xref}\] convention,
    with Ethernet itself being represented by the value
    0x6558.[¶](#section-3.4-1.12.1){.pilcrow}

:   

Virtual Network Identifier (VNI) (24 bits):

:   An identifier for a unique element of a virtual network. In many
    situations, this may represent an L2 segment; however, the control
    plane defines the forwarding semantics of decapsulated packets. The
    VNI [MAY]{.bcp14} be used as part of ECMP forwarding decisions or
    [MAY]{.bcp14} be used as a mechanism to distinguish between
    overlapping address spaces contained in the encapsulated packet when
    load balancing across CPUs.[¶](#section-3.4-1.14.1){.pilcrow}

:   

Reserved (8 bits):

:   Reserved field, which [MUST]{.bcp14} be zero on transmission and
    ignored on receipt.[¶](#section-3.4-1.16.1){.pilcrow}

:   
:::
:::

::: {#sec-3.5}
::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [Tunnel Options](#name-tunnel-options){.section-name .selfRef} {#name-tunnel-options}

[]{#name-geneve-option}

::: {#geneve-options}
::: {#section-3.5-1.1 .artwork .art-text .alignLeft}
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |          Option Class         |      Type     |R|R|R| Length  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       ~                  Variable-Length Option Data                  ~
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 4](#figure-4){.selfRef}: [Geneve
Option](#name-geneve-option){.selfRef}
:::

The base Geneve header is followed by zero or more options in
Type-Length-Value format. Each option consists of a 4-byte option header
and a variable amount of option data interpreted according to the
type.[¶](#section-3.5-2){.pilcrow}

[]{.break}

Option Class (16 bits):

:   Namespace for the \'Type\' field. IANA has created a \"Geneve Option
    Class\" registry to allocate identifiers for organizations,
    technologies, and vendors that have an interest in creating types
    for options. Each organization may allocate types independently to
    allow experimentation and rapid innovation. It is expected that,
    over time, certain options will become well known, and a given
    implementation may use option types from a variety of sources. In
    addition, IANA has reserved specific ranges for allocation by IETF
    Review and for Experimental Use (see [Section
    7](#sec-7){.xref}).[¶](#section-3.5-3.2.1){.pilcrow}

:   

Type (8 bits):

:   Type indicating the format of the data contained in this option.
    Options are primarily designed to encourage future extensibility and
    innovation, and standardized forms of these options will be defined
    in separate documents.[¶](#section-3.5-3.4.1){.pilcrow}

    The high-order bit of the option type indicates that this is a
    critical option. If the receiving tunnel endpoint does not recognize
    the option and this bit is set, then the packet [MUST]{.bcp14} be
    dropped. If this bit is set in any option, then the \'C\' bit in the
    Geneve base header [MUST]{.bcp14} also be set. Transit devices [MUST
    NOT]{.bcp14} drop packets on the basis of this bit. The following
    figure shows the location of the \'C\' bit in the \'Type\'
    field:[¶](#section-3.5-3.4.2){.pilcrow}

:   

[]{#name-c-bit-in-the-type-field}

::: {#section-3.5-4.1 .artwork .art-text .alignLeft}
       0 1 2 3 4 5 6 7 8
       +-+-+-+-+-+-+-+-+
       |C|    Type     |
       +-+-+-+-+-+-+-+-+
:::

[Figure 5](#figure-5){.selfRef}: [\'C\' Bit in the \'Type\'
Field](#name-c-bit-in-the-type-field){.selfRef}

[]{.break}

:   The requirement to drop a packet with an unknown option with the
    \'C\' bit set applies to the entire tunnel endpoint system and not a
    particular component of the implementation. For example, in a system
    comprised of a forwarding ASIC and a general purpose CPU, this does
    not mean that the packet must be dropped in the ASIC. An
    implementation may send the packet to the CPU using a rate-limited
    control channel for slow-path exception
    handling.[¶](#section-3.5-5.2){.pilcrow}
:   

[]{.break}

R (3 bits):
:   Option control flags reserved for future use. These bits
    [MUST]{.bcp14} be zero on transmission and [MUST]{.bcp14} be ignored
    on receipt.[¶](#section-3.5-6.2){.pilcrow}
:   

Length (5 bits):

:   Length of the option, expressed in 4-byte multiples, excluding the
    option header. The total length of each option may be between 4 and
    128 bytes. A value of 0 in the \'Length\' field implies an option
    with only an option header and no option data. Packets in which the
    total length of all options is not equal to the \'Opt Len\' in the
    base header are invalid and [MUST]{.bcp14} be silently dropped if
    received by a tunnel endpoint that processes the
    options.[¶](#section-3.5-6.4.1){.pilcrow}

:   

Variable-Length Option Data:

:   Option data interpreted according to
    \'Type\'.[¶](#section-3.5-6.6.1){.pilcrow}

:   

::: {#sec-3.5.1}
::: {#section-3.5.1 .section}
#### [3.5.1.](#section-3.5.1){.section-number .selfRef} [Options Processing](#name-options-processing){.section-name .selfRef} {#name-options-processing}

Geneve options are intended to be originated and processed by tunnel
endpoints. However, options [MAY]{.bcp14} be interpreted by transit
devices along the tunnel path. Transit devices not interpreting Geneve
headers (which may or may not include options) [MUST]{.bcp14} handle
Geneve packets as any other UDP packet and maintain consistent
forwarding behavior.[¶](#section-3.5.1-1){.pilcrow}

In tunnel endpoints, the generation and interpretation of options is
determined by the control plane, which is beyond the scope of this
document. However, to ensure interoperability between heterogeneous
devices, some requirements are imposed on options and the devices that
process them:[¶](#section-3.5.1-2){.pilcrow}

-   [Receiving tunnel endpoints [MUST]{.bcp14} drop packets containing
    unknown options with the \'C\' bit set in the option type.
    Conversely, transit devices [MUST NOT]{.bcp14} drop packets as a
    result of encountering unknown options, including those with the
    \'C\' bit set.[¶](#section-3.5.1-3.1){.pilcrow}]{#section-3.5.1-3.1}
-   [The contents of the options and their ordering [MUST NOT]{.bcp14}
    be modified by transit
    devices.[¶](#section-3.5.1-3.2){.pilcrow}]{#section-3.5.1-3.2}
-   [If a tunnel endpoint receives a Geneve packet with an \'Opt Len\'
    (the total length of all options) that exceeds the
    options-processing capability of the tunnel endpoint, then the
    tunnel endpoint [MUST]{.bcp14} drop such packets. An implementation
    may raise an exception to the control plane in such an event. It is
    the responsibility of the control plane to ensure the communicating
    peer tunnel endpoints have the processing capability to handle the
    total length of options. The definition of the control plane is
    beyond the scope of this
    document.[¶](#section-3.5.1-3.3){.pilcrow}]{#section-3.5.1-3.3}

When designing a Geneve option, it is important to consider how the
option will evolve in the future. Once an option is defined, it is
reasonable to expect that implementations may come to depend on a
specific behavior. As a result, the scope of any future changes must be
carefully described upfront.[¶](#section-3.5.1-4){.pilcrow}

Architecturally, options are intended to be self descriptive and
independent. This enables parallelism in options processing and reduces
implementation complexity. However, the control plane may impose certain
ordering restrictions, as described in [Section
4.5.1](#sec-4.5.1){.xref}.[¶](#section-3.5.1-5){.pilcrow}

Unexpectedly significant interoperability issues may result from
changing the length of an option that was defined to be a certain size.
A particular option is specified to have either a fixed length, which is
constant, or a variable length, which may change over time or for
different use cases. This property is part of the definition of the
option and is conveyed by the \'Type\'. For fixed-length options, some
implementations may choose to ignore the \'Length\' field in the option
header and instead parse based on the well-known length associated with
the type. In this case, redefining the length will impact not only the
parsing of the option in question but also any options that follow.
Therefore, options that are defined to be a fixed length in size [MUST
NOT]{.bcp14} be redefined to a different length. Instead, a new \'Type\'
should be allocated. Actual definition of the option type is beyond the
scope of this document. The option type and its interpretation should be
defined by the entity that owns the option
class.[¶](#section-3.5.1-6){.pilcrow}

Options may be processed by NIC hardware utilizing offloads (e.g., LSO
and LRO) as described in [Section 4.6](#sec-4.6){.xref}. Careful
consideration should be given to how the offload capabilities outlined
in [Section 4.6](#sec-4.6){.xref} impact an option\'s
design.[¶](#section-3.5.1-7){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#sec-4}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Implementation and Deployment Considerations](#name-implementation-and-deployme){.section-name .selfRef} {#name-implementation-and-deployme}

::: {#sec-4.1}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Applicability Statement](#name-applicability-statement){.section-name .selfRef} {#name-applicability-statement}

Geneve is a UDP-based network virtualization overlay encapsulation
protocol designed to establish tunnels between NVEs over an existing IP
network. It is intended for use in public or private data center
environments, for deploying multi-tenant overlay networks over an
existing IP underlay network.[¶](#section-4.1-1){.pilcrow}

As a UDP-based protocol, Geneve adheres to the UDP usage guidelines as
specified in \[[RFC8085](#RFC8085){.xref}\]. The applicability of these
guidelines is dependent on the underlay IP network and the nature of the
Geneve payload protocol (for example, TCP/IP,
IP/Ethernet).[¶](#section-4.1-2){.pilcrow}

Geneve is intended to be deployed in a data center network environment
operated by a single operator or an adjacent set of cooperating network
operators that fits with the definition of controlled environments in
\[[RFC8085](#RFC8085){.xref}\]. A network in a controlled environment
can be managed to operate under certain conditions, whereas in the
general Internet, this cannot be done. Hence, requirements for a
tunneling protocol operating under a controlled environment can be less
restrictive than the requirements of the general
Internet.[¶](#section-4.1-3){.pilcrow}

For the purpose of this document, a traffic-managed controlled
environment (TMCE) is defined as an IP network that is traffic
engineered and/or otherwise managed (e.g., via use of traffic rate
limiters) to avoid congestion. The concept of a TMCE is outlined in
\[[RFC8086](#RFC8086){.xref}\]. Significant portions of the text in
[Section 4.1](#sec-4.1){.xref} through [Section 4.3](#sec-4.3){.xref}
are based on \[[RFC8086](#RFC8086){.xref}\] as applicable to
Geneve.[¶](#section-4.1-4){.pilcrow}

It is the responsibility of the operator to ensure that the
guidelines/requirements in this section are followed as applicable to
their Geneve deployment(s).[¶](#section-4.1-5){.pilcrow}
:::
:::

::: {#sec-4.2}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Congestion-Control Functionality](#name-congestion-control-function){.section-name .selfRef} {#name-congestion-control-function}

Geneve does not natively provide congestion-control functionality and
relies on the payload protocol traffic for congestion control. As such,
Geneve [MUST]{.bcp14} be used with congestion-controlled traffic or
within a TMCE to avoid congestion. An operator of a TMCE may avoid
congestion through careful provisioning of their networks, rate-limiting
user data traffic, and managing traffic engineering according to path
capacity.[¶](#section-4.2-1){.pilcrow}
:::
:::

::: {#sec-4.3}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [UDP Checksum](#name-udp-checksum){.section-name .selfRef} {#name-udp-checksum}

The outer UDP checksum [SHOULD]{.bcp14} be used with Geneve when
transported over IPv4; this is to provide integrity for the Geneve
headers, options, and payload in case of data corruption (for example,
to avoid misdelivery of the payload to different tenant systems). The
UDP checksum provides a statistical guarantee that a payload was not
corrupted in transit. These integrity checks are not strong from a
coding or cryptographic perspective and are not designed to detect
physical-layer errors or malicious modification of the datagram (see
[Section
3.4](https://www.rfc-editor.org/rfc/rfc8085#section-3.4){.relref} of
\[[RFC8085](#RFC8085){.xref}\]). In deployments where such a risk
exists, an operator [SHOULD]{.bcp14} use additional data integrity
mechanisms such as those offered by IPsec (see [Section
6.2](#sec-6.2){.xref}).[¶](#section-4.3-1){.pilcrow}

An operator [MAY]{.bcp14} choose to disable UDP checksums and use zero
UDP checksum if Geneve packet integrity is provided by other data
integrity mechanisms, such as IPsec or additional checksums, or if one
of the conditions (a, b, or c) in [Section 4.3.1](#sec-4.3.1){.xref} is
met.[¶](#section-4.3-2){.pilcrow}

By default, UDP checksums [MUST]{.bcp14} be used when Geneve is
transported over IPv6. A tunnel endpoint [MAY]{.bcp14} be configured for
use with zero UDP checksum if additional requirements in [Section
4.3.1](#sec-4.3.1){.xref} are met.[¶](#section-4.3-3){.pilcrow}

::: {#sec-4.3.1}
::: {#section-4.3.1 .section}
#### [4.3.1.](#section-4.3.1){.section-number .selfRef} [Zero UDP Checksum Handling with IPv6](#name-zero-udp-checksum-handling-){.section-name .selfRef} {#name-zero-udp-checksum-handling-}

When Geneve is used over IPv6, the UDP checksum is used to protect IPv6
headers, UDP headers, and Geneve headers, options, and payload from
potential data corruption. As such, by default, Geneve [MUST]{.bcp14}
use UDP checksums when transported over IPv6. An operator [MAY]{.bcp14}
choose to configure zero UDP checksum if operating in a TMCE as stated
in [Section 4.1](#sec-4.1){.xref} if one of the following conditions is
met.[¶](#section-4.3.1-1){.pilcrow}

a.  [It is known that packet corruption is exceptionally unlikely
    (perhaps based on knowledge of equipment types in their underlay
    network) and the operator is willing to risk undetected packet
    corruption.[¶](#section-4.3.1-2.1){.pilcrow}]{#section-4.3.1-2.1}
b.  [It is judged through observational measurements (perhaps through
    historic or current traffic flows that use non-zero checksum) that
    the level of packet corruption is tolerably low and is where the
    operator is willing to risk undetected
    corruption.[¶](#section-4.3.1-2.2){.pilcrow}]{#section-4.3.1-2.2}
c.  [The Geneve payload is carrying applications that are tolerant of
    misdelivered or corrupted packets (perhaps through higher-layer
    checksum validation and/or reliability through
    retransmission).[¶](#section-4.3.1-2.3){.pilcrow}]{#section-4.3.1-2.3}

In addition, Geneve tunnel implementations using zero UDP checksum
[MUST]{.bcp14} meet the following
requirements:[¶](#section-4.3.1-3){.pilcrow}

1.  [Use of UDP checksum over IPv6 [MUST]{.bcp14} be the default
    configuration for all Geneve
    tunnels.[¶](#section-4.3.1-4.1){.pilcrow}]{#section-4.3.1-4.1}

2.  [If Geneve is used with zero UDP checksum over IPv6, then such a
    tunnel endpoint implementation [MUST]{.bcp14} meet all the
    requirements specified in [Section
    4](https://www.rfc-editor.org/rfc/rfc6936#section-4){.relref} of
    \[[RFC6936](#RFC6936){.xref}\] and requirement 1 as specified in
    [Section
    5](https://www.rfc-editor.org/rfc/rfc6936#section-5){.relref} of
    \[[RFC6936](#RFC6936){.xref}\] since it is relevant to
    Geneve.[¶](#section-4.3.1-4.2){.pilcrow}]{#section-4.3.1-4.2}

3.  [The Geneve tunnel endpoint that decapsulates the tunnel
    [SHOULD]{.bcp14} check that the source and destination IPv6
    addresses are valid for the Geneve tunnel that is configured to
    receive zero UDP checksum and discard other packets for which such a
    check fails.[¶](#section-4.3.1-4.3){.pilcrow}]{#section-4.3.1-4.3}

4.  ::: {#section-4.3.1-4.4}
    The Geneve tunnel endpoint that encapsulates the tunnel
    [MAY]{.bcp14} use different IPv6 source addresses for each Geneve
    tunnel that uses zero UDP checksum mode in order to strengthen the
    decapsulator\'s check of the IPv6 source address (i.e., the same
    IPv6 source address is not to be used with more than one IPv6
    destination address, irrespective of whether that destination
    address is a unicast or multicast address). When this is not
    possible, it is [RECOMMENDED]{.bcp14} to use each source address for
    as few Geneve tunnels that use zero UDP checksum as is
    feasible.[¶](#section-4.3.1-4.4.1){.pilcrow}

    Note that for requirements 3 and 4, the receiving tunnel endpoint
    can apply these checks only if it has out-of-band knowledge that the
    encapsulating tunnel endpoint is applying the indicated behavior.
    One possibility to obtain this out-of-band knowledge is through
    signaling by the control plane. The definition of the control plane
    is beyond the scope of this
    document.[¶](#section-4.3.1-4.4.2){.pilcrow}
    :::

5.  [Measures [SHOULD]{.bcp14} be taken to prevent Geneve traffic over
    IPv6 with zero UDP checksum from escaping into the general Internet.
    Examples of such measures include employing packet filters at the
    gateways or edge of the Geneve network and/or keeping logical or
    physical separation of the Geneve network from networks carrying
    general Internet
    traffic.[¶](#section-4.3.1-4.5){.pilcrow}]{#section-4.3.1-4.5}

The above requirements do not change the requirements specified in
either \[[RFC8200](#RFC8200){.xref}\] or
\[[RFC6936](#RFC6936){.xref}\].[¶](#section-4.3.1-5){.pilcrow}

The use of the source IPv6 address in addition to the destination IPv6
address, plus the recommendation against reuse of source IPv6 addresses
among Geneve tunnels, collectively provide some mitigation for the
absence of UDP checksum coverage of the IPv6 header. A traffic-managed
controlled environment that satisfies at least one of the three
conditions listed at the beginning of this section provides additional
assurance.[¶](#section-4.3.1-6){.pilcrow}
:::
:::
:::
:::

::: {#sec-4.4}
::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [Encapsulation of Geneve in IP](#name-encapsulation-of-geneve-in-){.section-name .selfRef} {#name-encapsulation-of-geneve-in-}

As an IP-based tunneling protocol, Geneve shares many properties and
techniques with existing protocols. The application of some of these are
described in further detail, although, in general, most concepts
applicable to the IP layer or to IP tunnels generally also function in
the context of Geneve.[¶](#section-4.4-1){.pilcrow}

::: {#sec-4.4.1}
::: {#section-4.4.1 .section}
#### [4.4.1.](#section-4.4.1){.section-number .selfRef} [IP Fragmentation](#name-ip-fragmentation){.section-name .selfRef} {#name-ip-fragmentation}

It is [RECOMMENDED]{.bcp14} that Path MTU Discovery (see
\[[RFC1191](#RFC1191){.xref}\] and \[[RFC8201](#RFC8201){.xref}\]) be
used to prevent or minimize fragmentation. The use of Path MTU Discovery
on the transit network provides the encapsulating tunnel endpoint with
soft-state information about the link that it may use to prevent or
minimize fragmentation depending on its role in the virtualized network.
The NVE can maintain this state (the MTU size of the tunnel link(s)
associated with the tunnel endpoint), so if a tenant system sends large
packets that, when encapsulated, exceed the MTU size of the tunnel link,
the tunnel endpoint can discard such packets and send exception messages
to the tenant system(s). If the tunnel endpoint is associated with a
routing or forwarding function and/or has the capability to send ICMP
messages, the encapsulating tunnel endpoint [MAY]{.bcp14} send ICMP
fragmentation needed \[[RFC0792](#RFC0792){.xref}\] or Packet Too Big
\[[RFC4443](#RFC4443){.xref}\] messages to the tenant system(s). When
determining the MTU size of a tunnel link, the maximum length of options
[MUST]{.bcp14} be assumed as options may vary on a per-packet basis.
Recommendations and guidance for handling fragmentation in similar
overlay encapsulation services like Pseudowire Emulation Edge-to-Edge
(PWE3) are provided in [Section
5.3](https://www.rfc-editor.org/rfc/rfc3985#section-5.3){.relref} of
\[[RFC3985](#RFC3985){.xref}\].[¶](#section-4.4.1-1){.pilcrow}

Note that some implementations may not be capable of supporting
fragmentation or other less common features of the IP header, such as
options and extension headers. Some of the issues associated with MTU
size and fragmentation in IP tunneling and use of ICMP messages are
outlined in [Section
4.2](https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10#section-4.2){.relref}
of
\[[INTAREA-TUNNELS](#I-D.ietf-intarea-tunnels){.xref}\].[¶](#section-4.4.1-2){.pilcrow}
:::
:::

::: {#sec-4.4.2}
::: {#section-4.4.2 .section}
#### [4.4.2.](#section-4.4.2){.section-number .selfRef} [DSCP, ECN, and TTL](#name-dscp-ecn-and-ttl){.section-name .selfRef} {#name-dscp-ecn-and-ttl}

When encapsulating IP (including over Ethernet) packets in Geneve, there
are several considerations for propagating Differentiated Services Code
Point (DSCP) and Explicit Congestion Notification (ECN) bits from the
inner header to the tunnel on transmission and the reverse on
reception.[¶](#section-4.4.2-1){.pilcrow}

\[[RFC2983](#RFC2983){.xref}\] provides guidance for mapping DSCP
between inner and outer IP headers. Network virtualization is typically
more closely aligned with the Pipe model described, where the DSCP value
on the tunnel header is set based on a policy (which may be a fixed
value, one based on the inner traffic class or some other mechanism for
grouping traffic). Aspects of the Uniform model (which treats the inner
and outer DSCP values as a single field by copying on ingress and
egress) may also apply, such as the ability to re-mark the inner header
on tunnel egress based on transit marking. However, the Uniform model is
not conceptually consistent with network virtualization, which seeks to
provide strong isolation between encapsulated traffic and the physical
network.[¶](#section-4.4.2-2){.pilcrow}

\[[RFC6040](#RFC6040){.xref}\] describes the mechanism for exposing ECN
capabilities on IP tunnels and propagating congestion markers to the
inner packets. This behavior [MUST]{.bcp14} be followed for IP packets
encapsulated in Geneve.[¶](#section-4.4.2-3){.pilcrow}

Though either the Uniform or Pipe models could be used for handling TTL
(or Hop Limit in case of IPv6) when tunneling IP packets, the Pipe model
is more consistent with network virtualization.
\[[RFC2003](#RFC2003){.xref}\] provides guidance on handling TTL between
inner IP header and outer IP tunnels; this model is similar to the Pipe
model and is [RECOMMENDED]{.bcp14} for use with Geneve for network
virtualization applications.[¶](#section-4.4.2-4){.pilcrow}
:::
:::

::: {#sec-4.4.3}
::: {#section-4.4.3 .section}
#### [4.4.3.](#section-4.4.3){.section-number .selfRef} [Broadcast and Multicast](#name-broadcast-and-multicast){.section-name .selfRef} {#name-broadcast-and-multicast}

Geneve tunnels may either be point-to-point unicast between two tunnel
endpoints or utilize broadcast or multicast addressing. It is not
required that inner and outer addressing match in this respect. For
example, in physical networks that do not support multicast,
encapsulated multicast traffic may be replicated into multiple unicast
tunnels or forwarded by policy to a unicast location (possibly to be
replicated there).[¶](#section-4.4.3-1){.pilcrow}

With physical networks that do support multicast, it may be desirable to
use this capability to take advantage of hardware replication for
encapsulated packets. In this case, multicast addresses may be allocated
in the physical network corresponding to tenants, encapsulated multicast
groups, or some other factor. The allocation of these groups is a
component of the control plane and, therefore, is beyond the scope of
this document.[¶](#section-4.4.3-2){.pilcrow}

When physical multicast is in use, devices with heterogeneous
capabilities may be present in the same group. Some options may only be
interpretable by a subset of the devices in the group. Other devices can
safely ignore such options unless the \'C\' bit is set to mark the
unknown option as critical. The requirements outlined in [Section
3.4](#sec-3.4){.xref} apply for critical
options.[¶](#section-4.4.3-3){.pilcrow}

In addition, \[[RFC8293](#RFC8293){.xref}\] provides examples of various
mechanisms that can be used for multicast handling in network
virtualization overlay networks.[¶](#section-4.4.3-4){.pilcrow}
:::
:::

::: {#sec-4.4.4}
::: {#section-4.4.4 .section}
#### [4.4.4.](#section-4.4.4){.section-number .selfRef} [Unidirectional Tunnels](#name-unidirectional-tunnels){.section-name .selfRef} {#name-unidirectional-tunnels}

Generally speaking, a Geneve tunnel is a unidirectional concept. IP is
not a connection-oriented protocol, and it is possible for two tunnel
endpoints to communicate with each other using different paths or to
have one side not transmit anything at all. As Geneve is an IP-based
protocol, the tunnel layer inherits these same
characteristics.[¶](#section-4.4.4-1){.pilcrow}

It is possible for a tunnel to encapsulate a protocol, such as TCP, that
is connection oriented and maintains session state at that layer. In
addition, implementations [MAY]{.bcp14} model Geneve tunnels as
connected, bidirectional links, for example, to provide the abstraction
of a virtual port. In both of these cases, bidirectionality of the
tunnel is handled at a higher layer and does not affect the operation of
Geneve itself.[¶](#section-4.4.4-2){.pilcrow}
:::
:::
:::
:::

::: {#sec-4.5}
::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [Constraints on Protocol Features](#name-constraints-on-protocol-fea){.section-name .selfRef} {#name-constraints-on-protocol-fea}

Geneve is intended to be flexible for use with a wide range of current
and future applications. As a result, certain constraints may be placed
on the use of metadata or other aspects of the protocol in order to
optimize for a particular use case. For example, some applications may
limit the types of options that are supported or enforce a maximum
number or length of options. Other applications may only handle certain
encapsulated payload types, such as Ethernet or IP. These optimizations
can be implemented either globally (throughout the system) or locally
(for example, restricted to certain classes of devices or network
paths).[¶](#section-4.5-1){.pilcrow}

These constraints may be communicated to tunnel endpoints either
explicitly through a control plane or implicitly by the nature of the
application. As Geneve is defined as a data plane protocol that is
control plane agnostic, definition of such mechanisms is beyond the
scope of this document.[¶](#section-4.5-2){.pilcrow}

::: {#sec-4.5.1}
::: {#section-4.5.1 .section}
#### [4.5.1.](#section-4.5.1){.section-number .selfRef} [Constraints on Options](#name-constraints-on-options){.section-name .selfRef} {#name-constraints-on-options}

While Geneve options are flexible, a control plane may restrict the
number of option TLVs as well as the order and size of the TLVs between
tunnel endpoints to make it simpler for a data plane implementation in
software or hardware to handle (see
\[[NVO3-ENCAP](#I-D.ietf-nvo3-encap){.xref}\]). For example, there may
be some critical information, such as a secure hash, that must be
processed in a certain order to provide the lowest latency, or there may
be other scenarios where the options must be processed in a given order
due to protocol semantics.[¶](#section-4.5.1-1){.pilcrow}

A control plane may negotiate a subset of option TLVs and certain TLV
ordering; it may also limit the total number of option TLVs present in
the packet, for example, to accommodate hardware capable of processing
fewer options. Hence, a control plane needs to have the ability to
describe the supported TLV subset and its ordering to the tunnel
endpoints. In the absence of a control plane, alternative configuration
mechanisms may be used for this purpose. Such mechanisms are beyond the
scope of this document.[¶](#section-4.5.1-2){.pilcrow}
:::
:::
:::
:::

::: {#sec-4.6}
::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [NIC Offloads](#name-nic-offloads){.section-name .selfRef} {#name-nic-offloads}

Modern NICs currently provide a variety of offloads to enable the
efficient processing of packets. The implementation of many of these
offloads requires only that the encapsulated packet be easily parsed
(for example, checksum offload). However, optimizations such as LSO and
LRO involve some processing of the options themselves since they must be
replicated/merged across multiple packets. In these situations, it is
desirable not to require changes to the offload logic to handle the
introduction of new options. To enable this, some constraints are placed
on the definitions of options to allow for simple processing
rules:[¶](#section-4.6-1){.pilcrow}

-   [When performing LSO, a NIC [MUST]{.bcp14} replicate the entire
    Geneve header and all options, including those unknown to the
    device, onto each resulting segment unless an option allows an
    exception. Conversely, when performing LRO, a NIC may assume that a
    binary comparison of the options (including unknown options) is
    sufficient to ensure equality and [MAY]{.bcp14} merge packets with
    equal Geneve
    headers.[¶](#section-4.6-2.1){.pilcrow}]{#section-4.6-2.1}
-   [Options [MUST NOT]{.bcp14} be reordered during the course of
    offload processing, including when merging packets for the purpose
    of LRO.[¶](#section-4.6-2.2){.pilcrow}]{#section-4.6-2.2}
-   [NICs performing offloads [MUST NOT]{.bcp14} drop packets with
    unknown options, including those marked as critical, unless
    explicitly configured to do
    so.[¶](#section-4.6-2.3){.pilcrow}]{#section-4.6-2.3}

There is no requirement that a given implementation of Geneve employ the
offloads listed as examples above. However, as these offloads are
currently widely deployed in commercially available NICs, the rules
described here are intended to enable efficient handling of current and
future options across a variety of devices.[¶](#section-4.6-3){.pilcrow}
:::
:::

::: {#sec-4.7}
::: {#section-4.7 .section}
### [4.7.](#section-4.7){.section-number .selfRef} [Inner VLAN Handling](#name-inner-vlan-handling){.section-name .selfRef} {#name-inner-vlan-handling}

Geneve is capable of encapsulating a wide range of protocols; therefore,
a given implementation is likely to support only a small subset of the
possibilities. However, as Ethernet is expected to be widely deployed,
it is useful to describe the behavior of VLANs inside encapsulated
Ethernet frames.[¶](#section-4.7-1){.pilcrow}

As with any protocol, support for inner VLAN headers is
[OPTIONAL]{.bcp14}. In many cases, the use of encapsulated VLANs may be
disallowed due to security or implementation considerations. However, in
other cases, the trunking of VLAN frames across a Geneve tunnel can
prove useful. As a result, the processing of inner VLAN tags upon
ingress or egress from a tunnel endpoint is based upon the configuration
of the tunnel endpoint and/or control plane and is not explicitly
defined as part of the data format.[¶](#section-4.7-2){.pilcrow}
:::
:::
:::
:::

::: {#sec-5}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Transition Considerations](#name-transition-considerations){.section-name .selfRef} {#name-transition-considerations}

Viewed exclusively from the data plane, Geneve is compatible with
existing IP networks as it appears to most devices as UDP packets.
However, as there are already a number of tunneling protocols deployed
in network virtualization environments, there is a practical question of
transition and coexistence.[¶](#section-5-1){.pilcrow}

Since Geneve builds on the base data plane functionality provided by the
most common protocols used for network virtualization (VXLAN and NVGRE),
it should be straightforward to port an existing control plane to run on
top of it with minimal effort. With both the old and new packet formats
supporting the same set of capabilities, there is no need for a hard
transition; tunnel endpoints directly communicating with each other can
use any common protocol, which may be different even within a single
overall system. As transit devices are primarily forwarding packets on
the basis of the IP header, all protocols appear to be similar, and
these devices do not introduce additional interoperability
concerns.[¶](#section-5-2){.pilcrow}

To assist with this transition, it is strongly suggested that
implementations support simultaneous operation of both Geneve and
existing tunneling protocols, as it is expected to be common for a
single node to communicate with a mixture of other nodes. Eventually,
older protocols may be phased out as they are no longer in
use.[¶](#section-5-3){.pilcrow}
:::
:::

::: {#sec-6}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

As it is encapsulated within a UDP/IP packet, Geneve does not have any
inherent security mechanisms. As a result, an attacker with access to
the underlay network transporting the IP packets has the ability to
snoop on, alter, or inject packets. Compromised tunnel endpoints or
transit devices may also spoof identifiers in the tunnel header to gain
access to networks owned by other tenants.[¶](#section-6-1){.pilcrow}

Within a particular security domain, such as a data center operated by a
single service provider, the most common and highest-performing security
mechanism is isolation of trusted components. Tunnel traffic can be
carried over a separate VLAN and filtered at any untrusted
boundaries.[¶](#section-6-2){.pilcrow}

When crossing an untrusted link, such as the general Internet, VPN
technologies such as IPsec \[[RFC4301](#RFC4301){.xref}\] should be used
to provide authentication and/or encryption of the IP packets formed as
part of Geneve encapsulation (see [Section
6.1.1](#sec-6.1.1){.xref}).[¶](#section-6-3){.pilcrow}

Geneve does not otherwise affect the security of the encapsulated
packets. As per the guidelines of BCP 72 \[[RFC3552](#RFC3552){.xref}\],
the following sections describe potential security risks that may be
applicable to Geneve deployments and approaches to mitigate such risks.
It is also noted that not all such risks are applicable to all Geneve
deployment scenarios, i.e., only a subset may be applicable to certain
deployments. An operator has to make an assessment based on their
network environment, determine the risks that are applicable to their
specific environment, and use appropriate mitigation approaches as
applicable.[¶](#section-6-4){.pilcrow}

::: {#sec-6.1}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Data Confidentiality](#name-data-confidentiality){.section-name .selfRef} {#name-data-confidentiality}

Geneve is a network virtualization overlay encapsulation protocol
designed to establish tunnels between NVEs over an existing IP network.
It can be used to deploy multi-tenant overlay networks over an existing
IP underlay network in a public or private data center. The overlay
service is typically provided by a service provider, such as a cloud
service provider or a private data center operator. This may or not may
be the same provider as an underlay service provider. Due to the nature
of multi-tenancy in such environments, a tenant system may expect data
confidentiality to ensure its packet data is not tampered with (i.e.,
active attack) in transit or is a target of unauthorized monitoring
(i.e., passive attack), for example, by other tenant systems or underlay
service provider. A compromised network node or a transit device within
a data center may passively monitor Geneve packet data between NVEs or
route traffic for further inspection. A tenant may expect the overlay
service provider to provide data confidentiality as part of the service,
or a tenant may bring its own data confidentiality mechanisms like IPsec
or TLS to protect the data end to end between its tenant systems. The
overlay provider is expected to provide cryptographic protection in
cases where the underlay provider is not the same as the overlay
provider to ensure the payload is not exposed to the
underlay.[¶](#section-6.1-1){.pilcrow}

If an operator determines data confidentiality is necessary in their
environment based on their risk analysis \-- for example, in
multi-tenant environments \-- then an encryption mechanism
[SHOULD]{.bcp14} be used to encrypt the tenant data end to end between
the NVEs. The NVEs may use existing well-established encryption
mechanisms, such as IPsec, DTLS, etc.[¶](#section-6.1-2){.pilcrow}

::: {#sec-6.1.1}
::: {#section-6.1.1 .section}
#### [6.1.1.](#section-6.1.1){.section-number .selfRef} [Inter-Data Center Traffic](#name-inter-data-center-traffic){.section-name .selfRef} {#name-inter-data-center-traffic}

A tenant system in a customer premises (private data center) may want to
connect to tenant systems on their tenant overlay network in a public
cloud data center, or a tenant may want to have its tenant systems
located in multiple geographically separated data centers for high
availability. Geneve data traffic between tenant systems across such
separated networks should be protected from threats when traversing
public networks. Any Geneve overlay data leaving the data center network
beyond the operator\'s security domain [SHOULD]{.bcp14} be secured by
encryption mechanisms, such as IPsec or other VPN technologies, to
protect the communications between the NVEs when they are geographically
separated over untrusted network links. Specification of data protection
mechanisms employed between data centers is beyond the scope of this
document.[¶](#section-6.1.1-1){.pilcrow}

The principles described in [Section 4](#sec-4){.xref} regarding
controlled environments still apply to the geographically separated data
center usage outlined in this section.[¶](#section-6.1.1-2){.pilcrow}
:::
:::
:::
:::

::: {#sec-6.2}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Data Integrity](#name-data-integrity){.section-name .selfRef} {#name-data-integrity}

Geneve encapsulation is used between NVEs to establish overlay tunnels
over an existing IP underlay network. In a multi-tenant data center, a
rogue or compromised tenant system may try to launch a passive attack,
such as monitoring the traffic of other tenants, or an active attack,
such as trying to inject unauthorized Geneve encapsulated traffic such
as spoofing, replay, etc., into the network. To prevent such attacks, an
NVE [MUST NOT]{.bcp14} propagate Geneve packets beyond the NVE to tenant
systems and [SHOULD]{.bcp14} employ packet-filtering mechanisms so as
not to forward unauthorized traffic between tenant systems in different
tenant networks. An NVE [MUST NOT]{.bcp14} interpret Geneve packets from
tenant systems other than as frames to be
encapsulated.[¶](#section-6.2-1){.pilcrow}

A compromised network node or a transit device within a data center may
launch an active attack trying to tamper with the Geneve packet data
between NVEs. Malicious tampering of Geneve header fields may cause the
packet from one tenant to be forwarded to a different tenant network. If
an operator determines there is a possibility of such a threat in their
environment, the operator may choose to employ data integrity mechanisms
between NVEs. In order to prevent such risks, a data integrity mechanism
[SHOULD]{.bcp14} be used in such environments to protect the integrity
of Geneve packets, including packet headers, options, and payload on
communications between NVE pairs. A cryptographic data protection
mechanism, such as IPsec, may be used to provide data integrity
protection. A data center operator may choose to deploy any other data
integrity mechanisms as applicable and supported in their underlay
networks, although non-cryptographic mechanisms may not protect the
Geneve portion of the packet from
tampering.[¶](#section-6.2-2){.pilcrow}
:::
:::

::: {#sec-6.3}
::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [Authentication of NVE Peers](#name-authentication-of-nve-peers){.section-name .selfRef} {#name-authentication-of-nve-peers}

A rogue network device or a compromised NVE in a data center environment
might be able to spoof Geneve packets as if it came from a legitimate
NVE. In order to mitigate such a risk, an operator [SHOULD]{.bcp14} use
an authentication mechanism, such as IPsec, to ensure that the Geneve
packet originated from the intended NVE peer in environments where the
operator determines spoofing or rogue devices are potential threats.
Other simpler source checks, such as ingress filtering for VLAN/MAC/IP
addresses, reverse path forwarding checks, etc., may be used in certain
trusted environments to ensure Geneve packets originated from the
intended NVE peer.[¶](#section-6.3-1){.pilcrow}
:::
:::

::: {#sec-6.4}
::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Options Interpretation by Transit Devices](#name-options-interpretation-by-t){.section-name .selfRef} {#name-options-interpretation-by-t}

Options, if present in the packet, are generated and terminated by
tunnel endpoints. As indicated in [Section 2.2.1](#sec-2.2.1){.xref},
transit devices may interpret the options. However, if the packet is
protected by encryption from tunnel endpoint to tunnel endpoint (for
example, through IPsec), transit devices will not have visibility into
the Geneve header or options in the packet. In such cases, transit
devices [MUST]{.bcp14} handle Geneve packets as any other IP packet and
maintain consistent forwarding behavior. In cases where options are
interpreted by transit devices, the operator [MUST]{.bcp14} ensure that
transit devices are trusted and not compromised. The definition of a
mechanism to ensure this trust is beyond the scope of this
document.[¶](#section-6.4-1){.pilcrow}
:::
:::

::: {#sec-6.5}
::: {#section-6.5 .section}
### [6.5.](#section-6.5){.section-number .selfRef} [Multicast/Broadcast](#name-multicast-broadcast){.section-name .selfRef} {#name-multicast-broadcast}

In typical data center networks where IP multicasting is not supported
in the underlay network, multicasting may be supported using multiple
unicast tunnels. The same security requirements as described in the
above sections can be used to protect Geneve communications between NVE
peers. If IP multicasting is supported in the underlay network and the
operator chooses to use it for multicast traffic among tunnel endpoints,
then the operator in such environments may use data protection
mechanisms, such as IPsec with multicast extensions
\[[RFC5374](#RFC5374){.xref}\], to protect multicast traffic among
Geneve NVE groups.[¶](#section-6.5-1){.pilcrow}
:::
:::

::: {#sec-6.6}
::: {#section-6.6 .section}
### [6.6.](#section-6.6){.section-number .selfRef} [Control Plane Communications](#name-control-plane-communication){.section-name .selfRef} {#name-control-plane-communication}

A Network Virtualization Authority (NVA) as outlined in
\[[RFC8014](#RFC8014){.xref}\] may be used as a control plane for
configuring and managing the Geneve NVEs. The data center operator is
expected to use security mechanisms to protect the communications
between the NVA and NVEs and to use authentication mechanisms to detect
any rogue or compromised NVEs within their administrative domain. Data
protection mechanisms for control plane communication or authentication
mechanisms between the NVA and NVEs are beyond the scope of this
document.[¶](#section-6.6-1){.pilcrow}
:::
:::
:::
:::

::: {#sec-7}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA has allocated UDP port 6081 in the \"Service Name and Transport
Protocol Port Number Registry\" \[[IANA-SN](#IANA-SN){.xref}\] as the
well-known destination port for Geneve:[¶](#section-7-1){.pilcrow}

[]{.break}

Service Name:
:   geneve[¶](#section-7-2.2){.pilcrow}
:   

Transport Protocol(s):
:   UDP[¶](#section-7-2.4){.pilcrow}
:   

Assignee:
:   IESG \<iesg\@ietf.org>[¶](#section-7-2.6){.pilcrow}
:   

Contact:
:   IETF Chair \<chair\@ietf.org>[¶](#section-7-2.8){.pilcrow}
:   

Description:
:   Generic Network Virtualization Encapsulation
    (Geneve)[¶](#section-7-2.10){.pilcrow}
:   

Reference:
:   \[RFC8926\][¶](#section-7-2.12){.pilcrow}
:   

Port Number:
:   6081[¶](#section-7-2.14){.pilcrow}
:   

In addition, IANA has created a new subregistry titled \"Geneve Option
Class\" for option classes. This registry has been placed under a new
\"Network Virtualization Overlay (NVO3)\" heading in the IANA protocol
registries \[[IANA-PR](#IANA-PR){.xref}\]. The \"Geneve Option Class\"
registry consists of 16-bit hexadecimal values along with descriptive
strings, assignee/contact information, and references. The registration
rules for the new registry are (as defined by
\[[RFC8126](#RFC8126){.xref}\]):[¶](#section-7-3){.pilcrow}

[]{#name-geneve-option-class-registr}

  Range           Registration Procedures
  --------------- -------------------------
  0x0000-0x00FF   IETF Review
  0x0100-0xFEFF   First Come First Served
  0xFF00-0xFFFF   Experimental Use

  : [Table 1](#table-1){.selfRef}: [Geneve Option Class Registry
  Ranges](#name-geneve-option-class-registr){.selfRef}
:::
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC0768\]
:   [Postel, J.]{.refAuthor}, [\"User Datagram Protocol\"]{.refTitle},
    [STD 6]{.seriesInfo}, [RFC 768]{.seriesInfo}, [DOI
    10.17487/RFC0768]{.seriesInfo}, August 1980,
    \<<https://www.rfc-editor.org/info/rfc768>\>.
:   

\[RFC0792\]
:   [Postel, J.]{.refAuthor}, [\"Internet Control Message
    Protocol\"]{.refTitle}, [STD 5]{.seriesInfo}, [RFC
    792]{.seriesInfo}, [DOI 10.17487/RFC0792]{.seriesInfo}, September
    1981, \<<https://www.rfc-editor.org/info/rfc792>\>.
:   

\[RFC1122\]
:   [Braden, R., Ed.]{.refAuthor}, [\"Requirements for Internet Hosts -
    Communication Layers\"]{.refTitle}, [STD 3]{.seriesInfo}, [RFC
    1122]{.seriesInfo}, [DOI 10.17487/RFC1122]{.seriesInfo}, October
    1989, \<<https://www.rfc-editor.org/info/rfc1122>\>.
:   

\[RFC1191\]
:   [Mogul, J.]{.refAuthor}[ and S. Deering]{.refAuthor}, [\"Path MTU
    discovery\"]{.refTitle}, [RFC 1191]{.seriesInfo}, [DOI
    10.17487/RFC1191]{.seriesInfo}, November 1990,
    \<<https://www.rfc-editor.org/info/rfc1191>\>.
:   

\[RFC2003\]
:   [Perkins, C.]{.refAuthor}, [\"IP Encapsulation within
    IP\"]{.refTitle}, [RFC 2003]{.seriesInfo}, [DOI
    10.17487/RFC2003]{.seriesInfo}, October 1996,
    \<<https://www.rfc-editor.org/info/rfc2003>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4443\]
:   [Conta, A.]{.refAuthor}[, Deering, S.]{.refAuthor}[, and M. Gupta,
    Ed.]{.refAuthor}, [\"Internet Control Message Protocol (ICMPv6) for
    the Internet Protocol Version 6 (IPv6) Specification\"]{.refTitle},
    [STD 89]{.seriesInfo}, [RFC 4443]{.seriesInfo}, [DOI
    10.17487/RFC4443]{.seriesInfo}, March 2006,
    \<<https://www.rfc-editor.org/info/rfc4443>\>.
:   

\[RFC6040\]
:   [Briscoe, B.]{.refAuthor}, [\"Tunnelling of Explicit Congestion
    Notification\"]{.refTitle}, [RFC 6040]{.seriesInfo}, [DOI
    10.17487/RFC6040]{.seriesInfo}, November 2010,
    \<<https://www.rfc-editor.org/info/rfc6040>\>.
:   

\[RFC6936\]
:   [Fairhurst, G.]{.refAuthor}[ and M. Westerlund]{.refAuthor},
    [\"Applicability Statement for the Use of IPv6 UDP Datagrams with
    Zero Checksums\"]{.refTitle}, [RFC 6936]{.seriesInfo}, [DOI
    10.17487/RFC6936]{.seriesInfo}, April 2013,
    \<<https://www.rfc-editor.org/info/rfc6936>\>.
:   

\[RFC7365\]
:   [Lasserre, M.]{.refAuthor}[, Balus, F.]{.refAuthor}[,
    Morin, T.]{.refAuthor}[, Bitar, N.]{.refAuthor}[, and Y.
    Rekhter]{.refAuthor}, [\"Framework for Data Center (DC) Network
    Virtualization\"]{.refTitle}, [RFC 7365]{.seriesInfo}, [DOI
    10.17487/RFC7365]{.seriesInfo}, October 2014,
    \<<https://www.rfc-editor.org/info/rfc7365>\>.
:   

\[RFC8085\]
:   [Eggert, L.]{.refAuthor}[, Fairhurst, G.]{.refAuthor}[, and G.
    Shepherd]{.refAuthor}, [\"UDP Usage Guidelines\"]{.refTitle}, [BCP
    145]{.seriesInfo}, [RFC 8085]{.seriesInfo}, [DOI
    10.17487/RFC8085]{.seriesInfo}, March 2017,
    \<<https://www.rfc-editor.org/info/rfc8085>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}[, Leiba, B.]{.refAuthor}[, and T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8200\]
:   [Deering, S.]{.refAuthor}[ and R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.
:   

\[RFC8201\]
:   [McCann, J.]{.refAuthor}[, Deering, S.]{.refAuthor}[,
    Mogul, J.]{.refAuthor}[, and R. Hinden, Ed.]{.refAuthor}, [\"Path
    MTU Discovery for IP version 6\"]{.refTitle}, [STD 87]{.seriesInfo},
    [RFC 8201]{.seriesInfo}, [DOI 10.17487/RFC8201]{.seriesInfo}, July
    2017, \<<https://www.rfc-editor.org/info/rfc8201>\>.
:   
:::

::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[ETYPES\]
:   [IANA]{.refAuthor}, [\"IEEE 802 Numbers\"]{.refTitle},
    \<<https://www.iana.org/assignments/ieee-802-numbers>\>.
:   

\[IANA-PR\]
:   [IANA]{.refAuthor}, [\"Protocol Registries\"]{.refTitle},
    \<<https://www.iana.org/protocols>\>.
:   

\[IANA-SN\]
:   [IANA]{.refAuthor}, [\"Service Name and Transport Protocol Port
    Number Registry\"]{.refTitle},
    \<<https://www.iana.org/assignments/service-names-port-numbers>\>.
:   

\[IEEE.802.1Q_2018\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Local and Metropolitan Area
    Networks\--Bridges and Bridged Networks\"]{.refTitle}, [DOI
    10.1109/IEEESTD.2018.8403927]{.seriesInfo}, [IEEE
    802.1Q-2018]{.seriesInfo}, July 2018,
    \<<http://ieeexplore.ieee.org/servlet/opac?punumber=8403925>\>.
:   

\[INTAREA-TUNNELS\]
:   [Touch, J.]{.refAuthor}[ and M. Townsley]{.refAuthor}, [\"IP Tunnels
    in the Internet Architecture\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-intarea-tunnels-10]{.seriesInfo}, 12 September 2019,
    \<<https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10>\>.
:   

\[NVO3-DATAPLANE\]
:   [Bitar, N.]{.refAuthor}[, Lasserre, M.]{.refAuthor}[,
    Balus, F.]{.refAuthor}[, Morin, T.]{.refAuthor}[,
    Jin, L.]{.refAuthor}[, and B. Khasnabish]{.refAuthor}, [\"NVO3 Data
    Plane Requirements\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-ietf-nvo3-dataplane-requirements-03]{.seriesInfo}, 15 April
    2014,
    \<<https://tools.ietf.org/html/draft-ietf-nvo3-dataplane-requirements-03>\>.
:   

\[NVO3-ENCAP\]
:   [Boutros, S.]{.refAuthor}, [\"NVO3 Encapsulation
    Considerations\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-ietf-nvo3-encap-05]{.seriesInfo}, 17 February
    2020, \<<https://tools.ietf.org/html/draft-ietf-nvo3-encap-05>\>.
:   

\[RFC2983\]
:   [Black, D.]{.refAuthor}, [\"Differentiated Services and
    Tunnels\"]{.refTitle}, [RFC 2983]{.seriesInfo}, [DOI
    10.17487/RFC2983]{.seriesInfo}, October 2000,
    \<<https://www.rfc-editor.org/info/rfc2983>\>.
:   

\[RFC3031\]
:   [Rosen, E.]{.refAuthor}[, Viswanathan, A.]{.refAuthor}[, and R.
    Callon]{.refAuthor}, [\"Multiprotocol Label Switching
    Architecture\"]{.refTitle}, [RFC 3031]{.seriesInfo}, [DOI
    10.17487/RFC3031]{.seriesInfo}, January 2001,
    \<<https://www.rfc-editor.org/info/rfc3031>\>.
:   

\[RFC3552\]
:   [Rescorla, E.]{.refAuthor}[ and B. Korver]{.refAuthor},
    [\"Guidelines for Writing RFC Text on Security
    Considerations\"]{.refTitle}, [BCP 72]{.seriesInfo}, [RFC
    3552]{.seriesInfo}, [DOI 10.17487/RFC3552]{.seriesInfo}, July 2003,
    \<<https://www.rfc-editor.org/info/rfc3552>\>.
:   

\[RFC3985\]
:   [Bryant, S., Ed.]{.refAuthor}[ and P. Pate, Ed.]{.refAuthor},
    [\"Pseudo Wire Emulation Edge-to-Edge (PWE3)
    Architecture\"]{.refTitle}, [RFC 3985]{.seriesInfo}, [DOI
    10.17487/RFC3985]{.seriesInfo}, March 2005,
    \<<https://www.rfc-editor.org/info/rfc3985>\>.
:   

\[RFC4301\]
:   [Kent, S.]{.refAuthor}[ and K. Seo]{.refAuthor}, [\"Security
    Architecture for the Internet Protocol\"]{.refTitle}, [RFC
    4301]{.seriesInfo}, [DOI 10.17487/RFC4301]{.seriesInfo}, December
    2005, \<<https://www.rfc-editor.org/info/rfc4301>\>.
:   

\[RFC5374\]
:   [Weis, B.]{.refAuthor}[, Gross, G.]{.refAuthor}[, and D.
    Ignjatic]{.refAuthor}, [\"Multicast Extensions to the Security
    Architecture for the Internet Protocol\"]{.refTitle}, [RFC
    5374]{.seriesInfo}, [DOI 10.17487/RFC5374]{.seriesInfo}, November
    2008, \<<https://www.rfc-editor.org/info/rfc5374>\>.
:   

\[RFC6438\]
:   [Carpenter, B.]{.refAuthor}[ and S. Amante]{.refAuthor}, [\"Using
    the IPv6 Flow Label for Equal Cost Multipath Routing and Link
    Aggregation in Tunnels\"]{.refTitle}, [RFC 6438]{.seriesInfo}, [DOI
    10.17487/RFC6438]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6438>\>.
:   

\[RFC7348\]
:   [Mahalingam, M.]{.refAuthor}[, Dutt, D.]{.refAuthor}[,
    Duda, K.]{.refAuthor}[, Agarwal, P.]{.refAuthor}[,
    Kreeger, L.]{.refAuthor}[, Sridhar, T.]{.refAuthor}[,
    Bursell, M.]{.refAuthor}[, and C. Wright]{.refAuthor}, [\"Virtual
    eXtensible Local Area Network (VXLAN): A Framework for Overlaying
    Virtualized Layer 2 Networks over Layer 3 Networks\"]{.refTitle},
    [RFC 7348]{.seriesInfo}, [DOI 10.17487/RFC7348]{.seriesInfo}, August
    2014, \<<https://www.rfc-editor.org/info/rfc7348>\>.
:   

\[RFC7637\]
:   [Garg, P., Ed.]{.refAuthor}[ and Y. Wang, Ed.]{.refAuthor},
    [\"NVGRE: Network Virtualization Using Generic Routing
    Encapsulation\"]{.refTitle}, [RFC 7637]{.seriesInfo}, [DOI
    10.17487/RFC7637]{.seriesInfo}, September 2015,
    \<<https://www.rfc-editor.org/info/rfc7637>\>.
:   

\[RFC8014\]
:   [Black, D.]{.refAuthor}[, Hudson, J.]{.refAuthor}[,
    Kreeger, L.]{.refAuthor}[, Lasserre, M.]{.refAuthor}[, and T.
    Narten]{.refAuthor}, [\"An Architecture for Data-Center Network
    Virtualization over Layer 3 (NVO3)\"]{.refTitle}, [RFC
    8014]{.seriesInfo}, [DOI 10.17487/RFC8014]{.seriesInfo}, December
    2016, \<<https://www.rfc-editor.org/info/rfc8014>\>.
:   

\[RFC8086\]
:   [Yong, L., Ed.]{.refAuthor}[, Crabbe, E.]{.refAuthor}[,
    Xu, X.]{.refAuthor}[, and T. Herbert]{.refAuthor}, [\"GRE-in-UDP
    Encapsulation\"]{.refTitle}, [RFC 8086]{.seriesInfo}, [DOI
    10.17487/RFC8086]{.seriesInfo}, March 2017,
    \<<https://www.rfc-editor.org/info/rfc8086>\>.
:   

\[RFC8293\]
:   [Ghanwani, A.]{.refAuthor}[, Dunbar, L.]{.refAuthor}[,
    McBride, M.]{.refAuthor}[, Bannai, V.]{.refAuthor}[, and R.
    Krishnan]{.refAuthor}, [\"A Framework for Multicast in Network
    Virtualization over Layer 3\"]{.refTitle}, [RFC 8293]{.seriesInfo},
    [DOI 10.17487/RFC8293]{.seriesInfo}, January 2018,
    \<<https://www.rfc-editor.org/info/rfc8293>\>.
:   

\[VL2\]
:   [\"VL2: A Scalable and Flexible Data Center Network\"]{.refTitle},
    [ACM SIGCOMM Computer Communication Review]{.refContent}, [DOI
    10.1145/1594977.1592576]{.seriesInfo}, August 2009,
    \<<https://dl.acm.org/doi/10.1145/1594977.1592576>\>.
:   
:::
:::

::: {#sec-9}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors wish to acknowledge [Puneet Agarwal]{.contact-name}, [David
Black]{.contact-name}, [Sami Boutros]{.contact-name}, [Scott
Bradner]{.contact-name}, [Martín Casado]{.contact-name}, [Alissa
Cooper]{.contact-name}, [Roman Danyliw]{.contact-name}, [Bruce
Davie]{.contact-name}, [Anoop Ghanwani]{.contact-name}, [Benjamin
Kaduk]{.contact-name}, [Suresh Krishnan]{.contact-name}, [Mirja
Kühlewind]{.contact-name}, [Barry Leiba]{.contact-name}, [Daniel
Migault]{.contact-name}, [Greg Mirksy]{.contact-name}, [Tal
Mizrahi]{.contact-name}, [Kathleen Moriarty]{.contact-name}, [Magnus
Nyström]{.contact-name}, [Adam Roach]{.contact-name}, [Sabrina
Tanamal]{.contact-name}, [Dave Thaler]{.contact-name}, [Éric
Vyncke]{.contact-name}, [Magnus Westerlund]{.contact-name}, and many
other members of the NVO3 Working Group for their reviews, comments, and
suggestions.[¶](#section-appendix.a-1){.pilcrow}

The authors would like to thank [Sam Aldrin]{.contact-name}, [Alia
Atlas]{.contact-name}, [Matthew Bocci]{.contact-name}, [Benson
Schliesser]{.contact-name}, and [Martin Vigoureux]{.contact-name} for
their guidance throughout the
process.[¶](#section-appendix.a-2){.pilcrow}
:::
:::

::: {#sec-8}
::: {#section-appendix.b .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

The following individuals were authors of an earlier version of this
document and made significant
contributions:[¶](#section-appendix.b-1){.pilcrow}

::: {.left dir="auto"}
[Pankaj Garg]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Microsoft Corporation]{.org}
:::

::: {.left dir="auto"}
[1 Microsoft Way]{.street-address}
:::

::: {.left dir="auto"}
[Redmond]{.locality}, [WA]{.region} [98052]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <pankajg@microsoft.com>
:::

::: {.left dir="auto"}
[Chris Wright]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Red Hat Inc.]{.org}
:::

::: {.left dir="auto"}
[1801 Varsity Drive]{.street-address}
:::

::: {.left dir="auto"}
[Raleigh]{.locality}, [NC]{.region} [27606]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <chrisw@redhat.com>
:::

::: {.left dir="auto"}
[Kenneth Duda]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Arista Networks]{.org}
:::

::: {.left dir="auto"}
[5453 Great America Parkway]{.street-address}
:::

::: {.left dir="auto"}
[Santa Clara]{.locality}, [CA]{.region} [95054]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <kduda@arista.com>
:::

::: {.left dir="auto"}
[Dinesh G. Dutt]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Independent]{.org}
:::

::: email
Email: <didutt@gmail.com>
:::

::: {.left dir="auto"}
[Jon Hudson]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Independent]{.org}
:::

::: email
Email: <jon.hudson@gmail.com>
:::

::: {.left dir="auto"}
[Ariel Hendel]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Facebook, Inc.]{.org}
:::

::: {.left dir="auto"}
[1 Hacker Way]{.street-address}
:::

::: {.left dir="auto"}
[Menlo Park]{.locality}, [CA]{.region} [94025]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <ahendel@fb.com>
:::
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Jesse Gross ([editor]{.role})]{.fn .nameRole}
:::

::: email
Email: <jesse@kernel.org>
:::

::: {.left dir="auto"}
[Ilango Ganga ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Intel Corporation]{.org}
:::

::: {.left dir="auto"}
[2200 Mission College Blvd.]{.street-address}
:::

::: {.left dir="auto"}
[Santa Clara]{.locality}, [CA]{.region} [95054]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <ilango.s.ganga@intel.com>
:::

::: {.left dir="auto"}
[T. Sridhar ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[VMware, Inc.]{.org}
:::

::: {.left dir="auto"}
[3401 Hillview Ave.]{.street-address}
:::

::: {.left dir="auto"}
[Palo Alto]{.locality}, [CA]{.region} [94304]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <tsridhar@utexas.edu>
:::
:::
:::
