  RFC 8754           IPv6 Segment Routing Header (SRH)   March 2020
  ------------------ ----------------------------------- ------------
  Filsfils, et al.   Standards Track                     \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8754](https://www.rfc-editor.org/rfc/rfc8754){.eref}

Category:
:   Standards Track

Published:
:   March 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    C. Filsfils, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    D. Dukes, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    S. Previdi
    :::

    ::: org
    Huawei
    :::
    :::

    ::: author
    ::: author-name
    J. Leddy
    :::

    ::: org
    Individual
    :::
    :::

    ::: author
    ::: author-name
    S. Matsushima
    :::

    ::: org
    SoftBank
    :::
    :::

    ::: author
    ::: author-name
    D. Voyer
    :::

    ::: org
    Bell Canada
    :::
    :::
:::

# RFC 8754 {#rfcnum}

# IPv6 Segment Routing Header (SRH) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Segment Routing can be applied to the IPv6 data plane using a new type
of Routing Extension Header called the Segment Routing Header (SRH).
This document describes the SRH and how it is used by nodes that are
Segment Routing (SR) capable.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8754>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.1.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.1.2.2}
        [1.2](#section-1.2){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.1.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Segment Routing
    Header](#name-segment-routing-header){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [SRH
        TLVs](#name-srh-tlvs){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.2.2.1.2.1}
            [2.1.1](#section-2.1.1){.xref}.  [Padding
            TLVs](#name-padding-tlvs){.xref}[¶](#section-toc.1-1.2.2.1.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.2.2.1.2.2}
            [2.1.2](#section-2.1.2){.xref}.  [HMAC
            TLV](#name-hmac-tlv){.xref}[¶](#section-toc.1-1.2.2.1.2.2.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [SR
    Nodes](#name-sr-nodes){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [SR Source
        Node](#name-sr-source-node){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Transit
        Node](#name-transit-node){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [SR Segment Endpoint
        Node](#name-sr-segment-endpoint-node){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Packet
    Processing](#name-packet-processing){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [SR Source
        Node](#name-sr-source-node-2){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [Reduced
            SRH](#name-reduced-srh){.xref}[¶](#section-toc.1-1.4.2.1.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Transit
        Node](#name-transit-node-2){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [SR Segment Endpoint
        Node](#name-sr-segment-endpoint-node-2){.xref}[¶](#section-toc.1-1.4.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.3.2.1}
            [4.3.1](#section-4.3.1){.xref}.  [FIB Entry Is a Locally
            Instantiated SRv6
            SID](#name-fib-entry-is-a-locally-inst){.xref}[¶](#section-toc.1-1.4.2.3.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.3.2.2}
            [4.3.2](#section-4.3.2){.xref}.  [FIB Entry Is a Local
            Interface](#name-fib-entry-is-a-local-interf){.xref}[¶](#section-toc.1-1.4.2.3.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.3.2.3}
            [4.3.3](#section-4.3.3){.xref}.  [FIB Entry Is a Nonlocal
            Route](#name-fib-entry-is-a-nonlocal-rou){.xref}[¶](#section-toc.1-1.4.2.3.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.3.2.4}
            [4.3.4](#section-4.3.4){.xref}.  [FIB Entry Is a No
            Match](#name-fib-entry-is-a-no-match){.xref}[¶](#section-toc.1-1.4.2.3.2.4.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Intra-SR-Domain Deployment
    Model](#name-intra-sr-domain-deployment-){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Securing the SR
        Domain](#name-securing-the-sr-domain){.xref}[¶](#section-toc.1-1.5.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [SR Domain as a Single System with
        Delegation among
        Components](#name-sr-domain-as-a-single-syste){.xref}[¶](#section-toc.1-1.5.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [MTU
        Considerations](#name-mtu-considerations){.xref}[¶](#section-toc.1-1.5.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [ICMP Error
        Processing](#name-icmp-error-processing){.xref}[¶](#section-toc.1-1.5.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.5}
        [5.5](#section-5.5){.xref}.  [Load Balancing and
        ECMP](#name-load-balancing-and-ecmp){.xref}[¶](#section-toc.1-1.5.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.6}
        [5.6](#section-5.6){.xref}.  [Other
        Deployments](#name-other-deployments){.xref}[¶](#section-toc.1-1.5.2.6.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Illustrations](#name-illustrations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Abstract Representation of an
        SRH](#name-abstract-representation-of-){.xref}[¶](#section-toc.1-1.6.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Example
        Topology](#name-example-topology){.xref}[¶](#section-toc.1-1.6.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [SR Source
        Node](#name-sr-source-node-3){.xref}[¶](#section-toc.1-1.6.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.6.2.3.2.1}
            [6.3.1](#section-6.3.1){.xref}.  [Intra-SR-Domain
            Packet](#name-intra-sr-domain-packet){.xref}[¶](#section-toc.1-1.6.2.3.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.2}
            [6.3.2](#section-6.3.2){.xref}.  [Inter-SR-Domain Packet \--
            Transit](#name-inter-sr-domain-packet-tran){.xref}[¶](#section-toc.1-1.6.2.3.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.3}
            [6.3.3](#section-6.3.3){.xref}.  [Inter-SR-Domain Packet \--
            Internal to
            External](#name-inter-sr-domain-packet-inte){.xref}[¶](#section-toc.1-1.6.2.3.2.3.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Transit
        Node](#name-transit-node-3){.xref}[¶](#section-toc.1-1.6.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.5}
        [6.5](#section-6.5){.xref}.  [SR Segment Endpoint
        Node](#name-sr-segment-endpoint-node-3){.xref}[¶](#section-toc.1-1.6.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.6}
        [6.6](#section-6.6){.xref}.  [Delegation of Function with HMAC
        Verification](#name-delegation-of-function-with){.xref}[¶](#section-toc.1-1.6.2.6.1){.pilcrow}

        -   ::: {#section-toc.1-1.6.2.6.2.1}
            [6.6.1](#section-6.6.1){.xref}.  [SID List
            Verification](#name-sid-list-verification){.xref}[¶](#section-toc.1-1.6.2.6.2.1.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [SR
        Attacks](#name-sr-attacks){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Service
        Theft](#name-service-theft){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.3}
        [7.3](#section-7.3){.xref}.  [Topology
        Disclosure](#name-topology-disclosure){.xref}[¶](#section-toc.1-1.7.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.4}
        [7.4](#section-7.4){.xref}.  [ICMP
        Generation](#name-icmp-generation){.xref}[¶](#section-toc.1-1.7.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.5}
        [7.5](#section-7.5){.xref}.  [Applicability of
        AH](#name-applicability-of-ah){.xref}[¶](#section-toc.1-1.7.2.5.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [Segment Routing Header Flags
        Registry](#name-segment-routing-header-flag){.xref}[¶](#section-toc.1-1.8.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [Segment Routing Header TLVs
        Registry](#name-segment-routing-header-tlvs){.xref}[¶](#section-toc.1-1.8.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.9.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.9.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.11}
    [](#section-appendix.b){.xref}[Contributors](#name-contributors){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.12}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::
:::
:::

::: {#INTRO}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Segment Routing (SR) can be applied to the IPv6 data plane using a new
type of routing header called the Segment Routing Header (SRH). This
document describes the SRH and how it is used by nodes that are SR
capable.[¶](#section-1-1){.pilcrow}

\"Segment Routing Architecture\" \[[RFC8402](#RFC8402){.xref}\]
describes Segment Routing and its instantiation in two data planes: MPLS
and IPv6.[¶](#section-1-2){.pilcrow}

The encoding of IPv6 segments in the SRH is defined in this
document.[¶](#section-1-3){.pilcrow}

::: {#TERMS}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

This document uses the terms Segment Routing (SR), SR domain, SR over
IPv6 (SRv6), Segment Identifier (SID), SRv6 SID, Active Segment, and SR
Policy as defined in
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-1.1-1){.pilcrow}
:::
:::

::: {#section-1.2 .section}
### [1.2.](#section-1.2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.2-1){.pilcrow}
:::
:::
:::

::: {#SRH}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Segment Routing Header](#name-segment-routing-header){.section-name .selfRef} {#name-segment-routing-header}

Routing headers are defined in \[[RFC8200](#RFC8200){.xref}\]. The
Segment Routing Header (SRH) has a new Routing Type
(4).[¶](#section-2-1){.pilcrow}

The SRH is defined as follows:[¶](#section-2-2){.pilcrow}

::: {#section-2-3 .artwork .art-text .alignLeft}
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | Next Header   |  Hdr Ext Len  | Routing Type  | Segments Left |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Last Entry   |     Flags     |              Tag              |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     |            Segment List[0] (128-bit IPv6 address)             |
     |                                                               |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     |                                                               |
                                   ...
     |                                                               |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     |            Segment List[n] (128-bit IPv6 address)             |
     |                                                               |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     //                                                             //
     //         Optional Type Length Value objects (variable)       //
     //                                                             //
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-2-3){.pilcrow}
:::

where:[¶](#section-2-4){.pilcrow}

Next Header:
:   Defined in \[[RFC8200](#RFC8200){.xref}\], [Section
    4.4](https://www.rfc-editor.org/rfc/rfc8200#section-4.4){.relref}.[¶](#section-2-5.2){.pilcrow}

Hdr Ext Len:
:   Defined in \[[RFC8200](#RFC8200){.xref}\], [Section
    4.4](https://www.rfc-editor.org/rfc/rfc8200#section-4.4){.relref}.[¶](#section-2-5.4){.pilcrow}

Routing Type:
:   4.[¶](#section-2-5.6){.pilcrow}

Segments Left:
:   Defined in \[[RFC8200](#RFC8200){.xref}\], [Section
    4.4](https://www.rfc-editor.org/rfc/rfc8200#section-4.4){.relref}.[¶](#section-2-5.8){.pilcrow}

Last Entry:
:   contains the index (zero based), in the Segment List, of the last
    element of the Segment List.[¶](#section-2-5.10){.pilcrow}

Flags:
:   8 bits of flags. [Section 8.1](#SRHFLAGSREG){.xref} creates an IANA
    registry for new flags to be defined. The following flags are
    defined:[¶](#section-2-5.12){.pilcrow}

::: {#section-2-6 .artwork .art-text .alignLeft}
           0 1 2 3 4 5 6 7
          +-+-+-+-+-+-+-+-+
          |U U U U U U U U|
          +-+-+-+-+-+-+-+-+

[¶](#section-2-6){.pilcrow}
:::

:   U: Unused and for future use. [MUST]{.bcp14} be 0 on transmission
    and ignored on receipt.[¶](#section-2-7.2){.pilcrow}

```{=html}
<!-- -->
```

Tag:
:   Tag a packet as part of a class or group of packets \-- e.g.,
    packets sharing the same set of properties. When Tag is not used at
    the source, it [MUST]{.bcp14} be set to zero on transmission. When
    Tag is not used during SRH processing, it [SHOULD]{.bcp14} be
    ignored. Tag is not used when processing the SID defined in [Section
    4.3.1](#pktENDSID){.xref}. It may be used when processing other SIDs
    that are not defined in this document. The allocation and use of tag
    is outside the scope of this document.[¶](#section-2-8.2){.pilcrow}

Segment List\[0..n\]:
:   128-bit IPv6 addresses representing the nth segment in the Segment
    List. The Segment List is encoded starting from the last segment of
    the SR Policy. That is, the first element of the Segment List
    (Segment List\[0\]) contains the last segment of the SR Policy, the
    second element contains the penultimate segment of the SR Policy,
    and so on.[¶](#section-2-8.4){.pilcrow}

TLV:
:   Type Length Value (TLV) is described in [Section
    2.1](#TLVS){.xref}.[¶](#section-2-8.6){.pilcrow}

In the SRH, the Next Header, Hdr Ext Len, Routing Type, and Segments
Left fields are defined in [Section
4.4](https://www.rfc-editor.org/rfc/rfc8200#section-4.4){.relref} of
\[[RFC8200](#RFC8200){.xref}\]. Based on the constraints in that
section, Next Header, Header Ext Len, and Routing Type are not mutable
while Segments Left is mutable.[¶](#section-2-9){.pilcrow}

The mutability of the TLV value is defined by the most significant bit
in the type, as specified in [Section
2.1](#TLVS){.xref}.[¶](#section-2-10){.pilcrow}

[Section 4.3](#ENDSID){.xref} defines the mutability of the remaining
fields in the SRH (Flags, Tag, Segment List) in the context of the SID
defined in this document.[¶](#section-2-11){.pilcrow}

New SIDs defined in the future [MUST]{.bcp14} specify the mutability
properties of the Flags, Tag, and Segment List and indicate how the
Hashed Message Authentication Code (HMAC) TLV ([Section
2.1.2](#HMACTLV){.xref}) verification works. Note that, in effect, these
fields are mutable.[¶](#section-2-12){.pilcrow}

Consistent with the SR model, the source of the SRH always knows how to
set the Segment List, Flags, Tag, and TLVs of the SRH for use within the
SR domain. How it achieves this is outside the scope of this document
but may be based on topology, available SIDs and their mutability
properties, the SRH mutability requirements of the destination, or any
other information.[¶](#section-2-13){.pilcrow}

::: {#TLVS}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [SRH TLVs](#name-srh-tlvs){.section-name .selfRef} {#name-srh-tlvs}

This section defines TLVs of the Segment Routing
Header.[¶](#section-2.1-1){.pilcrow}

A TLV provides metadata for segment processing. The only TLVs defined in
this document are the HMAC ([Section 2.1.2](#HMACTLV){.xref}) and
padding TLVs ([Section 2.1.1](#PADDINGTLV){.xref}). While processing the
SID defined in [Section 4.3.1](#pktENDSID){.xref}, all TLVs are ignored
unless local configuration indicates otherwise ([Section
4.3.1.1.1](#TLVPROCESS){.xref}). Thus, TLV and HMAC support is optional
for any implementation; however, an implementation adding or parsing
TLVs [MUST]{.bcp14} support PAD TLVs. Other documents may define
additional TLVs and processing rules for
them.[¶](#section-2.1-2){.pilcrow}

TLVs are present when the Hdr Ext Len is greater than (Last
Entry+1)\*2.[¶](#section-2.1-3){.pilcrow}

While processing TLVs at a segment endpoint, TLVs [MUST]{.bcp14} be
fully contained within the SRH as determined by the Hdr Ext Len. 
Detection of TLVs exceeding the boundary of the SRH Hdr Ext Len results
in an ICMP Parameter Problem, Code 0, message to the Source Address,
pointing to the Hdr Ext Len field of the SRH, and the packet being
discarded.[¶](#section-2.1-4){.pilcrow}

An implementation [MAY]{.bcp14} limit the number and/or length of TLVs
it processes based on local configuration. It [MAY]{.bcp14}
limit:[¶](#section-2.1-5){.pilcrow}

-   [the number of consecutive Pad1 ([Section 2.1.1.1](#PAD1){.xref})
    options to 1. If padding of more than one byte is required, then
    PadN ([Section 2.1.1.2](#PADN){.xref}) should be
    used.[¶](#section-2.1-6.1){.pilcrow}]{#section-2.1-6.1}
-   [The length in PadN to
    5.[¶](#section-2.1-6.2){.pilcrow}]{#section-2.1-6.2}
-   [The maximum number of non-Pad TLVs to be
    processed.[¶](#section-2.1-6.3){.pilcrow}]{#section-2.1-6.3}
-   [The maximum length of all TLVs to be
    processed.[¶](#section-2.1-6.4){.pilcrow}]{#section-2.1-6.4}

The implementation [MAY]{.bcp14} stop processing additional TLVs in the
SRH when these configured limits are
exceeded.[¶](#section-2.1-7){.pilcrow}

::: {#section-2.1-8 .artwork .art-text .alignLeft}
     0                   1
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-----------------------
    |     Type      |    Length     | Variable-length data
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-----------------------

[¶](#section-2.1-8){.pilcrow}
:::

Type:
:   An 8-bit codepoint from the \"Segment Routing Header TLVs\"
    \[[IANA-SRHTLV](#IANA-SRHTLV){.xref}\]. Unrecognized Types
    [MUST]{.bcp14} be ignored on receipt.[¶](#section-2.1-9.2){.pilcrow}

Length:
:   The length of the variable-length data field in
    bytes.[¶](#section-2.1-9.4){.pilcrow}

Variable-length data:
:   data that is specific to the Type.[¶](#section-2.1-9.6){.pilcrow}

Type Length Value (TLV) entries contain [OPTIONAL]{.bcp14} information
that may be used by the node identified in the Destination Address (DA)
of the packet.[¶](#section-2.1-10){.pilcrow}

Each TLV has its own length, format, and semantic. The codepoint
allocated (by IANA) to each TLV Type defines both the format and the
semantic of the information carried in the TLV. Multiple TLVs may be
encoded in the same SRH.[¶](#section-2.1-11){.pilcrow}

The highest-order bit of the TLV type (bit 0) specifies whether or not
the TLV data of that type can change en route to the packet\'s final
destination:[¶](#section-2.1-12){.pilcrow}

-   [0: TLV data does not change en
    route[¶](#section-2.1-13.1){.pilcrow}]{#section-2.1-13.1}
-   [1: TLV data does change en
    route[¶](#section-2.1-13.2){.pilcrow}]{#section-2.1-13.2}

All TLVs specify their alignment requirements using an xn+y format. The
xn+y format is defined as per \[[RFC8200](#RFC8200){.xref}\]. The SR
source nodes use the xn+y alignment requirements of TLVs and Padding
TLVs when constructing an SRH.[¶](#section-2.1-14){.pilcrow}

The Length field of the TLV is used to skip the TLV while inspecting the
SRH in case the node doesn\'t support or recognize the Type. The Length
defines the TLV length in octets, not including the Type and Length
fields.[¶](#section-2.1-15){.pilcrow}

The following TLVs are defined in this
document:[¶](#section-2.1-16){.pilcrow}

-   [Padding TLVs[¶](#section-2.1-17.1){.pilcrow}]{#section-2.1-17.1}
-   [HMAC TLV[¶](#section-2.1-17.2){.pilcrow}]{#section-2.1-17.2}

Additional TLVs may be defined in the
future.[¶](#section-2.1-18){.pilcrow}

::: {#PADDINGTLV}
::: {#section-2.1.1 .section}
#### [2.1.1.](#section-2.1.1){.section-number .selfRef} [Padding TLVs](#name-padding-tlvs){.section-name .selfRef} {#name-padding-tlvs}

There are two types of Padding TLVs, Pad1 and PadN, and the following
applies to both:[¶](#section-2.1.1-1){.pilcrow}

-   [Padding TLVs are used for meeting the alignment requirement of the
    subsequent
    TLVs.[¶](#section-2.1.1-2.1){.pilcrow}]{#section-2.1.1-2.1}
-   [Padding TLVs are used to pad the SRH to a multiple of 8
    octets.[¶](#section-2.1.1-2.2){.pilcrow}]{#section-2.1.1-2.2}
-   [Padding TLVs are ignored by a node processing the SRH
    TLV.[¶](#section-2.1.1-2.3){.pilcrow}]{#section-2.1.1-2.3}
-   [Multiple Padding TLVs [MAY]{.bcp14} be used in one
    SRH.[¶](#section-2.1.1-2.4){.pilcrow}]{#section-2.1.1-2.4}

::: {#PAD1}
::: {#section-2.1.1.1 .section}
##### [2.1.1.1.](#section-2.1.1.1){.section-number .selfRef} [Pad1](#name-pad1){.section-name .selfRef} {#name-pad1}

Alignment requirement: none[¶](#section-2.1.1.1-1){.pilcrow}

::: {#section-2.1.1.1-2 .artwork .art-text .alignLeft}
       0 1 2 3 4 5 6 7
      +-+-+-+-+-+-+-+-+
      |     Type      |
      +-+-+-+-+-+-+-+-+

[¶](#section-2.1.1.1-2){.pilcrow}
:::

Type:
:   0[¶](#section-2.1.1.1-3.2){.pilcrow}

A single Pad1 TLV [MUST]{.bcp14} be used when a single byte of padding
is required. A Pad1 TLV [MUST NOT]{.bcp14} be used if more than one
consecutive byte of padding is
required.[¶](#section-2.1.1.1-4){.pilcrow}
:::
:::

::: {#PADN}
::: {#section-2.1.1.2 .section}
##### [2.1.1.2.](#section-2.1.1.2){.section-number .selfRef} [PadN](#name-padn){.section-name .selfRef} {#name-padn}

Alignment requirement: none[¶](#section-2.1.1.2-1){.pilcrow}

::: {#section-2.1.1.2-2 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     Type      |    Length     |      Padding (variable)       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    //                    Padding (variable)                       //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-2.1.1.2-2){.pilcrow}
:::

Type:
:   4[¶](#section-2.1.1.2-3.2){.pilcrow}

Length:
:   0 to 5. The length of the Padding field in
    bytes.[¶](#section-2.1.1.2-3.4){.pilcrow}

Padding:
:   Padding bits have no semantic. They [MUST]{.bcp14} be set to 0 on
    transmission and ignored on
    receipt.[¶](#section-2.1.1.2-3.6){.pilcrow}

The PadN TLV [MUST]{.bcp14} be used when more than one byte of padding
is required.[¶](#section-2.1.1.2-4){.pilcrow}
:::
:::
:::
:::

::: {#HMACTLV}
::: {#section-2.1.2 .section}
#### [2.1.2.](#section-2.1.2){.section-number .selfRef} [HMAC TLV](#name-hmac-tlv){.section-name .selfRef} {#name-hmac-tlv}

Alignment requirement: 8n[¶](#section-2.1.2-1){.pilcrow}

The keyed Hashed Message Authentication Code (HMAC) TLV is
[OPTIONAL]{.bcp14} and has the following
format:[¶](#section-2.1.2-2){.pilcrow}

::: {#section-2.1.2-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Type     |     Length    |D|        RESERVED             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                      HMAC Key ID (4 octets)                   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                              //
    |                      HMAC (variable)                         //
    |                                                              //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    where:

[¶](#section-2.1.2-3){.pilcrow}
:::

Type:
:   5.[¶](#section-2.1.2-4.2){.pilcrow}

Length:
:   The length of the variable-length data in
    bytes.[¶](#section-2.1.2-4.4){.pilcrow}

D:
:   1 bit. 1 indicates that the Destination Address verification is
    disabled due to use of a reduced Segment List (see [Section
    4.1.1](#REDUCED){.xref}).[¶](#section-2.1.2-4.6){.pilcrow}

RESERVED:
:   15 bits. [MUST]{.bcp14} be 0 on
    transmission.[¶](#section-2.1.2-4.8){.pilcrow}

HMAC Key ID:
:   A 4-octet opaque number that uniquely identifies the pre-shared key
    and algorithm used to generate the
    HMAC.[¶](#section-2.1.2-4.10){.pilcrow}

HMAC:
:   Keyed HMAC, in multiples of 8 octets, at most 32
    octets.[¶](#section-2.1.2-4.12){.pilcrow}

The HMAC TLV is used to verify that the SRH applied to a packet was
selected by an authorized party and to ensure that the segment list is
not modified after generation. This also allows for verification that
the current segment (by virtue of being in the authorized Segment List)
is authorized for use. The SR domain ensures that the source node is
permitted to use the source address in the packet via ingress filtering
mechanisms as defined in BCP 84 \[[RFC3704](#RFC3704){.xref}\] or other
strategies as appropriate.[¶](#section-2.1.2-5){.pilcrow}

::: {#section-2.1.2.1 .section}
##### [2.1.2.1.](#section-2.1.2.1){.section-number .selfRef} [HMAC Generation and Verification](#name-hmac-generation-and-verific){.section-name .selfRef} {#name-hmac-generation-and-verific}

Local configuration determines when to check for an HMAC. This local
configuration is outside the scope of this document. It may be based on
the active segment at an SR Segment endpoint node, the result of an
Access Control List (ACL) that considers incoming interface, HMAC Key
ID, or other packet fields.[¶](#section-2.1.2.1-1){.pilcrow}

An implementation that supports the generation and verification of the
HMAC supports the following default behavior, as defined in the
remainder of this section.[¶](#section-2.1.2.1-2){.pilcrow}

The HMAC verification begins by checking that the current segment is
equal to the destination address of the IPv6 header. The check is
successful when either:[¶](#section-2.1.2.1-3){.pilcrow}

-   [HMAC D bit is 1 and Segments Left is greater than Last Entry,
    or[¶](#section-2.1.2.1-4.1){.pilcrow}]{#section-2.1.2.1-4.1}
-   [HMAC Segments Left is less than or equal to Last Entry, and the
    destination address is equal to Segment List\[Segments
    Left\].[¶](#section-2.1.2.1-4.2){.pilcrow}]{#section-2.1.2.1-4.2}

The HMAC field is the output of the HMAC computation as defined in
\[[RFC2104](#RFC2104){.xref}\], using:[¶](#section-2.1.2.1-5){.pilcrow}

-   [key: The pre-shared key identified by HMAC Key
    ID[¶](#section-2.1.2.1-6.1){.pilcrow}]{#section-2.1.2.1-6.1}

-   [HMAC algorithm: Identified by the HMAC Key
    ID[¶](#section-2.1.2.1-6.2){.pilcrow}]{#section-2.1.2.1-6.2}

-   ::: {#section-2.1.2.1-6.3}
    Text: A concatenation of the following fields from the IPv6 header
    and the SRH, as it would be received at the node verifying the
    HMAC:[¶](#section-2.1.2.1-6.3.1){.pilcrow}

    -   [IPv6 header: Source address (16
        octets)[¶](#section-2.1.2.1-6.3.2.1){.pilcrow}]{#section-2.1.2.1-6.3.2.1}
    -   [SRH: Last Entry (1
        octet)[¶](#section-2.1.2.1-6.3.2.2){.pilcrow}]{#section-2.1.2.1-6.3.2.2}
    -   [SRH: Flags (1
        octet)[¶](#section-2.1.2.1-6.3.2.3){.pilcrow}]{#section-2.1.2.1-6.3.2.3}
    -   [SRH: HMAC 16 bits following
        Length[¶](#section-2.1.2.1-6.3.2.4){.pilcrow}]{#section-2.1.2.1-6.3.2.4}
    -   [SRH: HMAC Key ID (4
        octets)[¶](#section-2.1.2.1-6.3.2.5){.pilcrow}]{#section-2.1.2.1-6.3.2.5}
    -   [SRH: All addresses in the Segment List (variable
        octets)[¶](#section-2.1.2.1-6.3.2.6){.pilcrow}]{#section-2.1.2.1-6.3.2.6}
    :::

The HMAC digest is truncated to 32 octets and placed in the HMAC field
of the HMAC TLV.[¶](#section-2.1.2.1-7){.pilcrow}

For HMAC algorithms producing digests less than 32 octets long, the
digest is placed in the lowest-order octets of the HMAC field.
Subsequent octets [MUST]{.bcp14} be set to zero such that the HMAC
length is a multiple of 8 octets.[¶](#section-2.1.2.1-8){.pilcrow}

If HMAC verification is successful, processing proceeds as
normal.[¶](#section-2.1.2.1-9){.pilcrow}

If HMAC verification fails, an ICMP error message (parameter problem,
error code 0, pointing to the HMAC TLV) [SHOULD]{.bcp14} be generated
(but rate limited) and logged, and the packet [SHOULD]{.bcp14} be
discarded.[¶](#section-2.1.2.1-10){.pilcrow}
:::

::: {#section-2.1.2.2 .section}
##### [2.1.2.2.](#section-2.1.2.2){.section-number .selfRef} [HMAC Pre-shared Key Algorithm](#name-hmac-pre-shared-key-algorit){.section-name .selfRef} {#name-hmac-pre-shared-key-algorit}

The HMAC Key ID field allows for the simultaneous existence of several
hash algorithms (SHA-256, SHA3-256 \... or future ones) as well as
pre-shared keys.[¶](#section-2.1.2.2-1){.pilcrow}

The HMAC Key ID field is opaque \-- i.e., it has neither syntax nor
semantic except as an identifier of the right combination of pre-shared
key and hash algorithm.[¶](#section-2.1.2.2-2){.pilcrow}

At the HMAC TLV generating and verification nodes, the Key ID uniquely
identifies the pre-shared key and HMAC
algorithm.[¶](#section-2.1.2.2-3){.pilcrow}

At the HMAC TLV generating node, the Text for the HMAC computation is
set to the IPv6 header fields and SRH fields as they would appear at the
verification node(s), not necessarily the same as the source node
sending a packet with the HMAC TLV.[¶](#section-2.1.2.2-4){.pilcrow}

Pre-Shared key rollover is supported by having two key IDs in use while
the HMAC TLV generating node and verifying node converge to a new
key.[¶](#section-2.1.2.2-5){.pilcrow}

The HMAC TLV generating node may need to revoke an SRH for which it
previously generated an HMAC. Revocation is achieved by allocating a new
key and key ID, then rolling over the key ID associated with the SRH to
be revoked. The HMAC TLV verifying node drops packets with the revoked
SRH.[¶](#section-2.1.2.2-6){.pilcrow}

An implementation supporting HMAC can support multiple hash functions.
An implementation supporting HMAC [MUST]{.bcp14} implement SHA-2
\[[FIPS180-4](#FIPS180-4){.xref}\] in its SHA-256
variant.[¶](#section-2.1.2.2-7){.pilcrow}

The selection of pre-shared key and algorithm and their distribution is
outside the scope of this document. Some options may
include:[¶](#section-2.1.2.2-8){.pilcrow}

-   [setting these items in the configuration of the HMAC generating or
    verifying nodes, either by static configuration or any SDN-oriented
    approach[¶](#section-2.1.2.2-9.1){.pilcrow}]{#section-2.1.2.2-9.1}
-   [dynamically using a trusted key distribution protocol such as
    \[[RFC6407](#RFC6407){.xref}\][¶](#section-2.1.2.2-9.2){.pilcrow}]{#section-2.1.2.2-9.2}

While key management is outside the scope of this document, the
recommendations of BCP 107 \[[RFC4107](#RFC4107){.xref}\] should be
considered when choosing the key management
system.[¶](#section-2.1.2.2-10){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#SRNODES}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [SR Nodes](#name-sr-nodes){.section-name .selfRef} {#name-sr-nodes}

There are different types of nodes that may be involved in segment
routing networks: SR source nodes that originate packets with a segment
in the destination address of the IPv6 header, transit nodes that
forward packets destined to a remote segment, and SR segment endpoint
nodes that process a local segment in the destination address of an IPv6
header.[¶](#section-3-1){.pilcrow}

::: {#SOURCE}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [SR Source Node](#name-sr-source-node){.section-name .selfRef} {#name-sr-source-node}

A SR source node is any node that originates an IPv6 packet with a
segment (i.e., SRv6 SID) in the destination address of the IPv6 header.
The packet leaving the SR source node may or may not contain an SRH.
This includes either:[¶](#section-3.1-1){.pilcrow}

-   [A host originating an IPv6 packet,
    or[¶](#section-3.1-2.1){.pilcrow}]{#section-3.1-2.1}
-   [An SR domain ingress router encapsulating a received packet in an
    outer IPv6 header, followed by an optional
    SRH.[¶](#section-3.1-2.2){.pilcrow}]{#section-3.1-2.2}

It is out of the scope of this document to describe the mechanism
through which a segment in the destination address of the IPv6 header
and the Segment List in the SRH are
derived.[¶](#section-3.1-3){.pilcrow}
:::
:::

::: {#TRANSIT}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Transit Node](#name-transit-node){.section-name .selfRef} {#name-transit-node}

A transit node is any node forwarding an IPv6 packet where the
destination address of that packet is not locally configured as a
segment or a local interface. A transit node is not required to be
capable of processing a segment or SRH.[¶](#section-3.2-1){.pilcrow}
:::
:::

::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [SR Segment Endpoint Node](#name-sr-segment-endpoint-node){.section-name .selfRef} {#name-sr-segment-endpoint-node}

An SR segment endpoint node is any node receiving an IPv6 packet where
the destination address of that packet is locally configured as a
segment or local interface.[¶](#section-3.3-1){.pilcrow}
:::
:::
:::

::: {#PacketProcessing}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Packet Processing](#name-packet-processing){.section-name .selfRef} {#name-packet-processing}

This section describes SRv6 packet processing at the SR source, Transit,
and SR segment endpoint nodes.[¶](#section-4-1){.pilcrow}

::: {#pktSourceNode}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [SR Source Node](#name-sr-source-node-2){.section-name .selfRef} {#name-sr-source-node-2}

A source node steers a packet into an SR Policy. If the SR Policy
results in a Segment List containing a single segment, and there is no
need to add information to the SRH flag or add TLV; the DA is set to the
single Segment List entry, and the SRH [MAY]{.bcp14} be
omitted.[¶](#section-4.1-1){.pilcrow}

When needed, the SRH is created as follows:[¶](#section-4.1-2){.pilcrow}

:   The Next Header and Hdr Ext Len fields are set as specified in
    \[[RFC8200](#RFC8200){.xref}\].[¶](#section-4.1-3.2){.pilcrow}

:   The Routing Type field is set to 4.[¶](#section-4.1-3.4){.pilcrow}

:   The DA of the packet is set with the value of the first
    segment.[¶](#section-4.1-3.6){.pilcrow}

:   The first element of the SRH Segment List is the ultimate segment.
    The second element is the penultimate segment, and so
    on.[¶](#section-4.1-3.8){.pilcrow}

:   The Segments Left field is set to n-1, where n is the number of
    elements in the SR Policy.[¶](#section-4.1-3.10){.pilcrow}

:   The Last Entry field is set to n-1, where n is the number of
    elements in the SR Policy.[¶](#section-4.1-3.12){.pilcrow}

:   TLVs (including HMAC) may be set according to their
    specification.[¶](#section-4.1-3.14){.pilcrow}

:   The packet is forwarded toward the packet\'s Destination Address
    (the first segment).[¶](#section-4.1-3.16){.pilcrow}

::: {#REDUCED}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [Reduced SRH](#name-reduced-srh){.section-name .selfRef} {#name-reduced-srh}

When a source does not require the entire SID list to be preserved in
the SRH, a reduced SRH may be used.[¶](#section-4.1.1-1){.pilcrow}

A reduced SRH does not contain the first segment of the related SR
Policy (the first segment is the one already in the DA of the IPv6
header), and the Last Entry field is set to n-2, where n is the number
of elements in the SR Policy.[¶](#section-4.1.1-2){.pilcrow}
:::
:::
:::
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Transit Node](#name-transit-node-2){.section-name .selfRef} {#name-transit-node-2}

As specified in \[[RFC8200](#RFC8200){.xref}\], the only node allowed to
inspect the Routing Extension Header (and therefore the SRH) is the node
corresponding to the DA of the packet. Any other transit node [MUST
NOT]{.bcp14} inspect the underneath routing header and [MUST]{.bcp14}
forward the packet toward the DA according to its IPv6 routing
table.[¶](#section-4.2-1){.pilcrow}

When a SID is in the destination address of an IPv6 header of a packet,
it\'s routed through an IPv6 network as an IPv6 address. SIDs, or the
prefix(es) covering SIDs, and their reachability may be distributed by
means outside the scope of this document. For example,
\[[RFC5308](#RFC5308){.xref}\] or \[[RFC5340](#RFC5340){.xref}\] may be
used to advertise a prefix covering the SIDs on a
node.[¶](#section-4.2-2){.pilcrow}
:::

::: {#ENDSID}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [SR Segment Endpoint Node](#name-sr-segment-endpoint-node-2){.section-name .selfRef} {#name-sr-segment-endpoint-node-2}

Without constraining the details of an implementation, the SR segment
endpoint node creates Forwarding Information Base (FIB) entries for its
local SIDs.[¶](#section-4.3-1){.pilcrow}

When an SRv6-capable node receives an IPv6 packet, it performs a
longest-prefix-match lookup on the packet\'s destination address. This
lookup can return any of the following:[¶](#section-4.3-2){.pilcrow}

-   [A FIB entry that represents a locally instantiated SRv6
    SID[¶](#section-4.3-3.1){.pilcrow}]{#section-4.3-3.1}
-   [A FIB entry that represents a local interface, not locally
    instantiated as an SRv6
    SID[¶](#section-4.3-3.2){.pilcrow}]{#section-4.3-3.2}
-   [A FIB entry that represents a nonlocal
    route[¶](#section-4.3-3.3){.pilcrow}]{#section-4.3-3.3}
-   [No Match[¶](#section-4.3-3.4){.pilcrow}]{#section-4.3-3.4}

::: {#pktENDSID}
::: {#section-4.3.1 .section}
#### [4.3.1.](#section-4.3.1){.section-number .selfRef} [FIB Entry Is a Locally Instantiated SRv6 SID](#name-fib-entry-is-a-locally-inst){.section-name .selfRef} {#name-fib-entry-is-a-locally-inst}

This document and section define a single SRv6 SID. Future documents may
define additional SRv6 SIDs. In such a case, the entire content of this
section will be defined in that document.[¶](#section-4.3.1-1){.pilcrow}

If the FIB entry represents a locally instantiated SRv6 SID, process the
next header chain of the IPv6 header as defined in [Section
4](https://www.rfc-editor.org/rfc/rfc8200#section-4){.relref} of
\[[RFC8200](#RFC8200){.xref}\]. [Section 4.3.1.1](#SRHPROC){.xref}
describes how to process an SRH; [Section 4.3.1.2](#UPPERHEADER){.xref}
describes how to process an upper-layer header or the absence of a Next
Header.[¶](#section-4.3.1-2){.pilcrow}

Processing this SID modifies the Segments Left and, if configured to
process TLVs, it may modify the \"variable-length data\" of TLV types
that change en route. Therefore, Segments Left is mutable, and TLVs that
change en route are mutable. The remainder of the SRH (Flags, Tag,
Segment List, and TLVs that do not change en route) are immutable while
processing this SID.[¶](#section-4.3.1-3){.pilcrow}

::: {#SRHPROC}
::: {#section-4.3.1.1 .section}
##### [4.3.1.1.](#section-4.3.1.1){.section-number .selfRef} [SRH Processing](#name-srh-processing){.section-name .selfRef} {#name-srh-processing}

::: {#section-4.3.1.1-1 .artwork .art-text .alignLeft}
    S01. When an SRH is processed {
    S02.   If Segments Left is equal to zero {
    S03.     Proceed to process the next header in the packet,
             whose type is identified by the Next Header field in
             the routing header.
    S04.   }
    S05.   Else {
    S06.     If local configuration requires TLV processing {
    S07.       Perform TLV processing (see TLV Processing)
    S08.     }
    S09.     max_last_entry  =  ( Hdr Ext Len /  2 ) - 1
    S10.     If  ((Last Entry > max_last_entry) or
    S11.          (Segments Left is greater than (Last Entry+1)) {
    S12.       Send an ICMP Parameter Problem, Code 0, message to
               the Source Address, pointing to the Segments Left
               field, and discard the packet.
    S13.     }
    S14.     Else {
    S15.       Decrement Segments Left by 1.
    S16.       Copy Segment List[Segments Left] from the SRH to the
               destination address of the IPv6 header.
    S17.       If the IPv6 Hop Limit is less than or equal to 1 {
    S18.         Send an ICMP Time Exceeded -- Hop Limit Exceeded in
                 Transit message to the Source Address and discard
                 the packet.
    S19.       }
    S20.       Else {
    S21.         Decrement the Hop Limit by 1
    S22.         Resubmit the packet to the IPv6 module for transmission
                 to the new destination.
    S23.       }
    S24.     }
    S25.   }
    S26. }

[¶](#section-4.3.1.1-1){.pilcrow}
:::

::: {#TLVPROCESS}
::: {#section-4.3.1.1.1 .section}
###### [4.3.1.1.1.](#section-4.3.1.1.1){.section-number .selfRef} [TLV Processing](#name-tlv-processing){.section-name .selfRef} {#name-tlv-processing}

Local configuration determines how TLVs are to be processed when the
Active Segment is a local SID defined in this document. The definition
of local configuration is outside the scope of this
document.[¶](#section-4.3.1.1.1-1){.pilcrow}

For illustration purposes only, two example local configurations that
may be associated with a SID are provided
below.[¶](#section-4.3.1.1.1-2){.pilcrow}

::: {#section-4.3.1.1.1-3 .artwork .art-text .alignLeft}
    Example 1:
    For any packet received from interface I2
      Skip TLV processing

    Example 2:
    For any packet received from interface I1
      If first TLV is HMAC {
        Process the HMAC TLV
      }
      Else {
        Discard the packet
      }

[¶](#section-4.3.1.1.1-3){.pilcrow}
:::
:::
:::
:::
:::

::: {#UPPERHEADER}
::: {#section-4.3.1.2 .section}
##### [4.3.1.2.](#section-4.3.1.2){.section-number .selfRef} [Upper-Layer Header or No Next Header](#name-upper-layer-header-or-no-ne){.section-name .selfRef} {#name-upper-layer-header-or-no-ne}

When processing the upper-layer header of a packet matching a FIB entry
locally instantiated as an SRv6 SID defined in this
document:[¶](#section-4.3.1.2-1){.pilcrow}

::: {#section-4.3.1.2-2 .artwork .art-text .alignLeft}
    IF (Upper-layer Header is IPv4 or IPv6) and
        local configuration permits {
      Perform IPv6 decapsulation
      Resubmit the decapsulated packet to the IPv4 or IPv6 module
    }
    ELSE {
      Send an ICMP parameter problem message to the Source Address and
      discard the packet.  Error code (4) "SR Upper-layer
      Header Error", pointer set to the offset of the upper-layer
      header.
    }

[¶](#section-4.3.1.2-2){.pilcrow}
:::

A unique error code allows an SR source node to recognize an error in
SID processing at an endpoint.[¶](#section-4.3.1.2-3){.pilcrow}
:::
:::
:::
:::

::: {#section-4.3.2 .section}
#### [4.3.2.](#section-4.3.2){.section-number .selfRef} [FIB Entry Is a Local Interface](#name-fib-entry-is-a-local-interf){.section-name .selfRef} {#name-fib-entry-is-a-local-interf}

If the FIB entry represents a local interface and is not locally
instantiated as an SRv6 SID, the SRH is processed as
follows:[¶](#section-4.3.2-1){.pilcrow}

-   [If Segments Left is zero, the node must ignore the routing header
    and proceed to process the next header in the packet, whose type is
    identified by the Next Header field in the routing
    header.[¶](#section-4.3.2-2.1){.pilcrow}]{#section-4.3.2-2.1}
-   [If Segments Left is non-zero, the node must discard the packet and
    send an ICMP Parameter Problem, Code 0, message to the packet\'s
    Source Address, pointing to the unrecognized Routing
    Type.[¶](#section-4.3.2-2.2){.pilcrow}]{#section-4.3.2-2.2}
:::

::: {#section-4.3.3 .section}
#### [4.3.3.](#section-4.3.3){.section-number .selfRef} [FIB Entry Is a Nonlocal Route](#name-fib-entry-is-a-nonlocal-rou){.section-name .selfRef} {#name-fib-entry-is-a-nonlocal-rou}

Processing is not changed by this
document.[¶](#section-4.3.3-1){.pilcrow}
:::

::: {#section-4.3.4 .section}
#### [4.3.4.](#section-4.3.4){.section-number .selfRef} [FIB Entry Is a No Match](#name-fib-entry-is-a-no-match){.section-name .selfRef} {#name-fib-entry-is-a-no-match}

Processing is not changed by this
document.[¶](#section-4.3.4-1){.pilcrow}
:::
:::
:::
:::
:::

::: {#DEP}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Intra-SR-Domain Deployment Model](#name-intra-sr-domain-deployment-){.section-name .selfRef} {#name-intra-sr-domain-deployment-}

The use of the SIDs exclusively within the SR domain and solely for
packets of the SR domain is an important deployment
model.[¶](#section-5-1){.pilcrow}

This enables the SR domain to act as a single routing
system.[¶](#section-5-2){.pilcrow}

This section covers:[¶](#section-5-3){.pilcrow}

-   [securing the SR domain from external attempts to use its
    SIDs[¶](#section-5-4.1){.pilcrow}]{#section-5-4.1}
-   [using the SR domain as a single system with delegation between
    components[¶](#section-5-4.2){.pilcrow}]{#section-5-4.2}
-   [handling packets of the SR
    domain[¶](#section-5-4.3){.pilcrow}]{#section-5-4.3}

::: {#SECSRDOMAIN}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Securing the SR Domain](#name-securing-the-sr-domain){.section-name .selfRef} {#name-securing-the-sr-domain}

Nodes outside the SR domain are not trusted: they cannot directly use
the SIDs of the domain. This is enforced by two levels of access control
lists:[¶](#section-5.1-1){.pilcrow}

1.  ::: {#section-5.1-2.1}
    Any packet entering the SR domain and destined to a SID within the
    SR domain is dropped. This may be realized with the following logic.
    Other methods with equivalent outcome are considered
    compliant:[¶](#section-5.1-2.1.1){.pilcrow}

    -   [Allocate all the SIDs from a block
        S/s[¶](#section-5.1-2.1.2.1){.pilcrow}]{#section-5.1-2.1.2.1}
    -   [Configure each external interface of each edge node of the
        domain with an inbound infrastructure access list (IACL) that
        drops any incoming packet with a destination address in
        S/s[¶](#section-5.1-2.1.2.2){.pilcrow}]{#section-5.1-2.1.2.2}
    -   [Failure to implement this method of ingress filtering exposes
        the SR domain to source-routing attacks, as described and
        referenced in
        \[[RFC5095](#RFC5095){.xref}\][¶](#section-5.1-2.1.2.3){.pilcrow}]{#section-5.1-2.1.2.3}
    :::

2.  ::: {#section-5.1-2.2}
    The distributed protection in #1 is complemented with per-node
    protection, dropping packets to SIDs from source addresses outside
    the SR domain. This may be realized with the following logic. Other
    methods with equivalent outcome are considered
    compliant:[¶](#section-5.1-2.2.1){.pilcrow}

    -   [Assign all interface addresses from prefix
        A/a[¶](#section-5.1-2.2.2.1){.pilcrow}]{#section-5.1-2.2.2.1}
    -   [At node k, all SIDs local to k are assigned from prefix
        Sk/sk[¶](#section-5.1-2.2.2.2){.pilcrow}]{#section-5.1-2.2.2.2}
    -   [Configure each internal interface of each SR node k in the SR
        domain with an inbound IACL that drops any incoming packet with
        a destination address in Sk/sk if the source address is not in
        A/a.[¶](#section-5.1-2.2.2.3){.pilcrow}]{#section-5.1-2.2.2.3}
    :::
:::
:::

::: {#SINGLESYS}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [SR Domain as a Single System with Delegation among Components](#name-sr-domain-as-a-single-syste){.section-name .selfRef} {#name-sr-domain-as-a-single-syste}

All intra-SR-domain packets are of the SR domain. The IPv6 header is
originated by a node of the SR domain and is destined to a node of the
SR domain.[¶](#section-5.2-1){.pilcrow}

All interdomain packets are encapsulated for the part of the packet
journey that is within the SR domain. The outer IPv6 header is
originated by a node of the SR domain and is destined to a node of the
SR domain.[¶](#section-5.2-2){.pilcrow}

As a consequence, any packet within the SR domain is of the SR
domain.[¶](#section-5.2-3){.pilcrow}

The SR domain is a system in which the operator may want to distribute
or delegate different operations of the outermost header to different
nodes within the system.[¶](#section-5.2-4){.pilcrow}

An operator of an SR domain may choose to delegate SRH addition to a
host node within the SR domain and delegate validation of the contents
of any SRH to a more trusted router or switch attached to the host.
Consider a top-of-rack switch T connected to host H via interface I. H
receives an SRH (SRH1) with a computed HMAC via some SDN method outside
the scope of this document. H classifies traffic it sources and adds
SRH1 to traffic requiring a specific Service Level Agreement (SLA). T is
configured with an IACL on I requiring verification of the SRH for any
packet destined to the SID block of the SR domain (S/s). T checks and
verifies that SRH1 is valid and contains an HMAC TLV; T then verifies
the HMAC.[¶](#section-5.2-5){.pilcrow}

An operator of the SR domain may choose to have all segments in the SR
domain verify the HMAC. This mechanism would verify that the SRH Segment
List is not modified while traversing the SR
domain.[¶](#section-5.2-6){.pilcrow}
:::
:::

::: {#MTU}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [MTU Considerations](#name-mtu-considerations){.section-name .selfRef} {#name-mtu-considerations}

An SR domain ingress edge node encapsulates packets traversing the SR
domain and needs to consider the MTU of the SR domain. Within the SR
domain, well-known mitigation techniques are [RECOMMENDED]{.bcp14}, such
as deploying a greater MTU value within the SR domain than at the
ingress edges.[¶](#section-5.3-1){.pilcrow}

Encapsulation with an outer IPv6 header and SRH shares the same MTU and
fragmentation considerations as IPv6 tunnels described in
\[[RFC2473](#RFC2473){.xref}\]. Further investigation on the limitation
of various tunneling methods (including IPv6 tunnels) is discussed in
\[[INTAREA-TUNNELS](#I-D.ietf-intarea-tunnels){.xref}\] and
[SHOULD]{.bcp14} be considered by operators when considering MTU within
the SR domain.[¶](#section-5.3-2){.pilcrow}
:::
:::

::: {#ICMP}
::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [ICMP Error Processing](#name-icmp-error-processing){.section-name .selfRef} {#name-icmp-error-processing}

ICMP error packets generated within the SR domain are sent to source
nodes within the SR domain. The invoking packet in the ICMP error
message may contain an SRH. Since the destination address of a packet
with an SRH changes as each segment is processed, it may not be the
destination used by the socket or application that generated the
invoking packet.[¶](#section-5.4-1){.pilcrow}

For the source of an invoking packet to process the ICMP error message,
the ultimate destination address of the IPv6 header may be required. The
following logic is used to determine the destination address for use by
protocol-error handlers.[¶](#section-5.4-2){.pilcrow}

-   ::: {#section-5.4-3.1}
    Walk all extension headers of the invoking IPv6 packet to the
    routing extension header preceding the upper-layer
    header.[¶](#section-5.4-3.1.1){.pilcrow}

    -   ::: {#section-5.4-3.1.2.1}
        If routing header is type 4 Segment Routing Header
        (SRH)[¶](#section-5.4-3.1.2.1.1){.pilcrow}

        -   [The SID at Segment List\[0\] may be used as the destination
            address of the invoking
            packet.[¶](#section-5.4-3.1.2.1.2.1){.pilcrow}]{#section-5.4-3.1.2.1.2.1}
        :::
    :::

ICMP errors are then processed by upper-layer transports as defined in
\[[RFC4443](#RFC4443){.xref}\].[¶](#section-5.4-4){.pilcrow}

For IP packets encapsulated in an outer IPv6 header, ICMP error handling
is as defined in
\[[RFC2473](#RFC2473){.xref}\].[¶](#section-5.4-5){.pilcrow}
:::
:::

::: {#LBECMP}
::: {#section-5.5 .section}
### [5.5.](#section-5.5){.section-number .selfRef} [Load Balancing and ECMP](#name-load-balancing-and-ecmp){.section-name .selfRef} {#name-load-balancing-and-ecmp}

For any interdomain packet, the SR source node [MUST]{.bcp14} impose a
flow label computed based on the inner packet. The computation of the
flow label is as recommended in \[[RFC6438](#RFC6438){.xref}\] for the
sending Tunnel End Point.[¶](#section-5.5-1){.pilcrow}

For any intradomain packet, the SR source node [SHOULD]{.bcp14} impose a
flow label computed as described in \[[RFC6437](#RFC6437){.xref}\] to
assist ECMP load balancing at transit nodes incapable of computing a
5-tuple beyond the SRH.[¶](#section-5.5-2){.pilcrow}

At any transit node within an SR domain, the flow label [MUST]{.bcp14}
be used as defined in \[[RFC6438](#RFC6438){.xref}\] to calculate the
ECMP hash toward the destination address. If a flow label is not used,
the transit node would likely hash all packets between a pair of SR Edge
nodes to the same link.[¶](#section-5.5-3){.pilcrow}

At an SR segment endpoint node, the flow label [MUST]{.bcp14} be used as
defined in \[[RFC6438](#RFC6438){.xref}\] to calculate any ECMP hash
used to forward the processed packet to the next
segment.[¶](#section-5.5-4){.pilcrow}
:::
:::

::: {#other}
::: {#section-5.6 .section}
### [5.6.](#section-5.6){.section-number .selfRef} [Other Deployments](#name-other-deployments){.section-name .selfRef} {#name-other-deployments}

Other deployment models and their implications on security, MTU, HMAC,
ICMP error processing, and interaction with other extension headers are
outside the scope of this document.[¶](#section-5.6-1){.pilcrow}
:::
:::
:::
:::

::: {#ILL}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Illustrations](#name-illustrations){.section-name .selfRef} {#name-illustrations}

This section provides illustrations of SRv6 packet processing at SR
source, transit, and SR segment endpoint
nodes.[¶](#section-6-1){.pilcrow}

::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Abstract Representation of an SRH](#name-abstract-representation-of-){.section-name .selfRef} {#name-abstract-representation-of-}

For a node k, its IPv6 address is represented as Ak, and its SRv6 SID is
represented as Sk.[¶](#section-6.1-1){.pilcrow}

IPv6 headers are represented as the tuple of (source,destination). For
example, a packet with source address A1 and destination address A2 is
represented as (A1,A2). The payload of the packet is
omitted.[¶](#section-6.1-2){.pilcrow}

An SR Policy is a list of segments. A list of segments is represented as
\<S1,S2,S3> where S1 is the first SID to visit, S2 is the second SID to
visit, and S3 is the last SID to visit.[¶](#section-6.1-3){.pilcrow}

(SA,DA) (S3,S2,S1; SL) represents an IPv6 packet
with:[¶](#section-6.1-4){.pilcrow}

-   [Source Address SA, Destination Addresses DA, and next header
    SRH.[¶](#section-6.1-5.1){.pilcrow}]{#section-6.1-5.1}
-   [SRH with SID list \<S1,S2,S3> with SegmentsLeft =
    SL.[¶](#section-6.1-5.2){.pilcrow}]{#section-6.1-5.2}
-   [Note the difference between the \<\> and () symbols. \<S1,S2,S3>
    represents a SID list where the leftmost segment is the first
    segment. In contrast, (S3,S2,S1; SL) represents the same SID list
    but encoded in the SRH Segment List format where the leftmost
    segment is the last segment. When referring to an SR Policy in a
    high-level use case, it is simpler to use the \<S1,S2,S3> notation.
    When referring to an illustration of detailed behavior, the
    (S3,S2,S1; SL) notation is more
    convenient.[¶](#section-6.1-5.3){.pilcrow}]{#section-6.1-5.3}

At its SR Policy headend, the Segment List \<S1,S2,S3> results in SRH
(S3,S2,S1; SL=2) represented fully as:[¶](#section-6.1-6){.pilcrow}

::: {#section-6.1-7 .artwork .art-text .alignLeft}
        Segments Left=2
        Last Entry=2
        Flags=0
        Tag=0
        Segment List[0]=S3
        Segment List[1]=S2
        Segment List[2]=S1

[¶](#section-6.1-7){.pilcrow}
:::
:::

::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Example Topology](#name-example-topology){.section-name .selfRef} {#name-example-topology}

The following topology is used in examples
below:[¶](#section-6.2-1){.pilcrow}

::: {#TOPO1}
::: {#section-6.2-2.1 .artwork .art-text .alignLeft}
            + * * * * * * * * * * * * * * * * * * * * +

            *         [8]                [9]          *
                       |                  |
            *          |                  |           *
    [1]----[3]--------[5]----------------[6]---------[4]---[2]
            *          |                  |           *
                       |                  |
            *          |                  |           *
                       +--------[7]-------+
            *                                         *

            + * * * * * * *  SR domain  * * * * * * * +
:::

[Figure 1](#figure-1){.selfRef}
:::

-   [3 and 4 are SR domain edge
    routers[¶](#section-6.2-3.1){.pilcrow}]{#section-6.2-3.1}
-   [5, 6, and 7 are all SR domain
    routers[¶](#section-6.2-3.2){.pilcrow}]{#section-6.2-3.2}
-   [8 and 9 are hosts within the SR
    domain[¶](#section-6.2-3.3){.pilcrow}]{#section-6.2-3.3}
-   [1 and 2 are hosts outside the SR
    domain[¶](#section-6.2-3.4){.pilcrow}]{#section-6.2-3.4}
-   [The SR domain implements ingress filtering as per [Section
    5.1](#SECSRDOMAIN){.xref} and no external packet can enter the
    domain with a destination address equal to a segment of the
    domain.[¶](#section-6.2-3.5){.pilcrow}]{#section-6.2-3.5}
:::

::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [SR Source Node](#name-sr-source-node-3){.section-name .selfRef} {#name-sr-source-node-3}

::: {#section-6.3.1 .section}
#### [6.3.1.](#section-6.3.1){.section-number .selfRef} [Intra-SR-Domain Packet](#name-intra-sr-domain-packet){.section-name .selfRef} {#name-intra-sr-domain-packet}

When host 8 sends a packet to host 9 via an SR Policy \<S7,A9> the
packet is[¶](#section-6.3.1-1){.pilcrow}

P1: (A8,S7)(A9,S7; SL=1)[¶](#section-6.3.1-2){.pilcrow}

::: {#section-6.3.1.1 .section}
##### [6.3.1.1.](#section-6.3.1.1){.section-number .selfRef} [Reduced Variant](#name-reduced-variant){.section-name .selfRef} {#name-reduced-variant}

When host 8 sends a packet to host 9 via an SR Policy \<S7,A9> and it
wants to use a reduced SRH, the packet
is[¶](#section-6.3.1.1-1){.pilcrow}

P2: (A8,S7)(A9; SL=1)[¶](#section-6.3.1.1-2){.pilcrow}
:::
:::

::: {#section-6.3.2 .section}
#### [6.3.2.](#section-6.3.2){.section-number .selfRef} [Inter-SR-Domain Packet \-- Transit](#name-inter-sr-domain-packet-tran){.section-name .selfRef} {#name-inter-sr-domain-packet-tran}

When host 1 sends a packet to host 2, the packet
is[¶](#section-6.3.2-1){.pilcrow}

P3: (A1,A2)[¶](#section-6.3.2-2){.pilcrow}

The SR domain ingress router 3 receives P3 and steers it to SR domain
egress router 4 via an SR Policy \<S7,S4>. Router 3 encapsulates the
received packet P3 in an outer header with an SRH. The packet
is[¶](#section-6.3.2-3){.pilcrow}

P4: (A3,S7)(S4,S7; SL=1)(A1,A2)[¶](#section-6.3.2-4){.pilcrow}

If the SR Policy contains only one segment (the egress router 4), the
ingress router 3 encapsulates P3 into an outer header (A3,S4) without
SRH. The packet is[¶](#section-6.3.2-5){.pilcrow}

P5: (A3,S4)(A1,A2)[¶](#section-6.3.2-6){.pilcrow}

::: {#section-6.3.2.1 .section}
##### [6.3.2.1.](#section-6.3.2.1){.section-number .selfRef} [Reduced Variant](#name-reduced-variant-2){.section-name .selfRef} {#name-reduced-variant-2}

The SR domain ingress router 3 receives P3 and steers it to SR domain
egress router 4 via an SR Policy \<S7,S4>. If router 3 wants to use a
reduced SRH, it encapsulates the received packet P3 in an outer header
with a reduced SRH. The packet is[¶](#section-6.3.2.1-1){.pilcrow}

P6: (A3,S7)(S4; SL=1)(A1,A2)[¶](#section-6.3.2.1-2){.pilcrow}
:::
:::

::: {#section-6.3.3 .section}
#### [6.3.3.](#section-6.3.3){.section-number .selfRef} [Inter-SR-Domain Packet \-- Internal to External](#name-inter-sr-domain-packet-inte){.section-name .selfRef} {#name-inter-sr-domain-packet-inte}

When host 8 sends a packet to host 1, the packet is encapsulated for the
portion of its journey within the SR domain. From 8 to 3 the packet
is[¶](#section-6.3.3-1){.pilcrow}

P7: (A8,S3)(A8,A1)[¶](#section-6.3.3-2){.pilcrow}

In the opposite direction, the packet generated from 1 to 8
is[¶](#section-6.3.3-3){.pilcrow}

P8: (A1,A8)[¶](#section-6.3.3-4){.pilcrow}

At node 3, P8 is encapsulated for the portion of its journey within the
SR domain, with the outer header destined to segment S8. This results
in[¶](#section-6.3.3-5){.pilcrow}

P9: (A3,S8)(A1,A8)[¶](#section-6.3.3-6){.pilcrow}

At node 8, the outer IPv6 header is removed by S8 processing, then
processed again when received by A8.[¶](#section-6.3.3-7){.pilcrow}
:::
:::

::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Transit Node](#name-transit-node-3){.section-name .selfRef} {#name-transit-node-3}

Node 5 acts as transit node for packet P1 and sends
packet[¶](#section-6.4-1){.pilcrow}

P1: (A8,S7)(A9,S7;SL=1)[¶](#section-6.4-2){.pilcrow}

on the interface toward node 7.[¶](#section-6.4-3){.pilcrow}
:::

::: {#section-6.5 .section}
### [6.5.](#section-6.5){.section-number .selfRef} [SR Segment Endpoint Node](#name-sr-segment-endpoint-node-3){.section-name .selfRef} {#name-sr-segment-endpoint-node-3}

Node 7 receives packet P1 and, using the logic in [Section
4.3.1](#pktENDSID){.xref}, sends packet[¶](#section-6.5-1){.pilcrow}

P7: (A8,A9)(A9,S7; SL=0)[¶](#section-6.5-2){.pilcrow}

on the interface toward router 6.[¶](#section-6.5-3){.pilcrow}
:::

::: {#section-6.6 .section}
### [6.6.](#section-6.6){.section-number .selfRef} [Delegation of Function with HMAC Verification](#name-delegation-of-function-with){.section-name .selfRef} {#name-delegation-of-function-with}

This section describes how a function may be delegated within the SR
domain. In the following sections, consider a host 8 connected to a top
of rack 5.[¶](#section-6.6-1){.pilcrow}

::: {#section-6.6.1 .section}
#### [6.6.1.](#section-6.6.1){.section-number .selfRef} [SID List Verification](#name-sid-list-verification){.section-name .selfRef} {#name-sid-list-verification}

An operator may prefer to apply the SRH at source 8, while 5 verifies
that the SID list is valid.[¶](#section-6.6.1-1){.pilcrow}

For illustration purposes, an SDN controller provides 8 an SRH
terminating at node 9, with Segment List \<S5,S7,S6,A9>, and HMAC TLV
computed for the SRH. The HMAC key ID and key associated with the HMAC
TLV is shared with 5. Node 8 does not know the key. Node 5 is configured
with an IACL applied to the interface connected to 8, requiring HMAC
verification for any packet destined to
S/s.[¶](#section-6.6.1-2){.pilcrow}

Node 8 originates packets with the received SRH, including HMAC
TLV.[¶](#section-6.6.1-3){.pilcrow}

P15: (A8,S5)(A9,S6,S7,S5;SL=3;HMAC)[¶](#section-6.6.1-4){.pilcrow}

Node 5 receives and verifies the HMAC for the SRH, then forwards the
packet to the next segment[¶](#section-6.6.1-5){.pilcrow}

P16: (A8,S7)(A9,S6,S7,S5;SL=2;HMAC)[¶](#section-6.6.1-6){.pilcrow}

Node 6 receives[¶](#section-6.6.1-7){.pilcrow}

P17: (A8,S6)(A9,S6,S7,S5;SL=1;HMAC)[¶](#section-6.6.1-8){.pilcrow}

Node 9 receives[¶](#section-6.6.1-9){.pilcrow}

P18: (A8,A9)(A9,S6,S7,S5;SL=0;HMAC)[¶](#section-6.6.1-10){.pilcrow}

This use of an HMAC is particularly valuable within an enterprise-based
SR domain \[[SRN](#SRN){.xref}\].[¶](#section-6.6.1-11){.pilcrow}
:::
:::
:::
:::

::: {#Security}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This section reviews security considerations related to the SRH, given
the SRH processing and deployment models discussed in this
document.[¶](#section-7-1){.pilcrow}

As described in [Section 5](#DEP){.xref}, it is necessary to filter
packets\' ingress to the SR domain, destined to SIDs within the SR
domain (i.e., bearing a SID in the destination address). This ingress
filtering is via an IACL at SR domain ingress border nodes. Additional
protection is applied via an IACL at each SR Segment Endpoint node,
filtering packets not from within the SR domain, destined to SIDs in the
SR domain. ACLs are easily supported for small numbers of seldom
changing prefixes, making summarization
important.[¶](#section-7-2){.pilcrow}

Additionally, ingress filtering of IPv6 source addresses as recommended
in BCP 38 \[[RFC2827](#RFC2827){.xref}\] [SHOULD]{.bcp14} be
used.[¶](#section-7-3){.pilcrow}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [SR Attacks](#name-sr-attacks){.section-name .selfRef} {#name-sr-attacks}

An SR domain implements distributed and per-node protection as described
in [Section 5.1](#SECSRDOMAIN){.xref}. Additionally, domains deny
traffic with spoofed addresses by implementing the recommendations in
BCP 84 \[[RFC3704](#RFC3704){.xref}\].[¶](#section-7.1-1){.pilcrow}

Full implementation of the recommended protection blocks the attacks
documented in \[[RFC5095](#RFC5095){.xref}\] from outside the SR domain,
including bypassing filtering devices, reaching otherwise-unreachable
Internet systems, network topology discovery, bandwidth exhaustion, and
defeating anycast.[¶](#section-7.1-2){.pilcrow}

Failure to implement distributed and per-node protection allows
attackers to bypass filtering devices and exposes the SR domain to these
attacks.[¶](#section-7.1-3){.pilcrow}

Compromised nodes within the SR domain may mount the attacks listed
above along with other known attacks on IP networks (e.g., DoS/DDoS,
topology discovery, man-in-the-middle, traffic
interception/siphoning).[¶](#section-7.1-4){.pilcrow}
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Service Theft](#name-service-theft){.section-name .selfRef} {#name-service-theft}

Service theft is defined as the use of a service offered by the SR
domain by a node not authorized to use the
service.[¶](#section-7.2-1){.pilcrow}

Service theft is not a concern within the SR domain, as all SR source
nodes and SR segment endpoint nodes within the domain are able to
utilize the services of the domain. If a node outside the SR domain
learns of segments or a topological service within the SR domain, IACL
filtering denies access to those segments.[¶](#section-7.2-2){.pilcrow}
:::

::: {#section-7.3 .section}
### [7.3.](#section-7.3){.section-number .selfRef} [Topology Disclosure](#name-topology-disclosure){.section-name .selfRef} {#name-topology-disclosure}

The SRH is unencrypted and may contain SIDs of some intermediate SR
nodes in the path towards the destination within the SR domain. If
packets can be snooped within the SR domain, the SRH may reveal
topology, traffic flows, and service usage.[¶](#section-7.3-1){.pilcrow}

This is applicable within an SR domain, but the disclosure is less
relevant as an attacker has other means of learning topology, flows, and
service usage.[¶](#section-7.3-2){.pilcrow}
:::

::: {#section-7.4 .section}
### [7.4.](#section-7.4){.section-number .selfRef} [ICMP Generation](#name-icmp-generation){.section-name .selfRef} {#name-icmp-generation}

The generation of ICMPv6 error messages may be used to attempt
denial-of-service attacks by sending an error-causing destination
address or SRH in back-to-back packets. An implementation that correctly
follows [Section
2.4](https://www.rfc-editor.org/rfc/rfc4443#section-2.4){.relref} of
\[[RFC4443](#RFC4443){.xref}\] would be protected by the ICMPv6
rate-limiting mechanism.[¶](#section-7.4-1){.pilcrow}
:::

::: {#section-7.5 .section}
### [7.5.](#section-7.5){.section-number .selfRef} [Applicability of AH](#name-applicability-of-ah){.section-name .selfRef} {#name-applicability-of-ah}

The SR domain is a trusted domain, as defined in
\[[RFC8402](#RFC8402){.xref}\], Sections
[2](https://www.rfc-editor.org/rfc/rfc8402#section-2){.relref} and
[8.2](https://www.rfc-editor.org/rfc/rfc8402#section-8.2){.relref}. The
SR source is trusted to add an SRH (optionally verified as having been
generated by a trusted source via the HMAC TLV in this document), and
segments advertised within the domain are trusted to be accurate and
advertised by trusted sources via a secure control plane. As such, the
SR domain does not rely on the Authentication Header (AH) as defined in
\[[RFC4302](#RFC4302){.xref}\] to secure the
SRH.[¶](#section-7.5-1){.pilcrow}

The use of SRH with AH by an SR source node and its processing at an SR
segment endpoint node are not defined in this document. Future documents
may define use of SRH with AH and its
processing.[¶](#section-7.5-2){.pilcrow}
:::
:::
:::

::: {#IANA}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document makes the following registrations in the \"Internet
Protocol Version 6 (IPv6) Parameters\" \"Routing Types\" subregistry
maintained by IANA:[¶](#section-8-1){.pilcrow}

[]{#name-srh-registration}

::: {#SRH-REG}
  Value   Description                    Reference
  ------- ------------------------------ ---------------
  4       Segment Routing Header (SRH)   This document

  : [Table 1](#table-1){.selfRef}: [SRH
  Registration](#name-srh-registration){.selfRef}
:::

This document makes the following registrations in the \"Type 4 -
Parameter Problem\" message of the \"Internet Control Message Protocol
version 6 (ICMPv6) Parameters\" registry maintained by
IANA:[¶](#section-8-3){.pilcrow}

[]{#name-sr-upper-layer-header-error}

::: {#UPPER-LAYER}
  Code   Name
  ------ -----------------------------
  4      SR Upper-layer Header Error

  : [Table 2](#table-2){.selfRef}: [SR Upper-layer Header Error
  Registration](#name-sr-upper-layer-header-error){.selfRef}
:::

::: {#SRHFLAGSREG}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [Segment Routing Header Flags Registry](#name-segment-routing-header-flag){.section-name .selfRef} {#name-segment-routing-header-flag}

This document describes a new IANA-managed registry to identify SRH
Flags Bits. The registration procedure is \"IETF Review\"
\[[RFC8126](#RFC8126){.xref}\]. The registry name is \"Segment Routing
Header Flags\". Flags are 8 bits.[¶](#section-8.1-1){.pilcrow}
:::
:::

::: {#SRHTLVREG}
::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [Segment Routing Header TLVs Registry](#name-segment-routing-header-tlvs){.section-name .selfRef} {#name-segment-routing-header-tlvs}

This document describes a new IANA-managed registry to identify SRH
TLVs. The registration procedure is \"IETF Review\". The registry name
is \"Segment Routing Header TLVs\". A TLV is identified through an
unsigned 8-bit codepoint value, with assigned values 0-127 for TLVs that
do not change en route and 128-255 for TLVs that may change en route.
The following codepoints are defined in this
document:[¶](#section-8.2-1){.pilcrow}

[]{#name-segment-routing-header-tlvs-}

::: {#TLV-REG}
  Value     Description                Reference
  --------- -------------------------- ---------------
  0         Pad1 TLV                   This document
  1         Reserved                   This document
  2         Reserved                   This document
  3         Reserved                   This document
  4         PadN TLV                   This document
  5         HMAC TLV                   This document
  6         Reserved                   This document
  124-126   Experimentation and Test   This document
  127       Reserved                   This document
  252-254   Experimentation and Test   This document
  255       Reserved                   This document

  : [Table 3](#table-3){.selfRef}: [Segment Routing Header TLVs
  Registry](#name-segment-routing-header-tlvs-){.selfRef}
:::

Values 1, 2, 3, and 6 were defined in draft versions of this
specification and are Reserved for backwards compatibility with early
implementations and should not be reassigned. Values 127 and 255 are
Reserved to allow for expansion of the Type field in future
specifications, if needed.[¶](#section-8.2-3){.pilcrow}
:::
:::
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[FIPS180-4\]
:   [National Institute of Standards and Technology (NIST)]{.refAuthor},
    [\"Secure Hash Standard (SHS)\"]{.refTitle}, [FIPS PUB
    180-4]{.refContent}, [DOI 10.6028/NIST.FIPS.180-4]{.refContent},
    August 2015,
    \<<http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf>\>.

\[IANA-SRHTLV\]
:   [IANA]{.refAuthor}, [\"Segment Routing Header TLVs\"]{.refTitle},
    \<<https://www.iana.org/assignments/ipv6-parameters/>\>.

\[RFC2104\]
:   [Krawczyk, H.]{.refAuthor}[, Bellare, M.]{.refAuthor}[, and R.
    Canetti]{.refAuthor}, [\"HMAC: Keyed-Hashing for Message
    Authentication\"]{.refTitle}, [RFC 2104]{.seriesInfo}, [DOI
    10.17487/RFC2104]{.seriesInfo}, February 1997,
    \<<https://www.rfc-editor.org/info/rfc2104>\>.

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.

\[RFC2473\]
:   [Conta, A.]{.refAuthor}[ and S. Deering]{.refAuthor}, [\"Generic
    Packet Tunneling in IPv6 Specification\"]{.refTitle}, [RFC
    2473]{.seriesInfo}, [DOI 10.17487/RFC2473]{.seriesInfo}, December
    1998, \<<https://www.rfc-editor.org/info/rfc2473>\>.

\[RFC2827\]
:   [Ferguson, P.]{.refAuthor}[ and D. Senie]{.refAuthor}, [\"Network
    Ingress Filtering: Defeating Denial of Service Attacks which employ
    IP Source Address Spoofing\"]{.refTitle}, [BCP 38]{.seriesInfo},
    [RFC 2827]{.seriesInfo}, [DOI 10.17487/RFC2827]{.seriesInfo}, May
    2000, \<<https://www.rfc-editor.org/info/rfc2827>\>.

\[RFC3704\]
:   [Baker, F.]{.refAuthor}[ and P. Savola]{.refAuthor}, [\"Ingress
    Filtering for Multihomed Networks\"]{.refTitle}, [BCP
    84]{.seriesInfo}, [RFC 3704]{.seriesInfo}, [DOI
    10.17487/RFC3704]{.seriesInfo}, March 2004,
    \<<https://www.rfc-editor.org/info/rfc3704>\>.

\[RFC4107\]
:   [Bellovin, S.]{.refAuthor}[ and R. Housley]{.refAuthor},
    [\"Guidelines for Cryptographic Key Management\"]{.refTitle}, [BCP
    107]{.seriesInfo}, [RFC 4107]{.seriesInfo}, [DOI
    10.17487/RFC4107]{.seriesInfo}, June 2005,
    \<<https://www.rfc-editor.org/info/rfc4107>\>.

\[RFC4302\]
:   [Kent, S.]{.refAuthor}, [\"IP Authentication Header\"]{.refTitle},
    [RFC 4302]{.seriesInfo}, [DOI 10.17487/RFC4302]{.seriesInfo},
    December 2005, \<<https://www.rfc-editor.org/info/rfc4302>\>.

\[RFC5095\]
:   [Abley, J.]{.refAuthor}[, Savola, P.]{.refAuthor}[, and G.
    Neville-Neil]{.refAuthor}, [\"Deprecation of Type 0 Routing Headers
    in IPv6\"]{.refTitle}, [RFC 5095]{.seriesInfo}, [DOI
    10.17487/RFC5095]{.seriesInfo}, December 2007,
    \<<https://www.rfc-editor.org/info/rfc5095>\>.

\[RFC6407\]
:   [Weis, B.]{.refAuthor}[, Rowles, S.]{.refAuthor}[, and T.
    Hardjono]{.refAuthor}, [\"The Group Domain of
    Interpretation\"]{.refTitle}, [RFC 6407]{.seriesInfo}, [DOI
    10.17487/RFC6407]{.seriesInfo}, October 2011,
    \<<https://www.rfc-editor.org/info/rfc6407>\>.

\[RFC6437\]
:   [Amante, S.]{.refAuthor}[, Carpenter, B.]{.refAuthor}[,
    Jiang, S.]{.refAuthor}[, and J. Rajahalme]{.refAuthor}, [\"IPv6 Flow
    Label Specification\"]{.refTitle}, [RFC 6437]{.seriesInfo}, [DOI
    10.17487/RFC6437]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6437>\>.

\[RFC6438\]
:   [Carpenter, B.]{.refAuthor}[ and S. Amante]{.refAuthor}, [\"Using
    the IPv6 Flow Label for Equal Cost Multipath Routing and Link
    Aggregation in Tunnels\"]{.refTitle}, [RFC 6438]{.seriesInfo}, [DOI
    10.17487/RFC6438]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6438>\>.

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.

\[RFC8200\]
:   [Deering, S.]{.refAuthor}[ and R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.

\[RFC8402\]
:   [Filsfils, C., Ed.]{.refAuthor}[, Previdi, S., Ed.]{.refAuthor}[,
    Ginsberg, L.]{.refAuthor}[, Decraene, B.]{.refAuthor}[,
    Litkowski, S.]{.refAuthor}[, and R. Shakir]{.refAuthor}, [\"Segment
    Routing Architecture\"]{.refTitle}, [RFC 8402]{.seriesInfo}, [DOI
    10.17487/RFC8402]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8402>\>.
:::

::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[INTAREA-TUNNELS\]
:   [Touch, J.]{.refAuthor}[ and M. Townsley]{.refAuthor}, [\"IP Tunnels
    in the Internet Architecture\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-intarea-tunnels-10]{.seriesInfo}, 12 September 2019,
    \<<https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10>\>.

\[RFC4443\]
:   [Conta, A.]{.refAuthor}[, Deering, S.]{.refAuthor}[, and M. Gupta,
    Ed.]{.refAuthor}, [\"Internet Control Message Protocol (ICMPv6) for
    the Internet Protocol Version 6 (IPv6) Specification\"]{.refTitle},
    [STD 89]{.seriesInfo}, [RFC 4443]{.seriesInfo}, [DOI
    10.17487/RFC4443]{.seriesInfo}, March 2006,
    \<<https://www.rfc-editor.org/info/rfc4443>\>.

\[RFC5308\]
:   [Hopps, C.]{.refAuthor}, [\"Routing IPv6 with IS-IS\"]{.refTitle},
    [RFC 5308]{.seriesInfo}, [DOI 10.17487/RFC5308]{.seriesInfo},
    October 2008, \<<https://www.rfc-editor.org/info/rfc5308>\>.

\[RFC5340\]
:   [Coltun, R.]{.refAuthor}[, Ferguson, D.]{.refAuthor}[,
    Moy, J.]{.refAuthor}[, and A. Lindem]{.refAuthor}, [\"OSPF for
    IPv6\"]{.refTitle}, [RFC 5340]{.seriesInfo}, [DOI
    10.17487/RFC5340]{.seriesInfo}, July 2008,
    \<<https://www.rfc-editor.org/info/rfc5340>\>.

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}[, Leiba, B.]{.refAuthor}[, and T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.

\[SRN\]
:   [Lebrun, D.]{.refAuthor}[, Jadin, M.]{.refAuthor}[,
    Clad, F.]{.refAuthor}[, Filsfils, C.]{.refAuthor}[, and O.
    Bonaventure]{.refAuthor}, [\"Software Resolved Networks: Rethinking
    Enterprise Networks with IPv6 Segment Routing\"]{.refTitle}, 2018,
    \<<https://inl.info.ucl.ac.be/system/files/sosr18-final15-embedfonts.pdf>\>.
:::
:::

::: {#Acknowledgements}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors would like to thank [Ole Troan]{.contact-name}, [Bob
Hinden]{.contact-name}, [Ron Bonica]{.contact-name}, [Fred
Baker]{.contact-name}, [Brian Carpenter]{.contact-name}, [Alexandru
Petrescu]{.contact-name}, [Punit Kumar Jaiswal]{.contact-name}, [David
Lebrun]{.contact-name}, [Benjamin Kaduk]{.contact-name}, [Frank
Xialiang]{.contact-name}, [Mirja Kühlewind]{.contact-name}, [Roman
Danyliw]{.contact-name}, [Joe Touch]{.contact-name}, and [Magnus
Westerlund]{.contact-name} for their comments to this
document.[¶](#section-appendix.a-1){.pilcrow}
:::
:::

::: {#Contributors}
::: {#section-appendix.b .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

[Kamran Raza]{.contact-name}, [Zafar Ali]{.contact-name}, [Brian
Field]{.contact-name}, [Daniel Bernier]{.contact-name}, [Ida
Leung]{.contact-name}, [Jen Linkova]{.contact-name}, [Ebben
Aries]{.contact-name}, [Tomoya Kosugi]{.contact-name}, [Éric
Vyncke]{.contact-name}, [David Lebrun]{.contact-name}, [Dirk
Steinberg]{.contact-name}, [Robert Raszuk]{.contact-name}, [Dave
Barach]{.contact-name}, [John Brzozowski]{.contact-name}, [Pierre
Francois]{.contact-name}, [Nagendra Kumar]{.contact-name}, [Mark
Townsley]{.contact-name}, [Christian Martin]{.contact-name}, [Roberta
Maglione]{.contact-name}, [James Connolly]{.contact-name}, and [Aloys
Augustin]{.contact-name} contributed to the content of this
document.[¶](#section-appendix.b-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Clarence Filsfils ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Brussels]{.locality}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <cfilsfil@cisco.com>
:::

::: {.left dir="auto"}
[Darren Dukes ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Ottawa]{.locality}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <ddukes@cisco.com>
:::

::: {.left dir="auto"}
[Stefano Previdi]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei]{.org}
:::

::: {.left dir="auto"}
[Italy]{.country-name}
:::

::: email
Email: <stefano@previdi.net>
:::

::: {.left dir="auto"}
[John Leddy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Individual]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <john@leddy.net>
:::

::: {.left dir="auto"}
[Satoru Matsushima]{.fn .nameRole}
:::

::: {.left dir="auto"}
[SoftBank]{.org}
:::

::: email
Email: <satoru.matsushima@g.softbank.co.jp>
:::

::: {.left dir="auto"}
[Daniel Voyer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: email
Email: <daniel.voyer@bell.ca>
:::
:::
:::
