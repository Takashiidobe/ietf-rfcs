  RFC 8857          WebSocket as a Transport for BFCP   January 2021
  ----------------- ----------------------------------- --------------
  Pascual, et al.   Standards Track                     \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8857](https://www.rfc-editor.org/rfc/rfc8857){.eref}

Category:
:   Standards Track

Published:
:   January 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    V. Pascual
    :::

    ::: org
    Nokia
    :::
    :::

    ::: author
    ::: author-name
    A. Román
    :::

    ::: org
    Quobis
    :::
    :::

    ::: author
    ::: author-name
    S. Cazeaux
    :::

    ::: org
    Orange
    :::
    :::

    ::: author
    ::: author-name
    G. Salgueiro
    :::

    ::: org
    Cisco
    :::
    :::

    ::: author
    ::: author-name
    R. Ravindranath
    :::

    ::: org
    Cisco
    :::
    :::
:::

# RFC 8857 {#rfcnum}

# The WebSocket Protocol as a Transport for the Binary Floor Control Protocol (BFCP) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The WebSocket protocol enables two-way real-time communication between
clients and servers. This document specifies the use of Binary Floor
Control Protocol (BFCP) as a new WebSocket subprotocol enabling a
reliable transport mechanism between BFCP entities in new
scenarios.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8857>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Definitions](#name-definitions){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [The WebSocket
    Protocol](#name-the-websocket-protocol){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [The WebSocket BFCP
    Subprotocol](#name-the-websocket-bfcp-subproto){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Handshake](#name-handshake){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [BFCP
        Encoding](#name-bfcp-encoding){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Transport
    Reliability](#name-transport-reliability){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [SDP
    Considerations](#name-sdp-considerations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Transport
        Negotiation](#name-transport-negotiation){.xref}[¶](#section-toc.1-1.6.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [SDP Media
        Attributes](#name-sdp-media-attributes){.xref}[¶](#section-toc.1-1.6.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [SDP Offer/Answer
    Procedures](#name-sdp-offer-answer-procedures){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [General](#name-general){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Example Usage of \'websocket-uri\'
        SDP
        Attribute](#name-example-usage-of-websocket-){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Authentication](#name-authentication){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Registration of the WebSocket
        BFCP
        Subprotocol](#name-registration-of-the-websock){.xref}[¶](#section-toc.1-1.10.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Registration of the
        \'TCP/WS/BFCP\' and \'TCP/WSS/BFCP\' SDP \"proto\"
        Values](#name-registration-of-the-tcp-ws-){.xref}[¶](#section-toc.1-1.10.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [References](#name-references){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}

    -   ::: {#section-toc.1-1.11.2.1}
        [11.1](#section-11.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.11.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.11.2.2}
        [11.2](#section-11.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.11.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.12}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.13}
    [](#section-appendix.b){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.13.1){.pilcrow}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The WebSocket (WS) protocol \[[RFC6455](#RFC6455){.xref}\] enables
two-way message exchange between clients and servers on top of a
persistent TCP connection, optionally secured with Transport Layer
Security (TLS) \[[RFC8446](#RFC8446){.xref}\]. The initial protocol
handshake makes use of Hypertext Transfer Protocol (HTTP)
\[[RFC7230](#RFC7230){.xref}\] semantics, allowing the WebSocket
protocol to reuse existing HTTP
infrastructure.[¶](#section-1-1){.pilcrow}

The Binary Floor Control Protocol (BFCP) is a protocol to coordinate
access to shared resources in a conference. It is defined in
\[[RFC8855](#RFC8855){.xref}\] and is used between floor participants
and floor control servers, and between floor chairs (i.e., moderators)
and floor control servers.[¶](#section-1-2){.pilcrow}

Modern web browsers include a WebSocket client stack complying with the
WebSocket API \[[WS-API](#WS-API){.xref}\] as specified by the W3C. It
is expected that other client applications (those running in personal
computers and devices such as smartphones) will also make a WebSocket
client stack available. This document extends the applicability of
\[[RFC8855](#RFC8855){.xref}\] and \[[RFC8856](#RFC8856){.xref}\] to
enable the usage of BFCP in these scenarios.[¶](#section-1-3){.pilcrow}

The transport over which BFCP entities exchange messages depends on how
the clients obtain information to contact the floor control server
(e.g., using a Session Description Protocol (SDP) offer/answer exchange
per \[[RFC8856](#RFC8856){.xref}\] or the procedure described in RFC
5018 \[[RFC5018](#RFC5018){.xref}\]). \[[RFC8855](#RFC8855){.xref}\]
defines two transports for BFCP: TCP and UDP. This specification defines
a new WebSocket subprotocol (as defined in [Section
1.9](https://www.rfc-editor.org/rfc/rfc6455#section-1.9){.relref} of
\[[RFC6455](#RFC6455){.xref}\]) for transporting BFCP messages between a
WebSocket client and server. This subprotocol provides a reliable and
boundary-preserving transport for BFCP when run on top of TCP. Since
WebSocket provides a reliable transport, the extensions defined in
\[[RFC8855](#RFC8855){.xref}\] for sending BFCP over unreliable
transports are not applicable.[¶](#section-1-4){.pilcrow}
:::
:::

::: {#terminology}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

::: {#definitions}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Definitions](#name-definitions){.section-name .selfRef} {#name-definitions}

[]{.break}

BFCP WebSocket Client:
:   Any BFCP entity capable of opening outbound connections to WebSocket
    servers and communicating using the WebSocket BFCP subprotocol as
    defined by this document.[¶](#section-2.1-1.2){.pilcrow}
:   

BFCP WebSocket Server:
:   Any BFCP entity capable of listening for inbound connections from
    WebSocket clients and communicating using the WebSocket BFCP
    subprotocol as defined by this
    document.[¶](#section-2.1-1.4){.pilcrow}
:   
:::
:::
:::
:::

::: {#the_websocket_protocol}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [The WebSocket Protocol](#name-the-websocket-protocol){.section-name .selfRef} {#name-the-websocket-protocol}

The WebSocket protocol \[[RFC6455](#RFC6455){.xref}\] is a transport
layer on top of TCP (optionally secured with TLS
\[[RFC8446](#RFC8446){.xref}\]) in which both client and server exchange
message units in both directions. The protocol defines a connection
handshake, WebSocket subprotocol and extensions negotiation, a frame
format for sending application and control data, a masking mechanism,
and status codes for indicating disconnection
causes.[¶](#section-3-1){.pilcrow}

The WebSocket connection handshake is based on HTTP
\[[RFC7230](#RFC7230){.xref}\] and utilizes the HTTP GET method with an
Upgrade header field. This is sent by the client and then answered by
the server (if the negotiation succeeded) with an HTTP 101 status code.
Once the handshake is completed, the connection upgrades from HTTP to
the WebSocket protocol. This handshake procedure is designed to reuse
the existing HTTP infrastructure. During the connection handshake, the
client and server agree on the application protocol to use on top of the
WebSocket transport. Such an application protocol (also known as a
\"WebSocket subprotocol\") defines the format and semantics of the
messages exchanged by the endpoints. This could be a custom protocol or
a standardized one (as the WebSocket BFCP subprotocol defined in this
document). Once the HTTP 101 response is processed, both the client and
server reuse the underlying TCP connection for sending WebSocket
messages and control frames to each other. Unlike plain HTTP, this
connection is persistent and can be used for multiple message
exchanges.[¶](#section-3-2){.pilcrow}

The WebSocket protocol defines message units to be used by applications
for the exchange of data, so it provides a message boundary-preserving
transport layer.[¶](#section-3-3){.pilcrow}
:::
:::

::: {#the_websocket_bfcp_subprotocol}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [The WebSocket BFCP Subprotocol](#name-the-websocket-bfcp-subproto){.section-name .selfRef} {#name-the-websocket-bfcp-subproto}

The term WebSocket subprotocol refers to an application-level protocol
layered on top of a WebSocket connection. This document specifies the
WebSocket BFCP subprotocol for carrying BFCP messages over a WebSocket
connection.[¶](#section-4-1){.pilcrow}

::: {#handshake}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Handshake](#name-handshake){.section-name .selfRef} {#name-handshake}

The BFCP WebSocket client and BFCP WebSocket server negotiate usage of
the WebSocket BFCP subprotocol during the WebSocket handshake procedure
as defined in [Section
1.3](https://www.rfc-editor.org/rfc/rfc6455#section-1.3){.relref} of
\[[RFC6455](#RFC6455){.xref}\]. The client [MUST]{.bcp14} include the
value \"bfcp\" in the Sec-WebSocket-Protocol header field in its
handshake request. The 101 reply from the server [MUST]{.bcp14} contain
\"bfcp\" in its corresponding Sec-WebSocket-Protocol header
field.[¶](#section-4.1-1){.pilcrow}

Below is an example of a WebSocket handshake in which the client
requests the WebSocket BFCP subprotocol support from the
server:[¶](#section-4.1-2){.pilcrow}

::: {#section-4.1-3 .artwork .art-text .alignLeft}
      GET / HTTP/1.1
      Host: bfcp-ws.example.com
      Upgrade: websocket
      Connection: Upgrade
      Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
      Origin: http://www.example.com
      Sec-WebSocket-Protocol: bfcp
      Sec-WebSocket-Version: 13

[¶](#section-4.1-3){.pilcrow}
:::

The handshake response from the server accepting the WebSocket BFCP
subprotocol would look as follows:[¶](#section-4.1-4){.pilcrow}

::: {#section-4.1-5 .artwork .art-text .alignLeft}
      HTTP/1.1 101 Switching Protocols
      Upgrade: websocket
      Connection: Upgrade
      Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
      Sec-WebSocket-Protocol: bfcp

[¶](#section-4.1-5){.pilcrow}
:::

Once the negotiation has been completed, the WebSocket connection is
established and can be used for the transport of BFCP
messages.[¶](#section-4.1-6){.pilcrow}
:::
:::

::: {#bfcp_encoding}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [BFCP Encoding](#name-bfcp-encoding){.section-name .selfRef} {#name-bfcp-encoding}

BFCP messages use a TLV (Type-Length-Value) binary encoding, therefore
BFCP WebSocket clients and BFCP WebSocket servers [MUST]{.bcp14} be
transported in unfragmented binary WebSocket frames (FIN: 1, opcode:
%x2) to exchange BFCP messages. The WebSocket frame data [MUST]{.bcp14}
be a valid BFCP message, so the length of the payload of the WebSocket
frame [MUST]{.bcp14} be lower than the maximum size allowed (2^16^ +12
bytes) for a BFCP message as described in
\[[RFC8855](#RFC8855){.xref}\]. In addition, the encoding rules for
reliable protocols defined in \[[RFC8855](#RFC8855){.xref}\]
[MUST]{.bcp14} be followed.[¶](#section-4.2-1){.pilcrow}

While this specification assumes that BFCP encoding is only TLV binary,
future documents may define other mechanisms, like JSON serialization.
If encoding changes, a new subprotocol identifier would need to be
selected.[¶](#section-4.2-2){.pilcrow}

Each BFCP message [MUST]{.bcp14} be carried within a single WebSocket
message, and a WebSocket message [MUST NOT]{.bcp14} contain more than
one BFCP message.[¶](#section-4.2-3){.pilcrow}
:::
:::
:::
:::

::: {#bfcp_websocket_transport}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Transport Reliability](#name-transport-reliability){.section-name .selfRef} {#name-transport-reliability}

The WebSocket protocol \[[RFC6455](#RFC6455){.xref}\] provides a
reliable transport, and therefore the BFCP WebSocket subprotocol defined
by this document also provides reliable BFCP transport. Thus, client and
server transactions using the WebSocket protocol for transport
[MUST]{.bcp14} follow the procedures for reliable transports as defined
in \[[RFC8855](#RFC8855){.xref}\] and
\[[RFC8856](#RFC8856){.xref}\].[¶](#section-5-1){.pilcrow}

BFCP WebSocket clients cannot receive incoming WebSocket connections
initiated by any other peer. This means that a BFCP WebSocket client
[MUST]{.bcp14} actively initiate a connection towards a BFCP WebSocket
server. The BFCP server will have a globally routable address and thus
does not require ICE, as clients always initiate connections to
it.[¶](#section-5-2){.pilcrow}
:::
:::

::: {#sdp_con}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [SDP Considerations](#name-sdp-considerations){.section-name .selfRef} {#name-sdp-considerations}

::: {#updates_to_rfc_4583bis}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Transport Negotiation](#name-transport-negotiation){.section-name .selfRef} {#name-transport-negotiation}

Rules to generate an \"m=\" line for a BFCP stream are described in
\[[RFC8856](#RFC8856){.xref}\], [Section
4](https://www.rfc-editor.org/rfc/rfc8856#section-4){.relref}.[¶](#section-6.1-1){.pilcrow}

New values are defined for the SDP \"proto\" field: \'TCP/WS/BFCP\' and
\'TCP/WSS/BFCP\'.[¶](#section-6.1-2){.pilcrow}

-   [\'TCP/WS/BFCP\' is used when BFCP runs on top of WS, which in turn
    runs on top of
    TCP.[¶](#section-6.1-3.1){.pilcrow}]{#section-6.1-3.1}
-   [\'TCP/WSS/BFCP\' is used when BFCP runs on top of secure WebSocket
    (WSS), which in turn runs on top of TLS and
    TCP.[¶](#section-6.1-3.2){.pilcrow}]{#section-6.1-3.2}

The \"port\" field is set following the rules in Section
[4](https://www.rfc-editor.org/rfc/rfc8856#section-4){.relref} and
Section
[7.1](https://www.rfc-editor.org/rfc/rfc8856#section-7.1){.relref} of
\[[RFC8856](#RFC8856){.xref}\]. Depending on the value of the SDP
\'setup\' attribute defined in \[[RFC4145](#RFC4145){.xref}\], the
\"port\" field contains the port to which the remote endpoint will
direct BFCP messages, or it is irrelevant (i.e., the endpoint will
initiate the connection towards the remote endpoint) and should be set
to a value of \'9\', which is the discard port. The \'connection\'
attribute and port [MUST]{.bcp14} follow the rules of
\[[RFC4145](#RFC4145){.xref}\].[¶](#section-6.1-4){.pilcrow}

While this document recommends the use of secure WebSocket (i.e.,
TCP/WSS) for security reasons, TCP/WS is also permitted so as to achieve
maximum compatibility among clients.[¶](#section-6.1-5){.pilcrow}
:::
:::

::: {#attribute}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [SDP Media Attributes](#name-sdp-media-attributes){.section-name .selfRef} {#name-sdp-media-attributes}

\[[RFC8124](#RFC8124){.xref}\] defines a new SDP attribute to indicate
the connection Uniform Resource Identifier (URI) for the WebSocket
client. The SDP attribute \'websocket-uri\' defined in [Section
3](https://www.rfc-editor.org/rfc/rfc8124#section-3){.relref} of
\[[RFC8124](#RFC8124){.xref}\] [MUST]{.bcp14} be used when BFCP runs on
top of WS or WSS. When the \'websocket-uri\' attribute is present in the
media section of the SDP, the procedures mentioned in [Section
4](https://www.rfc-editor.org/rfc/rfc8124#section-4){.relref} of
\[[RFC8124](#RFC8124){.xref}\] [MUST]{.bcp14} be
followed.[¶](#section-6.2-1){.pilcrow}
:::
:::
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [SDP Offer/Answer Procedures](#name-sdp-offer-answer-procedures){.section-name .selfRef} {#name-sdp-offer-answer-procedures}

::: {#general}
::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [General](#name-general){.section-name .selfRef} {#name-general}

An endpoint (i.e., both the offerer and the answerer) [MUST]{.bcp14}
create an SDP media description (\"m=\" line) for each
BFCP-over-WebSocket media stream and [MUST]{.bcp14} assign either a
\'TCP/WSS/BFCP\' or \'TCP/WS/BFCP\' value to the \"proto\" field of the
\"m=\" line depending on whether the endpoint wishes to use secure
WebSocket or WebSocket. Furthermore, the server side, which could be
either the offerer or answerer, [MUST]{.bcp14} add a \'websocket-uri\'
attribute in the media section depending on whether it wishes to use
WebSocket or secure WebSocket. This new attribute [MUST]{.bcp14} follow
the syntax defined in \[[RFC8124](#RFC8124){.xref}\]. Additionally, the
SDP offer/answer procedures defined in [Section
4](https://www.rfc-editor.org/rfc/rfc8124#section-4){.relref} of
\[[RFC8124](#RFC8124){.xref}\] [MUST]{.bcp14} be followed for the \"m=\"
line associated with a BFCP-over-WebSocket media
stream.[¶](#section-7.1-1){.pilcrow}
:::
:::

::: {#example}
::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Example Usage of \'websocket-uri\' SDP Attribute](#name-example-usage-of-websocket-){.section-name .selfRef} {#name-example-usage-of-websocket-}

The following is an example of an \"m=\" line for a BFCP connection. In
this example, the offerer sends the SDP with the \"proto\" field having
a value of \'TCP/WSS/BFCP\', indicating that the offerer wishes to use
secure WebSocket as a transport for the media stream, and the \"fmt\"
field having a value of \'\*\' (for details on the \"fmt\" field, see
[Section 4](https://www.rfc-editor.org/rfc/rfc8856#section-4){.relref}
of \[[RFC8856](#RFC8856){.xref}\]).[¶](#section-7.2-1){.pilcrow}

::: {#section-7.2-2}
``` {.sourcecode .lang-sdp}
Offer (browser):
m=application 9 TCP/WSS/BFCP *
a=setup:active
a=connection:new
a=floorctrl:c-only
m=audio 55000 RTP/AVP 0
m=video 55002 RTP/AVP 31

Answer (server):
m=application 50000 TCP/WSS/BFCP *
a=setup:passive
a=connection:new
a=websocket-uri:wss://bfcp-ws.example.com?token=3170449312
a=floorctrl:s-only
a=confid:4321
a=userid:1234
a=floorid:1 m-stream:10
a=floorid:2 m-stream:11
m=audio 50002 RTP/AVP 0
a=label:10
m=video 50004 RTP/AVP 31
a=label:11
```

[¶](#section-7.2-2){.pilcrow}
:::

It is possible that an endpoint (e.g., a browser) sends an offerless
INVITE to the server. In such cases, the server will act as SDP offerer.
The server [MUST]{.bcp14} assign the SDP \'setup\' attribute with a
value of \'passive\'. The server [MUST]{.bcp14} have a \'websocket-uri\'
attribute with a \'ws-URI\' or \'wss-URI\' value depending on whether
the server wishes to use WebSocket or secure WebSocket. This attribute
[MUST]{.bcp14} follow the syntax defined in [Section
3](https://www.rfc-editor.org/rfc/rfc8124#section-3){.relref} of
\[[RFC8124](#RFC8124){.xref}\]. For BFCP application, the \"proto\"
value in the \"m=\" line [MUST]{.bcp14} be \'TCP/WSS/BFCP\' if WebSocket
is over TLS, else it [MUST]{.bcp14} be
\'TCP/WS/BFCP\'.[¶](#section-7.2-3){.pilcrow}
:::
:::
:::

::: {#authentication}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Authentication](#name-authentication){.section-name .selfRef} {#name-authentication}

[Section 9](https://www.rfc-editor.org/rfc/rfc8855#section-9){.relref}
of \[[RFC8855](#RFC8855){.xref}\] states that BFCP clients and floor
control servers [SHOULD]{.bcp14} authenticate each other prior to
accepting messages, and RECOMMENDS that mutual TLS/DTLS authentication
be used. However, browser-based WebSocket clients have no control over
the use of TLS in the WebSocket API \[[WS-API](#WS-API){.xref}\], so it
is [RECOMMENDED]{.bcp14} that standard web-based methods for client and
server authentication are used, as follows.[¶](#section-8-1){.pilcrow}

When a BFCP WebSocket client connects to a BFCP WebSocket server, it
[SHOULD]{.bcp14} use TCP/WSS as its transport. If the signaling or
control protocol traffic used to set up the conference is authenticated
and confidentiality and integrity protected, secure WebSocket (WSS)
[MUST]{.bcp14} be used, and the floor control server [MUST]{.bcp14}
authenticate the client. The WebSocket client [MUST]{.bcp14} follow the
procedures in \[[RFC7525](#RFC7525){.xref}\] while setting up TLS
connection with the WebSocket server. The BFCP client validates the
server by means of verifying the server certificate. This means the
\'websocket-uri\' value [MUST]{.bcp14} contain a hostname. The
verification process does not use
\"a=fingerprint\".[¶](#section-8-2){.pilcrow}

A floor control server that receives a message over TCP/WS can mandate
the use of TCP/WSS by generating an Error message, as described in
[Section
13.8](https://www.rfc-editor.org/rfc/rfc8855#section-13.8){.relref} of
\[[RFC8855](#RFC8855){.xref}\], with an error code with a value of 9
(Use TLS).[¶](#section-8-3){.pilcrow}

Prior to sending BFCP requests, a BFCP WebSocket client connects to a
BFCP WebSocket server and performs the connection handshake. As
described in [Section 4.1](#handshake){.xref}, the handshake procedure
involves an HTTP GET method request from the client and a response from
the server including an HTTP 101 status code.[¶](#section-8-4){.pilcrow}

In order to authorize the WebSocket connection, the BFCP WebSocket
server [SHOULD]{.bcp14} inspect any cookie header fields
\[[RFC6265](#RFC6265){.xref}\] present in the HTTP GET request. For many
web applications, the value of such a cookie is provided by the web
server once the user has authenticated themselves to the web server,
which could be done by many existing mechanisms. As an alternative
method, the BFCP WebSocket server could request HTTP authentication by
replying to the client\'s GET method request with an HTTP 401 status
code. The WebSocket protocol \[[RFC6455](#RFC6455){.xref}\] covers this
usage in Section
[4.1](https://www.rfc-editor.org/rfc/rfc6455#section-4.1){.relref}:[¶](#section-8-5){.pilcrow}

-   [If the status code received from the server is not 101, the
    WebSocket client stack handles the response per HTTP
    \[[RFC7230](#RFC7230){.xref}\] procedures; in particular, the client
    might perform authentication if it receives an 401 status code. The
    WebSocket clients are vulnerable to the attacks of basic
    authentication (mentioned in [Section
    4](https://www.rfc-editor.org/rfc/rfc7617#section-4){.relref} of
    \[[RFC7617](#RFC7617){.xref}\]) and digest authentication (mentioned
    in [Section
    5](https://www.rfc-editor.org/rfc/rfc7616#section-5){.relref} of
    \[[RFC7616](#RFC7616){.xref}\]). To overcome some of these
    weaknesses, WebSocket clients can use the HTTP Origin-Bound
    Authentication (HOBA) mechanism mentioned in
    \[[RFC7486](#RFC7486){.xref}\], for
    example.[¶](#section-8-6.1){.pilcrow}]{#section-8-6.1}
:::
:::

::: {#security_considerations}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Considerations from \[[RFC8855](#RFC8855){.xref}\],
\[[RFC8856](#RFC8856){.xref}\], and \[[RFC5018](#RFC5018){.xref}\]
apply.[¶](#section-9-1){.pilcrow}

BFCP relies on lower-layer security mechanisms to provide replay and
integrity protection and confidentiality. It is [RECOMMENDED]{.bcp14}
that the BFCP traffic transported over WebSocket be protected by using a
Secure WebSocket connection (using TLS \[[RFC8446](#RFC8446){.xref}\]
over TCP). The security considerations in \[[RFC6455](#RFC6455){.xref}\]
apply for BFCP over WebSocket as well. The security model here is a
typical webserver-client model where the client validates the server
certificate and then connects to the server. [Section
8](#authentication){.xref} describes the authentication procedures
between client and server.[¶](#section-9-2){.pilcrow}

When using BFCP over WebSocket, the security mechanisms defined in
\[[RFC8855](#RFC8855){.xref}\] are not used. Instead, the application is
required to build and rely on the security mechanisms in
\[[RFC6455](#RFC6455){.xref}\].[¶](#section-9-3){.pilcrow}

The rest of this section analyses the threats described in [Section
14](https://www.rfc-editor.org/rfc/rfc8855#section-14){.relref} of
\[[RFC8855](#RFC8855){.xref}\] when WebSocket is used as a transport
protocol for BFCP.[¶](#section-9-4){.pilcrow}

An attacker attempting to impersonate a floor control server is avoided
by having servers accept BFCP messages over WSS only. As with any other
web connection, the clients will verify the server\'s certificate. The
BFCP WebSocket client [MUST]{.bcp14} follow the procedures in
\[[RFC7525](#RFC7525){.xref}\] (including hostname verification as per
[Section
6.1](https://www.rfc-editor.org/rfc/rfc7525#section-6.1){.relref} of
\[[RFC7525](#RFC7525){.xref}\]) while setting up a TLS connection with
floor control WebSocket server.[¶](#section-9-5){.pilcrow}

An attacker attempting to impersonate a floor control client is avoided
by having servers accept BFCP messages over WSS only. As described in
[Section
10.5](https://www.rfc-editor.org/rfc/rfc6455#section-10.5){.relref} of
\[[RFC6455](#RFC6455){.xref}\] the floor control server can use any
client authentication mechanism and follow the steps in [Section
8](#authentication){.xref} of this document.[¶](#section-9-6){.pilcrow}

Attackers may attempt to modify messages exchanged by a client and a
floor control server. This can be prevented by having WSS between client
and server.[¶](#section-9-7){.pilcrow}

An attacker trying to replay the messages is prevented by having floor
control servers check that messages arriving over a given WSS connection
use an authorized user ID.[¶](#section-9-8){.pilcrow}

Attackers may eavesdrop on the network to get access to confidential
information between the floor control server and a client (e.g., why a
floor request was denied). In order to ensure that BFCP users are
getting the level of protection that they would get using BFCP directly,
applications need to have a way to control the WebSocket libraries to
use encryption algorithms specified in [Section
7](https://www.rfc-editor.org/rfc/rfc8855#section-7){.relref} of
\[[RFC8855](#RFC8855){.xref}\]. Since the WebSocket API
\[[WS-API](#WS-API){.xref}\] does not have a way to allow an application
to select the encryption algorithm to be used, the protection level
provided when WSS is used is limited to the underlying TLS algorithm
used by the WebSocket library.[¶](#section-9-9){.pilcrow}
:::
:::

::: {#iana_considerations}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Registration of the WebSocket BFCP Subprotocol](#name-registration-of-the-websock){.section-name .selfRef} {#name-registration-of-the-websock}

IANA has registered the WebSocket BFCP subprotocol under the \"WebSocket
Subprotocol Name Registry\" as follows:[¶](#section-10.1-1){.pilcrow}

[]{.break}

Subprotocol Identifier:
:   bfcp[¶](#section-10.1-2.2){.pilcrow}
:   

Subprotocol Common Name:
:   WebSocket Transport for BFCP (Binary Floor Control
    Protocol)[¶](#section-10.1-2.4){.pilcrow}
:   

Subprotocol Definition:
:   RFC 8857[¶](#section-10.1-2.6){.pilcrow}
:   
:::

::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Registration of the \'TCP/WS/BFCP\' and \'TCP/WSS/BFCP\' SDP \"proto\" Values](#name-registration-of-the-tcp-ws-){.section-name .selfRef} {#name-registration-of-the-tcp-ws-}

This document defines two new values for the SDP \"proto\" subregistry
within the \"Session Description Protocol (SDP) Parameters\" registry.
The resulting entries are shown in [Table
1](#IANA_SDP_proto){.xref}:[¶](#section-10.2-1){.pilcrow}

[]{#name-values-for-the-sdp-proto-fi}

::: {#IANA_SDP_proto}
  Value          Reference
  -------------- -----------
  TCP/WS/BFCP    RFC 8857
  TCP/WSS/BFCP   RFC 8857

  : [Table 1](#table-1){.selfRef}: [Values for the SDP \"proto\"
  Field](#name-values-for-the-sdp-proto-fi){.selfRef}
:::
:::
:::
:::

::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-11.1 .section}
### [11.1.](#section-11.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4145\]
:   [Yon, D.]{.refAuthor}[ and G. Camarillo]{.refAuthor}, [\"TCP-Based
    Media Transport in the Session Description Protocol
    (SDP)\"]{.refTitle}, [RFC 4145]{.seriesInfo}, [DOI
    10.17487/RFC4145]{.seriesInfo}, September 2005,
    \<<https://www.rfc-editor.org/info/rfc4145>\>.
:   

\[RFC5018\]
:   [Camarillo, G.]{.refAuthor}, [\"Connection Establishment in the
    Binary Floor Control Protocol (BFCP)\"]{.refTitle}, [RFC
    5018]{.seriesInfo}, [DOI 10.17487/RFC5018]{.seriesInfo}, September
    2007, \<<https://www.rfc-editor.org/info/rfc5018>\>.
:   

\[RFC6455\]
:   [Fette, I.]{.refAuthor}[ and A. Melnikov]{.refAuthor}, [\"The
    WebSocket Protocol\"]{.refTitle}, [RFC 6455]{.seriesInfo}, [DOI
    10.17487/RFC6455]{.seriesInfo}, December 2011,
    \<<https://www.rfc-editor.org/info/rfc6455>\>.
:   

\[RFC7525\]
:   [Sheffer, Y.]{.refAuthor}[, Holz, R.]{.refAuthor}[, and P.
    Saint-Andre]{.refAuthor}, [\"Recommendations for Secure Use of
    Transport Layer Security (TLS) and Datagram Transport Layer Security
    (DTLS)\"]{.refTitle}, [BCP 195]{.seriesInfo}, [RFC
    7525]{.seriesInfo}, [DOI 10.17487/RFC7525]{.seriesInfo}, May 2015,
    \<<https://www.rfc-editor.org/info/rfc7525>\>.
:   

\[RFC8124\]
:   [Ravindranath, R.]{.refAuthor}[ and G. Salgueiro]{.refAuthor},
    [\"The Session Description Protocol (SDP) WebSocket Connection URI
    Attribute\"]{.refTitle}, [RFC 8124]{.seriesInfo}, [DOI
    10.17487/RFC8124]{.seriesInfo}, March 2017,
    \<<https://www.rfc-editor.org/info/rfc8124>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8855\]
:   [Camarillo, G.]{.refAuthor}[, Drage, K.]{.refAuthor}[,
    Kristensen, T.]{.refAuthor}[, Ott, J.]{.refAuthor}[, and C.
    Eckel]{.refAuthor}, [\"The Binary Floor Control Protocol
    (BFCP)\"]{.refTitle}, [RFC 8855]{.seriesInfo}, [DOI
    10.17487/RFC8855]{.seriesInfo}, January 2021,
    \<<https://www.rfc-editor.org/info/rfc8855>\>.
:   

\[RFC8856\]
:   [Camarillo, G.]{.refAuthor}[, Kristensen, T.]{.refAuthor}[, and C.
    Holmberg]{.refAuthor}, [\"Session Description Protocol (SDP) Format
    for Binary Floor Control Protocol (BFCP) Streams\"]{.refTitle}, [RFC
    8856]{.seriesInfo}, [DOI 10.17487/RFC8856]{.seriesInfo}, January
    2021, \<<https://www.rfc-editor.org/info/rfc8856>\>.
:   
:::

::: {#section-11.2 .section}
### [11.2.](#section-11.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[RFC6265\]
:   [Barth, A.]{.refAuthor}, [\"HTTP State Management
    Mechanism\"]{.refTitle}, [RFC 6265]{.seriesInfo}, [DOI
    10.17487/RFC6265]{.seriesInfo}, April 2011,
    \<<https://www.rfc-editor.org/info/rfc6265>\>.
:   

\[RFC7230\]
:   [Fielding, R., Ed.]{.refAuthor}[ and J. Reschke, Ed.]{.refAuthor},
    [\"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and
    Routing\"]{.refTitle}, [RFC 7230]{.seriesInfo}, [DOI
    10.17487/RFC7230]{.seriesInfo}, June 2014,
    \<<https://www.rfc-editor.org/info/rfc7230>\>.
:   

\[RFC7486\]
:   [Farrell, S.]{.refAuthor}[, Hoffman, P.]{.refAuthor}[, and M.
    Thomas]{.refAuthor}, [\"HTTP Origin-Bound Authentication
    (HOBA)\"]{.refTitle}, [RFC 7486]{.seriesInfo}, [DOI
    10.17487/RFC7486]{.seriesInfo}, March 2015,
    \<<https://www.rfc-editor.org/info/rfc7486>\>.
:   

\[RFC7616\]
:   [Shekh-Yusef, R., Ed.]{.refAuthor}[, Ahrens, D.]{.refAuthor}[,
    and S. Bremer]{.refAuthor}, [\"HTTP Digest Access
    Authentication\"]{.refTitle}, [RFC 7616]{.seriesInfo}, [DOI
    10.17487/RFC7616]{.seriesInfo}, September 2015,
    \<<https://www.rfc-editor.org/info/rfc7616>\>.
:   

\[RFC7617\]
:   [Reschke, J.]{.refAuthor}, [\"The \'Basic\' HTTP Authentication
    Scheme\"]{.refTitle}, [RFC 7617]{.seriesInfo}, [DOI
    10.17487/RFC7617]{.seriesInfo}, September 2015,
    \<<https://www.rfc-editor.org/info/rfc7617>\>.
:   

\[RFC8446\]
:   [Rescorla, E.]{.refAuthor}, [\"The Transport Layer Security (TLS)
    Protocol Version 1.3\"]{.refTitle}, [RFC 8446]{.seriesInfo}, [DOI
    10.17487/RFC8446]{.seriesInfo}, August 2018,
    \<<https://www.rfc-editor.org/info/rfc8446>\>.
:   

\[WS-API\]
:   [Hickson, I., Ed.]{.refAuthor}, [\"The WebSocket API\"]{.refTitle},
    [W3C Candidate Recommendation, September 2012]{.refContent},
    \<<https://www.w3.org/TR/2012/CR-websockets-20120920/>\>.
:   
:::
:::

::: {#acknowledgements}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors want to thank [Robert Welbourn]{.contact-name} from Acme
Packet and [Sergio Garcia Murillo]{.contact-name}, who made significant
contributions to the first draft version of this document. This work
benefited from the thorough review and constructive comments of [Charles
Eckel]{.contact-name}, [Christer Holmberg]{.contact-name}, [Paul
Kyzivat]{.contact-name}, [Dan Wing]{.contact-name}, and [Alissa
Cooper]{.contact-name}. Thanks to [Bert Wijnen]{.contact-name}, [Robert
Sparks]{.contact-name}, and [Mirja Kühlewind]{.contact-name} for their
reviews and comments on this
document.[¶](#section-appendix.a-1){.pilcrow}

Thanks to [Spencer Dawkins]{.contact-name}, [Ben
Campbell]{.contact-name}, [Kathleen Moriarty]{.contact-name}, [Alexey
Melnikov]{.contact-name}, [Jari Arkko]{.contact-name}, and [Stephen
Farrell]{.contact-name} for their feedback and comments during IESG
reviews.[¶](#section-appendix.a-2){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.b .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Victor Pascual]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nokia]{.org}
:::

::: {.left dir="auto"}
[Barcelona]{.locality}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: email
Email: <victor.pascual_avila@nokia.com>
:::

::: {.left dir="auto"}
[Antón Román]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Quobis]{.org}
:::

::: {.left dir="auto"}
[Pol. Ind. A Granxa, Casa de Pedra]{.extended-address}
:::

::: {.left dir="auto"}
[36475]{.postal-code} [O Porriño]{.locality}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: email
Email: <anton.roman@quobis.com>
:::

::: {.left dir="auto"}
[Stéphane Cazeaux]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Orange]{.org}
:::

::: {.left dir="auto"}
[42 rue des Coutures]{.street-address}
:::

::: {.left dir="auto"}
[14000]{.postal-code} [Caen]{.locality}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <stephane.cazeaux@orange.com>
:::

::: {.left dir="auto"}
[Gonzalo Salgueiro]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[7200-12 Kit Creek Road]{.street-address}
:::

::: {.left dir="auto"}
[Research Triangle Park]{.locality}, [NC]{.region} [27709]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <gsalguei@cisco.com>
:::

::: {.left dir="auto"}
[Ram Mohan Ravindranath]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Cessna Business Park\
Kadabeesanahalli Village, Varthur Hobli,]{.extended-address}
:::

::: {.left dir="auto"}
[Sarjapur-Marathahalli Outer Ring Road]{.street-address}
:::

::: {.left dir="auto"}
[Bangalore]{.locality} [560103]{.postal-code}
:::

::: {.left dir="auto"}
[Karnataka]{.region}
:::

::: {.left dir="auto"}
[India]{.country-name}
:::

::: email
Email: <rmohanr@cisco.com>
:::
:::
:::
