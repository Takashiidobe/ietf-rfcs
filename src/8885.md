  RFC 8885            PMIPv6 DMM and DLIF   October 2020
  ------------------- --------------------- --------------
  Bernardos, et al.   Experimental          \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8885](https://www.rfc-editor.org/rfc/rfc8885){.eref}

Category:
:   Experimental

Published:
:   October 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    CJ. Bernardos
    :::

    ::: org
    UC3M
    :::
    :::

    ::: author
    ::: author-name
    A. de la Oliva
    :::

    ::: org
    UC3M
    :::
    :::

    ::: author
    ::: author-name
    F. Giust
    :::

    ::: org
    Athonet
    :::
    :::

    ::: author
    ::: author-name
    JC. Zúñiga
    :::

    ::: org
    SIGFOX
    :::
    :::

    ::: author
    ::: author-name
    A. Mourad
    :::

    ::: org
    InterDigital
    :::
    :::
:::

# RFC 8885 {#rfcnum}

# Proxy Mobile IPv6 Extensions for Distributed Mobility Management {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Distributed Mobility Management solutions allow networks to be set up in
such a way that traffic is distributed optimally and centrally deployed
anchors are not relied upon to provide IP mobility
support.[¶](#section-abstract-1){.pilcrow}

There are many different approaches to address Distributed Mobility
Management \-- for example, extending network-based mobility protocols
(like Proxy Mobile IPv6) or client-based mobility protocols (like Mobile
IPv6), among others. This document follows the former approach and
proposes a solution based on Proxy Mobile IPv6, in which mobility
sessions are anchored at the last IP hop router (called the mobility
anchor and access router). The mobility anchor and access router is an
enhanced access router that is also able to operate as a local mobility
anchor or mobility access gateway on a per-prefix basis. The document
focuses on the required extensions to effectively support the
simultaneous anchoring several flows at different distributed
gateways.[¶](#section-abstract-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for examination, experimental implementation, and
evaluation.[¶](#section-boilerplate.1-1){.pilcrow}

This document defines an Experimental Protocol for the Internet
community. This document is a product of the Internet Engineering Task
Force (IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Not all documents approved
by the IESG are candidates for any level of Internet Standard; see
Section 2 of RFC 7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8885>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.1.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [PMIPv6 DMM
    Extensions](#name-pmipv6-dmm-extensions){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Initial
        Registration](#name-initial-registration){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [The CMD as PBU/PBA
        Relay](#name-the-cmd-as-pbu-pba-relay){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [The CMD as MAAR
        Locator](#name-the-cmd-as-maar-locator){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [The CMD as PBU/PBA
        Proxy](#name-the-cmd-as-pbu-pba-proxy){.xref}[¶](#section-toc.1-1.3.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [De-registration](#name-de-registration){.xref}[¶](#section-toc.1-1.3.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.6}
        [3.6](#section-3.6){.xref}.  [Retransmissions and Rate
        Limiting](#name-retransmissions-and-rate-li){.xref}[¶](#section-toc.1-1.3.2.6.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.7}
        [3.7](#section-3.7){.xref}.  [The Distributed Logical Interface
        (DLIF)
        Concept](#name-the-distributed-logical-int){.xref}[¶](#section-toc.1-1.3.2.7.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Message
    Format](#name-message-format){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Proxy Binding
        Update](#name-proxy-binding-update){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Proxy Binding
        Acknowledgement](#name-proxy-binding-acknowledgeme){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Anchored Prefix
        Option](#name-anchored-prefix-option){.xref}[¶](#section-toc.1-1.4.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [Local Prefix
        Option](#name-local-prefix-option){.xref}[¶](#section-toc.1-1.4.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [Previous MAAR
        Option](#name-previous-maar-option){.xref}[¶](#section-toc.1-1.4.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [Serving MAAR
        Option](#name-serving-maar-option){.xref}[¶](#section-toc.1-1.4.2.6.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.7}
        [4.7](#section-4.7){.xref}.  [DLIF Link-Local Address
        Option](#name-dlif-link-local-address-opt){.xref}[¶](#section-toc.1-1.4.2.7.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.8}
        [4.8](#section-4.8){.xref}.  [DLIF Link-Layer Address
        Option](#name-dlif-link-layer-address-opt){.xref}[¶](#section-toc.1-1.4.2.8.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [](#section-appendix.b){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::
:::
:::

::: {#sec_introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The Distributed Mobility Management (DMM) paradigm aims at minimizing
the impact of currently standardized mobility management solutions,
which are centralized (at least to a considerable extent)
\[[RFC7333](#RFC7333){.xref}\].[¶](#section-1-1){.pilcrow}

The two most relevant examples of current IP mobility solutions are
Mobile IPv6 \[[RFC6275](#RFC6275){.xref}\] and Proxy Mobile IPv6
(PMIPv6) \[[RFC5213](#RFC5213){.xref}\]. These solutions offer mobility
support at the cost of handling operations at a cardinal point (i.e.,
the mobility anchor) and burdening it with data forwarding and control
mechanisms for a large number of users. The mobility anchor is the home
agent for Mobile IPv6 and the local mobility anchor for PMIPv6. As
stated in \[[RFC7333](#RFC7333){.xref}\], centralized mobility solutions
are prone to several problems and limitations: longer (sub-optimal)
routing paths, scalability problems, signaling overhead (and most likely
a longer associated handover latency), more complex network deployment,
higher vulnerability due to the existence of a potential single point of
failure, and lack of granularity of the mobility management service
(i.e., mobility is offered on a per-node basis because it is not
possible to define finer granularity policies, for example, on a
per-application basis).[¶](#section-1-2){.pilcrow}

The purpose of DMM is to overcome the limitations of the traditional
centralized mobility management \[[RFC7333](#RFC7333){.xref}\]
\[[RFC7429](#RFC7429){.xref}\]; the main concept behind DMM solutions is
indeed bringing the mobility anchor closer to the mobile node (MN).
Following this idea, the central anchor is moved to the edge of the
network and is deployed in the default gateway of the MN. That is, the
first elements that provide IP connectivity to a set of MNs are also the
mobility managers for those MNs. In this document, we call these
entities Mobility Anchors and Access Routers
(MAARs).[¶](#section-1-3){.pilcrow}

This document focuses on network-based DMM; hence, the starting point is
making PMIPv6 work in a distributed manner
\[[RFC7429](#RFC7429){.xref}\]. Mobility is handled by the network
without the MN\'s involvement. But differently from PMIPv6, when the MN
moves from one access network to another, the router anchoring the MN\'s
address may change, hence requiring signaling between the anchors to
retrieve the MN\'s previous location(s). Also, a key aspect of
network-based DMM is that a prefix pool belongs exclusively to each MAAR
in the sense that those prefixes are assigned by the MAAR to the MNs
attached to it and are routable at that MAAR. Prefixes are assigned to
MNs attached to a MAAR at that time, but remain with those MNs as
mobility occurs, remaining always routable at that MAAR as well as
towards the MN itself.[¶](#section-1-4){.pilcrow}

We consider partially distributed schemes, where only the data plane is
distributed among access routers similar to mobile access gateways
(MAGs), whereas the control plane is kept centralized towards a cardinal
node (used as an information store), which is discharged from any route
management and MN\'s data forwarding tasks.[¶](#section-1-5){.pilcrow}

::: {#terms}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.1-1){.pilcrow}
:::
:::
:::
:::

::: {#sec_terminology}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The following terms used in this document are defined in the PMIPv6
specification \[[RFC5213](#RFC5213){.xref}\]:[¶](#section-2-1){.pilcrow}

-   [[]{.break}]{#section-2-2.1}

    BCE:
    :   Binding Cache Entry[¶](#section-2-2.1.1.2){.pilcrow}
    :   

    LMA:
    :   Local Mobility Anchor[¶](#section-2-2.1.1.4){.pilcrow}
    :   

    MAG:
    :   Mobile Access Gateway[¶](#section-2-2.1.1.6){.pilcrow}
    :   

    MN:
    :   Mobile Node[¶](#section-2-2.1.1.8){.pilcrow}
    :   

    P-CoA:
    :   Proxy Care-of Address[¶](#section-2-2.1.1.10){.pilcrow}
    :   

    PBA:
    :   Proxy Binding Acknowledgement[¶](#section-2-2.1.1.12){.pilcrow}
    :   

    PBU:
    :   Proxy Binding Update[¶](#section-2-2.1.1.14){.pilcrow}
    :   

The following terms used in this document are defined in the Mobile IPv6
(MIPv6) specification
\[[RFC6275](#RFC6275){.xref}\]:[¶](#section-2-3){.pilcrow}

-   [[]{.break}]{#section-2-4.1}

    CN:
    :   Correspondent Node[¶](#section-2-4.1.1.2){.pilcrow}
    :   

The following terms are used in this
document:[¶](#section-2-5){.pilcrow}

[]{.break}

Home Control-Plane Anchor (Home-CPA or H-CPA):
:   The Home-CPA function hosts the MN\'s mobility session. There can be
    more than one mobility session for an MN, and those sessions may be
    anchored on the same or different Home-CPAs. The Home-CPA will
    interface with the Home-DPA for managing the forwarding
    state.[¶](#section-2-6.2){.pilcrow}
:   

Home Data Plane Anchor (Home-DPA or H-DPA):
:   The Home-DPA is the topological anchor for the MN\'s IP addresses
    and/or prefixes. The Home-DPA is chosen by the Home-CPA on a session
    basis. The Home-DPA is in the forwarding path for all the MN\'s IP
    traffic.[¶](#section-2-6.4){.pilcrow}
:   

Access Control Plane Node (Access-CPN or A-CPN):
:   The Access-CPN is responsible for interfacing with the MN\'s
    Home-CPA and the Access-DPN. The Access-CPN has a protocol interface
    to the Home-CPA.[¶](#section-2-6.6){.pilcrow}
:   

Access Data Plane Node (Access-DPN or A-DPN):
:   The Access-DPN function is hosted on the first-hop router where the
    MN is attached. This function is not hosted on a Layer 2 (L2)
    bridging device such as an eNode(B) or Access
    Point.[¶](#section-2-6.8){.pilcrow}
:   

The following terms are defined and used in this
document:[¶](#section-2-7){.pilcrow}

[]{.break}

MAAR (Mobility Anchor and Access Router):
:   First-hop router where the MNs attach. It also plays the role of
    mobility manager for the IPv6 prefixes it anchors, running the
    functionalities of PMIP\'s MAG and LMA. Depending on the prefix, it
    plays the role of Access-DPN, Home-DPA, and
    Access-CPN.[¶](#section-2-8.2){.pilcrow}
:   

CMD (Central Mobility Database):
:   The node that stores the BCEs allocated for the MNs in the mobility
    domain. It plays the role of Home-CPA.[¶](#section-2-8.4){.pilcrow}
:   

P-MAAR (Previous MAAR):
:   When an MN moves to a new point of attachment, a new MAAR might be
    allocated as its anchor point for future IPv6 prefixes. The MAAR
    that served the MN prior to new attachment becomes the P-MAAR. It is
    still the anchor point for the IPv6 prefixes it had allocated to the
    MN in the past and serves as the Home-DPA for flows using these
    prefixes. There might be several P-MAARs serving an MN in cases when
    the MN is frequently switching points of attachment while
    maintaining long-lasting flows.[¶](#section-2-8.6){.pilcrow}
:   

S-MAAR (Serving MAAR):
:   The MAAR to which the MN is currently attached. Depending on the
    prefix, it plays the role of Access-DPN, Home-DPA, and
    Access-CPN.[¶](#section-2-8.8){.pilcrow}
:   

Anchoring MAAR:
:   A MAAR anchoring an IPv6 prefix used by an
    MN.[¶](#section-2-8.10){.pilcrow}
:   

DLIF (Distributed Logical Interface):
:   It is a logical interface at the IP stack of the MAAR. For each
    active prefix used by the MN, the S-MAAR has a DLIF configured
    (associated with each MAAR still anchoring flows). In this way, an
    S-MAAR exposes itself towards each MN as multiple routers, one as
    itself and one per P-MAAR.[¶](#section-2-8.12){.pilcrow}
:   
:::
:::

::: {#sec_pmipv6_based}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [PMIPv6 DMM Extensions](#name-pmipv6-dmm-extensions){.section-name .selfRef} {#name-pmipv6-dmm-extensions}

The solution consists of decoupling the entities that participate in the
data and the control planes: the data plane becomes distributed and
managed by the MAARs near the edge of the network, while the control
plane, besides those on the MAARs, relies on a central entity called the
Central Mobility Database (CMD). In the proposed architecture, the
hierarchy present in PMIPv6 between LMA and MAG is preserved but with
the following substantial variations:[¶](#section-3-1){.pilcrow}

-   [The LMA is discharged from the data forwarding role; only the
    Binding Cache and its management operations are maintained. Hence,
    the LMA is renamed as \"CMD\", which is therefore a Home-CPA. Also,
    the CMD is able to send and parse both PBU and PBA
    messages.[¶](#section-3-2.1){.pilcrow}]{#section-3-2.1}
-   [The MAG is enriched with the LMA functionalities, hence the name
    Mobility Anchor and Access Router (MAAR). It maintains a local
    Binding Cache for the MNs that are attached to it, and it is able to
    send and parse PBU and PBA
    messages.[¶](#section-3-2.2){.pilcrow}]{#section-3-2.2}
-   [The Binding Cache will be extended to include information regarding
    P-MAARs where the MN was anchored and still retains active data
    sessions.[¶](#section-3-2.3){.pilcrow}]{#section-3-2.3}
-   [Each MAAR has a unique set of global prefixes (which are
    configurable) that can be allocated by the MAAR to the MNs but must
    be exclusive to that MAAR, i.e., no other MAAR can allocate the same
    prefixes.[¶](#section-3-2.4){.pilcrow}]{#section-3-2.4}

The MAARs leverage the CMD to access and update information related to
the MNs, which is stored as mobility sessions; hence, a centralized node
maintains a global view of the network status. The CMD is queried
whenever an MN is detected joining/leaving the mobility domain. It might
be a fresh attachment, a detachment, or a handover, but as MAARs are not
aware of past information related to a mobility session, they contact
the CMD to retrieve the data of interest and eventually take the
appropriate action. The procedure adopted for the query and the message
exchange sequence might vary to optimize the update latency and/or the
signaling overhead. Here, one method for the initial registration and
three different approaches for updating the mobility sessions using PBUs
and PBAs are presented. Each approach assigns a different role to the
CMD:[¶](#section-3-3){.pilcrow}

-   [The CMD is a PBU/PBA
    relay;[¶](#section-3-4.1){.pilcrow}]{#section-3-4.1}
-   [The CMD is only a MAAR
    locator;[¶](#section-3-4.2){.pilcrow}]{#section-3-4.2}
-   [The CMD is a PBU/PBA
    proxy.[¶](#section-3-4.3){.pilcrow}]{#section-3-4.3}

The solution described in this document allows per-prefix anchoring
decisions \-- for example, to support the anchoring of some flows at a
central Home-DPA (like a traditional LMA) or to enable an application to
switch to the locally anchored prefix to gain route optimization, as
indicated in \[[RFC8563](#RFC8563){.xref}\]. This type of per-prefix
treatment would potentially require additional extensions to the MAARs
and signaling between the MAARs and the MNs to convey the per-flow
anchor preference (central, distributed), which are not covered in this
document.[¶](#section-3-5){.pilcrow}

Note that an MN may move across different MAARs, which might result in
several P-MAARs existing at a given moment of time, each of them
anchoring a different prefix used by the MN.[¶](#section-3-6){.pilcrow}

::: {#subsec_init}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Initial Registration](#name-initial-registration){.section-name .selfRef} {#name-initial-registration}

Initial registration is performed when an MN attaches to a network for
the first time (rather than attaching to a new network after moving from
a previous one).[¶](#section-3.1-1){.pilcrow}

In this description (shown in [Figure 1](#fig_DMM1){.xref}), it is
assumed that:[¶](#section-3.1-2){.pilcrow}

1.  [The MN is attaching to
    MAAR1.[¶](#section-3.1-3.1){.pilcrow}]{#section-3.1-3.1}
2.  [The MN is authorized to attach to the
    network.[¶](#section-3.1-3.2){.pilcrow}]{#section-3.1-3.2}

Upon MN attachment, the following operations take
place:[¶](#section-3.1-4){.pilcrow}

1.  [MAAR1 assigns a global IPv6 prefix from its own prefix pool to the
    MN (Pref1). It also stores this prefix (Pref1) in the locally
    allocated temporary
    BCE.[¶](#section-3.1-5.1){.pilcrow}]{#section-3.1-5.1}
2.  [MAAR1 sends a PBU \[[RFC5213](#RFC5213){.xref}\] with Pref1 and the
    MN\'s MN-ID to the
    CMD.[¶](#section-3.1-5.2){.pilcrow}]{#section-3.1-5.2}
3.  [Since this is an initial registration, the CMD stores a BCE
    containing the MN-ID, Pref1, and MAAR1\'s address (as a Proxy-CoA)
    as the primary
    fields.[¶](#section-3.1-5.3){.pilcrow}]{#section-3.1-5.3}
4.  [The CMD replies with a PBA with the usual options defined in PMIPv6
    \[[RFC5213](#RFC5213){.xref}\], meaning that the MN\'s registration
    is fresh and no past status is
    available.[¶](#section-3.1-5.4){.pilcrow}]{#section-3.1-5.4}
5.  [MAAR1 stores the BCE described in (1) and unicasts a Router
    Advertisement (RA) to the MN with
    Pref1.[¶](#section-3.1-5.5){.pilcrow}]{#section-3.1-5.5}
6.  [The MN uses Pref1 to configure an IPv6 address (IP1) (e.g., with
    stateless address autoconfiguration
    (SLAAC)).[¶](#section-3.1-5.6){.pilcrow}]{#section-3.1-5.6}

Note that:[¶](#section-3.1-6){.pilcrow}

1.  [Alternative IPv6 autoconfiguration mechanisms can also be used,
    though this document describes the SLAAC-based
    one.[¶](#section-3.1-7.1){.pilcrow}]{#section-3.1-7.1}
2.  [IP1 is routable at MAAR1 in the sense that it is on the path of
    packets addressed to the
    MN.[¶](#section-3.1-7.2){.pilcrow}]{#section-3.1-7.2}
3.  [MAAR1 acts as a plain router for packets destined to the MN as no
    encapsulation or special handling takes
    place.[¶](#section-3.1-7.3){.pilcrow}]{#section-3.1-7.3}

In the diagram shown in [Figure 1](#fig_DMM1){.xref} (and subsequent
diagrams), the flow of packets is presented using
\'\*\'.[¶](#section-3.1-8){.pilcrow}

[]{#name-first-attachment-to-the-net}

::: {#fig_DMM1}
::: {#section-3.1-9.1 .artwork .art-text .alignLeft}
      +-----+      +---+                +--+
      |MAAR1|      |CMD|                |CN|
      +-----+      +---+                +*-+
         |           |                   *
        MN           |                   *     +---+
      attach.        |               *****    _|CMD|_
    detection        |         flow1 *       / +-+-+ \
         |           |               *      /    |    \
     local BCE       |               *     /     |     \
     allocation      |               *    /      |      \
         |--- PBU -->|           +---*-+-'    +--+--+    `+-----+
         |          BCE          |   * |      |     |     |     |
         |        creation       |MAAR1+------+MAAR2+-----+MAAR3|
         |<-- PBA ---|           |   * |      |     |     |     |
     local BCE       |           +---*-+      +-----+     +-----+
     finalized       |               *
         |           |         Pref1 *
         |           |              +*-+
         |           |              |MN|
         |           |              +--+

      Operations sequence                  Packet flow
:::

[Figure 1](#figure-1){.selfRef}: [First Attachment to the
Network](#name-first-attachment-to-the-net){.selfRef}
:::

Note that the registration process does not change regardless of the
CMD\'s modes (relay, locator, or proxy) described in the following
sections. The procedure is depicted in [Figure
1](#fig_DMM1){.xref}.[¶](#section-3.1-10){.pilcrow}
:::
:::

::: {#subsec_relay}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [The CMD as PBU/PBA Relay](#name-the-cmd-as-pbu-pba-relay){.section-name .selfRef} {#name-the-cmd-as-pbu-pba-relay}

Upon MN mobility, if the CMD behaves as a PBU/PBA relay, the following
operations take place:[¶](#section-3.2-1){.pilcrow}

1.  [When the MN moves from its current point of attachment and attaches
    to MAAR2 (now the S-MAAR), MAAR2 reserves an IPv6 prefix (Pref2),
    stores a temporary BCE, and sends a PBU to the CMD for
    registration.[¶](#section-3.2-2.1){.pilcrow}]{#section-3.2-2.1}
2.  [Upon PBU reception and BC lookup, the CMD retrieves an already
    existing entry for the MN and binds the MN-ID to its former
    location; thus, the CMD forwards the PBU to the MAAR indicated as
    Proxy-CoA (MAAR1) and includes a new mobility option to communicate
    the S-MAAR\'s global address to MAAR1 (defined as the Serving MAAR
    option in [Section 4.6](#subsec_smaaropt){.xref}). The CMD updates
    the P-CoA field in the BCE related to the MN with the S-MAAR\'s
    address.[¶](#section-3.2-2.2){.pilcrow}]{#section-3.2-2.2}
3.  [Upon PBU reception, MAAR1 can install a tunnel on its side towards
    MAAR2 and the related routes for Pref1. Then MAAR1 replies to the
    CMD with a PBA (including the option mentioned before) to ensure
    that the new location has successfully changed. The PBA contains the
    prefix anchored at MAAR1 in the Home Network Prefix
    option.[¶](#section-3.2-2.3){.pilcrow}]{#section-3.2-2.3}
4.  [The CMD, after receiving the PBA, updates the BCE and populates an
    instance of the P-MAAR list. The P-MAAR list is an additional field
    on the BCE that contains an element for each P-MAAR involved in the
    MN\'s mobility session. The list element contains the P-MAAR\'s
    global address and the prefix it has delegated. Also, the CMD sends
    a PBA to the new S-MAAR, which contains the previous Proxy-CoA and
    the prefix anchored to it embedded into a new mobility option called
    the Previous MAAR option (defined in [Section
    4.5](#subsec_pmaaropt){.xref}). Then, upon PBA arrival, a
    bidirectional tunnel can be established between the two MAARs, and
    new routes are set appropriately to recover the IP flow(s) carrying
    Pref1.[¶](#section-3.2-2.4){.pilcrow}]{#section-3.2-2.4}
5.  [Now, packets destined for Pref1 are first received by MAAR1,
    encapsulated into the tunnel, and forwarded to MAAR2, which finally
    delivers them to their destination. In the uplink, when the MN
    transmits packets using Pref1 as a source address, they are sent to
    MAAR2 (as it is the MN\'s new default gateway) and then tunneled to
    MAAR1, which routes them towards the next hop to the destination.
    Conversely, packets carrying Pref2 are routed by MAAR2 without any
    special packet handling both for the uplink and
    downlink.[¶](#section-3.2-2.5){.pilcrow}]{#section-3.2-2.5}

[]{#name-scenario-after-a-handover-c}

::: {#fig_DMM2}
::: {#section-3.2-3.1 .artwork .art-text .alignLeft}
    +-----+      +---+      +-----+           +--+            +--+
    |MAAR1|      |CMD|      |MAAR2|           |CN|            |CN|
    +-----+      +---+      +-----+           +*-+            +*-+
       |           |           |               *               *
       |           |          MN               *     +---+     *
       |           |        attach.        *****    _|CMD|_    *
       |           |          det.   flow1 *       / +-+-+ \   *flow2
       |           |<-- PBU ---|           *      /    |    \  *
       |          BCE          |           *     /     | *******
       |        check+         |           *    /      | *    \
       |        update         |       +---*-+-'    +--+-*+    `+-----+
       |<-- PBU*---|           |       |   * |      |    *|     |     |
    route          |           |       |MAAR1|______|MAAR2+-----+MAAR3|
    update         |           |       |   **(______)**  *|     |     |
       |--- PBA*-->|           |       +-----+      +-*--*+     +-----+
       |         BCE           |                      *  *
       |        update         |                Pref1 *  *Pref2
       |           |--- PBA*-->|                     +*--*+
       |           |         route         ---move-->|*MN*|
       |           |         update                  +----+

          Operations sequence                  Data Packet flow
    PBU/PBA messages with * contain
         a new mobility option
:::

[Figure 2](#figure-2){.selfRef}: [Scenario after a Handover, CMD as
Relay](#name-scenario-after-a-handover-c){.selfRef}
:::

For MN\'s next movements, the process is repeated, but the number of
P-MAARs involved increases (according to the number of prefixes that the
MN wishes to maintain). Indeed, once the CMD receives the first PBU from
the new S-MAAR, it forwards copies of the PBU to all the P-MAARs
indicated in the BCE, namely the P-MAAR registered as the current P-CoA
(i.e., the MAAR prior to handover) plus the ones in the P-MAAR list.
Those P-MAARs reply with a PBA to the CMD, which aggregates all of the
PBAs into one PBA to notify the S-MAAR, which finally can establish the
tunnels with the P-MAARs.[¶](#section-3.2-4){.pilcrow}

It should be noted that this design separates the mobility management at
the prefix granularity, and it can be tuned in order to erase old
mobility sessions when not required, while the MN is reachable through
the latest prefix acquired. Moreover, the latency associated with the
mobility update is bound to the PBA sent by the furthest P-MAAR, in
terms of RTT, that takes the longest time to reach the CMD. The drawback
can be mitigated by introducing a timeout at the CMD, by which, after
its expiration, all the PBAs so far collected are transmitted, and the
remaining are sent later upon their arrival. Note that, in this case,
the S-MAAR might receive multiple PBAs from the CMD in response to a
PBU. The CMD [SHOULD]{.bcp14} follow the retransmissions and
rate-limiting considerations described in [Section
3.6](#sec_retransmissions){.xref}, especially when aggregating and
relaying PBAs.[¶](#section-3.2-5){.pilcrow}

When there are multiple P-MAARs, e.g., k MAARs, a single PBU received by
the CMD triggers k outgoing packets from a single incoming packet. This
may lead to packet bursts originating from the CMD, albeit to different
targets. Pacing mechanisms [MUST]{.bcp14} be introduced to avoid bursts
on the outgoing link.[¶](#section-3.2-6){.pilcrow}
:::
:::

::: {#subsec_locator}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [The CMD as MAAR Locator](#name-the-cmd-as-maar-locator){.section-name .selfRef} {#name-the-cmd-as-maar-locator}

The handover latency experienced in the approach shown before can be
reduced if the P-MAARs are allowed to directly signal their information
to the new S-MAAR. This procedure reflects what was described in
[Section 3.2](#subsec_relay){.xref} up to the moment the P-MAAR receives
the PBU with the Serving MAAR option. At that point, a P-MAAR is aware
of the new MN\'s location (because of the S-MAAR\'s address in the
Serving MAAR option), and, besides sending a PBA to the CMD, it also
sends a PBA to the S-MAAR, including the prefix it is anchoring. This
latter PBA does not need to include new options, as the prefix is
embedded in the Home Network Prefix (HNP) option and the P-MAAR\'s
address is taken from the message\'s source address. The CMD is released
from forwarding the PBA to the S-MAAR as the latter receives a copy
directly from the P-MAAR with the necessary information to build the
tunnels and set the appropriate routes. [Figure 3](#fig_DMM3){.xref}
illustrates the new message sequence. The data forwarding is
unaltered.[¶](#section-3.3-1){.pilcrow}

[]{#name-scenario-after-a-handover-cm}

::: {#fig_DMM3}
::: {#section-3.3-2.1 .artwork .art-text .alignLeft}
    +-----+      +---+      +-----+           +--+            +--+
    |MAAR1|      |CMD|      |MAAR2|           |CN|            |CN|
    +-----+      +---+      +-----+           +*-+            +*-+
       |           |           |               *               *
       |           |          MN               *     +---+     *
       |           |        attach.        *****    _|CMD|_    *
       |           |          det.   flow1 *       / +-+-+ \   *flow2
       |           |<-- PBU ---|           *      /    |    \  *
       |          BCE          |           *     /     | *******
       |        check+         |           *    /      | *    \
       |        update         |       +---*-+-'    +--+-*+    `+-----+
       |<-- PBU*---|           |       |   * |      |    *|     |     |
    route          |           |       |MAAR1|______|MAAR2+-----+MAAR3|
    update         |           |       |   **(______)**  *|     |     |
       |--------- PBA -------->|       +-----+      +-*--*+     +-----+
       |--- PBA*-->|         route                    *  *
       |          BCE        update             Pref1 *  *Pref2
       |         update        |                     +*--*+
       |           |           |           ---move-->|*MN*|
       |           |           |                     +----+

           Operations sequence                  Data Packet flow
    PBU/PBA messages with * contain
         a new mobility option
:::

[Figure 3](#figure-3){.selfRef}: [Scenario after a Handover, CMD as
Locator](#name-scenario-after-a-handover-cm){.selfRef}
:::
:::
:::

::: {#subsec_proxy}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [The CMD as PBU/PBA Proxy](#name-the-cmd-as-pbu-pba-proxy){.section-name .selfRef} {#name-the-cmd-as-pbu-pba-proxy}

A further enhancement of previous solutions can be achieved when the CMD
sends the PBA to the new S-MAAR before notifying the P-MAARs of the
location change. Indeed, when the CMD receives the PBU for the new
registration, it is already in possession of all the information that
the new S-MAAR requires to set up the tunnels and the routes. Thus, the
PBA is sent to the S-MAAR immediately after a PBU is received, including
the Previous MAAR option in this case. In parallel, a PBU is sent by the
CMD to the P-MAARs containing the Serving MAAR option to notify them
about the new MN\'s location so that they receive the information to
establish the tunnels and routes on their side. When P-MAARs complete
the update, they send a PBA to the CMD to indicate that the operation
has concluded and the information is updated in all network nodes. This
procedure is obtained from the first procedure rearranging the order of
the messages, but the parameters communicated are the same. This scheme
is depicted in [Figure 4](#fig_DMM4){.xref}, where, again, the data
forwarding is kept untouched.[¶](#section-3.4-1){.pilcrow}

[]{#name-scenario-after-a-handover-cmd}

::: {#fig_DMM4}
::: {#section-3.4-2.1 .artwork .art-text .alignLeft}
    +-----+      +---+      +-----+           +--+            +--+
    |MAAR1|      |CMD|      |MAAR2|           |CN|            |CN|
    +-----+      +---+      +-----+           +*-+            +*-+
       |           |           |               *               *
       |           |          MN               *     +---+     *
       |           |        attach.        *****    _|CMD|_    *
       |           |          det.   flow1 *       / +-+-+ \   *flow2
       |           |<-- PBU ---|           *      /    |    \  *
       |          BCE          |           *     /     | *******
       |        check+         |           *    /      | *    \
       |        update         |       +---*-+-'    +--+-*+    `+-----+
       |<-- PBU*---x--- PBA*-->|       |   * |      |    *|     |     |
    route          |         route     |MAAR1|______|MAAR2+-----+MAAR3|
    update         |         update    |   **(______)**  *|     |     |
       |--- PBA*-->|           |       +-----+      +-*--*+     +-----+
       |          BCE          |                      *  *
       |         update        |                Pref1 *  *Pref2
       |           |           |                     +*--*+
       |           |           |           ---move-->|*MN*|
       |           |           |                     +----+

           Operations sequence                 Data Packet flow
    PBU/PBA messages with * contain
         a new mobility option
:::

[Figure 4](#figure-4){.selfRef}: [Scenario after a Handover, CMD as
Proxy](#name-scenario-after-a-handover-cmd){.selfRef}
:::
:::
:::

::: {#subsec_dereg}
::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [De-registration](#name-de-registration){.section-name .selfRef} {#name-de-registration}

The de-registration mechanism devised for PMIPv6 cannot be used as is in
this solution because each MAAR handles an independent mobility session
(i.e., a single prefix or a set of prefixes) for a given MN, whereas the
aggregated session is stored at the CMD. Indeed, if a P-MAAR initiates a
de-registration procedure because the MN is no longer present on the
MAAR\'s access link, it removes the routing state for the prefix(es),
that would be deleted by the CMD as well, hence defeating any prefix
continuity attempt. The simplest approach to overcome this limitation is
to deny a P-MAAR to de-register a prefix, that is, allowing only an
S-MAAR to de-register the whole MN session. This can be achieved by
first removing any L2 detachment event so that de-registration is
triggered only when the binding lifetime expires, hence providing a
guard interval for the MN to connect to a new MAAR. Then, a change in
the MAAR operations is required, and at this stage, two possible
solutions can be deployed:[¶](#section-3.5-1){.pilcrow}

-   [A P-MAAR stops the BCE timer upon receiving a PBU from the CMD
    containing a \"Serving MAAR\" option. In this way, only the S-MAAR
    is allowed to de-register the mobility session, arguing that the MN
    definitely left the
    domain.[¶](#section-3.5-2.1){.pilcrow}]{#section-3.5-2.1}
-   [P-MAARs can, upon BCE expiry, send de-registration messages to the
    CMD, which, instead of acknowledging the message with a 0 lifetime,
    sends back a PBA with a non-zero lifetime, hence renewing the
    session if the MN is still connected to the
    domain.[¶](#section-3.5-2.2){.pilcrow}]{#section-3.5-2.2}
:::
:::

::: {#sec_retransmissions}
::: {#section-3.6 .section}
### [3.6.](#section-3.6){.section-number .selfRef} [Retransmissions and Rate Limiting](#name-retransmissions-and-rate-li){.section-name .selfRef} {#name-retransmissions-and-rate-li}

The node sending PBUs (the CMD or S-MAAR) [SHOULD]{.bcp14} make use of
the timeout to also deal with missing PBAs (to retransmit PBUs). The
INITIAL_BINDACK_TIMEOUT \[[RFC6275](#RFC6275){.xref}\] [SHOULD]{.bcp14}
be used for configuring the retransmission timer. The retransmissions by
the node [MUST]{.bcp14} use an exponential backoff process in which the
timeout period is doubled upon each retransmission until either the node
receives a response or the timeout period reaches the value
MAX_BINDACK_TIMEOUT \[[RFC6275](#RFC6275){.xref}\]. The node
[MAY]{.bcp14} continue to send these messages at this slower rate
indefinitely. The node [MUST NOT]{.bcp14} send PBU messages to a
particular node more than MAX_UPDATE_RATE times within a second
\[[RFC6275](#RFC6275){.xref}\].[¶](#section-3.6-1){.pilcrow}
:::
:::

::: {#sec_dlif_concept}
::: {#section-3.7 .section}
### [3.7.](#section-3.7){.section-number .selfRef} [The Distributed Logical Interface (DLIF) Concept](#name-the-distributed-logical-int){.section-name .selfRef} {#name-the-distributed-logical-int}

One of the main challenges of a network-based DMM solution is how to
allow a MN to simultaneously send/receive traffic that is anchored at
different MAARs and how to influence the MN\'s selection process of its
source IPv6 address for a new flow without requiring special support
from the MN\'s IP stack. This document defines the DLIF, which is a
software construct in the MAAR that can easily hide the change of
associated anchors from the MN.[¶](#section-3.7-1){.pilcrow}

[]{#name-dlif-exposing-multiple-rout}

::: {#fig_exposing_multiple_routers}
::: {#section-3.7-2.1 .artwork .art-text .alignLeft}
      +---------------------------------------------------+
     (                      Operator's                     )
     (                         core                        )
      +---------------------------------------------------+
                |                               |
        +---------------+     tunnel    +---------------+
        |   IP  stack   |===============|   IP  stack   |
        +---------------+               +-------+-------+
        |    mn1mar1    |--+ (DLIFs) +--|mn1mar1|mn1mar2|--+
        +---------------+  |         |  +-------+-------+  |
        | phy interface |  |         |  | phy interface |  |
        +---------------+  |         |  +---------------+  |
              MAAR1       (o)       (o)       MAAR2       (o)
                                       x                 x
                                         x             x
                            prefA::/64     x         x   prefB::/64
                          (AdvPrefLft=0)     x     x
                                               (o)
                                                |
                                             +-----+
                                 prefA::MN1  | MN1 |  prefB::MN1
                                (deprecated) +-----+
:::

[Figure 5](#figure-5){.selfRef}: [DLIF: Exposing Multiple Routers (One
per P-MAAR)](#name-dlif-exposing-multiple-rout){.selfRef}
:::

The basic idea of the DLIF concept is the following: each S-MAAR exposes
itself to a given MN as multiple routers, one per P-MAAR associated with
the MN. Let\'s consider the example shown in [Figure
5](#fig_exposing_multiple_routers){.xref}: MN1 initially attaches to
MAAR1, configuring an IPv6 address (prefA::MN1) from a prefix locally
anchored at MAAR1 (prefA::/64). At this stage, MAAR1 plays the role of
both anchoring and serving MAAR and also behaves as a plain IPv6 access
router. MAAR1 creates a DLIF to communicate (through a point-to-point
link) with MN1, exposing itself as a (logical) router with specific MAC
and IPv6 addresses (e.g., prefA::MAAR1/64 and fe80::MAAR1/64) using the
DLIF mn1mar1. As explained below, these addresses represent the
\"logical\" identity of MAAR1 for MN1 and will \"follow\" the MN while
roaming within the domain (note that the place where all this
information is maintained and updated is out of scope of this document;
potential examples are to keep it on the home subscriber server \-- HSS
\-- or the user\'s profile).[¶](#section-3.7-3){.pilcrow}

If MN1 moves and attaches to a different MAAR of the domain (MAAR2 in
the example of [Figure 5](#fig_exposing_multiple_routers){.xref}), this
MAAR will create a new logical interface (mn1mar2) to expose itself to
MN1, providing it with a locally anchored prefix (prefB::/64). In this
case, since the MN1 has another active IPv6 address anchored at MAAR1,
MAAR2 also needs to create an additional logical interface configured to
resemble the one used by MAAR1 to communicate with MN1. In this example,
MAAR1 is the only P-MAAR (MAAR2 is the same as S-MAAR), so only the
logical interface mn1mar1 is created. However, the same process would be
repeated if more P-MAARs were involved. In order to keep the prefix
anchored at MAAR1 reachable, a tunnel between MAAR1 and MAAR2 is
established and the routing is modified accordingly. The PBU/PBA
signaling is used to set up the bidirectional tunnel between MAAR1 and
MAAR2, and it might also be used to convey the information about the
prefix(es) anchored at MAAR1 and the addresses of the associated DLIF
(i.e., mn1mar1) to MAAR2.[¶](#section-3.7-4){.pilcrow}

[]{#name-distributed-logical-interfa}

::: {#fig_dlif_concept}
::: {#section-3.7-5.1 .artwork .art-text .alignLeft}
    +------------------------------------------+ +----------------------+
    |                  MAAR1                   | |         MAAR2        |
    |+----------------------------------------+| |+--------------------+|
    ||+------------------++------------------+|| ||+------------------+||
    |||+-------++-------+||+-------++-------+||| |||+-------++-------+|||
    ||||mn3mar1||mn3mar2||||mn2mar1||mn2mar2|||| ||||mn1mar1||mn1mar2||||
    |||| LMAC1 || LMAC2 |||| LMAC3 || LMAC4 |||| |||| LMAC5 || LMAC6 ||||
    |||+-------++-------+||+-------++-------+||| |||+-------++-------+|||
    |||    LIFs of MN3   ||    LIFs of MN2   ||| |||   LIFs of MN1    |||
    ||+------------------++------------------+|| ||+------------------+||
    ||              MAC1   (phy if MAAR1)     || || MAC2 (phy if MAAR2)||
    |+----------------------------------------+| |+--------------------+|
    +------------------------------------------+ +----------------------+
                        x        x                            x
                       x          x                          x
                     (o)          (o)                      (o)
                      |            |                        |
                   +--+--+      +--+--+                  +--+--+
                   | MN3 |      | MN2 |                  | MN1 |
                   +-----+      +-----+                  +-----+
:::

[Figure 6](#figure-6){.selfRef}: [Distributed Logical Interface
Concept](#name-distributed-logical-interfa){.selfRef}
:::

[Figure 6](#fig_dlif_concept){.xref} shows the logical interface concept
in more detail. The figure shows two MAARs and three MNs. MAAR1 is
currently serving MN2 and MN3, while MAAR2 is serving MN1. Note that an
S-MAAR always plays the role of anchoring MAAR for the attached (served)
MNs. Each MAAR has one single physical wireless interface as depicted in
this example.[¶](#section-3.7-6){.pilcrow}

As discussed before, each MN always \"sees\" multiple logical routers
\-- one per anchoring MAAR \-- independently of its currently S-MAAR.
From the point of view of the MN, these MAARs are portrayed as different
routers, although the MN is physically attached to a single interface.
This is achieved by the S-MAAR configuring different logical interfaces.
MN1 is currently attached to MAAR2 (i.e., MAAR2 is its S-MAAR) and,
therefore, it has configured an IPv6 address from MAAR2\'s pool (e.g.,
prefB::/64). MAAR2 has set up a logical interface (mn1mar2) on top of
its wireless physical interface (phy if MAAR2), which is used to serve
MN1. This interface has a logical MAC address (LMAC6) that is different
from the hardware MAC address (MAC2) of the physical interface of MAAR2.
Over the mn1mar2 interface, MAAR2 advertises its locally anchored prefix
prefB::/64. Before attaching to MAAR2, MN1 was attached to MAAR1 and
configured a locally anchored address at that MAAR, which is still being
used by MN1 in active communications. MN1 keeps \"seeing\" an interface
connecting to MAAR1 as if it were directly connected to the two MAARs.
This is achieved by the S-MAAR (MAAR2) configuring an additional DLIF,
mn1mar1, which behaves as the logical interface configured by MAAR1 when
MN1 was attached to it. This means that both the MAC and IPv6 addresses
configured on this logical interface remain the same regardless of the
physical MAAR that is serving the MN. The information required by an
S-MAAR to properly configure this logical interfaces can be obtained in
different ways: as part of the information conveyed in the PBA, from an
external database (e.g., the HSS) or by other means. As shown in the
figure, each MAAR may have several logical interfaces associated with
each attached MN and always has at least one (since an S-MAAR is also an
anchoring MAAR for the attached MN).[¶](#section-3.7-7){.pilcrow}

In order to enforce the use of the prefix locally anchored at the
S-MAAR, the RAs sent over those logical interfaces playing the role of
anchoring MAARs (different from the serving one) include a zero
preferred prefix lifetime (and a non-zero valid prefix lifetime, so the
prefix remains valid while being deprecated). The goal is to deprecate
the prefixes delegated by these MAARs (so that they will no longer be
serving the MN). Note that ongoing communications may keep on using
those addresses even if they are deprecated, so this only affects the
establishment of new sessions.[¶](#section-3.7-8){.pilcrow}

The DLIF concept also enables the following use case: suppose that
access to a local IP network is provided by a given MAAR (e.g., MAAR1 in
the example shown in [Figure 5](#fig_exposing_multiple_routers){.xref})
and that the resources available at that network cannot be reached from
outside the local network (e.g., cannot be accessed by an MN attached to
MAAR2). This is similar to the local IP access scenario considered by
3GPP, where a local gateway node is selected for sessions requiring
access to services provided locally (instead of going through a central
gateway). The goal is to allow an MN to be able to roam while still
being able to have connectivity to this local IP network. The solution
adopted to support this case makes use of more specific routes, as
discussed in RFC 4191 \[[RFC4191](#RFC4191){.xref}\], when the MN moves
to a MAAR different from the one providing access to the local IP
network (MAAR1 in the example). These routes are advertised through the
DLIF where the MAAR is providing access to the local network (MAAR1 in
this example). In this way, if MN1 moves from MAAR1 to MAAR2, any active
session that MN1 may have with a node on the local network connected to
MAAR1 will survive via the tunnel between MAAR1 and MAAR2. Also, any
potential future connection attempt to the local network will be
supported even though MN1 is no longer attached to MAAR1, so long as a
source address configured from MAAR1 is selected for new connections
(see \[[RFC6724](#RFC6724){.xref}\], rule
5.5).[¶](#section-3.7-9){.pilcrow}
:::
:::
:::
:::

::: {#subsec_messages}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Message Format](#name-message-format){.section-name .selfRef} {#name-message-format}

This section defines extensions to the PMIPv6
\[[RFC5213](#RFC5213){.xref}\] protocol
messages.[¶](#section-4-1){.pilcrow}

::: {#sec_pbu_format}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Proxy Binding Update](#name-proxy-binding-update){.section-name .selfRef} {#name-proxy-binding-update}

A new flag (D) is included in the PBU to indicate that the PBU is coming
from a MAAR or a CMD and not from a MAG. The rest of the PBU format
remains the same as defined in
\[[RFC5213](#RFC5213){.xref}\].[¶](#section-4.1-1){.pilcrow}

::: {#section-4.1-2 .artwork .art-text .alignLeft}
    0               1               2               3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |            Sequence #         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |A|H|L|K|M|R|P|F|T|B|S|D| Rsrvd |            Lifetime           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                        Mobility Options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.1-2){.pilcrow}
:::

[]{.break}

DMM Flag (D)
:   The D flag is set to indicate to the receiver of the message that
    the PBU is from a MAAR or a CMD. When an LMA that does not support
    the extensions described in this document receives a message with
    the D flag set, the PBU in that case [MUST NOT]{.bcp14} be processed
    by the LMA, and an error [MUST]{.bcp14} be
    returned.[¶](#section-4.1-3.2){.pilcrow}
:   

Mobility Options
:   Variable-length field of such length that the complete Mobility
    Header is an integer that is a multiple of 8 octets long. This field
    contains zero or more TLV-encoded mobility options. The encoding and
    format of the defined options are described in [Section
    6.2](https://www.rfc-editor.org/rfc/rfc6275#section-6.2){.relref} of
    \[[RFC6275](#RFC6275){.xref}\]. The receiving node [MUST]{.bcp14}
    ignore and skip any options that it does not
    understand.[¶](#section-4.1-3.4){.pilcrow}
:   
:::
:::

::: {#sec_pba_format}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Proxy Binding Acknowledgement](#name-proxy-binding-acknowledgeme){.section-name .selfRef} {#name-proxy-binding-acknowledgeme}

A new flag (D) is included in the PBA to indicate that the sender
supports operating as a MAAR or CMD. The rest of the PBA format remains
the same as defined in
\[[RFC5213](#RFC5213){.xref}\].[¶](#section-4.2-1){.pilcrow}

::: {#section-4.2-2 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |   Status      |K|R|P|T|B|S|D| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |         Sequence #            |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                        Mobility Options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.2-2){.pilcrow}
:::

[]{.break}

DMM Flag (D)
:   The D flag is set to indicate that the sender of the message
    supports operating as a MAAR or CMD. When a MAG that does not
    support the extensions described in this document receives a message
    with the D flag set, it [MUST]{.bcp14} ignore the message, and an
    error [MUST]{.bcp14} be returned.[¶](#section-4.2-3.2){.pilcrow}
:   

Mobility Options
:   Variable-length field of such length that the complete Mobility
    Header is an integer multiple of 8 octets long. This field contains
    zero or more TLV-encoded mobility options. The encoding and format
    of the defined options are described in [Section
    6.2](https://www.rfc-editor.org/rfc/rfc6275#section-6.2){.relref} of
    \[[RFC6275](#RFC6275){.xref}\]. The MAAR [MUST]{.bcp14} ignore and
    skip any options that it does not
    understand.[¶](#section-4.2-3.4){.pilcrow}
:   
:::
:::

::: {#sec_anchored_prefix_format}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Anchored Prefix Option](#name-anchored-prefix-option){.section-name .selfRef} {#name-anchored-prefix-option}

A new Anchored Prefix option is defined for use with the PBU and PBA
messages exchanged between MAARs and CMDs. Therefore, this option can
only appear if the D bit is set in a PBU/PBA. This option is used for
exchanging the MN\'s prefix anchored at the anchoring MAAR. There can be
multiple Anchored Prefix options present in the
message.[¶](#section-4.3-1){.pilcrow}

The Anchored Prefix option has an alignment requirement of 8n+4. Its
format is as follows:[¶](#section-4.3-2){.pilcrow}

::: {#section-4.3-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Type     |   Length      |   Reserved    | Prefix Length |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                        Anchored Prefix                        +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.3-3){.pilcrow}
:::

[]{.break}

Type
:   65[¶](#section-4.3-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length fields. This field
    [MUST]{.bcp14} be set to 18.[¶](#section-4.3-4.4){.pilcrow}
:   

Reserved
:   This field is unused at the time of publication. The value
    [MUST]{.bcp14} be initialized to 0 by the sender and [MUST]{.bcp14}
    be ignored by the receiver.[¶](#section-4.3-4.6){.pilcrow}
:   

Prefix Length
:   8-bit unsigned integer indicating the prefix length in bits of the
    IPv6 prefix contained in the option.[¶](#section-4.3-4.8){.pilcrow}
:   

Anchored Prefix
:   A 16-octet field containing the MN\'s IPv6 Anchored Prefix. Only the
    first Prefix Length bits are valid for the Anchored Prefix option.
    The rest of the bits [MUST]{.bcp14} be
    ignored.[¶](#section-4.3-4.10){.pilcrow}
:   
:::
:::

::: {#sec_local_prefix_format}
::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [Local Prefix Option](#name-local-prefix-option){.section-name .selfRef} {#name-local-prefix-option}

A new Local Prefix option is defined for use with the PBU and PBA
messages exchanged between MAARs or between a MAAR and a CMD. Therefore,
this option can only appear if the D bit is set in a PBU/PBA. This
option is used for exchanging a prefix of a local network that is only
reachable via the anchoring MAAR. There can be multiple Local Prefix
options present in the message.[¶](#section-4.4-1){.pilcrow}

The Local Prefix option has an alignment requirement of 8n+4. Its format
is as follows:[¶](#section-4.4-2){.pilcrow}

::: {#section-4.4-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Type     |   Length      |   Reserved    | Prefix Length |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                         Local Prefix                          +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4-3){.pilcrow}
:::

[]{.break}

Type
:   66[¶](#section-4.4-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length fields. This field
    [MUST]{.bcp14} be set to 18.[¶](#section-4.4-4.4){.pilcrow}
:   

Reserved
:   This field is unused at the time of publication. The value
    [MUST]{.bcp14} be initialized to 0 by the sender and [MUST]{.bcp14}
    be ignored by the receiver.[¶](#section-4.4-4.6){.pilcrow}
:   

Prefix Length
:   8-bit unsigned integer indicating the prefix length in bits of the
    IPv6 prefix contained in the option.[¶](#section-4.4-4.8){.pilcrow}
:   

Local Prefix
:   A 16-octet field containing the IPv6 Local Prefix. Only the first
    Prefix Length bits are valid for the IPv6 Local Prefix. The rest of
    the bits [MUST]{.bcp14} be ignored.[¶](#section-4.4-4.10){.pilcrow}
:   
:::
:::

::: {#subsec_pmaaropt}
::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [Previous MAAR Option](#name-previous-maar-option){.section-name .selfRef} {#name-previous-maar-option}

This new option is defined for use with the PBA messages exchanged by
the CMD to a MAAR. This option is used to notify the S-MAAR about the
P-MAAR\'s global address and the prefix anchored to it. There can be
multiple Previous MAAR options present in the
message.[¶](#section-4.5-1){.pilcrow}

The Previous MAAR option has an alignment requirement of 8n+4. Its
format is as follows:[¶](#section-4.5-2){.pilcrow}

::: {#section-4.5-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Type     |     Length    |   Reserved    | Prefix Length |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                     Previous MAAR                             +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                    Home Network Prefix                        +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.5-3){.pilcrow}
:::

[]{.break}

Type
:   67[¶](#section-4.5-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length fields. This field
    [MUST]{.bcp14} be set to 34.[¶](#section-4.5-4.4){.pilcrow}
:   

Reserved
:   This field is unused at the time of publication. The value
    [MUST]{.bcp14} be initialized to 0 by the sender and [MUST]{.bcp14}
    be ignored by the receiver.[¶](#section-4.5-4.6){.pilcrow}
:   

Prefix Length
:   8-bit unsigned integer indicating the prefix length in bits of the
    IPv6 prefix contained in the option.[¶](#section-4.5-4.8){.pilcrow}
:   

Previous MAAR
:   A 16-octet field containing the P-MAAR\'s IPv6 global
    address.[¶](#section-4.5-4.10){.pilcrow}
:   

Home Network Prefix
:   A 16-octet field containing the MN\'s IPv6 Home Network Prefix. Only
    the first Prefix Length bits are valid for the MN\'s IPv6 Home
    Network Prefix. The rest of the bits [MUST]{.bcp14} be
    ignored.[¶](#section-4.5-4.12){.pilcrow}
:   
:::
:::

::: {#subsec_smaaropt}
::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [Serving MAAR Option](#name-serving-maar-option){.section-name .selfRef} {#name-serving-maar-option}

This new option is defined for use with the PBU message exchanged
between the CMD and a P-MAAR. This option is used to notify the P-MAAR
about the current S-MAAR\'s global address. Its format is as
follows:[¶](#section-4.6-1){.pilcrow}

The Serving MAAR option has an alignment requirement of 8n+6. Its format
is as follows:[¶](#section-4.6-2){.pilcrow}

::: {#section-4.6-3 .artwork .art-text .alignLeft}

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |      Type     |     Length    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                     S-MAAR's Address                          +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.6-3){.pilcrow}
:::

[]{.break}

Type
:   68[¶](#section-4.6-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length fields. This field
    [MUST]{.bcp14} be set to 16.[¶](#section-4.6-4.4){.pilcrow}
:   

Serving MAAR
:   A 16-octet field containing the S-MAAR\'s IPv6 global
    address.[¶](#section-4.6-4.6){.pilcrow}
:   
:::
:::

::: {#sec_dlif_link_local_format}
::: {#section-4.7 .section}
### [4.7.](#section-4.7){.section-number .selfRef} [DLIF Link-Local Address Option](#name-dlif-link-local-address-opt){.section-name .selfRef} {#name-dlif-link-local-address-opt}

A new DLIF Link-Local Address option is defined for use with the PBA
message exchanged between MAARs and between a MAAR and a CMD. This
option is used for exchanging the link-local address of the DLIF to be
configured on the S-MAAR so it resembles the DLIF configured on the
P-MAAR.[¶](#section-4.7-1){.pilcrow}

The DLIF Link-Local Address option has an alignment requirement of 8n+6.
Its format is as follows:[¶](#section-4.7-2){.pilcrow}

::: {#section-4.7-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |   Type        |    Length     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                  DLIF Link-Local Address                      +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.7-3){.pilcrow}
:::

[]{.break}

Type
:   69[¶](#section-4.7-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length fields. This field
    [MUST]{.bcp14} be set to 16.[¶](#section-4.7-4.4){.pilcrow}
:   

DLIF Link-Local Address
:   A 16-octet field containing the link-local address of the logical
    interface.[¶](#section-4.7-4.6){.pilcrow}
:   
:::
:::

::: {#sec_dlif_link_layer_format}
::: {#section-4.8 .section}
### [4.8.](#section-4.8){.section-number .selfRef} [DLIF Link-Layer Address Option](#name-dlif-link-layer-address-opt){.section-name .selfRef} {#name-dlif-link-layer-address-opt}

A new DLIF Link-Layer Address option is defined for use with the PBA
message exchanged between MAARs and between a MAAR and a CMD. This
option is used for exchanging the link-layer address of the DLIF to be
configured on the S-MAAR so it resembles the DLIF configured on the
P-MAAR.[¶](#section-4.8-1){.pilcrow}

The format of the DLIF Link-Layer Address option is shown below. Based
on the size of the address, the option [MUST]{.bcp14} be aligned
appropriately, as per the mobility option alignment requirements
specified in
\[[RFC6275](#RFC6275){.xref}\].[¶](#section-4.8-2){.pilcrow}

::: {#section-4.8-3 .artwork .art-text .alignLeft}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Type        |    Length     |          Reserved             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                    DLIF Link-Layer Address                    +
    .                              ...                              .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.8-3){.pilcrow}
:::

[]{.break}

Type
:   70[¶](#section-4.8-4.2){.pilcrow}
:   

Length
:   8-bit unsigned integer indicating the length of the option in
    octets, excluding the type and length
    fields.[¶](#section-4.8-4.4){.pilcrow}
:   

Reserved
:   This field is unused at the time of publication. The value
    [MUST]{.bcp14} be initialized to 0 by the sender and [MUST]{.bcp14}
    be ignored by the receiver.[¶](#section-4.8-4.6){.pilcrow}
:   

DLIF Link-Layer Address

:   A variable length field containing the link-layer address of the
    logical interface to be configured on the
    S-MAAR.[¶](#section-4.8-4.8.1){.pilcrow}

    The content and format of this field (including octet and bit
    ordering) is as specified in [Section
    4.6](https://www.rfc-editor.org/rfc/rfc4861#section-4.6){.relref} of
    \[[RFC4861](#RFC4861){.xref}\] for carrying link-layer addresses. On
    certain access links where the link-layer address is not used or
    cannot be determined, this option cannot be
    used.[¶](#section-4.8-4.8.2){.pilcrow}

:   
:::
:::
:::
:::

::: {#IANA}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document defines six new mobility options: Anchored Prefix, Local
Prefix, Previous MAAR, Serving MAAR, DLIF Link-Local Address, and DLIF
Link-Layer Address. IANA has assigned Type values for these options from
the same numbering space as allocated for the other mobility options in
the \"Mobility Options\" registry defined in
[http://www.iana.org/assignments/mobility-parameters](https://www.iana.org/assignments/mobility-parameters).[¶](#section-5-1){.pilcrow}

This document reserves a new flag (D) with a value of 0x0010 in the
\"Binding Update Flags\" registry and a new flag (D) with a value of
0x02 in the \"Binding Acknowledgment Flags\" of the \"Mobile IPv6
parameters\" registry
([http://www.iana.org/assignments/mobility-parameters](https://www.iana.org/assignments/mobility-parameters)).[¶](#section-5-2){.pilcrow}
:::
:::

::: {#Security}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

The protocol extensions defined in this document share the same security
concerns of PMIPv6 \[[RFC5213](#RFC5213){.xref}\]. It is recommended
that the signaling messages, PBU and PBA, exchanged between the MAARs be
protected using IPsec, specifically by using the established security
association between them. This essentially eliminates the threats
related to the impersonation of a MAAR.[¶](#section-6-1){.pilcrow}

When the CMD acts as a PBU/PBA relay, the CMD may act as a relay of a
single PBU to multiple P-MAARs. In situations with many fast handovers
(e.g., with vehicular networks), multiple previous (e.g., k) MAARs may
exist. In this situation, the CMD creates k outgoing packets from a
single incoming packet. This bears a certain amplification risk. The CMD
[MUST]{.bcp14} use a pacing approach in the outgoing queue to cap the
output traffic (i.e., the rate of PBUs sent) to limit this amplification
risk.[¶](#section-6-2){.pilcrow}

When the CMD acts as a MAAR locator, mobility signaling (PBAs) is
exchanged between P-MAARs and the current S-MAAR. Hence, security
associations are [REQUIRED]{.bcp14} to exist between the involved MAARs
(in addition to the ones needed with the
CMD).[¶](#section-6-3){.pilcrow}

Since de-registration is performed by timeout, measures [SHOULD]{.bcp14}
be implemented to minimize the risks associated with continued resource
consumption (DoS attacks), e.g., imposing a limit on the number of
P-MAARs associated with a given MN.[¶](#section-6-4){.pilcrow}

The CMD and the participating MAARs [MUST]{.bcp14} be trusted parties
authorized perform all operations relevant to their
role.[¶](#section-6-5){.pilcrow}

There are some privacy considerations to consider. While the involved
parties trust each other, the signaling involves disclosing information
about the previous locations visited by each MN, as well as the active
prefixes they are using at a given point of time. Therefore, mechanisms
[MUST]{.bcp14} be in place to ensure that MAARs and CMDs do not disclose
this information to other parties or use it for other ends than
providing the distributed mobility support specified in this
document.[¶](#section-6-6){.pilcrow}
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4191\]
:   [Draves, R.]{.refAuthor}[ and D. Thaler]{.refAuthor}, [\"Default
    Router Preferences and More-Specific Routes\"]{.refTitle}, [RFC
    4191]{.seriesInfo}, [DOI 10.17487/RFC4191]{.seriesInfo}, November
    2005, \<<https://www.rfc-editor.org/info/rfc4191>\>.
:   

\[RFC4861\]
:   [Narten, T.]{.refAuthor}[, Nordmark, E.]{.refAuthor}[,
    Simpson, W.]{.refAuthor}[, and H. Soliman]{.refAuthor}, [\"Neighbor
    Discovery for IP version 6 (IPv6)\"]{.refTitle}, [RFC
    4861]{.seriesInfo}, [DOI 10.17487/RFC4861]{.seriesInfo}, September
    2007, \<<https://www.rfc-editor.org/info/rfc4861>\>.
:   

\[RFC5213\]
:   [Gundavelli, S., Ed.]{.refAuthor}[, Leung, K.]{.refAuthor}[,
    Devarapalli, V.]{.refAuthor}[, Chowdhury, K.]{.refAuthor}[, and B.
    Patil]{.refAuthor}, [\"Proxy Mobile IPv6\"]{.refTitle}, [RFC
    5213]{.seriesInfo}, [DOI 10.17487/RFC5213]{.seriesInfo}, August
    2008, \<<https://www.rfc-editor.org/info/rfc5213>\>.
:   

\[RFC6275\]
:   [Perkins, C., Ed.]{.refAuthor}[, Johnson, D.]{.refAuthor}[, and J.
    Arkko]{.refAuthor}, [\"Mobility Support in IPv6\"]{.refTitle}, [RFC
    6275]{.seriesInfo}, [DOI 10.17487/RFC6275]{.seriesInfo}, July 2011,
    \<<https://www.rfc-editor.org/info/rfc6275>\>.
:   

\[RFC7333\]
:   [Chan, H., Ed.]{.refAuthor}[, Liu, D.]{.refAuthor}[,
    Seite, P.]{.refAuthor}[, Yokota, H.]{.refAuthor}[, and J.
    Korhonen]{.refAuthor}, [\"Requirements for Distributed Mobility
    Management\"]{.refTitle}, [RFC 7333]{.seriesInfo}, [DOI
    10.17487/RFC7333]{.seriesInfo}, August 2014,
    \<<https://www.rfc-editor.org/info/rfc7333>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[DISTRIBUTED-ANCHORING\]
:   [Bernardos, C.]{.refAuthor}[ and J. Zuniga]{.refAuthor},
    [\"PMIPv6-based distributed anchoring\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-bernardos-dmm-distributed-anchoring-09]{.seriesInfo}, 29 May
    2017,
    \<<https://tools.ietf.org/html/draft-bernardos-dmm-distributed-anchoring-09>\>.
:   

\[DMM-PMIP\]
:   [Bernardos, C.]{.refAuthor}[, Oliva, A.]{.refAuthor}[, and F.
    Giust]{.refAuthor}, [\"A PMIPv6-based solution for Distributed
    Mobility Management\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-bernardos-dmm-pmip-09]{.seriesInfo}, 8
    September 2017,
    \<<https://tools.ietf.org/html/draft-bernardos-dmm-pmip-09>\>.
:   

\[RFC6724\]
:   [Thaler, D., Ed.]{.refAuthor}[, Draves, R.]{.refAuthor}[,
    Matsumoto, A.]{.refAuthor}[, and T. Chown]{.refAuthor}, [\"Default
    Address Selection for Internet Protocol Version 6
    (IPv6)\"]{.refTitle}, [RFC 6724]{.seriesInfo}, [DOI
    10.17487/RFC6724]{.seriesInfo}, September 2012,
    \<<https://www.rfc-editor.org/info/rfc6724>\>.
:   

\[RFC7429\]
:   [Liu, D., Ed.]{.refAuthor}[, Zuniga, JC., Ed.]{.refAuthor}[,
    Seite, P.]{.refAuthor}[, Chan, H.]{.refAuthor}[, and CJ.
    Bernardos]{.refAuthor}, [\"Distributed Mobility Management: Current
    Practices and Gap Analysis\"]{.refTitle}, [RFC 7429]{.seriesInfo},
    [DOI 10.17487/RFC7429]{.seriesInfo}, January 2015,
    \<<https://www.rfc-editor.org/info/rfc7429>\>.
:   

\[RFC8563\]
:   [Katz, D.]{.refAuthor}[, Ward, D.]{.refAuthor}[, Pallagatti, S.,
    Ed.]{.refAuthor}[, and G. Mirsky, Ed.]{.refAuthor}, [\"Bidirectional
    Forwarding Detection (BFD) Multipoint Active Tails\"]{.refTitle},
    [RFC 8563]{.seriesInfo}, [DOI 10.17487/RFC8563]{.seriesInfo}, April
    2019, \<<https://www.rfc-editor.org/info/rfc8563>\>.
:   
:::
:::

::: {#Acknowledgments}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors would like to thank [Dirk von Hugo]{.contact-name}, [John
Kaippallimalil]{.contact-name}, [Ines Robles]{.contact-name}, [Joerg
Ott]{.contact-name}, [Carlos Pignataro]{.contact-name}, [Vincent
Roca]{.contact-name}, [Mirja Kühlewind]{.contact-name}, [Éric
Vyncke]{.contact-name}, [Adam Roach]{.contact-name}, [Benjamin
Kaduk]{.contact-name}, and [Roman Danyliw]{.contact-name} for the
comments on this document. The authors would also like to thank [Marco
Liebsch]{.contact-name}, [Dirk von Hugo]{.contact-name}, [Alex
Petrescu]{.contact-name}, [Daniel Corujo]{.contact-name}, [Akbar
Rahman]{.contact-name}, [Danny Moses]{.contact-name}, [Xinpeng
Wei]{.contact-name}, and [Satoru Matsushima]{.contact-name} for their
comments and discussion on the documents
\[[DISTRIBUTED-ANCHORING](#I-D.bernardos-dmm-distributed-anchoring){.xref}\]
and \[[DMM-PMIP](#I-D.bernardos-dmm-pmip){.xref}\], on which the present
document is based.[¶](#section-appendix.a-1){.pilcrow}

The authors would also like to thank [Lyle Bertz]{.contact-name} and
[Danny Moses]{.contact-name} for their in-depth review of this document
and their very valuable comments and
suggestions.[¶](#section-appendix.a-2){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.b .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Carlos J. Bernardos]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universidad Carlos III de Madrid]{.org}
:::

::: {.left dir="auto"}
[Av. Universidad, 30]{.street-address}
:::

::: {.left dir="auto"}
[28911]{.postal-code} [Leganes]{.locality} [Madrid]{.region}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: tel
Phone: [+34 91624 6236](tel:+34%2091624%206236){.tel}
:::

::: email
Email: <cjbc@it.uc3m.es>
:::

::: url
URI: <http://www.it.uc3m.es/cjbc/>
:::

::: {.left dir="auto"}
[Antonio de la Oliva]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universidad Carlos III de Madrid]{.org}
:::

::: {.left dir="auto"}
[Av. Universidad, 30]{.street-address}
:::

::: {.left dir="auto"}
[28911]{.postal-code} [Leganes]{.locality} [Madrid]{.region}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: tel
Phone: [+34 91624 8803](tel:+34%2091624%208803){.tel}
:::

::: email
Email: <aoliva@it.uc3m.es>
:::

::: url
URI: <http://www.it.uc3m.es/aoliva/>
:::

::: {.left dir="auto"}
[Fabio Giust]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Athonet S.r.l.]{.org}
:::

::: {.left dir="auto"}
[via Ca\' del Luogo 6/8]{.street-address}
:::

::: {.left dir="auto"}
[36050]{.postal-code} [Bolzano Vicentino (VI)]{.locality}
:::

::: {.left dir="auto"}
[Italy]{.country-name}
:::

::: email
Email: <fabio.giust.research@gmail.com>
:::

::: {.left dir="auto"}
[Juan Carlos Zúñiga]{.fn .nameRole}
:::

::: {.left dir="auto"}
[SIGFOX]{.org}
:::

::: {.left dir="auto"}
[425 rue Jean Rostand]{.street-address}
:::

::: {.left dir="auto"}
[31670]{.postal-code} [Labege]{.locality}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <j.c.zuniga@ieee.org>
:::

::: url
URI: <http://www.sigfox.com/>
:::

::: {.left dir="auto"}
[Alain Mourad]{.fn .nameRole}
:::

::: {.left dir="auto"}
[InterDigital Europe]{.org}
:::

::: email
Email: <Alain.Mourad@InterDigital.com>
:::

::: url
URI: <http://www.InterDigital.com/>
:::
:::
:::
