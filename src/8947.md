  RFC 8947       DHCPv6 Link-Layer Address Assignment   December 2020
  -------------- -------------------------------------- ---------------
  Volz, et al.   Standards Track                        \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8947](https://www.rfc-editor.org/rfc/rfc8947){.eref}

Category:
:   Standards Track

Published:
:   December 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    B. Volz
    :::

    ::: org
    Cisco
    :::
    :::

    ::: author
    ::: author-name
    T. Mrugalski
    :::

    ::: org
    ISC
    :::
    :::

    ::: author
    ::: author-name
    CJ. Bernardos
    :::

    ::: org
    UC3M
    :::
    :::
:::

# RFC 8947 {#rfcnum}

# Link-Layer Address Assignment Mechanism for DHCPv6 {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

In certain environments, e.g., large-scale virtualization deployments,
new devices are created in an automated manner. Such devices may have
their link-layer addresses assigned in an automated fashion. With
sufficient scale, the likelihood of a collision using random assignment
without duplication detection is not acceptable. Therefore, an
allocation mechanism is required. This document proposes an extension to
DHCPv6 that allows a scalable approach to link-layer address assignments
where preassigned link-layer address assignments (such as by a
manufacturer) are not possible or are
unnecessary.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8947>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Requirements
    Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Deployment
    Scenarios](#name-deployment-scenarios){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Scenario: Proxy Client
        Mode](#name-scenario-proxy-client-mode){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Scenario: Direct Client
        Mode](#name-scenario-direct-client-mode){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Mechanism
    Overview](#name-mechanism-overview){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Design
    Assumptions](#name-design-assumptions){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Information
    Encoding](#name-information-encoding){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Requesting
    Addresses](#name-requesting-addresses){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Renewing
    Addresses](#name-renewing-addresses){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Releasing
    Addresses](#name-releasing-addresses){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Option
    Definitions](#name-option-definitions){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}

    -   ::: {#section-toc.1-1.11.2.1}
        [11.1](#section-11.1){.xref}.  [Identity Association for
        Link-Layer Addresses
        Option](#name-identity-association-for-li){.xref}[¶](#section-toc.1-1.11.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.11.2.2}
        [11.2](#section-11.2){.xref}.  [Link-Layer Addresses
        Option](#name-link-layer-addresses-option){.xref}[¶](#section-toc.1-1.11.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [Selecting Link-Layer Addresses for
    Assignment to an
    IA_LL](#name-selecting-link-layer-addres){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.13.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.14}
    [14](#section-14){.xref}. [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.14.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.15}
    [15](#section-15){.xref}. [Privacy
    Considerations](#name-privacy-considerations){.xref}[¶](#section-toc.1-1.15.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.16}
    [16](#section-16){.xref}. [References](#name-references){.xref}[¶](#section-toc.1-1.16.1){.pilcrow}

    -   ::: {#section-toc.1-1.16.2.1}
        [16.1](#section-16.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.16.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.16.2.2}
        [16.2](#section-16.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.16.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.17}
    [Appendix A](#section-appendix.a){.xref}.  [IEEE 802c
    Summary](#name-ieee-802c-summary){.xref}[¶](#section-toc.1-1.17.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.18}
    [](#section-appendix.b){.xref}[Acknowledgments](#name-acknowledgments){.xref}[¶](#section-toc.1-1.18.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.19}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.19.1){.pilcrow}
    :::
:::
:::

::: {#intro}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

There are several deployment types that deal with a large number of
devices that need to be initialized. One of them is a scenario where
virtual machines (VMs) are created on a massive scale. Typically, the
new VM instances are assigned a link-layer address, but random
assignment does not scale well due to the risk of a collision (see
[Appendix
A.1](https://www.rfc-editor.org/rfc/rfc4429#appendix-A.1){.relref} of
\[[RFC4429](#RFC4429){.xref}\]). Another use case is Internet of Things
(IoT) devices (see \[[RFC7228](#RFC7228){.xref}\]). The huge number of
such devices could strain the IEEE\'s available Organizationally Unique
Identifier (OUI) global address space. While there is typically no need
to provide global link-layer address uniqueness for such devices, a
link-layer assignment mechanism allows for conflicts to be avoided
inside an administrative domain. For those reasons, it is desired to
have some form of mechanism that would be able to assign locally unique
Media Access Control (MAC) addresses.[¶](#section-1-1){.pilcrow}

This document proposes a new mechanism that extends DHCPv6 operation to
handle link-layer address assignments.[¶](#section-1-2){.pilcrow}

Since DHCPv6 \[[RFC8415](#RFC8415){.xref}\] is a protocol that can
allocate various types of resources (non-temporary addresses, temporary
addresses, prefixes, as well as many options) and has the necessary
infrastructure to maintain such allocations (numerous server and client
implementations, large deployed relay infrastructure, and supportive
solutions such as leasequery and failover), it is a good candidate to
address the desired functionality.[¶](#section-1-3){.pilcrow}

While this document presents a design that should be usable for any
link-layer address type, some of the details are specific to IEEE 802
48-bit MAC addresses \[[IEEEStd802](#IEEEStd802){.xref}\]. Future
documents may provide specifics for other link-layer address
types.[¶](#section-1-4){.pilcrow}

IEEE 802 originally set aside half of the 48-bit MAC address space for
local use (where the Universal/Local (U/L) bit is set to 1). In 2017,
IEEE published an amendment \[[IEEEStd802c](#IEEEStd802c){.xref}\] that
divides this space into quadrants with differentiated address rules.
More details are in [Appendix
A](#IEEE802cSummary){.xref}.[¶](#section-1-5){.pilcrow}

IEEE is also developing protocols and procedures for assignment of
locally unique addresses (IEEE 802.1CQ). This work may serve as an
alternative protocol for assignment. For additional background, see
\[[IEEE-P802.1CQ-Project](#IEEE-P802.1CQ-Project){.xref}\].[¶](#section-1-6){.pilcrow}
:::
:::

::: {#requirements}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}
:::
:::

::: {#terminology}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The DHCP terminology relevant to this specification from
\[[RFC8415](#RFC8415){.xref}\] applies here. The following definitions
either modify those definitions as to how they are used in this document
or define new terminology used herein.[¶](#section-3-1){.pilcrow}

[]{.break}

address
:   Unless specified otherwise, a link-layer (or MAC) address, as
    specified in \[[IEEEStd802](#IEEEStd802){.xref}\]. The address is
    typically six octets long, but some network architectures may use
    different lengths.[¶](#section-3-2.2){.pilcrow}
:   

address block
:   A number of consecutive link-layer addresses. An address block is
    expressed as a first address plus a number that designates the
    number of additional (extra) addresses. A single address can be
    represented by the address itself and zero extra
    addresses.[¶](#section-3-2.4){.pilcrow}
:   

client
:   A node that is interested in obtaining link-layer addresses. It
    implements the basic DHCP mechanisms needed by a DHCP client, as
    described in \[[RFC8415](#RFC8415){.xref}\], and supports the new
    options specified in this document (IA_LL and LLADDR). The client
    may or may not support IPv6 address assignment and prefix
    delegation, as specified in
    \[[RFC8415](#RFC8415){.xref}\].[¶](#section-3-2.6){.pilcrow}
:   

IA_LL
:   Identity Association for Link-Layer Address, an identity association
    (IA) used to request or assign link-layer addresses. See [Section
    11.1](#IA_LL){.xref} for details on the IA_LL
    option.[¶](#section-3-2.8){.pilcrow}
:   

LLADDR
:   Link-layer address option that is used to request or assign a block
    of link-layer addresses. See [Section 11.2](#LLADDR){.xref} for
    details on the LLADDR option.[¶](#section-3-2.10){.pilcrow}
:   

server
:   A node that manages link-layer address allocation and is able to
    respond to client queries. It implements basic DHCP server
    functionality, as described in \[[RFC8415](#RFC8415){.xref}\], and
    supports the new options specified in this document (IA_LL and
    LLADDR). The server may or may not support IPv6 address assignment
    and prefix delegation as specified in
    \[[RFC8415](#RFC8415){.xref}\].[¶](#section-3-2.12){.pilcrow}
:   
:::
:::

::: {#overview}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Deployment Scenarios](#name-deployment-scenarios){.section-name .selfRef} {#name-deployment-scenarios}

This mechanism is designed to be generic and usable in many deployments,
but there are two scenarios it attempts to address in particular: (i)
proxy client mode and (ii) direct client
mode.[¶](#section-4-1){.pilcrow}

::: {#proxy}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Scenario: Proxy Client Mode](#name-scenario-proxy-client-mode){.section-name .selfRef} {#name-scenario-proxy-client-mode}

This mode is used when an entity acts as a DHCP client that requests
that available DHCP servers assign one or more addresses (an address
block) for the DHCP client to then assign to the final end devices to
use. Large-scale virtualization is one application scenario for proxy
client mode. In such environments, this entity is often called a
\"hypervisor\" and is frequently required to spawn new VMs. The
hypervisor needs to assign new addresses to those machines. The
hypervisor does not use those addresses for itself, but rather it uses
them to create new VMs with appropriate addresses. It is worth pointing
out the cumulative nature of this scenario. Over time, the hypervisor is
likely to increase its address use. Some obsolete VMs will be deleted;
their addresses are potentially eligible for reuse by new
VMs.[¶](#section-4.1-1){.pilcrow}
:::
:::

::: {#direct}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Scenario: Direct Client Mode](#name-scenario-direct-client-mode){.section-name .selfRef} {#name-scenario-direct-client-mode}

This mode can be used when an entity acts as a DHCP client that requests
that available DHCP servers assign one or more addresses (an address
block) for its own use. This usage scenario is related to IoT (see
[Section 1](#intro){.xref}). Upon first boot, for each interface, the
device uses a temporary address, as described in
\[[IEEEStd802.11](#IEEEStd802.11){.xref}\] and IEEE 802.1CQ
\[[IEEE-P802.1CQ-Project](#IEEE-P802.1CQ-Project){.xref}\], to send
initial DHCP packets to available DHCP servers wherein the device
requests a single address for that network interface. Once the server
assigns an address, the device abandons its temporary address and uses
the assigned (leased) address.[¶](#section-4.2-1){.pilcrow}

Note that a client that operates as above that does not have a globally
unique link-layer address on any of its interfaces [MUST NOT]{.bcp14}
use a link-layer-based DHCP Unique Identifier (DUID). For more details,
refer to [Section
11](https://www.rfc-editor.org/rfc/rfc8415#section-11){.relref} of
\[[RFC8415](#RFC8415){.xref}\].[¶](#section-4.2-2){.pilcrow}

Also, a client that operates as above may run into issues if the switch
it is connected to prohibits or restricts link-layer address changes.
This may limit where this capability can be used or may require the
administrator to adjust the configuration of the switch(es) to allow a
change in address.[¶](#section-4.2-3){.pilcrow}
:::
:::
:::
:::

::: {#mechanism}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Mechanism Overview](#name-mechanism-overview){.section-name .selfRef} {#name-mechanism-overview}

In the scenarios described in [Section 4](#overview){.xref}, the
protocol operates in fundamentally the same way. The device requesting
an address, acting as a DHCP client, will send a Solicit message with an
IA_LL option to all available DHCP servers. That IA_LL option
[MUST]{.bcp14} include an LLADDR option specifying the link-layer-type
and link-layer-len, and it may include a specific address or address
block as a hint for the server. Each available server responds with
either a Reply message with committed address(es) (if Rapid Commit was
requested and honored) or an Advertise message with offered address(es).
The client selects a server\'s response, as governed by
\[[RFC8415](#RFC8415){.xref}\]. If necessary, the client sends a Request
message; the target server will then assign the address(es) and send a
Reply message. Once a Reply is received, the client can start using
those address(es).[¶](#section-5-1){.pilcrow}

Normal DHCP mechanisms are in use. The client is expected to
periodically renew the addresses as governed by T1 and T2 timers and to
stop using the address once the valid lifetime expires. Renewals can be
administratively disabled by the server sending \"infinity\" as the T1
and T2 values (see [Section
7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
\[[RFC8415](#RFC8415){.xref}\]). An administrator may make the address
assignment permanent by specifying use of the \"infinity\" valid
lifetime, as defined in [Section
7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
\[[RFC8415](#RFC8415){.xref}\].[¶](#section-5-2){.pilcrow}

The client can release addresses when they are no longer needed by
sending a Release message (see [Section
18.2.7](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.7){.relref}
of \[[RFC8415](#RFC8415){.xref}\]).[¶](#section-5-3){.pilcrow}

Figure 9 in \[[RFC8415](#RFC8415){.xref}\] shows a timeline diagram of
the messages exchanged between a client and two servers for the typical
life cycle of one or more leases.[¶](#section-5-4){.pilcrow}

Confirm and Information-request messages are not used in link-layer
address assignment. Decline should technically never be needed, but see
[Section 12](#selecting-addresses){.xref} for one situation where this
message is needed.[¶](#section-5-5){.pilcrow}

Clients implementing this mechanism [SHOULD]{.bcp14} use the Rapid
Commit option, as specified in Sections
[5.1](https://www.rfc-editor.org/rfc/rfc8415#section-5.1){.relref} and
[18.2.1](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.1){.relref}
of \[[RFC8415](#RFC8415){.xref}\], to obtain addresses with a
two-message exchange when possible.[¶](#section-5-6){.pilcrow}

Devices supporting this proposal [MAY]{.bcp14} support the reconfigure
mechanism, as defined in [Section
18.2.11](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.11){.relref}
of \[[RFC8415](#RFC8415){.xref}\]. If supported by both server and
client, the reconfigure mechanism allows the administrator to
immediately notify clients that the configuration has changed and
triggers retrieval of relevant changes immediately, rather than after
the T1 timer elapses. Since this mechanism requires implementation of
Reconfiguration Key Authentication Protocol (see [Section
20.4](https://www.rfc-editor.org/rfc/rfc8415#section-20.4){.relref} of
\[[RFC8415](#RFC8415){.xref}\]), small-footprint devices may choose not
to support it.[¶](#section-5-7){.pilcrow}
:::
:::

::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Design Assumptions](#name-design-assumptions){.section-name .selfRef} {#name-design-assumptions}

One of the essential aspects of this mechanism is its cumulative nature,
especially in the hypervisor scenario. The server-client relationship
does not look like other DHCP transactions in the hypervisor scenario.
In a typical environment, there would be one server and a rather small
number of hypervisors, possibly even only one. However, over time, the
number of addresses requested by the hypervisor(s) will increase as more
VMs are spawned.[¶](#section-6-1){.pilcrow}

Another aspect crucial for efficient design is the observation that a
single client acting as hypervisor will likely use thousands of
addresses. An approach similar to what is used for IPv6 address or
prefix assignment (IA container with all assigned addresses listed, one
option for each address) would not work well. Therefore, the mechanism
should operate on address blocks rather than single values. A single
address can be treated as an address block with just one
address.[¶](#section-6-2){.pilcrow}

The DHCP mechanisms are reused to a large degree, including message and
option formats, transmission mechanisms, relay infrastructure, and
others. However, a device wishing to support only link-layer address
assignment is not required to support full DHCP. In other words, the
device may support only assignment of link-layer addresses but not IPv6
addresses or prefixes.[¶](#section-6-3){.pilcrow}
:::

::: {#Information-Encoding}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Information Encoding](#name-information-encoding){.section-name .selfRef} {#name-information-encoding}

A client [MUST]{.bcp14} send an LLADDR option encapsulated in an IA_LL
option to specify the link-layer-type and link-layer-len values. For
link-layer-type 1 (Ethernet) and 6 (IEEE 802 Networks), a client sets
the link-layer-address field to:[¶](#section-7-1){.pilcrow}

1.  [All zeroes if the client has no hint as to the starting address of
    the unicast address block. This address has the IEEE 802
    individual/group bit set to 0
    (individual).[¶](#section-7-2.1){.pilcrow}]{#section-7-2.1}
2.  [Any other value to request a specific block of address starting
    with the specified
    address.[¶](#section-7-2.2){.pilcrow}]{#section-7-2.2}

Encoding information for other link-layer-types may be added in the
future by publishing an RFC that specifies those
values.[¶](#section-7-3){.pilcrow}

A client sets the extra-addresses field to either 0 for a single address
or the size of the requested address block minus
1.[¶](#section-7-4){.pilcrow}

A client [MUST]{.bcp14} set the valid-lifetime field to 0 (this field
[MUST]{.bcp14} be ignored by the server).[¶](#section-7-5){.pilcrow}
:::
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Requesting Addresses](#name-requesting-addresses){.section-name .selfRef} {#name-requesting-addresses}

The addresses are assigned in blocks. The smallest block is a single
address. To request an assignment, the client sends a Solicit message
with an IA_LL option inside. The IA_LL option [MUST]{.bcp14} contain an
LLADDR option, as specified in [Section
7](#Information-Encoding){.xref}.[¶](#section-8-1){.pilcrow}

The server, upon receiving an IA_LL option, inspects its content and may
offer an address or addresses for each LLADDR option according to its
policy. The server [MAY]{.bcp14} take into consideration the address
block requested by the client in the LLADDR option. However, the server
[MAY]{.bcp14} choose to ignore some or all parameters of the requested
address block. In particular, the server may send either a different
starting address or a smaller number of addresses than requested. The
server sends back an Advertise message with an IA_LL option containing
an LLADDR option that specifies the addresses being offered. If the
server is unable to provide any addresses, it [MUST]{.bcp14} return the
IA_LL option containing a Status Code option (see [Section
21.13](https://www.rfc-editor.org/rfc/rfc8415#section-21.13){.relref} of
\[[RFC8415](#RFC8415){.xref}\]) with status set to
NoAddrsAvail.[¶](#section-8-2){.pilcrow}

Note that servers that do not support the IA_LL option will ignore the
option and not return it in Advertise (and Reply) messages. Clients that
send IA_LL options [MUST]{.bcp14} treat this as if the server returned
the NoAddrsAvail status for these IA_LL
option(s).[¶](#section-8-3){.pilcrow}

The client waits for available servers to send Advertise responses and
picks one server, as defined in [Section
18.2.9](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.9){.relref}
of \[[RFC8415](#RFC8415){.xref}\]. The client then sends a Request
message that includes the IA_LL container option with the LLADDR option
copied from the Advertise message sent by the chosen
server.[¶](#section-8-4){.pilcrow}

The client [MUST]{.bcp14} process the address block(s) returned in the
Advertise, rather than what it included in the Solicit message, and may
consider the offered address block(s) in selecting the Advertise message
to accept. The server may offer a smaller number of addresses or
different addresses from those requested. A client [MUST NOT]{.bcp14}
use resources returned in an Advertise message except to select a server
and in sending the Request message to that server; resources are only
useable by a client when returned in a Reply
message.[¶](#section-8-5){.pilcrow}

Upon reception of a Request message with the IA_LL container option, the
server assigns the requested addresses. The server allocates a block of
addresses according to its configured policy. The server [MAY]{.bcp14}
assign a different block or smaller block size than requested in the
Request message. The server then generates and sends a Reply message
back to the client.[¶](#section-8-6){.pilcrow}

Upon receiving a Reply message, the client parses the IA_LL container
option and may start using all provided addresses. It [MUST]{.bcp14}
restart its T1 and T2 timers using the values specified in the IA_LL
option.[¶](#section-8-7){.pilcrow}

The client [MUST]{.bcp14} use the address block(s) returned in the Reply
message, which may be a smaller block(s) or may have a different
address(es) than requested.[¶](#section-8-8){.pilcrow}

A client that has included a Rapid Commit option in the Solicit message
may receive a Reply in response to the Solicit message and skip the
Advertise and Request message steps above (see [Section
18.2.1](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.1){.relref}
of \[[RFC8415](#RFC8415){.xref}\]).[¶](#section-8-9){.pilcrow}

A client that changes its link-layer address on an interface
[SHOULD]{.bcp14} follow the recommendations in [Section
7.2.6](https://www.rfc-editor.org/rfc/rfc4861#section-7.2.6){.relref} of
\[[RFC4861](#RFC4861){.xref}\] to inform its neighbors of the new
link-layer address quickly.[¶](#section-8-10){.pilcrow}
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Renewing Addresses](#name-renewing-addresses){.section-name .selfRef} {#name-renewing-addresses}

Address renewals follow the normal DHCP renewals processing described in
[Section
18.2.4](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.4){.relref}
of \[[RFC8415](#RFC8415){.xref}\]. Once the T1 timer elapses, the client
starts sending Renew messages with the IA_LL option containing an LLADDR
option for the address block being renewed. The server responds with a
Reply message that contains the renewed address block. The server [MUST
NOT]{.bcp14} shrink or expand the address block. Once a block is
assigned and has a non-zero valid lifetime, its size, starting address,
and ending address [MUST NOT]{.bcp14} change.[¶](#section-9-1){.pilcrow}

If the requesting client needs additional addresses (e.g., in the
hypervisor scenario because addresses need to be assigned to new VMs),
it [MUST]{.bcp14} send an IA_LL option with a different Identity
Association IDentifier (IAID) to create another \"container\" for more
addresses.[¶](#section-9-2){.pilcrow}

If the client is unable to renew before the T2 timer elapses, it starts
sending Rebind messages, as described in [Section
18.2.5](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.5){.relref}
of \[[RFC8415](#RFC8415){.xref}\].[¶](#section-9-3){.pilcrow}
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Releasing Addresses](#name-releasing-addresses){.section-name .selfRef} {#name-releasing-addresses}

The client may decide to release a leased address block. A client
[MUST]{.bcp14} release the block in its entirety. A client releases an
address block by sending a Release message that includes an IA_LL option
containing the LLADDR option for the address block to release. The
Release transmission mechanism is described in [Section
18.2.7](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.7){.relref}
of \[[RFC8415](#RFC8415){.xref}\].[¶](#section-10-1){.pilcrow}

Note that if the client is releasing the link-layer address it is using,
it [MUST]{.bcp14} stop using this address before sending the Release
message (as per \[[RFC8415](#RFC8415){.xref}\]). In order to send the
Release message, the client [MUST]{.bcp14} use another address (such as
the one originally used to initiate DHCPv6 to provide an allocated
link-layer address).[¶](#section-10-2){.pilcrow}
:::

::: {#option}
::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Option Definitions](#name-option-definitions){.section-name .selfRef} {#name-option-definitions}

This mechanism uses an approach similar to the existing mechanisms in
DHCP. There is one container option (the IA_LL option) that contains the
actual address or addresses, represented by an LLADDR option. Each
LLADDR option represents an address block, which is expressed as a first
address with a number that specifies how many additional addresses are
included.[¶](#section-11-1){.pilcrow}

::: {#IA_LL}
::: {#section-11.1 .section}
### [11.1.](#section-11.1){.section-number .selfRef} [Identity Association for Link-Layer Addresses Option](#name-identity-association-for-li){.section-name .selfRef} {#name-identity-association-for-li}

The Identity Association for Link-Layer Addresses option (the IA_LL
option) is used to carry an IA_LL, the parameters associated with the
IA_LL, and the address blocks associated with the
IA_LL.[¶](#section-11.1-1){.pilcrow}

The format of the IA_LL option is:[¶](#section-11.1-2){.pilcrow}

[]{#name-ia_ll-option-format}

::: {#ia-ll-syntax}
::: {#section-11.1-3.1 .artwork .art-text .alignLeft}
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          OPTION_IA_LL         |          option-len           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        IAID (4 octets)                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          T1 (4 octets)                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          T2 (4 octets)                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                         IA_LL-options                         .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 1](#figure-1){.selfRef}: [IA_LL Option
Format](#name-ia_ll-option-format){.selfRef}
:::

[]{.break}

option-code
:   OPTION_IA_LL (138).[¶](#section-11.1-4.2){.pilcrow}
:   

option-len
:   12 + length of IA_LL-options field.[¶](#section-11.1-4.4){.pilcrow}
:   

IAID
:   The unique identifier for this IA_LL; the IAID must be unique among
    the identifiers for all of this client\'s IA_LLs. The number space
    for IA_LL IAIDs is separate from the number space for other IA
    option types (i.e., IA_NA, IA_TA, and IA_PD). A 4-octet field
    containing an unsigned integer.[¶](#section-11.1-4.6){.pilcrow}
:   

T1
:   The time interval after which the client should contact the server
    from which the addresses in the IA_LL were obtained to extend the
    valid lifetime of the addresses assigned to the IA_LL; T1 is a time
    duration relative to the current time expressed in units of seconds.
    A 4-octet field containing an unsigned
    integer.[¶](#section-11.1-4.8){.pilcrow}
:   

T2
:   The time interval after which the client should contact any
    available server to extend the valid lifetime of the addresses
    assigned to the IA_LL; T2 is a time duration relative to the current
    time expressed in units of seconds. A 4-octet field containing an
    unsigned integer.[¶](#section-11.1-4.10){.pilcrow}
:   

IA_LL-options
:   Options associated with this IA_LL. A variable-length field (12
    octets less than the value in the option-len
    field).[¶](#section-11.1-4.12){.pilcrow}
:   

An IA_LL option may only appear in the options area of a DHCP message. A
DHCP message may contain multiple IA_LL options (though each must have a
unique IAID).[¶](#section-11.1-5){.pilcrow}

The status of any operations involving this IA_LL is indicated in a
Status Code option (see [Section
21.13](https://www.rfc-editor.org/rfc/rfc8415#section-21.13){.relref} of
\[[RFC8415](#RFC8415){.xref}\]) in the IA_LL-options
field.[¶](#section-11.1-6){.pilcrow}

Note that an IA_LL has no explicit \"lifetime\" or \"lease length\" of
its own. When the valid lifetimes of all of the addresses in an IA_LL
have expired, the IA_LL can be considered to be expired. T1 and T2 are
included to give servers explicit control over when a client recontacts
the server about a specific IA_LL.[¶](#section-11.1-7){.pilcrow}

In a message sent by a client to a server, the T1 and T2 fields
[MUST]{.bcp14} be set to 0. The server [MUST]{.bcp14} ignore any values
in these fields in messages received from a
client.[¶](#section-11.1-8){.pilcrow}

In a message sent by a server to a client, the client [MUST]{.bcp14} use
the values in the T1 and T2 fields for the T1 and T2 times, unless those
values in those fields are 0. The values in the T1 and T2 fields are the
number of seconds until T1 and T2.[¶](#section-11.1-9){.pilcrow}

As per [Section
7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
\[[RFC8415](#RFC8415){.xref}\], the value 0xffffffff is taken to mean
\"infinity\" and should be used
carefully.[¶](#section-11.1-10){.pilcrow}

The server selects the T1 and T2 times to allow the client to extend the
lifetimes of any address block in the IA_LL before the lifetimes expire,
even if the server is unavailable for some short period of time.
Recommended values for T1 and T2 are .5 and .8 times the shortest valid
lifetime of the address blocks in the IA that the server is willing to
extend, respectively. If the \"shortest\" valid lifetime is 0xffffffff
(\"infinity\"), the recommended T1 and T2 values are also 0xffffffff. If
the time at which the addresses in an IA_LL are to be renewed is to be
left to the discretion of the client, the server sets T1 and T2 to 0.
The client [MUST]{.bcp14} follow the rules defined in [Section
14.2](https://www.rfc-editor.org/rfc/rfc8415#section-14.2){.relref} of
\[[RFC8415](#RFC8415){.xref}\].[¶](#section-11.1-11){.pilcrow}

If a client receives an IA_LL with T1 greater than T2, and both T1 and
T2 are greater than 0, the client discards the IA_LL option and
processes the remainder of the message as though the server had not
included the invalid IA_LL option.[¶](#section-11.1-12){.pilcrow}

The IA_LL-options field typically contains one or more LLADDR options
(see [Section 11.2](#LLADDR){.xref}). If a client does not include an
LLADDR option in a Solicit or Request message, the server [MUST]{.bcp14}
treat this as a request for a single address and that the client has no
hint as to the address it would like.[¶](#section-11.1-13){.pilcrow}
:::
:::

::: {#LLADDR}
::: {#section-11.2 .section}
### [11.2.](#section-11.2){.section-number .selfRef} [Link-Layer Addresses Option](#name-link-layer-addresses-option){.section-name .selfRef} {#name-link-layer-addresses-option}

The Link-Layer Addresses option is used to specify an address block
associated with an IA_LL. The option must be encapsulated in the
IA_LL-options field of an IA_LL option. The LLaddr-options field
encapsulates those options that are specific to this address
block.[¶](#section-11.2-1){.pilcrow}

The format of the Link-Layer Addresses option
is:[¶](#section-11.2-2){.pilcrow}

[]{#name-lladdr-option-format}

::: {#lladdr-syntax}
::: {#section-11.2-3.1 .artwork .art-text .alignLeft}
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          OPTION_LLADDR        |          option-len           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       link-layer-type         |        link-layer-len         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                     link-layer-address                        .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      extra-addresses                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      valid-lifetime                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                      LLaddr-options                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 2](#figure-2){.selfRef}: [LLADDR Option
Format](#name-lladdr-option-format){.selfRef}
:::

[]{.break}

option-code
:   OPTION_LLADDR (139).[¶](#section-11.2-4.2){.pilcrow}
:   

option-len
:   12 + link-layer-len field value + length of LLaddr-options field.
    Assuming a link-layer-address length of 6 and no extra options, the
    option-len would be 18.[¶](#section-11.2-4.4){.pilcrow}
:   

link-layer-type
:   The link-layer type [MUST]{.bcp14} be a valid hardware type assigned
    by IANA, as described in \[[RFC5494](#RFC5494){.xref}\], and
    registered in the \"Hardware Types\" registry at
    \<<https://www.iana.org/assignments/arp-parameters>\>. A 2-octet
    field containing an unsigned
    integer.[¶](#section-11.2-4.6){.pilcrow}
:   

link-layer-len
:   Specifies the length, in octets, of the link-layer-address field
    (typically 6 for a link-layer-type of 1 (Ethernet) and 6 (IEEE 802
    Networks)). This is to accommodate link layers that may have
    variable-length addresses. A 2-octet field containing an unsigned
    integer.[¶](#section-11.2-4.8){.pilcrow}
:   

link-layer-address
:   Specifies the address of the first link-layer address that is being
    requested or assigned depending on the message. A client
    [MAY]{.bcp14} send a special value to request any address. For
    link-layer types 1 and 6, see [Section
    7](#Information-Encoding){.xref} for details on this field. A
    link-layer-len length octet field containing an
    address.[¶](#section-11.2-4.10){.pilcrow}
:   

extra-addresses
:   Specifies the number of additional addresses that follow the address
    specified in link-layer-address. For a single address, 0 is used.
    For example, link-layer-address 02:04:06:08:0a and extra-addresses 3
    designate a block of four addresses, starting from 02:04:06:08:0a
    and ending with 02:04:06:08:0d (inclusive). A 4-octet field
    containing an unsigned integer.[¶](#section-11.2-4.12){.pilcrow}
:   

valid-lifetime
:   The valid lifetime for the address(es) in the option, expressed in
    units of seconds. A 4-octet field containing an unsigned
    integer.[¶](#section-11.2-4.14){.pilcrow}
:   

LLaddr-options
:   Any encapsulated options that are specific to this particular
    address block. Currently, there are no such options defined, but
    there may be in the future.[¶](#section-11.2-4.16){.pilcrow}
:   

In a message sent by a client to a server, the valid lifetime field
[MUST]{.bcp14} be set to 0. The server [MUST]{.bcp14} ignore any
received value.[¶](#section-11.2-5){.pilcrow}

In a message sent by a server to a client, the client [MUST]{.bcp14} use
the value in the valid lifetime field for the valid lifetime for the
address block. The value in the valid lifetime field is the number of
seconds remaining in the lifetime.[¶](#section-11.2-6){.pilcrow}

As per [Section
7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
\[[RFC8415](#RFC8415){.xref}\], the valid lifetime of 0xffffffff is
taken to mean \"infinity\" and should be used
carefully.[¶](#section-11.2-7){.pilcrow}

More than one LLADDR option can appear in an IA_LL
option.[¶](#section-11.2-8){.pilcrow}
:::
:::
:::
:::

::: {#selecting-addresses}
::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [Selecting Link-Layer Addresses for Assignment to an IA_LL](#name-selecting-link-layer-addres){.section-name .selfRef} {#name-selecting-link-layer-addres}

A server selects link-layer addresses to be assigned to an IA_LL
according to the assignment policies determined by the server
administrator and the requirements of that address
space.[¶](#section-12-1){.pilcrow}

Link-layer addresses are typically specific to a link and the server
[SHOULD]{.bcp14} follow the steps in [Section
13.1](https://www.rfc-editor.org/rfc/rfc8415#section-13.1){.relref} of
\[[RFC8415](#RFC8415){.xref}\] to determine the client\'s
link.[¶](#section-12-2){.pilcrow}

For IEEE 802 MAC addresses (see \[[IEEEStd802](#IEEEStd802){.xref}\] as
amended by
\[[IEEEStd802c](#IEEEStd802c){.xref}\]):[¶](#section-12-3){.pilcrow}

1.  [Server administrators [SHOULD]{.bcp14} follow the IEEE 802
    Specifications with regard to the unicast address pools made
    available for assignment (see [Appendix A](#IEEE802cSummary){.xref}
    and \[[IEEEStd802c](#IEEEStd802c){.xref}\]) \-- only address space
    reserved for local use or with the authorization of the assignee may
    be used.[¶](#section-12-4.1){.pilcrow}]{#section-12-4.1}
2.  [Servers [MUST NOT]{.bcp14} allow administrators to configure
    address pools that would cross the boundary of 2^42^ bits (for
    48-bit MAC addresses) to avoid issues with changes in the first
    octet of the address and the special bits therein (see [Appendix
    A](#IEEE802cSummary){.xref}). Clients [MUST]{.bcp14} reject
    assignments where the assigned block would cross this boundary (they
    [MUST]{.bcp14} decline the allocation \-- see [Section
    18.2.8](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.8){.relref}
    of
    \[[RFC8415](#RFC8415){.xref}\]).[¶](#section-12-4.2){.pilcrow}]{#section-12-4.2}
3.  [A server [MAY]{.bcp14} use options supplied by a relay agent or
    client to select the quadrant (see [Appendix
    A](#IEEE802cSummary){.xref}) from which addresses are to be
    assigned. This [MAY]{.bcp14} include options like those specified in
    \[[RFC8948](#RFC8948){.xref}\].[¶](#section-12-4.3){.pilcrow}]{#section-12-4.3}
:::
:::

::: {#iana}
::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA has assigned the OPTION_IA_LL (138) option code from the \"Option
Codes\" subregistry of the \"Dynamic Host Configuration Protocol for
IPv6 (DHCPv6)\" registry maintained at
\<[http://www.iana.org/assignments/dhcpv6-parameters](https://www.iana.org/assignments/dhcpv6-parameters)\>:[¶](#section-13-1){.pilcrow}

[]{.break}

Value:
:   138[¶](#section-13-2.2){.pilcrow}
:   

Description:
:   OPTION_IA_LL[¶](#section-13-2.4){.pilcrow}
:   

Client ORO:
:   No[¶](#section-13-2.6){.pilcrow}
:   

Singleton Option:
:   No[¶](#section-13-2.8){.pilcrow}
:   

Reference:
:   RFC 8947[¶](#section-13-2.10){.pilcrow}
:   

IANA has assigned the OPTION_LLADDR (139) option code from the \"Option
Codes\" subregistry of the \"Dynamic Host Configuration Protocol for
IPv6 (DHCPv6)\" registry maintained at
\<[http://www.iana.org/assignments/dhcpv6-parameters](https://www.iana.org/assignments/dhcpv6-parameters)\>:[¶](#section-13-3){.pilcrow}

[]{.break}

Value:
:   139[¶](#section-13-4.2){.pilcrow}
:   

Description:
:   OPTION_LLADDR[¶](#section-13-4.4){.pilcrow}
:   

Client ORO:
:   No[¶](#section-13-4.6){.pilcrow}
:   

Singleton Option:
:   No[¶](#section-13-4.8){.pilcrow}
:   

Reference:
:   RFC 8947[¶](#section-13-4.10){.pilcrow}
:   
:::
:::

::: {#security}
::: {#section-14 .section}
## [14.](#section-14){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

See [Section
22](https://www.rfc-editor.org/rfc/rfc8415#section-22){.relref} of
\[[RFC8415](#RFC8415){.xref}\] and [Section
23](https://www.rfc-editor.org/rfc/rfc7227#section-23){.relref} of
\[[RFC7227](#RFC7227){.xref}\] for the DHCP security considerations. See
\[[RFC8200](#RFC8200){.xref}\] for the IPv6 security
considerations.[¶](#section-14-1){.pilcrow}

As discussed in [Section
22](https://www.rfc-editor.org/rfc/rfc8415#section-22){.relref} of
\[[RFC8415](#RFC8415){.xref}\]:[¶](#section-14-2){.pilcrow}

> DHCP lacks end-to-end encryption between clients and servers; thus,
> hijacking, tampering, and eavesdropping attacks are all possible as a
> result.[¶](#section-14-3.1){.pilcrow}

In some network environments, it is possible to secure them, as
discussed later in [Section
22](https://www.rfc-editor.org/rfc/rfc8415#section-22){.relref} of
\[[RFC8415](#RFC8415){.xref}\].[¶](#section-14-4){.pilcrow}

If not all parties on a link use this mechanism to obtain an address
from the space assigned to the DHCP server, there is the possibility of
the same link-layer address being used by more than one device. Note
that this issue would exist on these networks even if DHCP were not used
to obtain the address.[¶](#section-14-5){.pilcrow}

Server implementations [SHOULD]{.bcp14} consider configuration options
to limit the maximum number of addresses to allocate (both in a single
request and in total) to a client. However, note that this does not
prevent a bad client actor from pretending to be many different clients
and consuming all available addresses.[¶](#section-14-6){.pilcrow}
:::
:::

::: {#privacy}
::: {#section-15 .section}
## [15.](#section-15){.section-number .selfRef} [Privacy Considerations](#name-privacy-considerations){.section-name .selfRef} {#name-privacy-considerations}

See [Section
23](https://www.rfc-editor.org/rfc/rfc8415#section-23){.relref} of
\[[RFC8415](#RFC8415){.xref}\] for the DHCP privacy
considerations.[¶](#section-15-1){.pilcrow}

For a client requesting a link-layer address directly from a server, as
the address assigned to a client will likely be used by the client to
communicate on the link, the address will be exposed to those able to
listen in on this communication. For those peers on the link that are
able to listen in on the DHCP exchange, they would also be able to
correlate the client\'s identity (based on the DUID used) with the
assigned address. Additional mechanisms, such as the ones described in
\[[RFC7844](#RFC7844){.xref}\], can also be used to improve anonymity by
minimizing what is exposed.[¶](#section-15-2){.pilcrow}

As discussed in [Section
23](https://www.rfc-editor.org/rfc/rfc8415#section-23){.relref} of
\[[RFC8415](#RFC8415){.xref}\], DHCP servers and hypervisors may need to
consider the implications of assigning addresses sequentially. Though in
general, this is only of link-local concern unlike for IPv6 address
assignment and prefix delegation, as these may be used for communication
over the Internet.[¶](#section-15-3){.pilcrow}
:::
:::

::: {#section-16 .section}
## [16.](#section-16){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-16.1 .section}
### [16.1.](#section-16.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4861\]
:   [Narten, T.]{.refAuthor}[, Nordmark, E.]{.refAuthor}[,
    Simpson, W.]{.refAuthor}[, and H. Soliman]{.refAuthor}, [\"Neighbor
    Discovery for IP version 6 (IPv6)\"]{.refTitle}, [RFC
    4861]{.seriesInfo}, [DOI 10.17487/RFC4861]{.seriesInfo}, September
    2007, \<<https://www.rfc-editor.org/info/rfc4861>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8415\]
:   [Mrugalski, T.]{.refAuthor}[, Siodelski, M.]{.refAuthor}[,
    Volz, B.]{.refAuthor}[, Yourtchenko, A.]{.refAuthor}[,
    Richardson, M.]{.refAuthor}[, Jiang, S.]{.refAuthor}[,
    Lemon, T.]{.refAuthor}[, and T. Winters]{.refAuthor}, [\"Dynamic
    Host Configuration Protocol for IPv6 (DHCPv6)\"]{.refTitle}, [RFC
    8415]{.seriesInfo}, [DOI 10.17487/RFC8415]{.seriesInfo}, November
    2018, \<<https://www.rfc-editor.org/info/rfc8415>\>.
:   
:::

::: {#section-16.2 .section}
### [16.2.](#section-16.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[IEEE-P802.1CQ-Project\]
:   [IEEE]{.refAuthor}, [\"P802.1CQ - Standard for Local and
    Metropolitan Area Networks: Multicast and Local Address
    Assignment\"]{.refTitle},
    \<<https://standards.ieee.org/project/802_1CQ.html>\>.
:   

\[IEEEStd802\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Local and Metropolitan Area
    Networks: Overview and Architecture, IEEE Std 802\"]{.refTitle},
    [IEEE STD 802-2014]{.refContent}, [DOI
    10.1109/IEEESTD.2014.6847097]{.seriesInfo},
    \<<https://doi.org/10.1109/IEEESTD.2014.6847097>\>.
:   

\[IEEEStd802.11\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Information
    technology\--Telecommunications and information exchange between
    systems Local and metropolitan area networks\--Specific
    requirements - Part 11: Wireless LAN Medium Access Control (MAC) and
    Physical Layer (PHY) Specifications\"]{.refTitle}, [IEEE Std
    802.11]{.refContent}, [DOI
    10.1109/IEEESTD.2016.7786995]{.seriesInfo},
    \<<https://doi.org/10.1109/IEEESTD.2016.7786995>\>.
:   

\[IEEEStd802c\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Local and Metropolitan Area
    Networks:Overview and Architecture\--Amendment 2: Local Medium
    Access Control (MAC) Address Usage\"]{.refTitle}, [IEEE Std
    802c-2017]{.refContent}, [DOI
    10.1109/IEEESTD.2017.8016709]{.seriesInfo},
    \<<https://doi.org/10.1109/IEEESTD.2017.8016709>\>.
:   

\[RFC2464\]
:   [Crawford, M.]{.refAuthor}, [\"Transmission of IPv6 Packets over
    Ethernet Networks\"]{.refTitle}, [RFC 2464]{.seriesInfo}, [DOI
    10.17487/RFC2464]{.seriesInfo}, December 1998,
    \<<https://www.rfc-editor.org/info/rfc2464>\>.
:   

\[RFC4429\]
:   [Moore, N.]{.refAuthor}, [\"Optimistic Duplicate Address Detection
    (DAD) for IPv6\"]{.refTitle}, [RFC 4429]{.seriesInfo}, [DOI
    10.17487/RFC4429]{.seriesInfo}, April 2006,
    \<<https://www.rfc-editor.org/info/rfc4429>\>.
:   

\[RFC5494\]
:   [Arkko, J.]{.refAuthor}[ and C. Pignataro]{.refAuthor}, [\"IANA
    Allocation Guidelines for the Address Resolution Protocol
    (ARP)\"]{.refTitle}, [RFC 5494]{.seriesInfo}, [DOI
    10.17487/RFC5494]{.seriesInfo}, April 2009,
    \<<https://www.rfc-editor.org/info/rfc5494>\>.
:   

\[RFC7227\]
:   [Hankins, D.]{.refAuthor}[, Mrugalski, T.]{.refAuthor}[,
    Siodelski, M.]{.refAuthor}[, Jiang, S.]{.refAuthor}[, and S.
    Krishnan]{.refAuthor}, [\"Guidelines for Creating New DHCPv6
    Options\"]{.refTitle}, [BCP 187]{.seriesInfo}, [RFC
    7227]{.seriesInfo}, [DOI 10.17487/RFC7227]{.seriesInfo}, May 2014,
    \<<https://www.rfc-editor.org/info/rfc7227>\>.
:   

\[RFC7228\]
:   [Bormann, C.]{.refAuthor}[, Ersue, M.]{.refAuthor}[, and A.
    Keranen]{.refAuthor}, [\"Terminology for Constrained-Node
    Networks\"]{.refTitle}, [RFC 7228]{.seriesInfo}, [DOI
    10.17487/RFC7228]{.seriesInfo}, May 2014,
    \<<https://www.rfc-editor.org/info/rfc7228>\>.
:   

\[RFC7844\]
:   [Huitema, C.]{.refAuthor}[, Mrugalski, T.]{.refAuthor}[, and S.
    Krishnan]{.refAuthor}, [\"Anonymity Profiles for DHCP
    Clients\"]{.refTitle}, [RFC 7844]{.seriesInfo}, [DOI
    10.17487/RFC7844]{.seriesInfo}, May 2016,
    \<<https://www.rfc-editor.org/info/rfc7844>\>.
:   

\[RFC8200\]
:   [Deering, S.]{.refAuthor}[ and R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.
:   

\[RFC8948\]
:   [Bernardos, CJ.]{.refAuthor}[ and A. Mourad]{.refAuthor},
    [\"Structured Local Address Plan (SLAP) Quadrant Selection Option
    for DHCPv6\"]{.refTitle}, [RFC 8948]{.seriesInfo}, [DOI
    10.17487/RFC8948]{.seriesInfo}, December 2020,
    \<<https://www.rfc-editor.org/info/rfc8948>\>.
:   
:::
:::

::: {#IEEE802cSummary}
::: {#section-appendix.a .section}
## [Appendix A.](#section-appendix.a){.section-number .selfRef} [IEEE 802c Summary](#name-ieee-802c-summary){.section-name .selfRef} {#name-ieee-802c-summary}

This appendix provides a brief summary of IEEE 802c
\[[IEEEStd802c](#IEEEStd802c){.xref}\].[¶](#section-appendix.a-1){.pilcrow}

The original IEEE 802 specifications assigned half of the 48-bit MAC
address space to local use \-- these addresses have the U/L bit set to 1
and are locally administered with no imposed
structure.[¶](#section-appendix.a-2){.pilcrow}

In 2017, the IEEE issued the IEEE Std 802c specification, which defines
a new optional \"Structured Local Address Plan (SLAP) that specifies
different assignment approaches in four specified regions of the local
MAC address space\". Under this plan, there are four SLAP quadrants that
use different assignment policies.[¶](#section-appendix.a-3){.pilcrow}

The first octet of the MAC address Z and Y bits define the quadrant for
locally assigned addresses (X-bit is 1). In IEEE representation, these
bits are as follows:[¶](#section-appendix.a-4){.pilcrow}

[]{#name-slap-bits}

::: {#SLAP-Bits}
::: {#section-appendix.a-6.1 .artwork .art-text .alignLeft}
        LSB                MSB
        M  X  Y  Z  -  -  -  -
        |  |  |  |
        |  |  |  +------------ SLAP Z-bit
        |  |  +--------------- SLAP Y-bit
        |  +------------------ X-bit (U/L) = 1 for locally assigned
        +--------------------- M-bit (I/G) (unicast/group)
:::

[Figure 3](#figure-3){.selfRef}: [SLAP Bits](#name-slap-bits){.selfRef}
:::

The SLAP quadrants are:[¶](#section-appendix.a-8){.pilcrow}

[]{#name-slap-quadrants}

  Quadrant   Y-bit   Z-bit   Local Identifier Type       Local Identifier
  ---------- ------- ------- --------------------------- ------------------
  01         0       1       Extended Local              ELI
  11         1       1       Standard Assigned           SAI
  00         0       0       Administratively Assigned   AAI
  10         1       0       Reserved                    Reserved

  : [Table 1](#table-1){.selfRef}: [SLAP
  Quadrants](#name-slap-quadrants){.selfRef}

MAC addresses derived from an Extended Local Identifier (ELI) are based
on an assigned Company ID (CID), which is 24 bits (including the M, X,
Y, and Z bits) for 48-bit MAC addresses. This leaves 24 bits for the
locally assigned address for each CID for unicast (M-bit = 0) and also
for multicast (M-bit = 1). The CID is assigned by the IEEE Registration
Authority (RA).[¶](#section-appendix.a-10){.pilcrow}

MAC addresses derived from a Standard Assigned Identifier (SAI) are
assigned by a protocol specified in an IEEE 802 standard. For 48-bit MAC
addresses, 44 bits are available. Multiple protocols for assigning SAIs
may be specified in IEEE standards. Coexistence of multiple protocols
may be supported by limiting the subspace available for assignment by
each protocol.[¶](#section-appendix.a-11){.pilcrow}

MAC addresses derived from an Administratively Assigned Identifier (AAI)
are assigned locally. Administrators manage the space as needed. Note
that multicast IPv6 packets \[[RFC2464](#RFC2464){.xref}\] use a
destination address starting in 33-33, so AAI addresses in that range
should not be assigned. For 48-bit MAC addresses, 44 bits are
available.[¶](#section-appendix.a-12){.pilcrow}

The last quadrant is reserved for future use. While this quadrant may
also be used similar to AAI space, administrators should be aware that
future specifications may define alternate uses that could be
incompatible.[¶](#section-appendix.a-13){.pilcrow}
:::
:::

::: {#acknowledgements}
::: {#section-appendix.b .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

Thanks to the DHC Working Group participants that reviewed this document
and provided comments and support. With special thanks to [Ian
Farrer]{.contact-name} for his thorough reviews and shepherding of this
document through the IETF process. Thanks also to directorate reviewers
[Samita Chakrabarti]{.contact-name}, [Roni Even]{.contact-name}, and
[Tianran Zhou]{.contact-name} and IESG members [Martin
Duke]{.contact-name}, [Benjamin Kaduk]{.contact-name}, [Murray
Kucherawy]{.contact-name}, [Warren Kumari]{.contact-name}, [Barry
Leiba]{.contact-name}, [Alvaro Retana]{.contact-name}, [Éric
Vyncke]{.contact-name}, and [Robert Wilton]{.contact-name} for their
suggestions. And thanks to [Roger Marks]{.contact-name}, [Robert
Grow]{.contact-name}, and [Antonio de la Oliva]{.contact-name} for
comments related to IEEE work and
references.[¶](#section-appendix.b-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Bernie Volz]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[300 Beaver Brook Rd]{.street-address}
:::

::: {.left dir="auto"}
[Boxborough]{.locality}, [MA]{.region} [01719]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <volz@cisco.com>
:::

::: {.left dir="auto"}
[Tomek Mrugalski]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Internet Systems Consortium, Inc.]{.org}
:::

::: {.left dir="auto"}
[PO Box 360]{.street-address}
:::

::: {.left dir="auto"}
[Newmarket]{.locality}, [NH]{.region} [03857]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <tomasz.mrugalski@gmail.com>
:::

::: {.left dir="auto"}
[Carlos J. Bernardos]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universidad Carlos III de Madrid]{.org}
:::

::: {.left dir="auto"}
[Av. Universidad, 30]{.street-address}
:::

::: {.left dir="auto"}
[28911]{.postal-code} [Leganes, Madrid]{.locality}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: tel
Phone: [+34 91624 6236](tel:+34%2091624%206236){.tel}
:::

::: email
Email: <cjbc@it.uc3m.es>
:::

::: url
URI: <http://www.it.uc3m.es/cjbc/>
:::
:::
:::
