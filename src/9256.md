  RFC 9256           SR Policy Architecture   July 2022
  ------------------ ------------------------ -----------
  Filsfils, et al.   Standards Track          \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9256](https://www.rfc-editor.org/rfc/rfc9256){.eref}

Updates:
:   [8402](https://www.rfc-editor.org/rfc/rfc8402){.eref}

Category:
:   Standards Track

Published:
:   July 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    C. Filsfils
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    K. Talaulikar, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    D. Voyer
    :::

    ::: org
    Bell Canada
    :::
    :::

    ::: author
    ::: author-name
    A. Bogdanov
    :::

    ::: org
    British Telecom
    :::
    :::

    ::: author
    ::: author-name
    P. Mattes
    :::

    ::: org
    Microsoft
    :::
    :::
:::

# RFC 9256 {#rfcnum}

# Segment Routing Policy Architecture {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Segment Routing (SR) allows a node to steer a packet flow along any
path. Intermediate per-path states are eliminated thanks to source
routing. SR Policy is an ordered list of segments (i.e., instructions)
that represent a source-routed policy. Packet flows are steered into an
SR Policy on a node where it is instantiated called a headend node. The
packets steered into an SR Policy carry an ordered list of segments
associated with that SR Policy.[¶](#section-abstract-1){.pilcrow}

This document updates RFC 8402 as it details the concepts of SR Policy
and steering into an SR Policy.[¶](#section-abstract-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9256>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [SR Policy](#name-sr-policy){.xref}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Identification of an SR
        Policy](#name-identification-of-an-sr-pol){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Candidate Path and Segment
        List](#name-candidate-path-and-segment-){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.3}
        [2.3](#section-2.3){.xref}.  [Protocol-Origin of a Candidate
        Path](#name-protocol-origin-of-a-candid){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.4}
        [2.4](#section-2.4){.xref}.  [Originator of a Candidate
        Path](#name-originator-of-a-candidate-p){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.5}
        [2.5](#section-2.5){.xref}.  [Discriminator of a Candidate
        Path](#name-discriminator-of-a-candidat){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.6}
        [2.6](#section-2.6){.xref}.  [Identification of a Candidate
        Path](#name-identification-of-a-candida){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.7}
        [2.7](#section-2.7){.xref}.  [Preference of a Candidate
        Path](#name-preference-of-a-candidate-p){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.8}
        [2.8](#section-2.8){.xref}.  [Validity of a Candidate
        Path](#name-validity-of-a-candidate-pat){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.9}
        [2.9](#section-2.9){.xref}.  [Active Candidate
        Path](#name-active-candidate-path){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.10}
        [2.10](#section-2.10){.xref}. [Validity of an SR
        Policy](#name-validity-of-an-sr-policy){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.11}
        [2.11](#section-2.11){.xref}. [Instantiation of an SR Policy in
        the Forwarding Plane](#name-instantiation-of-an-sr-poli){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.12}
        [2.12](#section-2.12){.xref}. [Priority of an SR
        Policy](#name-priority-of-an-sr-policy){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.13}
        [2.13](#section-2.13){.xref}. [Summary](#name-summary){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Segment Routing
    Database](#name-segment-routing-database){.xref}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Segment Types](#name-segment-types){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Explicit
        Null](#name-explicit-null){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Validity of a Candidate
    Path](#name-validity-of-a-candidate-path){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Explicit Candidate
        Path](#name-explicit-candidate-path){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [Dynamic Candidate
        Path](#name-dynamic-candidate-path){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Composite Candidate
        Path](#name-composite-candidate-path){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Binding SID](#name-binding-sid){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [BSID of a Candidate
        Path](#name-bsid-of-a-candidate-path){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [BSID of an SR
        Policy](#name-bsid-of-an-sr-policy){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [Forwarding
        Plane](#name-forwarding-plane){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Non-SR Usage of Binding
        SID](#name-non-sr-usage-of-binding-sid){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [SR Policy
    State](#name-sr-policy-state){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Steering into an SR
    Policy](#name-steering-into-an-sr-policy){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [Validity of an SR
        Policy](#name-validity-of-an-sr-policy-2){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [Drop-upon-Invalid SR
        Policy](#name-drop-upon-invalid-sr-policy){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [Incoming Active SID is a
        BSID](#name-incoming-active-sid-is-a-bs){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [8.4](#section-8.4){.xref}.  [Per-Destination
        Steering](#name-per-destination-steering){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.5}
        [8.5](#section-8.5){.xref}.  [Recursion on an On-Demand Dynamic
        BSID](#name-recursion-on-an-on-demand-d){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.6}
        [8.6](#section-8.6){.xref}.  [Per-Flow
        Steering](#name-per-flow-steering){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.7}
        [8.7](#section-8.7){.xref}.  [Policy-Based
        Routing](#name-policy-based-routing){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.8}
        [8.8](#section-8.8){.xref}.  [Optional Steering Modes for BGP
        Destinations](#name-optional-steering-modes-for){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Recovering from Network
    Failures](#name-recovering-from-network-fai){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Leveraging TI-LFA Local Protection
        of the Constituent IGP
        Segments](#name-leveraging-ti-lfa-local-pro){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Using an SR Policy to Locally
        Protect a Link](#name-using-an-sr-policy-to-local){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.3}
        [9.3](#section-9.3){.xref}.  [Using a Candidate Path for Path
        Protection](#name-using-a-candidate-path-for-){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Manageability
    Considerations](#name-manageability-consideration){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.12.2.1}
        [12.1](#section-12.1){.xref}.  [Guidance for Designated
        Experts](#name-guidance-for-designated-exp){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.13.2.1}
        [13.1](#section-13.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.13.2.2}
        [13.2](#section-13.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.14}
    [](#appendix-A){.xref}[Acknowledgement](#name-acknowledgement){.xref}
    :::

-   ::: {#section-toc.1-1.15}
    [](#appendix-B){.xref}[Contributors](#name-contributors){.xref}
    :::

-   ::: {#section-toc.1-1.16}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#Introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Segment Routing (SR) \[[RFC8402](#RFC8402){.xref}\] allows a node to
steer a packet flow along any path. The headend is a node where the
instructions for source routing (i.e., segments) are written into the
packet. It hence becomes the starting node for a specific segment
routing path. Intermediate per-path states are eliminated thanks to
source routing.[¶](#section-1-1){.pilcrow}

A Segment Routing Policy (SR Policy) \[[RFC8402](#RFC8402){.xref}\] is
an ordered list of segments (i.e., instructions) that represent a
source-routed policy. The headend node is said to steer a flow into an
SR Policy. The packets steered into an SR Policy have an ordered list of
segments associated with that SR Policy written into them.
\[[RFC8660](#RFC8660){.xref}\] describes the representation and
processing of this ordered list of segments as an MPLS label stack for
SR-MPLS, while \[[RFC8754](#RFC8754){.xref}\] and
\[[RFC8986](#RFC8986){.xref}\] describe the same for Segment Routing
over IPv6 (SRv6) with the use of the Segment Routing Header
(SRH).[¶](#section-1-2){.pilcrow}

\[[RFC8402](#RFC8402){.xref}\] introduces the SR Policy construct and
provides an overview of how it is leveraged for Segment Routing use
cases. This document updates \[[RFC8402](#RFC8402){.xref}\] to specify
detailed concepts of SR Policy and steering packets into an SR Policy.
It applies equally to the SR-MPLS and SRv6 instantiations of segment
routing.[¶](#section-1-3){.pilcrow}

::: {#reqlang}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.1-1){.pilcrow}
:::
:::
:::
:::

::: {#SR-policy}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [SR Policy](#name-sr-policy){.section-name .selfRef} {#name-sr-policy}

The general concept of SR Policy provides a framework that enables the
instantiation of an ordered list of segments on a node for implementing
a source routing policy for the steering of traffic for a specific
purpose (e.g., for a specific Service Level Agreement (SLA)) from that
node.[¶](#section-2-1){.pilcrow}

The Segment Routing architecture \[[RFC8402](#RFC8402){.xref}\]
specifies that any instruction can be bound to a segment. Thus, an SR
Policy can be built using any type of Segment Identifier (SID) including
those associated with topological or service
instructions.[¶](#section-2-2){.pilcrow}

This section defines the key aspects and constituents of an SR
Policy.[¶](#section-2-3){.pilcrow}

::: {#SR-policy-identification}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Identification of an SR Policy](#name-identification-of-an-sr-pol){.section-name .selfRef} {#name-identification-of-an-sr-pol}

An SR Policy [MUST]{.bcp14} be identified through the tuple \<Headend,
Color, Endpoint>. In the context of a specific headend, an SR Policy
[MUST]{.bcp14} be identified by the \<Color, Endpoint>
tuple.[¶](#section-2.1-1){.pilcrow}

The headend is the node where the policy is instantiated/implemented.
The headend is specified as an IPv4 or IPv6 address and [MUST]{.bcp14}
resolve to a unique node in the SR domain
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-2.1-2){.pilcrow}

The endpoint indicates the destination of the policy. The endpoint is
specified as an IPv4 or IPv6 address and [SHOULD]{.bcp14} resolve to a
unique node in the domain. In a specific case (refer to [Section
8.8.1](#Steering-optional-bgp-color-only-steering){.xref}), the endpoint
can be the unspecified address (0.0.0.0 for IPv4, :: for IPv6) and in
this case, the destination of the policy is indicated by the last
segment in the segment list(s).[¶](#section-2.1-3){.pilcrow}

The color is an unsigned non-zero 32-bit integer value that associates
the SR Policy with an intent or objective (e.g., low
latency).[¶](#section-2.1-4){.pilcrow}

The endpoint and the color are used to automate the steering of service
or transport routes on SR Policies (refer to [Section
8](#Steering){.xref}).[¶](#section-2.1-5){.pilcrow}

An implementation [MAY]{.bcp14} allow the assignment of a symbolic name
comprising printable ASCII \[[RFC0020](#RFC0020){.xref}\] characters
(i.e., 0x20 to 0x7E) to an SR Policy to serve as a user-friendly
attribute for debugging and troubleshooting purposes. Such symbolic
names may identify an SR Policy when the naming scheme ensures
uniqueness. The SR Policy name [MAY]{.bcp14} also be signaled along with
a candidate path of the SR Policy (refer to [Section
2.2](#SR-policy-candidate-path){.xref}). An SR Policy [MAY]{.bcp14} have
multiple names associated with it in the scenario where the headend
receives different SR Policy names along with different candidate paths
for the same SR Policy via the same or different
sources.[¶](#section-2.1-6){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Candidate Path and Segment List](#name-candidate-path-and-segment-){.section-name .selfRef} {#name-candidate-path-and-segment-}

An SR Policy is associated with one or more candidate paths. A candidate
path is the unit for signaling of an SR Policy to a headend via protocol
extensions like the Path Computation Element Communication Protocol
(PCEP) \[[RFC8664](#RFC8664){.xref}\]
\[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\]
or BGP SR Policy
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\].[¶](#section-2.2-1){.pilcrow}

A segment list represents a specific source-routed path to send traffic
from the headend to the endpoint of the corresponding SR
Policy.[¶](#section-2.2-2){.pilcrow}

A candidate path is either dynamic, explicit, or
composite.[¶](#section-2.2-3){.pilcrow}

An explicit candidate path is expressed as a segment list or a set of
segment lists.[¶](#section-2.2-4){.pilcrow}

A dynamic candidate path expresses an optimization objective and a set
of constraints for a specific data plane (i.e., SR-MPLS or SRv6). The
headend (potentially with the help of a PCE) computes a solution segment
list (or set of segment lists) that solves the optimization
problem.[¶](#section-2.2-5){.pilcrow}

If a candidate path is associated with a set of segment lists, each
segment list is associated with weight for weighted load balancing
(refer to [Section 2.11](#SR-policy-instantiation){.xref} for details).
The default weight is 1.[¶](#section-2.2-6){.pilcrow}

A composite candidate path acts as a container for grouping SR Policies.
The composite candidate path construct enables the combination of SR
Policies, each with explicit candidate paths and/or dynamic candidate
paths with potentially different optimization objectives and
constraints, for load-balanced steering of packet flows over its
constituent SR Policies. The following criteria apply for inclusion of
constituent SR Policies using a composite candidate path under a parent
SR Policy:[¶](#section-2.2-7){.pilcrow}

-   [The endpoints of the constituent SR Policies and the parent SR
    Policy [MUST]{.bcp14} be
    identical.[¶](#section-2.2-8.1){.pilcrow}]{#section-2.2-8.1}
-   [The colors of each of the constituent SR Policies and the parent SR
    Policy [MUST]{.bcp14} be
    different.[¶](#section-2.2-8.2){.pilcrow}]{#section-2.2-8.2}
-   [The constituent SR Policies [MUST NOT]{.bcp14} use composite
    candidate paths.[¶](#section-2.2-8.3){.pilcrow}]{#section-2.2-8.3}

Each constituent SR Policy of a composite candidate path is associated
with weight for load-balancing purposes (refer to [Section
2.11](#SR-policy-instantiation){.xref} for details). The default weight
is 1.[¶](#section-2.2-9){.pilcrow}

[Section 2.13](#SR-policy-summary){.xref} illustrates an information
model for hierarchical relationships between the SR Policy constructs
described in this section.[¶](#section-2.2-10){.pilcrow}
:::
:::

::: {#SR-policy-protocol-origin}
::: {#section-2.3 .section}
### [2.3.](#section-2.3){.section-number .selfRef} [Protocol-Origin of a Candidate Path](#name-protocol-origin-of-a-candid){.section-name .selfRef} {#name-protocol-origin-of-a-candid}

A headend may be informed about a candidate path for an SR Policy
\<Color, Endpoint> by various means including: via configuration, PCEP
\[[RFC8664](#RFC8664){.xref}\]
\[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\],
or BGP
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\].[¶](#section-2.3-1){.pilcrow}

Protocol-Origin of a candidate path is an 8-bit value associated with
the mechanism or protocol used for signaling/provisioning the SR Policy.
It helps identify the protocol/mechanism that provides or signals the
candidate path and indicates its preference relative to other
protocols/mechanisms.[¶](#section-2.3-2){.pilcrow}

The headend assigns different Protocol-Origin values to each source of
SR Policy information. The Protocol-Origin value is used as a tiebreaker
between candidate paths of equal Preference, as described in [Section
2.9](#SR-policy-candidate-path-active){.xref}. The table below specifies
the [RECOMMENDED]{.bcp14} default values of
Protocol-Origin:[¶](#section-2.3-3){.pilcrow}

[]{#name-protocol-origin-default-val}

::: {#table_ex}
  Protocol-Origin   Description
  ----------------- -------------------
  10                PCEP
  20                BGP SR Policy
  30                Via Configuration

  : [Table 1](#table-1){.selfRef}: [Protocol-Origin Default
  Values](#name-protocol-origin-default-val){.selfRef}
:::

Note that the above order is to satisfy the need for having a clear
ordering, and implementations [MAY]{.bcp14} allow modifications of these
default values assigned to protocols on the headend along similar lines
as a routing administrative distance. Its application in the candidate
path selection is described in [Section
2.9](#SR-policy-candidate-path-active){.xref}.[¶](#section-2.3-5){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-originator}
::: {#section-2.4 .section}
### [2.4.](#section-2.4){.section-number .selfRef} [Originator of a Candidate Path](#name-originator-of-a-candidate-p){.section-name .selfRef} {#name-originator-of-a-candidate-p}

The Originator identifies the node that provisioned or signaled the
candidate path on the headend. The Originator is expressed in the form
of a 160-bit numerical value formed by the concatenation of the fields
of the tuple \<Autonomous System Number (ASN), node-address> as
below:[¶](#section-2.4-1){.pilcrow}

[]{.break}

Autonomous System Number (ASN):
:   represented as a 4-byte number. If 2-byte ASNs are in use, the
    low-order 16 bits [MUST]{.bcp14} be used, and the high-order bits
    [MUST]{.bcp14} be set to 0.[¶](#section-2.4-2.2){.pilcrow}
:   

Node Address:
:   represented as a 128-bit value. IPv4 addresses [MUST]{.bcp14} be
    encoded in the lowest 32 bits, and the high-order bits
    [MUST]{.bcp14} be set to 0.[¶](#section-2.4-2.4){.pilcrow}
:   

Its application in the candidate path selection is described in [Section
2.9](#SR-policy-candidate-path-active){.xref}.[¶](#section-2.4-3){.pilcrow}

When provisioning is via configuration, the ASN and node address
[MAY]{.bcp14} be set to either the headend or the provisioning
controller/node ASN and address. The default value is 0 for both AS and
node address.[¶](#section-2.4-4){.pilcrow}

When signaling is via PCEP, it is the IPv4 or IPv6 address of the PCE,
and the AS number is expected to be set to 0 by default when not
available or known.[¶](#section-2.4-5){.pilcrow}

When signaling is via BGP SR Policy, the ASN and node address are
provided by BGP (refer to
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\]) on
the headend.[¶](#section-2.4-6){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-discriminator}
::: {#section-2.5 .section}
### [2.5.](#section-2.5){.section-number .selfRef} [Discriminator of a Candidate Path](#name-discriminator-of-a-candidat){.section-name .selfRef} {#name-discriminator-of-a-candidat}

The Discriminator is a 32-bit value associated with a candidate path
that uniquely identifies it within the context of an SR Policy from a
specific Protocol-Origin as specified
below:[¶](#section-2.5-1){.pilcrow}

-   [When provisioning is via configuration, this is a unique identifier
    for a candidate path; it is specific to the implementation\'s
    configuration model. The default value is
    0.[¶](#section-2.5-2.1){.pilcrow}]{#section-2.5-2.1}
-   [When signaling is via PCEP, the method to uniquely signal an
    individual candidate path along with its Discriminator is described
    in
    \[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\].
    The default value is
    0.[¶](#section-2.5-2.2){.pilcrow}]{#section-2.5-2.2}
-   [When signaling is via BGP SR Policy, the BGP process receiving the
    route provides the distinguisher (refer to
    \[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\])
    as the Discriminator. Note that the BGP best path selection is
    applied before the route is supplied as a candidate path, so only a
    single candidate path for a given SR Policy will be seen for a given
    Discriminator.[¶](#section-2.5-2.3){.pilcrow}]{#section-2.5-2.3}

Its application in the candidate path selection is described in [Section
2.9](#SR-policy-candidate-path-active){.xref}.[¶](#section-2.5-3){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-identification}
::: {#section-2.6 .section}
### [2.6.](#section-2.6){.section-number .selfRef} [Identification of a Candidate Path](#name-identification-of-a-candida){.section-name .selfRef} {#name-identification-of-a-candida}

A candidate path is identified in the context of a single SR
Policy.[¶](#section-2.6-1){.pilcrow}

A candidate path is not shared across SR
Policies.[¶](#section-2.6-2){.pilcrow}

A candidate path is not identified by its segment
list(s).[¶](#section-2.6-3){.pilcrow}

If CP1 is a candidate path of SR Policy Pol1 and CP2 is a candidate path
of SR Policy Pol2, then these two candidate paths are independent, even
if they happen to have the same segment list. The segment list does not
identify a candidate path. The segment list is an attribute of a
candidate path.[¶](#section-2.6-4.1){.pilcrow}

The identity of a candidate path [MUST]{.bcp14} be uniquely established
in the context of an SR Policy \<Headend, Color, Endpoint> to handle
add, delete, or modify operations on them in an unambiguous manner
regardless of their source(s).[¶](#section-2.6-5){.pilcrow}

The tuple \<Protocol-Origin, Originator, Discriminator> uniquely
identifies a candidate path.[¶](#section-2.6-6){.pilcrow}

Candidate paths [MAY]{.bcp14} also be assigned or signaled with a
symbolic name comprising printable ASCII \[[RFC0020](#RFC0020){.xref}\]
characters (i.e., 0x20 to 0x7E) to serve as a user-friendly attribute
for debugging and troubleshooting purposes. Such symbolic names [MUST
NOT]{.bcp14} be considered as identifiers for a candidate path. The
signaling of the candidate path name via BGP and PCEP is described in
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\] and
\[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\],
respectively.[¶](#section-2.6-7){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-preference}
::: {#section-2.7 .section}
### [2.7.](#section-2.7){.section-number .selfRef} [Preference of a Candidate Path](#name-preference-of-a-candidate-p){.section-name .selfRef} {#name-preference-of-a-candidate-p}

The Preference of the candidate path is used to select the best
candidate path for an SR Policy. It is a 32-bit value where a higher
value indicates higher preference and the default Preference value is
100.[¶](#section-2.7-1){.pilcrow}

It is [RECOMMENDED]{.bcp14} that each candidate path of a given SR
Policy has a different Preference.[¶](#section-2.7-2){.pilcrow}

The signaling of the candidate path Preference via BGP and PCEP is
described in
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\] and
\[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\],
respectively.[¶](#section-2.7-3){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-validity}
::: {#section-2.8 .section}
### [2.8.](#section-2.8){.section-number .selfRef} [Validity of a Candidate Path](#name-validity-of-a-candidate-pat){.section-name .selfRef} {#name-validity-of-a-candidate-pat}

A candidate path is usable when it is valid. The [RECOMMENDED]{.bcp14}
candidate path validity criterion is the validity of at least one of its
constituent segment lists. The validation rules are specified in
[Section 5](#Path-validity){.xref}.[¶](#section-2.8-1){.pilcrow}
:::
:::

::: {#SR-policy-candidate-path-active}
::: {#section-2.9 .section}
### [2.9.](#section-2.9){.section-number .selfRef} [Active Candidate Path](#name-active-candidate-path){.section-name .selfRef} {#name-active-candidate-path}

A candidate path is selected when it is valid and it is determined to be
the best path of the SR Policy. The selected path is referred to as the
\"active path\" of the SR Policy in this
document.[¶](#section-2.9-1){.pilcrow}

Whenever a new path is learned or an active path is deleted, the
validity of an existing path changes, or an existing path is changed,
the selection process [MUST]{.bcp14} be
re-executed.[¶](#section-2.9-2){.pilcrow}

The candidate path selection process operates primarily on the candidate
path Preference. A candidate path is selected when it is valid and it
has the highest Preference value among all the valid candidate paths of
the SR Policy.[¶](#section-2.9-3){.pilcrow}

In the case of multiple valid candidate paths of the same Preference,
the tie-breaking rules are evaluated on the identification tuple in the
following order until only one valid best path is
selected:[¶](#section-2.9-4){.pilcrow}

1.  [The higher value of Protocol-Origin is
    selected.[¶](#section-2.9-5.1){.pilcrow}]{#section-2.9-5.1}
2.  [If specified by configuration, prefer the existing installed
    path.[¶](#section-2.9-5.2){.pilcrow}]{#section-2.9-5.2}
3.  [The lower value of the Originator is
    selected.[¶](#section-2.9-5.3){.pilcrow}]{#section-2.9-5.3}
4.  [Finally, the higher value of the Discriminator is
    selected.[¶](#section-2.9-5.4){.pilcrow}]{#section-2.9-5.4}

The rules are framed with multiple protocols and sources in mind and
hence may not follow the logic of a single protocol (e.g., BGP best path
selection). The motivation behind these rules are as
follows:[¶](#section-2.9-6){.pilcrow}

-   [The Preference, being the primary criterion, allows an operator to
    influence selection across paths thus allowing provisioning of
    multiple path options, e.g., CP1 is preferred as its Preference
    value is the highest, and if it becomes invalid, then CP2 with the
    next highest Preference value is selected, and so on. Since
    Preference works across protocol sources, it also enables (where
    necessary) selective override of the default Protocol-Origin
    preference, e.g., to prefer a path signaled via BGP SR Policy over
    what is
    configured.[¶](#section-2.9-7.1){.pilcrow}]{#section-2.9-7.1}
-   [The Protocol-Origin allows an operator to set up a default
    selection mechanism across protocol sources, e.g., to prefer
    configured paths over paths signaled via BGP SR Policy or
    PCEP.[¶](#section-2.9-7.2){.pilcrow}]{#section-2.9-7.2}
-   [The Originator allows an operator to have multiple redundant
    controllers and still maintain a deterministic behavior over which
    of them are preferred even if they are providing the same candidate
    paths for the same SR policies to the
    headend.[¶](#section-2.9-7.3){.pilcrow}]{#section-2.9-7.3}
-   [The Discriminator performs the final tie-breaking step to ensure a
    deterministic outcome of selection regardless of the order in which
    candidate paths are signaled across multiple transport channels or
    sessions.[¶](#section-2.9-7.4){.pilcrow}]{#section-2.9-7.4}

\[[SR-POLICY-CONSID](#I-D.filsfils-spring-sr-policy-considerations){.xref}\]
provides a set of examples to illustrate the active candidate path
selection rules.[¶](#section-2.9-8){.pilcrow}
:::
:::

::: {#SR-policy-validity}
::: {#section-2.10 .section}
### [2.10.](#section-2.10){.section-number .selfRef} [Validity of an SR Policy](#name-validity-of-an-sr-policy){.section-name .selfRef} {#name-validity-of-an-sr-policy}

An SR Policy is valid when it has at least one valid candidate
path.[¶](#section-2.10-1){.pilcrow}
:::
:::

::: {#SR-policy-instantiation}
::: {#section-2.11 .section}
### [2.11.](#section-2.11){.section-number .selfRef} [Instantiation of an SR Policy in the Forwarding Plane](#name-instantiation-of-an-sr-poli){.section-name .selfRef} {#name-instantiation-of-an-sr-poli}

Generally, only valid SR policies are instantiated in the forwarding
plane.[¶](#section-2.11-1){.pilcrow}

Only the active candidate path [MUST]{.bcp14} be used for forwarding
traffic that is being steered onto that policy except for certain
scenarios such as fast reroute where a backup candidate path may be used
as described in [Section
9.3](#cp-path-protection){.xref}.[¶](#section-2.11-2){.pilcrow}

If a set of segment lists is associated with the active path of the
policy, then the steering is per flow and weighted-ECMP (W-ECMP) based
according to the relative weight of each segment
list.[¶](#section-2.11-3){.pilcrow}

The fraction of the flows associated with a given segment list is w/⁠Sw,
where w is the weight of the segment list and Sw is the sum of the
weights of the segment lists of the selected path of the SR
Policy.[¶](#section-2.11-4){.pilcrow}

When a composite candidate path is active, the fraction of flows steered
into each constituent SR Policy is equal to the relative weight of each
constituent SR Policy. Further load-balancing of flows steered into a
constituent SR Policy is performed based on the weights of the segment
list of the active candidate path of that constituent SR
Policy.[¶](#section-2.11-5){.pilcrow}

The accuracy of the weighted load-balancing depends on the platform
implementation.[¶](#section-2.11-6){.pilcrow}
:::
:::

::: {#SR-policy-priority}
::: {#section-2.12 .section}
### [2.12.](#section-2.12){.section-number .selfRef} [Priority of an SR Policy](#name-priority-of-an-sr-policy){.section-name .selfRef} {#name-priority-of-an-sr-policy}

Upon topological change, many policies could be re-computed or
revalidated. An implementation [MAY]{.bcp14} provide a per-policy
priority configuration. The operator may set this field to indicate the
order in which the policies should be re-computed. Such a priority is
represented by an integer in the range (0, 255) where the lowest value
is the highest priority. The default value of priority is
128.[¶](#section-2.12-1){.pilcrow}

An SR Policy may comprise multiple candidate paths received from the
same or different sources. A candidate path [MAY]{.bcp14} be signaled
with a priority value. When an SR Policy has multiple candidate paths
with distinct signaled non-default priority values and the SR Policy
itself does not have a priority value configured, the SR Policy as a
whole takes the lowest value (i.e., the highest priority) amongst these
signaled priority values.[¶](#section-2.12-2){.pilcrow}
:::
:::

::: {#SR-policy-summary}
::: {#section-2.13 .section}
### [2.13.](#section-2.13){.section-number .selfRef} [Summary](#name-summary){.section-name .selfRef} {#name-summary}

In summary, the information model is the
following:[¶](#section-2.13-1){.pilcrow}

[]{.break}

SR Policy POL1
:   \<Headend = H1, Color = 1, Endpoint =
    E1>[¶](#section-2.13-2.2){.pilcrow}
:   

Candidate Path CP1
:   \<Protocol-Origin = 20, Originator = 64511:192.0.2.1, Discriminator
    = 1>[¶](#section-2.13-2.4){.pilcrow}
:   

Preference
:   200[¶](#section-2.13-2.6){.pilcrow}
:   

Priority
:   10[¶](#section-2.13-2.8){.pilcrow}
:   

Segment List 1
:   \<SID11\...SID1i>, Weight W1[¶](#section-2.13-2.10){.pilcrow}
:   

Segment List 2
:   \<SID21\...SID2j>, Weight W2[¶](#section-2.13-2.12){.pilcrow}
:   

Candidate Path CP2
:   \<Protocol-Origin = 20, Originator = 64511:192.0.2.2, Discriminator
    = 2>[¶](#section-2.13-2.14){.pilcrow}
:   

Preference
:   100[¶](#section-2.13-2.16){.pilcrow}
:   

Priority
:   10[¶](#section-2.13-2.18){.pilcrow}
:   

Segment List 3
:   \<SID31\...SID3i>, Weight W3[¶](#section-2.13-2.20){.pilcrow}
:   

Segment List 4
:   \<SID41\...SID4j>, Weight W4[¶](#section-2.13-2.22){.pilcrow}
:   

The SR Policy POL1 is identified by the tuple \<Headend, Color,
Endpoint>. It has two candidate paths: CP1 and CP2. Each is identified
by a tuple \<Protocol-Origin, Originator, Discriminator> within the
scope of POL1. CP1 is the active candidate path (it is valid and has the
highest Preference). The two segment lists of CP1 are installed as the
forwarding instantiation of SR Policy POL1. Traffic steered on POL1 is
flow-based hashed on segment list \<SID11\...SID1i> with a ratio
W1/(W1+W2).[¶](#section-2.13-3){.pilcrow}

The information model of SR Policy POL100 having a composite candidate
path is the following:[¶](#section-2.13-4){.pilcrow}

[]{.break}

SR Policy POL100 \<Headend = H1, Color = 100, Endpoint = E1>

:   

:   

Candidate Path CP1 \<Protocol-Origin = 20, Originator = 64511:192.0.2.1, Discriminator = 1>

:   

:   

Preference 200

:   

:   

SR Policy \<Color = 1>, Weight W1

:   

:   

SR Policy \<Color = 2>, Weight W2

:   

:   

The constituent SR Policies POL1 and POL2 have an information model as
described at the start of this section. They are referenced only by
color in the composite candidate path since their headend and endpoint
are identical to the POL100. The valid segment lists of the active
candidate path of POL1 and POL2 are installed in the forwarding. Traffic
steered on POL100 is hashed on a per-flow basis on POL1 with a
proportion W1/(W1+W2). Within the POL1, the flow-based hashing over its
segment lists are performed as described earlier in this
section.[¶](#section-2.13-6){.pilcrow}
:::
:::
:::
:::

::: {#SR-database}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Segment Routing Database](#name-segment-routing-database){.section-name .selfRef} {#name-segment-routing-database}

An SR Policy computation node (e.g., headend or controller) maintains
the Segment Routing Database (SR-DB). The SR-DB is a conceptual database
to illustrate the various pieces of information and their sources that
may help in SR Policy computation and validation. There is no specific
requirement for an implementation to create a new database as
such.[¶](#section-3-1){.pilcrow}

An SR headend leverages the SR-DB to validate explicit candidate paths
and compute dynamic candidate paths.[¶](#section-3-2){.pilcrow}

The information in the SR-DB may include:[¶](#section-3-3){.pilcrow}

-   [IGP information (topology, IGP metrics based on IS-IS
    \[[RFC1195](#RFC1195){.xref}\] and OSPF
    \[[RFC2328](#RFC2328){.xref}\]
    \[[RFC5340](#RFC5340){.xref}\])[¶](#section-3-4.1){.pilcrow}]{#section-3-4.1}
-   [Segment Routing information (such as Segment Routing Global Block,
    Segment Routing Local Block, Prefix-SIDs, Adj-SIDs, BGP Peering SID,
    SRv6 SIDs) \[[RFC8402](#RFC8402){.xref}\]
    \[[RFC8986](#RFC8986){.xref}\][¶](#section-3-4.2){.pilcrow}]{#section-3-4.2}
-   [TE Link Attributes (such as TE metric, Shared Risk Link Groups,
    attribute-flag, extended admin group) \[[RFC5305](#RFC5305){.xref}\]
    \[[RFC3630](#RFC3630){.xref}\]
    \[[RFC5329](#RFC5329){.xref}\][¶](#section-3-4.3){.pilcrow}]{#section-3-4.3}
-   [Extended TE Link attributes (such as latency, loss)
    \[[RFC8570](#RFC8570){.xref}\]
    \[[RFC7471](#RFC7471){.xref}\][¶](#section-3-4.4){.pilcrow}]{#section-3-4.4}
-   [Inter-AS Topology information
    \[[RFC9086](#RFC9086){.xref}\][¶](#section-3-4.5){.pilcrow}]{#section-3-4.5}

The attached domain topology may be learned via protocol/mechanisms such
as IGP, Border Gateway Protocol - Link State (BGP-LS), or
NETCONF.[¶](#section-3-5){.pilcrow}

A non-attached (remote) domain topology may be learned via
protocol/mechanisms such as BGP-LS or
NETCONF.[¶](#section-3-6){.pilcrow}

In some use cases, the SR-DB may only contain the attached domain
topology while in others, the SR-DB may contain the topology of multiple
domains and in this case, it is multi-domain
capable.[¶](#section-3-7){.pilcrow}

The SR-DB may also contain the SR Policies instantiated in the network.
This can be collected via BGP-LS
\[[BGP-LS-TE-POLICY](#I-D.ietf-idr-te-lsp-distribution){.xref}\] or PCEP
\[[RFC8231](#RFC8231){.xref}\] (along with
\[[PCEP-SR-POLICY-CP](#I-D.ietf-pce-segment-routing-policy-cp){.xref}\]
and \[[PCEP-BSID-LABEL](#I-D.ietf-pce-binding-label-sid){.xref}\]). This
information allows to build an end-to-end policy on the basis of
intermediate SR policies (see [Section 6](#Binding-SID){.xref} for
further details).[¶](#section-3-8){.pilcrow}

The SR-DB may also contain the Maximum SID Depth (MSD) capability of
nodes in the topology. This can be collected via IS-IS
\[[RFC8491](#RFC8491){.xref}\], OSPF \[[RFC8476](#RFC8476){.xref}\],
BGP-LS \[[RFC8814](#RFC8814){.xref}\], or PCEP
\[[RFC8664](#RFC8664){.xref}\].[¶](#section-3-9){.pilcrow}

The use of the SR-DB for path computation and for the validation of
optimization objective and constraints of paths is outside the scope of
this document. Some implementation aspects related to path computation
are covered in
\[[SR-POLICY-CONSID](#I-D.filsfils-spring-sr-policy-considerations){.xref}\].[¶](#section-3-10){.pilcrow}
:::
:::

::: {#SID-List}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Segment Types](#name-segment-types){.section-name .selfRef} {#name-segment-types}

A segment list is an ordered set of segments represented as \<S1, S2,
\... Sn> where S1 is the first segment.[¶](#section-4-1){.pilcrow}

Based on the desired data plane, either the MPLS label stack or the SRv6
Segment Routing Header \[[RFC8754](#RFC8754){.xref}\] is built from the
segment list. However, the segment list itself can be specified using
different segment-descriptor types and the following are currently
defined:[¶](#section-4-2){.pilcrow}

[]{.break}

Type A: SR-MPLS Label:

:   An MPLS label corresponding to any of the segment types defined for
    SR-MPLS (as defined in \[[RFC8402](#RFC8402){.xref}\] or other
    SR-MPLS specifications) can be used. Additionally, special purpose
    labels like explicit-null or in general any MPLS label [MAY]{.bcp14}
    also be used. For example, this type can be used to specify a label
    representation that maps to an optical transport path on a packet
    transport node.[¶](#section-4-3.2.1){.pilcrow}

:   

Type B: SRv6 SID:

:   An IPv6 address corresponding to any of the SID behaviors for SRv6
    (as defined in \[[RFC8986](#RFC8986){.xref}\] or other SRv6
    specifications) can be used. Optionally, the SRv6 SID behavior (as
    defined in \[[RFC8986](#RFC8986){.xref}\] or other SRv6
    specifications) and structure (as defined in
    \[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} also be provided for
    the headend to perform validation of the SID when using it for
    building the segment list.[¶](#section-4-3.4.1){.pilcrow}

:   

Type C: IPv4 Prefix with optional SR Algorithm:

:   In this case, the headend is required to resolve the specified IPv4
    Prefix Address to the SR-MPLS label corresponding to its Prefix SID
    segment (as defined in \[[RFC8402](#RFC8402){.xref}\]). The SR
    algorithm (refer to [Section
    3.1.1](https://www.rfc-editor.org/rfc/rfc8402#section-3.1.1){.relref}
    of \[[RFC8402](#RFC8402){.xref}\]) to be used [MAY]{.bcp14} also be
    provided.[¶](#section-4-3.6.1){.pilcrow}

:   

Type D: IPv6 Global Prefix with optional SR Algorithm for SR-MPLS:

:   In this case, the headend is required to resolve the specified IPv6
    Global Prefix Address to the SR-MPLS label corresponding to its
    Prefix SID segment (as defined in \[[RFC8402](#RFC8402){.xref}\]).
    The SR Algorithm (refer to [Section
    3.1.1](https://www.rfc-editor.org/rfc/rfc8402#section-3.1.1){.relref}
    of \[[RFC8402](#RFC8402){.xref}\]) to be used [MAY]{.bcp14} also be
    provided.[¶](#section-4-3.8.1){.pilcrow}

:   

Type E: IPv4 Prefix with Local Interface ID:

:   This type allows for identification of an Adjacency SID or BGP Peer
    Adjacency SID (as defined in \[[RFC8402](#RFC8402){.xref}\]) SR-MPLS
    label for point-to-point links including IP unnumbered links. The
    headend is required to resolve the specified IPv4 Prefix Address to
    the node originating it and then use the Local Interface ID to
    identify the point-to-point link whose adjacency is being referred
    to. The Local Interface ID link descriptor follows semantics as
    specified in \[[RFC5307](#RFC5307){.xref}\]. This type can also be
    used to indicate indirection into a layer 2 interface (i.e., without
    IP address) like a representation of an optical transport path or a
    layer 2 Ethernet port or circuit at the specified
    node.[¶](#section-4-3.10.1){.pilcrow}

:   

Type F: IPv4 Addresses for link endpoints as Local, Remote pair:

:   This type allows for identification of an Adjacency SID or BGP Peer
    Adjacency SID (as defined in \[[RFC8402](#RFC8402){.xref}\]) SR-MPLS
    label for links. The headend is required to resolve the specified
    IPv4 Local Address to the node originating it and then use the IPv4
    Remote Address to identify the link adjacency being referred to. The
    Local and Remote Address pair link descriptors follow semantics as
    specified in
    \[[RFC7752](#RFC7752){.xref}\].[¶](#section-4-3.12.1){.pilcrow}

:   

Type G: IPv6 Prefix and Interface ID for link endpoints as Local, Remote pair for SR-MPLS:

:   This type allows for identification of an Adjacency SID or BGP Peer
    Adjacency SID (as defined in \[[RFC8402](#RFC8402){.xref}\]) label
    for links including those with only Link-Local IPv6 addresses. The
    headend is required to resolve the specified IPv6 Prefix Address to
    the node originating it and then use the Local Interface ID to
    identify the point-to-point link whose adjacency is being referred
    to. For other than point-to-point links, additionally the specific
    adjacency over the link needs to be resolved using the Remote Prefix
    and Interface ID. The Local and Remote pair of Prefix and Interface
    ID link descriptor follows semantics as specified in
    \[[RFC7752](#RFC7752){.xref}\]. This type can also be used to
    indicate indirection into a layer 2 interface (i.e., without IP
    address) like a representation of an optical transport path or a
    layer 2 Ethernet port or circuit at the specified
    node.[¶](#section-4-3.14.1){.pilcrow}

:   

Type H: IPv6 Addresses for link endpoints as Local, Remote pair for SR-MPLS:

:   This type allows for identification of an Adjacency SID or BGP Peer
    Adjacency SID (as defined in \[[RFC8402](#RFC8402){.xref}\]) label
    for links with Global IPv6 addresses. The headend is required to
    resolve the specified Local IPv6 Address to the node originating it
    and then use the Remote IPv6 Address to identify the link adjacency
    being referred to. The Local and Remote Address pair link
    descriptors follow semantics as specified in
    \[[RFC7752](#RFC7752){.xref}\].[¶](#section-4-3.16.1){.pilcrow}

:   

Type I: IPv6 Global Prefix with optional SR Algorithm for SRv6:

:   The headend is required to resolve the specified IPv6 Global Prefix
    Address to an SRv6 SID corresponding to a Prefix SID segment (as
    defined in \[[RFC8402](#RFC8402){.xref}\]), such as a SID associated
    with the End behavior (as defined in \[[RFC8986](#RFC8986){.xref}\])
    of the node that is originating the prefix. The SR Algorithm (refer
    to [Section
    3.1.1](https://www.rfc-editor.org/rfc/rfc8402#section-3.1.1){.relref}
    of \[[RFC8402](#RFC8402){.xref}\]), the SRv6 SID behavior (as
    defined in \[[RFC8986](#RFC8986){.xref}\] or other SRv6
    specifications), and structure (as defined in
    \[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} also be
    provided.[¶](#section-4-3.18.1){.pilcrow}

:   

Type J: IPv6 Prefix and Interface ID for link endpoints as Local, Remote pair for SRv6:

:   This type allows for identification of an SRv6 SID corresponding to
    an Adjacency SID or BGP Peer Adjacency SID (as defined in
    \[[RFC8402](#RFC8402){.xref}\]), such as a SID associated with the
    End.X behavior (as defined in \[[RFC8986](#RFC8986){.xref}\])
    associated with link or adjacency with only Link-Local IPv6
    addresses. The headend is required to resolve the specified IPv6
    Prefix Address to the node originating it and then use the Local
    Interface ID to identify the point-to-point link whose adjacency is
    being referred to. For other than point-to-point links, additionally
    the specific adjacency needs to be resolved using the Remote Prefix
    and Interface ID. The Local and Remote pair of Prefix and Interface
    ID link descriptor follows semantics as specified in
    \[[RFC7752](#RFC7752){.xref}\]. The SR Algorithm (refer to [Section
    3.1.1](https://www.rfc-editor.org/rfc/rfc8402#section-3.1.1){.relref}
    of \[[RFC8402](#RFC8402){.xref}\]), the SRv6 SID behavior (as
    defined in \[[RFC8986](#RFC8986){.xref}\] or other SRv6
    specifications), and structure (as defined in
    \[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} also be
    provided.[¶](#section-4-3.20.1){.pilcrow}

:   

Type K: IPv6 Addresses for link endpoints as Local, Remote pair for SRv6:

:   This type allows for identification of an SRv6 SID corresponding to
    an Adjacency SID or BGP Peer Adjacency SID (as defined in
    \[[RFC8402](#RFC8402){.xref}\]), such as a SID associated with the
    End.X behavior (as defined in \[[RFC8986](#RFC8986){.xref}\])
    associated with link or adjacency with Global IPv6 addresses. The
    headend is required to resolve the specified Local IPv6 Address to
    the node originating it and then use the Remote IPv6 Address to
    identify the link adjacency being referred to. The Local and Remote
    Address pair link descriptors follow semantics as specified in
    \[[RFC7752](#RFC7752){.xref}\]. The SR Algorithm (refer to [Section
    3.1.1](https://www.rfc-editor.org/rfc/rfc8402#section-3.1.1){.relref}
    of \[[RFC8402](#RFC8402){.xref}\]), the SRv6 SID behavior (as
    defined in \[[RFC8986](#RFC8986){.xref}\] or other SRv6
    specifications), and structure (as defined in
    \[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} also be
    provided.[¶](#section-4-3.22.1){.pilcrow}

:   

When the algorithm is not specified for the SID types above which
optionally allow for it, the headend [SHOULD]{.bcp14} use the Strict
Shortest Path algorithm if available and otherwise, it [SHOULD]{.bcp14}
use the default Shortest Path algorithm. The specification of the
algorithm enables the use of SIDs specific to the IGP Flex Algorithm
\[[IGP-FLEX-ALGO](#I-D.ietf-lsr-flex-algo){.xref}\] in SR
Policy.[¶](#section-4-4){.pilcrow}

For SID types C through K, a SID value [MAY]{.bcp14} also be optionally
provided to the headend for verification purposes. [Section
5.1](#Path-validity-explicit){.xref} describes the resolution and
verification of the SIDs and segment lists on the
headend.[¶](#section-4-5){.pilcrow}

When building the MPLS label stack or the SRv6 SID list from the segment
list, the node instantiating the policy [MUST]{.bcp14} interpret the set
of Segments as follows:[¶](#section-4-6){.pilcrow}

-   [The first Segment represents the topmost MPLS label or the first
    SRv6 SID. It identifies the active segment the traffic will be
    directed toward along the explicit SR
    path.[¶](#section-4-7.1){.pilcrow}]{#section-4-7.1}
-   [The last segment represents the bottommost MPLS label or the last
    SRv6 SID the traffic will be directed toward along the explicit SR
    path.[¶](#section-4-7.2){.pilcrow}]{#section-4-7.2}

::: {#Explicit-Null}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Explicit Null](#name-explicit-null){.section-name .selfRef} {#name-explicit-null}

A Type A SID [MAY]{.bcp14} be any MPLS label, including special purpose
labels.[¶](#section-4.1-1){.pilcrow}

For example, assuming that the desired traffic-engineered path from a
headend 1 to an endpoint 4 can be expressed by the segment list \<16002,
16003, 16004> where 16002, 16003, and 16004, respectively, refer to the
IPv4 Prefix SIDs bound to nodes 2, 3, and 4, then IPv6 traffic can be
traffic-engineered from nodes 1 to 4 via the previously described path
using an SR Policy with segment list \<16002, 16003, 16004, 2> where the
MPLS label value of 2 represents the \"IPv6 Explicit NULL
Label\".[¶](#section-4.1-2){.pilcrow}

The penultimate node before node 4 will pop 16004 and will forward the
frame on its directly connected interface to node
4.[¶](#section-4.1-3){.pilcrow}

The endpoint receives the traffic with the top label \"2\", which
indicates that the payload is an IPv6
packet.[¶](#section-4.1-4){.pilcrow}

When steering unlabeled IPv6 BGP destination traffic using an SR Policy
composed of segment list(s) based on IPv4 SIDs, the Explicit Null Label
Policy is processed as specified in
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\].
When an \"IPv6 Explicit NULL label\" is not present as the bottom label,
the headend [SHOULD]{.bcp14} automatically impose one. Refer to [Section
8](#Steering){.xref} for more details.[¶](#section-4.1-5){.pilcrow}
:::
:::
:::
:::

::: {#Path-validity}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Validity of a Candidate Path](#name-validity-of-a-candidate-path){.section-name .selfRef} {#name-validity-of-a-candidate-path}

::: {#Path-validity-explicit}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Explicit Candidate Path](#name-explicit-candidate-path){.section-name .selfRef} {#name-explicit-candidate-path}

An explicit candidate path is associated with a segment list or a set of
segment lists.[¶](#section-5.1-1){.pilcrow}

An explicit candidate path is provisioned by the operator directly or
via a controller.[¶](#section-5.1-2){.pilcrow}

The computation/logic that leads to the choice of the segment list is
external to the SR Policy headend. The SR Policy headend does not
compute the segment list. The SR Policy headend only confirms its
validity.[¶](#section-5.1-3){.pilcrow}

An explicit candidate path [MAY]{.bcp14} consist of a single explicit
segment list containing only an implicit-null label to indicate
pop-and-forward behavior. The Binding SID (BSID) is popped and the
traffic is forwarded based on the inner label or an IP lookup in the
case of unlabeled IP packets. Such an explicit path can serve as a
fallback or path of last resort for traffic being steered into an SR
Policy using its BSID (refer to [Section
8.3](#Steering-Incoming-BSID){.xref}).[¶](#section-5.1-4){.pilcrow}

A segment list of an explicit candidate path [MUST]{.bcp14} be declared
invalid when any of the following is true:[¶](#section-5.1-5){.pilcrow}

-   [It is empty.[¶](#section-5.1-6.1){.pilcrow}]{#section-5.1-6.1}
-   [Its weight is 0.[¶](#section-5.1-6.2){.pilcrow}]{#section-5.1-6.2}
-   [It comprises a mix of SR-MPLS and SRv6 segment
    types.[¶](#section-5.1-6.3){.pilcrow}]{#section-5.1-6.3}
-   [The headend is unable to perform path resolution for the first SID
    into one or more outgoing interface(s) and
    next-hop(s).[¶](#section-5.1-6.4){.pilcrow}]{#section-5.1-6.4}
-   [The headend is unable to perform SID resolution for any non-first
    SID of type C through K into an MPLS label or an SRv6
    SID.[¶](#section-5.1-6.5){.pilcrow}]{#section-5.1-6.5}
-   [The headend verification fails for any SID for which verification
    has been explicitly
    requested.[¶](#section-5.1-6.6){.pilcrow}]{#section-5.1-6.6}

\"Unable to perform path resolution\" means that the headend has no path
to the SID in its SR database.[¶](#section-5.1-7){.pilcrow}

SID verification is performed when the headend is explicitly requested
to verify SID(s) by the controller via the signaling protocol used.
Implementations [MAY]{.bcp14} provide a local configuration option to
enable verification on a global or per-policy or per-candidate path
basis.[¶](#section-5.1-8){.pilcrow}

\"Verification fails\" for a SID means any of the
following:[¶](#section-5.1-9){.pilcrow}

-   [The headend is unable to find the SID in its
    SR-DB[¶](#section-5.1-10.1){.pilcrow}]{#section-5.1-10.1}
-   [The headend detects a mismatch between the SID value provided and
    the SID value resolved by context provided for SIDs of type C
    through K in its
    SR-DB.[¶](#section-5.1-10.2){.pilcrow}]{#section-5.1-10.2}
-   [The headend is unable to perform SID resolution for any non-first
    SID of type C through K into an MPLS label or an SRv6
    SID.[¶](#section-5.1-10.3){.pilcrow}]{#section-5.1-10.3}

In multi-domain deployments, it is expected that the headend may be
unable to verify the reachability of the SIDs in remote domains. Types A
or B [MUST]{.bcp14} be used for the SIDs for which the reachability
cannot be verified. Note that the first SID [MUST]{.bcp14} always be
reachable regardless of its type.[¶](#section-5.1-11){.pilcrow}

Additionally, a segment list [MAY]{.bcp14} be declared invalid when both
of the conditions below are met :[¶](#section-5.1-12){.pilcrow}

-   [Its last segment is not a Prefix SID (including BGP Peer Node-SID)
    advertised by the node specified as the endpoint of the
    corresponding SR
    Policy.[¶](#section-5.1-13.1){.pilcrow}]{#section-5.1-13.1}
-   [Its last segment is not an Adjacency SID (including BGP Peer
    Adjacency SID) of any of the links present on neighbor nodes and
    that terminate on the node specified as the endpoint of the
    corresponding SR
    Policy.[¶](#section-5.1-13.2){.pilcrow}]{#section-5.1-13.2}

An explicit candidate path is invalid as soon as it has no valid segment
list.[¶](#section-5.1-14){.pilcrow}

Additionally, an explicit candidate path [MAY]{.bcp14} be declared
invalid when its constituent segment lists (valid or invalid) are using
segment types of different SR data planes.[¶](#section-5.1-15){.pilcrow}
:::
:::

::: {#Path-validity-dynamic}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [Dynamic Candidate Path](#name-dynamic-candidate-path){.section-name .selfRef} {#name-dynamic-candidate-path}

A dynamic candidate path is specified as an optimization objective and a
set of constraints.[¶](#section-5.2-1){.pilcrow}

The headend of the policy leverages its SR database to compute a segment
list (\"solution segment list\") that solves this optimization problem
for either the SR-MPLS or the SRv6 data plane as
specified.[¶](#section-5.2-2){.pilcrow}

The headend re-computes the solution segment list any time the inputs to
the problem change (e.g., topology
changes).[¶](#section-5.2-3){.pilcrow}

When the local computation is not possible (e.g., a policy\'s tail end
is outside the topology known to the headend) or not desired, the
headend may rely on an external entity. For example, a path computation
request may be sent to a PCE supporting PCEP extensions specified in
\[[RFC8664](#RFC8664){.xref}\].[¶](#section-5.2-4){.pilcrow}

If no solution is found to the optimization objective and constraints,
then the dynamic candidate path [MUST]{.bcp14} be declared
invalid.[¶](#section-5.2-5){.pilcrow}

\[[SR-POLICY-CONSID](#I-D.filsfils-spring-sr-policy-considerations){.xref}\]
discusses some of the optimization objectives and constraints that may
be considered by a dynamic candidate path. It illustrates some of the
desirable properties of the computation of the solution segment
list.[¶](#section-5.2-6){.pilcrow}
:::
:::

::: {#Path-validity-composite}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Composite Candidate Path](#name-composite-candidate-path){.section-name .selfRef} {#name-composite-candidate-path}

A composite candidate path is specified as a group of its constituent SR
Policies.[¶](#section-5.3-1){.pilcrow}

A composite candidate path is valid when it has at least one valid
constituent SR Policy.[¶](#section-5.3-2){.pilcrow}
:::
:::
:::
:::

::: {#Binding-SID}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Binding SID](#name-binding-sid){.section-name .selfRef} {#name-binding-sid}

The Binding SID (BSID) is fundamental to Segment Routing
\[[RFC8402](#RFC8402){.xref}\]. It provides scaling, network opacity,
and service independence.
\[[SR-POLICY-CONSID](#I-D.filsfils-spring-sr-policy-considerations){.xref}\]
illustrates some of these benefits. This section describes the
association of BSID with an SR Policy.[¶](#section-6-1){.pilcrow}

::: {#Binding-SID-candidate-path}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [BSID of a Candidate Path](#name-bsid-of-a-candidate-path){.section-name .selfRef} {#name-bsid-of-a-candidate-path}

Each candidate path [MAY]{.bcp14} be defined with a
BSID.[¶](#section-6.1-1){.pilcrow}

Candidate paths of the same SR Policy [SHOULD]{.bcp14} have the same
BSID.[¶](#section-6.1-2){.pilcrow}

Candidate paths of different SR Policies [MUST NOT]{.bcp14} have the
same BSID.[¶](#section-6.1-3){.pilcrow}
:::
:::

::: {#Binding-SID-sr-policy}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [BSID of an SR Policy](#name-bsid-of-an-sr-policy){.section-name .selfRef} {#name-bsid-of-an-sr-policy}

The BSID of an SR Policy is the BSID of its active candidate
path.[¶](#section-6.2-1){.pilcrow}

When the active candidate path has a specified BSID, the SR Policy uses
that BSID if this value (label in MPLS, IPv6 address in SRv6) is
available. A BSID is available when its value is not associated with any
other usage, e.g., a label used by some other MPLS forwarding entry or
an SRv6 SID used in some other context (such as to another segment, to
another SR Policy, or that it is outside the range of SRv6
Locators).[¶](#section-6.2-2){.pilcrow}

In the case of SR-MPLS, SRv6 BSIDs (e.g., with the behavior End.BM
\[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} be associated with the SR
Policy in addition to the MPLS BSID. In the case of SRv6, multiple SRv6
BSIDs (e.g., with different behaviors like End.B6.Encaps and
End.B6.Encaps.Red \[[RFC8986](#RFC8986){.xref}\]) [MAY]{.bcp14} be
associated with the SR Policy.[¶](#section-6.2-3){.pilcrow}

Optionally, instead of only checking that the BSID of the active path is
available, a headend [MAY]{.bcp14} check that it is available within the
given SID range i.e., Segment Routing Local Block (SRLB) as specified in
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-6.2-4){.pilcrow}

When the specified BSID is not available (optionally is not in the
SRLB), an alert message [MUST]{.bcp14} be generated via mechanisms like
syslog.[¶](#section-6.2-5){.pilcrow}

In the cases (as described above) where SR Policy does not have a BSID
available, the SR Policy [MAY]{.bcp14} dynamically bind a BSID to
itself. Dynamically bound BSIDs [SHOULD]{.bcp14} use an available SID
outside the SRLB.[¶](#section-6.2-6){.pilcrow}

Assuming that at time t the BSID of the SR Policy is B1, if at time t+dt
a different candidate path becomes active and this new active path does
not have a specified BSID or its BSID is specified but is not available
(e.g., it is in use by something else), then the SR Policy [MAY]{.bcp14}
keep the previous BSID B1.[¶](#section-6.2-7){.pilcrow}

The association of an SR Policy with a BSID thus [MAY]{.bcp14} change
over the life of the SR Policy (e.g., upon active path change). Hence,
the BSID [SHOULD NOT]{.bcp14} be used as an identification of an SR
Policy.[¶](#section-6.2-8){.pilcrow}

::: {#Binding-SID-sr-policy-unspecified-bsid}
::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [Frequent Use Case : Unspecified BSID](#name-frequent-use-case-unspecifi){.section-name .selfRef} {#name-frequent-use-case-unspecifi}

All the candidate paths of the same SR Policy can have an unspecified
BSID.[¶](#section-6.2.1-1){.pilcrow}

In such a case, a BSID [MAY]{.bcp14} be dynamically bound to the SR
Policy as soon as the first valid candidate path is received. That BSID
is kept through the life of the SR Policy and across changes of the
active candidate path.[¶](#section-6.2.1-2){.pilcrow}
:::
:::

::: {#Binding-SID-policy-same-bsid}
::: {#section-6.2.2 .section}
#### [6.2.2.](#section-6.2.2){.section-number .selfRef} [Frequent Use Case: All Specified to the Same BSID](#name-frequent-use-case-all-speci){.section-name .selfRef} {#name-frequent-use-case-all-speci}

All the paths of the SR Policy can have the same specified
BSID.[¶](#section-6.2.2-1){.pilcrow}
:::
:::

::: {#Binding-SID-specified-bsid}
::: {#section-6.2.3 .section}
#### [6.2.3.](#section-6.2.3){.section-number .selfRef} [Specified-BSID-only](#name-specified-bsid-only){.section-name .selfRef} {#name-specified-bsid-only}

An implementation [MAY]{.bcp14} support the configuration of the
Specified-BSID-only restrictive behavior on the headend for all SR
Policies or individual SR Policies. Further, this restrictive behavior
[MAY]{.bcp14} also be signaled on a per-SR-Policy basis to the
headend.[¶](#section-6.2.3-1){.pilcrow}

When this restrictive behavior is enabled, if the candidate path has an
unspecified BSID or if the specified BSID is not available when the
candidate path becomes active, then no BSID is bound to it and the
candidate path is considered invalid. An alert [MUST]{.bcp14} be
triggered for this error via mechanisms like syslog. Other candidate
paths [MUST]{.bcp14} then be evaluated for becoming the active candidate
path.[¶](#section-6.2.3-2){.pilcrow}
:::
:::
:::
:::

::: {#Binding-SID-forwarding}
::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [Forwarding Plane](#name-forwarding-plane){.section-name .selfRef} {#name-forwarding-plane}

A valid SR Policy results in the installation of a BSID-keyed entry in
the forwarding plane with the action of steering the packets matching
this entry to the selected path of the SR
Policy.[¶](#section-6.3-1){.pilcrow}

If the Specified-BSID-only restrictive behavior is enabled and the BSID
of the active path is not available (optionally not in the SRLB), then
the SR Policy does not install any entry indexed by a BSID in the
forwarding plane.[¶](#section-6.3-2){.pilcrow}
:::
:::

::: {#BSID-to-tunnel}
::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Non-SR Usage of Binding SID](#name-non-sr-usage-of-binding-sid){.section-name .selfRef} {#name-non-sr-usage-of-binding-sid}

An implementation [MAY]{.bcp14} choose to associate a Binding SID with
any type of interface (e.g., a layer 3 termination of an Optical
Circuit) or a tunnel (e.g., IP tunnel, GRE tunnel, IP/UDP tunnel, MPLS
RSVP-TE tunnel, etc). This enables the use of other non-SR-enabled
interfaces and tunnels as segments in an SR Policy segment list without
the need of forming routing protocol adjacencies over
them.[¶](#section-6.4-1){.pilcrow}

The details of this kind of usage are beyond the scope of this document.
A specific packet-optical integration use case is described in
\[[POI-SR](#I-D.anand-spring-poi-sr){.xref}\].[¶](#section-6.4-2){.pilcrow}
:::
:::
:::
:::

::: {#Policy-state}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [SR Policy State](#name-sr-policy-state){.section-name .selfRef} {#name-sr-policy-state}

The SR Policy state is maintained on the headend to represent the state
of the policy and its candidate paths. This is to provide an accurate
representation of whether the SR Policy is being instantiated in the
forwarding plane and which of its candidate paths and segment list(s)
are active. The SR Policy state [MUST]{.bcp14} also reflect the reason
when a policy and/or its candidate path is not active due to validation
errors or not being preferred. The operational state information
reported for SR Policies are specified in
\[[SR-POLICY-YANG](#I-D.ietf-spring-sr-policy-yang){.xref}\].[¶](#section-7-1){.pilcrow}

The SR Policy state can be reported by the headend node via BGP-LS
\[[BGP-LS-TE-POLICY](#I-D.ietf-idr-te-lsp-distribution){.xref}\] or PCEP
\[[RFC8231](#RFC8231){.xref}\]
\[[PCEP-BSID-LABEL](#I-D.ietf-pce-binding-label-sid){.xref}\].[¶](#section-7-2){.pilcrow}

SR Policy state on the headend also includes traffic accounting
information for the flows being steered via the policies. The details of
the SR Policy accounting are beyond the scope of this document. The
aspects related to the SR traffic counters and their usage in the
broader context of traffic accounting in an SR network are covered in
\[[SR-TRAFFIC-COUNTERS](#I-D.filsfils-spring-sr-traffic-counters){.xref}\]
and
\[[SR-TRAFFIC-ACCOUNTING](#I-D.ali-spring-sr-traffic-accounting){.xref}\],
respectively.[¶](#section-7-3){.pilcrow}

Implementations [MAY]{.bcp14} support an administrative state to control
locally provisioned policies via mechanisms like command-line interface
(CLI) or NETCONF.[¶](#section-7-4){.pilcrow}
:::
:::

::: {#Steering}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Steering into an SR Policy](#name-steering-into-an-sr-policy){.section-name .selfRef} {#name-steering-into-an-sr-policy}

A headend can steer a packet flow into a valid SR Policy in various
ways:[¶](#section-8-1){.pilcrow}

-   [Incoming packets have an active SID matching a local BSID at the
    headend.[¶](#section-8-2.1){.pilcrow}]{#section-8-2.1}
-   [Per-Destination Steering: incoming packets match a BGP/Service
    route, which recurses on an SR
    Policy.[¶](#section-8-2.2){.pilcrow}]{#section-8-2.2}
-   [Per-Flow Steering: incoming packets match or recurse on a
    forwarding array of which some of the entries are SR
    Policies.[¶](#section-8-2.3){.pilcrow}]{#section-8-2.3}
-   [Policy-Based Steering: incoming packets match a routing policy that
    directs them on an SR
    Policy.[¶](#section-8-2.4){.pilcrow}]{#section-8-2.4}

::: {#Steering-validity}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [Validity of an SR Policy](#name-validity-of-an-sr-policy-2){.section-name .selfRef} {#name-validity-of-an-sr-policy-2}

An SR Policy is invalid when all its candidate paths are invalid as
described in Sections [2.10](#SR-policy-validity){.xref} and
[5](#Path-validity){.xref}.[¶](#section-8.1-1){.pilcrow}

By default, upon transitioning to the invalid
state,[¶](#section-8.1-2){.pilcrow}

-   [an SR Policy and its BSID are removed from the forwarding
    plane.[¶](#section-8.1-3.1){.pilcrow}]{#section-8.1-3.1}
-   [any steering of a service (Pseudowire (PW)), destination (BGP-VPN),
    flow or packet on the related SR Policy is disabled and the related
    service, destination, flow, or packet is routed per the classic
    forwarding table (e.g., longest match to the destination or the
    recursing
    next-hop).[¶](#section-8.1-3.2){.pilcrow}]{#section-8.1-3.2}
:::
:::

::: {#Steering-drop}
::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [Drop-upon-Invalid SR Policy](#name-drop-upon-invalid-sr-policy){.section-name .selfRef} {#name-drop-upon-invalid-sr-policy}

An SR Policy [MAY]{.bcp14} be enabled for the Drop-Upon-Invalid
behavior. This would entail the following:[¶](#section-8.2-1){.pilcrow}

-   [an invalid SR Policy and its BSID is kept in the forwarding plane
    with an action to
    drop.[¶](#section-8.2-2.1){.pilcrow}]{#section-8.2-2.1}
-   [any steering of a service (PW), destination (BGP-VPN), flow, or
    packet on the related SR Policy is maintained with the action to
    drop all of this
    traffic.[¶](#section-8.2-2.2){.pilcrow}]{#section-8.2-2.2}

The Drop-Upon-Invalid behavior has been deployed in use cases where the
operator wants some PW to only be transported on a path with specific
constraints. When these constraints are no longer met, the operator
wants the PW traffic to be dropped. Specifically, the operator does not
want the PW to be routed according to the IGP shortest path to the PW
endpoint.[¶](#section-8.2-3){.pilcrow}
:::
:::

::: {#Steering-Incoming-BSID}
::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [Incoming Active SID is a BSID](#name-incoming-active-sid-is-a-bs){.section-name .selfRef} {#name-incoming-active-sid-is-a-bs}

Let us assume that headend H has a valid SR Policy P of segment list
\<S1, S2, S3> and BSID B.[¶](#section-8.3-1){.pilcrow}

In the case of SR-MPLS, when H receives a packet K with label stack \<B,
L2, L3>, H pops B and pushes \<S1, S2, S3> and forwards the resulting
packet according to SID S1.[¶](#section-8.3-2){.pilcrow}

\"Forwards the resulting packet according to SID S1\" means: If S1 is an
Adj-SID or a PHP-enabled prefix SID advertised by a neighbor, H sends
the resulting packet with label stack \<S2, S3, L2, L3> on the outgoing
interface associated with S1; Else, H sends the resulting packet with
label stack \<S1, S2, S3, L2, L3> along the path of
S1.[¶](#section-8.3-3.1){.pilcrow}

In the case of SRv6, the processing is similar and follows the SR Policy
headend behaviors as specified in [Section
5](https://www.rfc-editor.org/rfc/rfc8986#section-5){.relref} of
\[[RFC8986](#RFC8986){.xref}\].[¶](#section-8.3-4){.pilcrow}

H has steered the packet into the SR Policy
P.[¶](#section-8.3-5){.pilcrow}

H did not have to classify the packet. The classification was done by a
node upstream of H (e.g., the source of the packet or an intermediate
ingress edge node of the SR domain) and the result of this
classification was efficiently encoded in the packet header as a
BSID.[¶](#section-8.3-6){.pilcrow}

This is another key benefit of the segment routing in general and the
binding SID in particular: the ability to encode a classification and
the resulting steering in the packet header to better scale and simplify
intermediate aggregation nodes.[¶](#section-8.3-7){.pilcrow}

When Drop-Upon-Invalid (refer to [Section 8.2](#Steering-drop){.xref})
is not in use, for an invalid SR Policy P, its BSID B is not in the
forwarding plane and hence, the packet K is dropped by
H.[¶](#section-8.3-8){.pilcrow}
:::
:::

::: {#Steering-per-destination}
::: {#section-8.4 .section}
### [8.4.](#section-8.4){.section-number .selfRef} [Per-Destination Steering](#name-per-destination-steering){.section-name .selfRef} {#name-per-destination-steering}

This section describes how a headend applies steering of flows
corresponding to BGP routes over SR Policy using the Color Extended
community \[[RFC9012](#RFC9012){.xref}\].[¶](#section-8.4-1){.pilcrow}

In the case of SR-MPLS, let us assume that headend
H:[¶](#section-8.4-2){.pilcrow}

-   [learns a BGP route R/r via next-hop N, Color Extended community C,
    and VPN label V.[¶](#section-8.4-3.1){.pilcrow}]{#section-8.4-3.1}
-   [has a valid SR Policy P to (color = C, endpoint = N) of segment
    list \<S1, S2, S3> and BSID
    B.[¶](#section-8.4-3.2){.pilcrow}]{#section-8.4-3.2}
-   [has a BGP policy that matches on the Color Extended community C and
    allows its usage as SLA steering
    information.[¶](#section-8.4-3.3){.pilcrow}]{#section-8.4-3.3}

If all these conditions are met, H installs R/r in RIB/FIB with next-hop
= SR Policy P of BSID B instead of via N.[¶](#section-8.4-4){.pilcrow}

Indeed, H\'s local BGP policy and the received BGP route indicate that
the headend should associate R/r with an SR Policy path to endpoint N
with the SLA associated with color C. The headend, therefore, installs
the BGP route on that policy.[¶](#section-8.4-5){.pilcrow}

This can be implemented by using the BSID as a generalized next-hop and
installing the BGP route on that generalized
next-hop.[¶](#section-8.4-6){.pilcrow}

When H receives a packet K with a destination matching R/r, H pushes the
label stack \<S1, S2, S3, V> and sends the resulting packet along the
path to S1.[¶](#section-8.4-7){.pilcrow}

Note that any SID associated with the BGP route is inserted after the
segment list of the SR Policy (i.e., \<S1, S2, S3,
V>).[¶](#section-8.4-8){.pilcrow}

In the case of SRv6, the processing is similar and follows the SR Policy
headend behaviors as specified in [Section
5](https://www.rfc-editor.org/rfc/rfc8986#section-5){.relref} of
\[[RFC8986](#RFC8986){.xref}\].[¶](#section-8.4-9){.pilcrow}

The same behavior applies to any type of service route: any AFI/SAFI of
BGP \[[RFC4760](#RFC4760){.xref}\] or the Locator/ID Separation Protocol
(LISP) \[[RFC6830](#RFC6830){.xref}\] for both
IPv4/IPv6.[¶](#section-8.4-10){.pilcrow}

In a BGP multi-path scenario, the BGP route [MAY]{.bcp14} be resolved
over a mix of paths that include those that are steered over SR Policies
and others resolved via the normal BGP next-hop resolution.
Implementations [MAY]{.bcp14} provide options to prefer one type over
the other or other forms of local policy to determine the paths that are
selected.[¶](#section-8.4-11){.pilcrow}

::: {#Steering-per-destination-colors}
::: {#section-8.4.1 .section}
#### [8.4.1.](#section-8.4.1){.section-number .selfRef} [Multiple Colors](#name-multiple-colors){.section-name .selfRef} {#name-multiple-colors}

When a BGP route has multiple Color Extended communities each with a
valid SR Policy, the BGP process installs the route on the SR Policy
giving preference to the Color Extended community with the highest
numerical value.[¶](#section-8.4.1-1){.pilcrow}

Let us assume that headend H:[¶](#section-8.4.1-2){.pilcrow}

-   [learns a BGP route R/r via next-hop N, Color Extended communities
    C1 and C2.[¶](#section-8.4.1-3.1){.pilcrow}]{#section-8.4.1-3.1}
-   [has a valid SR Policy P1 to (color = C1, endpoint = N) of segment
    list \<S1, S2, S3> and BSID
    B1.[¶](#section-8.4.1-3.2){.pilcrow}]{#section-8.4.1-3.2}
-   [has a valid SR Policy P2 to (color = C2, endpoint = N) of segment
    list \<S4, S5, S6> and BSID
    B2.[¶](#section-8.4.1-3.3){.pilcrow}]{#section-8.4.1-3.3}
-   [has a BGP policy that matches the Color Extended communities C1 and
    C2 and allows their usage as SLA steering
    information[¶](#section-8.4.1-3.4){.pilcrow}]{#section-8.4.1-3.4}

If all these conditions are met, H installs R/r in RIB/FIB with next-hop
= SR Policy P2 of BSID=B2 (instead of N) because C2 \>
C1.[¶](#section-8.4.1-4){.pilcrow}

When the SR Policy with a specific color is not instantiated or in the
down/inactive state, the SR Policy with the next highest numerical value
of color is considered.[¶](#section-8.4.1-5){.pilcrow}
:::
:::
:::
:::

::: {#Steering-per-dynamic-BSID}
::: {#section-8.5 .section}
### [8.5.](#section-8.5){.section-number .selfRef} [Recursion on an On-Demand Dynamic BSID](#name-recursion-on-an-on-demand-d){.section-name .selfRef} {#name-recursion-on-an-on-demand-d}

In the previous section, it was assumed that H had a pre-established
\"explicit\" SR Policy (color C, endpoint
N).[¶](#section-8.5-1){.pilcrow}

In this section, independent of the a priori existence of any explicit
candidate path of the SR Policy (C, N), it is to be noted that the BGP
process at headend node H triggers the instantiation of a dynamic
candidate path for the SR Policy (C, N) as soon
as:[¶](#section-8.5-2){.pilcrow}

-   [the BGP process learns of a route R/r via N and with Color Extended
    community C.[¶](#section-8.5-3.1){.pilcrow}]{#section-8.5-3.1}
-   [a local policy at node H authorizes the on-demand SR Policy path
    instantiation and maps the color to a dynamic SR Policy path
    optimization
    template.[¶](#section-8.5-3.2){.pilcrow}]{#section-8.5-3.2}

::: {#Steering-per-dynamic-BSID-color}
::: {#section-8.5.1 .section}
#### [8.5.1.](#section-8.5.1){.section-number .selfRef} [Multiple Colors](#name-multiple-colors-2){.section-name .selfRef} {#name-multiple-colors-2}

When a BGP route R/r via N has multiple Color Extended communities Ci
(with i=1 \... n), an individual on-demand SR Policy dynamic path
request (color Ci, endpoint N) is triggered for each color Ci. The SR
Policy that is used for steering is then determined as described in
[Section
8.4.1](#Steering-per-destination-colors){.xref}.[¶](#section-8.5.1-1){.pilcrow}
:::
:::
:::
:::

::: {#Steering-per-flow}
::: {#section-8.6 .section}
### [8.6.](#section-8.6){.section-number .selfRef} [Per-Flow Steering](#name-per-flow-steering){.section-name .selfRef} {#name-per-flow-steering}

This section provides an example of how a headend might apply per-flow
steering in practice.[¶](#section-8.6-1){.pilcrow}

Let us assume that headend H:[¶](#section-8.6-2){.pilcrow}

-   [has a valid SR Policy P1 to (color = C1, endpoint = N) of segment
    list \<S1, S2, S3> and BSID
    B1.[¶](#section-8.6-3.1){.pilcrow}]{#section-8.6-3.1}
-   [has a valid SR Policy P2 to (color = C2, endpoint = N) of segment
    list \<S4, S5, S6> and BSID
    B2.[¶](#section-8.6-3.2){.pilcrow}]{#section-8.6-3.2}
-   [is configured to instantiate an array of paths to N where the entry
    0 is the IGP path to N, color C1 is the first entry, and color C2 is
    the second entry. The index into the array is called a Forwarding
    Class (FC). The index can have values 0 to 7, especially when
    derived from the MPLS TC bits
    \[[RFC5462](#RFC5462){.xref}\].[¶](#section-8.6-3.3){.pilcrow}]{#section-8.6-3.3}
-   [is configured to match flows in its ingress interfaces (upon any
    field such as Ethernet destination/source/VLAN/TOS or IP
    destination/source/Differentiated Services Code Point (DSCP), or
    transport ports etc.), and color them with an internal per-packet
    forwarding-class variable (0, 1, or 2 in this
    example).[¶](#section-8.6-3.4){.pilcrow}]{#section-8.6-3.4}

If all these conditions are met, H installs in
RIB/FIB:[¶](#section-8.6-4){.pilcrow}

-   [N via recursion on an array A (instead of the immediate outgoing
    link associated with the IGP shortest path to
    N).[¶](#section-8.6-5.1){.pilcrow}]{#section-8.6-5.1}
-   [Entry A(0) set to the immediate outgoing link of the IGP shortest
    path to N.[¶](#section-8.6-5.2){.pilcrow}]{#section-8.6-5.2}
-   [Entry A(1) set to SR Policy P1 of
    BSID=B1.[¶](#section-8.6-5.3){.pilcrow}]{#section-8.6-5.3}
-   [Entry A(2) set to SR Policy P2 of
    BSID=B2.[¶](#section-8.6-5.4){.pilcrow}]{#section-8.6-5.4}

H receives three packets K, K1, and K2 on its incoming interface. These
three packets either longest match on N or more likely on a BGP/service
route that recurses on N. H colors these 3 packets respectively with
forwarding-class 0, 1, and 2.[¶](#section-8.6-6){.pilcrow}

As a result, for SR-MPLS:[¶](#section-8.6-7){.pilcrow}

-   [H forwards K along the shortest path to N (i.e., pushes the
    Prefix-SID of N).[¶](#section-8.6-8.1){.pilcrow}]{#section-8.6-8.1}
-   [H pushes \<S1, S2, S3> on packet K1 and forwards the resulting
    frame along the shortest path to
    S1.[¶](#section-8.6-8.2){.pilcrow}]{#section-8.6-8.2}
-   [H pushes \<S4, S5, S6> on packet K2 and forwards the resulting
    frame along the shortest path to
    S4.[¶](#section-8.6-8.3){.pilcrow}]{#section-8.6-8.3}

For SRv6, the processing is similar and the segment lists of the
individual SR Policies P1 and P2 are enforced for packets K1 and K2
using the SR Policy headend behaviors as specified in [Section
5](https://www.rfc-editor.org/rfc/rfc8986#section-5){.relref} of
\[[RFC8986](#RFC8986){.xref}\].[¶](#section-8.6-9){.pilcrow}

If the local configuration does not specify any explicit forwarding
information for an entry of the array, then this entry is filled with
the same information as entry 0 (i.e., the IGP shortest
path).[¶](#section-8.6-10){.pilcrow}

If the SR Policy mapped to an entry of the array becomes invalid, then
this entry is filled with the same information as entry 0. When all the
array entries have the same information as entry 0, the forwarding entry
for N is updated to bypass the array and point directly to its outgoing
interface and next-hop.[¶](#section-8.6-11){.pilcrow}

The array index values (e.g., 0, 1, and 2) and the notion of forwarding
class are implementation specific and only meant to describe the desired
behavior. The same can be realized by other
mechanisms.[¶](#section-8.6-12){.pilcrow}

This realizes per-flow steering: different flows bound to the same BGP
endpoint are steered on different IGP or SR Policy
paths.[¶](#section-8.6-13){.pilcrow}

A headend [MAY]{.bcp14} support options to apply per-flow steering only
for traffic matching specific prefixes (e.g., specific IGP or BGP
prefixes).[¶](#section-8.6-14){.pilcrow}
:::
:::

::: {#Steering-policy-based}
::: {#section-8.7 .section}
### [8.7.](#section-8.7){.section-number .selfRef} [Policy-Based Routing](#name-policy-based-routing){.section-name .selfRef} {#name-policy-based-routing}

Finally, headend H [MAY]{.bcp14} be configured with a local routing
policy that overrides any BGP/IGP path and steers a specified packet on
an SR Policy. This includes the use of mechanisms like IGP Shortcut for
automatic routing of IGP prefixes over SR Policies intended for such
purpose.[¶](#section-8.7-1){.pilcrow}
:::
:::

::: {#Steering-optional-bgp}
::: {#section-8.8 .section}
### [8.8.](#section-8.8){.section-number .selfRef} [Optional Steering Modes for BGP Destinations](#name-optional-steering-modes-for){.section-name .selfRef} {#name-optional-steering-modes-for}

::: {#Steering-optional-bgp-color-only-steering}
::: {#section-8.8.1 .section}
#### [8.8.1.](#section-8.8.1){.section-number .selfRef} [Color-Only BGP Destination Steering](#name-color-only-bgp-destination-){.section-name .selfRef} {#name-color-only-bgp-destination-}

In the previous section, it is seen that the steering on an SR Policy is
governed by the matching of the BGP route\'s next-hop N and the
authorized Color Extended community C with an SR Policy defined by the
tuple (N, C).[¶](#section-8.8.1-1){.pilcrow}

This is the most likely form of BGP destination steering and the one
recommended for most use cases.[¶](#section-8.8.1-2){.pilcrow}

This section defines an alternative steering mechanism based only on the
Color Extended community.[¶](#section-8.8.1-3){.pilcrow}

Three types of steering modes are
defined.[¶](#section-8.8.1-4){.pilcrow}

For the default, Type 0, the BGP destination is steered as
follows:[¶](#section-8.8.1-5){.pilcrow}

::: {#section-8.8.1-6}
``` {.lang-pseudocode .sourcecode}
   IF there is a valid SR Policy (N, C) where N is the IPv4 or IPv6
           endpoint address and C is a color;
       Steer into SR Policy (N, C);
   ELSE;
       Steer on the IGP path to the next-hop N.
```

[¶](#section-8.8.1-6){.pilcrow}
:::

This is the classic case described in this document previously and what
is recommended in most scenarios.[¶](#section-8.8.1-7){.pilcrow}

For Type 1, the BGP destination is steered as
follows:[¶](#section-8.8.1-8){.pilcrow}

::: {#section-8.8.1-9}
``` {.lang-pseudocode .sourcecode}
   IF there is a valid SR Policy (N, C) where N is the IPv4 or IPv6
           endpoint address and C is a color;
       Steer into SR Policy (N, C);
   ELSE IF there is a valid SR Policy (null endpoint, C) of the
           same address-family of N;
       Steer into SR Policy (null endpoint, C);
   ELSE IF there is any valid SR Policy
           (any address-family null endpoint, C);
       Steer into SR Policy (any null endpoint, C);
   ELSE;
       Steer on the IGP path to the next-hop N.
```

[¶](#section-8.8.1-9){.pilcrow}
:::

For Type 2, the BGP destination is steered as
follows:[¶](#section-8.8.1-10){.pilcrow}

::: {#section-8.8.1-11}
``` {.lang-pseudocode .sourcecode}
   IF there is a valid SR Policy (N, C) where N is an IPv4 or IPv6
           endpoint address and C is a color;
       Steer into SR Policy (N, C);
   ELSE IF there is a valid SR Policy (null endpoint, C)
           of the same address-family of N;
       Steer into SR Policy (null endpoint, C);
   ELSE IF there is any valid SR Policy
           (any address-family null endpoint, C);
       Steer into SR Policy (any null endpoint, C);
   ELSE IF there is any valid SR Policy (any endpoint, C)
           of the same address-family of N;
       Steer into SR Policy (any endpoint, C);
   ELSE IF there is any valid SR Policy
           (any address-family endpoint, C);
       Steer into SR Policy (any address-family endpoint, C);
   ELSE;
       Steer on the IGP path to the next-hop N.
```

[¶](#section-8.8.1-11){.pilcrow}
:::

The null endpoint is 0.0.0.0 for IPv4 and :: for IPv6 (all bits set to
the 0 value).[¶](#section-8.8.1-12){.pilcrow}

Please refer to
\[[BGP-SR-POLICY](#I-D.ietf-idr-segment-routing-te-policy){.xref}\] for
the updates to the BGP Color Extended community for the implementation
of these mechanisms.[¶](#section-8.8.1-13){.pilcrow}
:::
:::

::: {#Steering-optional-bgp-multi-color}
::: {#section-8.8.2 .section}
#### [8.8.2.](#section-8.8.2){.section-number .selfRef} [Multiple Colors and CO flags](#name-multiple-colors-and-co-flag){.section-name .selfRef} {#name-multiple-colors-and-co-flag}

The steering preference is first based on the highest Color Extended
community value and then Color-Only steering type for the color.
Assuming a Prefix via (NH, C1(CO=01), C2(CO=01)); C1>C2. The steering
preference order is:[¶](#section-8.8.2-1){.pilcrow}

-   [SR Policy (NH,
    C1).[¶](#section-8.8.2-2.1){.pilcrow}]{#section-8.8.2-2.1}
-   [SR Policy (null,
    C1).[¶](#section-8.8.2-2.2){.pilcrow}]{#section-8.8.2-2.2}
-   [SR Policy (NH,
    C2).[¶](#section-8.8.2-2.3){.pilcrow}]{#section-8.8.2-2.3}
-   [SR Policy (null,
    C2).[¶](#section-8.8.2-2.4){.pilcrow}]{#section-8.8.2-2.4}
-   [IGP to NH.[¶](#section-8.8.2-2.5){.pilcrow}]{#section-8.8.2-2.5}
:::
:::

::: {#Steering-optional-bgp-drop-on-invalid}
::: {#section-8.8.3 .section}
#### [8.8.3.](#section-8.8.3){.section-number .selfRef} [Drop-upon-Invalid](#name-drop-upon-invalid){.section-name .selfRef} {#name-drop-upon-invalid}

This document defined earlier that when all the following conditions are
met, H installs R/r in RIB/FIB with next-hop = SR Policy P of BSID B
instead of via N.[¶](#section-8.8.3-1){.pilcrow}

-   [H learns a BGP route R/r via next-hop N, Color Extended community
    C.[¶](#section-8.8.3-2.1){.pilcrow}]{#section-8.8.3-2.1}
-   [H has a valid SR Policy P to (color = C, endpoint = N) of segment
    list \<S1, S2, S3> and BSID
    B.[¶](#section-8.8.3-2.2){.pilcrow}]{#section-8.8.3-2.2}
-   [H has a BGP policy that matches the Color Extended community C and
    allows its usage as SLA steering
    information.[¶](#section-8.8.3-2.3){.pilcrow}]{#section-8.8.3-2.3}

This behavior is extended by noting that the BGP Policy may require the
BGP steering to always stay on the SR Policy whatever its
validity.[¶](#section-8.8.3-3){.pilcrow}

This is the \"drop-upon-invalid\" option described in [Section
8.2](#Steering-drop){.xref} applied to BGP-based
steering.[¶](#section-8.8.3-4){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#protection}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Recovering from Network Failures](#name-recovering-from-network-fai){.section-name .selfRef} {#name-recovering-from-network-fai}

::: {#Local-protection-tilfa}
::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Leveraging TI-LFA Local Protection of the Constituent IGP Segments](#name-leveraging-ti-lfa-local-pro){.section-name .selfRef} {#name-leveraging-ti-lfa-local-pro}

In any topology, Topology-Independent Loop-Free Alternate (TI-LFA)
\[[SR-TI-LFA](#I-D.ietf-rtgwg-segment-routing-ti-lfa){.xref}\] provides
a 50 msec local protection technique for IGP SIDs. The backup path is
computed on a per-IGP-SID basis along the post-convergence
path.[¶](#section-9.1-1){.pilcrow}

In a network that has deployed TI-LFA, an SR Policy built on the basis
of TI-LFA protected IGP segments leverages the local protection of the
constituent segments. Since TI-LFA protection is based on IGP
computation, there are cases where the path used during the fast-reroute
time window may not meet the exact constraints of the SR
Policy.[¶](#section-9.1-2){.pilcrow}

In a network that has deployed TI-LFA, an SR Policy instantiated only
with non-protected Adj SIDs does not benefit from any local
protection.[¶](#section-9.1-3){.pilcrow}
:::
:::

::: {#Local-protection-policy}
::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Using an SR Policy to Locally Protect a Link](#name-using-an-sr-policy-to-local){.section-name .selfRef} {#name-using-an-sr-policy-to-local}

[]{#name-local-protection-using-sr-p}

::: {#PROTECTION}
::: {#section-9.2-1.1 .alignCenter .art-text .artwork}
         1----2-----6----7
         |    |     |    |
         4----3-----9----8
:::

[Figure 1](#figure-1){.selfRef}: [Local Protection Using SR
Policy](#name-local-protection-using-sr-p){.selfRef}
:::

An SR Policy can be instantiated at node 2 to protect link 2-to-6. A
typical explicit segment list would be \<3, 9,
6>.[¶](#section-9.2-2){.pilcrow}

A typical use case occurs for links outside an IGP domain: e.g., 1, 2,
3, and 4 are part of IGP/SR sub-domain 1 while 6, 7, 8, and 9 are part
of IGP/SR sub-domain 2. In such a case, links 2-to-6 and 3to9 cannot
benefit from TI-LFA automated local protection. The SR Policy with
segment list \<3, 9, 6> on node 2 can be locally configured to be a
fast-reroute backup path for the link
2-to-6.[¶](#section-9.2-3){.pilcrow}
:::
:::

::: {#cp-path-protection}
::: {#section-9.3 .section}
### [9.3.](#section-9.3){.section-number .selfRef} [Using a Candidate Path for Path Protection](#name-using-a-candidate-path-for-){.section-name .selfRef} {#name-using-a-candidate-path-for-}

An SR Policy allows for multiple candidate paths, of which at any point
in time there is a single active candidate path that is provisioned in
the forwarding plane and used for traffic steering. However, another
(lower preference) candidate path [MAY]{.bcp14} be designated as the
backup for a specific or all (active) candidate path(s). The following
options are possible:[¶](#section-9.3-1){.pilcrow}

-   [A pair of disjoint candidate paths are provisioned with one of them
    as primary and the other identified as its
    backup.[¶](#section-9.3-2.1){.pilcrow}]{#section-9.3-2.1}
-   [A specific candidate path is provisioned as the backup for any
    (active) candidate
    path.[¶](#section-9.3-2.2){.pilcrow}]{#section-9.3-2.2}
-   [The headend picks the next (lower) preference valid candidate path
    as the backup for the active candidate
    path.[¶](#section-9.3-2.3){.pilcrow}]{#section-9.3-2.3}

The headend [MAY]{.bcp14} compute a priori and validate such backup
candidate paths as well as provision them into the forwarding plane as a
backup for the active path. The backup candidate path may be dynamically
computed or explicitly provisioned in such a way that they provide the
most appropriate alternative for the active candidate path. A
fast-reroute mechanism [MAY]{.bcp14} then be used to trigger sub-50 msec
switchover from the active to the backup candidate path in the
forwarding plane. Mechanisms like Bidirectional Forwarding Detection
(BFD) [MAY]{.bcp14} be used for fast detection of such
failures.[¶](#section-9.3-3){.pilcrow}
:::
:::
:::
:::

::: {#Security}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This document specifies in detail the SR Policy construct introduced in
\[[RFC8402](#RFC8402){.xref}\] and its instantiation on a router
supporting SR along with descriptions of mechanisms for the steering of
traffic flows over it. Therefore, the security considerations of
\[[RFC8402](#RFC8402){.xref}\] apply. The security consideration related
to SR-MPLS \[[RFC8660](#RFC8660){.xref}\] and SRv6
\[[RFC8754](#RFC8754){.xref}\] \[[RFC8986](#RFC8986){.xref}\] also
apply.[¶](#section-10-1){.pilcrow}

The endpoint of the SR Policy, other than in the case of a null
endpoint, uniquely identifies the tail-end node of the segment routed
path. If an address that is used as an endpoint for an SR Policy is
advertised by more than one node due to a misconfiguration or spoofing
and the same is advertised via an IGP, the traffic steered over the SR
Policy may end up getting diverted to an undesired node resulting in
misrouting. Mechanisms for detection of duplicate prefix advertisement
can be used to identify and correct such scenarios. The details of these
mechanisms are outside the scope of this
document.[¶](#section-10-2){.pilcrow}

[Section 8](#Steering){.xref} specifies mechanisms for the steering of
traffic flows corresponding to BGP routes over SR Policies matching the
color value signaled via the BGP Color Extended Community attached with
the BGP routes. Misconfiguration or error in setting of the Color
Extended Community with the BGP routes can result in the forwarding of
packets for those routes along undesired
paths.[¶](#section-10-3){.pilcrow}

In Sections [2.1](#SR-policy-identification){.xref} and
[2.6](#SR-policy-candidate-path-identification){.xref}, the document
mentions that a symbolic name [MAY]{.bcp14} be signaled along with a
candidate path for the SR Policy and for the SR Policy Candidate Path,
respectively. While the value of symbolic names for display clarity is
indisputable, as with any unrestricted free-form text received from
external parties, there can be no absolute assurance that the
information the text purports to show is accurate or even truthful. For
this reason, users of implementations that display such information
would be well advised not to rely on it without question and to use the
specific identifiers of the SR Policy and SR Policy Candidate Path for
validation. Furthermore, implementations that display such information
might wish to display it in such a fashion as to differentiate it from
known-good information. (Such display conventions are inherently
implementation specific; one example might be use of a distinguished
text color or style for information that should be treated with
caution.)[¶](#section-10-4){.pilcrow}

This document does not define any new protocol extensions and does not
introduce any further security
considerations.[¶](#section-10-5){.pilcrow}
:::
:::

::: {#MGMT}
::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Manageability Considerations](#name-manageability-consideration){.section-name .selfRef} {#name-manageability-consideration}

This document specifies in detail the SR Policy construct introduced in
\[[RFC8402](#RFC8402){.xref}\] and its instantiation on a router
supporting SR along with descriptions of mechanisms for the steering of
traffic flows over it. Therefore, the manageability considerations of
\[[RFC8402](#RFC8402){.xref}\] apply.[¶](#section-11-1){.pilcrow}

A YANG model for the configuration and operation of SR Policy has been
defined in
\[[SR-POLICY-YANG](#I-D.ietf-spring-sr-policy-yang){.xref}\].[¶](#section-11-2){.pilcrow}
:::
:::

::: {#IANA}
::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA has created a new subregistry called \"Segment Types\" under the
\"Segment Routing\" registry that was created by
\[[RFC8986](#RFC8986){.xref}\]. This subregistry maintains the
alphabetic identifiers for the segment types (as specified in [Section
4](#SID-List){.xref}) that may be used within a segment list of an SR
Policy. The alphabetical identifiers run from A to Z and may be extended
on exhaustion with the identifiers AA to AZ, BA to BZ, and so on,
through ZZ. This subregistry follows the Specification Required
allocation policy as specified in
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-12-1){.pilcrow}

The initial registrations for this subregistry are as
follows:[¶](#section-12-2){.pilcrow}

[]{#name-segment-types-2}

::: {#table_iana}
  Value   Description                                                                         Reference
  ------- ----------------------------------------------------------------------------------- -----------
  A       SR-MPLS Label                                                                       RFC 9256
  B       SRv6 SID                                                                            RFC 9256
  C       IPv4 Prefix with optional SR Algorithm                                              RFC 9256
  D       IPv6 Global Prefix with optional SR Algorithm for SR-MPLS                           RFC 9256
  E       IPv4 Prefix with Local Interface ID                                                 RFC 9256
  F       IPv4 Addresses for link endpoints as Local, Remote pair                             RFC 9256
  G       IPv6 Prefix and Interface ID for link endpoints as Local, Remote pair for SR-MPLS   RFC 9256
  H       IPv6 Addresses for link endpoints as Local, Remote pair for SR-MPLS                 RFC 9256
  I       IPv6 Global Prefix with optional SR Algorithm for SRv6                              RFC 9256
  J       IPv6 Prefix and Interface ID for link endpoints as Local, Remote pair for SRv6      RFC 9256
  K       IPv6 Addresses for link endpoints as Local, Remote pair for SRv6                    RFC 9256

  : [Table 2](#table-2){.selfRef}: [Segment
  Types](#name-segment-types-2){.selfRef}
:::

::: {#guidance}
::: {#section-12.1 .section}
### [12.1.](#section-12.1){.section-number .selfRef} [Guidance for Designated Experts](#name-guidance-for-designated-exp){.section-name .selfRef} {#name-guidance-for-designated-exp}

The Designated Expert (DE) is expected to ascertain the existence of
suitable documentation (a specification) as described in
\[[RFC8126](#RFC8126){.xref}\] and to verify that the document is
permanently and publicly available. The DE is also expected to check the
clarity of purpose and use of the requested assignment. Additionally,
the DE must verify that any request for one of these assignments has
been made available for review and comment within the IETF: the DE will
post the request to the SPRING Working Group mailing list (or a
successor mailing list designated by the IESG). If the request comes
from within the IETF, it should be documented in an Internet-Draft.
Lastly, the DE must ensure that any other request for a code point does
not conflict with work that is active or already published within the
IETF.[¶](#section-12.1-1){.pilcrow}
:::
:::
:::
:::

::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-13.1 .section}
### [13.1.](#section-13.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC7752\]
:   [Gredler, H., Ed.]{.refAuthor}, [Medved, J.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Farrel, A.]{.refAuthor}, and [S.
    Ray]{.refAuthor}, [\"North-Bound Distribution of Link-State and
    Traffic Engineering (TE) Information Using BGP\"]{.refTitle}, [RFC
    7752]{.seriesInfo}, [DOI 10.17487/RFC7752]{.seriesInfo}, March 2016,
    \<<https://www.rfc-editor.org/info/rfc7752>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8402\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Previdi, S., Ed.]{.refAuthor},
    [Ginsberg, L.]{.refAuthor}, [Decraene, B.]{.refAuthor},
    [Litkowski, S.]{.refAuthor}, and [R. Shakir]{.refAuthor}, [\"Segment
    Routing Architecture\"]{.refTitle}, [RFC 8402]{.seriesInfo}, [DOI
    10.17487/RFC8402]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8402>\>.
:   

\[RFC8660\]
:   [Bashandy, A., Ed.]{.refAuthor}, [Filsfils, C., Ed.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Decraene, B.]{.refAuthor},
    [Litkowski, S.]{.refAuthor}, and [R. Shakir]{.refAuthor}, [\"Segment
    Routing with the MPLS Data Plane\"]{.refTitle}, [RFC
    8660]{.seriesInfo}, [DOI 10.17487/RFC8660]{.seriesInfo}, December
    2019, \<<https://www.rfc-editor.org/info/rfc8660>\>.
:   

\[RFC8754\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Dukes, D., Ed.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Leddy, J.]{.refAuthor},
    [Matsushima, S.]{.refAuthor}, and [D. Voyer]{.refAuthor}, [\"IPv6
    Segment Routing Header (SRH)\"]{.refTitle}, [RFC 8754]{.seriesInfo},
    [DOI 10.17487/RFC8754]{.seriesInfo}, March 2020,
    \<<https://www.rfc-editor.org/info/rfc8754>\>.
:   

\[RFC8986\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Camarillo, P., Ed.]{.refAuthor},
    [Leddy, J.]{.refAuthor}, [Voyer, D.]{.refAuthor},
    [Matsushima, S.]{.refAuthor}, and [Z. Li]{.refAuthor}, [\"Segment
    Routing over IPv6 (SRv6) Network Programming\"]{.refTitle}, [RFC
    8986]{.seriesInfo}, [DOI 10.17487/RFC8986]{.seriesInfo}, February
    2021, \<<https://www.rfc-editor.org/info/rfc8986>\>.
:   

\[RFC9012\]
:   [Patel, K.]{.refAuthor}, [Van de Velde, G.]{.refAuthor},
    [Sangli, S.]{.refAuthor}, and [J. Scudder]{.refAuthor}, [\"The BGP
    Tunnel Encapsulation Attribute\"]{.refTitle}, [RFC
    9012]{.seriesInfo}, [DOI 10.17487/RFC9012]{.seriesInfo}, April 2021,
    \<<https://www.rfc-editor.org/info/rfc9012>\>.
:   
:::

::: {#section-13.2 .section}
### [13.2.](#section-13.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[BGP-LS-TE-POLICY\]
:   [Previdi, S.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor}, [Dong,
    J., Ed.]{.refAuthor}, [Chen, M.]{.refAuthor},
    [Gredler, H.]{.refAuthor}, and [J. Tantsura]{.refAuthor},
    [\"Distribution of Traffic Engineering (TE) Policies and State using
    BGP-LS\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-ietf-idr-te-lsp-distribution-17]{.seriesInfo}, April 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-idr-te-lsp-distribution-17>\>.
:   

\[BGP-SR-POLICY\]
:   [Previdi, S.]{.refAuthor}, [Filsfils, C.]{.refAuthor}, [Talaulikar,
    K., Ed.]{.refAuthor}, [Mattes, P.]{.refAuthor},
    [Jain, D.]{.refAuthor}, and [S. Lin]{.refAuthor}, [\"Advertising
    Segment Routing Policies in BGP\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-idr-segment-routing-te-policy-18]{.seriesInfo}, June
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-idr-segment-routing-te-policy-18>\>.
:   

\[IGP-FLEX-ALGO\]
:   [Psenak, P., Ed.]{.refAuthor}, [Hegde, S.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Talaulikar, K.]{.refAuthor}, and [A.
    Gulko]{.refAuthor}, [\"IGP Flexible Algorithm\"]{.refTitle}, [Work
    in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-lsr-flex-algo-20]{.seriesInfo}, May 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-lsr-flex-algo-20>\>.
:   

\[PCEP-BSID-LABEL\]
:   [Sivabalan, S.]{.refAuthor}, [Filsfils, C.]{.refAuthor},
    [Tantsura, J.]{.refAuthor}, [Previdi, S.]{.refAuthor}, and [C. Li,
    Ed.]{.refAuthor}, [\"Carrying Binding Label/Segment Identifier (SID)
    in PCE-based Networks.\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-pce-binding-label-sid-15]{.seriesInfo}, March 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-pce-binding-label-sid-15>\>.
:   

\[PCEP-SR-POLICY-CP\]
:   [Koldychev, M.]{.refAuthor}, [Sivabalan, S.]{.refAuthor},
    [Barth, C.]{.refAuthor}, [Peng, S.]{.refAuthor}, and [H.
    Bidgoli]{.refAuthor}, [\"PCEP extension to support Segment Routing
    Policy Candidate Paths\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-pce-segment-routing-policy-cp-07]{.seriesInfo}, 21 April
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-pce-segment-routing-policy-cp-07>\>.
:   

\[POI-SR\]
:   [Anand, M.]{.refAuthor}, [Bardhan, S.]{.refAuthor},
    [Subrahmaniam, R.]{.refAuthor}, [Tantsura, J.]{.refAuthor},
    [Mukhopadhyaya, U.]{.refAuthor}, and [C. Filsfils]{.refAuthor},
    [\"Packet-Optical Integration in Segment Routing\"]{.refTitle},
    [Work in Progress]{.refContent}, [Internet-Draft,
    draft-anand-spring-poi-sr-08]{.seriesInfo}, 29 July 2019,
    \<<https://datatracker.ietf.org/doc/html/draft-anand-spring-poi-sr-08>\>.
:   

\[RFC0020\]
:   [Cerf, V.]{.refAuthor}, [\"ASCII format for network
    interchange\"]{.refTitle}, [STD 80]{.seriesInfo}, [RFC
    20]{.seriesInfo}, [DOI 10.17487/RFC0020]{.seriesInfo}, October 1969,
    \<<https://www.rfc-editor.org/info/rfc20>\>.
:   

\[RFC1195\]
:   [Callon, R.]{.refAuthor}, [\"Use of OSI IS-IS for routing in TCP/IP
    and dual environments\"]{.refTitle}, [RFC 1195]{.seriesInfo}, [DOI
    10.17487/RFC1195]{.seriesInfo}, December 1990,
    \<<https://www.rfc-editor.org/info/rfc1195>\>.
:   

\[RFC2328\]
:   [Moy, J.]{.refAuthor}, [\"OSPF Version 2\"]{.refTitle}, [STD
    54]{.seriesInfo}, [RFC 2328]{.seriesInfo}, [DOI
    10.17487/RFC2328]{.seriesInfo}, April 1998,
    \<<https://www.rfc-editor.org/info/rfc2328>\>.
:   

\[RFC3630\]
:   [Katz, D.]{.refAuthor}, [Kompella, K.]{.refAuthor}, and [D.
    Yeung]{.refAuthor}, [\"Traffic Engineering (TE) Extensions to OSPF
    Version 2\"]{.refTitle}, [RFC 3630]{.seriesInfo}, [DOI
    10.17487/RFC3630]{.seriesInfo}, September 2003,
    \<<https://www.rfc-editor.org/info/rfc3630>\>.
:   

\[RFC4760\]
:   [Bates, T.]{.refAuthor}, [Chandra, R.]{.refAuthor},
    [Katz, D.]{.refAuthor}, and [Y. Rekhter]{.refAuthor},
    [\"Multiprotocol Extensions for BGP-4\"]{.refTitle}, [RFC
    4760]{.seriesInfo}, [DOI 10.17487/RFC4760]{.seriesInfo}, January
    2007, \<<https://www.rfc-editor.org/info/rfc4760>\>.
:   

\[RFC5305\]
:   [Li, T.]{.refAuthor} and [H. Smit]{.refAuthor}, [\"IS-IS Extensions
    for Traffic Engineering\"]{.refTitle}, [RFC 5305]{.seriesInfo}, [DOI
    10.17487/RFC5305]{.seriesInfo}, October 2008,
    \<<https://www.rfc-editor.org/info/rfc5305>\>.
:   

\[RFC5307\]
:   [Kompella, K., Ed.]{.refAuthor} and [Y. Rekhter, Ed.]{.refAuthor},
    [\"IS-IS Extensions in Support of Generalized Multi-Protocol Label
    Switching (GMPLS)\"]{.refTitle}, [RFC 5307]{.seriesInfo}, [DOI
    10.17487/RFC5307]{.seriesInfo}, October 2008,
    \<<https://www.rfc-editor.org/info/rfc5307>\>.
:   

\[RFC5329\]
:   [Ishiguro, K.]{.refAuthor}, [Manral, V.]{.refAuthor},
    [Davey, A.]{.refAuthor}, and [A. Lindem, Ed.]{.refAuthor},
    [\"Traffic Engineering Extensions to OSPF Version 3\"]{.refTitle},
    [RFC 5329]{.seriesInfo}, [DOI 10.17487/RFC5329]{.seriesInfo},
    September 2008, \<<https://www.rfc-editor.org/info/rfc5329>\>.
:   

\[RFC5340\]
:   [Coltun, R.]{.refAuthor}, [Ferguson, D.]{.refAuthor},
    [Moy, J.]{.refAuthor}, and [A. Lindem]{.refAuthor}, [\"OSPF for
    IPv6\"]{.refTitle}, [RFC 5340]{.seriesInfo}, [DOI
    10.17487/RFC5340]{.seriesInfo}, July 2008,
    \<<https://www.rfc-editor.org/info/rfc5340>\>.
:   

\[RFC5462\]
:   [Andersson, L.]{.refAuthor} and [R. Asati]{.refAuthor},
    [\"Multiprotocol Label Switching (MPLS) Label Stack Entry: \"EXP\"
    Field Renamed to \"Traffic Class\" Field\"]{.refTitle}, [RFC
    5462]{.seriesInfo}, [DOI 10.17487/RFC5462]{.seriesInfo}, February
    2009, \<<https://www.rfc-editor.org/info/rfc5462>\>.
:   

\[RFC6830\]
:   [Farinacci, D.]{.refAuthor}, [Fuller, V.]{.refAuthor},
    [Meyer, D.]{.refAuthor}, and [D. Lewis]{.refAuthor}, [\"The
    Locator/ID Separation Protocol (LISP)\"]{.refTitle}, [RFC
    6830]{.seriesInfo}, [DOI 10.17487/RFC6830]{.seriesInfo}, January
    2013, \<<https://www.rfc-editor.org/info/rfc6830>\>.
:   

\[RFC7471\]
:   [Giacalone, S.]{.refAuthor}, [Ward, D.]{.refAuthor},
    [Drake, J.]{.refAuthor}, [Atlas, A.]{.refAuthor}, and [S.
    Previdi]{.refAuthor}, [\"OSPF Traffic Engineering (TE) Metric
    Extensions\"]{.refTitle}, [RFC 7471]{.seriesInfo}, [DOI
    10.17487/RFC7471]{.seriesInfo}, March 2015,
    \<<https://www.rfc-editor.org/info/rfc7471>\>.
:   

\[RFC8231\]
:   [Crabbe, E.]{.refAuthor}, [Minei, I.]{.refAuthor},
    [Medved, J.]{.refAuthor}, and [R. Varga]{.refAuthor}, [\"Path
    Computation Element Communication Protocol (PCEP) Extensions for
    Stateful PCE\"]{.refTitle}, [RFC 8231]{.seriesInfo}, [DOI
    10.17487/RFC8231]{.seriesInfo}, September 2017,
    \<<https://www.rfc-editor.org/info/rfc8231>\>.
:   

\[RFC8476\]
:   [Tantsura, J.]{.refAuthor}, [Chunduri, U.]{.refAuthor},
    [Aldrin, S.]{.refAuthor}, and [P. Psenak]{.refAuthor}, [\"Signaling
    Maximum SID Depth (MSD) Using OSPF\"]{.refTitle}, [RFC
    8476]{.seriesInfo}, [DOI 10.17487/RFC8476]{.seriesInfo}, December
    2018, \<<https://www.rfc-editor.org/info/rfc8476>\>.
:   

\[RFC8491\]
:   [Tantsura, J.]{.refAuthor}, [Chunduri, U.]{.refAuthor},
    [Aldrin, S.]{.refAuthor}, and [L. Ginsberg]{.refAuthor},
    [\"Signaling Maximum SID Depth (MSD) Using IS-IS\"]{.refTitle}, [RFC
    8491]{.seriesInfo}, [DOI 10.17487/RFC8491]{.seriesInfo}, November
    2018, \<<https://www.rfc-editor.org/info/rfc8491>\>.
:   

\[RFC8570\]
:   [Ginsberg, L., Ed.]{.refAuthor}, [Previdi, S., Ed.]{.refAuthor},
    [Giacalone, S.]{.refAuthor}, [Ward, D.]{.refAuthor},
    [Drake, J.]{.refAuthor}, and [Q. Wu]{.refAuthor}, [\"IS-IS Traffic
    Engineering (TE) Metric Extensions\"]{.refTitle}, [RFC
    8570]{.seriesInfo}, [DOI 10.17487/RFC8570]{.seriesInfo}, March 2019,
    \<<https://www.rfc-editor.org/info/rfc8570>\>.
:   

\[RFC8664\]
:   [Sivabalan, S.]{.refAuthor}, [Filsfils, C.]{.refAuthor},
    [Tantsura, J.]{.refAuthor}, [Henderickx, W.]{.refAuthor}, and [J.
    Hardwick]{.refAuthor}, [\"Path Computation Element Communication
    Protocol (PCEP) Extensions for Segment Routing\"]{.refTitle}, [RFC
    8664]{.seriesInfo}, [DOI 10.17487/RFC8664]{.seriesInfo}, December
    2019, \<<https://www.rfc-editor.org/info/rfc8664>\>.
:   

\[RFC8814\]
:   [Tantsura, J.]{.refAuthor}, [Chunduri, U.]{.refAuthor},
    [Talaulikar, K.]{.refAuthor}, [Mirsky, G.]{.refAuthor}, and [N.
    Triantafillis]{.refAuthor}, [\"Signaling Maximum SID Depth (MSD)
    Using the Border Gateway Protocol - Link State\"]{.refTitle}, [RFC
    8814]{.seriesInfo}, [DOI 10.17487/RFC8814]{.seriesInfo}, August
    2020, \<<https://www.rfc-editor.org/info/rfc8814>\>.
:   

\[RFC9086\]
:   [Previdi, S.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Patel, K.]{.refAuthor},
    [Ray, S.]{.refAuthor}, and [J. Dong]{.refAuthor}, [\"Border Gateway
    Protocol - Link State (BGP-LS) Extensions for Segment Routing BGP
    Egress Peer Engineering\"]{.refTitle}, [RFC 9086]{.seriesInfo}, [DOI
    10.17487/RFC9086]{.seriesInfo}, August 2021,
    \<<https://www.rfc-editor.org/info/rfc9086>\>.
:   

\[SR-POLICY-CONSID\]
:   [Filsfils, C.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor},
    [Krol, P.]{.refAuthor}, [Horneffer, M.]{.refAuthor}, and [P.
    Mattes]{.refAuthor}, [\"SR Policy Implementation and Deployment
    Considerations\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-filsfils-spring-sr-policy-considerations-09]{.seriesInfo}, 24
    April 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-filsfils-spring-sr-policy-considerations-09>\>.
:   

\[SR-POLICY-YANG\]
:   [Raza, K., Ed.]{.refAuthor}, [Sawaya, S.]{.refAuthor},
    [Shunwan, Z.]{.refAuthor}, [Voyer, D.]{.refAuthor},
    [Durrani, M.]{.refAuthor}, [Matsushima, S.]{.refAuthor}, and [V.
    Beeram]{.refAuthor}, [\"YANG Data Model for Segment Routing
    Policy\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-ietf-spring-sr-policy-yang-01]{.seriesInfo},
    April 2021,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-policy-yang-01>\>.
:   

\[SR-TI-LFA\]
:   [Litkowski, S.]{.refAuthor}, [Bashandy, A.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Francois, P.]{.refAuthor},
    [Decraene, B.]{.refAuthor}, and [D. Voyer]{.refAuthor}, [\"Topology
    Independent Fast Reroute using Segment Routing\"]{.refTitle}, [Work
    in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-rtgwg-segment-routing-ti-lfa-08]{.seriesInfo}, 21 January
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-rtgwg-segment-routing-ti-lfa-08>\>.
:   

\[SR-TRAFFIC-ACCOUNTING\]
:   [Ali, Z.]{.refAuthor}, [Filsfils, C.]{.refAuthor},
    [Talaulikar, K.]{.refAuthor}, [Sivabalan, S.]{.refAuthor},
    [Horneffer, M.]{.refAuthor}, [Raszuk, R.]{.refAuthor},
    [Litkowski, S.]{.refAuthor}, [Voyer, D.]{.refAuthor},
    [Morton, R.]{.refAuthor}, and [G. Dawra]{.refAuthor}, [\"Traffic
    Accounting in Segment Routing Networks\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ali-spring-sr-traffic-accounting-07]{.seriesInfo}, May 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ali-spring-sr-traffic-accounting-07>\>.
:   

\[SR-TRAFFIC-COUNTERS\]
:   [Filsfils, C.]{.refAuthor}, [Ali, Z., Ed.]{.refAuthor},
    [Horneffer, M.]{.refAuthor}, [Voyer, D.]{.refAuthor},
    [Durrani, M.]{.refAuthor}, and [R. Raszuk]{.refAuthor}, [\"Segment
    Routing Traffic Accounting Counters\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-filsfils-spring-sr-traffic-counters-02]{.seriesInfo}, October
    2021,
    \<<https://datatracker.ietf.org/doc/html/draft-filsfils-spring-sr-traffic-counters-02>\>.
:   
:::
:::

::: {#Acknowledgement}
::: {#appendix-A .section}
## [Acknowledgement](#name-acknowledgement){.section-name .selfRef} {#name-acknowledgement}

The authors would like to thank [Tarek Saad]{.contact-name}, [Dhanendra
Jain]{.contact-name}, [Ruediger Geib]{.contact-name}, [Rob
Shakir]{.contact-name}, [Cheng Li]{.contact-name}, [Dhruv
Dhody]{.contact-name}, [Gyan Mishra]{.contact-name}, [Nandan
Saha]{.contact-name}, [Jim Guichard]{.contact-name}, [Martin
Vigoureux]{.contact-name}, [Benjamin Schwartz]{.contact-name}, [David
Schinazi]{.contact-name}, [Matthew Bocci]{.contact-name}, [Cullen
Jennings]{.contact-name}, and [Carlos J. Bernardos]{.contact-name} for
their review, comments, and suggestions.[¶](#appendix-A-1){.pilcrow}
:::
:::

::: {#Contributors}
::: {#appendix-B .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

The following people have contributed to this
document:[¶](#appendix-B-1){.pilcrow}

::: {.left dir="auto"}
[Siva Sivabalan]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <msiva@cisco.com>
:::

::: {.left dir="auto"}
[Zafar Ali]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <zali@cisco.com>
:::

::: {.left dir="auto"}
[Jose Liste]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <jliste@cisco.com>
:::

::: {.left dir="auto"}
[Francois Clad]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <fclad@cisco.com>
:::

::: {.left dir="auto"}
[Kamran Raza]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <skraza@cisco.com>
:::

::: {.left dir="auto"}
[Mike Koldychev]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: email
Email: <mkoldych@cisco.com>
:::

::: {.left dir="auto"}
[Shraddha Hegde]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <shraddha@juniper.net>
:::

::: {.left dir="auto"}
[Steven Lin]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Google, Inc.]{.org}
:::

::: email
Email: <stevenlin@google.com>
:::

::: {.left dir="auto"}
[Przemyslaw Krol]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Google, Inc.]{.org}
:::

::: email
Email: <pkrol@google.com>
:::

::: {.left dir="auto"}
[Martin Horneffer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Deutsche Telekom]{.org}
:::

::: email
Email: <martin.horneffer@telekom.de>
:::

::: {.left dir="auto"}
[Dirk Steinberg]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Steinberg Consulting]{.org}
:::

::: email
Email: <dws@steinbergnet.net>
:::

::: {.left dir="auto"}
[Bruno Decraene]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Orange Business Services]{.org}
:::

::: email
Email: <bruno.decraene@orange.com>
:::

::: {.left dir="auto"}
[Stephane Litkowski]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Orange Business Services]{.org}
:::

::: email
Email: <stephane.litkowski@orange.com>
:::

::: {.left dir="auto"}
[Luay Jalil]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Verizon]{.org}
:::

::: email
Email: <luay.jalil@verizon.com>
:::
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Clarence Filsfils]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Pegasus Parc]{.extended-address}
:::

::: {.left dir="auto"}
[De kleetlaan 6a]{.street-address}
:::

::: {.left dir="auto"}
[1831]{.postal-code} [Diegem]{.locality}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <cfilsfil@cisco.com>
:::

::: {.left dir="auto"}
[Ketan Talaulikar ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[India]{.country-name}
:::

::: email
Email: <ketant.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Daniel Voyer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: {.left dir="auto"}
[671 de la gauchetiere W]{.street-address}
:::

::: {.left dir="auto"}
[Montreal]{.locality} [Quebec]{.region} [H3B 2M8]{.postal-code}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <daniel.voyer@bell.ca>
:::

::: {.left dir="auto"}
[Alex Bogdanov]{.fn .nameRole}
:::

::: {.left dir="auto"}
[British Telecom]{.org}
:::

::: email
Email: <alex.bogdanov@bt.com>
:::

::: {.left dir="auto"}
[Paul Mattes]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Microsoft]{.org}
:::

::: {.left dir="auto"}
[One Microsoft Way]{.street-address}
:::

::: {.left dir="auto"}
[Redmond]{.locality}, [WA]{.region} [98052-6399]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <pamattes@microsoft.com>
:::
:::
:::
