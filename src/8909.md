  RFC 8909   Registry Data Escrow   November 2020
  ---------- ---------------------- ---------------
  Lozano     Standards Track        \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8909](https://www.rfc-editor.org/rfc/rfc8909){.eref}

Category:
:   Standards Track

Published:
:   November 2020

ISSN:
:   2070-1721

Author:

:   ::: author
    ::: author-name
    G. Lozano
    :::

    ::: org
    ICANN
    :::
    :::
:::

# RFC 8909 {#rfcnum}

# Registry Data Escrow Specification {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document specifies the format and contents of data escrow deposits
targeted primarily for domain name registries. The specification is
designed to be independent of the underlying objects that are being
escrowed, and therefore it could also be used for purposes other than
domain name registries.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8909>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Problem
    Scope](#name-problem-scope){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Conventions Used in This
    Document](#name-conventions-used-in-this-do){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Date and
        Time](#name-date-and-time){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Protocol
    Description](#name-protocol-description){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Root Element
        \<deposit>](#name-root-element-deposit){.xref}[¶](#section-toc.1-1.5.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [Rebuilding the Registry from Data
        Escrow
        Deposits](#name-rebuilding-the-registry-fro){.xref}[¶](#section-toc.1-1.5.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Formal
    Syntax](#name-formal-syntax){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [RDE
        Schema](#name-rde-schema){.xref}[¶](#section-toc.1-1.6.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Internationalization
    Considerations](#name-internationalization-consid){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Privacy
    Considerations](#name-privacy-considerations){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Example of a Full
    Deposit](#name-example-of-a-full-deposit){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [Example of a Differential
    Deposit](#name-example-of-a-differential-d){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [Example of an Incremental
    Deposit](#name-example-of-an-incremental-d){.xref}[¶](#section-toc.1-1.13.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.14}
    [14](#section-14){.xref}. [References](#name-references){.xref}[¶](#section-toc.1-1.14.1){.pilcrow}

    -   ::: {#section-toc.1-1.14.2.1}
        [14.1](#section-14.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.14.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.14.2.2}
        [14.2](#section-14.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.14.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.15}
    [](#section-appendix.a){.xref}[Acknowledgments](#name-acknowledgments){.xref}[¶](#section-toc.1-1.15.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.16}
    [](#section-appendix.b){.xref}[Author\'s
    Address](#name-authors-address){.xref}[¶](#section-toc.1-1.16.1){.pilcrow}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Registry Data Escrow (RDE) is the process by which a registry
periodically submits data deposits to a third party called an escrow
agent. These deposits comprise the minimum data needed by a third party
to resume operations if the registry cannot function and is unable or
unwilling to facilitate an orderly transfer of service. For example, for
a domain name registry or registrar, the data to be deposited would
include all of the objects related to registered domain names, e.g.,
names, contacts, name servers.[¶](#section-1-1){.pilcrow}

The goal of data escrow is higher resiliency of registration services,
for the benefit of Internet users. The beneficiaries of a registry are
not just those registering information there but also the users of
services relying on the registry data.[¶](#section-1-2){.pilcrow}

In the context of domain name registries, registration data escrow is a
requirement for generic Top-Level Domains (gTLDs) (e.g., Specification 2
of the ICANN Base Registry Agreement; see
\[[ICANN-GTLD-RA-20170731](#ICANN-GTLD-RA-20170731){.xref}\]), and some
country code TLD (ccTLD) managers are also currently escrowing data.
There is also a similar requirement for ICANN-accredited domain
registrars.[¶](#section-1-3){.pilcrow}

This document specifies a format for data escrow deposits independent of
the objects being escrowed. An independent specification is required for
each type of registry/set of objects that is expected to be
escrowed.[¶](#section-1-4){.pilcrow}

The format for data escrow deposits is specified using version 1.0 of
the Extensible Markup Language (XML) as described in
\[[W3C.REC-xml-20081126](#W3C.REC-xml-20081126){.xref}\], and XML Schema
notation as described in
\[[W3C.REC-xmlschema-1-20041028](#W3C.REC-xmlschema-1-20041028){.xref}\]
and
\[[W3C.REC-xmlschema-2-20041028](#W3C.REC-xmlschema-2-20041028){.xref}\].[¶](#section-1-5){.pilcrow}

Readers are advised to read [Section 2](#terms){.xref} (\"Terminology\")
carefully to understand the precise meanings of Differential and
Incremental Deposits, as the definitions used in this document are
different from the definitions typically used in the domain of data
backups.[¶](#section-1-6){.pilcrow}
:::

::: {#terms}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

[]{.break}

Deposit:
:   There are three kinds of deposits: Full, Differential, and
    Incremental. For all three kinds of deposits, the universe of
    registry objects to be considered for data escrow is comprised of
    any objects required to offer the registry
    services.[¶](#section-2-2.2){.pilcrow}
:   

Differential Deposit:
:   A Differential Deposit contains data that reflects all transactions
    involving the database that were not reflected in the last previous
    Full, Incremental, or Differential Deposit, as the case may be.
    Differential Deposit files will contain information from all
    database objects that were added, modified, or deleted since the
    previous deposit was completed as of its defined Timeline
    Watermark.[¶](#section-2-2.4){.pilcrow}
:   

Domain Name:
:   See the definition of \"domain name\" in
    \[[RFC8499](#RFC8499){.xref}\].[¶](#section-2-2.6){.pilcrow}
:   

Escrow Agent:
:   An escrow agent is the organization designated by the registry or
    the third-party beneficiary to receive and guard data escrow
    deposits from the registry.[¶](#section-2-2.8){.pilcrow}
:   

Full Deposit:
:   A Full Deposit contains the registry data that reflects the current
    and complete registry database and will consist of data that
    reflects the state of the registry as of a defined Timeline
    Watermark for the deposit.[¶](#section-2-2.10){.pilcrow}
:   

Incremental Deposit:
:   An Incremental Deposit contains data that reflects all transactions
    involving the database that were not reflected in the last previous
    Full Deposit. Incremental Deposit files will contain information
    from all database objects that were added, modified, or deleted
    since the previous Full Deposit was completed as of its defined
    Timeline Watermark. If the Timeline Watermark of an Incremental
    Deposit were to cover the Timeline Watermark of another Incremental
    or Differential Deposit since the last Full Deposit (i.e., one or
    more Incremental or Differential Deposits exist for the period
    between the Timeline Watermark of a Full Deposit and an Incremental
    or Differential Deposit), the more recent deposit [MUST]{.bcp14}
    contain all of the transactions of the earlier
    deposit.[¶](#section-2-2.12){.pilcrow}
:   

Registrar:
:   See the definition of \"registrar\" in
    \[[RFC8499](#RFC8499){.xref}\].[¶](#section-2-2.14){.pilcrow}
:   

Registry:
:   See the definition of \"registry\" in
    \[[RFC8499](#RFC8499){.xref}\].[¶](#section-2-2.16){.pilcrow}
:   

Third-Party Beneficiary:
:   A third-party beneficiary is the organization that, under
    extraordinary circumstances, would receive the escrow deposits the
    registry transferred to the escrow agent. This organization could be
    a backup registry, registry regulator, contracting party of the
    registry, etc.[¶](#section-2-2.18){.pilcrow}
:   

Timeline Watermark:
:   The Timeline Watermark is the point in time on which to base the
    collecting of database objects for a deposit. Deposits are expected
    to be consistent with that point in
    time.[¶](#section-2-2.20){.pilcrow}
:   

Top-Level Domain (TLD):
:   See the definition of \"Top-Level Domain\" in
    \[[RFC8499](#RFC8499){.xref}\].[¶](#section-2-2.22){.pilcrow}
:   
:::
:::

::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Problem Scope](#name-problem-scope){.section-name .selfRef} {#name-problem-scope}

In the past few years, the issue of registry continuity has been
carefully considered in the gTLD and ccTLD spaces. Various organizations
have carried out risk analyses and developed business continuity plans
to deal with those risks, should they
materialize.[¶](#section-3-1){.pilcrow}

One of the solutions considered and used, especially in the gTLD space,
is Registry Data Escrow as a way to ensure the continuity of registry
services in the extreme case of registry
failure.[¶](#section-3-2){.pilcrow}

So far, almost every registry that uses Registry Data Escrow has its own
specification. It is anticipated that more registries will be
implementing escrow, especially with an increasing number of domain
registries coming into service, adding complexity to this
issue.[¶](#section-3-3){.pilcrow}

It would seem beneficial to have a standardized specification for
Registry Data Escrow that can be used by any registry to submit its
deposits.[¶](#section-3-4){.pilcrow}

While the domain name industry has been the main target for this
specification, it has been designed to be as general as
possible.[¶](#section-3-5){.pilcrow}

Specifications covering the objects used by registration organizations
shall identify the format and contents of the deposits a registry has to
make, such that a different registry would be able to rebuild the
registration services of the former, without its help, in a timely
manner and with minimum disruption to its
users.[¶](#section-3-6){.pilcrow}

Since the details of the registration services provided vary from
registry to registry, specifications covering the objects used by
registration organizations shall provide mechanisms that allow
extensibility to accommodate variations and extensions of the
registration services.[¶](#section-3-7){.pilcrow}

Given the requirement for confidentiality and the importance of accuracy
of the information that is handled in order to offer registration
services, parties using this specification shall define confidentiality
and integrity mechanisms for handling the registration
data.[¶](#section-3-8){.pilcrow}

Specifications covering the objects used by registration organizations
shall not include in the specification transient objects that can be
recreated by the new registry, particularly those of delicate
confidentiality, e.g., DNSSEC KSK/ZSK (Key Signing Key / Zone Signing
Key) private keys.[¶](#section-3-9){.pilcrow}

Details that are a matter of policy should be identified as such for the
benefit of the implementers.[¶](#section-3-10){.pilcrow}

Non-technical issues concerning data escrow, such as whether to escrow
data and for what purposes the data may be used, are outside the scope
of this document.[¶](#section-3-11){.pilcrow}

Parties using this specification shall use a signaling mechanism to
control the transmission, reception, and validation of data escrow
deposits. The definition of such a signaling mechanism is outside the
scope of this document.[¶](#section-3-12){.pilcrow}
:::

::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Conventions Used in This Document](#name-conventions-used-in-this-do){.section-name .selfRef} {#name-conventions-used-in-this-do}

The XML namespace prefix \"rde\" is used for the namespace
\"urn:ietf:params:xml:ns:rde-1.0\", but implementations [MUST
NOT]{.bcp14} depend on it; instead, they should employ a proper
namespace-aware XML parser and serializer to interpret and output the
XML documents.[¶](#section-4-1){.pilcrow}

The XML namespace prefixes \"rdeObj1\" and \"rdeObj2\", with the
corresponding namespaces \"urn:example:params:xml:ns:rdeObj1-1.0\" and
\"urn:example:params:xml:ns:rdeObj2-1.0\", are used as example data
escrow objects.[¶](#section-4-2){.pilcrow}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Date and Time](#name-date-and-time){.section-name .selfRef} {#name-date-and-time}

Numerous fields indicate \"dates\", such as the creation and expiry
dates for objects. These fields [SHALL]{.bcp14} contain timestamps
indicating the date and time in UTC, specified in Internet Date/Time
Format (see \[[RFC3339](#RFC3339){.xref}\], [Section
5.6](https://www.rfc-editor.org/rfc/rfc3339#section-5.6){.relref}) with
the time-offset parameter specified as
\"Z\".[¶](#section-4.1-1){.pilcrow}
:::
:::

::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Protocol Description](#name-protocol-description){.section-name .selfRef} {#name-protocol-description}

The format for data escrow deposits as produced by a registry is defined
below. The deposits are represented in XML ([Section
6](#formalSyntax){.xref}). Only the format of the objects deposited is
defined. This document does not prescribe the method used to transfer
such deposits between the registry and the escrow agent or vice
versa.[¶](#section-5-1){.pilcrow}

The protocol intends to be object agnostic, allowing the \"overload\" of
abstract elements using the \"substitutionGroup\" attribute
\[[W3C.REC-xmlschema-1-20041028](#W3C.REC-xmlschema-1-20041028){.xref}\]
of the XML Schema element to define the actual elements of an object to
be escrowed.[¶](#section-5-2){.pilcrow}

The specification for each object to be escrowed [MUST]{.bcp14} declare
the identifier to be used to reference the object to be deleted or
added/modified.[¶](#section-5-3){.pilcrow}

::: {#root_element}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Root Element \<deposit>](#name-root-element-deposit){.section-name .selfRef} {#name-root-element-deposit}

The container or root element for a Registry Data Escrow deposit is
\<deposit>.[¶](#section-5.1-1){.pilcrow}

The \<deposit> element contains the following
attributes:[¶](#section-5.1-2){.pilcrow}

-   ::: {#section-5.1-3.1}
    A [REQUIRED]{.bcp14} \"type\" attribute that is used to identify the
    kind of deposit:[¶](#section-5.1-3.1.1){.pilcrow}

    -   [FULL:
        Full.[¶](#section-5.1-3.1.2.1){.pilcrow}]{#section-5.1-3.1.2.1}
    -   [INCR:
        Incremental.[¶](#section-5.1-3.1.2.2){.pilcrow}]{#section-5.1-3.1.2.2}
    -   [DIFF:
        Differential.[¶](#section-5.1-3.1.2.3){.pilcrow}]{#section-5.1-3.1.2.3}
    :::

-   [A [REQUIRED]{.bcp14} \"id\" attribute that is used to uniquely
    identify the escrow deposit. Each registry is responsible for
    maintaining its own escrow deposits\' identifier space to ensure
    uniqueness.[¶](#section-5.1-3.2){.pilcrow}]{#section-5.1-3.2}

-   [A \"prevId\" attribute that can be used to identify the previous
    Incremental, Differential, or Full Deposit. This attribute is
    [REQUIRED]{.bcp14} in Differential Deposits (\"DIFF\" type), is
    [OPTIONAL]{.bcp14} in Incremental Deposits (\"INCR\" type), and is
    not used in Full Deposits (\"FULL\"
    type).[¶](#section-5.1-3.3){.pilcrow}]{#section-5.1-3.3}

-   [An [OPTIONAL]{.bcp14} \"resend\" attribute that is incremented each
    time the escrow deposit failed the verification procedure at the
    receiving party and a new escrow deposit needs to be generated by
    the registry for that specific date. The first time a deposit is
    generated, the attribute either (1) is omitted or (2) [MUST]{.bcp14}
    be \"0\". If a deposit needs to be generated again, the attribute
    [MUST]{.bcp14} be set to \"1\", and so
    on.[¶](#section-5.1-3.4){.pilcrow}]{#section-5.1-3.4}

The \<deposit> element contains the following child
elements:[¶](#section-5.1-4){.pilcrow}

::: {#watermark}
::: {#section-5.1.1 .section}
#### [5.1.1.](#section-5.1.1){.section-number .selfRef} [Child \<watermark> Element](#name-child-watermark-element){.section-name .selfRef} {#name-child-watermark-element}

A [REQUIRED]{.bcp14} \<watermark> element contains the date-time
\[[RFC3339](#RFC3339){.xref}\] corresponding to the Timeline Watermark
of the deposit.[¶](#section-5.1.1-1){.pilcrow}
:::
:::

::: {#rdeMenu}
::: {#section-5.1.2 .section}
#### [5.1.2.](#section-5.1.2){.section-number .selfRef} [Child \<rdeMenu> Element](#name-child-rdemenu-element){.section-name .selfRef} {#name-child-rdemenu-element}

This element contains auxiliary information regarding the data escrow
deposit.[¶](#section-5.1.2-1){.pilcrow}

A [REQUIRED]{.bcp14} \<rdeMenu> element contains the following child
elements:[¶](#section-5.1.2-2){.pilcrow}

-   [A [REQUIRED]{.bcp14} \<version> element that identifies the RDE
    protocol version. This value [MUST]{.bcp14} be
    1.0.[¶](#section-5.1.2-3.1){.pilcrow}]{#section-5.1.2-3.1}
-   [One or more \<objURI> elements that contain namespace URIs
    representing the \<contents> and \<deletes> element
    objects.[¶](#section-5.1.2-3.2){.pilcrow}]{#section-5.1.2-3.2}
:::
:::

::: {#deletes}
::: {#section-5.1.3 .section}
#### [5.1.3.](#section-5.1.3){.section-number .selfRef} [Child \<deletes> Element](#name-child-deletes-element){.section-name .selfRef} {#name-child-deletes-element}

For Differential Deposits, this element contains the list of objects
that have been deleted since the previous deposit of any type. For
Incremental Deposits, this element contains the list of objects that
have been deleted since the previous Full
Deposit.[¶](#section-5.1.3-1){.pilcrow}

This section of the deposit [MUST NOT]{.bcp14} be present in Full
Deposits.[¶](#section-5.1.3-2){.pilcrow}
:::
:::

::: {#contents}
::: {#section-5.1.4 .section}
#### [5.1.4.](#section-5.1.4){.section-number .selfRef} [Child \<contents> Element](#name-child-contents-element){.section-name .selfRef} {#name-child-contents-element}

For Full Deposits, this element contains all objects. For Differential
Deposits, this element contains the list of objects that have been added
or modified since the previous deposit of any type. For Incremental
Deposits, this element contains the list of objects that have been added
or modified since the previous Full
Deposit.[¶](#section-5.1.4-1){.pilcrow}
:::
:::
:::
:::

::: {#rebuilding}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [Rebuilding the Registry from Data Escrow Deposits](#name-rebuilding-the-registry-fro){.section-name .selfRef} {#name-rebuilding-the-registry-fro}

When applying Incremental or Differential Deposits (when rebuilding the
registry from data escrow deposits), the relative order of the
\<deletes> and \<contents> elements is important because dependencies
may exist between the objects. All of the \<deletes> elements
[MUST]{.bcp14} be applied first, in the order in which they appear. All
of the \<contents> elements [MUST]{.bcp14} be applied next, in the order
in which they appear.[¶](#section-5.2-1){.pilcrow}

If an object is present in the \<contents> or \<deletes> section of
several deposits (e.g., Full and Differential), the registry data from
the latest deposit (as defined by the Timeline Watermark)
[SHOULD]{.bcp14} be used when rebuilding the registry. An object [SHOULD
NOT]{.bcp14} exist multiple times in either the \<contents> or
\<deletes> elements in a single deposit.[¶](#section-5.2-2){.pilcrow}

When rebuilding a registry, the \<deletes> section [MUST]{.bcp14} be
ignored if present in a Full Deposit.[¶](#section-5.2-3){.pilcrow}
:::
:::
:::

::: {#formalSyntax}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Formal Syntax](#name-formal-syntax){.section-name .selfRef} {#name-formal-syntax}

RDE is specified in XML Schema notation. The formal syntax presented
here is a complete schema representation of RDE suitable for automated
validation of RDE XML instances.[¶](#section-6-1){.pilcrow}

The \<CODE BEGINS> and \<CODE ENDS> tags are not part of the schema;
they are used to note the beginning and ending of the schema for URI
registration purposes.[¶](#section-6-2){.pilcrow}

::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [RDE Schema](#name-rde-schema){.section-name .selfRef} {#name-rde-schema}

::: {#section-6.1-1}
``` {.sourcecode .lang-xml}
<CODE BEGINS>
<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="urn:ietf:params:xml:ns:rde-1.0"
  xmlns:rde="urn:ietf:params:xml:ns:rde-1.0"
  xmlns="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified">

  <annotation>
    <documentation>
      Registry Data Escrow schema
    </documentation>
  </annotation>

  <!-- Root element -->
  <element name="deposit" type="rde:escrowDepositType"/>

  <!-- RDE types -->
  <complexType name="escrowDepositType">
    <sequence>
      <element name="watermark" type="dateTime"/>
      <element name="rdeMenu" type="rde:rdeMenuType"/>
      <element name="deletes" type="rde:deletesType" minOccurs="0"/>
      <element name="contents" type="rde:contentsType"
        minOccurs="0"/>
    </sequence>
    <attribute name="type" type="rde:depositTypeType"
      use="required"/>
    <attribute name="id" type="rde:depositIdType" use="required"/>
    <attribute name="prevId" type="rde:depositIdType"/>
    <attribute name="resend" type="unsignedShort" default="0"/>
  </complexType>

  <!-- Menu type -->
  <complexType name="rdeMenuType">
    <sequence>
      <element name="version" type="rde:versionType"/>
      <element name="objURI" type="anyURI" maxOccurs="unbounded"/>
    </sequence>
  </complexType>

  <!-- Deletes type -->
  <complexType name="deletesType">
    <sequence minOccurs="0" maxOccurs="unbounded">
      <element ref="rde:delete"/>
    </sequence>
  </complexType>

  <element name="delete" type="rde:deleteType" abstract="true"/>
  <complexType name="deleteType">
    <complexContent>
      <restriction base="anyType"/>
    </complexContent>
  </complexType>

  <!-- Contents type -->
  <complexType name="contentsType">
    <sequence minOccurs="0" maxOccurs="unbounded">
      <element ref="rde:content"/>
    </sequence>
  </complexType>

  <element name="content" type="rde:contentType" abstract="true"/>
  <complexType name="contentType">
    <complexContent>
      <restriction base="anyType"/>
    </complexContent>
  </complexType>

  <!-- Type of deposit -->
  <simpleType name="depositTypeType">
    <restriction base="token">
      <enumeration value="FULL"/>
      <enumeration value="INCR"/>
      <enumeration value="DIFF"/>
    </restriction>
  </simpleType>

  <!-- Deposit identifier type -->
  <simpleType name="depositIdType">
    <restriction base="token">
      <pattern value="\w{1,13}"/>
    </restriction>
  </simpleType>

  <!-- A RDE version number is a dotted pair of decimal numbers -->
  <simpleType name="versionType">
    <restriction base="token">
      <pattern value="[1-9]+\.[0-9]+"/>
      <enumeration value="1.0"/>
    </restriction>
  </simpleType>

</schema>
<CODE ENDS>
```

[¶](#section-6.1-1){.pilcrow}
:::
:::
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Internationalization Considerations](#name-internationalization-consid){.section-name .selfRef} {#name-internationalization-consid}

Data escrow deposits are represented in XML, which provides native
support for encoding information using the Unicode character set and its
more compact representations, including UTF-8. Conformant XML processors
recognize both UTF-8 and UTF-16. Though XML includes provisions to
identify and use other character encodings through the use of an
\"encoding\" attribute in an \<?xml?> declaration, the use of UTF-8 is
[RECOMMENDED]{.bcp14}.[¶](#section-7-1){.pilcrow}
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document uses URNs to describe XML namespaces and XML schemas
conforming to a registry mechanism described in
\[[RFC3688](#RFC3688){.xref}\]. Two URI assignments have been registered
by the IANA.[¶](#section-8-1){.pilcrow}

Registration for the RDE namespace:[¶](#section-8-2){.pilcrow}

[]{.break}

URI:
:   urn:ietf:params:xml:ns:rde-1.0[¶](#section-8-3.2){.pilcrow}
:   

Registrant Contact:
:   IESG[¶](#section-8-3.4){.pilcrow}
:   

XML:
:   None. Namespace URIs do not represent an XML
    specification.[¶](#section-8-3.6){.pilcrow}
:   

Registration for the RDE XML schema:[¶](#section-8-4){.pilcrow}

[]{.break}

URI:
:   urn:ietf:params:xml:schema:rde-1.0[¶](#section-8-5.2){.pilcrow}
:   

Registrant Contact:
:   IESG[¶](#section-8-5.4){.pilcrow}
:   

See [Section 6](#formalSyntax){.xref} (\"Formal Syntax\") of this
document.[¶](#section-8-6){.pilcrow}
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This specification does not define the security mechanisms to be used in
the transmission of the data escrow deposits, since it only specifies
the minimum necessary to enable the rebuilding of a registry from
deposits without intervention from the original
registry.[¶](#section-9-1){.pilcrow}

Depending on local policies, some elements \-- or, most likely, the
whole deposit \-- will be considered confidential. As such, the parties
[SHOULD]{.bcp14} take all necessary precautions, such as encrypting the
data at rest and in transit to avoid inadvertent disclosure of private
data. Regardless of the precautions taken by the parties regarding data
at rest and in transit, authentication credentials [MUST NOT]{.bcp14} be
escrowed.[¶](#section-9-2){.pilcrow}

Authentication of the parties passing data escrow deposit files is also
of the utmost importance. The escrow agent [MUST]{.bcp14} properly
authenticate the identity of the registry before accepting data escrow
deposits. Similarly, the registry [MUST]{.bcp14} authenticate the
identity of the escrow agent before submitting any
data.[¶](#section-9-3){.pilcrow}

Additionally, the registry and the escrow agent [MUST]{.bcp14} use
integrity-checking mechanisms to ensure that the data transmitted is
what the source intended. Validation of the contents by the escrow agent
is [RECOMMENDED]{.bcp14} to ensure not only that the file was
transmitted correctly from the registry but also that the contents are
\"meaningful\".[¶](#section-9-4){.pilcrow}

Note: If Transport Layer Security (TLS) is used when providing an escrow
service, the recommendations in \[[RFC7525](#RFC7525){.xref}\]
[MUST]{.bcp14} be implemented.[¶](#section-9-5.1){.pilcrow}
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Privacy Considerations](#name-privacy-considerations){.section-name .selfRef} {#name-privacy-considerations}

This specification defines a format that may be used to escrow personal
data. The process of data escrow is governed by a legal document agreed
upon by the parties, and such a legal document must ensure that
privacy-sensitive and/or personal data receives the required
protection.[¶](#section-10-1){.pilcrow}
:::

::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Example of a Full Deposit](#name-example-of-a-full-deposit){.section-name .selfRef} {#name-example-of-a-full-deposit}

Example of a Full Deposit with the two example objects rdeObj1 and
rdeObj2:[¶](#section-11-1){.pilcrow}

::: {#section-11-2}
``` {.sourcecode .lang-xml}
<?xml version="1.0" encoding="UTF-8"?>
<rde:deposit
  xmlns:rde="urn:ietf:params:xml:ns:rde-1.0"
  xmlns:rdeObj1="urn:example:params:xml:ns:rdeObj1-1.0"
  xmlns:rdeObj2="urn:example:params:xml:ns:rdeObj2-1.0"
  type="FULL"
  id="20191018001">
  <rde:watermark>2019-10-17T23:59:59Z</rde:watermark>
  <rde:rdeMenu>
    <rde:version>1.0</rde:version>
    <rde:objURI>urn:example:params:xml:ns:rdeObj1-1.0</rde:objURI>
    <rde:objURI>urn:example:params:xml:ns:rdeObj2-1.0</rde:objURI>
  </rde:rdeMenu>
  <rde:contents>
    <rdeObj1:rdeObj1>
      <rdeObj1:name>EXAMPLE</rdeObj1:name>
    </rdeObj1:rdeObj1>
    <rdeObj2:rdeObj2>
      <rdeObj2:id>fsh8013-EXAMPLE</rdeObj2:id>
    </rdeObj2:rdeObj2>
  </rde:contents>
</rde:deposit>
```

[¶](#section-11-2){.pilcrow}
:::
:::

::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [Example of a Differential Deposit](#name-example-of-a-differential-d){.section-name .selfRef} {#name-example-of-a-differential-d}

Example of a Differential Deposit with the two example objects rdeObj1
and rdeObj2:[¶](#section-12-1){.pilcrow}

::: {#section-12-2}
``` {.sourcecode .lang-xml}
<?xml version="1.0" encoding="UTF-8"?>
<rde:deposit
  xmlns:rde="urn:ietf:params:xml:ns:rde-1.0"
  xmlns:rdeObj1="urn:example:params:xml:ns:rdeObj1-1.0"
  xmlns:rdeObj2="urn:example:params:xml:ns:rdeObj2-1.0"
  type="DIFF"
  id="20191019001" prevId="20191018001">
  <rde:watermark>2019-10-18T23:59:59Z</rde:watermark>
  <rde:rdeMenu>
    <rde:version>1.0</rde:version>
      <rde:objURI>urn:example:params:xml:ns:rdeObj1-1.0</rde:objURI>
      <rde:objURI>urn:example:params:xml:ns:rdeObj2-1.0</rde:objURI>
  </rde:rdeMenu>
  <rde:contents>
    <rdeObj1:rdeObj1>
      <rdeObj1:name>EXAMPLE2</rdeObj1:name>
    </rdeObj1:rdeObj1>
    <rdeObj2:rdeObj2>
      <rdeObj2:id>sh8014-EXAMPLE</rdeObj2:id>
    </rdeObj2:rdeObj2>
  </rde:contents>
</rde:deposit>
```

[¶](#section-12-2){.pilcrow}
:::
:::

::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [Example of an Incremental Deposit](#name-example-of-an-incremental-d){.section-name .selfRef} {#name-example-of-an-incremental-d}

Example of an Incremental Deposit with the two example objects rdeObj1
and rdeObj2:[¶](#section-13-1){.pilcrow}

::: {#section-13-2}
``` {.sourcecode .lang-xml}
<?xml version="1.0" encoding="UTF-8"?>
<rde:deposit
  xmlns:rde="urn:ietf:params:xml:ns:rde-1.0"
  xmlns:rdeObj1="urn:example:params:xml:ns:rdeObj1-1.0"
  xmlns:rdeObj2="urn:example:params:xml:ns:rdeObj2-1.0"
  type="INCR"
  id="20200317001" prevId="20200314001">
  <rde:watermark>2020-03-16T23:59:59Z</rde:watermark>
  <rde:rdeMenu>
    <rde:version>1.0</rde:version>
    <rde:objURI>urn:example:params:xml:ns:rdeObj1-1.0</rde:objURI>
    <rde:objURI>urn:example:params:xml:ns:rdeObj2-1.0</rde:objURI>
  </rde:rdeMenu>
  <rde:deletes>
    <rdeObj1:delete>
      <rdeObj1:name>EXAMPLE1</rdeObj1:name>
    </rdeObj1:delete>
    <rdeObj2:delete>
      <rdeObj2:id>fsh8013-EXAMPLE</rdeObj2:id>
    </rdeObj2:delete>
  </rde:deletes>
  <rde:contents>
    <rdeObj1:rdeObj1>
      <rdeObj1:name>EXAMPLE2</rdeObj1:name>
    </rdeObj1:rdeObj1>
    <rdeObj2:rdeObj2>
      <rdeObj2:id>sh8014-EXAMPLE</rdeObj2:id>
    </rdeObj2:rdeObj2>
  </rde:contents>
</rde:deposit>
```

[¶](#section-13-2){.pilcrow}
:::
:::

::: {#section-14 .section}
## [14.](#section-14){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-14.1 .section}
### [14.1.](#section-14.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC3339\]
:   [Klyne, G.]{.refAuthor}[ and C. Newman]{.refAuthor}, [\"Date and
    Time on the Internet: Timestamps\"]{.refTitle}, [RFC
    3339]{.seriesInfo}, [DOI 10.17487/RFC3339]{.seriesInfo}, July 2002,
    \<<https://www.rfc-editor.org/info/rfc3339>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8499\]
:   [Hoffman, P.]{.refAuthor}[, Sullivan, A.]{.refAuthor}[, and K.
    Fujiwara]{.refAuthor}, [\"DNS Terminology\"]{.refTitle}, [BCP
    219]{.seriesInfo}, [RFC 8499]{.seriesInfo}, [DOI
    10.17487/RFC8499]{.seriesInfo}, January 2019,
    \<<https://www.rfc-editor.org/info/rfc8499>\>.
:   

\[W3C.REC-xml-20081126\]
:   [Bray, T., Ed.]{.refAuthor}[, Paoli, J., Ed.]{.refAuthor}[,
    Sperberg-McQueen, C.M., Ed.]{.refAuthor}[, Maler, E.,
    Ed.]{.refAuthor}[, and F. Yergeau, Ed.]{.refAuthor}, [\"Extensible
    Markup Language (XML) 1.0 (Fifth Edition)\"]{.refTitle},
    [REC-xml-20081126]{.refContent}, November 2008,
    \<<https://www.w3.org/TR/2008/REC-xml-20081126/>\>.
:   

\[W3C.REC-xmlschema-1-20041028\]
:   [Thompson, H.S., Ed.]{.refAuthor}[, Beech, D., Ed.]{.refAuthor}[,
    Maloney, M., Ed.]{.refAuthor}[, and N. Mendelsohn, Ed.]{.refAuthor},
    [\"XML Schema Part 1: Structures Second Edition\"]{.refTitle},
    [REC-xmlschema-1-20041028]{.refContent}, October 2004,
    \<<https://www.w3.org/TR/2004/REC-xmlschema-1-20041028/>\>.
:   

\[W3C.REC-xmlschema-2-20041028\]
:   [Biron, P. V., Ed.]{.refAuthor}[ and A. Malhotra, Ed.]{.refAuthor},
    [\"XML Schema Part 2: Datatypes Second Edition\"]{.refTitle},
    [REC-xmlschema-2-20041028]{.refContent}, October 2004,
    \<<https://www.w3.org/TR/2004/REC-xmlschema-2-20041028/>\>.
:   
:::

::: {#section-14.2 .section}
### [14.2.](#section-14.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[ICANN-GTLD-RA-20170731\]
:   [ICANN]{.refAuthor}, [\"Base Registry Agreement\"]{.refTitle}, 31
    July 2017,
    \<<https://newgtlds.icann.org/sites/default/files/agreements/agreement-approved-31jul17-en.pdf>\>.
:   

\[RFC3688\]
:   [Mealling, M.]{.refAuthor}, [\"The IETF XML Registry\"]{.refTitle},
    [BCP 81]{.seriesInfo}, [RFC 3688]{.seriesInfo}, [DOI
    10.17487/RFC3688]{.seriesInfo}, January 2004,
    \<<https://www.rfc-editor.org/info/rfc3688>\>.
:   

\[RFC7525\]
:   [Sheffer, Y.]{.refAuthor}[, Holz, R.]{.refAuthor}[, and P.
    Saint-Andre]{.refAuthor}, [\"Recommendations for Secure Use of
    Transport Layer Security (TLS) and Datagram Transport Layer Security
    (DTLS)\"]{.refTitle}, [BCP 195]{.seriesInfo}, [RFC
    7525]{.seriesInfo}, [DOI 10.17487/RFC7525]{.seriesInfo}, May 2015,
    \<<https://www.rfc-editor.org/info/rfc7525>\>.
:   
:::
:::

::: {#section-appendix.a .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

Special suggestions that were incorporated into this document were
provided by [James Gould]{.contact-name}, [Edward Lewis]{.contact-name},
[Jaap Akkerhuis]{.contact-name}, [Lawrence Conroy]{.contact-name}, [Marc
Groeneweg]{.contact-name}, [Michael Young]{.contact-name}, [Chris
Wright]{.contact-name}, [Patrick Mevzek]{.contact-name}, [Stephen
Morris]{.contact-name}, [Scott Hollenbeck]{.contact-name}, [Stephane
Bortzmeyer]{.contact-name}, [Warren Kumari]{.contact-name}, [Paul
Hoffman]{.contact-name}, [Vika Mpisane]{.contact-name}, [Bernie
Hoeneisen]{.contact-name}, [Jim Galvin]{.contact-name}, [Andrew
Sullivan]{.contact-name}, [Hiro Hotta]{.contact-name}, [Christopher
Browne]{.contact-name}, [Daniel Kalchev]{.contact-name}, [David
Conrad]{.contact-name}, [James Mitchell]{.contact-name}, [Francisco
Obispo]{.contact-name}, [Bhadresh Modi]{.contact-name}, and [Alexander
Mayrhofer]{.contact-name}.[¶](#section-appendix.a-1){.pilcrow}

[Shoji Noguchi]{.contact-name} and [Francisco Arias]{.contact-name}
participated as coauthors through version 07 of
draft-arias-noguchi-registry-data-escrow (the precursor to this
document) and provided invaluable support for this
document.[¶](#section-appendix.a-2){.pilcrow}
:::

::: {#authors-addresses}
::: {#section-appendix.b .section}
## [Author\'s Address](#name-authors-address){.section-name .selfRef} {#name-authors-address}

::: {.left dir="auto"}
[Gustavo Lozano]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Internet Corporation for Assigned Names and Numbers]{.org}
:::

::: {.left dir="auto"}
[12025 Waterfront Drive, Suite 300]{.street-address}
:::

::: {.left dir="auto"}
[Los Angeles]{.locality}, [CA]{.region} [90292]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: tel
Phone: [+1.310.823.9358](tel:+1.310.823.9358){.tel}
:::

::: email
Email: <gustavo.lozano@icann.org>
:::
:::
:::
