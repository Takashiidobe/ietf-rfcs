  RFC 9208   IMAP QUOTA        March 2022
  ---------- ----------------- ------------
  Melnikov   Standards Track   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9208](https://www.rfc-editor.org/rfc/rfc9208){.eref}

Obsoletes:
:   [2087](https://www.rfc-editor.org/rfc/rfc2087){.eref}

Category:
:   Standards Track

Published:
:   March 2022

ISSN:
:   2070-1721

Author:

:   ::: author
    ::: author-name
    A. Melnikov
    :::

    ::: org
    Isode
    :::
    :::
:::

# RFC 9208 {#rfcnum}

# IMAP QUOTA Extension {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document defines a QUOTA extension of the Internet Message Access
Protocol (IMAP) (see RFCs 3501 and 9051) that permits administrative
limits on resource usage (quotas) to be manipulated through the IMAP
protocol.[¶](#section-abstract-1){.pilcrow}

This document obsoletes RFC 2087 but attempts to remain backwards
compatible whenever possible.[¶](#section-abstract-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9208>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}

This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November 10,
2008. The person(s) controlling the copyright in some of this material
may not have granted the IETF Trust the right to allow modifications of
such material outside the IETF Standards Process. Without obtaining an
adequate license from the person(s) controlling the copyright in such
materials, this document may not be modified outside the IETF Standards
Process, and derivative works of it may not be created outside the IETF
Standards Process, except to format it for publication as an RFC or to
translate it into languages other than
English.[¶](#section-boilerplate.2-3){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction and
    Overview](#name-introduction-and-overview){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Document
    Conventions](#name-document-conventions){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Terms](#name-terms){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Resource](#name-resource){.xref}

        -   ::: {#section-toc.1-1.3.2.1.2.1}
            [3.1.1](#section-3.1.1){.xref}.  [Name](#name-name){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.1.2.2}
            [3.1.2](#section-3.1.2){.xref}.  [Definition](#name-definition){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Quota
        Root](#name-quota-root){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Definitions](#name-definitions){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Commands](#name-commands){.xref}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [GETQUOTA](#name-getquota){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.2}
            [4.1.2](#section-4.1.2){.xref}.  [GETQUOTAROOT](#name-getquotaroot){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.3}
            [4.1.3](#section-4.1.3){.xref}.  [SETQUOTA](#name-setquota){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.4}
            [4.1.4](#section-4.1.4){.xref}.  [New STATUS
            attributes](#name-new-status-attributes){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Responses](#name-responses){.xref}

        -   ::: {#section-toc.1-1.4.2.2.2.1}
            [4.2.1](#section-4.2.1){.xref}.  [QUOTA](#name-quota){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.2.2.2}
            [4.2.2](#section-4.2.2){.xref}.  [QUOTAROOT](#name-quotaroot){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Response
        Codes](#name-response-codes){.xref}

        -   ::: {#section-toc.1-1.4.2.3.2.1}
            [4.3.1](#section-4.3.1){.xref}.  [OVERQUOTA](#name-overquota){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Resource Type
    Definitions](#name-resource-type-definitions){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [STORAGE](#name-storage){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [MESSAGE](#name-message){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [MAILBOX](#name-mailbox){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [ANNOTATION-STORAGE](#name-annotation-storage){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Interaction with IMAP ACL Extension
    (RFC 4314)](#name-interaction-with-imap-acl-e){.xref}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Formal Syntax](#name-formal-syntax){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Changes/Additions to the IMAP
        Capabilities Registry](#name-changes-additions-to-the-im){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [IMAP Quota Resource Type
        Registry](#name-imap-quota-resource-type-re){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Changes Since RFC
    2087](#name-changes-since-rfc-2087){.xref}
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.11.2.1}
        [11.1](#section-11.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.11.2.2}
        [11.2](#section-11.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-A){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.13}
    [](#appendix-B){.xref}[Contributors](#name-contributors){.xref}
    :::

-   ::: {#section-toc.1-1.14}
    [](#appendix-C){.xref}[Author\'s
    Address](#name-authors-address){.xref}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction and Overview](#name-introduction-and-overview){.section-name .selfRef} {#name-introduction-and-overview}

This document defines a couple of extensions to the Internet Message
Access Protocol \[[RFC3501](#RFC3501){.xref}\]
\[[RFC9051](#RFC9051){.xref}\] for querying and manipulating
administrative limits on resource usage (quotas). This extension is
compatible with both IMAP4rev1 \[[RFC3501](#RFC3501){.xref}\] and
IMAP4rev2 \[[RFC9051](#RFC9051){.xref}\].[¶](#section-1-1){.pilcrow}

The \"QUOTA\" capability denotes a server compliant with
\[[RFC2087](#RFC2087){.xref}\]. Some responses and response codes
defined in this document are not present in such servers (see [Section
10](#changes-since){.xref} for more details), and clients [MUST
NOT]{.bcp14} rely on their presence in the absence of any capability
beginning with \"QUOTA=\".[¶](#section-1-2){.pilcrow}

Any server compliant with this document [MUST]{.bcp14} also return at
least one capability starting with the \"QUOTA=RES-\" prefix, as
described in [Section
3.1](#Quota-Resource){.xref}.[¶](#section-1-3){.pilcrow}

Any server compliant with this document that implements the SETQUOTA
command (see [Section 4.1.3](#SETQUOTA){.xref}) [MUST]{.bcp14} also
return the \"QUOTASET\" capability.[¶](#section-1-4){.pilcrow}

This document also reserves all other capabilities starting with the
\"QUOTA=\" prefix for future IETF Stream Standard Track, Informational,
or Experimental extensions to this document.[¶](#section-1-5){.pilcrow}

Quotas can be used to restrict clients for administrative reasons, but
the QUOTA extension can also be used to indicate system limits and
current usage levels to clients.[¶](#section-1-6){.pilcrow}

Although the IMAP4 QUOTA extension specified in
\[[RFC2087](#RFC2087){.xref}\] has seen deployment in servers, it has
seen little deployment in clients. Since the meaning of the resources
was implementation dependent, it was impossible for a client
implementation to determine which resources were supported, and it was
impossible to determine which mailboxes were in a given quota root (see
[Section 3.2](#quota-root){.xref}) without a priori knowledge of the
implementation.[¶](#section-1-7){.pilcrow}
:::

::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Document Conventions](#name-document-conventions){.section-name .selfRef} {#name-document-conventions}

In protocol examples, this document uses a prefix of \"C: \" to denote
lines sent by the client to the server and \"S: \" for lines sent by the
server to the client. Lines prefixed with \"//\" are comments explaining
the previous protocol line. These prefixes and comments are not part of
the protocol. Lines without any of these prefixes are continuations of
the previous line, and no line break is present in the protocol before
such lines unless specifically mentioned.[¶](#section-2-1){.pilcrow}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-2){.pilcrow}

Other capitalized words are IMAP keywords \[[RFC3501](#RFC3501){.xref}\]
\[[RFC9051](#RFC9051){.xref}\] or keywords from this
document.[¶](#section-2-3){.pilcrow}
:::

::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Terms](#name-terms){.section-name .selfRef} {#name-terms}

::: {#Quota-Resource}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Resource](#name-resource){.section-name .selfRef} {#name-resource}

A resource has a name, a formal definition.[¶](#section-3.1-1){.pilcrow}

::: {#section-3.1.1 .section}
#### [3.1.1.](#section-3.1.1){.section-number .selfRef} [Name](#name-name){.section-name .selfRef} {#name-name}

The resource name is an atom, as defined in [IMAP4rev1](#RFC3501){.xref}
\[[RFC3501](#RFC3501){.xref}\]. These [MUST]{.bcp14} be registered with
IANA.[¶](#section-3.1.1-1){.pilcrow}

Supported resource names [MUST]{.bcp14} be advertised as a capability by
prepending the resource name with \"QUOTA=RES-\". A server compliant
with this specification is not required to support all reported resource
types on all quota roots.[¶](#section-3.1.1-2){.pilcrow}
:::

::: {#section-3.1.2 .section}
#### [3.1.2.](#section-3.1.2){.section-number .selfRef} [Definition](#name-definition){.section-name .selfRef} {#name-definition}

The resource definition or document containing it, while not visible
through the protocol, [SHOULD]{.bcp14} be registered with
IANA.[¶](#section-3.1.2-1){.pilcrow}

The usage of a resource [MUST]{.bcp14} be represented as a 63-bit
unsigned integer. 0 indicates that the resource is exhausted. Usage
integers don\'t necessarily represent proportional use, so clients [MUST
NOT]{.bcp14} compare an available resource between two separate quota
roots on the same or different servers.[¶](#section-3.1.2-2){.pilcrow}

Limits will be specified as, and [MUST]{.bcp14} be represented as, an
integer. 0 indicates that any usage is
prohibited.[¶](#section-3.1.2-3){.pilcrow}

Limits may be hard or soft; that is, an implementation [MAY]{.bcp14}
choose, or be configured, to disallow any command if the limit on a
resource is or would be exceeded.[¶](#section-3.1.2-4){.pilcrow}

All resources that the server handles [MUST]{.bcp14} be advertised in a
CAPABILITY response/response code consisting of the resource name
prefixed by \"QUOTA=RES-\".[¶](#section-3.1.2-5){.pilcrow}

The resources [STORAGE](#STORAGE){.xref} ([Section
5.1](#STORAGE){.xref}), [MESSAGE](#MESSAGE){.xref} ([Section
5.2](#MESSAGE){.xref}), [MAILBOX](#MAILBOX){.xref} ([Section
5.3](#MAILBOX){.xref}), and
[ANNOTATION-STORAGE](#ANNOTATION-STORAGE){.xref} ([Section
5.4](#ANNOTATION-STORAGE){.xref}) are defined in this
document.[¶](#section-3.1.2-6){.pilcrow}
:::
:::
:::

::: {#quota-root}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Quota Root](#name-quota-root){.section-name .selfRef} {#name-quota-root}

This document introduces the concept of a \"quota root\", as resource
limits can apply across multiple IMAP
mailboxes.[¶](#section-3.2-1){.pilcrow}

Each mailbox has zero or more implementation-defined named \"quota
roots\". Each quota root has zero or more resource limits (quotas). All
mailboxes that share the same named quota root share the resource limits
of the quota root.[¶](#section-3.2-2){.pilcrow}

Quota root names need not be mailbox names, nor is there any
relationship defined by this document between a quota root name and a
mailbox name. A quota root name is an astring, as defined in
[IMAP4](#RFC3501){.xref} \[[RFC3501](#RFC3501){.xref}\]
\[[RFC9051](#RFC9051){.xref}\]. It [SHOULD]{.bcp14} be treated as an
opaque string by any clients.[¶](#section-3.2-3){.pilcrow}

Quota roots are used since not all implementations may be able to
calculate usage, or apply quotas, on arbitrary mailboxes or mailbox
hierarchies.[¶](#section-3.2-4){.pilcrow}

Not all resources may be limitable or calculable for all quota roots.
Furthermore, not all resources may support all limits; some limits may
be present in the underlying system. A server implementation of this
memo [SHOULD]{.bcp14} advise the client of such inherent limits, by
generating [QUOTA](#QUOTA){.xref} ([Section 4.2.1](#QUOTA){.xref})
responses, and [SHOULD]{.bcp14} advise the client of which resources are
limitable for a particular quota root. A [SETQUOTA](#SETQUOTA){.xref}
([Section 4.1.3](#SETQUOTA){.xref}) command [MAY]{.bcp14} also round a
quota limit in an implementation-dependent way, if the granularity of
the underlying system demands it. A client [MUST]{.bcp14} be prepared
for a [SETQUOTA](#SETQUOTA){.xref} ([Section 4.1.3](#SETQUOTA){.xref})
command to fail if a limit cannot be set.[¶](#section-3.2-5){.pilcrow}

Implementation Notes: This means that, for example, under UNIX, a quota
root may have a [MESSAGE](#MESSAGE){.xref} ([Section
5.2](#MESSAGE){.xref}) quota always set due to the number of inodes
available on the filesystem; similarly, [STORAGE](#STORAGE){.xref}
([Section 5.1](#STORAGE){.xref}) may be rounded to the nearest block and
limited by free filesystem space.[¶](#section-3.2-6){.pilcrow}
:::
:::
:::

::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Definitions](#name-definitions){.section-name .selfRef} {#name-definitions}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Commands](#name-commands){.section-name .selfRef} {#name-commands}

The following commands exist for manipulation and querying
quotas.[¶](#section-4.1-1){.pilcrow}

::: {#GETQUOTA}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [GETQUOTA](#name-getquota){.section-name .selfRef} {#name-getquota}

[]{.break}

Arguments:
:   quota root[¶](#section-4.1.1-1.2){.pilcrow}
:   

Responses:

:   [REQUIRED]{.bcp14} untagged responses:
    QUOTA[¶](#section-4.1.1-1.4.1){.pilcrow}

:   

Result:

:   OK - getquota completed[¶](#section-4.1.1-1.6.1){.pilcrow}

    NO - getquota error: no such quota root, permission
    denied[¶](#section-4.1.1-1.6.2){.pilcrow}

    BAD - command unknown or arguments
    invalid[¶](#section-4.1.1-1.6.3){.pilcrow}

:   

The GETQUOTA command takes the name of a quota root and returns the
quota root\'s resource usage and limits in an untagged QUOTA response.
(Names of quota roots applicable to a particular mailbox can be
discovered by issuing the GETQUOTAROOT command; see [Section
4.1.2](#GETQUOTAROOT){.xref}.) Note that the server is not required to
support any specific resource type (as advertised in the CAPABILITY
response, i.e., all capability items with the \"QUOTA=RES-\" prefix) for
any particular quota root.[¶](#section-4.1.1-2){.pilcrow}

Example:[¶](#section-4.1.1-3){.pilcrow}

::: {#section-4.1.1-4}
``` sourcecode
   S: * CAPABILITY [...] QUOTA QUOTA=RES-STORAGE [...]

   [...]

   C: G0001 GETQUOTA "!partition/sda4"

   S: * QUOTA "!partition/sda4" (STORAGE 104 10923847)

   S: G0001 OK Getquota complete
```

[¶](#section-4.1.1-4){.pilcrow}
:::
:::
:::

::: {#GETQUOTAROOT}
::: {#section-4.1.2 .section}
#### [4.1.2.](#section-4.1.2){.section-number .selfRef} [GETQUOTAROOT](#name-getquotaroot){.section-name .selfRef} {#name-getquotaroot}

[]{.break}

Arguments:
:   mailbox name[¶](#section-4.1.2-1.2){.pilcrow}
:   

Responses:
:   [REQUIRED]{.bcp14} untagged responses: QUOTAROOT,
    QUOTA[¶](#section-4.1.2-1.4){.pilcrow}
:   

Result:

:   OK - getquotaroot completed[¶](#section-4.1.2-1.6.1){.pilcrow}

    NO - getquotaroot error: permission
    denied[¶](#section-4.1.2-1.6.2){.pilcrow}

    BAD - command unknown or arguments
    invalid[¶](#section-4.1.2-1.6.3){.pilcrow}

:   

The GETQUOTAROOT command takes a mailbox name and returns the list of
quota roots for the mailbox in an untagged QUOTAROOT response. For each
listed quota root, it also returns the quota root\'s resource usage and
limits in an untagged QUOTA response.[¶](#section-4.1.2-2){.pilcrow}

Note that the mailbox name parameter doesn\'t have to reference an
existing mailbox. This can be handy in order to determine which quota
root would apply to a mailbox when it gets
created.[¶](#section-4.1.2-3){.pilcrow}

Example:[¶](#section-4.1.2-4){.pilcrow}

::: {#section-4.1.2-5}
``` sourcecode
   S: * CAPABILITY [...] QUOTA QUOTA=RES-STORAGE QUOTA=RES-MESSAGE
   [...]

   [...]

   C: G0002 GETQUOTAROOT INBOX

   S: * QUOTAROOT INBOX "#user/alice" "!partition/sda4"

   S: * QUOTA "#user/alice" (MESSAGE 42 1000)

   S: * QUOTA "!partition/sda4" (STORAGE 104 10923847)

   S: G0002 OK Getquotaroot complete
```

[¶](#section-4.1.2-5){.pilcrow}
:::
:::
:::

::: {#SETQUOTA}
::: {#section-4.1.3 .section}
#### [4.1.3.](#section-4.1.3){.section-number .selfRef} [SETQUOTA](#name-setquota){.section-name .selfRef} {#name-setquota}

[]{.break}

Arguments:
:   quota root list of resource limits[¶](#section-4.1.3-1.2){.pilcrow}
:   

Responses:
:   untagged responses: QUOTA[¶](#section-4.1.3-1.4){.pilcrow}
:   

Result:

:   OK - setquota completed[¶](#section-4.1.3-1.6.1){.pilcrow}

    NO - setquota error: can\'t set that
    data[¶](#section-4.1.3-1.6.2){.pilcrow}

    BAD - command unknown or arguments
    invalid[¶](#section-4.1.3-1.6.3){.pilcrow}

:   

Note that unlike other command/responses/response codes defined in this
document, support for the SETQUOTA command requires the server to
advertise the \"QUOTASET\" capability.[¶](#section-4.1.3-2){.pilcrow}

The SETQUOTA command takes the name of a mailbox quota root and a list
of resource limits. The resource limits for the named quota root are
changed to the specified limits. Any previous resource limits for the
named quota root are discarded, even resource limits not explicitly
listed in the SETQUOTA command. (For example, if the quota root had both
STORAGE and MESSAGE limits assigned to the quota root before the
SETQUOTA is called and the SETQUOTA only includes the STORAGE limit,
then the MESSAGE limit is removed from the quota
root.)[¶](#section-4.1.3-3){.pilcrow}

If the named quota root did not previously exist, an implementation may
optionally create it and change the quota roots for any number of
existing mailboxes in an implementation-defined
manner.[¶](#section-4.1.3-4){.pilcrow}

If the implementation chooses to change the quota roots for some
existing mailboxes, such changes [SHOULD]{.bcp14} be announced with
untagged QUOTA responses.[¶](#section-4.1.3-5){.pilcrow}

Example:[¶](#section-4.1.3-6){.pilcrow}

::: {#section-4.1.3-7}
``` sourcecode
   S: * CAPABILITY [...] QUOTA QUOTASET QUOTA=RES-STORAGE QUOTA=RES-
   MESSAGE [...]

   [...]

   C: S0000 GETQUOTA "#user/alice"

   S: * QUOTA "#user/alice" (STORAGE 54 111 MESSAGE 42 1000)

   S: S0000 OK Getquota completed

   C: S0001 SETQUOTA "#user/alice" (STORAGE 510)

   S: * QUOTA "#user/alice" (STORAGE 58 512)

   // The server has rounded the STORAGE quota limit requested to
   the nearest 512 blocks of 1024 octets; otherwise, another client
   has performed a near-simultaneous SETQUOTA using a limit of 512.

   S: S0001 OK Rounded quota

   C: S0002 SETQUOTA "!partition/sda4" (STORAGE 99999999)

   S: * QUOTA "!partition/sda4" (STORAGE 104 10923847)

   // The server has not changed the quota, since this is a
   filesystem limit, and it cannot be changed. The QUOTA
   response here is entirely optional.

   S: S0002 NO Cannot change system limit
```

[¶](#section-4.1.3-7){.pilcrow}
:::
:::
:::

::: {#STATUS_RECOVERABLE}
::: {#section-4.1.4 .section}
#### [4.1.4.](#section-4.1.4){.section-number .selfRef} [New STATUS attributes](#name-new-status-attributes){.section-name .selfRef} {#name-new-status-attributes}

The DELETED and DELETED-STORAGE status data items allow for estimation
of the amount of resources that could be freed by an EXPUNGE on a
mailbox.[¶](#section-4.1.4-1){.pilcrow}

The DELETED status data item requests the server to return the number of
messages with the \\Deleted flag set. The DELETED status data item is
only required to be implemented when the server advertises the
\"QUOTA=RES-MESSAGE\" capability.[¶](#section-4.1.4-2){.pilcrow}

The DELETED-STORAGE status data item requests the server to return the
amount of storage space that can be reclaimed by performing EXPUNGE on
the mailbox. The server [SHOULD]{.bcp14} return the exact value;
however, it is recognized that the server may have to do a non-trivial
amount of work to calculate it. If the calculation of the exact value
would take a long time, the server [MAY]{.bcp14} instead return the sum
of the RFC822.SIZE of the messages with the \\Deleted flag set. The
DELETED-STORAGE status data item is only required to be implemented when
the server advertises the \"QUOTA=RES-STORAGE\"
capability.[¶](#section-4.1.4-3){.pilcrow}

Example:[¶](#section-4.1.4-4){.pilcrow}

::: {#section-4.1.4-5}
``` sourcecode
   S: * CAPABILITY [...] QUOTA QUOTA=RES-STORAGE QUOTA=RES-
   MESSAGE [...]

   [...]

   C: S0003 STATUS INBOX (MESSAGES DELETED DELETED-STORAGE)

   S: * STATUS INBOX (MESSAGES 12 DELETED 4 DELETED-STORAGE 8)

   // 12 messages, 4 of which would be deleted when an EXPUNGE
   happens.

   S: S0003 OK Status complete.
```

[¶](#section-4.1.4-5){.pilcrow}
:::
:::
:::
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Responses](#name-responses){.section-name .selfRef} {#name-responses}

The following responses may be sent by the
server.[¶](#section-4.2-1){.pilcrow}

::: {#QUOTA}
::: {#section-4.2.1 .section}
#### [4.2.1.](#section-4.2.1){.section-number .selfRef} [QUOTA](#name-quota){.section-name .selfRef} {#name-quota}

-   ::: {#section-4.2.1-1.1}
    Data: quota root name[¶](#section-4.2.1-1.1.1){.pilcrow}

    list of resource names, usages, and
    limits[¶](#section-4.2.1-1.1.2){.pilcrow}
    :::

This response occurs as a result of a GETQUOTA, GETQUOTAROOT, or
SETQUOTA command. The first string is the name of the quota root for
which this quota applies.[¶](#section-4.2.1-2){.pilcrow}

The name is followed by an S-expression format list of the resource
usage and limits of the quota root. The list contains zero or more
triplets. Each triplet contains a resource name, the current usage of
the resource, and the resource limit.[¶](#section-4.2.1-3){.pilcrow}

Resources not named in the list are not limited in the quota root. Thus,
an empty list means there are no administrative resource limits in the
quota root.[¶](#section-4.2.1-4){.pilcrow}

Example:[¶](#section-4.2.1-5){.pilcrow}

::: {#section-4.2.1-6}
``` sourcecode
   S: * QUOTA "" (STORAGE 10 512)
```

[¶](#section-4.2.1-6){.pilcrow}
:::
:::
:::

::: {#QUOTAROOT}
::: {#section-4.2.2 .section}
#### [4.2.2.](#section-4.2.2){.section-number .selfRef} [QUOTAROOT](#name-quotaroot){.section-name .selfRef} {#name-quotaroot}

-   ::: {#section-4.2.2-1.1}
    Data: mailbox name[¶](#section-4.2.2-1.1.1){.pilcrow}

    zero or more quota root names[¶](#section-4.2.2-1.1.2){.pilcrow}
    :::

This response occurs as a result of a GETQUOTAROOT command. The first
string is the mailbox and the remaining strings are the names of the
quota roots for the mailbox.[¶](#section-4.2.2-2){.pilcrow}

Examples:[¶](#section-4.2.2-3){.pilcrow}

::: {#section-4.2.2-4}
``` sourcecode
   S: * QUOTAROOT INBOX ""

   // The INBOX mailbox is covered by a single quota root with
   name "".

   S: * QUOTAROOT comp.mail.mime

   // The comp.mail.mime mailbox has no quota root associated
   with it, but one can be created.
```

[¶](#section-4.2.2-4){.pilcrow}
:::
:::
:::
:::

::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Response Codes](#name-response-codes){.section-name .selfRef} {#name-response-codes}

::: {#OVERQUOTA}
::: {#section-4.3.1 .section}
#### [4.3.1.](#section-4.3.1){.section-number .selfRef} [OVERQUOTA](#name-overquota){.section-name .selfRef} {#name-overquota}

The OVERQUOTA response code [SHOULD]{.bcp14} be returned in the tagged
NO response to an APPEND/COPY/MOVE when the addition of the message(s)
puts the target mailbox over any one of its quota
limits.[¶](#section-4.3.1-1){.pilcrow}

Example 1:[¶](#section-4.3.1-2){.pilcrow}

::: {#section-4.3.1-3}
``` sourcecode
   C: A003 APPEND saved-messages (\Seen) {326}
   S: + Ready for literal data
   C: Date: Mon, 7 Feb 1994 21:52:25 -0800 (PST)
   C: From: Fred Foobar <foobar@Blurdybloop.example>
   C: Subject: afternoon meeting
   C: To: mooch@owatagu.siam.edu.example
   C: Message-Id: <B27397-0100000@Blurdybloop.example>
   C: MIME-Version: 1.0
   C: Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
   C:
   C: Hello Joe, do you think we can meet at 3:30 tomorrow?
   C:
   S: A003 NO [OVERQUOTA] APPEND Failed
```

[¶](#section-4.3.1-3){.pilcrow}
:::

The OVERQUOTA response code [MAY]{.bcp14} also be returned in an
untagged NO response in the authenticated or the selected state when a
mailbox exceeds soft quota. For example, such OVERQUOTA response codes
might be sent as a result of an external event (e.g., Local Mail
Transfer Protocol (LMTP) \[[RFC2033](#RFC2033){.xref}\] delivery or
COPY/MOVE/APPEND in another IMAP connection) that causes the currently
selected mailbox to exceed soft quota. Note that such an OVERQUOTA
response code might be ambiguous because it might relate to the target
mailbox (as specified in COPY/MOVE/APPEND) or to the currently selected
mailbox. (The EXTRA WG chose not to address this deficiency due to
syntactic limitations of IMAP response codes and because such events are
likely to be rare.) This form of the OVERQUOTA response codes [MUST
NOT]{.bcp14} be returned if there is no mailbox selected and no command
in progress that adds a message to a mailbox (e.g.,
APPEND).[¶](#section-4.3.1-4){.pilcrow}

Example 2:[¶](#section-4.3.1-5){.pilcrow}

::: {#section-4.3.1-6}
``` sourcecode
   C: A003 APPEND saved-messages (\Seen) {326}
   S: + Ready for literal data
   C: Date: Mon, 7 Feb 1994 21:52:25 -0800 (PST)
   C: From: Fred Foobar <foobar@Blurdybloop.example>
   C: Subject: afternoon meeting
   C: To: mooch@owatagu.siam.edu.example
   C: Message-Id: <B27397-0100000@Blurdybloop.example>
   C: MIME-Version: 1.0
   C: Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
   C:
   C: Hello Joe, do you think we can meet at 3:30 tomorrow?
   C:
   S: * NO [OVERQUOTA] Soft quota has been exceeded
   S: A003 OK [APPENDUID 38505 3955] APPEND completed
```

[¶](#section-4.3.1-6){.pilcrow}
:::

Example 3:[¶](#section-4.3.1-7){.pilcrow}

::: {#section-4.3.1-8}
``` sourcecode
   C: A004 COPY 2:4 MEETING
   S: * NO [OVERQUOTA] Soft quota has been exceeded
   S: A004 OK [COPYUID 38505 304,319:320 3956:3958] COPY
       command completed
```

[¶](#section-4.3.1-8){.pilcrow}
:::
:::
:::
:::
:::

::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Resource Type Definitions](#name-resource-type-definitions){.section-name .selfRef} {#name-resource-type-definitions}

The following resource types are defined in this memo. A server
supporting a resource type [MUST]{.bcp14} advertise this as a CAPABILITY
with a name consisting of the resource name prefixed by \"QUOTA=RES-\".
A server [MAY]{.bcp14} support multiple resource types and
[MUST]{.bcp14} advertise all resource types it
supports.[¶](#section-5-1){.pilcrow}

::: {#STORAGE}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [STORAGE](#name-storage){.section-name .selfRef} {#name-storage}

\"STORAGE\" is the physical space estimate, in units of 1024 octets, of
the mailboxes governed by the quota root. This [MAY]{.bcp14} not be the
same as the sum of the RFC822.SIZE of the messages. Some implementations
[MAY]{.bcp14} include metadata sizes for the messages and mailboxes, and
other implementations [MAY]{.bcp14} store messages in such a way that
the physical space used is smaller, for example, due to use of
compression. Additional messages might not increase the usage. Clients
[MUST NOT]{.bcp14} use the usage figure for anything other than
informational purposes; for example, they [MUST NOT]{.bcp14} refuse to
APPEND a message if the limit less the usage is smaller than the
RFC822.SIZE divided by 1024 octets of the message, but it [MAY]{.bcp14}
warn about such condition.[¶](#section-5.1-1){.pilcrow}

The usage figure may change as a result of performing actions not
associated with adding new messages to the mailbox, such as SEARCH,
since this may increase the amount of metadata included in the
calculations.[¶](#section-5.1-2){.pilcrow}

When the server supports this resource type, it [MUST]{.bcp14} also
support the DELETED-STORAGE status data
item.[¶](#section-5.1-3){.pilcrow}

Support for this resource [MUST]{.bcp14} be indicated by the server by
advertising the \"QUOTA=RES-STORAGE\"
capability.[¶](#section-5.1-4){.pilcrow}

A resource named the same was also given as an example in
\[[RFC2087](#RFC2087){.xref}\]. This document provides a more precise
definition.[¶](#section-5.1-5){.pilcrow}
:::
:::

::: {#MESSAGE}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [MESSAGE](#name-message){.section-name .selfRef} {#name-message}

\"MESSAGE\" is the number of messages stored within the mailboxes
governed by the quota root. This [MUST]{.bcp14} be an exact number;
however, clients [MUST NOT]{.bcp14} assume that a change in the usage
indicates a change in the number of messages available, since the quota
root may include mailboxes the client has no access
to.[¶](#section-5.2-1){.pilcrow}

When the server supports this resource type, it [MUST]{.bcp14} also
support the DELETED status data item.[¶](#section-5.2-2){.pilcrow}

Support for this resource [MUST]{.bcp14} be indicated by the server by
advertising the \"QUOTA=RES-MESSAGE\"
capability.[¶](#section-5.2-3){.pilcrow}

A resource named the same was also given as an example in
\[[RFC2087](#RFC2087){.xref}\]. This document provides a more precise
definition.[¶](#section-5.2-4){.pilcrow}
:::
:::

::: {#MAILBOX}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [MAILBOX](#name-mailbox){.section-name .selfRef} {#name-mailbox}

\"MAILBOX\" is the number of mailboxes governed by the quota root. This
[MUST]{.bcp14} be an exact number; however, clients [MUST NOT]{.bcp14}
assume that a change in the usage indicates a change in the number of
mailboxes, since the quota root may include mailboxes the client has no
access to.[¶](#section-5.3-1){.pilcrow}

Support for this resource [MUST]{.bcp14} be indicated by the server by
advertising the \"QUOTA=RES-MAILBOX\"
capability.[¶](#section-5.3-2){.pilcrow}
:::
:::

::: {#ANNOTATION-STORAGE}
::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [ANNOTATION-STORAGE](#name-annotation-storage){.section-name .selfRef} {#name-annotation-storage}

\"ANNOTATION-STORAGE\" is the maximum size of all annotations
\[[RFC5257](#RFC5257){.xref}\], in units of 1024 octets, associated with
all messages in the mailboxes governed by the quota
root.[¶](#section-5.4-1){.pilcrow}

Support for this resource [MUST]{.bcp14} be indicated by the server by
advertising the \"QUOTA=RES-ANNOTATION-STORAGE\"
capability.[¶](#section-5.4-2){.pilcrow}
:::
:::
:::

::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Interaction with IMAP ACL Extension (RFC 4314)](#name-interaction-with-imap-acl-e){.section-name .selfRef} {#name-interaction-with-imap-acl-e}

This section lists \[[RFC4314](#RFC4314){.xref}\] rights required to
execute quota-related commands when both RFC 4314 and this document are
implemented.[¶](#section-6-1){.pilcrow}

  Operations\\Rights   l   r    s   w   i   c   x   t   e   a    Any   Non
  -------------------- --- ---- --- --- --- --- --- --- --- ---- ----- -----
  GETQUOTA                                                             \+
  GETQUOTAROOT             \*                                          \*
  SETQUOTA                                                  \+         

  : [Table 1](#table-1){.selfRef}

See [Section
4](https://www.rfc-editor.org/rfc/rfc4314#section-4){.relref} of
\[[RFC4314](#RFC4314){.xref}\] for conventions used in this
table.[¶](#section-6-3){.pilcrow}

Legend:[¶](#section-6-4){.pilcrow}

[]{.break}

\"+\":
:   The right is required[¶](#section-6-5.2){.pilcrow}
:   

\"\*\":
:   Only one of the rights marked with \* is
    required[¶](#section-6-5.4){.pilcrow}
:   

\"Any\":
:   At least one of the \"l\", \"r\", \"i\", \"k\", \"x\", or \"a\"
    rights is required[¶](#section-6-5.6){.pilcrow}
:   

\"Non\":
:   No rights required to perform the
    command[¶](#section-6-5.8){.pilcrow}
:   

Note that which permissions are needed in order to perform a
GETQUOTAROOT command depends on the quota resource type being requested.
For example, a quota on the number of messages (MESSAGE resource type)
or total size of messages (STORAGE resource type) requires \"r\" right
on the mailbox in question, since the quota involved would reveal
information about the number (or total size) of messages in the mailbox.
By comparison, the MAILBOX resource type doesn\'t require any
right.[¶](#section-6-6){.pilcrow}
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Formal Syntax](#name-formal-syntax){.section-name .selfRef} {#name-formal-syntax}

The following syntax specification uses the Augmented Backus-Naur Form
(ABNF) notation as specified in
\[[ABNF](#RFC5234){.xref}\].[¶](#section-7-1){.pilcrow}

Non-terminals referenced but not defined below are as defined by
[IMAP4](#RFC3501){.xref} \[[RFC3501](#RFC3501){.xref}\]
\[[RFC9051](#RFC9051){.xref}\].[¶](#section-7-2){.pilcrow}

Except as noted otherwise, all alphabetic characters are case
insensitive. The use of uppercase or lowercase characters to define
token strings is for editorial clarity only. Implementations
[MUST]{.bcp14} accept these strings in a case-insensitive
fashion.[¶](#section-7-3){.pilcrow}

::: {#section-7-4}
``` {.lang-abnf .sourcecode}
getquota =         "GETQUOTA" SP quota-root-name

getquotaroot =     "GETQUOTAROOT" SP mailbox

quota-list =       "(" quota-resource *(SP quota-resource) ")"

quota-resource =   resource-name SP resource-usage SP resource-limit

quota-response =   "QUOTA" SP quota-root-name SP quota-list

quotaroot-response =  "QUOTAROOT" SP mailbox *(SP quota-root-name)

setquota =         "SETQUOTA" SP quota-root-name SP setquota-list

setquota-list =    "(" [setquota-resource *(SP setquota-resource)]
                   ")"

setquota-resource =  resource-name SP resource-limit

quota-root-name =  astring

resource-limit =   number64

resource-name =    "STORAGE" / "MESSAGE" / "MAILBOX" /
                   "ANNOTATION-STORAGE" / resource-name-ext

resource-name-ext =  atom
                   ;; Future resource registrations

resource-usage =  number64
                   ;; must be less than corresponding resource-limit

capability-quota = capa-quota-res / "QUOTASET"
                   ;; One or more capa-quota-res must be returned.
                   ;; Also "QUOTASET" can optionally be returned.

capa-quota-res =   "QUOTA=RES-" resource-name

status-att =/      "DELETED" / "DELETED-STORAGE"
                   ;; DELETED status data item MUST be supported
                   ;; when the "QUOTA=RES-MESSAGE" capability is
                   ;; advertised.
                   ;; DELETED-STORAGE status data item MUST be
                   ;; supported when the "QUOTA=RES-STORAGE"
                   ;; capability is advertised.

status-att-val =/  status-att-deleted /
                   status-att-deleted-storage

status-att-deleted =  "DELETED" SP number
                   ;; DELETED status data item MUST be supported
                   ;; when the "QUOTA=RES-MESSAGE" capability is
                   ;; advertised.

status-att-deleted-storage =  "DELETED-STORAGE" SP number64
                   ;; DELETED-STORAGE status data item MUST be
                   ;; supported when the "QUOTA=RES-STORAGE"
                   ;; capability is advertised.

resp-text-code =/  "OVERQUOTA"

number64 =         <Defined in RFC 9051>
```

[¶](#section-7-4){.pilcrow}
:::
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Implementors should be careful to make sure the implementation of these
commands does not violate the site\'s security policy. The resource
usage of other users is likely to be considered confidential information
and should not be divulged to unauthorized persons. In particular, no
quota information should be disclosed to anonymous
users.[¶](#section-8-1){.pilcrow}

As for any resource shared across users (for example, a quota root
attached to a set of shared mailboxes), a user that can consume or
render unusable the resource can affect the resources available to the
other users; this might occur, for example, by a user with permission to
execute the SETQUOTA setting, which sets an artificially small
value.[¶](#section-8-2){.pilcrow}

Note that computing resource usage might incur a heavy load on the
server. Server implementers should consider implementation techniques
that lower the load on servers such as caching of resource usage
information or usage of less precise computations when under heavy
load.[¶](#section-8-3){.pilcrow}
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#changes-to-imap}
::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Changes/Additions to the IMAP Capabilities Registry](#name-changes-additions-to-the-im){.section-name .selfRef} {#name-changes-additions-to-the-im}

IMAP4 capabilities are registered by publishing a Standards Track or an
IESG-approved Informational or Experimental RFC. The \"IMAP
Capabilities\" registry is currently located at
\<<https://www.iana.org/assignments/imap4-capabilities>\>.[¶](#section-9.1-1){.pilcrow}

IANA has updated the reference for the QUOTA extension to point to this
document. IANA has also added the \"QUOTA=\" prefix and the \"QUOTASET\"
capability to the \"IMAP Capabilities\" registry with this document as
the reference.[¶](#section-9.1-2){.pilcrow}

IANA has added the following notes to the \"IMAP Capabilities\"
registry:[¶](#section-9.1-3){.pilcrow}

The prefix \"QUOTA=RES-\" is reserved per RFC 9208, [Section
9.1](#changes-to-imap){.xref}. See [Section
9.2](#iana-quota-res-types){.xref} of that document for values that
follow this prefix.[¶](#section-9.1-4){.pilcrow}

All other capabilities starting with the \"QUOTA=\" prefix are reserved
for future IETF Stream extensions to RFC
9208.[¶](#section-9.1-5){.pilcrow}
:::
:::

::: {#iana-quota-res-types}
::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [IMAP Quota Resource Type Registry](#name-imap-quota-resource-type-re){.section-name .selfRef} {#name-imap-quota-resource-type-re}

IANA has created a new registry for IMAP quota resource types. The
registration policy for the \"IMAP Quota Resource Types\" registry is
\"Specification Required\"
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-9.2-1){.pilcrow}

When registering a new quota resource type, the registrant needs to
provide the following:[¶](#section-9.2-2){.pilcrow}

-   [the name of the quota resource
    type[¶](#section-9.2-3.1){.pilcrow}]{#section-9.2-3.1}
-   [a short
    description[¶](#section-9.2-3.2){.pilcrow}]{#section-9.2-3.2}
-   [extra required IMAP commands/responses (if
    any)[¶](#section-9.2-3.3){.pilcrow}]{#section-9.2-3.3}
-   [extra optional IMAP commands/responses (if
    any)[¶](#section-9.2-3.4){.pilcrow}]{#section-9.2-3.4}
-   [name and email address of
    author[¶](#section-9.2-3.5){.pilcrow}]{#section-9.2-3.5}
-   [name and email address of change
    controller[¶](#section-9.2-3.6){.pilcrow}]{#section-9.2-3.6}
-   [a reference to a specification that describes the quota resource
    type in more
    detail[¶](#section-9.2-3.7){.pilcrow}]{#section-9.2-3.7}

Designated experts should check that the provided references are
correct, the references describe the quota resource type being
registered in sufficient detail to be implementable, the syntax of any
optional commands/responses is correct (e.g., ABNF validates), and the
syntax/description complies with rules and limitations imposed by IMAP
\[[RFC3501](#RFC3501){.xref}\] \[[RFC9051](#RFC9051){.xref}\].
Designated experts should avoid registering multiple identical quota
resource types under different names and should provide advice to
requestors about other possible quota resource types to
use.[¶](#section-9.2-4){.pilcrow}

The initial contents of the \"IMAP Quota Resource Types\" registry are
as follows:[¶](#section-9.2-5){.pilcrow}

[]{#name-storage-2}

  field name                                field value
  ----------------------------------------- ----------------------------------------------------------------------------------------------------
  Name of the quota resource type:          STORAGE
  Description:                              The physical space estimate, in units of 1024 octets, of the mailboxes governed by the quota root.
  Extra required IMAP commands/responses:   DELETED-STORAGE STATUS request data item and response data item
  Extra optional IMAP commands/responses:   N/A
  Author:                                   Alexey Melnikov \<alexey.melnikov\@isode.com>
  Change Controller:                        IESG \<iesg\@ietf.org>
  Reference:                                Section 5.1 of RFC 9208

  : [Table 2](#table-2){.selfRef}: [STORAGE](#name-storage-2){.selfRef}

[]{#name-message-2}

  field name                                field value
  ----------------------------------------- --------------------------------------------------------------------------------
  Name of the quota resource type:          MESSAGE
  Description:                              The number of messages stored within the mailboxes governed by the quota root.
  Extra required IMAP commands/responses:   DELETED STATUS request data item and response data item
  Extra optional IMAP commands/responses:   N/A
  Author:                                   Alexey Melnikov \<alexey.melnikov\@isode.com>
  Change Controller:                        IESG \<iesg\@ietf.org>
  Reference:                                Section 5.2 of RFC 9208

  : [Table 3](#table-3){.selfRef}: [MESSAGE](#name-message-2){.selfRef}

[]{#name-mailbox-2}

  field name                                field value
  ----------------------------------------- -----------------------------------------------------
  Name of the quota resource type:          MAILBOX
  Description:                              The number of mailboxes governed by the quota root.
  Extra required IMAP commands/responses:   N/A
  Extra optional IMAP commands/responses:   N/A
  Author:                                   Alexey Melnikov \<alexey.melnikov\@isode.com>
  Change Controller:                        IESG \<iesg\@ietf.org>
  Reference:                                Section 5.3 of RFC 9208

  : [Table 4](#table-4){.selfRef}: [MAILBOX](#name-mailbox-2){.selfRef}

[]{#name-annotation-storage-2}

  field name                                field value
  ----------------------------------------- -----------------------------------------------------------------------------------------------------------------------------------------------------
  Name of the quota resource type:          ANNOTATION-STORAGE
  Description:                              The maximum size of all annotations \[RFC5257\], in units of 1024 octets, associated with all messages in the mailboxes governed by the quota root.
  Extra required IMAP commands/responses:   N/A
  Extra optional IMAP commands/responses:   N/A
  Author:                                   Alexey Melnikov \<alexey.melnikov\@isode.com>
  Change Controller:                        IESG \<iesg\@ietf.org>
  Reference:                                Section 5.4 of RFC 9208

  : [Table 5](#table-5){.selfRef}:
  [ANNOTATION-STORAGE](#name-annotation-storage-2){.selfRef}
:::
:::
:::

::: {#changes-since}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Changes Since RFC 2087](#name-changes-since-rfc-2087){.section-name .selfRef} {#name-changes-since-rfc-2087}

This document is a revision of \[[RFC2087](#RFC2087){.xref}\], and it
aims to clarify the meaning of different terms that were used in that
RFC. It also provides more examples, gives guidance on allowed server
behavior, defines an IANA registry for quota resource types, and
provides initial registrations for 4 of
them.[¶](#section-10-1){.pilcrow}

When compared with \[[RFC2087](#RFC2087){.xref}\], this document defines
two more commonly used resource types, adds an optional OVERQUOTA
response code, and defines two extra STATUS data items (\"DELETED\" and
\"DELETED-STORAGE\"). The DELETED STATUS data item must be implemented
if the \"QUOTA=RES-MESSAGE\" capability is advertised. The
DELETED-STORAGE STATUS data item must be implemented if the
\"QUOTA=RES-STORAGE\" capability is advertised. For extensibility, quota
usage and quota limits are now 63-bit unsigned
integers.[¶](#section-10-2){.pilcrow}
:::
:::

::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-11.1 .section}
### [11.1.](#section-11.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[ABNF\]
:   [Crocker, D., Ed.]{.refAuthor} and [P. Overell]{.refAuthor},
    [\"Augmented BNF for Syntax Specifications: ABNF\"]{.refTitle}, [STD
    68]{.seriesInfo}, [RFC 5234]{.seriesInfo}, [DOI
    10.17487/RFC5234]{.seriesInfo}, January 2008,
    \<<https://www.rfc-editor.org/info/rfc5234>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC3501\]
:   [Crispin, M.]{.refAuthor}, [\"INTERNET MESSAGE ACCESS PROTOCOL -
    VERSION 4rev1\"]{.refTitle}, [RFC 3501]{.seriesInfo}, [DOI
    10.17487/RFC3501]{.seriesInfo}, March 2003,
    \<<https://www.rfc-editor.org/info/rfc3501>\>.
:   

\[RFC4314\]
:   [Melnikov, A.]{.refAuthor}, [\"IMAP4 Access Control List (ACL)
    Extension\"]{.refTitle}, [RFC 4314]{.seriesInfo}, [DOI
    10.17487/RFC4314]{.seriesInfo}, December 2005,
    \<<https://www.rfc-editor.org/info/rfc4314>\>.
:   

\[RFC5257\]
:   [Daboo, C.]{.refAuthor} and [R. Gellens]{.refAuthor}, [\"Internet
    Message Access Protocol - ANNOTATE Extension\"]{.refTitle}, [RFC
    5257]{.seriesInfo}, [DOI 10.17487/RFC5257]{.seriesInfo}, June 2008,
    \<<https://www.rfc-editor.org/info/rfc5257>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC9051\]
:   [Melnikov, A., Ed.]{.refAuthor} and [B. Leiba, Ed.]{.refAuthor},
    [\"Internet Message Access Protocol (IMAP) - Version
    4rev2\"]{.refTitle}, [RFC 9051]{.seriesInfo}, [DOI
    10.17487/RFC9051]{.seriesInfo}, August 2021,
    \<<https://www.rfc-editor.org/info/rfc9051>\>.
:   
:::

::: {#section-11.2 .section}
### [11.2.](#section-11.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[RFC2033\]
:   [Myers, J.]{.refAuthor}, [\"Local Mail Transfer
    Protocol\"]{.refTitle}, [RFC 2033]{.seriesInfo}, [DOI
    10.17487/RFC2033]{.seriesInfo}, October 1996,
    \<<https://www.rfc-editor.org/info/rfc2033>\>.
:   

\[RFC2087\]
:   [Myers, J.]{.refAuthor}, [\"IMAP4 QUOTA extension\"]{.refTitle},
    [RFC 2087]{.seriesInfo}, [DOI 10.17487/RFC2087]{.seriesInfo},
    January 1997, \<<https://www.rfc-editor.org/info/rfc2087>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   
:::
:::

::: {#appendix-A .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

The editor of this document would like to thank the following people who
provided useful comments or participated in discussions that lead to
this update of \[[RFC2087](#RFC2087){.xref}\]: [John
Myers]{.contact-name}, [Cyrus Daboo]{.contact-name}, [Lyndon
Nerenberg]{.contact-name}, [Benjamin Kaduk]{.contact-name}, [Roman
Danyliw]{.contact-name}, and [Éric
Vyncke]{.contact-name}.[¶](#appendix-A-1){.pilcrow}

This document is a revision of \[[RFC2087](#RFC2087){.xref}\], and it
borrows a lot of text from that RFC. Thus, the work of [John
Myers]{.contact-name}, the author of \[[RFC2087](#RFC2087){.xref}\], is
appreciated.[¶](#appendix-A-2){.pilcrow}
:::

::: {#appendix-B .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

[Dave Cridland]{.contact-name} wrote a lot of text in an earlier draft
version that became the basis for this
document.[¶](#appendix-B-1){.pilcrow}
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Author\'s Address](#name-authors-address){.section-name .selfRef} {#name-authors-address}

::: {.left dir="auto"}
[Alexey Melnikov]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Isode Limited]{.org}
:::

::: email
Email: <alexey.melnikov@isode.com>
:::

::: url
URI: <https://www.isode.com>
:::
:::
:::
