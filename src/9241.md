  RFC 9241          CDNI FCI Using ALTO   July 2022
  ----------------- --------------------- -----------
  Seedorf, et al.   Standards Track       \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9241](https://www.rfc-editor.org/rfc/rfc9241){.eref}

Category:
:   Standards Track

Published:
:   July 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    J. Seedorf
    :::

    ::: org
    HFT Stuttgart
    :::
    :::

    ::: author
    ::: author-name
    Y. Yang
    :::

    ::: org
    Yale University
    :::
    :::

    ::: author
    ::: author-name
    K. Ma
    :::

    ::: org
    Ericsson
    :::
    :::

    ::: author
    ::: author-name
    J. Peterson
    :::

    ::: org
    NeuStar
    :::
    :::

    ::: author
    ::: author-name
    J. Zhang
    :::

    ::: org
    Tongji University
    :::
    :::
:::

# RFC 9241 {#rfcnum}

# Content Delivery Network Interconnection (CDNI) Footprint and Capabilities Advertisement Using Application-Layer Traffic Optimization (ALTO) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The Content Delivery Networks Interconnection (CDNI) framework in RFC
6707 defines a set of protocols to interconnect CDNs to achieve multiple
goals, including extending the reach of a given CDN. A CDNI Request
Routing Footprint & Capabilities Advertisement interface (FCI) is needed
to achieve the goals of a CDNI. RFC 8008 defines the FCI semantics and
provides guidelines on the FCI protocol, but the exact protocol is not
specified. This document defines a new Application-Layer Traffic
Optimization (ALTO) service, called \"CDNI Advertisement Service\", that
provides an implementation of the FCI, following the guidelines defined
in RFC 8008.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9241>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology and
    Background](#name-terminology-and-background){.xref}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Terminology](#name-terminology){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Semantics of FCI
        Advertisement](#name-semantics-of-fci-advertisem){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.3}
        [2.3](#section-2.3){.xref}.  [ALTO Background and
        Benefits](#name-alto-background-and-benefit){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [CDNI Advertisement
    Service](#name-cdni-advertisement-service){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Media
        Type](#name-media-type){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [HTTP
        Method](#name-http-method){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Accept Input
        Parameters](#name-accept-input-parameters){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [Capabilities](#name-capabilities){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [Uses](#name-uses){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.6}
        [3.6](#section-3.6){.xref}.  [Response](#name-response){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.7}
        [3.7](#section-3.7){.xref}.  [Examples](#name-examples){.xref}

        -   ::: {#section-toc.1-1.3.2.7.2.1}
            [3.7.1](#section-3.7.1){.xref}.  [IRD](#name-ird){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.7.2.2}
            [3.7.2](#section-3.7.2){.xref}.  [A Basic
            Example](#name-a-basic-example){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.7.2.3}
            [3.7.3](#section-3.7.3){.xref}.  [Incremental
            Updates](#name-incremental-updates){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [CDNI Advertisement Service Using ALTO
    Network Map](#name-cdni-advertisement-service-){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Network Map Footprint Type:
        altopid](#name-network-map-footprint-type-){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Examples](#name-examples-2){.xref}

        -   ::: {#section-toc.1-1.4.2.2.2.1}
            [4.2.1](#section-4.2.1){.xref}.  [ALTO Network Map for CDNI
            Advertisements](#name-alto-network-map-for-cdni-a){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.2.2.2}
            [4.2.2](#section-4.2.2){.xref}.  [ALTO PID Footprints in
            CDNI
            Advertisements](#name-alto-pid-footprints-in-cdni){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.2.2.3}
            [4.2.3](#section-4.2.3){.xref}.  [Incremental
            Updates](#name-incremental-updates-2){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Filtered CDNI Advertisement Using CDNI
    Capabilities](#name-filtered-cdni-advertisement){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Media
        Type](#name-media-type-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [HTTP
        Method](#name-http-method-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Accept Input
        Parameters](#name-accept-input-parameters-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [Capabilities](#name-capabilities-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.5}
        [5.5](#section-5.5){.xref}.  [Uses](#name-uses-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.6}
        [5.6](#section-5.6){.xref}.  [Response](#name-response-2){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.7}
        [5.7](#section-5.7){.xref}.  [Examples](#name-examples-3){.xref}

        -   ::: {#section-toc.1-1.5.2.7.2.1}
            [5.7.1](#section-5.7.1){.xref}.  [A Basic
            Example](#name-a-basic-example-2){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.7.2.2}
            [5.7.2](#section-5.7.2){.xref}.  [Incremental
            Updates](#name-incremental-updates-3){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Query Footprint Properties Using ALTO
    Property Map Service](#name-query-footprint-properties-){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Representing Footprint Objects as
        Property Map Entities](#name-representing-footprint-obje){.xref}

        -   ::: {#section-toc.1-1.6.2.1.2.1}
            [6.1.1](#section-6.1.1){.xref}.  [ASN
            Domain](#name-asn-domain){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.1.2.2}
            [6.1.2](#section-6.1.2){.xref}.  [COUNTRYCODE
            Domain](#name-countrycode-domain){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Representing CDNI Capabilities as
        Property Map Entity
        Properties](#name-representing-cdni-capabilit){.xref}

        -   ::: {#section-toc.1-1.6.2.2.2.1}
            [6.2.1](#section-6.2.1){.xref}.  [Defining Information
            Resource Media Type for Property Type
            cdni-capabilities](#name-defining-information-resour){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.2}
            [6.2.2](#section-6.2.2){.xref}.  [Intended Semantics of
            Property Type
            cdni-capabilities](#name-intended-semantics-of-prope){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [Examples](#name-examples-4){.xref}

        -   ::: {#section-toc.1-1.6.2.3.2.1}
            [6.3.1](#section-6.3.1){.xref}.  [Property
            Map](#name-property-map){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.2}
            [6.3.2](#section-6.3.2){.xref}.  [Filtered Property
            Map](#name-filtered-property-map){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.3}
            [6.3.3](#section-6.3.3){.xref}.  [Incremental
            Updates](#name-incremental-updates-4){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [application/alto-cdni+json Media
        Type](#name-application-alto-cdnijson-m){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [application/alto-cdnifilter+json
        Media Type](#name-application-alto-cdnifilter){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.3}
        [7.3](#section-7.3){.xref}.  [CDNI Metadata Footprint Types
        Registry](#name-cdni-metadata-footprint-typ){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.4}
        [7.4](#section-7.4){.xref}.  [ALTO Entity Domain Types
        Registry](#name-alto-entity-domain-types-re){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.5}
        [7.5](#section-7.5){.xref}.  [ALTO Entity Property Types
        Registry](#name-alto-entity-property-types-){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [](#appendix-A){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-B){.xref}[Contributors](#name-contributors){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#intro}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The ability to interconnect multiple content delivery networks (CDNs)
has many benefits, including increased coverage, capability, and
reliability. The Content Delivery Networks Interconnection (CDNI)
framework \[[RFC6707](#RFC6707){.xref}\] defines four interfaces to
interconnect CDNs: (1) the CDNI Request Routing Interface, (2) the CDNI
Metadata Interface, (3) the CDNI Logging Interface, and (4) the CDNI
Control Interface.[¶](#section-1-1){.pilcrow}

Among these four interfaces, the CDNI Request Routing Interface provides
key functions, as specified in
\[[RFC6707](#RFC6707){.xref}\]:[¶](#section-1-2){.pilcrow}

> The CDNI Request Routing interface enables a Request Routing function
> in an Upstream CDN to query a Request Routing function in a Downstream
> CDN to determine if the Downstream CDN is able (and willing) to accept
> the delegated Content Request. It also allows the Downstream CDN to
> control what should be returned to the User Agent in the redirection
> message by the upstream Request Routing
> function.[¶](#section-1-3){.pilcrow}

At a high level, therefore, the scope of the CDNI Request Routing
Interface contains two main tasks: (1) determining if the dCDN
(downstream CDN) is willing to accept a delegated Content Request and
(2) redirecting the Content Request coming from a uCDN (upstream CDN) to
the proper entry point or entity in the dCDN.[¶](#section-1-4){.pilcrow}

Correspondingly, the Request Routing Interface is broadly divided into
two functionalities: (1) the CDNI Footprint & Capabilities Advertisement
interface (FCI) defined in \[[RFC8008](#RFC8008){.xref}\] and (2) the
CDNI Request Routing Redirection interface (RI) defined in
\[[RFC7975](#RFC7975){.xref}\]. This document focuses on the first
functionality (CDNI FCI).[¶](#section-1-5){.pilcrow}

Specifically, CDNI FCI allows both an Advertisement from a dCDN to a
uCDN (push) and a query from a uCDN to a dCDN (pull) so that the uCDN
knows whether it can redirect a particular user request to that
dCDN.[¶](#section-1-6){.pilcrow}

A key component in defining the CDNI FCI is defining the objects that
describe the footprints and capabilities of a dCDN. Such objects are
already specified in [Section
5](https://www.rfc-editor.org/rfc/rfc8008#section-5){.relref} of
\[[RFC8008](#RFC8008){.xref}\]. However, no protocol is defined to
transport and update such objects between a uCDN and a
dCDN.[¶](#section-1-7){.pilcrow}

To define such a protocol, this document specifies an extension of the
Application-Layer Traffic Optimization (ALTO) Protocol
\[[RFC7285](#RFC7285){.xref}\] by introducing a new ALTO service called
\"CDNI Advertisement Service\".[¶](#section-1-8){.pilcrow}

[Section 2.3](#bgALTO){.xref} discusses the benefits in using ALTO as a
transport protocol.[¶](#section-1-9){.pilcrow}
:::
:::

::: {#background}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology and Background](#name-terminology-and-background){.section-name .selfRef} {#name-terminology-and-background}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

The design of CDNI FCI transport using ALTO assumes an understanding of
both FCI semantics and ALTO. Hence, this document starts with a
non-normative review of both.[¶](#section-2-2){.pilcrow}

::: {#term}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The document uses the CDNI terms defined in
\[[RFC6707](#RFC6707){.xref}\], \[[RFC8006](#RFC8006){.xref}\], and
\[[RFC8008](#RFC8008){.xref}\]. Also, the document uses the ALTO terms
defined in \[[RFC7285](#RFC7285){.xref}\] and
\[[RFC9240](#RFC9240){.xref}\]. This document uses the following
abbreviations:[¶](#section-2.1-1){.pilcrow}

[]{.break}

ALTO:
:   Application-Layer Traffic
    Optimization[¶](#section-2.1-2.2){.pilcrow}
:   

ASN:
:   Autonomous System Number[¶](#section-2.1-2.4){.pilcrow}
:   

CDN:
:   Content Delivery Network[¶](#section-2.1-2.6){.pilcrow}
:   

CDNI:
:   CDN Interconnection[¶](#section-2.1-2.8){.pilcrow}
:   

dCDN:
:   Downstream CDN[¶](#section-2.1-2.10){.pilcrow}
:   

FCI:
:   CDNI FCI, CDNI Request Routing Footprint & Capabilities
    Advertisement interface[¶](#section-2.1-2.12){.pilcrow}
:   

IRD:
:   Information Resource Directory in
    ALTO[¶](#section-2.1-2.14){.pilcrow}
:   

PID:
:   Provider-defined Identifier in ALTO[¶](#section-2.1-2.16){.pilcrow}
:   

uCDN:
:   Upstream CDN[¶](#section-2.1-2.18){.pilcrow}
:   
:::
:::

::: {#bgSemantics}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Semantics of FCI Advertisement](#name-semantics-of-fci-advertisem){.section-name .selfRef} {#name-semantics-of-fci-advertisem}

\[[RFC8008](#RFC8008){.xref}\] defines the semantics of CDNI FCI,
provides guidance on what footprint and capabilities mean in a CDNI
context, and specifies the requirements on the CDNI FCI transport
protocol. The definitions in \[[RFC8008](#RFC8008){.xref}\] depend on
\[[RFC8006](#RFC8006){.xref}\]. Below is a non-normative review of key
related points of \[[RFC8008](#RFC8008){.xref}\] and
\[[RFC8006](#RFC8006){.xref}\]. For detailed information and normative
specification, the reader should refer to these two
RFCs.[¶](#section-2.2-1){.pilcrow}

-   [Multiple types of mandatory-to-implement footprints (i.e.,
    \"ipv4cidr\", \"ipv6cidr\", \"asn\", and \"countrycode\") are
    defined in \[[RFC8006](#RFC8006){.xref}\]. A \"set of IP prefixes\"
    can contain both full IP addresses (i.e., a /32 for IPv4 or a /128
    for IPv6) and IP prefixes with an arbitrary prefix length. There
    must also be support for multiple IP address versions, i.e., IPv4
    and IPv6, in such a
    footprint.[¶](#section-2.2-2.1){.pilcrow}]{#section-2.2-2.1}
-   [Multiple initial types of capabilities are defined in
    \[[RFC8008](#RFC8008){.xref}\] including (1) Delivery Protocol, (2)
    Acquisition Protocol, (3) Redirection Mode, (4) capabilities related
    to CDNI Logging, and (5) capabilities related to CDNI Metadata. They
    are required in all cases and, therefore, considered as
    mandatory-to-implement capabilities for all CDNI FCI
    implementations.[¶](#section-2.2-2.2){.pilcrow}]{#section-2.2-2.2}
-   [Footprint and capabilities are defined together and cannot be
    interpreted independently from each other. Specifically,
    \[[RFC8008](#RFC8008){.xref}\] integrates footprint and capabilities
    with an approach of \"capabilities with footprint restrictions\", by
    expressing capabilities on a per footprint
    basis.[¶](#section-2.2-2.3){.pilcrow}]{#section-2.2-2.3}
-   [Specifically, for all mandatory-to-implement footprint types,
    footprints can be viewed as constraints for delegating requests to a
    dCDN: a dCDN footprint advertisement tells the uCDN the limitations
    for delegating a request to the dCDN. For IP prefixes or Autonomous
    System Numbers (ASNs), the footprint signals to the uCDN that it
    should consider the dCDN a candidate only if the IP address of the
    Request Routing source falls within the prefix set or ASN,
    respectively. The CDNI specifications do not define how a given uCDN
    determines what address ranges are in a particular ASN. Similarly,
    for country codes, a uCDN should only consider the dCDN a candidate
    if it covers the country of the Request Routing source. The CDNI
    specifications do not define how a given uCDN determines the country
    of the Request Routing source. Different types of footprint
    constraints can be combined together to narrow the dCDN candidacy,
    i.e., the uCDN should consider the dCDN a candidate only if the
    request routing source satisfies all the types of footprint
    constraints in the
    advertisement.[¶](#section-2.2-2.4){.pilcrow}]{#section-2.2-2.4}
-   [Given that a large part of Footprint and Capabilities Advertisement
    may happen in contractual agreements, the semantics of CDNI
    Footprint and Capabilities Advertisement refers to answering the
    following question: what exactly still needs to be advertised by the
    CDNI FCI? For instance, updates about temporal failures of part of a
    footprint can be useful information to convey via the CDNI FCI. Such
    information would provide updates on information previously agreed
    to in contracts between the participating CDNs. In other words, the
    CDNI FCI is a means for a dCDN to provide changes and updates
    regarding a footprint and/or capabilities that it has previously
    agreed to serve in a contract with a uCDN. Hence, server push and
    incremental encoding will be necessary
    techniques.[¶](#section-2.2-2.5){.pilcrow}]{#section-2.2-2.5}
:::
:::

::: {#bgALTO}
::: {#section-2.3 .section}
### [2.3.](#section-2.3){.section-number .selfRef} [ALTO Background and Benefits](#name-alto-background-and-benefit){.section-name .selfRef} {#name-alto-background-and-benefit}

Application-Layer Traffic Optimization (ALTO)
\[[RFC7285](#RFC7285){.xref}\] defines an approach for conveying
network-layer (topology) information to \"guide\" the resource provider
selection process in distributed applications that can choose among
several candidate resources providers to retrieve a given resource.
Usually, it is assumed that an ALTO server conveys information that
these applications cannot measure or have difficulty measuring
themselves \[[RFC5693](#RFC5693){.xref}\].[¶](#section-2.3-1){.pilcrow}

Originally, ALTO was motivated by optimizing cross-ISP traffic generated
by peer-to-peer applications \[[RFC5693](#RFC5693){.xref}\]. However,
ALTO can also be used for improving the Request Routing in CDNs. In
particular, [Section
5](https://www.rfc-editor.org/rfc/rfc7971#section-5){.relref} of
\[[RFC7971](#RFC7971){.xref}\] explicitly mentions ALTO as a candidate
protocol to improve the selection of a CDN surrogate or
origin.[¶](#section-2.3-2){.pilcrow}

The following reasons make ALTO a suitable candidate protocol for dCDN
selection as part of CDNI Request Routing and, in particular, for an FCI
protocol:[¶](#section-2.3-3){.pilcrow}

-   [Application-Layer-oriented: ALTO is a protocol specifically
    designed to improve application-layer traffic (and application-layer
    connections among hosts on the Internet) by providing additional
    information to applications that these applications could not easily
    retrieve themselves. This matches the need of CDNI, where a uCDN
    wants to improve application-layer CDN request routing by using
    information (provided by a dCDN) that the uCDN could not easily
    obtain otherwise. Hence, ALTO can help a uCDN to select a proper
    dCDN by first providing dCDNs\' capabilities as well as footprints
    (see [Section 3](#cdnifci){.xref}) and then providing costs of
    surrogates in a dCDN by ALTO cost
    maps.[¶](#section-2.3-4.1){.pilcrow}]{#section-2.3-4.1}
-   [Security: The identification between uCDNs and dCDNs is an
    important requirement (see [Section 8](#security){.xref}). ALTO maps
    can be signed and hence provide inherent origin protection. Please
    see [Section
    15.1.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.1.2){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] for detailed protection
    strategies.[¶](#section-2.3-4.2){.pilcrow}]{#section-2.3-4.2}
-   [RESTful design: The ALTO Protocol has undergone extensive revisions
    in order to provide a RESTful design regarding the client-server
    interaction specified by the protocol. It is flexible and extensible
    enough to handle existing and potential future data formats defined
    by CDNI. It can provide the consistent client-server interaction
    model for other existing CDNI interfaces or potential future
    extensions and therefore reduce the learning cost for both users and
    developers, although they are not in the scope of this document. A
    CDNI FCI interface based on ALTO would inherit this RESTful design.
    Please see [Section
    3](#cdnifci){.xref}.[¶](#section-2.3-4.3){.pilcrow}]{#section-2.3-4.3}
-   [Error handling: The ALTO Protocol provides extensive error handling
    in the whole request and response process (see [Section
    8.5](https://www.rfc-editor.org/rfc/rfc7285#section-8.5){.relref} of
    \[[RFC7285](#RFC7285){.xref}\]). A CDNI FCI interface based on ALTO
    would inherit this extensive error-handling framework. Please see
    [Section
    5](#filteredcdnifci){.xref}.[¶](#section-2.3-4.4){.pilcrow}]{#section-2.3-4.4}
-   [Map Service: The semantics of an ALTO network map is an exact match
    for the needed information to convey a footprint by a dCDN, in
    particular, if such a footprint is being expressed by IP prefix
    ranges. Please see [Section
    4](#cdnifcinetworkmap){.xref}.[¶](#section-2.3-4.5){.pilcrow}]{#section-2.3-4.5}
-   [Filtered Map Service: The ALTO map filtering service would allow a
    uCDN to query only for parts of an ALTO map. For example, the ALTO
    filtered property Map Service can enable a uCDN to query properties
    of a part of footprints efficiently. Please see [Section
    6](#unifiedpropertymap){.xref}.[¶](#section-2.3-4.6){.pilcrow}]{#section-2.3-4.6}
-   [Server-initiated notifications and incremental updates: When the
    footprint or the capabilities of a dCDN change (i.e., unexpectedly
    from the perspective of a uCDN), server-initiated notifications
    would enable a dCDN to inform a uCDN about such changes directly.
    Consider the case where \-- due to failure \-- part of the footprint
    of the dCDN is not functioning, i.e., the CDN cannot serve content
    to such clients with reasonable QoS. Without server-initiated
    notifications, the uCDN might still use a recent network and cost
    map from the dCDN and therefore redirect requests to the dCDN that
    it cannot serve. Similarly, the possibility for incremental updates
    would enable efficient conveyance of the aforementioned (or similar)
    status changes by the dCDN to the uCDN. The newest design of ALTO
    supports server-pushed incremental updates
    \[[RFC8895](#RFC8895){.xref}\].[¶](#section-2.3-4.7){.pilcrow}]{#section-2.3-4.7}
-   [Content availability on hosts: A dCDN might want to express CDN
    capabilities in terms of certain content types (e.g., codecs and/or
    formats, or content from certain content providers). ALTO Entity
    Property Map \[[RFC9240](#RFC9240){.xref}\] would enable a dCDN to
    make such information available to a uCDN. This would enable a uCDN
    to assess whether a dCDN has the capabilities for a given type of
    content requested.[¶](#section-2.3-4.8){.pilcrow}]{#section-2.3-4.8}
-   [Resource availability on hosts or links: The capabilities on links
    (e.g., maximum bandwidth) or caches (e.g., average load) might be
    useful information for a uCDN for optimized dCDN selection. For
    instance, if a uCDN receives a streaming request for content with a
    certain bitrate, it needs to know if it is likely that a dCDN can
    fulfill such stringent application-level requirements (i.e., can be
    expected to have enough consistent bandwidth) before it redirects
    the request. In general, if ALTO could convey such information via
    ALTO Entity Property Map \[[RFC9240](#RFC9240){.xref}\], it would
    enable more sophisticated means for dCDN selection with ALTO. The
    ALTO Path Vector extension
    \[[ALTO-PATH-VECTOR](#I-D.ietf-alto-path-vector){.xref}\] is
    designed to allow ALTO clients to query information such as capacity
    regions for a given set of
    flows.[¶](#section-2.3-4.9){.pilcrow}]{#section-2.3-4.9}
:::
:::
:::
:::

::: {#cdnifci}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [CDNI Advertisement Service](#name-cdni-advertisement-service){.section-name .selfRef} {#name-cdni-advertisement-service}

The ALTO Protocol relies upon the ALTO information service framework,
which consists of multiple services. All ALTO services are \"provided
through a common transport protocol; messaging structure and encoding;
and transaction model\" \[[RFC7285](#RFC7285){.xref}\]. The ALTO
Protocol specification defines multiple initial services, e.g., the ALTO
Network Map Service and Cost Map Service.[¶](#section-3-1){.pilcrow}

This document defines a new ALTO service, called \"CDNI Advertisement
Service\", which conveys JSON \[[RFC8259](#RFC8259){.xref}\] objects of
media type \"application/alto-cdni+json\". These JSON objects are used
to transport BaseAdvertisementObject objects defined in
\[[RFC8008](#RFC8008){.xref}\]. This document specifies how to transport
such BaseAdvertisementObject objects via the ALTO Protocol with the ALTO
CDNI Advertisement Service. Similar to other ALTO services, this
document defines the ALTO information resource for the CDNI
Advertisement Service as follows.[¶](#section-3-2){.pilcrow}

Note that the encoding of BaseAdvertisementObject reuses the one defined
in \[[RFC8008](#RFC8008){.xref}\] and therefore also follows the
recommendations of I-JSON (Internet JSON)
\[[RFC7493](#RFC7493){.xref}\], which is required by
\[[RFC8008](#RFC8008){.xref}\].[¶](#section-3-3){.pilcrow}

::: {#cdnifcimediatype}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Media Type](#name-media-type){.section-name .selfRef} {#name-media-type}

The media type of the CDNI Advertisement resource is
\"application/alto-cdni+json\" (see [Section
7](#iana){.xref}).[¶](#section-3.1-1){.pilcrow}
:::
:::

::: {#cdnifcimethod}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [HTTP Method](#name-http-method){.section-name .selfRef} {#name-http-method}

A CDNI Advertisement resource is requested using the HTTP GET
method.[¶](#section-3.2-1){.pilcrow}
:::
:::

::: {#cdnifciinput}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Accept Input Parameters](#name-accept-input-parameters){.section-name .selfRef} {#name-accept-input-parameters}

There are no applicable Accept Input
parameters.[¶](#section-3.3-1){.pilcrow}
:::
:::

::: {#cdnifcicap}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [Capabilities](#name-capabilities){.section-name .selfRef} {#name-capabilities}

There are no applicable capabilities.[¶](#section-3.4-1){.pilcrow}
:::
:::

::: {#cdnifciuses}
::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [Uses](#name-uses){.section-name .selfRef} {#name-uses}

The \"uses\" field [MUST NOT]{.bcp14} appear unless the CDNI
Advertisement resource depends on other ALTO information resources. If
the CDNI Advertisement resource has dependent resources, the resource
IDs of its dependent resources [MUST]{.bcp14} be included into the
\"uses\" field. This document only defines one potential dependent
resource for the CDNI Advertisement resource. See [Section
4](#cdnifcinetworkmap){.xref} for details of when and how to use it.
Future documents may extend the CDNI Advertisement resource and allow
other dependent resources.[¶](#section-3.5-1){.pilcrow}
:::
:::

::: {#cdnifciencoding}
::: {#section-3.6 .section}
### [3.6.](#section-3.6){.section-number .selfRef} [Response](#name-response){.section-name .selfRef} {#name-response}

The \"meta\" field of a CDNI Advertisement response [MUST]{.bcp14}
include the \"vtag\" field defined in [Section
10.3](https://www.rfc-editor.org/rfc/rfc7285#section-10.3){.relref} of
\[[RFC7285](#RFC7285){.xref}\]. This field provides the version of the
retrieved CDNI FCI resource.[¶](#section-3.6-1){.pilcrow}

If a CDNI Advertisement response depends on other ALTO information
resources, it [MUST]{.bcp14} include the \"dependent-vtags\" field,
whose value is an array to indicate the version tags of the resources
used, where each resource is specified in \"uses\" of its Information
Resource Directory (IRD) entry.[¶](#section-3.6-2){.pilcrow}

The data component of an ALTO CDNI Advertisement response is named
\"cdni-advertisement\", which is a JSON object of type
CDNIAdvertisementData:[¶](#section-3.6-3){.pilcrow}

::: {#section-3.6-4}
``` {.lang-json .sourcecode}
    object {
      CDNIAdvertisementData cdni-advertisement;
    } InfoResourceCDNIAdvertisement : ResponseEntityBase;

    object {
      BaseAdvertisementObject capabilities-with-footprints<0..*>;
    } CDNIAdvertisementData;
```

[¶](#section-3.6-4){.pilcrow}
:::

Specifically, a CDNIAdvertisementData object is a JSON object that
includes only one property named \"capabilities-with-footprints\", whose
value is an array of BaseAdvertisementObject objects. It provides
capabilities with footprint restrictions for the uCDN to decide the dCDN
selection. If the value of this property is an empty array, it means the
corresponding dCDN cannot provide any mandatory-to-implement CDNI
capabilities for any footprints.[¶](#section-3.6-5){.pilcrow}

The syntax and semantics of BaseAdvertisementObject are well defined in
[Section
5.1](https://www.rfc-editor.org/rfc/rfc8008#section-5.1){.relref} of
\[[RFC8008](#RFC8008){.xref}\]. A BaseAdvertisementObject object
includes multiple properties, including \"capability-type\",
\"capability-value\", and \"footprints\", where \"footprints\" are
defined in [Section
4.2.2.2](https://www.rfc-editor.org/rfc/rfc8006#section-4.2.2.2){.relref}
of \[[RFC8006](#RFC8006){.xref}\].[¶](#section-3.6-6){.pilcrow}

An equivalent specification in the ALTO-style notation (see [Section
8.2](https://www.rfc-editor.org/rfc/rfc7285#section-8.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]) creates a self-contained description of
the BaseAdvertisementObject. As mentioned above, the normative
specification of BaseAdvertisementObject is in
\[[RFC8008](#RFC8008){.xref}\].[¶](#section-3.6-7){.pilcrow}

::: {#section-3.6-8}
``` {.lang-json .sourcecode}
    object {
      JSONString capability-type;
      JSONValue capability-value;
      Footprint footprints<0..*>;
    } BaseAdvertisementObject;

    object {
      JSONString footprint-type;
      JSONString footprint-value<1..*>;
    } Footprint;
```

[¶](#section-3.6-8){.pilcrow}
:::

For each BaseAdvertisementObject, the ALTO client [MUST]{.bcp14}
interpret \"footprints\" appearing multiple times as if they appeared
only once. If \"footprints\" in a BaseAdvertisementObject is null or
empty or does not appear, the ALTO client [MUST]{.bcp14} understand that
the capabilities in this BaseAdvertisementObject have the \"global\"
coverage, i.e., the corresponding dCDN can provide them for any Request
Routing source.[¶](#section-3.6-9){.pilcrow}

Note: Further optimization of BaseAdvertisementObjects to effectively
provide the advertisement of capabilities with footprint restrictions is
certainly possible. For example, these two examples below both describe
that the dCDN can provide capabilities \[\"http/1.1\", \"https/1.1\"\]
for the same footprints. However, the latter one is smaller in its
size.[¶](#section-3.6-10){.pilcrow}

::: {#section-3.6-11 .alignLeft .art-text .artwork}
    EXAMPLE 1
        {
          "meta": {...},
          "cdni-advertisement": {
            "capabilities-with-footprints": [
              {
                "capability-type": "FCI.DeliveryProtocol",
                "capability-value": {
                  "delivery-protocols": [
                    "http/1.1"
                  ]
                },
                "footprints": [
                  <Footprint objects>
                ]
              },
              {

                "capability-type": "FCI.DeliveryProtocol",
                "capability-value": {
                  "delivery-protocols": [
                    "https/1.1"
                  ]
                },
                "footprints": [
                  <Footprint objects>
                ]
              }
            ]
          }
        }

[¶](#section-3.6-11){.pilcrow}
:::

::: {#section-3.6-12 .alignLeft .art-text .artwork}
    EXAMPLE 2
        {
          "meta": {...},
          "cdni-advertisement": {
            "capabilities-with-footprints": [
              {
                "capability-type": "FCI.DeliveryProtocol",
                "capability-value": {
                  "delivery-protocols": [
                    "https/1.1",
                    "http/1.1"
                  ]
                },
                "footprints": [
                  <Footprint objects>
                ]
              }
            ]
          }
        }

[¶](#section-3.6-12){.pilcrow}
:::

Since such optimizations are not required for the basic interconnection
of CDNs, the specifics of such mechanisms are outside the scope of this
document.[¶](#section-3.6-13){.pilcrow}

This document only requires the ALTO server to provide the initial
FCI-specific CDNI Payload Types defined in
\[[RFC8008](#RFC8008){.xref}\] as the mandatory-to-implement CDNI
capabilities.[¶](#section-3.6-14){.pilcrow}
:::
:::

::: {#cdnifciexamples}
::: {#section-3.7 .section}
### [3.7.](#section-3.7){.section-number .selfRef} [Examples](#name-examples){.section-name .selfRef} {#name-examples}

::: {#IRDexample}
::: {#section-3.7.1 .section}
#### [3.7.1.](#section-3.7.1){.section-number .selfRef} [IRD](#name-ird){.section-name .selfRef} {#name-ird}

Below is the IRD of a simple, example ALTO server. The server provides
both base ALTO information resources (e.g., network maps) and CDNI
FCI-related information resources (e.g., CDNI Advertisement resources),
demonstrating a single, integrated
environment.[¶](#section-3.7.1-1){.pilcrow}

Specifically, the IRD announces nine information resources as
follows:[¶](#section-3.7.1-2){.pilcrow}

-   [two network
    maps,[¶](#section-3.7.1-3.1){.pilcrow}]{#section-3.7.1-3.1}

-   [one CDNI Advertisement resource without
    dependency,[¶](#section-3.7.1-3.2){.pilcrow}]{#section-3.7.1-3.2}

-   [one CDNI Advertisement resource depending on a network
    map,[¶](#section-3.7.1-3.3){.pilcrow}]{#section-3.7.1-3.3}

-   [one filtered CDNI Advertisement resource to be defined in [Section
    5](#filteredcdnifci){.xref},[¶](#section-3.7.1-3.4){.pilcrow}]{#section-3.7.1-3.4}

-   [one property map including \"cdni-capabilities\" as its entity
    property,[¶](#section-3.7.1-3.5){.pilcrow}]{#section-3.7.1-3.5}

-   [one filtered property map including \"cdni-capabilities\" and
    \"pid\" as its entity properties,
    and[¶](#section-3.7.1-3.6){.pilcrow}]{#section-3.7.1-3.6}

-   ::: {#section-3.7.1-3.7}
    two update stream services:[¶](#section-3.7.1-3.7.1){.pilcrow}

    -   [one for updating CDNI Advertisement
        resources,[¶](#section-3.7.1-3.7.2.1){.pilcrow}]{#section-3.7.1-3.7.2.1}
    -   [one for updating property
        maps[¶](#section-3.7.1-3.7.2.2){.pilcrow}]{#section-3.7.1-3.7.2.2}
    :::

::: {#section-3.7.1-4 .alignLeft .art-text .artwork}
     GET /directory HTTP/1.1
     Host: alto.example.com
     Accept: application/alto-directory+json,application/alto-error+json

     HTTP/1.1 200 OK
     Content-Length: 3531
     Content-Type: application/alto-directory+json

     {
       "meta": {
         "default-alto-network-map": "my-default-network-map"
       },
       "resources": {
         "my-default-network-map": {
           "uri": "https://alto.example.com/networkmap",
           "media-type": "application/alto-networkmap+json"
         },
         "my-eu-netmap": {
           "uri": "https://alto.example.com/myeunetmap",
           "media-type": "application/alto-networkmap+json"
         },
         "my-default-cdnifci": {
           "uri": "https://alto.example.com/cdnifci",
           "media-type": "application/alto-cdni+json"
         },
         "my-cdnifci-with-pid-footprints": {
           "uri": "https://alto.example.com/networkcdnifci",
           "media-type": "application/alto-cdni+json",
           "uses": [ "my-eu-netmap" ]
         },
         "my-filtered-cdnifci": {
           "uri": "https://alto.example.com/cdnifci/filtered",
           "media-type": "application/alto-cdni+json",
           "accepts": "application/alto-cdnifilter+json"
         },
         "cdnifci-property-map": {
           "uri": "https://alto.example.com/propmap/full/cdnifci",
           "media-type": "application/alto-propmap+json",
           "uses": [ "my-default-cdni" ],
           "capabilities": {
             "mappings": {
               "ipv4": [ "my-default-cdni.cdni-capabilities" ],
               "ipv6": [ "my-default-cdni.cdni-capabilities" ],
               "countrycode": [
                 "my-default-cdni.cdni-capabilities" ],
               "asn": [ "my-default-cdni.cdni-capabilities" ]
             }
           }
         },
         "filtered-cdnifci-property-map": {
           "uri": "https://alto.example.com/propmap/lookup/cdnifci-pid",
           "media-type": "application/alto-propmap+json",
           "accepts": "application/alto-propmapparams+json",
           "uses": [ "my-default-cdni", "my-default-network-map" ],
           "capabilities": {
             "mappings": {
               "ipv4": [ "my-default-cdni.cdni-capabilities",
                         "my-default-network-map.pid" ],
               "ipv6": [ "my-default-cdni.cdni-capabilities",
                         "my-default-network-map.pid" ],
               "countrycode": [
                 "my-default-cdni.cdni-capabilities" ],
               "asn": [ "my-default-cdni.cdni-capabilities" ]
             }
           }
         },
         "update-my-cdni-fci": {
           "uri": "https://alto.example.com/updates/cdnifci",
           "media-type": "text/event-stream",
           "accepts": "application/alto-updatestreamparams+json",
           "uses": [
             "my-default-network-map",
             "my-eu-netmap",
             "my-default-cdnifci",
             "my-filtered-cdnifci",
             "my-cdnifci-with-pid-footprints"
           ],
           "capabilities": {
             "incremental-change-media-types": {
              "my-default-network-map": "application/json-patch+json",
              "my-eu-netmap": "application/json-patch+json",
              "my-default-cdnifci":
              "application/merge-patch+json,application/json-patch+json",
              "my-filtered-cdnifci":
              "application/merge-patch+json,application/json-patch+json",
              "my-cdnifci-with-pid-footprints":
              "application/merge-patch+json,application/json-patch+json"
             }
           }
         },
         "update-my-props": {
           "uri": "https://alto.example.com/updates/properties",
           "media-type": "text/event-stream",
           "uses": [
             "cdnifci-property-map",
             "filtered-cdnifci-property-map"
           ],
           "capabilities": {
             "incremental-change-media-types": {
              "cdnifci-property-map":
              "application/merge-patch+json,application/json-patch+json",
              "filtered-cdnifci-property-map":
              "application/merge-patch+json,application/json-patch+json"
             }
           }
         }
       }
     }

[¶](#section-3.7.1-4){.pilcrow}
:::
:::
:::

::: {#fullcdnifciexample}
::: {#section-3.7.2 .section}
#### [3.7.2.](#section-3.7.2){.section-number .selfRef} [A Basic Example](#name-a-basic-example){.section-name .selfRef} {#name-a-basic-example}

This basic example demonstrates a simple CDNI Advertisement resource,
which does not depend on other resources. There are three
BaseAdvertisementObjects in this resource and these objects\'
capabilities are \"http/1.1\" delivery protocol, \[\"http/1.1\",
\"https/1.1\"\] delivery protocol, and \"https/1.1\" acquisition
protocol, respectively.[¶](#section-3.7.2-1){.pilcrow}

::: {#section-3.7.2-2 .alignLeft .art-text .artwork}
      GET /cdnifci HTTP/1.1
      Host: alto.example.com
      Accept: application/alto-cdni+json,application/alto-error+json

      HTTP/1.1 200 OK
      Content-Length: 1411
      Content-Type: application/alto-cdni+json

      {
        "meta": {
          "vtag": {
            "resource-id": "my-default-cdnifci",
            "tag": "da65eca2eb7a10ce8b059740b0b2e3f8eb1d4785"
          }
        },
        "cdni-advertisement": {
          "capabilities-with-footprints": [
            {
              "capability-type": "FCI.DeliveryProtocol",
              "capability-value": {
                "delivery-protocols": [
                  "http/1.1"
                ]
              },
              "footprints": [
                {
                  "footprint-type": "ipv4cidr",
                  "footprint-value": [ "192.0.2.0/24" ]
                },
                {
                  "footprint-type": "ipv6cidr",
                  "footprint-value": [ "2001:db8::/32" ]
                }
              ]
            },
            {
              "capability-type": "FCI.DeliveryProtocol",
              "capability-value": {
                "delivery-protocols": [
                  "https/1.1",
                  "http/1.1"
                ]
              },
              "footprints": [
                {
                  "footprint-type": "ipv4cidr",
                  "footprint-value": [ "198.51.100.0/24" ]
                }
              ]
            },
            {
              "capability-type": "FCI.AcquisitionProtocol",
              "capability-value": {
                "acquisition-protocols": [
                  "https/1.1"
                ]
              },
              "footprints": [
                {
                  "footprint-type": "ipv4cidr",
                  "footprint-value": [ "203.0.113.0/24" ]
                }
              ]
            }
          ]
        }
      }

[¶](#section-3.7.2-2){.pilcrow}
:::
:::
:::

::: {#incremental-updates}
::: {#section-3.7.3 .section}
#### [3.7.3.](#section-3.7.3){.section-number .selfRef} [Incremental Updates](#name-incremental-updates){.section-name .selfRef} {#name-incremental-updates}

A benefit of using ALTO to provide CDNI Advertisement resources is that
such resources can be updated using ALTO incremental updates
\[[RFC8895](#RFC8895){.xref}\]. Below is an example that also shows the
benefit of having both JSON merge patch and JSON patch to encode
updates.[¶](#section-3.7.3-1){.pilcrow}

At first, an ALTO client requests updates for \"my-default-cdnifci\",
and the ALTO server returns the \"control-uri\" followed by the full
CDNI Advertisement response. Then when there is a change in the
\"delivery-protocols\" in that \"http/1.1\" is removed (from
\[\"http/1.1\", \"https/1.1\"\] to only \"https/1.1\") due to
maintenance of the \"http/1.1\" clusters, the ALTO server regenerates
the new CDNI Advertisement resource and pushes the full replacement to
the ALTO client. Later on, the ALTO server notifies the ALTO client that
\"192.0.2.0/24\" is added into the \"ipv4\" footprint object for
delivery protocol \"https/1.1\" by sending the change encoded by JSON
patch to the ALTO client.[¶](#section-3.7.3-2){.pilcrow}

::: {#section-3.7.3-3 .alignLeft .art-text .artwork}
     POST /updates/cdnifci HTTP/1.1
     Host: alto.example.com
     Accept: text/event-stream,application/alto-error+json
     Content-Type: application/alto-updatestreamparams+json
     Content-Length: 94

     {
       "add": {
         "my-cdnifci-stream": {
           "resource-id": "my-default-cdnifci"
         }
       }
     }

     HTTP/1.1 200 OK
     Connection: keep-alive
     Content-Type: text/event-stream

     event: application/alto-updatestreamcontrol+json
     data: {"control-uri":
     data: "https://alto.example.com/updates/streams/3141592653589"}

     event: application/alto-cdni+json,my-cdnifci-stream
     data: { ... full CDNI Advertisement resource ... }

     event: application/alto-cdni+json,my-cdnifci-stream
     data: {
     data:   "meta": {
     data:     "vtag": {
     data:       "tag": "dasdfa10ce8b059740bddsfasd8eb1d47853716"
     data:     }
     data:   },
     data:   "cdni-advertisement": {
     data:     "capabilities-with-footprints": [
     data:       {
     data:         "capability-type": "FCI.DeliveryProtocol",
     data:         "capability-value": {
     data:           "delivery-protocols": [
     data:             "https/1.1"
     data:           ]
     data:         },
     data:         "footprints": [
     data:           { "footprint-type": "ipv4cidr",
     data:             "footprint-value": [ "203.0.113.0/24" ]
     data:           }
     data:         ]
     data:       },
     data:       { ... other CDNI advertisement object ... }
     data:     ]
     data:   }
     data: }

     event: application/json-patch+json,my-cdnifci-stream
     data: [
     data:   { "op": "replace",
     data:     "path": "/meta/vtag/tag",
     data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
     data:   },
     data:   { "op": "add",
     data:     "path": "/cdni-advertisement/capabilities-with-footprints
     /0/footprints/0/footprint-value/-",
     data:     "value": "192.0.2.0/24"
     data:   }
     data: ]

[¶](#section-3.7.3-3){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#cdnifcinetworkmap}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [CDNI Advertisement Service Using ALTO Network Map](#name-cdni-advertisement-service-){.section-name .selfRef} {#name-cdni-advertisement-service-}

::: {#network-map-footprint-type-altopid}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Network Map Footprint Type: altopid](#name-network-map-footprint-type-){.section-name .selfRef} {#name-network-map-footprint-type-}

The ALTO Protocol defines a concept called Provider-defined Identifier
(PID) to represent a group of IPv4 or IPv6 addresses to which can be
applied the same management policy. The PID is an alternative to the
predefined CDNI footprint types (i.e., \"ipv4cidr\", \"ipv6cidr\",
\"asn\", and \"countrycode\").[¶](#section-4.1-1){.pilcrow}

To leverage this concept, this document defines a new CDNI Footprint
Type called \"altopid\". A CDNI Advertisement resource can depend on an
ALTO network map resource and use \"altopid\" footprints to compress its
CDNI Footprint Payload.[¶](#section-4.1-2){.pilcrow}

Specifically, the \"altopid\" footprint type indicates that the
corresponding footprint value is a list of PIDNames as defined in
\[[RFC7285](#RFC7285){.xref}\]. These PIDNames are references of PIDs in
a network map resource. Hence a CDNI Advertisement resource using
\"altopid\" footprints depends on a network map. For such a CDNI
Advertisement resource, the resource ID of its dependent network map
[MUST]{.bcp14} be included in the \"uses\" field of its IRD entry, and
the \"dependent-vtags\" field with a reference to this network map
[MUST]{.bcp14} be included in its response (see the example in [Section
4.2.2](#networkmapfootprint){.xref}).[¶](#section-4.1-3){.pilcrow}
:::
:::

::: {#examples}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Examples](#name-examples-2){.section-name .selfRef} {#name-examples-2}

The following examples use the same IRD given in [Section
3.7.1](#IRDexample){.xref}.[¶](#section-4.2-1){.pilcrow}

::: {#networkmapexample}
::: {#section-4.2.1 .section}
#### [4.2.1.](#section-4.2.1){.section-number .selfRef} [ALTO Network Map for CDNI Advertisements](#name-alto-network-map-for-cdni-a){.section-name .selfRef} {#name-alto-network-map-for-cdni-a}

Below provides a sample network map whose resource ID is
\"my-eu-netmap\". This map is referenced by the CDNI Advertisement
example in [Section
4.2.2](#networkmapfootprint){.xref}.[¶](#section-4.2.1-1){.pilcrow}

::: {#section-4.2.1-2 .alignLeft .art-text .artwork}
     GET /myeunetmap HTTP/1.1
     Host: alto.example.com
     Accept: application/alto-networkmap+json,application/alto-error+json

     HTTP/1.1 200 OK
     Content-Length: 344
     Content-Type: application/alto-networkmap+json

     {
       "meta": {
         "vtag": [
           { "resource-id": "my-eu-netmap",
             "tag": "3ee2cb7e8d63d9fab71b9b34cbf764436315542e"
           }
         ]
       },
       "network-map": {
         "south-france" : {
           "ipv4": [ "192.0.2.0/24", "198.51.100.0/25" ],
           "ipv6": [ "2001:db8::/32" ]
         },
         "germany": {
           "ipv4": [ "203.0.113.0/24" ]
         }
       }
     }

[¶](#section-4.2.1-2){.pilcrow}
:::
:::
:::

::: {#networkmapfootprint}
::: {#section-4.2.2 .section}
#### [4.2.2.](#section-4.2.2){.section-number .selfRef} [ALTO PID Footprints in CDNI Advertisements](#name-alto-pid-footprints-in-cdni){.section-name .selfRef} {#name-alto-pid-footprints-in-cdni}

This example shows a CDNI Advertisement resource that depends on a
network map described in [Section
4.2.1](#networkmapexample){.xref}.[¶](#section-4.2.2-1){.pilcrow}

::: {#section-4.2.2-2 .alignLeft .art-text .artwork}
     GET /networkcdnifci HTTP/1.1
     Host: alto.example.com
     Accept: application/alto-cdni+json,application/alto-error+json

     HTTP/1.1 200 OK
     Content-Length: 736
     Content-Type: application/alto-cdni+json

     {
       "meta": {
         "dependent-vtags": [
           {
             "resource-id": "my-eu-netmap",
             "tag": "3ee2cb7e8d63d9fab71b9b34cbf764436315542e"
           }
         ]
       },
       "cdni-advertisement": {
         "capabilities-with-footprints": [
           { "capability-type": "FCI.DeliveryProtocol",
             "capability-value": [ "https/1.1" ],
             "footprints": [
               { "footprint-type": "altopid",
                 "footprint-value": [ "south-france" ]
               }
             ]
           },
           { "capability-type": "FCI.AcquisitionProtocol",
             "capability-value": [ "https/1.1" ],
             "footprints": [
               { "footprint-type": "altopid",
                 "footprint-value": [ "germany", "south-france" ]
               }
             ]
           }
         ]
       }
     }

[¶](#section-4.2.2-2){.pilcrow}
:::
:::
:::

::: {#incremental-updates-1}
::: {#section-4.2.3 .section}
#### [4.2.3.](#section-4.2.3){.section-number .selfRef} [Incremental Updates](#name-incremental-updates-2){.section-name .selfRef} {#name-incremental-updates-2}

In this example, the ALTO client is interested in changes of
\"my-cdnifci-with-pid-footprints\" and its dependent network map
\"my-eu-netmap\". Considering two changes, the first one is to change
footprints of the \"https/1.1\" delivery protocol capability, and the
second one is to remove the \"south-france\" PID from the footprints of
the \"https/1.1\" acquisition protocol
capability.[¶](#section-4.2.3-1){.pilcrow}

::: {#section-4.2.3-2 .alignLeft .art-text .artwork}
      POST /updates/cdnifci HTTP/1.1
      Host: alto.example.com
      Accept: text/event-stream,application/alto-error+json
      Content-Type: application/alto-updatestreamparams+json
      Content-Length: 185

      {
        "add": {
          "my-eu-netmap-stream": {
            "resource-id": "my-eu-netmap"
          },
          "my-netmap-cdnifci-stream": {
            "resource-id": "my-cdnifci-with-pid-footprints"
          }
        }
      }

      HTTP/1.1 200 OK
      Connection: keep-alive
      Content-Type: text/event-stream

      event: application/alto-updatestreamcontrol+json
      data: {"control-uri":
      data: "https://alto.example.com/updates/streams/3141592653590"}

      event: application/alto-networkmap+json,my-eu-netmap-stream
      data: { ... full Network Map of my-eu-netmap ... }

      event: application/alto-cdnifci+json,my-netmap-cdnifci-stream
      data: { ... full CDNI Advertisement resource ... }

      event: application/json-patch+json,my-netmap-cdnifci-stream
      data: [
      data:   { "op": "replace",
      data:     "path": "/meta/vtag/tag",
      data:     "value": "dasdfa10ce8b059740bddsfasd8eb1d47853716"
      data:   },
      data:   { "op": "add",
      data:     "path":
      data:     "/cdni-advertisement/capabilities-with-footprints
      /0/footprints/0/footprint-value/-",
      data:     "value": "germany"
      data:   }
      data: ]

      event: application/json-patch+json,my-netmap-cdnifci-stream
      data: [
      data:   { "op": "replace",
      data:     "path": "/meta/vtag/tag",
      data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
      data:   },
      data:   { "op": "remove",
      data:     "path":
      data:     "/cdni-advertisement/capabilities-with-footprints
      /1/footprints/0/footprint-value/1"
      data:   }
      data: ]

[¶](#section-4.2.3-2){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#filteredcdnifci}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Filtered CDNI Advertisement Using CDNI Capabilities](#name-filtered-cdni-advertisement){.section-name .selfRef} {#name-filtered-cdni-advertisement}

Sections [3](#cdnifci){.xref} and [4](#cdnifcinetworkmap){.xref}
describe the CDNI Advertisement Service that can be used to enable a
uCDN to get capabilities with footprint restrictions from dCDNs.
However, since always getting full CDNI Advertisement resources from
dCDNs is inefficient, this document introduces a new service named
\"Filtered CDNI Advertisement Service\" to allow a client to filter a
CDNI Advertisement resource using a client-given set of CDNI
capabilities. For each entry of the CDNI Advertisement response, an
entry will only be returned to the client if it contains at least one of
the client-given CDNI capabilities. The relationship between a filtered
CDNI Advertisement resource and a CDNI Advertisement resource is similar
to the relationship between a filtered network/cost map and a
network/cost map.[¶](#section-5-1){.pilcrow}

::: {#media-type}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Media Type](#name-media-type-2){.section-name .selfRef} {#name-media-type-2}

A filtered CDNI Advertisement resource uses the same media type defined
for the CDNI Advertisement resource in [Section
3.1](#cdnifcimediatype){.xref}:
\"application/alto-cdni+json\".[¶](#section-5.1-1){.pilcrow}
:::
:::

::: {#http-method}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [HTTP Method](#name-http-method-2){.section-name .selfRef} {#name-http-method-2}

A filtered CDNI Advertisement resource is requested using the HTTP POST
method.[¶](#section-5.2-1){.pilcrow}
:::
:::

::: {#filteredcdnifciinputs}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Accept Input Parameters](#name-accept-input-parameters-2){.section-name .selfRef} {#name-accept-input-parameters-2}

The input parameters for a filtered CDNI Advertisement resource are
supplied in the entity body of the POST request. This document specifies
the input parameters with a data format indicated by the media type
\"application/alto-cdnifilter+json\", which is a JSON object of type
ReqFilteredCDNIAdvertisement where:[¶](#section-5.3-1){.pilcrow}

::: {#section-5.3-2}
``` {.lang-json .sourcecode}
   object {
       JSONString capability-type;
       JSONValue capability-value;
   } CDNICapability;

   object {
       CDNICapability cdni-capabilities<0..*>;
   } ReqFilteredCDNIAdvertisement;
```

[¶](#section-5.3-2){.pilcrow}
:::

with fields:[¶](#section-5.3-3){.pilcrow}

[]{.break}

capability-type:

:   The same as Base Advertisement Object\'s \"capability-type\" defined
    in [Section
    5.1](https://www.rfc-editor.org/rfc/rfc8008#section-5.1){.relref} of
    \[[RFC8008](#RFC8008){.xref}\].[¶](#section-5.3-4.2.1){.pilcrow}

:   

capability-value:

:   The same as Base Advertisement Object\'s \"capability-value\"
    defined in [Section
    5.1](https://www.rfc-editor.org/rfc/rfc8008#section-5.1){.relref} of
    \[[RFC8008](#RFC8008){.xref}\].[¶](#section-5.3-4.4.1){.pilcrow}

:   

cdni-capabilities:

:   A list of CDNI capabilities defined in [Section
    5.1](https://www.rfc-editor.org/rfc/rfc8008#section-5.1){.relref} of
    \[[RFC8008](#RFC8008){.xref}\] for which footprints are to be
    returned. If this list is empty, the ALTO server [MUST]{.bcp14}
    interpret it as a request for the full CDNI Advertisement resource.
    The ALTO server [MUST]{.bcp14} interpret entries appearing in this
    list multiple times as if they appeared only once. If the ALTO
    server does not define any footprints for a CDNI capability, it
    [MUST]{.bcp14} omit this capability from the
    response.[¶](#section-5.3-4.6.1){.pilcrow}

:   
:::
:::

::: {#capabilities}
::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [Capabilities](#name-capabilities-2){.section-name .selfRef} {#name-capabilities-2}

There are no applicable capabilities.[¶](#section-5.4-1){.pilcrow}
:::
:::

::: {#uses}
::: {#section-5.5 .section}
### [5.5.](#section-5.5){.section-number .selfRef} [Uses](#name-uses-2){.section-name .selfRef} {#name-uses-2}

The same rules as for the \"uses\" field of the CDNI Advertisement
resource apply (see [Section
3.5](#cdnifciuses){.xref}).[¶](#section-5.5-1){.pilcrow}
:::
:::

::: {#response}
::: {#section-5.6 .section}
### [5.6.](#section-5.6){.section-number .selfRef} [Response](#name-response-2){.section-name .selfRef} {#name-response-2}

If the request is invalid, the response [MUST]{.bcp14} indicate an error
using ALTO Protocol error handling specified in [Section
8.5](https://www.rfc-editor.org/rfc/rfc7285#section-8.5){.relref} of
\[[RFC7285](#RFC7285){.xref}\].[¶](#section-5.6-1){.pilcrow}

Specifically, a filtered CDNI Advertisement request is invalid
if:[¶](#section-5.6-2){.pilcrow}

-   [the value of \"capability-type\" is
    null;[¶](#section-5.6-3.1){.pilcrow}]{#section-5.6-3.1}
-   [the value of \"capability-value\" is null;
    or[¶](#section-5.6-3.2){.pilcrow}]{#section-5.6-3.2}
-   [the value of \"capability-value\" is inconsistent with
    \"capability-type\".[¶](#section-5.6-3.3){.pilcrow}]{#section-5.6-3.3}

When a request is invalid, the ALTO server [MUST]{.bcp14} return an
\"E_INVALID_FIELD_VALUE\" error defined in [Section
8.5.2](https://www.rfc-editor.org/rfc/rfc7285#section-8.5.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\], and the \"value\" field of the error
message [SHOULD]{.bcp14} indicate this CDNI
capability.[¶](#section-5.6-4){.pilcrow}

The ALTO server returns a filtered CDNI Advertisement resource for a
valid request. The format of a filtered CDNI Advertisement resource is
the same as a full CDNI Advertisement resource (see [Section
3.6](#cdnifciencoding){.xref}).[¶](#section-5.6-5){.pilcrow}

The returned filtered CDNI Advertisement resource [MUST]{.bcp14} contain
all the BaseAdvertisementObject objects satisfying the following
condition: the CDNI capability object of each included
BaseAdvertisementObject object [MUST]{.bcp14} follow two
constraints:[¶](#section-5.6-6){.pilcrow}

-   [The \"cdni-capabilities\" field of the input includes a CDNI
    capability object X having the same \"capability-type\" as
    it.[¶](#section-5.6-7.1){.pilcrow}]{#section-5.6-7.1}
-   [All the mandatory properties in its \"capability-value\" is a
    superset of mandatory properties in \"capability-value\" of X
    semantically.[¶](#section-5.6-7.2){.pilcrow}]{#section-5.6-7.2}

See [Section 5.7.1](#filteredcdnifciexample){.xref} for a concrete
example.[¶](#section-5.6-8){.pilcrow}

The version tag included in the \"vtag\" field of the response
[MUST]{.bcp14} correspond to the full CDNI Advertisement resource from
which the filtered CDNI Advertisement resource is provided. This ensures
that a single, canonical version tag is used independently of any
filtering that is requested by an ALTO
client.[¶](#section-5.6-9){.pilcrow}
:::
:::

::: {#examples-1}
::: {#section-5.7 .section}
### [5.7.](#section-5.7){.section-number .selfRef} [Examples](#name-examples-3){.section-name .selfRef} {#name-examples-3}

The following examples use the same IRD example as in [Section
3.7.1](#IRDexample){.xref}.[¶](#section-5.7-1){.pilcrow}

::: {#filteredcdnifciexample}
::: {#section-5.7.1 .section}
#### [5.7.1.](#section-5.7.1){.section-number .selfRef} [A Basic Example](#name-a-basic-example-2){.section-name .selfRef} {#name-a-basic-example-2}

This example filters the full CDNI Advertisement resource in [Section
3.7.2](#fullcdnifciexample){.xref} by selecting only the \"http/1.1\"
delivery protocol capability. Only the second BaseAdvertisementObject in
the full resource will be returned because the second object\'s
capability is \"http/1.1\" and \"https/1.1\" delivery protocols, which
is the superset of \"https/1.1\" delivery
protocol.[¶](#section-5.7.1-1){.pilcrow}

::: {#section-5.7.1-2 .alignLeft .art-text .artwork}
      POST /cdnifci/filtered HTTP/1.1
      Host: alto.example.com
      Accept: application/alto-cdni+json
      Content-Type: application/cdnifilter+json
      Content-Length: 176

      {
        "cdni-capabilities": [
          {
            "capability-type": "FCI.DeliveryProtocol",
            "capability-value": {
              "delivery-protocols": [ "https/1.1" ]
            }
          }
        ]
      }

      HTTP/1.1 200 OK
      Content-Length: 570
      Content-Type: application/alto-cdni+json

      {
        "meta": {
          "vtag": {
            "resource-id": "my-filtered-cdnifci",
            "tag": "da65eca2eb7a10ce8b059740b0b2e3f8eb1d4785"
          }
        },
        "cdni-advertisement": {
          "capabilities-with-footprints": [
            {
              "capability-type": "FCI.DeliveryProtocol",
              "capability-value": {
                "delivery-protocols": [
                  "https/1.1",
                  "http/1.1"
                ]
              },
              "footprints": [
                {
                  "footprint-type": "ipv4cidr",
                  "footprint-value": [ "198.51.100.0/24" ]
                }
              ]
            }
          ]
        }
      }

[¶](#section-5.7.1-2){.pilcrow}
:::
:::
:::

::: {#incremental-updates-2}
::: {#section-5.7.2 .section}
#### [5.7.2.](#section-5.7.2){.section-number .selfRef} [Incremental Updates](#name-incremental-updates-3){.section-name .selfRef} {#name-incremental-updates-3}

In this example, the ALTO client only cares about the updates of one
advertisement object for delivery protocol capability whose value
includes \"https/1.1\". Thus, it adds its limitation of capabilities in
\"input\" field of the POST request.[¶](#section-5.7.2-1){.pilcrow}

::: {#section-5.7.2-2 .alignLeft .art-text .artwork}
      POST /updates/cdnifci HTTP/1.1
      Host: fcialtoupdate.example.com
      Accept: text/event-stream,application/alto-error+json
      Content-Type: application/alto-updatestreamparams+json
      Content-Length: 346

      {
        "add": {
          "my-filtered-fci-stream": {
            "resource-id": "my-filtered-cdnifci",
            "input": {
              "cdni-capabilities": [
                {
                  "capability-type": "FCI.DeliveryProtocol",
                  "capability-value": {
                    "delivery-protocols": [ "https/1.1" ]
                  }
                }
              ]
            }
          }
        }
      }

      HTTP/1.1 200 OK
      Connection: keep-alive
      Content-Type: text/event-stream

      event: application/alto-updatestreamcontrol+json
      data: {"control-uri":
      data: "https://alto.example.com/updates/streams/3141592653590"}

      event: application/alto-cdni+json,my-filtered-fci-stream
      data: { ... filtered CDNI Advertisement resource ... }

      event: application/json-patch+json,my-filtered-fci-stream
      data: [
      data:   {
      data:     "op": "replace",
      data:     "path": "/meta/vtag/tag",
      data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
      data:   },
      data:   { "op": "add",
      data:     "path":
      data:     "/cdni-advertisement/capabilities-with-footprints
      /0/footprints/0/footprint-value/-",
      data:     "value": "192.0.2.0/24"
      data:   }
      data: ]

[¶](#section-5.7.2-2){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#unifiedpropertymap}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Query Footprint Properties Using ALTO Property Map Service](#name-query-footprint-properties-){.section-name .selfRef} {#name-query-footprint-properties-}

Besides the requirement of retrieving footprints of given capabilities,
another common requirement for uCDN is to query CDNI capabilities of
given footprints.[¶](#section-6-1){.pilcrow}

Considering each footprint as an entity with properties including CDNI
capabilities, a natural way to satisfy this requirement is to use the
ALTO property map as defined in \[[RFC9240](#RFC9240){.xref}\]. This
section describes how ALTO clients look up properties for individual
footprints. First, it describes how to represent footprint objects as
entities in the ALTO property map. Then it describes how to represent
footprint capabilities as entity properties in the ALTO property map.
Finally, it provides examples of the full property map and the filtered
property map supporting CDNI capabilities, and their incremental
updates.[¶](#section-6-2){.pilcrow}

::: {#footprinttoentities}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Representing Footprint Objects as Property Map Entities](#name-representing-footprint-obje){.section-name .selfRef} {#name-representing-footprint-obje}

A footprint object has two properties: \"footprint-type\" and
\"footprint-value\". A \"footprint-value\" is an array of footprint
values conforming to the specification associated with the registered
footprint type (\"ipv4cidr\", \"ipv6cidr\", \"asn\", \"countrycode\",
and \"altopid\"). Considering each ALTO entity defined in
\[[RFC9240](#RFC9240){.xref}\] also has two properties: entity domain
type and domain-specific identifier, a straightforward approach to
represent a footprint as an ALTO entity is to represent its
\"footprint-type\" as an entity domain type, and its footprint value as
a domain-specific identifier.[¶](#section-6.1-1){.pilcrow}

Each existing footprint type can be represented as an entity domain type
as follows:[¶](#section-6.1-2){.pilcrow}

-   [According to \[[RFC9240](#RFC9240){.xref}\], \"ipv4\" and \"ipv6\"
    are two predefined entity domain types, which can be used to
    represent \"ipv4cidr\" and \"ipv6cidr\" footprints respectively.
    Note that both \"ipv4\" and \"ipv6\" domains can include not only
    hierarchical addresses but also individual addresses. Therefore, a
    \"ipv4cidr\" or \"ipv6cidr\" footprint with the longest prefix can
    also be represented by an individual address entity. When the uCDN
    receives a property map with individual addresses in an \"ipv4\" or
    \"ipv6\" domain, it can translate them as corresponding \"ipv4cidr\"
    or \"ipv6cidr\" footprints with the longest
    prefix.[¶](#section-6.1-3.1){.pilcrow}]{#section-6.1-3.1}
-   [\"pid\" is also a predefined entity domain type, which can be used
    to represent \"altopid\" footprints. Note that \"pid\" is a
    resource-specific entity domain. To represent an \"altopid\"
    footprint, the specifying information resource of the corresponding
    \"pid\" entity domain [MUST]{.bcp14} be the dependent network map
    used by the CDNI Advertisement resource providing this \"altopid\"
    footprint.[¶](#section-6.1-3.2){.pilcrow}]{#section-6.1-3.2}
-   [However, no existing entity domain type can represent \"asn\" and
    \"countrycode\" footprints. To represent footprint-type \"asn\" and
    \"countrycode\", this document registers two new entity domains in
    [Section 7](#iana){.xref} in addition to the ones in
    \[[RFC9240](#RFC9240){.xref}\].[¶](#section-6.1-3.3){.pilcrow}]{#section-6.1-3.3}

Here is an example of representing a footprint object of \"ipv4cidr\"
type as a set of \"ipv4\" entities in the ALTO property map. The
representation of the footprint object of \"ipv6cidr\" type is
similar.[¶](#section-6.1-4){.pilcrow}

::: {#section-6.1-5 .alignLeft .art-text .artwork}
    { "footprint-type": "ipv4cidr",
      "footprint-value": ["192.0.2.0/24", "198.51.100.0/24"]
    } --> "ipv4:192.0.2.0/24", "ipv4:198.51.100.0/24"

[¶](#section-6.1-5){.pilcrow}
:::

And here is an example of the corresponding footprint object of
\"ipv4cidr\" type represented by an individual address in an \"ipv4\"
domain in the ALTO property map. The translation of the entities in an
\"ipv6\" domain is similar.[¶](#section-6.1-6){.pilcrow}

::: {#section-6.1-7 .alignLeft .art-text .artwork}
    "ipv4:203.0.113.100" --> {
      "footprint-type": "ipv4cidr",
      "footprint-value": ["203.0.113.100/32"]
    }

[¶](#section-6.1-7){.pilcrow}
:::

::: {#asn-domain}
::: {#section-6.1.1 .section}
#### [6.1.1.](#section-6.1.1){.section-number .selfRef} [ASN Domain](#name-asn-domain){.section-name .selfRef} {#name-asn-domain}

The ASN domain associates property values with Autonomous Systems in the
Internet.[¶](#section-6.1.1-1){.pilcrow}

::: {#entity-domain-type}
::: {#section-6.1.1.1 .section}
##### [6.1.1.1.](#section-6.1.1.1){.section-number .selfRef} [Entity Domain Type](#name-entity-domain-type){.section-name .selfRef} {#name-entity-domain-type}

The entity domain type of the ASN domain is \"asn\" (in
lowercase).[¶](#section-6.1.1.1-1){.pilcrow}
:::
:::

::: {#asn-entity-id}
::: {#section-6.1.1.2 .section}
##### [6.1.1.2.](#section-6.1.1.2){.section-number .selfRef} [Domain-Specific Entity Identifiers](#name-domain-specific-entity-iden){.section-name .selfRef} {#name-domain-specific-entity-iden}

The entity identifier of an entity in an ASN domain [MUST]{.bcp14} be
encoded as a string consisting of the characters \"as\" (in lowercase)
followed by the ASN \[[RFC6793](#RFC6793){.xref}\] as a decimal number
without leading zeros.[¶](#section-6.1.1.2-1){.pilcrow}
:::
:::

::: {#hierarchy-and-inheritance}
::: {#section-6.1.1.3 .section}
##### [6.1.1.3.](#section-6.1.1.3){.section-number .selfRef} [Hierarchy and Inheritance](#name-hierarchy-and-inheritance){.section-name .selfRef} {#name-hierarchy-and-inheritance}

There is no hierarchy or inheritance for properties associated with
ASN.[¶](#section-6.1.1.3-1){.pilcrow}
:::
:::
:::
:::

::: {#countrycode-domain}
::: {#section-6.1.2 .section}
#### [6.1.2.](#section-6.1.2){.section-number .selfRef} [COUNTRYCODE Domain](#name-countrycode-domain){.section-name .selfRef} {#name-countrycode-domain}

The COUNTRYCODE domain associates property values with
countries.[¶](#section-6.1.2-1){.pilcrow}

::: {#entity-domain-type-1}
::: {#section-6.1.2.1 .section}
##### [6.1.2.1.](#section-6.1.2.1){.section-number .selfRef} [Entity Domain Type](#name-entity-domain-type-2){.section-name .selfRef} {#name-entity-domain-type-2}

The entity domain type of the COUNTRYCODE domain is \"countrycode\" (in
lowercase).[¶](#section-6.1.2.1-1){.pilcrow}
:::
:::

::: {#countrycode-entity-id}
::: {#section-6.1.2.2 .section}
##### [6.1.2.2.](#section-6.1.2.2){.section-number .selfRef} [Domain-Specific Entity Identifiers](#name-domain-specific-entity-ident){.section-name .selfRef} {#name-domain-specific-entity-ident}

The entity identifier of an entity in a COUNTRYCODE domain is encoded as
an ISO 3166-1 alpha-2 code \[[ISO3166-1](#ISO3166-1){.xref}\] in
lowercase.[¶](#section-6.1.2.2-1){.pilcrow}
:::
:::

::: {#hierarchy-and-inheritance-1}
::: {#section-6.1.2.3 .section}
##### [6.1.2.3.](#section-6.1.2.3){.section-number .selfRef} [Hierarchy and Inheritance](#name-hierarchy-and-inheritance-2){.section-name .selfRef} {#name-hierarchy-and-inheritance-2}

There is no hierarchy or inheritance for properties associated with
country codes.[¶](#section-6.1.2.3-1){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#capabilitytoproperties}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Representing CDNI Capabilities as Property Map Entity Properties](#name-representing-cdni-capabilit){.section-name .selfRef} {#name-representing-cdni-capabilit}

This document defines a new entity property type called
\"cdni-capabilities\". An ALTO server can provide a property map
resource mapping the \"cdni-capabilities\" entity property type for a
CDNI Advertisement resource that it provides to an \"ipv4\", \"ipv6\",
\"asn\", or \"countrycode\" entity domain.[¶](#section-6.2-1){.pilcrow}

::: {#defining-information-resource-media-type-for-property-type-cdni-capabilities}
::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [Defining Information Resource Media Type for Property Type cdni-capabilities](#name-defining-information-resour){.section-name .selfRef} {#name-defining-information-resour}

The entity property type \"cdni-capabilities\" allows defining
resource-specific entity properties. When resource-specific entity
properties are defined with entity property type \"cdni-capabilities\",
the defining information resource for a \"cdni-capabilities\" property
[MUST]{.bcp14} be a CDNI Advertisement resource provided by the ALTO
server. The media type of the defining information resource for a
\"cdni-capabilities\" property is
therefore:[¶](#section-6.2.1-1){.pilcrow}

application/alto-cdni+json[¶](#section-6.2.1-2){.pilcrow}
:::
:::

::: {#intended-semantics-of-property-type-cdni-capabilities}
::: {#section-6.2.2 .section}
#### [6.2.2.](#section-6.2.2){.section-number .selfRef} [Intended Semantics of Property Type cdni-capabilities](#name-intended-semantics-of-prope){.section-name .selfRef} {#name-intended-semantics-of-prope}

The purpose of a \"cdni-capabilities\" property for an entity is to
indicate all the CDNI capabilities that a corresponding CDNI
Advertisement resource provides for the footprint represented by this
entity. Thus, the value of a \"cdni-capabilities\" property
[MUST]{.bcp14} be a JSON array. Each element in a \"cdni-capabilities\"
property [MUST]{.bcp14} be a JSON object in the format of CDNICapability
(see [Section 5.3](#filteredcdnifciinputs){.xref}). The value of a
\"cdni-capabilities\" property for an \"ipv4\", \"ipv6\", \"asn\",
\"countrycode\", or \"altopid\" entity [MUST]{.bcp14} include all the
CDNICapability objects satisfying the following conditions: (1) they are
provided by the defining CDNI Advertisement resource, and (2) the
represented footprint object of this entity is in their footprint
restrictions.[¶](#section-6.2.2-1){.pilcrow}
:::
:::
:::
:::

::: {#examples-2}
::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [Examples](#name-examples-4){.section-name .selfRef} {#name-examples-4}

The following examples use the same IRD example given by [Section
3.7.1](#IRDexample){.xref}.[¶](#section-6.3-1){.pilcrow}

::: {#property-map}
::: {#section-6.3.1 .section}
#### [6.3.1.](#section-6.3.1){.section-number .selfRef} [Property Map](#name-property-map){.section-name .selfRef} {#name-property-map}

This example shows a full property map in which entities are footprints
and entities\' property is
\"cdni-capabilities\".[¶](#section-6.3.1-1){.pilcrow}

::: {#section-6.3.1-2 .alignLeft .art-text .artwork}
     GET /propmap/full/cdnifci HTTP/1.1
     Host: alto.example.com
     Accept: application/alto-propmap+json,application/alto-error+json

     HTTP/1.1 200 OK
     Content-Length: 1522
     Content-Type: application/alto-propmap+json

     {
       "property-map": {
         "meta": {
           "dependent-vtags": [
             { "resource-id": "my-default-cdnifci",
               "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf62"}
           ]
         },
         "countrycode:us": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.DeliveryProtocol",
               "capability-value": {
                 "delivery-protocols": ["http/1.1"]}}]
         },
         "ipv4:192.0.2.0/24": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.DeliveryProtocol",
               "capability-value": {
                 "delivery-protocols": ["http/1.1"]}}]
         },
         "ipv4:198.51.100.0/24": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.DeliveryProtocol",
               "capability-value": {
                 "delivery-protocols": ["https/1.1", "http/1.1"]}}]
         },
         "ipv4:203.0.113.0/24": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.AcquisitionProtocol",
               "capability-value": {
                 "acquisition-protocols": ["http/1.1"]}}]
         },
         "ipv6:2001:db8::/32": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.DeliveryProtocol",
               "capability-value": {
                 "delivery-protocols": ["http/1.1"]}}]
         },
         "asn:as64496": {
           "my-default-cdnifci.cdni-capabilities": [
             { "capability-type": "FCI.DeliveryProtocol",
               "capability-value": {
                 "delivery-protocols": ["https/1.1", "http/1.1"]}}]
         }
       }
     }

[¶](#section-6.3.1-2){.pilcrow}
:::
:::
:::

::: {#filtered-property-map}
::: {#section-6.3.2 .section}
#### [6.3.2.](#section-6.3.2){.section-number .selfRef} [Filtered Property Map](#name-filtered-property-map){.section-name .selfRef} {#name-filtered-property-map}

This example uses the filtered property Map Service to get \"pid\" and
\"cdni-capabilities\" properties for two footprints
\"ipv4:192.0.2.0/24\" and
\"ipv6:2001:db8::/32\".[¶](#section-6.3.2-1){.pilcrow}

::: {#section-6.3.2-2 .alignLeft .art-text .artwork}
       POST /propmap/lookup/cdnifci-pid HTTP/1.1
       Host: alto.example.com
       Content-Type: application/alto-propmapparams+json
       Accept: application/alto-propmap+json,application/alto-error+json
       Content-Length: 181

       {
         "entities": [
           "ipv4:192.0.2.0/24",
           "ipv6:2001:db8::/32"
         ],
         "properties": [ "my-default-cdnifci.cdni-capabilities",
                         "my-default-networkmap.pid" ]
       }

     HTTP/1.1 200 OK
     Content-Length: 796
     Content-Type: application/alto-propmap+json

     {
       "property-map": {
         "meta": {
           "dependent-vtags": [
              {"resource-id": "my-default-cdnifci",
                "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf62"},
              {"resource-id": "my-default-networkmap",
                "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf63"}
           ]
         },
         "ipv4:192.0.2.0/24": {
           "my-default-cdnifci.cdni-capabilities": [
             {"capability-type": "FCI.DeliveryProtocol",
              "capability-value": {"delivery-protocols": ["http/1.1"]}}],
           "my-default-networkmap.pid": "pid1"
         },
         "ipv6:2001:db8::/32": {
           "my-default-cdnifci.cdni-capabilities": [
             {"capability-type": "FCI.DeliveryProtocol",
              "capability-value": {"delivery-protocols": ["http/1.1"]}}],
           "my-default-networkmap.pid": "pid3"
         }
       }
     }

[¶](#section-6.3.2-2){.pilcrow}
:::
:::
:::

::: {#incremental-updates-3}
::: {#section-6.3.3 .section}
#### [6.3.3.](#section-6.3.3){.section-number .selfRef} [Incremental Updates](#name-incremental-updates-4){.section-name .selfRef} {#name-incremental-updates-4}

In this example, the ALTO client is interested in updates for the
properties \"cdni-capabilities\" and \"pid\" of two footprints
\"ipv4:192.0.2.0/24\" and
\"countrycode:fr\".[¶](#section-6.3.3-1){.pilcrow}

::: {#section-6.3.3-2 .alignLeft .art-text .artwork}
      POST /updates/properties HTTP/1.1
      Host: alto.example.com
      Accept: text/event-stream,application/alto-error+json
      Content-Type: application/alto-updatestreamparams+json
      Content-Length: 339

      {
        "add": {
          "fci-propmap-stream": {
            "resource-id": "filtered-cdnifci-property-map",
            "input": {
              "properties": [ "my-default-cdnifci.cdni-capabilities",
                              "my-default-networkmap.pid" ],
              "entities": [ "ipv4:192.0.2.0/24",
                            "ipv6:2001:db8::/32" ]
            }
          }
        }
      }

      HTTP/1.1 200 OK
      Connection: keep-alive
      Content-Type: text/event-stream

      event: application/alto-updatestreamcontrol+json
      data: {"control-uri":
      data: "https://alto.example.com/updates/streams/1414213562373"}

      event: application/alto-cdni+json,fci-propmap-stream
      data: { ... filtered property map ... }

      event: application/merge-patch+json,fci-propmap-stream
      data: {
      data:   "property-map": {
      data:     "meta": {
      data:       "dependent-vtags": [
      data:         { "resource-id": "my-default-cdnifci",
      data:           "tag": "2beeac8ee23c3dd1e98a73fd30df80ece9fa5627"},
      data:         { "resource-id": "my-default-networkmap",
      data:           "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf63"}
      data:       ]
      data:     },
      data:     "ipv4:192.0.2.0/24": {
      data:       "my-default-cdnifci.cdni-capabilities": [
      data:         { "capability-type": "FCI.DeliveryProtocol",
      data:           "capability-value": {
      data:             "delivery-protocols": ["http/1.1", "https/1.1"]}}]
      data:     }
      data:   }
      data: }

      event: application/json-patch+json,fci-propmap-stream
      data: [
      data:   { "op": "replace",
      data:     "path": "/meta/dependent-vtags/0/tag",
      data:     "value": "61b23185a50dc7b334577507e8f00ff8c3b409e4"
      data:   },
      data:   { "op": "replace",
      data:     "path":
      data:     "/property-map/countrycode:fr/my-default-networkmap.pid",
      data:     "value": "pid5"
      data:   }
      data: ]

[¶](#section-6.3.3-2){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#iana}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document defines two new media types:
\"application/alto-cdni+json\", as described in [Section
7.1](#iana-cdni){.xref}, and \"application/cdnifilter+json\", as
described in [Section 7.2](#iana-cdnifilter){.xref}. It also defines a
new CDNI Metadata Footprint Type ([Section
7.3](#iana-footprint-type){.xref}), two new ALTO entity domain types
([Section 7.4](#iana-entity-domain-type){.xref}), and a new ALTO entity
property type ([Section
7.5](#iana-entity-prop-type){.xref}).[¶](#section-7-1){.pilcrow}

::: {#iana-cdni}
::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [application/alto-cdni+json Media Type](#name-application-alto-cdnijson-m){.section-name .selfRef} {#name-application-alto-cdnijson-m}

[]{.break}

Type name:

:   application[¶](#section-7.1-1.2.1){.pilcrow}

:   

Subtype name:

:   alto-cdni+json[¶](#section-7.1-1.4.1){.pilcrow}

:   

Required parameters:

:   N/A[¶](#section-7.1-1.6.1){.pilcrow}

:   

Optional parameters:

:   N/A[¶](#section-7.1-1.8.1){.pilcrow}

:   

Encoding considerations:

:   Encoding considerations are identical to those specified for the
    \"application/json\" media type. See
    \[[RFC8259](#RFC8259){.xref}\].[¶](#section-7.1-1.10.1){.pilcrow}

:   

Security considerations:

:   Security considerations related to the generation and consumption of
    ALTO Protocol messages are discussed in [Section
    15](https://www.rfc-editor.org/rfc/rfc7285#section-15){.relref} of
    \[[RFC7285](#RFC7285){.xref}\].[¶](#section-7.1-1.12.1){.pilcrow}

:   

Interoperability considerations:

:   N/A[¶](#section-7.1-1.14.1){.pilcrow}

:   

Published specification:

:   [Section 3](#cdnifci){.xref} of RFC
    9241[¶](#section-7.1-1.16.1){.pilcrow}

:   

Applications that use this media type:

:   ALTO servers and ALTO clients \[[RFC7285](#RFC7285){.xref}\] either
    stand alone or are embedded within other applications that provide
    CDNI interfaces for uCDNs or
    dCDNs.[¶](#section-7.1-1.18.1){.pilcrow}

:   

Fragment identifier considerations:

:   N/A[¶](#section-7.1-1.20.1){.pilcrow}

:   

Additional information:
:   []{.break}

    Magic number(s):

    :   N/A[¶](#section-7.1-1.22.1.2.1){.pilcrow}

    :   

    File extension(s):

    :   N/A[¶](#section-7.1-1.22.1.4.1){.pilcrow}

    :   

    Macintosh file type code(s):

    :   N/A[¶](#section-7.1-1.22.1.6.1){.pilcrow}

    :   
:   

Person & email address to contact for further information:

:   See Authors\' Addresses section.[¶](#section-7.1-1.24.1){.pilcrow}

:   

Intended usage:

:   COMMON[¶](#section-7.1-1.26.1){.pilcrow}

:   

Restrictions on usage:

:   N/A[¶](#section-7.1-1.28.1){.pilcrow}

:   

Author:

:   See Authors\' Addresses section.[¶](#section-7.1-1.30.1){.pilcrow}

:   

Change controller:

:   Internet Engineering Task Force
    (iesg\@ietf.org)[¶](#section-7.1-1.32.1){.pilcrow}

:   
:::
:::

::: {#iana-cdnifilter}
::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [application/alto-cdnifilter+json Media Type](#name-application-alto-cdnifilter){.section-name .selfRef} {#name-application-alto-cdnifilter}

[]{.break}

Type name:

:   application[¶](#section-7.2-1.2.1){.pilcrow}

:   

Subtype name:

:   alto-cdnifilter+json[¶](#section-7.2-1.4.1){.pilcrow}

:   

Required parameters:

:   N/A[¶](#section-7.2-1.6.1){.pilcrow}

:   

Optional parameters:

:   N/A[¶](#section-7.2-1.8.1){.pilcrow}

:   

Encoding considerations:

:   Encoding considerations are identical to those specified for the
    \"application/json\" media type. See
    \[[RFC8259](#RFC8259){.xref}\].[¶](#section-7.2-1.10.1){.pilcrow}

:   

Security considerations:

:   Security considerations related to the generation and consumption of
    ALTO Protocol messages are discussed in [Section
    15](https://www.rfc-editor.org/rfc/rfc7285#section-15){.relref} of
    \[[RFC7285](#RFC7285){.xref}\].[¶](#section-7.2-1.12.1){.pilcrow}

:   

Interoperability considerations:

:   N/A[¶](#section-7.2-1.14.1){.pilcrow}

:   

Published specification:

:   [Section 5](#filteredcdnifci){.xref} of RFC
    9241[¶](#section-7.2-1.16.1){.pilcrow}

:   

Applications that use this media type:

:   ALTO servers and ALTO clients \[[RFC7285](#RFC7285){.xref}\] either
    stand alone or are embedded within other applications that provide
    CDNI interfaces for uCDNs or dCDNs and supports CDNI
    capability-based filtering.[¶](#section-7.2-1.18.1){.pilcrow}

:   

Fragment identifier considerations:

:   N/A[¶](#section-7.2-1.20.1){.pilcrow}

:   

Additional information:
:   []{.break}

    Magic number(s):

    :   N/A[¶](#section-7.2-1.22.1.2.1){.pilcrow}

    :   

    File extension(s):

    :   N/A[¶](#section-7.2-1.22.1.4.1){.pilcrow}

    :   

    Macintosh file type code(s):

    :   N/A[¶](#section-7.2-1.22.1.6.1){.pilcrow}

    :   
:   

Person & email address to contact for further information:

:   See Authors\' Addresses section.[¶](#section-7.2-1.24.1){.pilcrow}

:   

Intended usage:

:   COMMON[¶](#section-7.2-1.26.1){.pilcrow}

:   

Restrictions on usage:

:   N/A[¶](#section-7.2-1.28.1){.pilcrow}

:   

Author:

:   See Authors\' Addresses section.[¶](#section-7.2-1.30.1){.pilcrow}

:   

Change controller:

:   Internet Engineering Task Force
    (iesg\@ietf.org)[¶](#section-7.2-1.32.1){.pilcrow}

:   
:::
:::

::: {#iana-footprint-type}
::: {#section-7.3 .section}
### [7.3.](#section-7.3){.section-number .selfRef} [CDNI Metadata Footprint Types Registry](#name-cdni-metadata-footprint-typ){.section-name .selfRef} {#name-cdni-metadata-footprint-typ}

This document updates the \"CDNI Metadata Footprint Types\" registry
created by [Section
7.2](https://www.rfc-editor.org/rfc/rfc8006#section-7.2){.relref} of
\[[RFC8006](#RFC8006){.xref}\]. A new footprint type, which is listed in
[Table 1](#tbl_footprint-type){.xref}, has been
registered.[¶](#section-7.3-1){.pilcrow}

[]{#name-cdni-metadata-footprint-type}

::: {#tbl_footprint-type}
  Footprint Type   Description           Reference
  ---------------- --------------------- --------------------------------------------------
  altopid          A list of PID names   RFC 9241, [Section 4](#cdnifcinetworkmap){.xref}

  : [Table 1](#table-1){.selfRef}: [CDNI Metadata Footprint
  Type](#name-cdni-metadata-footprint-type){.selfRef}
:::
:::
:::

::: {#iana-entity-domain-type}
::: {#section-7.4 .section}
### [7.4.](#section-7.4){.section-number .selfRef} [ALTO Entity Domain Types Registry](#name-alto-entity-domain-types-re){.section-name .selfRef} {#name-alto-entity-domain-types-re}

This document updates the \"ALTO Entity Domain Types\" registry created
by [Section
11.2](https://www.rfc-editor.org/rfc/rfc9240#section-11.2){.relref} of
\[[RFC9240](#RFC9240){.xref}\]. Two new entity domain types, which are
listed in [Table 2](#tbl_entity-domain){.xref}, have been
registered.[¶](#section-7.4-1){.pilcrow}

[]{#name-additional-alto-entity-doma}

::: {#tbl_entity-domain}
  Identifier    Entity Identifier Encoding                                       Hierarchy and Inheritance   Media Type of Defining Resource   Mapping to ALTO Address Type
  ------------- ---------------------------------------------------------------- --------------------------- --------------------------------- ------------------------------
  asn           See RFC 9241, [Section 6.1.1.2](#asn-entity-id){.xref}           None                        None                              false
  countrycode   See RFC 9241, [Section 6.1.2.2](#countrycode-entity-id){.xref}   None                        None                              false

  : [Table 2](#table-2){.selfRef}: [Additional ALTO Entity Domain
  Types](#name-additional-alto-entity-doma){.selfRef}
:::
:::
:::

::: {#iana-entity-prop-type}
::: {#section-7.5 .section}
### [7.5.](#section-7.5){.section-number .selfRef} [ALTO Entity Property Types Registry](#name-alto-entity-property-types-){.section-name .selfRef} {#name-alto-entity-property-types-}

This document updates the \"ALTO Entity Property Types\" registry
created by [Section
11.3](https://www.rfc-editor.org/rfc/rfc9240#section-11.3){.relref} of
\[[RFC9240](#RFC9240){.xref}\]. A new entity property type, which is
listed in [Table 3](#tbl_prop-type-register){.xref}, has been
registered.[¶](#section-7.5-1){.pilcrow}

[]{#name-additional-alto-entity-prop}

::: {#tbl_prop-type-register}
  Identifier          Intended Semantics                                            Media Type of Defining Resource
  ------------------- ------------------------------------------------------------- ---------------------------------
  cdni-capabilities   See RFC 9241, [Section 6.2](#capabilitytoproperties){.xref}   application/alto-cdni+json

  : [Table 3](#table-3){.selfRef}: [Additional ALTO Entity Property
  Type](#name-additional-alto-entity-prop){.selfRef}
:::
:::
:::
:::
:::

::: {#security}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

As an extension of the base ALTO Protocol
\[[RFC7285](#RFC7285){.xref}\], this document fits into the architecture
of the base protocol, and hence Security Considerations of the base
protocol ([Section
15](https://www.rfc-editor.org/rfc/rfc7285#section-15){.relref} of
\[[RFC7285](#RFC7285){.xref}\]) fully apply when this extension is
provided by an ALTO server.[¶](#section-8-1){.pilcrow}

In the context of CDNI Advertisement, the following security risk
scenarios should be considered:[¶](#section-8-2){.pilcrow}

-   [Authenticity and integrity of ALTO information: an attacker may
    disguise itself as an ALTO server for a dCDN (e.g., by starting a
    on-path attack) and provide false capabilities and footprints to a
    uCDN using the CDNI Advertisement Service. Such false information
    may lead a uCDN to (1) select an incorrect dCDN to serve user
    requests or (2) skip uCDNs in good conditions. To address this risk,
    protection strategies in [Section
    15.1.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.1.2){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] can be
    applied.[¶](#section-8-3.1){.pilcrow}]{#section-8-3.1}
-   [Potential undesirable guidance from authenticated ALTO information:
    a dCDN can provide a uCDN with limited capabilities and smaller
    footprint coverage so that the dCDN can avoid transferring traffic
    for a uCDN that they should have to transfer. To reduce this risk,
    the protection strategies in [Section
    15.2.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.2.2){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] can be
    considered.[¶](#section-8-3.2){.pilcrow}]{#section-8-3.2}
-   [Confidentiality and privacy of ALTO information: footprint
    properties integrated with ALTO property maps may expose network
    location identifiers (e.g., IP addresses or fine-grained PIDs). To
    address this risk, the protection strategy for risk types (1)
    and (3) as described in [Section
    15.3](https://www.rfc-editor.org/rfc/rfc7285#section-15.3){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] can be
    considered.[¶](#section-8-3.3){.pilcrow}]{#section-8-3.3}
-   [For availability of ALTO services, an attacker may conduct
    service-degradation attacks using services defined in this document
    to disable ALTO services of a network. It may request potentially
    large, full CDNI Advertisement resources from an ALTO server in a
    dCDN continuously in order to consume the bandwidth resources of
    that ALTO server. It may also query filtered property Map Services
    with many smaller individual footprints in order to consume the
    computation resources of the ALTO server. To mitigate these risks,
    the protection strategies in [Section
    15.5.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.5.2){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] can be
    applied.[¶](#section-8-3.4){.pilcrow}]{#section-8-3.4}

Although protection strategies as described in [Section
15](https://www.rfc-editor.org/rfc/rfc7285#section-15){.relref} of
\[[RFC7285](#RFC7285){.xref}\] should be applied to address
aforementioned security and privacy considerations, two special cases
need to be included as follows:[¶](#section-8-4){.pilcrow}

-   ::: {#section-8-5.1}
    As required by [Section
    7](https://www.rfc-editor.org/rfc/rfc8008#section-7){.relref} of
    \[[RFC8008](#RFC8008){.xref}\],[¶](#section-8-5.1.1){.pilcrow}

    > All protocols that implement these capabilities and footprint
    > advertisement objects are [REQUIRED]{.bcp14} to provide integrity
    > and authentication services.[¶](#section-8-5.1.2){.pilcrow}

    Therefore, the uCDN (ALTO Client) [MUST]{.bcp14} be authenticated to
    the dCDN (ALTO Server). And the dCDN (ALTO Server) [MUST]{.bcp14}
    support HTTP Digest Authentication \[[RFC7616](#RFC7616){.xref}\]
    and [MAY]{.bcp14} also support TLS mutual authentication
    \[[RFC8446](#RFC8446){.xref}\]. The authentication method will need
    to be negotiated out of band and is out of scope for this document,
    as is the approach for provisioning and managing these
    credentials.[¶](#section-8-5.1.3){.pilcrow}
    :::

-   ::: {#section-8-5.2}
    One specific information leakage risk introduced by this document
    cannot be addressed by these strategies. In particular, if a dCDN A
    signs agreements with multiple uCDNs without any isolation, dCDN A
    may disclose extra information of one uCDN to another one. In that
    case, one uCDN may redirect requests that should not have to be
    served by dCDN A to dCDN A.[¶](#section-8-5.2.1){.pilcrow}

    To reduce the risk, a dCDN [SHOULD]{.bcp14} isolate full and/or
    filtered CDNI Advertisement resources for different uCDNs. It could
    consider generating URIs of different full and/or filtered CDNI
    Advertisement resources by hashing its company ID, a uCDN\'s company
    ID as well as their agreements. A dCDN [SHOULD]{.bcp14} avoid
    exposing all full and/or filtered CDNI Advertisement resources in
    one of its IRDs.[¶](#section-8-5.2.2){.pilcrow}
    :::
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[ISO3166-1\]
:   [International Organization for Standardization]{.refAuthor},
    [\"Codes for the representation of names of countries and their
    subdivisions \-- Part 1: Country codes\"]{.refTitle}, [ISO
    3166-1:2020]{.seriesInfo}, August 2020.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC6793\]
:   [Vohra, Q.]{.refAuthor} and [E. Chen]{.refAuthor}, [\"BGP Support
    for Four-Octet Autonomous System (AS) Number Space\"]{.refTitle},
    [RFC 6793]{.seriesInfo}, [DOI 10.17487/RFC6793]{.seriesInfo},
    December 2012, \<<https://www.rfc-editor.org/info/rfc6793>\>.
:   

\[RFC7285\]
:   [Alimi, R., Ed.]{.refAuthor}, [Penno, R., Ed.]{.refAuthor}, [Yang,
    Y., Ed.]{.refAuthor}, [Kiesel, S.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Roome, W.]{.refAuthor},
    [Shalunov, S.]{.refAuthor}, and [R. Woundy]{.refAuthor},
    [\"Application-Layer Traffic Optimization (ALTO)
    Protocol\"]{.refTitle}, [RFC 7285]{.seriesInfo}, [DOI
    10.17487/RFC7285]{.seriesInfo}, September 2014,
    \<<https://www.rfc-editor.org/info/rfc7285>\>.
:   

\[RFC7493\]
:   [Bray, T., Ed.]{.refAuthor}, [\"The I-JSON Message
    Format\"]{.refTitle}, [RFC 7493]{.seriesInfo}, [DOI
    10.17487/RFC7493]{.seriesInfo}, March 2015,
    \<<https://www.rfc-editor.org/info/rfc7493>\>.
:   

\[RFC7616\]
:   [Shekh-Yusef, R., Ed.]{.refAuthor}, [Ahrens, D.]{.refAuthor}, and
    [S. Bremer]{.refAuthor}, [\"HTTP Digest Access
    Authentication\"]{.refTitle}, [RFC 7616]{.seriesInfo}, [DOI
    10.17487/RFC7616]{.seriesInfo}, September 2015,
    \<<https://www.rfc-editor.org/info/rfc7616>\>.
:   

\[RFC8006\]
:   [Niven-Jenkins, B.]{.refAuthor}, [Murray, R.]{.refAuthor},
    [Caulfield, M.]{.refAuthor}, and [K. Ma]{.refAuthor}, [\"Content
    Delivery Network Interconnection (CDNI) Metadata\"]{.refTitle}, [RFC
    8006]{.seriesInfo}, [DOI 10.17487/RFC8006]{.seriesInfo}, December
    2016, \<<https://www.rfc-editor.org/info/rfc8006>\>.
:   

\[RFC8008\]
:   [Seedorf, J.]{.refAuthor}, [Peterson, J.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [van Brandenburg, R.]{.refAuthor}, and
    [K. Ma]{.refAuthor}, [\"Content Delivery Network Interconnection
    (CDNI) Request Routing: Footprint and Capabilities
    Semantics\"]{.refTitle}, [RFC 8008]{.seriesInfo}, [DOI
    10.17487/RFC8008]{.seriesInfo}, December 2016,
    \<<https://www.rfc-editor.org/info/rfc8008>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8259\]
:   [Bray, T., Ed.]{.refAuthor}, [\"The JavaScript Object Notation
    (JSON) Data Interchange Format\"]{.refTitle}, [STD 90]{.seriesInfo},
    [RFC 8259]{.seriesInfo}, [DOI 10.17487/RFC8259]{.seriesInfo},
    December 2017, \<<https://www.rfc-editor.org/info/rfc8259>\>.
:   

\[RFC8446\]
:   [Rescorla, E.]{.refAuthor}, [\"The Transport Layer Security (TLS)
    Protocol Version 1.3\"]{.refTitle}, [RFC 8446]{.seriesInfo}, [DOI
    10.17487/RFC8446]{.seriesInfo}, August 2018,
    \<<https://www.rfc-editor.org/info/rfc8446>\>.
:   

\[RFC8895\]
:   [Roome, W.]{.refAuthor} and [Y. Yang]{.refAuthor},
    [\"Application-Layer Traffic Optimization (ALTO) Incremental Updates
    Using Server-Sent Events (SSE)\"]{.refTitle}, [RFC
    8895]{.seriesInfo}, [DOI 10.17487/RFC8895]{.seriesInfo}, November
    2020, \<<https://www.rfc-editor.org/info/rfc8895>\>.
:   

\[RFC9240\]
:   [Roome, W.]{.refAuthor}, [Randriamasy, S.]{.refAuthor},
    [Yang, Y.]{.refAuthor}, [Zhang, J.]{.refAuthor}, and [K.
    Gao]{.refAuthor}, [\"An Extension for Application-Layer Traffic
    Optimization (ALTO): Entity Property Maps\"]{.refTitle}, [RFC
    9240]{.seriesInfo}, [DOI 10.17487/RFC9240]{.seriesInfo}, July 2022,
    \<<https://www.rfc-editor.org/info/rfc9240>\>.
:   
:::

::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[ALTO-PATH-VECTOR\]
:   [Gao, K.]{.refAuthor}, [Lee, Y.]{.refAuthor},
    [Randriamasy, S.]{.refAuthor}, [Yang, Y. R.]{.refAuthor}, and [J. J.
    Zhang]{.refAuthor}, [\"An ALTO Extension: Path Vector\"]{.refTitle},
    [Work in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-alto-path-vector-25]{.seriesInfo}, 20 March 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-alto-path-vector-25>\>.
:   

\[RFC5693\]
:   [Seedorf, J.]{.refAuthor} and [E. Burger]{.refAuthor},
    [\"Application-Layer Traffic Optimization (ALTO) Problem
    Statement\"]{.refTitle}, [RFC 5693]{.seriesInfo}, [DOI
    10.17487/RFC5693]{.seriesInfo}, October 2009,
    \<<https://www.rfc-editor.org/info/rfc5693>\>.
:   

\[RFC6707\]
:   [Niven-Jenkins, B.]{.refAuthor}, [Le Faucheur, F.]{.refAuthor}, and
    [N. Bitar]{.refAuthor}, [\"Content Distribution Network
    Interconnection (CDNI) Problem Statement\"]{.refTitle}, [RFC
    6707]{.seriesInfo}, [DOI 10.17487/RFC6707]{.seriesInfo}, September
    2012, \<<https://www.rfc-editor.org/info/rfc6707>\>.
:   

\[RFC7971\]
:   [Stiemerling, M.]{.refAuthor}, [Kiesel, S.]{.refAuthor},
    [Scharf, M.]{.refAuthor}, [Seidel, H.]{.refAuthor}, and [S.
    Previdi]{.refAuthor}, [\"Application-Layer Traffic Optimization
    (ALTO) Deployment Considerations\"]{.refTitle}, [RFC
    7971]{.seriesInfo}, [DOI 10.17487/RFC7971]{.seriesInfo}, October
    2016, \<<https://www.rfc-editor.org/info/rfc7971>\>.
:   

\[RFC7975\]
:   [Niven-Jenkins, B., Ed.]{.refAuthor} and [R. van Brandenburg,
    Ed.]{.refAuthor}, [\"Request Routing Redirection Interface for
    Content Delivery Network (CDN) Interconnection\"]{.refTitle}, [RFC
    7975]{.seriesInfo}, [DOI 10.17487/RFC7975]{.seriesInfo}, October
    2016, \<<https://www.rfc-editor.org/info/rfc7975>\>.
:   
:::
:::

::: {#ack}
::: {#appendix-A .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

The authors thank [Matt Caulfield]{.contact-name}, [Danny Alex Lachos
Perez]{.contact-name}, [Daryl Malas]{.contact-name}, and [Sanjay
Mishra]{.contact-name} for their timely reviews and invaluable comments.
Big thanks also to the ALTO WG Chairs ([Qin Wu]{.contact-name} and
[Vijay Gurbani]{.contact-name}), all the directorate reviewers, and the
IESG reviewers ([Martin Duke]{.contact-name}, [Erik
Kline]{.contact-name}, [Martin Vigoureux]{.contact-name}, [Murray
Kucherawy]{.contact-name}, [Roman Danyliw]{.contact-name}, [Zaheduzzaman
Sarker]{.contact-name}, [Éric Vyncke]{.contact-name}, and [Francesca
Palombini]{.contact-name}), for their thorough reviews, discussions,
guidance, and shepherding, which further improve this
document.[¶](#appendix-A-1){.pilcrow}

[Jan Seedorf]{.contact-name} has been partially supported by the
GreenICN project (GreenICN: Architecture and Applications of Green
Information Centric Networking), a research project supported jointly by
the European Commission under its 7th Framework Program (contract no.
608518) and the National Institute of Information and Communications
Technology (NICT) in Japan (contract no. 167). The views and conclusions
contained herein are those of the authors and should not be interpreted
as necessarily representing the official policies or endorsements,
either expressed or implied, of the GreenICN project, the European
Commission, or NICT.[¶](#appendix-A-2){.pilcrow}

This document has also been supported by the Coordination Support Action
entitled \'Supporting European Experts Presence in International
Standardisation Activities in ICT\'
([StandICT.eu](https://www.standict.eu/)) funded by the European
Commission under the Horizon 2020 Programme with Grant Agreement no.
780439. The views and conclusions contained herein are those of the
authors and should not be interpreted as necessarily representing the
official policies or endorsements, either expressed or implied, of the
European Commission.[¶](#appendix-A-3){.pilcrow}
:::
:::

::: {#contributors}
::: {#appendix-B .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

::: {.left dir="auto"}
[Xiao Shawn Lin]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei]{.org}
:::

::: {.left dir="auto"}
[2222 Newjinqiao Rd]{.street-address}
:::

::: {.left dir="auto"}
[Shanghai]{.locality}
:::

::: {.left dir="auto"}
[200125]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: tel
Phone: [+86-15316812351](tel:+86-15316812351){.tel}
:::

::: email
Email: <x.shawn.lin@gmail.com>
:::
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Jan Seedorf]{.fn .nameRole}
:::

::: {.left dir="auto"}
[HFT Stuttgart - Univ. of Applied Sciences]{.org}
:::

::: {.left dir="auto"}
[Schellingstrasse 24]{.street-address}
:::

::: {.left dir="auto"}
[70174]{.postal-code} [Stuttgart]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: tel
Phone: [+49-0711-8926-2801](tel:+49-0711-8926-2801){.tel}
:::

::: email
Email: <jan.seedorf@hft-stuttgart.de>
:::

::: {.left dir="auto"}
[Y. Richard Yang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Yale University]{.org}
:::

::: {.left dir="auto"}
[51 Prospect Street]{.street-address}
:::

::: {.left dir="auto"}
[New Haven]{.locality}, [CT]{.region} [06511]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: tel
Phone: [+1-203-432-6400](tel:+1-203-432-6400){.tel}
:::

::: email
Email: <yry@cs.yale.edu>
:::

::: url
URI: <http://www.cs.yale.edu/~yry/>
:::

::: {.left dir="auto"}
[Kevin J. Ma]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Ericsson]{.org}
:::

::: {.left dir="auto"}
[43 Nagog Park]{.street-address}
:::

::: {.left dir="auto"}
[Acton]{.locality}, [MA]{.region} [01720]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: tel
Phone: [+1-978-844-5100](tel:+1-978-844-5100){.tel}
:::

::: email
Email: <kevin.j.ma.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Jon Peterson]{.fn .nameRole}
:::

::: {.left dir="auto"}
[NeuStar]{.org}
:::

::: {.left dir="auto"}
[1800 Sutter St., Suite 570]{.street-address}
:::

::: {.left dir="auto"}
[Concord]{.locality}, [CA]{.region} [94520]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <jon.peterson@neustar.biz>
:::

::: {.left dir="auto"}
[Jingxuan Jensen Zhang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Tongji University]{.org}
:::

::: {.left dir="auto"}
[4800 Cao\'an Hwy]{.street-address}
:::

::: {.left dir="auto"}
[Shanghai]{.locality}
:::

::: {.left dir="auto"}
[201804]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <jingxuan.zhang@tongji.edu.cn>
:::
:::
:::
