  RFC 9252        SRv6-Based BGP Overlay Services   July 2022
  --------------- --------------------------------- -----------
  Dawra, et al.   Standards Track                   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9252](https://www.rfc-editor.org/rfc/rfc9252){.eref}

Category:
:   Standards Track

Published:
:   July 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    G. Dawra, [Ed.]{.editor}
    :::

    ::: org
    LinkedIn
    :::
    :::

    ::: author
    ::: author-name
    K. Talaulikar, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems
    :::
    :::

    ::: author
    ::: author-name
    R. Raszuk
    :::

    ::: org
    NTT Network Innovations
    :::
    :::

    ::: author
    ::: author-name
    B. Decraene
    :::

    ::: org
    Orange
    :::
    :::

    ::: author
    ::: author-name
    S. Zhuang
    :::

    ::: org
    Huawei Technologies
    :::
    :::

    ::: author
    ::: author-name
    J. Rabadan
    :::

    ::: org
    Nokia
    :::
    :::
:::

# RFC 9252 {#rfcnum}

# BGP Overlay Services Based on Segment Routing over IPv6 (SRv6) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document defines procedures and messages for SRv6-based BGP
services, including Layer 3 Virtual Private Network (L3VPN), Ethernet
VPN (EVPN), and Internet services. It builds on \"BGP/MPLS IP Virtual
Private Networks (VPNs)\" (RFC 4364) and \"BGP MPLS-Based Ethernet VPN\"
(RFC 7432).[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9252>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [SRv6 Services
    TLVs](#name-srv6-services-tlvs){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [SRv6 Service
    Sub-TLVs](#name-srv6-service-sub-tlvs){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [SRv6 SID Information
        Sub-TLV](#name-srv6-sid-information-sub-tl){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [SRv6 Service Data
        Sub-Sub-TLVs](#name-srv6-service-data-sub-sub-t){.xref}

        -   ::: {#section-toc.1-1.3.2.2.2.1}
            [3.2.1](#section-3.2.1){.xref}.  [SRv6 SID Structure
            Sub-Sub-TLV](#name-srv6-sid-structure-sub-sub-){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Encoding SRv6 SID
    Information](#name-encoding-srv6-sid-informati){.xref}
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [BGP-Based L3 Service over
    SRv6](#name-bgp-based-l3-service-over-s){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [IPv4 VPN over SRv6
        Core](#name-ipv4-vpn-over-srv6-core){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [IPv6 VPN over SRv6
        Core](#name-ipv6-vpn-over-srv6-core){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Global IPv4 over SRv6
        Core](#name-global-ipv4-over-srv6-core){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [Global IPv6 over SRv6
        Core](#name-global-ipv6-over-srv6-core){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [BGP-Based Ethernet VPN (EVPN) over
    SRv6](#name-bgp-based-ethernet-vpn-evpn){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Ethernet Auto-Discovery Route over
        SRv6 Core](#name-ethernet-auto-discovery-rou){.xref}

        -   ::: {#section-toc.1-1.6.2.1.2.1}
            [6.1.1](#section-6.1.1){.xref}.  [Ethernet A-D per ES
            Route](#name-ethernet-a-d-per-es-route){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.1.2.2}
            [6.1.2](#section-6.1.2){.xref}.  [Ethernet A-D per EVI
            Route](#name-ethernet-a-d-per-evi-route){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [MAC/IP Advertisement Route over
        SRv6 Core](#name-mac-ip-advertisement-route-){.xref}

        -   ::: {#section-toc.1-1.6.2.2.2.1}
            [6.2.1](#section-6.2.1){.xref}.  [MAC/IP Advertisement Route
            with MAC Only](#name-mac-ip-advertisement-route-w){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.2}
            [6.2.2](#section-6.2.2){.xref}.  [MAC/IP Advertisement Route
            with MAC+IP](#name-mac-ip-advertisement-route-wi){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [Inclusive Multicast Ethernet Tag
        Route over SRv6 Core](#name-inclusive-multicast-etherne){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Ethernet Segment Route over SRv6
        Core](#name-ethernet-segment-route-over){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.5}
        [6.5](#section-6.5){.xref}.  [IP Prefix Route over SRv6
        Core](#name-ip-prefix-route-over-srv6-c){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.6}
        [6.6](#section-6.6){.xref}.  [EVPN Multicast Routes (Route Types
        6, 7, and 8) over SRv6
        Core](#name-evpn-multicast-routes-route){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Error
    Handling](#name-error-handling){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [BGP Prefix-SID TLV Types
        Registry](#name-bgp-prefix-sid-tlv-types-re){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [SRv6 Service Sub-TLV Types
        Registry](#name-srv6-service-sub-tlv-types-){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [SRv6 Service Data Sub-Sub-TLV
        Types Registry](#name-srv6-service-data-sub-sub-tlv){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [8.4](#section-8.4){.xref}.  [BGP SRv6 Service SID Flags
        Registry](#name-bgp-srv6-service-sid-flags-){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.5}
        [8.5](#section-8.5){.xref}.  [SAFI Values
        Registry](#name-safi-values-registry){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Considerations Related to BGP
        Sessions](#name-considerations-related-to-b){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Considerations Related to BGP
        Services](#name-considerations-related-to-bg){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.3}
        [9.3](#section-9.3){.xref}.  [Considerations Related to SR over
        IPv6 Data Plane](#name-considerations-related-to-s){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-A){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-B){.xref}[Contributors](#name-contributors){.xref}
    :::

-   ::: {#section-toc.1-1.13}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#INTRO}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

SRv6 refers to Segment Routing instantiated on the IPv6 data plane
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-1-1){.pilcrow}

BGP is used to advertise the reachability of prefixes of a particular
service from an egress Provider Edge (PE) to ingress PE
nodes.[¶](#section-1-2){.pilcrow}

SRv6-based BGP services refer to the Layer 3 (L3) and Layer 2 (L2)
overlay services with BGP as the control plane and SRv6 as the data
plane. This document defines procedures and messages for SRv6-based BGP
services, including L3VPN, EVPN, and Internet services. It builds on
\"BGP/MPLS IP Virtual Private Networks (VPNs)\"
\[[RFC4364](#RFC4364){.xref}\] and \"BGP MPLS-Based Ethernet VPN\"
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-1-3){.pilcrow}

SRv6 SID refers to an SRv6 Segment Identifier, as defined in
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-1-4){.pilcrow}

SRv6 Service SID refers to an SRv6 SID associated with one of the
service-specific SRv6 Endpoint Behaviors on the advertising PE router,
such as (but not limited to) End.DT (look up in the Virtual Routing and
Forwarding (VRF) table) or End.DX (cross-connect to a next hop)
behaviors in the case of L3VPN service, as defined in
\[[RFC8986](#RFC8986){.xref}\]. This document describes how existing BGP
messages between PEs may carry SRv6 Service SIDs to interconnect PEs and
form VPNs.[¶](#section-1-5){.pilcrow}

To provide SRv6 service with best-effort connectivity, the egress PE
signals an SRv6 Service SID with the BGP overlay service route. The
ingress PE encapsulates the payload in an outer IPv6 header where the
destination address is the SRv6 Service SID provided by the egress PE.
The underlay between the PEs only needs to support plain IPv6 forwarding
\[[RFC8200](#RFC8200){.xref}\].[¶](#section-1-6){.pilcrow}

To provide SRv6 service in conjunction with an underlay Service Level
Agreement (SLA) from the ingress PE to the egress PE, the egress PE
colors the overlay service route with a Color Extended Community
\[[RFC9012](#RFC9012){.xref}\] for steering flows for those routes, as
specified in [Section
8](https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-22#section-8){.relref}
of
\[[SEGMENT-ROUTING-POLICY](#I-D.ietf-spring-segment-routing-policy){.xref}\].
The ingress PE encapsulates the payload packet in an outer IPv6 header
with the SR Policy segment list associated with the related SLA along
with the SRv6 Service SID associated with the route using the Segment
Routing Header (SRH) \[[RFC8754](#RFC8754){.xref}\]. The underlay nodes
whose SRv6 SIDs are part of the SRH segment list [MUST]{.bcp14} support
the SRv6 data plane.[¶](#section-1-7){.pilcrow}

::: {#REQ}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.1-1){.pilcrow}
:::
:::
:::
:::

::: {#SIDTLV}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [SRv6 Services TLVs](#name-srv6-services-tlvs){.section-name .selfRef} {#name-srv6-services-tlvs}

This document extends the use of the BGP Prefix-SID attribute
\[[RFC8669](#RFC8669){.xref}\] to carry SRv6 SIDs and their associated
information with the BGP address families that are listed further in
this section.[¶](#section-2-1){.pilcrow}

The SRv6 Service TLVs are defined as two new TLVs of the BGP Prefix-SID
attribute to achieve signaling of SRv6 SIDs for L3 and L2
services.[¶](#section-2-2){.pilcrow}

[]{.break}

SRv6 L3 Service TLV:
:   This TLV encodes Service SID information for SRv6-based L3 services.
    It corresponds to the equivalent functionality provided by an MPLS
    label when received with a Layer 3 service route, as defined in
    \[[RFC4364](#RFC4364){.xref}\], \[[RFC4659](#RFC4659){.xref}\],
    \[[RFC8950](#RFC8950){.xref}\], and \[[RFC9136](#RFC9136){.xref}\].
    Some SRv6 Endpoint Behaviors that may be encoded are, but not
    limited to, End.DX4, End.DT4, End.DX6, End.DT6, and
    End.DT46.[¶](#section-2-3.2){.pilcrow}
:   

SRv6 L2 Service TLV:
:   This TLV encodes Service SID information for SRv6-based L2 services.
    It corresponds to the equivalent functionality provided by an MPLS
    label for Ethernet VPN (EVPN) Route Types for Layer 2 services, as
    defined in \[[RFC7432](#RFC7432){.xref}\]. Some SRv6 Endpoint
    Behaviors that may be encoded are, but not limited to, End.DX2,
    End.DX2V, End.DT2U, and End.DT2M.[¶](#section-2-3.4){.pilcrow}
:   

When an egress PE is enabled for BGP Services over the SRv6 data plane,
it signals one or more SRv6 Service SIDs enclosed in an SRv6 Service
TLV(s) within the BGP Prefix-SID attribute attached to Multiprotocol BGP
(MP-BGP) Network Layer Reachability Information (NLRI) defined in
\[[RFC4760](#RFC4760){.xref}\], \[[RFC4659](#RFC4659){.xref}\],
\[[RFC8950](#RFC8950){.xref}\], \[[RFC7432](#RFC7432){.xref}\],
\[[RFC4364](#RFC4364){.xref}\], and \[[RFC9136](#RFC9136){.xref}\],
where applicable, as described in Sections [5](#L3BGP){.xref} and
[6](#EVPNBGP){.xref}.[¶](#section-2-4){.pilcrow}

The support for BGP Multicast VPN (MVPN) Services
\[[RFC6513](#RFC6513){.xref}\] with SRv6 is outside the scope of this
document.[¶](#section-2-5){.pilcrow}

The following depicts the SRv6 Service TLVs encoded in the BGP
Prefix-SID attribute:[¶](#section-2-6){.pilcrow}

[]{#name-srv6-service-tlvs}

::: {#SRV6SVCTLV}
::: {#section-2-7.1 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   TLV Type    |         TLV Length            |   RESERVED    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   SRv6 Service Sub-TLVs                                      //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 1](#figure-1){.selfRef}: [SRv6 Service
TLVs](#name-srv6-service-tlvs){.selfRef}
:::

[]{.break}

TLV Type (1 octet):
:   This field is assigned a value from IANA\'s \"BGP Prefix-SID TLV
    Types\" subregistry. It is set to 5 for the SRv6 L3 Service TLV. It
    is set to 6 for the SRv6 L2 Service
    TLV.[¶](#section-2-8.2){.pilcrow}
:   

TLV Length (2 octets):
:   This field specifies the total length, in octets, of the TLV
    Value.[¶](#section-2-8.4){.pilcrow}
:   

RESERVED (1 octet):
:   This field is reserved; it [MUST]{.bcp14} be set to 0 by the sender
    and ignored by the receiver.[¶](#section-2-8.6){.pilcrow}
:   

SRv6 Service Sub-TLVs (variable):
:   This field contains SRv6 service-related information and is encoded
    as an unordered list of Sub-TLVs whose format is described
    below.[¶](#section-2-8.8){.pilcrow}
:   

A BGP speaker receiving a route containing the BGP Prefix-SID attribute
with one or more SRv6 Service TLVs observes the following rules when
advertising the received route to other
peers:[¶](#section-2-9){.pilcrow}

-   [If the BGP next hop is unchanged during the advertisement, the SRv6
    Service TLVs, including any unrecognized Types of Sub-TLV and
    Sub-Sub-TLV, [SHOULD]{.bcp14} be propagated further. In addition,
    all Reserved fields in the TLV, Sub-TLV, or Sub-Sub-TLV
    [MUST]{.bcp14} be propagated
    unchanged.[¶](#section-2-10.1){.pilcrow}]{#section-2-10.1}
-   [If the BGP next hop is changed, the TLVs, Sub-TLVs, and
    Sub-Sub-TLVs [SHOULD]{.bcp14} be updated with the locally allocated
    SRv6 SID information. Any received Sub-TLVs and Sub-Sub-TLVs that
    are unrecognized [MUST]{.bcp14} be
    removed.[¶](#section-2-10.2){.pilcrow}]{#section-2-10.2}
:::
:::

::: {#SRv6-TLV}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [SRv6 Service Sub-TLVs](#name-srv6-service-sub-tlvs){.section-name .selfRef} {#name-srv6-service-sub-tlvs}

The format of a single SRv6 Service Sub-TLV is depicted
below:[¶](#section-3-1){.pilcrow}

[]{#name-srv6-service-sub-tlvs-2}

::: {#SRV6SVCSTLV}
::: {#section-3-2.1 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | SRv6 Service  |    SRv6 Service               | SRv6 Service //
    | Sub-TLV       |    Sub-TLV                    | Sub-TLV      //
    | Type          |    Length                     | Value        //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 2](#figure-2){.selfRef}: [SRv6 Service
Sub-TLVs](#name-srv6-service-sub-tlvs-2){.selfRef}
:::

[]{.break}

SRv6 Service Sub-TLV Type (1 octet):
:   This field identifies the type of SRv6 service information. It is
    assigned a value from IANA\'s \"SRv6 Service Sub-TLV Types\"
    subregistry.[¶](#section-3-3.2){.pilcrow}
:   

SRv6 Service Sub-TLV Length (2 octets):
:   This field specifies the total length, in octets, of the Sub-TLV
    Value field.[¶](#section-3-3.4){.pilcrow}
:   

SRv6 Service Sub-TLV Value (variable):
:   This field contains data specific to the Sub-TLV Type. In addition
    to fixed-length data, it contains other properties of the SRv6
    service encoded as a set of SRv6 Service Data Sub-Sub-TLVs whose
    format is described in [Section 3.2](#SID-SERVICE-DATA-TLV){.xref}
    below.[¶](#section-3-3.6){.pilcrow}
:   

::: {#SRv6-SID-INFO}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [SRv6 SID Information Sub-TLV](#name-srv6-sid-information-sub-tl){.section-name .selfRef} {#name-srv6-sid-information-sub-tl}

SRv6 Service Sub-TLV Type 1 is assigned for the SRv6 SID Information
Sub-TLV. This Sub-TLV contains a single SRv6 SID along with its
properties. Its encoding is depicted below:[¶](#section-3.1-1){.pilcrow}

[]{#name-srv6-sid-information-sub-tlv}

::: {#SRV6SIDINFO}
::: {#section-3.1-2.1 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | SRv6 Service  |    SRv6 Service               |               |
    | Sub-TLV       |    Sub-TLV                    |               |
    | Type=1        |    Length                     |  RESERVED1    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  SRv6 SID Value (16 octets)                                  //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Svc SID Flags |   SRv6 Endpoint Behavior      |   RESERVED2   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  SRv6 Service Data Sub-Sub-TLVs                              //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 3](#figure-3){.selfRef}: [SRv6 SID Information
Sub-TLV](#name-srv6-sid-information-sub-tlv){.selfRef}
:::

[]{.break}

SRv6 Service Sub-TLV Type (1 octet):
:   This field is set to 1 to represent the SRv6 SID Information
    Sub-TLV.[¶](#section-3.1-3.2){.pilcrow}
:   

SRv6 Service Sub-TLV Length (2 octets):
:   This field contains the total length, in octets, of the Value field
    of the Sub-TLV.[¶](#section-3.1-3.4){.pilcrow}
:   

RESERVED1 (1 octet):
:   This field [MUST]{.bcp14} be set to 0 by the sender and ignored by
    the receiver.[¶](#section-3.1-3.6){.pilcrow}
:   

SRv6 SID Value (16 octets):
:   This field encodes an SRv6 SID, as defined in
    \[[RFC8986](#RFC8986){.xref}\].[¶](#section-3.1-3.8){.pilcrow}
:   

SRv6 Service SID Flags (1 octet):
:   This field encodes SRv6 Service SID Flags \-- none are currently
    defined. It [MUST]{.bcp14} be set to 0 by the sender and any unknown
    flags [MUST]{.bcp14} be ignored by the
    receiver.[¶](#section-3.1-3.10){.pilcrow}
:   

SRv6 Endpoint Behavior (2 octets):
:   This field encodes the SRv6 Endpoint Behavior codepoint value that
    is associated with the SRv6 SID. The codepoints used are from
    IANA\'s \"SRv6 Endpoint Behaviors\" subregistry under the \"Segment
    Routing\" registry that was introduced by
    \[[RFC8986](#RFC8986){.xref}\]. The opaque SRv6 Endpoint Behavior
    (i.e., value 0xFFFF) [MAY]{.bcp14} be used when the advertising
    router wishes to abstract the actual behavior of its locally
    instantiated SRv6 SID.[¶](#section-3.1-3.12){.pilcrow}
:   

RESERVED2 (1 octet):
:   This field [MUST]{.bcp14} be set to 0 by the sender and ignored by
    the receiver.[¶](#section-3.1-3.14){.pilcrow}
:   

SRv6 Service Data Sub-Sub-TLV Value (variable):
:   This field is used to advertise properties of the SRv6 SID. It is
    encoded as a set of SRv6 Service Data
    Sub-Sub-TLVs.[¶](#section-3.1-3.16){.pilcrow}
:   

The choice of SRv6 Endpoint Behavior of the SRv6 SID is entirely up to
the originator of the advertisement. While Sections [5](#L3BGP){.xref}
and [6](#EVPNBGP){.xref} list the SRv6 Endpoint Behaviors that are
normally expected to be used by the specific route advertisements, the
reception of other SRv6 Endpoint Behaviors (e.g., new behaviors that may
be introduced in the future) is not considered an error. An unrecognized
SRv6 Endpoint Behavior [MUST NOT]{.bcp14} be considered invalid by the
receiver, except for behaviors that involve the use of arguments (refer
to [Section 3.2.1](#SRv6-SID-STRUCTURE){.xref} for details on argument
validation). An implementation [MAY]{.bcp14} log a rate-limited warning
when it receives an unexpected behavior.[¶](#section-3.1-4){.pilcrow}

When multiple SRv6 SID Information Sub-TLVs are present, the ingress PE
[SHOULD]{.bcp14} use the SRv6 SID from the first instance of the
Sub-TLV. An implementation [MAY]{.bcp14} provide a local policy to
override this selection.[¶](#section-3.1-5){.pilcrow}
:::
:::

::: {#SID-SERVICE-DATA-TLV}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [SRv6 Service Data Sub-Sub-TLVs](#name-srv6-service-data-sub-sub-t){.section-name .selfRef} {#name-srv6-service-data-sub-sub-t}

The format of the SRv6 Service Data Sub-Sub-TLV is depicted
below:[¶](#section-3.2-1){.pilcrow}

[]{#name-srv6-service-data-sub-sub-tl}

::: {#SRV6SVCDATASTLV}
::: {#section-3.2-2.1 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Service Data |  Sub-Sub-TLV Length               |Sub-Sub TLV //
    | Sub-Sub-TLV  |                                   |  Value     //
    | Type         |                                   |            //
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 4](#figure-4){.selfRef}: [SRv6 Service Data
Sub-Sub-TLVs](#name-srv6-service-data-sub-sub-tl){.selfRef}
:::

[]{.break}

SRv6 Service Data Sub-Sub-TLV Type (1 octet):
:   This field identifies the type of Sub-Sub-TLV. It is assigned a
    value from IANA\'s \"SRv6 Service Data Sub-Sub-TLV Types\"
    subregistry.[¶](#section-3.2-3.2){.pilcrow}
:   

SRv6 Service Data Sub-Sub-TLV Length (2 octets):
:   This field specifies the total length, in octets, of the Sub-Sub-TLV
    Value field.[¶](#section-3.2-3.4){.pilcrow}
:   

SRv6 Service Data Sub-Sub-TLV Value (variable):
:   This field contains data specific to the Sub-Sub-TLV
    Type.[¶](#section-3.2-3.6){.pilcrow}
:   

::: {#SRv6-SID-STRUCTURE}
::: {#section-3.2.1 .section}
#### [3.2.1.](#section-3.2.1){.section-number .selfRef} [SRv6 SID Structure Sub-Sub-TLV](#name-srv6-sid-structure-sub-sub-){.section-name .selfRef} {#name-srv6-sid-structure-sub-sub-}

SRv6 Service Data Sub-Sub-TLV Type 1 is assigned for the SRv6 SID
Structure Sub-Sub-TLV. The SRv6 SID Structure Sub-Sub-TLV is used to
advertise the lengths of the individual parts of the SRv6 SID, as
defined in \[[RFC8986](#RFC8986){.xref}\]. The terms Locator Block and
Locator Node correspond to the B and N parts, respectively, of the SRv6
Locator that is defined in [Section
3.1](https://www.rfc-editor.org/rfc/rfc8986#section-3.1){.relref} of
\[[RFC8986](#RFC8986){.xref}\]. It is carried as Sub-Sub-TLV in the SRv6
SID Information Sub-TLV.[¶](#section-3.2.1-1){.pilcrow}

[]{#name-srv6-sid-structure-sub-sub-t}

::: {#SRV6SIDSTRUCT}
::: {#section-3.2.1-2.1 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | SRv6 Service  |    SRv6 Service               | Locator Block |
    | Data Sub-Sub  |    Data Sub-Sub-TLV           | Length        |
    | -TLV Type=1   |    Length                     |               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Locator Node  | Function      | Argument      | Transposition |
    | Length        | Length        | Length        | Length        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Transposition |
    | Offset        |
    +-+-+-+-+-+-+-+-+
:::

[Figure 5](#figure-5){.selfRef}: [SRv6 SID Structure
Sub-Sub-TLV](#name-srv6-sid-structure-sub-sub-t){.selfRef}
:::

[]{.break}

SRv6 Service Data Sub-Sub-TLV Type (1 octet):
:   This field is set to 1 to represent the SRv6 SID Structure
    Sub-Sub-TLV.[¶](#section-3.2.1-3.2){.pilcrow}
:   

SRv6 Service Data Sub-Sub-TLV Length (2 octets):
:   This field contains a total length of 6
    octets.[¶](#section-3.2.1-3.4){.pilcrow}
:   

Locator Block Length (1 octet):
:   This field contains the length of the SRv6 SID Locator Block in
    bits.[¶](#section-3.2.1-3.6){.pilcrow}
:   

Locator Node Length (1 octet):
:   This field contains the length of the SRv6 SID Locator Node in
    bits.[¶](#section-3.2.1-3.8){.pilcrow}
:   

Function Length (1 octet):
:   This field contains the length of the SRv6 SID Function in
    bits.[¶](#section-3.2.1-3.10){.pilcrow}
:   

Argument Length (1 octet):
:   This field contains the length of the SRv6 SID Argument in
    bits.[¶](#section-3.2.1-3.12){.pilcrow}
:   

Transposition Length (1 octet):
:   This field is the size in bits for the part of the SID that has been
    transposed (or shifted) into an MPLS Label
    field.[¶](#section-3.2.1-3.14){.pilcrow}
:   

Transposition Offset (1 octet):
:   This field is the offset position in bits for the part of the SID
    that has been transposed (or shifted) into an MPLS Label
    field.[¶](#section-3.2.1-3.16){.pilcrow}
:   

[Section 4](#SIDENCODE){.xref} describes mechanisms for the signaling of
the SRv6 Service SID by transposing a variable part of the SRv6 SID
value and carrying this variable part in existing MPLS Label fields to
achieve more efficient packing of those service prefix NLRIs in BGP
update messages. The SRv6 SID Structure Sub-Sub-TLV contains appropriate
length fields when the SRv6 Service SID is signaled in split parts to
enable the receiver to put together the SID
accurately.[¶](#section-3.2.1-4){.pilcrow}

Transposition Offset indicates the bit position, and Transposition
Length indicates the number of bits that are being taken out of the SRv6
SID value and encoded in the MPLS Label field. The bits that have been
shifted out [MUST]{.bcp14} be set to 0 in the SID
value.[¶](#section-3.2.1-5){.pilcrow}

A Transposition Length of 0 indicates nothing is transposed and that the
entire SRv6 SID value is encoded in the SID Information Sub-TLV. In this
case, the Transposition Offset [MUST]{.bcp14} be set to
0.[¶](#section-3.2.1-6){.pilcrow}

The size of the MPLS Label field limits the bits transposed from the
SRv6 SID value into it. For example, the size of the MPLS Label field is
20 bits in \[[RFC4364](#RFC4364){.xref}\] and
\[[RFC8277](#RFC8277){.xref}\], and the size is 24 bits in
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-3.2.1-7){.pilcrow}

As defined in \[[RFC8986](#RFC8986){.xref}\], the sum of the Locator
Block Length (LBL), Locator Node Length (LNL), Function Length (FL), and
Argument Length (AL) fields [MUST]{.bcp14} be less than or equal to 128
and greater than the sum of Transposition Offset and Transposition
Length.[¶](#section-3.2.1-8){.pilcrow}

As an example, consider that the sum of the Locator Block and the
Locator Node parts is 64. For an SRv6 SID where the entire Function part
of size 16 bits is transposed, the transposition offset is set to 64 and
the transposition length is set to 16. While for an SRv6 SID for which
the FL is 24 bits and only the lower order 20 bits are transposed (e.g.,
due to the limit of the MPLS Label field size), the transposition offset
is set to 68 and the transposition length is set to
20.[¶](#section-3.2.1-9){.pilcrow}

BGP speakers that do not support this specification may misinterpret, on
the reception of an SRv6-based BGP service route update, the part of the
SRv6 SID encoded in an MPLS Label field(s) as MPLS label values for
MPLS-based services. Implementations supporting this specification
[MUST]{.bcp14} provide a mechanism to control the advertisement of
SRv6-based BGP service routes on a per-neighbor and per-service basis.
The details of deployment designs and implementation options are outside
the scope of this document.[¶](#section-3.2.1-10){.pilcrow}

Arguments may be generally applicable for SIDs of only specific SRv6
Endpoint Behaviors (e.g., End.DT2M); therefore, the AL [MUST]{.bcp14} be
set to 0 for SIDs where the Argument is not applicable. A receiver is
unable to validate the applicability of arguments for SRv6 Endpoint
Behaviors that are unknown to it and hence [MUST]{.bcp14} ignore SRv6
SIDs with arguments (indicated by a non-zero AL) with unknown SRv6
Endpoint Behaviors. For SIDs corresponding to an SRv6 Endpoint Behavior
that is known, a receiver [MUST]{.bcp14} validate that the consistency
of the AL with the specific SRv6 Endpoint Behavior
definition.[¶](#section-3.2.1-11){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#SIDENCODE}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Encoding SRv6 SID Information](#name-encoding-srv6-sid-informati){.section-name .selfRef} {#name-encoding-srv6-sid-informati}

The SRv6 Service SID(s) for a BGP service prefix is carried in the SRv6
Services TLVs of the BGP Prefix-SID
attribute.[¶](#section-4-1){.pilcrow}

For certain types of BGP Services, like L3VPN where a per-VRF SID
allocation is used (i.e., End.DT4 or End.DT6 behaviors), the same SID is
shared across multiple NLRIs, thus providing efficient packing. However,
for certain other types of BGP Services, like EVPN Virtual Private Wire
Service (VPWS) where a per-PW SID allocation is required (i.e., End.DX2
behavior), each NLRI would have its own unique SID, thereby resulting in
inefficient packing.[¶](#section-4-2){.pilcrow}

To achieve efficient packing, this document allows either 1) the
encoding of the SRv6 Service SID as a whole in the SRv6 Services TLVs or
2) the encoding of only the common part of the SRv6 SID (e.g., Locator)
in the SRv6 Services TLVs and the encoding of the variable (e.g.,
Function or Argument parts) in the existing label fields specific to
that service encoding. This later form of encoding is referred to as the
Transposition Scheme, where the SRv6 SID Structure Sub-Sub-TLV describes
the sizes of the parts of the SRv6 SID and also indicates the offset of
the variable part along with its length in the SRv6 SID value. The use
of the Transposition Scheme is [RECOMMENDED]{.bcp14} for the specific
service encodings that allow it, as described further in Sections
[5](#L3BGP){.xref} and [6](#EVPNBGP){.xref}.[¶](#section-4-3){.pilcrow}

As an example, for the EVPN VPWS service prefix described further in
[Section 6.1.2](#PEREVI){.xref}, the Function part of the SRv6 SID is
encoded in the MPLS Label field of the NLRI, and the SID value in the
SRv6 Services TLV carries only the Locator part with the SRv6 SID
Structure Sub-Sub-TLV. The SRv6 SID Structure Sub-Sub-TLV defines the
lengths of Locator Block, Locator Node, and Function parts (Arguments
are not applicable for the End.DX2 behavior). Transposition Offset
indicates the bit position, and Transposition Length indicates the
number of bits that are being taken out of the SID and put into the
label field.[¶](#section-4-4){.pilcrow}

In yet another example, for the EVPN Ethernet Auto-Discovery (A-D) per
Ethernet Segment (ES) route described further in [Section
6.1.1](#PERES){.xref}, only the Argument of the SID needs to be
signaled. This Argument part of the SRv6 SID [MAY]{.bcp14} be transposed
in the Ethernet Segment Identifier (ESI) Label field of the ESI Label
extended community, and the SID value in the SRv6 Services TLV is set to
0 along with the inclusion of the SRv6 SID Structure Sub-Sub-TLV. The
SRv6 SID Structure Sub-Sub-TLV defines the lengths of Locator Block,
Locator Node, Function, and Argument parts. The offset and length of the
Argument part SID value moved to the label field is set in transposition
offset and length of the SID Structure TLV. The receiving router is then
able to put together the entire SRv6 Service SID (e.g., for the End.DT2M
behavior), placing the label value received in the ESI Label field of
the Ethernet A-D per ES route into the correct transposition offset and
length in the SRv6 SID with the End.DT2M behavior received for an EVPN
Route Type 3 value.[¶](#section-4-5){.pilcrow}
:::
:::

::: {#L3BGP}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [BGP-Based L3 Service over SRv6](#name-bgp-based-l3-service-over-s){.section-name .selfRef} {#name-bgp-based-l3-service-over-s}

BGP egress nodes (egress PEs) advertise a set of reachable prefixes.
Standard BGP update propagation schemes \[[RFC4271](#RFC4271){.xref}\],
which may make use of route reflectors \[[RFC4456](#RFC4456){.xref}\],
are used to propagate these prefixes. BGP ingress nodes (ingress PEs)
receive these advertisements and may add the prefix to the RIB in an
appropriate VRF.[¶](#section-5-1){.pilcrow}

Egress PEs that support SRv6-based L3 services advertise overlay service
prefixes along with a Service SID enclosed in an SRv6 L3 Service TLV
within the BGP Prefix-SID attribute. This TLV serves two purposes \--
first, it indicates that the egress PE supports SRv6 overlay, and the
BGP ingress PE receiving this route [MUST]{.bcp14} perform IPv6
encapsulation and insert an SRH \[[RFC8754](#RFC8754){.xref}\] when
required; second, it indicates the value of the Service SID to be used
in the encapsulation.[¶](#section-5-2){.pilcrow}

Thus, the Service SID signaled only has local significance at the egress
PE, where it may be allocated or configured on a per-Customer-Edge (CE)
or per-VRF basis. In practice, the SID may encode a cross-connect to a
specific address family table (End.DT) or next hop / interface (End.DX),
as defined in \[[RFC8986](#RFC8986){.xref}\].[¶](#section-5-3){.pilcrow}

The SRv6 Service SID [SHOULD]{.bcp14} be routable (refer to [Section
3.3](https://www.rfc-editor.org/rfc/rfc8986#section-3.3){.relref} of
\[[RFC8986](#RFC8986){.xref}\]) within the Autonomous System (AS) of the
egress PE and serves the dual purpose of providing reachability between
ingress PE and egress PE while also encoding the SRv6 Endpoint
Behavior.[¶](#section-5-4){.pilcrow}

When steering for SRv6 services is based on shortest path forwarding
(e.g., best effort or IGP Flexible Algorithm
\[[IGP-FLEX-ALGO](#I-D.ietf-lsr-flex-algo){.xref}\]) to the egress PE,
the ingress PE encapsulates the IPv4 or IPv6 customer packet in an outer
IPv6 header (using H.Encaps or H.Encaps.Red flavors specified in
\[[RFC8986](#RFC8986){.xref}\]), where the destination address is the
SRv6 Service SID associated with the related BGP route update.
Therefore, the ingress PE [MUST]{.bcp14} perform a resolvability check
for the SRv6 Service SID before considering the received prefix for the
BGP best path computation. The resolvability is evaluated as per
\[[RFC4271](#RFC4271){.xref}\]. If the SRv6 SID is reachable via more
than one forwarding table, local policy is used to determine which table
to use. The result of an SRv6 Service SID resolvability (e.g., when
provided via IGP Flexible Algorithm) can be ignored if the ingress PE
has a local policy that allows an alternate steering mechanism to reach
the egress PE. The details of such steering mechanisms are outside the
scope of this document.[¶](#section-5-5){.pilcrow}

For service over SRv6 core, the egress PE sets the BGP next hop to one
of its IPv6 addresses. Such an address [MAY]{.bcp14} be covered by the
SRv6 Locator from which the SRv6 Service SID is allocated. The BGP next
hop is used for tracking the reachability of the egress PE based on
existing BGP procedures.[¶](#section-5-6){.pilcrow}

When the BGP route received at an ingress PE is colored with a Color
Extended Community and a valid SRv6 Policy is available, the steering
for service flows is performed as described in [Section
8](https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-22#section-8){.relref}
of
\[[SEGMENT-ROUTING-POLICY](#I-D.ietf-spring-segment-routing-policy){.xref}\].
When the ingress PE determines (with the help of the SRv6 SID Structure)
that the Service SID belongs to the same SRv6 Locator as the last SRv6
SID (of the egress PE) in the SR Policy segment list, it [MAY]{.bcp14}
exclude that last SRv6 SID when steering the service flow. For example,
the effective segment list of the SRv6 Policy associated with SID list
\<S1, S2, S3> would be \<S1, S2,
S3-Service-SID>.[¶](#section-5-7){.pilcrow}

::: {#L3BGPVPNv4}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [IPv4 VPN over SRv6 Core](#name-ipv4-vpn-over-srv6-core){.section-name .selfRef} {#name-ipv4-vpn-over-srv6-core}

The MP_REACH_NLRI over SRv6 core is encoded according to IPv4 VPN
unicast over IPv6 core defined in
\[[RFC8950](#RFC8950){.xref}\].[¶](#section-5.1-1){.pilcrow}

The label field of IPv4-VPN NLRI is encoded as specified in
\[[RFC8277](#RFC8277){.xref}\] with the 20-bit Label Value set to the
whole or a portion of the Function part of the SRv6 SID when the
Transposition Scheme of encoding ([Section 4](#SIDENCODE){.xref}) is
used; otherwise, it is set to Implicit NULL. When using the
Transposition Scheme, the Transposition Length [MUST]{.bcp14} be less
than or equal to 20 and less than or equal to the
FL.[¶](#section-5.1-2){.pilcrow}

The SRv6 Service SID is encoded as part of the SRv6 L3 Service TLV. The
SRv6 Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX4,
End.DT4, or End.DT46.[¶](#section-5.1-3){.pilcrow}
:::
:::

::: {#L3BGPVPNv6}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [IPv6 VPN over SRv6 Core](#name-ipv6-vpn-over-srv6-core){.section-name .selfRef} {#name-ipv6-vpn-over-srv6-core}

The MP_REACH_NLRI over SRv6 core is encoded according to IPv6 VPN over
IPv6 core, as defined in
\[[RFC4659](#RFC4659){.xref}\].[¶](#section-5.2-1){.pilcrow}

The label field of the IPv6-VPN NLRI is encoded as specified in
\[[RFC8277](#RFC8277){.xref}\] with the 20-bit Label Value set to the
whole or a portion of the Function part of the SRv6 SID when the
Transposition Scheme of encoding ([Section 4](#SIDENCODE){.xref}) is
used; otherwise, it is set to Implicit NULL. When using the
Transposition Scheme, the Transposition Length [MUST]{.bcp14} be less
than or equal to 20 and less than or equal to the
FL.[¶](#section-5.2-2){.pilcrow}

The SRv6 Service SID is encoded as part of the SRv6 L3 Service TLV. The
SRv6 Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX6,
End.DT6, or End.DT46.[¶](#section-5.2-3){.pilcrow}
:::
:::

::: {#L3BGPINTv4}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Global IPv4 over SRv6 Core](#name-global-ipv4-over-srv6-core){.section-name .selfRef} {#name-global-ipv4-over-srv6-core}

The MP_REACH_NLRI over SRv6 core is encoded according to IPv4 over IPv6
core, as defined in
\[[RFC8950](#RFC8950){.xref}\].[¶](#section-5.3-1){.pilcrow}

SRv6 Service SID is encoded as part of the SRv6 L3 Service TLV. The SRv6
Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX4, End.DT4, or
End.DT46.[¶](#section-5.3-2){.pilcrow}
:::
:::

::: {#L3BGPINTv6}
::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [Global IPv6 over SRv6 Core](#name-global-ipv6-over-srv6-core){.section-name .selfRef} {#name-global-ipv6-over-srv6-core}

The MP_REACH_NLRI over SRv6 core is encoded according to
\[[RFC2545](#RFC2545){.xref}\].[¶](#section-5.4-1){.pilcrow}

The SRv6 Service SID is encoded as part of the SRv6 L3 Service TLV. The
SRv6 Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX6,
End.DT6, or End.DT46.[¶](#section-5.4-2){.pilcrow}
:::
:::
:::
:::

::: {#EVPNBGP}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [BGP-Based Ethernet VPN (EVPN) over SRv6](#name-bgp-based-ethernet-vpn-evpn){.section-name .selfRef} {#name-bgp-based-ethernet-vpn-evpn}

\[[RFC7432](#RFC7432){.xref}\] provides an extendable method of building
an EVPN overlay. It primarily focuses on MPLS-based EVPNs, and
\[[RFC8365](#RFC8365){.xref}\] extends to IP-based EVPN overlays.
\[[RFC7432](#RFC7432){.xref}\] defines Route Types 1, 2, and 3, which
carry prefixes and MPLS Label fields; the Label fields have a specific
use for MPLS encapsulation of EVPN traffic. Route Type 5 carrying MPLS
label information (and thus encapsulation information) for an EVPN is
defined in \[[RFC9136](#RFC9136){.xref}\]. Route Types 6, 7, and 8 are
defined in \[[RFC9251](#RFC9251){.xref}\].[¶](#section-6-1){.pilcrow}

-   [Ethernet Auto-Discovery (A-D) route (Route Type
    1)[¶](#section-6-2.1){.pilcrow}]{#section-6-2.1}
-   [MAC/IP Advertisement route (Route Type
    2)[¶](#section-6-2.2){.pilcrow}]{#section-6-2.2}
-   [Inclusive Multicast Ethernet Tag route (Route Type
    3)[¶](#section-6-2.3){.pilcrow}]{#section-6-2.3}
-   [Ethernet Segment route (Route Type
    4)[¶](#section-6-2.4){.pilcrow}]{#section-6-2.4}
-   [IP Prefix route (Route Type
    5)[¶](#section-6-2.5){.pilcrow}]{#section-6-2.5}
-   [Selective Multicast Ethernet Tag route (Route Type
    6)[¶](#section-6-2.6){.pilcrow}]{#section-6-2.6}
-   [Multicast Membership Report Synch route (Route Type
    7)[¶](#section-6-2.7){.pilcrow}]{#section-6-2.7}
-   [Multicast Leave Synch route (Route Type
    8)[¶](#section-6-2.8){.pilcrow}]{#section-6-2.8}

The specifications for other EVPN Route Types are outside the scope of
this document.[¶](#section-6-3){.pilcrow}

To support SRv6-based EVPN overlays, one or more SRv6 Service SIDs are
advertised with Route Types 1, 2, 3, and 5. The SRv6 Service SID(s) per
Route Type is advertised in SRv6 L3/L2 Service TLVs within the BGP
Prefix-SID attribute. Signaling of the SRv6 Service SID(s) serves two
purposes \-- first, it indicates that the BGP egress device supports
SRv6 overlay, and the BGP ingress device receiving this route
[MUST]{.bcp14} perform IPv6 encapsulation and insert an SRH
\[[RFC8754](#RFC8754){.xref}\] when required; second, it indicates the
value of the Service SID(s) to be used in the
encapsulation.[¶](#section-6-4){.pilcrow}

The SRv6 Service SID [SHOULD]{.bcp14} be routable (refer to [Section
3.3](https://www.rfc-editor.org/rfc/rfc8986#section-3.3){.relref} of
\[[RFC8986](#RFC8986){.xref}\]) within the AS of the egress PE and
serves the dual purpose of providing reachability between the ingress PE
and egress PE while also encoding the SRv6 Endpoint
Behavior.[¶](#section-6-5){.pilcrow}

When steering for SRv6 services is based on shortest path forwarding
(e.g., best effort or IGP Flexible Algorithm
\[[IGP-FLEX-ALGO](#I-D.ietf-lsr-flex-algo){.xref}\]) to the egress PE,
the ingress PE encapsulates the customer Layer 2 Ethernet packet in an
outer IPv6 header (using H.Encaps.L2 or H.Encaps.L2.Red flavors
specified in \[[RFC8986](#RFC8986){.xref}\]) where the destination
address is the SRv6 Service SID associated with the related BGP route
update. Therefore, the ingress PE [MUST]{.bcp14} perform a resolvability
check for the SRv6 Service SID before considering the received prefix
for the BGP best path computation. The resolvability is evaluated as per
\[[RFC4271](#RFC4271){.xref}\]. If the SRv6 SID is reachable via more
than one forwarding table, local policy is used to determine which table
to use. The result of an SRv6 Service SID resolvability (e.g., when
provided via IGP Flexible Algorithm) can be ignored if the ingress PE
has a local policy that allows an alternate steering mechanism to reach
the egress PE. The details of such steering mechanisms are outside the
scope of this document.[¶](#section-6-6){.pilcrow}

For service over SRv6 core, the egress PE sets the BGP next hop to one
of its IPv6 addresses. Such an address [MAY]{.bcp14} be covered by the
SRv6 Locator from which the SRv6 Service SID is allocated. The BGP next
hop is used for tracking the reachability of the egress PE based on
existing BGP procedures.[¶](#section-6-7){.pilcrow}

When the BGP route received at an ingress PE is colored with a Color
Extended Community and a valid SRv6 Policy is available, the steering
for service flows is performed as described in [Section
8](https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-22#section-8){.relref}
of
\[[SEGMENT-ROUTING-POLICY](#I-D.ietf-spring-segment-routing-policy){.xref}\].
When the ingress PE determines (with the help of the SRv6 SID Structure)
that the Service SID belongs to the same SRv6 Locator as the last SRv6
SID (of the egress PE) in the SR Policy segment list, it [MAY]{.bcp14}
exclude that last SRv6 SID when steering the service flow. For example,
the effective segment list of the SRv6 Policy associated with SID list
\<S1, S2, S3> would be \<S1, S2,
S3-Service-SID>.[¶](#section-6-8){.pilcrow}

::: {#RT1}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Ethernet Auto-Discovery Route over SRv6 Core](#name-ethernet-auto-discovery-rou){.section-name .selfRef} {#name-ethernet-auto-discovery-rou}

Ethernet A-D routes are Route Type 1, as defined in
\[[RFC7432](#RFC7432){.xref}\], and may be used to achieve split-horizon
filtering, fast convergence, and aliasing. EVPN Route Type 1 is also
used in EVPN-VPWS as well as in EVPN-flexible cross-connect, mainly to
advertise point-to-point service IDs.[¶](#section-6.1-1){.pilcrow}

As a reminder, EVPN Route Type 1 is encoded as
follows:[¶](#section-6.1-2){.pilcrow}

[]{#name-evpn-route-type-1}

::: {#EVPNRT1}
::: {#section-6.1-3.1 .alignLeft .art-text .artwork}
                    +-----------------------------------------+
                    |  RD (8 octets)                          |
                    +-----------------------------------------+
                    |  Ethernet Segment Identifier (10 octets)|
                    +-----------------------------------------+
                    |  Ethernet Tag ID (4 octets)             |
                    +-----------------------------------------+
                    |  MPLS label (3 octets)                  |
                    +-----------------------------------------+
:::

[Figure 6](#figure-6){.selfRef}: [EVPN Route Type
1](#name-evpn-route-type-1){.selfRef}
:::

::: {#PERES}
::: {#section-6.1.1 .section}
#### [6.1.1.](#section-6.1.1){.section-number .selfRef} [Ethernet A-D per ES Route](#name-ethernet-a-d-per-es-route){.section-name .selfRef} {#name-ethernet-a-d-per-es-route}

Ethernet A-D per ES route NLRI encoding over SRv6 core is as per
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-6.1.1-1){.pilcrow}

The 24-bit ESI Label field of the ESI Label extended community carries
the whole or a portion of the Argument part of the SRv6 SID when the ESI
filtering approach is used along with the Transposition Scheme of
encoding ([Section 4](#SIDENCODE){.xref}); otherwise, it is set to
Implicit NULL in the higher-order 20 bits (i.e., as 0x000030). In either
case, the value is set in the 24 bits. When using the Transposition
Scheme, the Transposition Length [MUST]{.bcp14} be less than or equal to
24 and less than or equal to the AL.[¶](#section-6.1.1-2){.pilcrow}

A Service SID enclosed in an SRv6 L2 Service TLV within the BGP
Prefix-SID attribute is advertised along with the A-D route. The SRv6
Endpoint Behavior [SHOULD]{.bcp14} be End.DT2M. When the ESI filtering
approach is used, the Service SID is used to signal the Arg.FE2 SID
Argument for applicable End.DT2M behavior
\[[RFC8986](#RFC8986){.xref}\]. When the local-bias approach
\[[RFC8365](#RFC8365){.xref}\] is used, the Service SID [MAY]{.bcp14} be
of value 0.[¶](#section-6.1.1-3){.pilcrow}
:::
:::

::: {#PEREVI}
::: {#section-6.1.2 .section}
#### [6.1.2.](#section-6.1.2){.section-number .selfRef} [Ethernet A-D per EVI Route](#name-ethernet-a-d-per-evi-route){.section-name .selfRef} {#name-ethernet-a-d-per-evi-route}

Ethernet A-D per EVPN Instance (EVI) route NLRI encoding over SRv6 core
is similar to what is described in \[[RFC7432](#RFC7432){.xref}\] and
\[[RFC8214](#RFC8214){.xref}\] with the following
change:[¶](#section-6.1.2-1){.pilcrow}

[]{.break}

MPLS Label:
:   The 24-bit field carries the whole or a portion of the Function part
    of the SRv6 SID when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.1.2-2.2){.pilcrow}
:   

A Service SID enclosed in an SRv6 L2 Service TLV within the BGP
Prefix-SID attribute is advertised along with the A-D route. The SRv6
Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX2, End.DX2V,
or End.DT2U.[¶](#section-6.1.2-3){.pilcrow}
:::
:::
:::
:::

::: {#RT2}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [MAC/IP Advertisement Route over SRv6 Core](#name-mac-ip-advertisement-route-){.section-name .selfRef} {#name-mac-ip-advertisement-route-}

EVPN Route Type 2 is used to advertise unicast traffic Media Access
Control (MAC) + IP address reachability through MP-BGP to all other PEs
in a given EVPN instance.[¶](#section-6.2-1){.pilcrow}

As a reminder, EVPN Route Type 2 is encoded as
follows:[¶](#section-6.2-2){.pilcrow}

[]{#name-evpn-route-type-2}

::: {#EVPNRT2}
::: {#section-6.2-3.1 .alignLeft .art-text .artwork}
                    +-----------------------------------------+
                    |  RD (8 octets)                          |
                    +-----------------------------------------+
                    |  Ethernet Segment Identifier (10 octets)|
                    +-----------------------------------------+
                    |  Ethernet Tag ID (4 octets)             |
                    +-----------------------------------------+
                    |  MAC Address Length (1 octet)           |
                    +-----------------------------------------+
                    |  MAC Address (6 octets)                 |
                    +-----------------------------------------+
                    |  IP Address Length (1 octet)            |
                    +-----------------------------------------+
                    |  IP Address (0, 4, or 16 octets)        |
                    +-----------------------------------------+
                    |  MPLS Label1 (3 octets)                 |
                    +-----------------------------------------+
                    |  MPLS Label2 (0 or 3 octets)            |
                    +-----------------------------------------+
:::

[Figure 7](#figure-7){.selfRef}: [EVPN Route Type
2](#name-evpn-route-type-2){.selfRef}
:::

NLRI encoding over SRv6 core is similar to what is described in
\[[RFC7432](#RFC7432){.xref}\] with the following
changes:[¶](#section-6.2-4){.pilcrow}

[]{.break}

MPLS Label1:
:   This is associated with the SRv6 L2 Service TLV. This 24-bit field
    carries the whole or a portion of the Function part of the SRv6 SID
    when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.2-5.2){.pilcrow}
:   

MPLS Label2:
:   This is associated with the SRv6 L3 Service TLV. This 24-bit field
    carries the whole or a portion of the Function part of the SRv6 SID
    when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.2-5.4){.pilcrow}
:   

Service SIDs enclosed in the SRv6 L2 Service TLV and optionally in the
SRv6 L3 Service TLV within the BGP Prefix-SID attribute are advertised
along with the MAC/IP Advertisement route.[¶](#section-6.2-6){.pilcrow}

Described below are different types of Route Type 2
advertisements.[¶](#section-6.2-7){.pilcrow}

::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [MAC/IP Advertisement Route with MAC Only](#name-mac-ip-advertisement-route-w){.section-name .selfRef} {#name-mac-ip-advertisement-route-w}

[]{.break}

MPLS Label1:
:   This is associated with the SRv6 L2 Service TLV. This 24-bit field
    carries the whole or a portion of the Function part of the SRv6 SID
    when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.2.1-1.2){.pilcrow}
:   

A Service SID enclosed in an SRv6 L2 Service TLV within the BGP
Prefix-SID attribute is advertised along with the route. The SRv6
Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DX2 or
End.DT2U.[¶](#section-6.2.1-2){.pilcrow}
:::

::: {#section-6.2.2 .section}
#### [6.2.2.](#section-6.2.2){.section-number .selfRef} [MAC/IP Advertisement Route with MAC+IP](#name-mac-ip-advertisement-route-wi){.section-name .selfRef} {#name-mac-ip-advertisement-route-wi}

[]{.break}

MPLS Label1:
:   This is associated with the SRv6 L2 Service TLV. This 24-bit field
    carries the whole or a portion of the Function part of the SRv6 SID
    when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.2.2-1.2){.pilcrow}
:   

MPLS Label2:
:   This is associated with the SRv6 L3 Service TLV. This 24-bit field
    carries the whole or a portion of the Function part of the SRv6 SID
    when the Transposition Scheme of encoding ([Section
    4](#SIDENCODE){.xref}) is used; otherwise, it is set to Implicit
    NULL in the higher-order 20 bits (i.e., as 0x000030). In either
    case, the value is set in the 24 bits. When using the Transposition
    Scheme, the Transposition Length [MUST]{.bcp14} be less than or
    equal to 24 and less than or equal to the
    FL.[¶](#section-6.2.2-1.4){.pilcrow}
:   

An L2 Service SID enclosed in an SRv6 L2 Service TLV within the BGP
Prefix-SID attribute is advertised along with the route. In addition, an
L3 Service SID enclosed in an SRv6 L3 Service TLV within the BGP
Prefix-SID attribute [MAY]{.bcp14} also be advertised along with the
route. The SRv6 Endpoint Behavior [SHOULD]{.bcp14} be one of these: for
the L2 Service SID, End.DX2 or End.DT2U and for the L3 Service SID,
End.DT46, End.DT4, End.DT6, End.DX4, or
End.DX6.[¶](#section-6.2.2-2){.pilcrow}
:::
:::
:::

::: {#RT3}
::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [Inclusive Multicast Ethernet Tag Route over SRv6 Core](#name-inclusive-multicast-etherne){.section-name .selfRef} {#name-inclusive-multicast-etherne}

EVPN Route Type 3 is used to advertise multicast traffic reachability
information through MP-BGP to all other PEs in a given EVPN
instance.[¶](#section-6.3-1){.pilcrow}

As a reminder, EVPN Route Type 3 is encoded as
follows:[¶](#section-6.3-2){.pilcrow}

[]{#name-evpn-route-type-3}

::: {#EVPNRT3}
::: {#section-6.3-3.1 .alignLeft .art-text .artwork}
                   +---------------------------------------+
                   |  RD (8 octets)                        |
                   +---------------------------------------+
                   |  Ethernet Tag ID (4 octets)           |
                   +---------------------------------------+
                   |  IP Address Length (1 octet)          |
                   +---------------------------------------+
                   |  Originating Router's IP Address      |
                   |          (4 or 16 octets)             |
                   +---------------------------------------+
:::

[Figure 8](#figure-8){.selfRef}: [EVPN Route Type
3](#name-evpn-route-type-3){.selfRef}
:::

NLRI encoding over SRv6 core is similar to what is described in
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-6.3-4){.pilcrow}

The P-Multicast Service Interface (PMSI) Tunnel Attribute
\[[RFC6514](#RFC6514){.xref}\] is used to identify the Provider tunnel
(P-tunnel) used for sending Broadcast, Unknown Unicast, or Multicast
(BUM) traffic. The format of the PMSI Tunnel Attribute is encoded as
follows over SRv6 core:[¶](#section-6.3-5){.pilcrow}

[]{#name-pmsi-tunnel-attribute}

::: {#PMSITA}
::: {#section-6.3-6.1 .alignLeft .art-text .artwork}
                   +---------------------------------------+
                   |  Flag (1 octet)                       |
                   +---------------------------------------+
                   |  Tunnel Type (1 octet)                |
                   +---------------------------------------+
                   |  MPLS label (3 octets)                 |
                   +---------------------------------------+
                   |  Tunnel Identifier (variable)         |
                   +---------------------------------------+
:::

[Figure 9](#figure-9){.selfRef}: [PMSI Tunnel
Attribute](#name-pmsi-tunnel-attribute){.selfRef}
:::

[]{.break}

Flag:
:   This field has a value of 0, as defined per
    \[[RFC7432](#RFC7432){.xref}\].[¶](#section-6.3-7.2){.pilcrow}
:   

Tunnel Type:
:   This field is defined per
    \[[RFC6514](#RFC6514){.xref}\].[¶](#section-6.3-7.4){.pilcrow}
:   

MPLS label:
:   This 24-bit field carries the whole or a portion of the Function
    part of the SRv6 SID when ingress replication is used and the
    Transposition Scheme of encoding ([Section 4](#SIDENCODE){.xref}) is
    used; otherwise, it is set as defined in
    \[[RFC6514](#RFC6514){.xref}\]. When using the Transposition Scheme,
    the Transposition Length [MUST]{.bcp14} be less than or equal to 24
    and less than or equal to the FL.[¶](#section-6.3-7.6){.pilcrow}
:   

Tunnel Identifier:
:   This field is the IP address of egress
    PE.[¶](#section-6.3-7.8){.pilcrow}
:   

A Service SID enclosed in an SRv6 L2 Service TLV within the BGP
Prefix-SID attribute is advertised along with the route. The SRv6
Endpoint Behavior [SHOULD]{.bcp14} be
End.DT2M.[¶](#section-6.3-8){.pilcrow}

-   [When ESI-based filtering is used for multihoming or Ethernet Tree
    (E-Tree) procedures, the ESI Filtering Argument (the Arg.FE2
    notation introduced in \[[RFC8986](#RFC8986){.xref}\]) of the
    Service SID carried along with EVPN Route Type 1 [SHOULD]{.bcp14} be
    merged with the applicable End.DT2M SID of Route Type 3 advertised
    by the remote PE by doing a bitwise logical-OR operation to create a
    single SID on the ingress PE. Details of split-horizon, ESI-based
    filtering mechanisms for multihoming are described in
    \[[RFC7432](#RFC7432){.xref}\]. Details of filtering mechanisms for
    Leaf-originated BUM traffic in EVPN E-Tree services are provided in
    \[[RFC8317](#RFC8317){.xref}\].[¶](#section-6.3-9.1){.pilcrow}]{#section-6.3-9.1}
-   [When \"local-bias\" is used as the multihoming split-horizon
    method, the ESI Filtering Argument [SHOULD NOT]{.bcp14} be merged
    with the corresponding End.DT2M SID on the ingress PE. Details of
    the local-bias procedures are described in
    \[[RFC8365](#RFC8365){.xref}\].[¶](#section-6.3-9.2){.pilcrow}]{#section-6.3-9.2}

Usage of multicast trees as P-tunnels is outside the scope of this
document.[¶](#section-6.3-10){.pilcrow}
:::
:::

::: {#RT4}
::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Ethernet Segment Route over SRv6 Core](#name-ethernet-segment-route-over){.section-name .selfRef} {#name-ethernet-segment-route-over}

As a reminder, an Ethernet Segment route (i.e., EVPN Route Type 4) is
encoded as follows:[¶](#section-6.4-1){.pilcrow}

[]{#name-evpn-route-type-4}

::: {#EVPNRT4}
::: {#section-6.4-2.1 .alignLeft .art-text .artwork}
                   +---------------------------------------+
                   |  RD (8 octets)                        |
                   +---------------------------------------+
                   |  Ethernet Tag ID (4 octets)           |
                   +---------------------------------------+
                   |  IP Address Length (1 octet)          |
                   +---------------------------------------+
                   |  Originating Router's IP Address      |
                   |          (4 or 16 octets)             |
                   +---------------------------------------+
:::

[Figure 10](#figure-10){.selfRef}: [EVPN Route Type
4](#name-evpn-route-type-4){.selfRef}
:::

NLRI encoding over SRv6 core is similar to what is described in
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-6.4-3){.pilcrow}

SRv6 Service TLVs within the BGP Prefix-SID attribute are not advertised
along with this route. The processing of the route has not changed \--
it remains as described in
\[[RFC7432](#RFC7432){.xref}\].[¶](#section-6.4-4){.pilcrow}
:::
:::

::: {#RT5}
::: {#section-6.5 .section}
### [6.5.](#section-6.5){.section-number .selfRef} [IP Prefix Route over SRv6 Core](#name-ip-prefix-route-over-srv6-c){.section-name .selfRef} {#name-ip-prefix-route-over-srv6-c}

EVPN Route Type 5 is used to advertise IP address reachability through
MP-BGP to all other PEs in a given EVPN instance. The IP address may
include a host IP prefix or any specific
subnet.[¶](#section-6.5-1){.pilcrow}

As a reminder, EVPN Route Type 5 is encoded as
follows:[¶](#section-6.5-2){.pilcrow}

[]{#name-evpn-route-type-5}

::: {#EVPNRT5}
::: {#section-6.5-3.1 .alignLeft .art-text .artwork}
                   +-----------------------------------------+
                   |  RD (8 octets)                          |
                   +-----------------------------------------+
                   |  Ethernet Segment Identifier (10 octets)|
                   +-----------------------------------------+
                   |  Ethernet Tag ID (4 octets)             |
                   +-----------------------------------------+
                   |  IP Prefix Length (1 octet)             |
                   +-----------------------------------------+
                   |  IP Prefix (4 or 16 octets)             |
                   +-----------------------------------------+
                   |  GW IP Address (4 or 16 octets)         |
                   +-----------------------------------------+
                   |  MPLS Label (3 octets)                  |
                   +-----------------------------------------+
:::

[Figure 11](#figure-11){.selfRef}: [EVPN Route Type
5](#name-evpn-route-type-5){.selfRef}
:::

NLRI encoding over SRv6 core is similar to what is described in
\[[RFC9136](#RFC9136){.xref}\] with the following
change:[¶](#section-6.5-4){.pilcrow}

[]{.break}

MPLS Label:
:   This 24-bit field carries the whole or a portion of the Function
    part of the SRv6 SID when the Transposition Scheme of encoding
    ([Section 4](#SIDENCODE){.xref}) is used; otherwise, it is set to
    Implicit NULL in the higher-order 20 bits (i.e., as 0x000030). In
    either case, the value is set in the 24 bits. When using the
    Transposition Scheme, the Transposition Length [MUST]{.bcp14} be
    less than or equal to 24 and less than or equal to the
    FL.[¶](#section-6.5-5.2){.pilcrow}
:   

The SRv6 Service SID is encoded as part of the SRv6 L3 Service TLV. The
SRv6 Endpoint Behavior [SHOULD]{.bcp14} be one of these: End.DT4,
End.DT6, End.DT46, End.DX4, or End.DX6.[¶](#section-6.5-6){.pilcrow}
:::
:::

::: {#RT678}
::: {#section-6.6 .section}
### [6.6.](#section-6.6){.section-number .selfRef} [EVPN Multicast Routes (Route Types 6, 7, and 8) over SRv6 Core](#name-evpn-multicast-routes-route){.section-name .selfRef} {#name-evpn-multicast-routes-route}

These routes do not require the advertisement of SRv6 Service TLVs along
with them. Similar to EVPN Route Type 4, the BGP next hop is equal to
the IPv6 address of egress PE.[¶](#section-6.6-1){.pilcrow}
:::
:::
:::
:::

::: {#ERROR}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Error Handling](#name-error-handling){.section-name .selfRef} {#name-error-handling}

In case of any errors encountered while processing SRv6 Service TLVs,
the details of the error [SHOULD]{.bcp14} be logged for further
analysis.[¶](#section-7-1){.pilcrow}

If multiple instances of the SRv6 L3 Service TLV are encountered, all
but the first instance [MUST]{.bcp14} be
ignored.[¶](#section-7-2){.pilcrow}

If multiple instances of the SRv6 L2 Service TLV are encountered, all
but the first instance [MUST]{.bcp14} be
ignored.[¶](#section-7-3){.pilcrow}

An SRv6 Service TLV is considered malformed in the following
cases:[¶](#section-7-4){.pilcrow}

-   [The TLV Length is less than
    1.[¶](#section-7-5.1){.pilcrow}]{#section-7-5.1}
-   [The TLV Length is inconsistent with the length of the BGP
    Prefix-SID attribute.[¶](#section-7-5.2){.pilcrow}]{#section-7-5.2}
-   [At least one of the constituent Sub-TLVs is
    malformed.[¶](#section-7-5.3){.pilcrow}]{#section-7-5.3}

An SRv6 Service Sub-TLV is considered malformed in the following
case:[¶](#section-7-6){.pilcrow}

-   [The Sub-TLV Length is inconsistent with the length of the enclosing
    SRv6 Service TLV.[¶](#section-7-7.1){.pilcrow}]{#section-7-7.1}

An SRv6 SID Information Sub-TLV is considered malformed in the following
cases:[¶](#section-7-8){.pilcrow}

-   [The Sub-TLV Length is less than
    21.[¶](#section-7-9.1){.pilcrow}]{#section-7-9.1}
-   [The Sub-TLV Length is inconsistent with the length of the enclosing
    SRv6 Service TLV.[¶](#section-7-9.2){.pilcrow}]{#section-7-9.2}
-   [At least one of the constituent Sub-Sub-TLVs is
    malformed.[¶](#section-7-9.3){.pilcrow}]{#section-7-9.3}

An SRv6 Service Data Sub-Sub-TLV is considered malformed in the
following case:[¶](#section-7-10){.pilcrow}

-   [The Sub-Sub-TLV Length is inconsistent with the length of the
    enclosing SRv6 service
    Sub-TLV.[¶](#section-7-11.1){.pilcrow}]{#section-7-11.1}

Any TLV, Sub-TLV, or Sub-Sub-TLV is not considered malformed because its
Type is unrecognized.[¶](#section-7-12){.pilcrow}

Any TLV, Sub-TLV, or Sub-Sub-TLV is not considered malformed because of
failing any semantic validation of its Value
field.[¶](#section-7-13){.pilcrow}

The SRv6 overlay service requires the Service SID for forwarding. The
treat-as-withdraw action \[[RFC7606](#RFC7606){.xref}\] [MUST]{.bcp14}
be performed when at least one malformed SRv6 Service TLV is present in
the BGP Prefix-SID attribute.[¶](#section-7-14){.pilcrow}

The SRv6 SID value in the SRv6 SID Information Sub-TLV is invalid when
the SID Structure Sub-Sub-TLV transposition length is greater than the
number of bits of the label field or if any of the conditions for the
fields of the Sub-Sub-TLV, as specified in [Section
3.2.1](#SRv6-SID-STRUCTURE){.xref}, is not met. The transposition offset
and length [MUST]{.bcp14} be 0 when the Sub-Sub-TLV is advertised along
with routes where the Transposition Scheme is not applicable (e.g., for
global IPv6 service \[[RFC2545](#RFC2545){.xref}\] where there is no
label field). The path having any such Prefix-SID attribute without any
valid SRv6 SID information [MUST]{.bcp14} be considered ineligible
during the selection of the best path for the corresponding
prefix.[¶](#section-7-15){.pilcrow}
:::
:::

::: {#IANA}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [BGP Prefix-SID TLV Types Registry](#name-bgp-prefix-sid-tlv-types-re){.section-name .selfRef} {#name-bgp-prefix-sid-tlv-types-re}

This document introduces two new TLV Types of the BGP Prefix-SID
attribute. IANA has assigned Type values in the \"BGP Prefix-SID TLV
Types\" subregistry as follows:[¶](#section-8.1-1){.pilcrow}

[]{#name-bgp-prefix-sid-tlv-types-su}

::: {#IANAPFXSIDTYPES}
  Value   Type                  Reference
  ------- --------------------- -----------
  4       Deprecated            RFC 9252
  5       SRv6 L3 Service TLV   RFC 9252
  6       SRv6 L2 Service TLV   RFC 9252

  : [Table 1](#table-1){.selfRef}: [BGP Prefix-SID TLV Types
  Subregistry](#name-bgp-prefix-sid-tlv-types-su){.selfRef}
:::

Value 4 previously corresponded to the SRv6-VPN SID TLV, which was
specified in earlier draft versions of this document and used by early
implementations of this specification. It was deprecated and replaced by
the SRv6 L3 Service and SRv6 L2 Service
TLVs.[¶](#section-8.1-3){.pilcrow}
:::

::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [SRv6 Service Sub-TLV Types Registry](#name-srv6-service-sub-tlv-types-){.section-name .selfRef} {#name-srv6-service-sub-tlv-types-}

IANA has created and now maintains a new subregistry called \"SRv6
Service Sub-TLV Types\" under the \"Border Gateway Protocol (BGP)
Parameters\" registry. The registration procedures, per
\[[RFC8126](#RFC8126){.xref}\], for this subregistry are according to
[Table 2](#IANASRV6SVCTYPESAP){.xref}.[¶](#section-8.2-1){.pilcrow}

[]{#name-srv6-service-sub-tlv-types-s}

::: {#IANASRV6SVCTYPESAP}
  Range     Registration Procedures
  --------- -------------------------
  1-127     IETF Review
  128-254   First Come First Served
  255       IETF Review

  : [Table 2](#table-2){.selfRef}: [SRv6 Service Sub-TLV Types
  Subregistry Registration
  Procedures](#name-srv6-service-sub-tlv-types-s){.selfRef}
:::

IANA has populated this subregistry as follows. Note that the SRv6 SID
Information Sub-TLV is defined in this
document:[¶](#section-8.2-3){.pilcrow}

[]{#name-srv6-service-sub-tlv-types-su}

::: {#IANASRV6DATATYPES}
  Value   Type                           Reference
  ------- ------------------------------ -----------
  0       Reserved                       RFC 9252
  1       SRv6 SID Information Sub-TLV   RFC 9252
  255     Reserved                       RFC 9252

  : [Table 3](#table-3){.selfRef}: [SRv6 Service Sub-TLV Types
  Subregistry Initial
  Contents](#name-srv6-service-sub-tlv-types-su){.selfRef}
:::
:::

::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [SRv6 Service Data Sub-Sub-TLV Types Registry](#name-srv6-service-data-sub-sub-tlv){.section-name .selfRef} {#name-srv6-service-data-sub-sub-tlv}

IANA has created and now maintains a new subregistry called \"SRv6
Service Data Sub-Sub-TLV Types\" under the \"Border Gateway Protocol
(BGP) Parameters\" registry. The registration procedures for this
subregistry are according to [Table
4](#IANASRV6DATASSTYPESAP){.xref}.[¶](#section-8.3-1){.pilcrow}

[]{#name-srv6-service-data-sub-sub-tlv-}

::: {#IANASRV6DATASSTYPESAP}
  Range     Registration Procedure
  --------- -------------------------
  1-127     IETF Review
  128-254   First Come First Served
  255       IETF Review

  : [Table 4](#table-4){.selfRef}: [SRv6 Service Data Sub-Sub-TLV Types
  Subregistry Registration
  Procedures](#name-srv6-service-data-sub-sub-tlv-){.selfRef}
:::

The following Sub-Sub-TLV Type is defined in this
document:[¶](#section-8.3-3){.pilcrow}

[]{#name-srv6-service-data-sub-sub-tlv-t}

::: {#IANASRV6DATASSTYPES}
  Value   Type                             Reference
  ------- -------------------------------- -----------
  0       Reserved                         RFC 9252
  1       SRv6 SID Structure Sub-Sub-TLV   RFC 9252
  255     Reserved                         RFC 9252

  : [Table 5](#table-5){.selfRef}: [SRv6 Service Data Sub-Sub-TLV Types
  Subregistry Initial
  Contents](#name-srv6-service-data-sub-sub-tlv-t){.selfRef}
:::
:::

::: {#section-8.4 .section}
### [8.4.](#section-8.4){.section-number .selfRef} [BGP SRv6 Service SID Flags Registry](#name-bgp-srv6-service-sid-flags-){.section-name .selfRef} {#name-bgp-srv6-service-sid-flags-}

IANA has created and now maintains a new subregistry called \"BGP SRv6
Service SID Flags\" under the \"Border Gateway Protocol (BGP)
Parameters\" registry. The registration procedure for this subregistry
is IETF Review, and all 8-bit positions of the flags are currently
unassigned.[¶](#section-8.4-1){.pilcrow}
:::

::: {#section-8.5 .section}
### [8.5.](#section-8.5){.section-number .selfRef} [SAFI Values Registry](#name-safi-values-registry){.section-name .selfRef} {#name-safi-values-registry}

IANA has added this document as a reference for value 128
(\"MPLS-labeled VPN address\") in the \"SAFI Values\" subregistry under
the \"Subsequent Address Family Identifiers (SAFI) Parameters\"
registry.[¶](#section-8.5-1){.pilcrow}
:::
:::
:::

::: {#SEC}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This document specifies extensions to the BGP protocol for the signaling
of services for SRv6. These specifications leverage existing BGP
protocol mechanisms for the signaling of various types of services. It
also builds upon existing elements of the SR architecture (more
specifically, SRv6). As such, this section largely provides pointers (as
a reminder) to the security considerations of those existing
specifications while also covering certain, newer security aspects for
the specifications newly introduced by this
document.[¶](#section-9-1){.pilcrow}

::: {#SECSESS}
::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Considerations Related to BGP Sessions](#name-considerations-related-to-b){.section-name .selfRef} {#name-considerations-related-to-b}

Techniques related to authentication of BGP sessions for securing
messages between BGP peers, as discussed in the BGP specification
\[[RFC4271](#RFC4271){.xref}\] and in the security analysis for BGP
\[[RFC4272](#RFC4272){.xref}\], apply. The discussion of the use of the
TCP Authentication Option to protect BGP sessions is found in
\[[RFC5925](#RFC5925){.xref}\], while \[[RFC6952](#RFC6952){.xref}\]
includes an analysis of BGP keying and authentication issues. This
document does not introduce any additional BGP session security
considerations.[¶](#section-9.1-1){.pilcrow}
:::
:::

::: {#SECSVC}
::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Considerations Related to BGP Services](#name-considerations-related-to-bg){.section-name .selfRef} {#name-considerations-related-to-bg}

This document does not introduce new services or BGP NLRI types but
extends the signaling of existing ones for SRv6. Therefore, the security
considerations for the respective BGP services, such as [BGP IPv4 over
IPv6 NH](#RFC8950){.xref} \[[RFC8950](#RFC8950){.xref}\], [BGP IPv6
L3VPN](#RFC4659){.xref} \[[RFC4659](#RFC4659){.xref}\], [BGP
IPv6](#RFC2545){.xref} \[[RFC2545](#RFC2545){.xref}\], [BGP
EVPN](#RFC7432){.xref} \[[RFC7432](#RFC7432){.xref}\], and [IP
EVPN](#RFC9136){.xref} \[[RFC9136](#RFC9136){.xref}\], apply as
discussed in their respective documents. \[[RFC8669](#RFC8669){.xref}\]
discusses mechanisms to prevent the leaking of the BGP Prefix-SID
attribute, which carries SR information, outside the SR
domain.[¶](#section-9.2-1){.pilcrow}

As a reminder, several of the BGP services (i.e., the AFI/SAFI used for
their signaling) were initially introduced for one encapsulation
mechanism and later extended for others, e.g., EVPN MPLS
\[[RFC7432](#RFC7432){.xref}\] was extended for Virtual eXtensible Local
Area Network (VXLAN) encapsulation and Network Virtualization Using
Generic Routing Encapsulation (NVGRE) \[[RFC8365](#RFC8365){.xref}\].
\[[RFC9012](#RFC9012){.xref}\] enables the use of various IP
encapsulation mechanisms along with different BGP SAFIs for their
respective services. The existing filtering mechanisms for preventing
the leak of the encapsulation information (carried in BGP attributes)
and preventing the advertisement of prefixes from the provider\'s
internal address space (especially the SRv6 Block, as discussed in
\[[RFC8986](#RFC8986){.xref}\]) to external peers (or into the Internet)
also apply in the case of SRv6.[¶](#section-9.2-2){.pilcrow}

Specific to SRv6, a misconfiguration or error in the BGP filtering
mechanisms mentioned above may result in exposing information, such as
SRv6 Service SIDs to external peers or other unauthorized entities.
However, an attempt to exploit this information or to raise an attack by
injecting packets into the network (e.g., customer networks in case of
VPN services) is mitigated by the existing SRv6 data plane security
mechanisms, as described in the next
section.[¶](#section-9.2-3){.pilcrow}
:::
:::

::: {#SECSRV6}
::: {#section-9.3 .section}
### [9.3.](#section-9.3){.section-number .selfRef} [Considerations Related to SR over IPv6 Data Plane](#name-considerations-related-to-s){.section-name .selfRef} {#name-considerations-related-to-s}

This section provides a brief reminder and an overview of the security
considerations related to SRv6 with pointers to existing specifications.
This document introduces no new security considerations of its own from
the SRv6 data plane perspective.[¶](#section-9.3-1){.pilcrow}

SRv6 operates within a trusted SR domain. The data packets corresponding
to service flows between PE routers are encapsulated (using SRv6 SIDs
advertised via BGP) and carried within this trusted SR domain (e.g.,
within a single AS or between multiple ASes within a single provider
network).[¶](#section-9.3-2){.pilcrow}

The security considerations of the SR architecture are covered by
\[[RFC8402](#RFC8402){.xref}\]. More detailed security considerations,
specifically of SRv6 and SRH, are covered by
\[[RFC8754](#RFC8754){.xref}\] as they relate to SR Attacks (Section
[7.1](https://www.rfc-editor.org/rfc/rfc8754#section-7.1){.relref}),
Service Theft (Section
[7.2](https://www.rfc-editor.org/rfc/rfc8754#section-7.2){.relref}), and
Topology Disclosure (Section
[7.3](https://www.rfc-editor.org/rfc/rfc8754#section-7.3){.relref}). As
such, an operator deploying SRv6 [MUST]{.bcp14} follow the
considerations described in [Section
7](https://www.rfc-editor.org/rfc/rfc8754#section-7){.relref} of
\[[RFC8754](#RFC8754){.xref}\] to implement the infrastructure Access
Control Lists (ACLs) and the recommendations described in [BCP
38](#RFC2827){.xref} \[[RFC2827](#RFC2827){.xref}\] and [BCP
84](#RFC3704){.xref}
\[[RFC3704](#RFC3704){.xref}\].[¶](#section-9.3-3){.pilcrow}

The SRv6 deployment and SID allocation guidelines, as described in
\[[RFC8986](#RFC8986){.xref}\], simplify the deployment of the ACL
filters (e.g., a single ACL corresponding to the SRv6 Block applied to
the external interfaces on border nodes is sufficient to block packets
destined to any SRv6 SID in the domain from external/unauthorized
networks). While there is an assumed trust model within an SR domain,
such that any node sending a packet to an SRv6 SID is assumed to be
allowed to do so, there is also the option of using an SRH Hashed
Message Authentication Code (HMAC) TLV \[[RFC8754](#RFC8754){.xref}\],
as described in \[[RFC8986](#RFC8986){.xref}\], for
validation.[¶](#section-9.3-4){.pilcrow}

The SRv6 Endpoint Behaviors implementing the services signaled in this
document are defined in \[[RFC8986](#RFC8986){.xref}\]; hence, the
security considerations of that document apply. These considerations are
independent of the protocol used for service deployment, i.e.,
independent of BGP signaling of SRv6
services.[¶](#section-9.3-5){.pilcrow}

These considerations help protect transit traffic as well as services,
such as VPNs, to avoid service theft or injection of traffic into
customer VPNs.[¶](#section-9.3-6){.pilcrow}
:::
:::
:::
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2545\]
:   [Marques, P.]{.refAuthor} and [F. Dupont]{.refAuthor}, [\"Use of
    BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain
    Routing\"]{.refTitle}, [RFC 2545]{.seriesInfo}, [DOI
    10.17487/RFC2545]{.seriesInfo}, March 1999,
    \<<https://www.rfc-editor.org/info/rfc2545>\>.
:   

\[RFC4271\]
:   [Rekhter, Y., Ed.]{.refAuthor}, [Li, T., Ed.]{.refAuthor}, and [S.
    Hares, Ed.]{.refAuthor}, [\"A Border Gateway Protocol 4
    (BGP-4)\"]{.refTitle}, [RFC 4271]{.seriesInfo}, [DOI
    10.17487/RFC4271]{.seriesInfo}, January 2006,
    \<<https://www.rfc-editor.org/info/rfc4271>\>.
:   

\[RFC4364\]
:   [Rosen, E.]{.refAuthor} and [Y. Rekhter]{.refAuthor}, [\"BGP/MPLS IP
    Virtual Private Networks (VPNs)\"]{.refTitle}, [RFC
    4364]{.seriesInfo}, [DOI 10.17487/RFC4364]{.seriesInfo}, February
    2006, \<<https://www.rfc-editor.org/info/rfc4364>\>.
:   

\[RFC4456\]
:   [Bates, T.]{.refAuthor}, [Chen, E.]{.refAuthor}, and [R.
    Chandra]{.refAuthor}, [\"BGP Route Reflection: An Alternative to
    Full Mesh Internal BGP (IBGP)\"]{.refTitle}, [RFC
    4456]{.seriesInfo}, [DOI 10.17487/RFC4456]{.seriesInfo}, April 2006,
    \<<https://www.rfc-editor.org/info/rfc4456>\>.
:   

\[RFC4659\]
:   [De Clercq, J.]{.refAuthor}, [Ooms, D.]{.refAuthor},
    [Carugi, M.]{.refAuthor}, and [F. Le Faucheur]{.refAuthor},
    [\"BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6
    VPN\"]{.refTitle}, [RFC 4659]{.seriesInfo}, [DOI
    10.17487/RFC4659]{.seriesInfo}, September 2006,
    \<<https://www.rfc-editor.org/info/rfc4659>\>.
:   

\[RFC4760\]
:   [Bates, T.]{.refAuthor}, [Chandra, R.]{.refAuthor},
    [Katz, D.]{.refAuthor}, and [Y. Rekhter]{.refAuthor},
    [\"Multiprotocol Extensions for BGP-4\"]{.refTitle}, [RFC
    4760]{.seriesInfo}, [DOI 10.17487/RFC4760]{.seriesInfo}, January
    2007, \<<https://www.rfc-editor.org/info/rfc4760>\>.
:   

\[RFC6514\]
:   [Aggarwal, R.]{.refAuthor}, [Rosen, E.]{.refAuthor},
    [Morin, T.]{.refAuthor}, and [Y. Rekhter]{.refAuthor}, [\"BGP
    Encodings and Procedures for Multicast in MPLS/BGP IP
    VPNs\"]{.refTitle}, [RFC 6514]{.seriesInfo}, [DOI
    10.17487/RFC6514]{.seriesInfo}, February 2012,
    \<<https://www.rfc-editor.org/info/rfc6514>\>.
:   

\[RFC7432\]
:   [Sajassi, A., Ed.]{.refAuthor}, [Aggarwal, R.]{.refAuthor},
    [Bitar, N.]{.refAuthor}, [Isaac, A.]{.refAuthor},
    [Uttaro, J.]{.refAuthor}, [Drake, J.]{.refAuthor}, and [W.
    Henderickx]{.refAuthor}, [\"BGP MPLS-Based Ethernet
    VPN\"]{.refTitle}, [RFC 7432]{.seriesInfo}, [DOI
    10.17487/RFC7432]{.seriesInfo}, February 2015,
    \<<https://www.rfc-editor.org/info/rfc7432>\>.
:   

\[RFC7606\]
:   [Chen, E., Ed.]{.refAuthor}, [Scudder, J., Ed.]{.refAuthor},
    [Mohapatra, P.]{.refAuthor}, and [K. Patel]{.refAuthor}, [\"Revised
    Error Handling for BGP UPDATE Messages\"]{.refTitle}, [RFC
    7606]{.seriesInfo}, [DOI 10.17487/RFC7606]{.seriesInfo}, August
    2015, \<<https://www.rfc-editor.org/info/rfc7606>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8200\]
:   [Deering, S.]{.refAuthor} and [R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.
:   

\[RFC8214\]
:   [Boutros, S.]{.refAuthor}, [Sajassi, A.]{.refAuthor},
    [Salam, S.]{.refAuthor}, [Drake, J.]{.refAuthor}, and [J.
    Rabadan]{.refAuthor}, [\"Virtual Private Wire Service Support in
    Ethernet VPN\"]{.refTitle}, [RFC 8214]{.seriesInfo}, [DOI
    10.17487/RFC8214]{.seriesInfo}, August 2017,
    \<<https://www.rfc-editor.org/info/rfc8214>\>.
:   

\[RFC8277\]
:   [Rosen, E.]{.refAuthor}, [\"Using BGP to Bind MPLS Labels to Address
    Prefixes\"]{.refTitle}, [RFC 8277]{.seriesInfo}, [DOI
    10.17487/RFC8277]{.seriesInfo}, October 2017,
    \<<https://www.rfc-editor.org/info/rfc8277>\>.
:   

\[RFC8317\]
:   [Sajassi, A., Ed.]{.refAuthor}, [Salam, S.]{.refAuthor},
    [Drake, J.]{.refAuthor}, [Uttaro, J.]{.refAuthor},
    [Boutros, S.]{.refAuthor}, and [J. Rabadan]{.refAuthor},
    [\"Ethernet-Tree (E-Tree) Support in Ethernet VPN (EVPN) and
    Provider Backbone Bridging EVPN (PBB-EVPN)\"]{.refTitle}, [RFC
    8317]{.seriesInfo}, [DOI 10.17487/RFC8317]{.seriesInfo}, January
    2018, \<<https://www.rfc-editor.org/info/rfc8317>\>.
:   

\[RFC8365\]
:   [Sajassi, A., Ed.]{.refAuthor}, [Drake, J., Ed.]{.refAuthor},
    [Bitar, N.]{.refAuthor}, [Shekhar, R.]{.refAuthor},
    [Uttaro, J.]{.refAuthor}, and [W. Henderickx]{.refAuthor}, [\"A
    Network Virtualization Overlay Solution Using Ethernet VPN
    (EVPN)\"]{.refTitle}, [RFC 8365]{.seriesInfo}, [DOI
    10.17487/RFC8365]{.seriesInfo}, March 2018,
    \<<https://www.rfc-editor.org/info/rfc8365>\>.
:   

\[RFC8402\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Previdi, S., Ed.]{.refAuthor},
    [Ginsberg, L.]{.refAuthor}, [Decraene, B.]{.refAuthor},
    [Litkowski, S.]{.refAuthor}, and [R. Shakir]{.refAuthor}, [\"Segment
    Routing Architecture\"]{.refTitle}, [RFC 8402]{.seriesInfo}, [DOI
    10.17487/RFC8402]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8402>\>.
:   

\[RFC8669\]
:   [Previdi, S.]{.refAuthor}, [Filsfils, C.]{.refAuthor}, [Lindem, A.,
    Ed.]{.refAuthor}, [Sreekantiah, A.]{.refAuthor}, and [H.
    Gredler]{.refAuthor}, [\"Segment Routing Prefix Segment Identifier
    Extensions for BGP\"]{.refTitle}, [RFC 8669]{.seriesInfo}, [DOI
    10.17487/RFC8669]{.seriesInfo}, December 2019,
    \<<https://www.rfc-editor.org/info/rfc8669>\>.
:   

\[RFC8754\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Dukes, D., Ed.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Leddy, J.]{.refAuthor},
    [Matsushima, S.]{.refAuthor}, and [D. Voyer]{.refAuthor}, [\"IPv6
    Segment Routing Header (SRH)\"]{.refTitle}, [RFC 8754]{.seriesInfo},
    [DOI 10.17487/RFC8754]{.seriesInfo}, March 2020,
    \<<https://www.rfc-editor.org/info/rfc8754>\>.
:   

\[RFC8950\]
:   [Litkowski, S.]{.refAuthor}, [Agrawal, S.]{.refAuthor},
    [Ananthamurthy, K.]{.refAuthor}, and [K. Patel]{.refAuthor},
    [\"Advertising IPv4 Network Layer Reachability Information (NLRI)
    with an IPv6 Next Hop\"]{.refTitle}, [RFC 8950]{.seriesInfo}, [DOI
    10.17487/RFC8950]{.seriesInfo}, November 2020,
    \<<https://www.rfc-editor.org/info/rfc8950>\>.
:   

\[RFC8986\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Camarillo, P., Ed.]{.refAuthor},
    [Leddy, J.]{.refAuthor}, [Voyer, D.]{.refAuthor},
    [Matsushima, S.]{.refAuthor}, and [Z. Li]{.refAuthor}, [\"Segment
    Routing over IPv6 (SRv6) Network Programming\"]{.refTitle}, [RFC
    8986]{.seriesInfo}, [DOI 10.17487/RFC8986]{.seriesInfo}, February
    2021, \<<https://www.rfc-editor.org/info/rfc8986>\>.
:   

\[RFC9136\]
:   [Rabadan, J., Ed.]{.refAuthor}, [Henderickx, W.]{.refAuthor},
    [Drake, J.]{.refAuthor}, [Lin, W.]{.refAuthor}, and [A.
    Sajassi]{.refAuthor}, [\"IP Prefix Advertisement in Ethernet VPN
    (EVPN)\"]{.refTitle}, [RFC 9136]{.seriesInfo}, [DOI
    10.17487/RFC9136]{.seriesInfo}, October 2021,
    \<<https://www.rfc-editor.org/info/rfc9136>\>.
:   

\[RFC9251\]
:   [Sajassi, A.]{.refAuthor}, [Thoria, S.]{.refAuthor},
    [Mishra, M.]{.refAuthor}, [Patel, K.]{.refAuthor},
    [Drake, J.]{.refAuthor}, and [W. Lin]{.refAuthor}, [\"Internet Group
    Management Protocol (IGMP) and Multicast Listener Discovery (MLD)
    Proxies for Ethernet VPN (EVPN)\"]{.refTitle}, [RFC
    9251]{.seriesInfo}, [DOI 10.17487/RFC9251]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9251>\>.
:   
:::

::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[IGP-FLEX-ALGO\]
:   [Psenak, P., Ed.]{.refAuthor}, [Hegde, S.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Talaulikar, K.]{.refAuthor}, and [A.
    Gulko]{.refAuthor}, [\"IGP Flexible Algorithm\"]{.refTitle}, [Work
    in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-lsr-flex-algo-20]{.seriesInfo}, 18 May 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-lsr-flex-algo-20>\>.
:   

\[RFC2827\]
:   [Ferguson, P.]{.refAuthor} and [D. Senie]{.refAuthor}, [\"Network
    Ingress Filtering: Defeating Denial of Service Attacks which employ
    IP Source Address Spoofing\"]{.refTitle}, [BCP 38]{.seriesInfo},
    [RFC 2827]{.seriesInfo}, [DOI 10.17487/RFC2827]{.seriesInfo}, May
    2000, \<<https://www.rfc-editor.org/info/rfc2827>\>.
:   

\[RFC3704\]
:   [Baker, F.]{.refAuthor} and [P. Savola]{.refAuthor}, [\"Ingress
    Filtering for Multihomed Networks\"]{.refTitle}, [BCP
    84]{.seriesInfo}, [RFC 3704]{.seriesInfo}, [DOI
    10.17487/RFC3704]{.seriesInfo}, March 2004,
    \<<https://www.rfc-editor.org/info/rfc3704>\>.
:   

\[RFC4272\]
:   [Murphy, S.]{.refAuthor}, [\"BGP Security Vulnerabilities
    Analysis\"]{.refTitle}, [RFC 4272]{.seriesInfo}, [DOI
    10.17487/RFC4272]{.seriesInfo}, January 2006,
    \<<https://www.rfc-editor.org/info/rfc4272>\>.
:   

\[RFC5925\]
:   [Touch, J.]{.refAuthor}, [Mankin, A.]{.refAuthor}, and [R.
    Bonica]{.refAuthor}, [\"The TCP Authentication Option\"]{.refTitle},
    [RFC 5925]{.seriesInfo}, [DOI 10.17487/RFC5925]{.seriesInfo}, June
    2010, \<<https://www.rfc-editor.org/info/rfc5925>\>.
:   

\[RFC6513\]
:   [Rosen, E., Ed.]{.refAuthor} and [R. Aggarwal, Ed.]{.refAuthor},
    [\"Multicast in MPLS/BGP IP VPNs\"]{.refTitle}, [RFC
    6513]{.seriesInfo}, [DOI 10.17487/RFC6513]{.seriesInfo}, February
    2012, \<<https://www.rfc-editor.org/info/rfc6513>\>.
:   

\[RFC6952\]
:   [Jethanandani, M.]{.refAuthor}, [Patel, K.]{.refAuthor}, and [L.
    Zheng]{.refAuthor}, [\"Analysis of BGP, LDP, PCEP, and MSDP Issues
    According to the Keying and Authentication for Routing Protocols
    (KARP) Design Guide\"]{.refTitle}, [RFC 6952]{.seriesInfo}, [DOI
    10.17487/RFC6952]{.seriesInfo}, May 2013,
    \<<https://www.rfc-editor.org/info/rfc6952>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC9012\]
:   [Patel, K.]{.refAuthor}, [Van de Velde, G.]{.refAuthor},
    [Sangli, S.]{.refAuthor}, and [J. Scudder]{.refAuthor}, [\"The BGP
    Tunnel Encapsulation Attribute\"]{.refTitle}, [RFC
    9012]{.seriesInfo}, [DOI 10.17487/RFC9012]{.seriesInfo}, April 2021,
    \<<https://www.rfc-editor.org/info/rfc9012>\>.
:   

\[SEGMENT-ROUTING-POLICY\]
:   [Filsfils, C.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor},
    [Voyer, D.]{.refAuthor}, [Bogdanov, A.]{.refAuthor}, and [P.
    Mattes]{.refAuthor}, [\"Segment Routing Policy
    Architecture\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-ietf-spring-segment-routing-policy-22]{.seriesInfo}, 22 March
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-spring-segment-routing-policy-22>\>.
:   
:::
:::

::: {#ACK}
::: {#appendix-A .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors of this document would like to thank [Stephane
Litkowski]{.contact-name}, [Rishabh Parekh]{.contact-name},
[Xiejingrong]{.contact-name}, [Rajesh M.]{.contact-name}, [Mustapha
Aissaoui]{.contact-name}, [Alexander Vainshtein]{.contact-name}, [Eduard
Metz]{.contact-name}, [Shraddha Hegde]{.contact-name}, [Eduard
Vasilenko]{.contact-name}, [Ron Bonica]{.contact-name}, and [Joel
Halpern]{.contact-name} for their comments and review of this document.
The authors would also like to thank Document Shepherd [Matthew
Bocci]{.contact-name} for his review and AD [Martin
Vigoureux]{.contact-name} for his review that resulted in helpful
comments for improving this document.[¶](#appendix-A-1){.pilcrow}
:::
:::

::: {#appendix-B .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

::: {.left dir="auto"}
[Clarence Filsfils]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <cfilsfil@cisco.com>
:::

::: {.left dir="auto"}
[Satoru Matsushima]{.fn .nameRole}
:::

::: {.left dir="auto"}
[SoftBank]{.org}
:::

::: email
Email: <satoru.matsushima@g.softbank.co.jp>
:::

::: {.left dir="auto"}
[Dirk Steinberg]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Steinberg Consulting]{.org}
:::

::: email
Email: <dirk@lapishills.com>
:::

::: {.left dir="auto"}
[Daniel Bernier]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: email
Email: <daniel.bernier@bell.ca>
:::

::: {.left dir="auto"}
[Daniel Voyer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: email
Email: <daniel.voyer@bell.ca>
:::

::: {.left dir="auto"}
[Jonn Leddy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Individual]{.org}
:::

::: email
Email: <john@leddy.net>
:::

::: {.left dir="auto"}
[Swadesh Agrawal]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <swaagraw@cisco.com>
:::

::: {.left dir="auto"}
[Patrice Brissette]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <pbrisset@cisco.com>
:::

::: {.left dir="auto"}
[Ali Sajassi]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <sajassi@cisco.com>
:::

::: {.left dir="auto"}
[Bart Peirens]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Proximus]{.org}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <bart.peirens@proximus.com>
:::

::: {.left dir="auto"}
[Darren Dukes]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <ddukes@cisco.com>
:::

::: {.left dir="auto"}
[Pablo Camarilo]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <pcamaril@cisco.com>
:::

::: {.left dir="auto"}
[Shyam Sethuram]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <shyam.ioml@gmail.com>
:::

::: {.left dir="auto"}
[Zafar Ali]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco]{.org}
:::

::: email
Email: <zali@cisco.com>
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Gaurav Dawra ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[LinkedIn]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <gdawra.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Ketan Talaulikar ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems]{.org}
:::

::: {.left dir="auto"}
[India]{.country-name}
:::

::: email
Email: <ketant.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Robert Raszuk]{.fn .nameRole}
:::

::: {.left dir="auto"}
[NTT Network Innovations]{.org}
:::

::: {.left dir="auto"}
[940 Stewart Dr.]{.street-address}
:::

::: {.left dir="auto"}
[Sunnyvale]{.locality}, [CA]{.region} [94085]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <robert@raszuk.net>
:::

::: {.left dir="auto"}
[Bruno Decraene]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Orange]{.org}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <bruno.decraene@orange.com>
:::

::: {.left dir="auto"}
[Shunwan Zhuang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei Technologies]{.org}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <zhuangshunwan@huawei.com>
:::

::: {.left dir="auto"}
[Jorge Rabadan]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nokia]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <jorge.rabadan@nokia.com>
:::
:::
:::
