  RFC 8992        Auto IPv6 Prefix Management   May 2021
  --------------- ----------------------------- ----------
  Jiang, et al.   Informational                 \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8992](https://www.rfc-editor.org/rfc/rfc8992){.eref}

Category:
:   Informational

Published:
:   May 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    S. Jiang, [Ed.]{.editor}
    :::

    ::: org
    Huawei Technologies Co., Ltd
    :::
    :::

    ::: author
    ::: author-name
    Z. Du
    :::

    ::: org
    China Mobile
    :::
    :::

    ::: author
    ::: author-name
    B. Carpenter
    :::

    ::: org
    Univ. of Auckland
    :::
    :::

    ::: author
    ::: author-name
    Q. Sun
    :::

    ::: org
    China Telecom
    :::
    :::
:::

# RFC 8992 {#rfcnum}

# Autonomic IPv6 Edge Prefix Management in Large-Scale Networks {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document defines two autonomic technical objectives for IPv6 prefix
management at the edge of large-scale ISP networks, with an extension to
support IPv4 prefixes. An important purpose of this document is to use
it for validation of the design of various components of the Autonomic
Networking Infrastructure.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for informational
purposes.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Not all documents approved
by the IESG are candidates for any level of Internet Standard; see
Section 2 of RFC 7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8992>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Problem
    Statement](#name-problem-statement){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Intended User and Administrator
        Experience](#name-intended-user-and-administr){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Analysis of Parameters and
        Information Involved](#name-analysis-of-parameters-and-){.xref}

        -   ::: {#section-toc.1-1.3.2.2.2.1}
            [3.2.1](#section-3.2.1){.xref}.  [Parameters Each Device Can
            Define for Itself](#name-parameters-each-device-can-){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.2.2.2}
            [3.2.2](#section-3.2.2){.xref}.  [Information Needed from
            Network
            Operations](#name-information-needed-from-net){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.2.2.3}
            [3.2.3](#section-3.2.3){.xref}.  [Comparison with Current
            Solutions](#name-comparison-with-current-sol){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Interaction with Other
        Devices](#name-interaction-with-other-devi){.xref}

        -   ::: {#section-toc.1-1.3.2.3.2.1}
            [3.3.1](#section-3.3.1){.xref}.  [Information Needed from
            Other Devices](#name-information-needed-from-oth){.xref}
            :::

        -   ::: {#section-toc.1-1.3.2.3.2.2}
            [3.3.2](#section-3.3.2){.xref}.  [Monitoring, Diagnostics,
            and Reporting](#name-monitoring-diagnostics-and-){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Autonomic Edge Prefix Management
    Solution](#name-autonomic-edge-prefix-manag){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Behavior of a Device Requesting a
        Prefix](#name-behavior-of-a-device-reques){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Behavior of a Device Providing a
        Prefix](#name-behavior-of-a-device-provid){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Behavior after Successful
        Negotiation](#name-behavior-after-successful-n){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [Prefix
        Logging](#name-prefix-logging){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Autonomic Prefix Management
    Objectives](#name-autonomic-prefix-management){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Edge Prefix Objective
        Option](#name-edge-prefix-objective-optio){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [IPv4
        Extension](#name-ipv4-extension){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Prefix Management
    Parameters](#name-prefix-management-parameter){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Example of Prefix Management
        Parameters](#name-example-of-prefix-managemen){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [Appendix A](#section-appendix.a){.xref}.  [Deployment
    Overview](#name-deployment-overview){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [A.1](#section-a.1){.xref}.  [Address and Prefix Management with
        DHCP](#name-address-and-prefix-manageme){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [A.2](#section-a.2){.xref}.  [Prefix Management with
        ANI/GRASP](#name-prefix-management-with-ani-){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [](#section-appendix.b){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#intro}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The original purpose of this document was to validate the design of the
Autonomic Networking Infrastructure (ANI) for a realistic use case. It
shows how the ANI can be applied to IP prefix delegation, and it
outlines approaches to build a system to do this. A fully standardized
solution would require more details, so this document is informational
in nature.[¶](#section-1-1){.pilcrow}

This document defines two autonomic technical objectives for IPv6 prefix
management in large-scale networks, with an extension to support IPv4
prefixes. The background to Autonomic Networking is described in
\[[RFC7575](#RFC7575){.xref}\] and \[[RFC7576](#RFC7576){.xref}\]. The
GeneRic Autonomic Signaling Protocol (GRASP) is specified by
\[[RFC8990](#RFC8990){.xref}\] and can make use of the technical
objectives to provide a solution for autonomic prefix management. An
important purpose of the present document is to use it for validation of
the design of GRASP and other components of the ANI as described in
\[[RFC8993](#RFC8993){.xref}\].[¶](#section-1-2){.pilcrow}

This document is not a complete functional specification of an autonomic
prefix management system, and it does not describe all detailed aspects
of the GRASP objective parameters and Autonomic Service Agent (ASA)
procedures necessary to build a complete system. Instead, it describes
the architectural framework utilizing the components of the ANI,
outlines the different deployment options and aspects, and defines GRASP
objectives for use in building the system. It also provides some basic
parameter examples.[¶](#section-1-3){.pilcrow}

This document is not intended to solve all cases of IPv6 prefix
management. In fact, it assumes that the network\'s main infrastructure
elements already have addresses and prefixes. This document is dedicated
to how to make IPv6 prefix management at the edges of large-scale
networks as autonomic as possible. It is specifically written for
Internet Service Provider (ISP) networks. Although there are
similarities between ISPs and large enterprise networks, the
requirements for the two use cases differ. In any case, the scope of the
solution is expected to be limited, like any Autonomic Network, to a
single management domain.[¶](#section-1-4){.pilcrow}

However, the solution is designed in a general way. Its use for a
broader scope than edge prefixes, including some or all infrastructure
prefixes, is left for future discussion.[¶](#section-1-5){.pilcrow}

A complete solution has many aspects that are not discussed here. Once
prefixes have been assigned to routers, they need to be communicated to
the routing system as they are brought into use. Similarly, when
prefixes are released, they need to be removed from the routing system.
Different operators may have different policies regarding prefix
lifetimes, and they may prefer to have centralized or distributed pools
of spare prefixes. In an Autonomic Network, these are properties decided
upon by the design of the relevant ASAs. The GRASP objectives are simply
building blocks.[¶](#section-1-6){.pilcrow}

A particular risk of distributed prefix allocation in large networks is
that over time, it might lead to fragmentation of the address space and
an undesirable increase in the size of the interior routing protocol
tables. The extent of this risk depends on the algorithms and policies
used by the ASAs. Mitigating this risk might even become an autonomic
function in itself.[¶](#section-1-7){.pilcrow}
:::
:::

::: {#terms}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

This document uses terminology defined in
\[[RFC7575](#RFC7575){.xref}\].[¶](#section-2-2){.pilcrow}
:::
:::

::: {#problem}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Problem Statement](#name-problem-statement){.section-name .selfRef} {#name-problem-statement}

The Autonomic Networking use case considered here is autonomic IPv6
prefix management at the edge of large-scale ISP
networks.[¶](#section-3-1){.pilcrow}

Although DHCPv6-PD (DHCPv6 Prefix Delegation)
\[[RFC8415](#RFC8415){.xref}\] supports automated delegation of IPv6
prefixes from one router to another, prefix management still largely
depends on human planning. In other words, there is no basic information
or policy to support autonomic decisions on the prefix length that each
router should request or be delegated, according to its role in the
network. Roles could be defined separately for individual devices or
could be generic (edge router, interior router, etc.). Furthermore, IPv6
prefix management by humans tends to be rigid and static after initial
planning.[¶](#section-3-2){.pilcrow}

The problem to be solved by Autonomic Networking is how to dynamically
manage IPv6 address space in large-scale networks, so that IPv6
addresses can be used efficiently. Here, we limit the problem to
assignment of prefixes at the edge of the network, close to access
routers that support individual fixed-line subscribers, mobile
customers, and corporate customers. We assume that the core
infrastructure of the network has already been established with
appropriately assigned prefixes. The Autonomic Networking approach
discussed in this document is based on the assumption that there is a
generic discovery and negotiation protocol that enables direct
negotiation between intelligent IP routers. GRASP
\[[RFC8990](#RFC8990){.xref}\] is intended to be such a
protocol.[¶](#section-3-3){.pilcrow}

::: {#experience}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Intended User and Administrator Experience](#name-intended-user-and-administr){.section-name .selfRef} {#name-intended-user-and-administr}

The intended experience is, for the administrators of a large-scale
network, that the management of IPv6 address space at the edge of the
network can be run with minimum effort, as devices at the edge are added
and removed and as customers of all kinds join and leave the network. In
the ideal scenario, the administrators only have to specify a single
IPv6 prefix for the whole network and the initial prefix length for each
device role. As far as users are concerned, IPv6 prefix assignment would
occur exactly as it does in any other
network.[¶](#section-3.1-1){.pilcrow}

The actual prefix usage needs to be logged for potential offline
management operations, including audit and security incident
tracing.[¶](#section-3.1-2){.pilcrow}
:::
:::

::: {#params}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Analysis of Parameters and Information Involved](#name-analysis-of-parameters-and-){.section-name .selfRef} {#name-analysis-of-parameters-and-}

For specific purposes of address management, each edge device will
implement several parameters. (Some of them can be preconfigured before
they are connected.) They include the
following:[¶](#section-3.2-1){.pilcrow}

-   [Identity, authentication, and authorization of this device. This is
    expected to use the Autonomic Networking secure bootstrap process
    \[[RFC8995](#RFC8995){.xref}\], following which the device could
    safely take part in autonomic
    operations.[¶](#section-3.2-2.1){.pilcrow}]{#section-3.2-2.1}
-   [Role of this device. Some example roles are discussed in [Section
    6.1](#exparam){.xref}.[¶](#section-3.2-2.2){.pilcrow}]{#section-3.2-2.2}
-   [An IPv6 prefix length for this
    device.[¶](#section-3.2-2.3){.pilcrow}]{#section-3.2-2.3}
-   [An IPv6 prefix that is assigned to this device and its downstream
    devices.[¶](#section-3.2-2.4){.pilcrow}]{#section-3.2-2.4}

The network as a whole will implement the following
parameters:[¶](#section-3.2-3){.pilcrow}

-   [Identity of a trust anchor, which is a certification authority (CA)
    maintained by the network administrators, used during the secure
    bootstrap process.[¶](#section-3.2-4.1){.pilcrow}]{#section-3.2-4.1}
-   [Total IPv6 address space available for edge devices. It is a pool
    of one or several IPv6
    prefixes.[¶](#section-3.2-4.2){.pilcrow}]{#section-3.2-4.2}
-   [The initial prefix length for each device
    role.[¶](#section-3.2-4.3){.pilcrow}]{#section-3.2-4.3}

::: {#device}
::: {#section-3.2.1 .section}
#### [3.2.1.](#section-3.2.1){.section-number .selfRef} [Parameters Each Device Can Define for Itself](#name-parameters-each-device-can-){.section-name .selfRef} {#name-parameters-each-device-can-}

This section identifies those of the above parameters that do not need
external information in order for the devices concerned to set them to a
reasonable default value after bootstrap or after a network disruption.
They are as follows:[¶](#section-3.2.1-1){.pilcrow}

-   [Default role of this
    device.[¶](#section-3.2.1-2.1){.pilcrow}]{#section-3.2.1-2.1}
-   [Default IPv6 prefix length for this
    device.[¶](#section-3.2.1-2.2){.pilcrow}]{#section-3.2.1-2.2}
-   [Cryptographic identity of this device, as needed for secure
    bootstrapping
    \[[RFC8995](#RFC8995){.xref}\].[¶](#section-3.2.1-2.3){.pilcrow}]{#section-3.2.1-2.3}

The device may be shipped from the manufacturer with a preconfigured
role and default prefix length, which could be modified by an autonomic
mechanism. Its cryptographic identity will be installed by its
manufacturer.[¶](#section-3.2.1-3){.pilcrow}
:::
:::

::: {#opparams}
::: {#section-3.2.2 .section}
#### [3.2.2.](#section-3.2.2){.section-number .selfRef} [Information Needed from Network Operations](#name-information-needed-from-net){.section-name .selfRef} {#name-information-needed-from-net}

This section identifies those parameters that might need operational
input in order for the devices concerned to set them to a non-default
value.[¶](#section-3.2.2-1){.pilcrow}

-   [Non-default value for the IPv6 prefix length for this device. This
    needs to be decided based on the role of this
    device.[¶](#section-3.2.2-2.1){.pilcrow}]{#section-3.2.2-2.1}
-   [The initial prefix length for each device
    role.[¶](#section-3.2.2-2.2){.pilcrow}]{#section-3.2.2-2.2}
-   [Whether to allow the device to request more address
    space.[¶](#section-3.2.2-2.3){.pilcrow}]{#section-3.2.2-2.3}
-   [The policy regarding when to request more address space \-- for
    example, if the address usage reaches a certain limit or
    percentage.[¶](#section-3.2.2-2.4){.pilcrow}]{#section-3.2.2-2.4}
:::
:::

::: {#compare}
::: {#section-3.2.3 .section}
#### [3.2.3.](#section-3.2.3){.section-number .selfRef} [Comparison with Current Solutions](#name-comparison-with-current-sol){.section-name .selfRef} {#name-comparison-with-current-sol}

This section briefly compares the above use case with current solutions.
Currently, the address management is still largely dependent on human
planning. It is rigid and static after initial planning. Address
requests will fail if the configured address space is used
up.[¶](#section-3.2.3-1){.pilcrow}

Some autonomic and dynamic address management functions may be
achievable by extending the existing protocols \-- for example,
extending DHCPv6-PD \[[RFC8415](#RFC8415){.xref}\] to request IPv6
prefixes according to the device role. However, defining uniform device
roles may not be a practical task, as some functions cannot be
configured on the basis of role using existing prefix delegation
protocols.[¶](#section-3.2.3-2){.pilcrow}

Using a generic autonomic discovery and negotiation protocol instead of
specific solutions has the advantage that additional parameters can be
included in the autonomic solution without creating new mechanisms. This
is the principal argument for a generic
approach.[¶](#section-3.2.3-3){.pilcrow}
:::
:::
:::
:::

::: {#interact}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Interaction with Other Devices](#name-interaction-with-other-devi){.section-name .selfRef} {#name-interaction-with-other-devi}

::: {#peers}
::: {#section-3.3.1 .section}
#### [3.3.1.](#section-3.3.1){.section-number .selfRef} [Information Needed from Other Devices](#name-information-needed-from-oth){.section-name .selfRef} {#name-information-needed-from-oth}

This section identifies those of the above parameters that need external
information from neighbor devices (including the upstream devices). In
many cases, two-way dialogue with neighbor devices is needed to set or
optimize them.[¶](#section-3.3.1-1){.pilcrow}

-   [Information regarding the identity of a trust anchor is
    needed.[¶](#section-3.3.1-2.1){.pilcrow}]{#section-3.3.1-2.1}
-   [The device will need to discover another device from which it can
    acquire IPv6 address
    space.[¶](#section-3.3.1-2.2){.pilcrow}]{#section-3.3.1-2.2}
-   [Information regarding the initial prefix length for the role of
    each device is needed, particularly for its own downstream
    devices.[¶](#section-3.3.1-2.3){.pilcrow}]{#section-3.3.1-2.3}
-   [The default value of the IPv6 prefix length may be overridden by a
    non-default
    value.[¶](#section-3.3.1-2.4){.pilcrow}]{#section-3.3.1-2.4}
-   [The device will need to request and acquire one or more IPv6
    prefixes that can be assigned to this device and its downstream
    devices.[¶](#section-3.3.1-2.5){.pilcrow}]{#section-3.3.1-2.5}
-   [The device may respond to prefix delegation requests from its
    downstream
    devices.[¶](#section-3.3.1-2.6){.pilcrow}]{#section-3.3.1-2.6}
-   [The device may require the assignment of more IPv6 address space if
    it used up its assigned IPv6 address
    space.[¶](#section-3.3.1-2.7){.pilcrow}]{#section-3.3.1-2.7}
:::
:::

::: {#monitor}
::: {#section-3.3.2 .section}
#### [3.3.2.](#section-3.3.2){.section-number .selfRef} [Monitoring, Diagnostics, and Reporting](#name-monitoring-diagnostics-and-){.section-name .selfRef} {#name-monitoring-diagnostics-and-}

This section discusses what role devices should play in monitoring,
fault diagnosis, and reporting.[¶](#section-3.3.2-1){.pilcrow}

-   [The actual address assignments need to be logged for potential
    offline management
    operations.[¶](#section-3.3.2-2.1){.pilcrow}]{#section-3.3.2-2.1}
-   [In general, the usage situation regarding address space should be
    reported to the network administrators in an abstract way \-- for
    example, statistics or a visualized
    report.[¶](#section-3.3.2-2.2){.pilcrow}]{#section-3.3.2-2.2}
-   [A forecast of address exhaustion should be
    reported.[¶](#section-3.3.2-2.3){.pilcrow}]{#section-3.3.2-2.3}
:::
:::
:::
:::
:::
:::

::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Autonomic Edge Prefix Management Solution](#name-autonomic-edge-prefix-manag){.section-name .selfRef} {#name-autonomic-edge-prefix-manag}

This section introduces the building blocks for an autonomic edge prefix
management solution. As noted in [Section 1](#intro){.xref}, this is not
a complete description of a solution, which will depend on the detailed
design of the relevant Autonomic Service Agents (ASAs). It uses the
generic discovery and negotiation protocol defined by
\[[RFC8990](#RFC8990){.xref}\]. The relevant GRASP objectives are
defined in [Section
5](#prefixNegoOptions){.xref}.[¶](#section-4-1){.pilcrow}

The procedures described below are carried out by an ASA in each device
that participates in the solution. We will refer to this as the
PrefixManager ASA.[¶](#section-4-2){.pilcrow}

::: {#reqbehave}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Behavior of a Device Requesting a Prefix](#name-behavior-of-a-device-reques){.section-name .selfRef} {#name-behavior-of-a-device-reques}

If the device containing a PrefixManager ASA has used up its address
pool, it can request more space according to its requirements. It should
decide the length of the requested prefix and request it via the
mechanism described in [Section 6](#prefixManageParams){.xref}. Note
that although the device\'s role may define certain default allocation
lengths, those defaults might be changed dynamically, and the device
might request more, or less, address space due to some local operational
heuristic.[¶](#section-4.1-1){.pilcrow}

A PrefixManager ASA that needs additional address space should firstly
discover peers that may be able to provide extra address space. The ASA
should send out a GRASP Discovery message that contains a PrefixManager
Objective option (see [Section
2](https://www.rfc-editor.org/rfc/figure-1){.relref} of
\[[RFC8650](#RFC8650){.xref}\] and [Section
5.1](#prefixObjOption){.xref}) in order to discover peers also
supporting that option. Then, it should choose one such peer, most
likely the first to respond.[¶](#section-4.1-2){.pilcrow}

If the GRASP Discovery Response message carries a Divert option pointing
to an off-link PrefixManager ASA, the requesting ASA may initiate
negotiation with that ASA-diverted device to find out whether it can
provide the requested length of the prefix.[¶](#section-4.1-3){.pilcrow}

In any case, the requesting ASA will act as a GRASP negotiation
initiator by sending a GRASP Request message with a PrefixManager
Objective option. The ASA indicates in this option the length of the
requested prefix. This starts a GRASP negotiation
process.[¶](#section-4.1-4){.pilcrow}

During the subsequent negotiation, the ASA will decide at each step
whether to accept the offered prefix. That decision, and the decision to
end the negotiation, are implementation
choices.[¶](#section-4.1-5){.pilcrow}

The ASA could alternatively initiate GRASP discovery in rapid mode with
an embedded negotiation request, if it is
implemented.[¶](#section-4.1-6){.pilcrow}
:::
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Behavior of a Device Providing a Prefix](#name-behavior-of-a-device-provid){.section-name .selfRef} {#name-behavior-of-a-device-provid}

At least one device on the network must be configured with the initial
pool of available prefixes mentioned in [Section 3.2](#params){.xref}.
Apart from that requirement, any device may act as a provider of
prefixes.[¶](#section-4.2-1){.pilcrow}

A device that receives a Discovery message with a PrefixManager
Objective option should respond with a GRASP Response message if it
contains a PrefixManager ASA. Further details of the discovery process
are described in \[[RFC8990](#RFC8990){.xref}\]. When this ASA receives
a subsequent Request message, it should conduct a GRASP negotiation
sequence, using Negotiate, Confirm Waiting, and Negotiation End messages
as appropriate. The Negotiate messages carry a PrefixManager Objective
option, which will indicate the prefix and its length offered to the
requesting ASA. As described in \[[RFC8990](#RFC8990){.xref}\],
negotiation will continue until either end stops it with a Negotiation
End message. If the negotiation succeeds, the ASA that provides the
prefix will remove the negotiated prefix from its pool, and the
requesting ASA will add it. If the negotiation fails, the party sending
the Negotiation End message may include an error code
string.[¶](#section-4.2-2){.pilcrow}

During the negotiation, the ASA will decide at each step how large a
prefix to offer. That decision, and the decision to end the negotiation,
are implementation choices.[¶](#section-4.2-3){.pilcrow}

The ASA could alternatively negotiate in response to GRASP discovery in
rapid mode, if it is implemented.[¶](#section-4.2-4){.pilcrow}

This specification is independent of whether the PrefixManager ASAs are
all embedded in routers, but that would be a rather natural scenario. In
a hierarchical network topology, a given router typically provides
prefixes for routers below it in the hierarchy, and it is also likely to
contain the first PrefixManager ASA discovered by those downstream
routers. However, the GRASP discovery model, including its redirection
feature, means that this is not an exclusive scenario, and a downstream
PrefixManager ASA could negotiate a new prefix with a device other than
its upstream router.[¶](#section-4.2-5){.pilcrow}

A resource shortage may cause the gateway router to request more
resources in turn from its own upstream device. This would be another
independent GRASP discovery and negotiation process. During the
processing time, the gateway router should send a Confirm Waiting
message to the initial requesting router, to extend its timeout. When
the new resource becomes available, the gateway router responds with a
GRASP Negotiate message with a prefix length matching the
request.[¶](#section-4.2-6){.pilcrow}

The algorithm used to choose which prefixes to assign on the devices
that provide prefixes is an implementation
choice.[¶](#section-4.2-7){.pilcrow}
:::

::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Behavior after Successful Negotiation](#name-behavior-after-successful-n){.section-name .selfRef} {#name-behavior-after-successful-n}

Upon receiving a GRASP Negotiation End message that indicates that an
acceptable prefix length is available, the requesting device may use the
negotiated prefix without further messages.[¶](#section-4.3-1){.pilcrow}

There are use cases where the ANI/GRASP-based prefix management approach
can work together with DHCPv6-PD \[[RFC8415](#RFC8415){.xref}\] as a
complement. For example, the ANI/GRASP-based method can be used
intra-domain, while the DHCPv6-PD method works inter-domain (i.e.,
across an administrative boundary). Also, ANI/GRASP can be used inside
the domain, and DHCP/DHCPv6-PD can be used on the edge of the domain to
clients (non-ANI devices). Another similar use case would be ANI/GRASP
inside the domain, with RADIUS \[[RFC2865](#RFC2865){.xref}\] providing
prefixes to client devices.[¶](#section-4.3-2){.pilcrow}
:::

::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [Prefix Logging](#name-prefix-logging){.section-name .selfRef} {#name-prefix-logging}

Within the autonomic prefix management system, all prefix assignments
are done by devices without human intervention. It may be required that
all prefix assignment history be recorded \-- for example, to detect or
trace lost prefixes after outages or to meet legal requirements.
However, the logging and reporting process is out of scope for this
document.[¶](#section-4.4-1){.pilcrow}
:::
:::

::: {#prefixNegoOptions}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Autonomic Prefix Management Objectives](#name-autonomic-prefix-management){.section-name .selfRef} {#name-autonomic-prefix-management}

This section defines the GRASP technical objective options that are used
to support autonomic prefix management.[¶](#section-5-1){.pilcrow}

::: {#prefixObjOption}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Edge Prefix Objective Option](#name-edge-prefix-objective-optio){.section-name .selfRef} {#name-edge-prefix-objective-optio}

The PrefixManager Objective option is a GRASP Objective option
conforming to the GRASP specification \[[RFC8990](#RFC8990){.xref}\].
Its name is \"PrefixManager\" (see [Section 8](#iana){.xref}), and it
carries the following data items as its value: the prefix length and the
actual prefix bits. Since GRASP is based on CBOR (Concise Binary Object
Representation) \[[RFC8949](#RFC8949){.xref}\], the format of the
PrefixManager Objective option is described in the Concise Data
Definition Language (CDDL) \[[RFC8610](#RFC8610){.xref}\] as
follows:[¶](#section-5.1-1){.pilcrow}

::: {#section-5.1-2}
``` {.sourcecode .lang-cddl}
  objective = ["PrefixManager", objective-flags, loop-count,
               [length, ?prefix]]

  loop-count = 0..255         ; as in the GRASP specification
  objective-flags /=          ; as in the GRASP specification
  length = 0..128             ; requested or offered prefix length
  prefix = bytes .size 16     ; offered prefix in binary format
```

[¶](#section-5.1-2){.pilcrow}
:::

The use of the \"dry run\" mode of GRASP is [NOT RECOMMENDED]{.bcp14}
for this objective, because it would require both ASAs to store state
information about the corresponding negotiation, to no real benefit \--
the requesting ASA cannot base any decisions on the result of a
successful dry-run negotiation.[¶](#section-5.1-3){.pilcrow}
:::
:::

::: {#ipv4}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [IPv4 Extension](#name-ipv4-extension){.section-name .selfRef} {#name-ipv4-extension}

This section presents an extended version of the PrefixManager objective
that supports IPv4 by adding an extra flag:[¶](#section-5.2-1){.pilcrow}

::: {#section-5.2-2}
``` {.sourcecode .lang-cddl}
  objective = ["PrefixManager", objective-flags, loop-count, prefval]

  loop-count = 0..255         ; as in the GRASP specification
  objective-flags /=          ; as in the GRASP specification

  prefval /= pref6val
  pref6val = [version6, length, ?prefix]
  version6 = 6
  length = 0..128             ; requested or offered prefix length
  prefix = bytes .size 16     ; offered prefix in binary format

  prefval /= pref4val
  pref4val = [version4, length4, ?prefix4]
  version4 = 4
  length4 = 0..32             ; requested or offered prefix length
  prefix4 = bytes .size 4     ; offered prefix in binary format
```

[¶](#section-5.2-2){.pilcrow}
:::

Prefix and address management for IPv4 is considerably more difficult
than for IPv6, due to the prevalence of NAT, ambiguous addresses
\[[RFC1918](#RFC1918){.xref}\], and address sharing
\[[RFC6346](#RFC6346){.xref}\]. These complexities might require further
extending the objective with additional fields that are not defined by
this document.[¶](#section-5.2-3){.pilcrow}
:::
:::
:::
:::

::: {#prefixManageParams}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Prefix Management Parameters](#name-prefix-management-parameter){.section-name .selfRef} {#name-prefix-management-parameter}

An implementation of a prefix manager [MUST]{.bcp14} include default
settings of all necessary parameters. However, within a single
administrative domain, the network operator [MAY]{.bcp14} change default
parameters for all devices with a certain role. Thus, it would be
possible to apply an intended policy for every device in a simple way,
without traditional configuration files. As noted in [Section
4.1](#reqbehave){.xref}, individual autonomic devices may also change
their own behavior dynamically.[¶](#section-6-1){.pilcrow}

For example, the network operator could change the default prefix length
for each type of role. A prefix management parameters objective, which
contains mapping information of device roles and their default prefix
lengths, [MAY]{.bcp14} be flooded in the network, through the Autonomic
Control Plane (ACP) \[[RFC8994](#RFC8994){.xref}\]. The objective is
defined in CDDL as follows:[¶](#section-6-2){.pilcrow}

::: {#section-6-3}
``` {.sourcecode .lang-cddl}
  objective = ["PrefixManager.Params", objective-flags, any]

  loop-count = 0..255         ; as in the GRASP specification
  objective-flags /=          ; as in the GRASP specification
```

[¶](#section-6-3){.pilcrow}
:::

The \"any\" object would be the relevant parameter definitions (such as
the example below) transmitted as a CBOR object in an appropriate
format.[¶](#section-6-4){.pilcrow}

This could be flooded to all nodes, and any PrefixManager ASA that did
not receive it for some reason could obtain a copy using GRASP unicast
synchronization. Upon receiving the prefix management parameters, every
device can decide its default prefix length by matching its own
role.[¶](#section-6-5){.pilcrow}

::: {#exparam}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Example of Prefix Management Parameters](#name-example-of-prefix-managemen){.section-name .selfRef} {#name-example-of-prefix-managemen}

The parameters comprise mapping information of device roles and their
default prefix lengths in an autonomic domain. For example, suppose an
IPRAN (IP Radio Access Network) operator wants to configure the prefix
length of a Radio Network Controller Site Gateway (RSG) as 34, the
prefix length of an Aggregation Site Gateway (ASG) as 44, and the prefix
length of a Cell Site Gateway (CSG) as 56. This could be described in
the value of the PrefixManager.Params objective
as:[¶](#section-6.1-1){.pilcrow}

::: {#section-6.1-2}
``` {.sourcecode .lang-json}
[
   [["role", "RSG"],["prefix_length", 34]],
   [["role", "ASG"],["prefix_length", 44]],
   [["role", "CSG"],["prefix_length", 56]]
]
```

[¶](#section-6.1-2){.pilcrow}
:::

This example is expressed in JSON \[[RFC8259](#RFC8259){.xref}\], which
is easy to represent in CBOR.[¶](#section-6.1-3){.pilcrow}

An alternative would be to express the parameters in YANG
\[[RFC7950](#RFC7950){.xref}\] using the YANG-to-CBOR mapping
\[[CORE-YANG-CBOR](#CORE-YANG-CBOR){.xref}\].[¶](#section-6.1-4){.pilcrow}

For clarity, the background of the example is introduced below and can
also be regarded as a use case for the mechanism defined in this
document.[¶](#section-6.1-5){.pilcrow}

An IPRAN is used for mobile backhaul, including radio stations, RNCs
(Radio Network Controllers) (in 3G) or the packet core (in LTE), and the
IP network between them, as shown in [Figure 1](#IPRAN-topology){.xref}.
The eNB (Evolved Node B) entities, the RNC, the SGW (Serving Gateway),
and the MME (Mobility Management Entity) are mobile network entities
defined in 3GPP. The CSGs, ASGs, and RSGs are entities defined in the
IPRAN solution.[¶](#section-6.1-6){.pilcrow}

The IPRAN topology shown in [Figure 1](#IPRAN-topology){.xref} includes
Ring1, which is the circle following ASG1-\>RSG1-\>RSG2-\>ASG2-\>ASG1;
Ring2, following CSG1-\>ASG1-\>ASG2-\>CSG2-\>CSG1; and Ring3, following
CSG3-\>ASG1-\>ASG2-\>CSG3. In a real deployment of an IPRAN, there may
be more stations, rings, and routers in the topology, and normally the
network is highly dependent on human design and configuration, which is
neither flexible nor cost-effective.[¶](#section-6.1-7){.pilcrow}

[]{#name-ipran-topology-example}

::: {#IPRAN-topology}
::: {#section-6.1-8.1 .artwork .art-text .alignLeft}
    +------+   +------+
    | eNB1 |---| CSG1 |\
    +------+   +------+  \   +-------+       +------+           +-------+
                   |       \ |  ASG1 |-------| RSG1 |-----------|SGW/MME|
                   |  Ring2  +-------+       +------+ \        /+-------+
    +------+   +------+     /     |              |      \    /
    | eNB2 |---| CSG2 | \  /      |      Ring1   |        \/
    +------+   +------+   \  Ring3|              |        /\
                         / \      |              |      /   \
    +------+   +------+ /    \ +-------+      +------+/       \+-------+
    | eNB3 |---| CSG3 |--------|  ASG2 |------| RSG2 |---------|  RNC  |
    +------+   +------+        +-------+      +------+         +-------+
:::

[Figure 1](#figure-1){.selfRef}: [IPRAN Topology
Example](#name-ipran-topology-example){.selfRef}
:::

If ANI/GRASP is supported in the IPRAN, the network nodes should be able
to negotiate with each other and make some autonomic decisions according
to their own status and the information collected from the network. The
prefix management parameters should be part of the information they
communicate.[¶](#section-6.1-9){.pilcrow}

The routers should know the role of their neighbors, the default prefix
length for each type of role, etc. An ASG should be able to request
prefixes from an RSG, and a CSG should be able to request prefixes from
an ASG. In each request, the ASG/CSG should indicate the required prefix
length, or its role, which implies what length it needs by
default.[¶](#section-6.1-10){.pilcrow}
:::
:::
:::
:::

::: {#security}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Relevant security issues are discussed in
\[[RFC8990](#RFC8990){.xref}\]. The preferred security model is that
devices are trusted following the secure bootstrap procedure
\[[RFC8995](#RFC8995){.xref}\] and that a secure Autonomic Control Plane
(ACP) \[[RFC8994](#RFC8994){.xref}\] is in
place.[¶](#section-7-1){.pilcrow}

It is [RECOMMENDED]{.bcp14} that DHCPv6-PD, if used, should be
implemented using DHCPv6 authentication or Secure
DHCPv6.[¶](#section-7-2){.pilcrow}
:::
:::

::: {#iana}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document defines two new GRASP Objective option names:
\"PrefixManager\" and \"PrefixManager.Params\". The IANA has added these
to the \"GRASP Objective Names\" registry defined by
\[[RFC8990](#RFC8990){.xref}\].[¶](#section-8-1){.pilcrow}
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC7950\]
:   [Bjorklund, M., Ed.]{.refAuthor}, [\"The YANG 1.1 Data Modeling
    Language\"]{.refTitle}, [RFC 7950]{.seriesInfo}, [DOI
    10.17487/RFC7950]{.seriesInfo}, August 2016,
    \<<https://www.rfc-editor.org/info/rfc7950>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8259\]
:   [Bray, T., Ed.]{.refAuthor}, [\"The JavaScript Object Notation
    (JSON) Data Interchange Format\"]{.refTitle}, [STD 90]{.seriesInfo},
    [RFC 8259]{.seriesInfo}, [DOI 10.17487/RFC8259]{.seriesInfo},
    December 2017, \<<https://www.rfc-editor.org/info/rfc8259>\>.
:   

\[RFC8415\]
:   [Mrugalski, T.]{.refAuthor}, [Siodelski, M.]{.refAuthor},
    [Volz, B.]{.refAuthor}, [Yourtchenko, A.]{.refAuthor},
    [Richardson, M.]{.refAuthor}, [Jiang, S.]{.refAuthor},
    [Lemon, T.]{.refAuthor}, and [T. Winters]{.refAuthor}, [\"Dynamic
    Host Configuration Protocol for IPv6 (DHCPv6)\"]{.refTitle}, [RFC
    8415]{.seriesInfo}, [DOI 10.17487/RFC8415]{.seriesInfo}, November
    2018, \<<https://www.rfc-editor.org/info/rfc8415>\>.
:   

\[RFC8610\]
:   [Birkholz, H.]{.refAuthor}, [Vigano, C.]{.refAuthor}, and [C.
    Bormann]{.refAuthor}, [\"Concise Data Definition Language (CDDL): A
    Notational Convention to Express Concise Binary Object
    Representation (CBOR) and JSON Data Structures\"]{.refTitle}, [RFC
    8610]{.seriesInfo}, [DOI 10.17487/RFC8610]{.seriesInfo}, June 2019,
    \<<https://www.rfc-editor.org/info/rfc8610>\>.
:   

\[RFC8990\]
:   [Bormann, C.]{.refAuthor}, [Carpenter, B., Ed.]{.refAuthor}, and [B.
    Liu, Ed.]{.refAuthor}, [\"GeneRic Autonomic Signaling Protocol
    (GRASP)\"]{.refTitle}, [RFC 8990]{.seriesInfo}, [DOI
    10.17487/RFC8990]{.seriesInfo}, May 2021,
    \<<https://www.rfc-editor.org/info/rfc8990>\>.
:   

\[RFC8994\]
:   [Eckert, T., Ed.]{.refAuthor}, [Behringer, M., Ed.]{.refAuthor}, and
    [S. Bjarnason]{.refAuthor}, [\"An Autonomic Control Plane
    (ACP)\"]{.refTitle}, [RFC 8994]{.seriesInfo}, [DOI
    10.17487/RFC8994]{.seriesInfo}, May 2021,
    \<<https://www.rfc-editor.org/info/rfc8994>\>.
:   

\[RFC8995\]
:   [Pritikin, M.]{.refAuthor}, [Richardson, M.]{.refAuthor},
    [Eckert, T.]{.refAuthor}, [Behringer, M.]{.refAuthor}, and [K.
    Watsen]{.refAuthor}, [\"Bootstrapping Remote Secure Key
    Infrastructure (BRSKI)\"]{.refTitle}, [RFC 8995]{.seriesInfo}, [DOI
    10.17487/RFC8995]{.seriesInfo}, May 2021,
    \<<https://www.rfc-editor.org/info/rfc8995>\>.
:   
:::

::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[CORE-YANG-CBOR\]
:   [Veillette, M., Ed.]{.refAuthor}, [Petrov, I., Ed.]{.refAuthor}, and
    [A. Pelov]{.refAuthor}, [\"CBOR Encoding of Data Modeled with
    YANG\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-ietf-core-yang-cbor-15]{.seriesInfo}, 24
    January 2021,
    \<<https://tools.ietf.org/html/draft-ietf-core-yang-cbor-15>\>.
:   

\[DHCP-YANG-MODEL\]
:   [Liu, B., Ed.]{.refAuthor}, [Lou, K.]{.refAuthor}, and [C.
    Chen]{.refAuthor}, [\"Yang Data Model for DHCP
    Protocol\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-liu-dhc-dhcp-yang-model-07]{.seriesInfo}, 12
    October 2018,
    \<<https://tools.ietf.org/html/draft-liu-dhc-dhcp-yang-model-07>\>.
:   

\[RFC1918\]
:   [Rekhter, Y.]{.refAuthor}, [Moskowitz, B.]{.refAuthor},
    [Karrenberg, D.]{.refAuthor}, [de Groot, G. J.]{.refAuthor}, and [E.
    Lear]{.refAuthor}, [\"Address Allocation for Private
    Internets\"]{.refTitle}, [BCP 5]{.seriesInfo}, [RFC
    1918]{.seriesInfo}, [DOI 10.17487/RFC1918]{.seriesInfo}, February
    1996, \<<https://www.rfc-editor.org/info/rfc1918>\>.
:   

\[RFC2865\]
:   [Rigney, C.]{.refAuthor}, [Willens, S.]{.refAuthor},
    [Rubens, A.]{.refAuthor}, and [W. Simpson]{.refAuthor}, [\"Remote
    Authentication Dial In User Service (RADIUS)\"]{.refTitle}, [RFC
    2865]{.seriesInfo}, [DOI 10.17487/RFC2865]{.seriesInfo}, June 2000,
    \<<https://www.rfc-editor.org/info/rfc2865>\>.
:   

\[RFC3046\]
:   [Patrick, M.]{.refAuthor}, [\"DHCP Relay Agent Information
    Option\"]{.refTitle}, [RFC 3046]{.seriesInfo}, [DOI
    10.17487/RFC3046]{.seriesInfo}, January 2001,
    \<<https://www.rfc-editor.org/info/rfc3046>\>.
:   

\[RFC6221\]
:   [Miles, D., Ed.]{.refAuthor}, [Ooghe, S.]{.refAuthor},
    [Dec, W.]{.refAuthor}, [Krishnan, S.]{.refAuthor}, and [A.
    Kavanagh]{.refAuthor}, [\"Lightweight DHCPv6 Relay
    Agent\"]{.refTitle}, [RFC 6221]{.seriesInfo}, [DOI
    10.17487/RFC6221]{.seriesInfo}, May 2011,
    \<<https://www.rfc-editor.org/info/rfc6221>\>.
:   

\[RFC6346\]
:   [Bush, R., Ed.]{.refAuthor}, [\"The Address plus Port (A+P) Approach
    to the IPv4 Address Shortage\"]{.refTitle}, [RFC 6346]{.seriesInfo},
    [DOI 10.17487/RFC6346]{.seriesInfo}, August 2011,
    \<<https://www.rfc-editor.org/info/rfc6346>\>.
:   

\[RFC7575\]
:   [Behringer, M.]{.refAuthor}, [Pritikin, M.]{.refAuthor},
    [Bjarnason, S.]{.refAuthor}, [Clemm, A.]{.refAuthor},
    [Carpenter, B.]{.refAuthor}, [Jiang, S.]{.refAuthor}, and [L.
    Ciavaglia]{.refAuthor}, [\"Autonomic Networking: Definitions and
    Design Goals\"]{.refTitle}, [RFC 7575]{.seriesInfo}, [DOI
    10.17487/RFC7575]{.seriesInfo}, June 2015,
    \<<https://www.rfc-editor.org/info/rfc7575>\>.
:   

\[RFC7576\]
:   [Jiang, S.]{.refAuthor}, [Carpenter, B.]{.refAuthor}, and [M.
    Behringer]{.refAuthor}, [\"General Gap Analysis for Autonomic
    Networking\"]{.refTitle}, [RFC 7576]{.seriesInfo}, [DOI
    10.17487/RFC7576]{.seriesInfo}, June 2015,
    \<<https://www.rfc-editor.org/info/rfc7576>\>.
:   

\[RFC8650\]
:   [Voit, E.]{.refAuthor}, [Rahman, R.]{.refAuthor},
    [Nilsen-Nygaard, E.]{.refAuthor}, [Clemm, A.]{.refAuthor}, and [A.
    Bierman]{.refAuthor}, [\"Dynamic Subscription to YANG Events and
    Datastores over RESTCONF\"]{.refTitle}, [RFC 8650]{.seriesInfo},
    [DOI 10.17487/RFC8650]{.seriesInfo}, November 2019,
    \<<https://www.rfc-editor.org/info/rfc8650>\>.
:   

\[RFC8949\]
:   [Bormann, C.]{.refAuthor} and [P. Hoffman]{.refAuthor}, [\"Concise
    Binary Object Representation (CBOR)\"]{.refTitle}, [STD
    94]{.seriesInfo}, [RFC 8949]{.seriesInfo}, [DOI
    10.17487/RFC8949]{.seriesInfo}, December 2020,
    \<<https://www.rfc-editor.org/info/rfc8949>\>.
:   

\[RFC8993\]
:   [Behringer, M., Ed.]{.refAuthor}, [Carpenter, B.]{.refAuthor},
    [Eckert, T.]{.refAuthor}, [Ciavaglia, L.]{.refAuthor}, and [J.
    Nobre]{.refAuthor}, [\"A Reference Model for Autonomic
    Networking\"]{.refTitle}, [RFC 8993]{.seriesInfo}, [DOI
    10.17487/RFC8993]{.seriesInfo}, May 2021,
    \<<https://www.rfc-editor.org/info/rfc8993>\>.
:   
:::
:::

::: {#section-appendix.a .section}
## [Appendix A.](#section-appendix.a){.section-number .selfRef} [Deployment Overview](#name-deployment-overview){.section-name .selfRef} {#name-deployment-overview}

This appendix includes logical deployment models and explanations of the
target deployment models. Its purpose is to help in understanding the
mechanism described in this
document.[¶](#section-appendix.a-1){.pilcrow}

This appendix includes two subsections: [Appendix A.1](#app-a1){.xref}
for the two most common DHCP deployment models and [Appendix
A.2](#app-a2){.xref} for the PD deployment model described in this
document. It should be noted that these are just examples, and there are
many more deployment models.[¶](#section-appendix.a-2){.pilcrow}

::: {#app-a1}
::: {#section-a.1 .section}
## [A.1.](#section-a.1){.section-number .selfRef} [Address and Prefix Management with DHCP](#name-address-and-prefix-manageme){.section-name .selfRef} {#name-address-and-prefix-manageme}

Edge DHCP server deployment requires every edge router connecting to a
Customer Premises Equipment (CPE) device to be a DHCP server assigning
IPv4/IPv6 addresses to CPEs \-- and, optionally, IPv6 prefixes via
DHCPv6-PD for IPv6-capable CPEs that are routers and have LANs behind
them.[¶](#section-a.1-1){.pilcrow}

[]{#name-dhcp-deployment-model-witho}

::: {#fig2}
::: {#section-a.1-2.1 .artwork .art-text .alignLeft}
                                                 edge
            dynamic, "NETCONF/YANG"            interfaces
             <---------------> +-------------+
    +------+    <- telemetry   | edge router/|-+  -----  +-----+
    |config|  .... domain ...  | DHCP server | |  ...    | CPE |+  LANs
    |server|                   +-------------+ |  -----  +-----+| (---| )
    +------+                    +--------------+  DHCP/   +-----+
                                                 DHCPv6-PD
:::

[Figure 2](#figure-2){.selfRef}: [DHCP Deployment Model without a
Central DHCP Server](#name-dhcp-deployment-model-witho){.selfRef}
:::

This requires various coordination functions via some backend system
(depicted as the \"config server\" in [Figure 2](#fig2){.xref}): the
address prefixes on the edge interfaces should be slightly larger than
required for the number of CPEs connected so that the overall address
space is best used.[¶](#section-a.1-3){.pilcrow}

The config server needs to provision edge interface address prefixes and
DHCP parameters for every edge router. If prefixes that are too
fine-grained are used, this will result in large routing tables across
the domain shown in the figure. If prefixes that are too coarse-grained
are used, address space is wasted. (This is less of a concern for IPv6,
but if the model includes IPv4, it is a very serious
concern.)[¶](#section-a.1-4){.pilcrow}

There is no standard that describes algorithms for how configuration
servers would best perform this ongoing dynamic provisioning to optimize
routing table size and address space
utilization.[¶](#section-a.1-5){.pilcrow}

There are currently no complete YANG data models that a config server
could use to perform these actions (including telemetry of assigned
addresses from such distributed DHCP servers). For example, a YANG data
model for controlling DHCP server operations is still being developed
\[[DHCP-YANG-MODEL](#DHCP-YANG-MODEL){.xref}\].[¶](#section-a.1-6){.pilcrow}

Due to these and other problems related to the above model, the more
common DHCP deployment model is as follows:[¶](#section-a.1-7){.pilcrow}

[]{#name-dhcp-deployment-model-with-}

::: {#section-a.1-8.1 .artwork .art-text .alignLeft}
    +------+                                      edge
    |config|    initial, "CLI"                   interfaces
    |server| ----------------> +-------------+
    +------+                   | edge router/|-+  -----  +-----+
       |     .... domain ...   | DHCP relay  | |  ...    | CPE |+  LANs
    +------+                   +-------------+ |  -----  +-----+| (---| )
    |DHCP  |                    +--------------+  DHCP/   +-----+
    |server|                                     DHCPv6-PD
    +------+
:::

[Figure 3](#figure-3){.selfRef}: [DHCP Deployment Model with a Central
DHCP Server](#name-dhcp-deployment-model-with-){.selfRef}

Dynamic provisioning changes to edge routers are avoided by using a
central DHCP server and reducing the edge router from DHCP server to
DHCP relay. The \"configuration\" on the edge routers is static. The
DHCP relay function inserts an \"edge interface\" and/or
subscriber-identifying options into DHCP requests from CPEs (e.g.,
\[[RFC3046](#RFC3046){.xref}\] \[[RFC6221](#RFC6221){.xref}\]), and the
DHCP server has complete policies for address assignments and prefixes
usable on every edge router / interface / subscriber group. When the
DHCP relay sees the DHCP reply, it inserts static routes for the
assigned address / address prefix into the routing table of the edge
router; these routes are then to be distributed by the IGP (or BGP)
inside the domain to make the CPE and LANs reachable across the domain
shown in the figure.[¶](#section-a.1-9){.pilcrow}

There is no comprehensive standardization of these solutions. For
example, \[[RFC8415](#RFC8415){.xref}\], [Section
19.1.3](https://www.rfc-editor.org/rfc/rfc8415#section-19.1.3){.relref}
simply refers to \"a \[non-defined\] protocol or other out-of-band
communication to configure routing information for delegated prefixes on
any router through which the client may forward
traffic.\"[¶](#section-a.1-10){.pilcrow}
:::
:::

::: {#app-a2}
::: {#section-a.2 .section}
## [A.2.](#section-a.2){.section-number .selfRef} [Prefix Management with ANI/GRASP](#name-prefix-management-with-ani-){.section-name .selfRef} {#name-prefix-management-with-ani-}

Using the ANI and prefix management ASAs (PM-ASAs) using GRASP, the
deployment model is intended to look as
follows:[¶](#section-a.2-1){.pilcrow}

[]{#name-deployment-model-using-ani-}

::: {#fig4}
::: {#section-a.2-2.1 .artwork .art-text .alignLeft}
    |<............ ANI domain / ACP............>| (...) ........->

                                       Roles
                                         |
                                         v   "Edge routers"
    GRASP parameter               +----------+
     Network-wide                 |  PM-ASA  | downstream
    parameters/policies           |  (DHCP   | interfaces
         |                        |functions)| ------
         v  "central device"      +----------+
    +------+                            ^             +--------+
    |PM-ASA|      <............GRASP ....      ....   |  CPE   |-+ (LANs)
    +------+             .              v             |(PM-ASA)| |  ---|
         .           +........+   +----------+        +--------+ |
    +...........+    . PM-ASA .   |  PM-ASA  | ------  +---------+
    .DHCP server.    +........+   |  (DHCP   | SLAAC/
    +...........+  "intermediate  |functions)| DHCP/DHCP-PD
                      router"     +----------+
:::

[Figure 4](#figure-4){.selfRef}: [Deployment Model Using
ANI/GRASP](#name-deployment-model-using-ani-){.selfRef}
:::

The network runs an ANI domain with an ACP
\[[RFC8994](#RFC8994){.xref}\] between some central device (e.g., a
router or an ANI-enabled management device) and the edge routers.
ANI/ACP provides a secure, zero-touch communication channel between the
devices and enables the use of GRASP \[[RFC8990](#RFC8990){.xref}\] not
only for peer-to-peer communication but also for
distribution/flooding.[¶](#section-a.2-3){.pilcrow}

The central devices and edge routers run software in the form of ASAs to
support this document\'s autonomic IPv6 edge prefix management. PM-ASAs
as discussed below together comprise the Autonomic Prefix Management
Function.[¶](#section-a.2-4){.pilcrow}

Edge routers can have different roles based on the type and number of
CPEs attaching to them. Each edge router could be an RSG, ASG, or CSG in
mobile aggregation networks (see [Section 6.1](#exparam){.xref}).
Mechanisms outside the scope of this document make routers aware of
their roles.[¶](#section-a.2-5){.pilcrow}

Some considerations related to the deployment model are as
follows.[¶](#section-a.2-6){.pilcrow}

1.  ::: {#section-a.2-7.1}
    In a minimum prefix management solution, the central device uses the
    PrefixManager.Params GRASP objective introduced in this document to
    disseminate network-wide, per-role parameters to edge routers. The
    PM-ASA uses the parameters that apply to its own role to locally
    configure preexisting addressing functions. Because the PM-ASA does
    not manage the dynamic assignment of actual IPv6 address prefixes in
    this case, the following options can be
    considered:[¶](#section-a.2-7.1.1){.pilcrow}

    []{.break}

    1.a
    :   The edge router connects via downstream interfaces to each
        (host) CPE that requires an address. The PM-ASA sets up for each
        such interface a DHCP requesting router (according to
        \[[RFC8415](#RFC8415){.xref}\]) to request an IPv6 prefix for
        the interface. The router\'s address on the downstream interface
        can be another parameter from the GRASP objective. The CPEs
        assign addresses in the prefix via Router Advertisements (RAs),
        or the PM‑ASA manages a local DHCPv6 server to assign addresses
        to the CPEs. A central DHCP server acting as the DHCP delegating
        router (according to \[[RFC8415](#RFC8415){.xref}\]) is
        required. Its address can be another parameter from the GRASP
        objective.[¶](#section-a.2-7.1.2.1){.pilcrow}
    :   

    1.b
    :   The edge router also connects via downstream interfaces to
        (customer managed) CPEs that are routers and act as DHCPv6
        requesting routers. The need to support this could be derived
        from role or GRASP parameters, and the PM‑ASA sets up a DHCP
        relay function to pass on requests to the central DHCP server as
        in point 1.a.[¶](#section-a.2-7.1.2.2){.pilcrow}
    :   
    :::

2.  ::: {#section-a.2-7.2}
    In a solution without a central DHCP server, the PM-ASA on the edge
    routers not only learns parameters from PrefixManager.Params but
    also utilizes GRASP to request/negotiate actual IPv6 prefix
    delegation via the GRASP PrefixManager objective, as described in
    more detail below. In the simplest case, these prefixes are
    delegated via this GRASP objective from the PM-ASA in the central
    device. This device must be provisioned initially with a large pool
    of prefixes. The delegated prefixes are then used by the PM-ASA on
    the edge routers to configure prefixes on their downstream
    interfaces to assign addresses via RA/SLAAC to host CPEs. The PM-ASA
    may also start local DHCP servers (as in point 1.a) to assign
    addresses via DHCP to the CPEs from the prefixes it received. This
    includes both host CPEs requesting IPv6 addresses and router CPEs
    that request IPv6 prefixes. The PM-ASA needs to manage the address
    pool(s) it has requested via GRASP and allocate sub-address pools to
    interfaces and the local DHCP servers it starts. It needs to monitor
    the address utilization and accordingly request more address
    prefixes if its existing prefixes are exhausted, or return address
    prefixes when they are unneeded.[¶](#section-a.2-7.2.1){.pilcrow}

    This solution is quite similar to the previous IPv6 DHCP deployment
    model without a central DHCP server, and ANI/ACP/GRASP and the
    PM-ASA do provide the automation to make this approach work more
    easily than is possible today.[¶](#section-a.2-7.2.2){.pilcrow}
    :::

3.  [The address pools from which prefixes are allocated do not all need
    to be taken from one central location. An edge-router PM‑ASA that
    received a big (short) prefix from a central PM-ASA could offer
    smaller sub-prefixes to a neighboring edge-router PM‑ASA. GRASP
    could be used in such a way that the PM-ASA would find and select
    the objective from the closest neighboring PM‑ASA, therefore
    allowing aggregation to be maximized: a PM‑ASA would only request
    further smaller prefixes when it exhausts its own pool (from the
    central location) and cannot get further large prefixes from that
    central location anymore. Because the overflow prefixes taken from a
    topologically nearby PM‑ASA, the number of longer prefixes that have
    to be injected into the routing tables is limited and the
    topological proximity increases the chances that aggregation of
    prefixes in the IGP can most likely limit the geography in which the
    longer prefixes need to be
    routed.[¶](#section-a.2-7.3){.pilcrow}]{#section-a.2-7.3}

4.  [Instead of peer-to-peer optimization of prefix delegation, a
    hierarchy of PM-ASAs can be built (indicated in [Figure
    4](#fig4){.xref} via a dotted intermediate router). This would
    require additional parameters in the PrefixManager objective to
    allow the creation of a hierarchy of PM-ASAs across which the
    prefixes can be
    delegated.[¶](#section-a.2-7.4){.pilcrow}]{#section-a.2-7.4}

5.  [In cases where CPEs are also part of the ANI domain (e.g.,
    \"managed CPEs\"), then GRASP will extend into the actual customer
    sites and can also run a PM-ASA. All the options described in points
    1 to 4 above would then apply to the CPE as the edge router, with
    the major changes being that (a) a CPE router will most likely not
    need to run DHCPv6-PD itself, but only DHCP address assignment
    and (b) the edge routers to which the CPE connects would most likely
    become ideal places on which to run a hierarchical instance of
    PD-ASAs, as outlined in point
    1.[¶](#section-a.2-7.5){.pilcrow}]{#section-a.2-7.5}
:::
:::
:::

::: {#ack}
::: {#section-appendix.b .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

Valuable comments were received from [William Atwood]{.contact-name},
[Fred Baker]{.contact-name}, [Michael Behringer]{.contact-name}, [Ben
Campbell]{.contact-name}, [Laurent Ciavaglia]{.contact-name}, [Toerless
Eckert]{.contact-name}, [Joel Halpern]{.contact-name}, [Russ
Housley]{.contact-name}, [Geoff Huston]{.contact-name}, [Warren
Kumari]{.contact-name}, [Dan Romascanu]{.contact-name}, and [Chongfeng
Xie]{.contact-name}.[¶](#section-appendix.b-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Sheng Jiang ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei Technologies Co., Ltd]{.org}
:::

::: {.left dir="auto"}
[Q14, Huawei Campus]{.extended-address}
:::

::: {.left dir="auto"}
[No. 156 Beiqing Road]{.street-address}
:::

::: {.left dir="auto"}
[Hai-Dian District, Beijing]{.locality}
:::

::: {.left dir="auto"}
[100095]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <jiangsheng@huawei.com>
:::

::: {.left dir="auto"}
[Zongpeng Du]{.fn .nameRole}
:::

::: {.left dir="auto"}
[China Mobile]{.org}
:::

::: {.left dir="auto"}
[32 Xuanwumen West St]{.street-address}
:::

::: {.left dir="auto"}
[Xicheng District, Beijing]{.locality}
:::

::: {.left dir="auto"}
[100053]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <duzongpeng@chinamobile.com>
:::

::: {.left dir="auto"}
[Brian Carpenter]{.fn .nameRole}
:::

::: {.left dir="auto"}
[University of Auckland]{.org}
:::

::: {.left dir="auto"}
[School of Computer Science]{.extended-address}
:::

::: {.left dir="auto"}
[PB 92019]{.street-address}
:::

::: {.left dir="auto"}
[Auckland]{.locality} [1142]{.postal-code}
:::

::: {.left dir="auto"}
[New Zealand]{.country-name}
:::

::: email
Email: <brian.e.carpenter@gmail.com>
:::

::: {.left dir="auto"}
[Qiong Sun]{.fn .nameRole}
:::

::: {.left dir="auto"}
[China Telecom]{.org}
:::

::: {.left dir="auto"}
[118 Xizhimennei St]{.street-address}
:::

::: {.left dir="auto"}
[Beijing]{.locality}
:::

::: {.left dir="auto"}
[100035]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <sunqiong@chinatelecom.cn>
:::
:::
:::
