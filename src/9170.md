  RFC 9170          Use It or Lose It   December 2021
  ----------------- ------------------- ---------------
  Thomson & Pauly   Informational       \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Architecture Board (IAB)

RFC:
:   [9170](https://www.rfc-editor.org/rfc/rfc9170){.eref}

Category:
:   Informational

Published:
:   December 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    M. Thomson
    :::
    :::

    ::: author
    ::: author-name
    T. Pauly
    :::
    :::
:::

# RFC 9170 {#rfcnum}

# Long-Term Viability of Protocol Extension Mechanisms {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The ability to change protocols depends on exercising the extension and
version-negotiation mechanisms that support change. This document
explores how regular use of new protocol features can ensure that it
remains possible to deploy changes to a protocol. Examples are given
where lack of use caused changes to be more difficult or
costly.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for informational
purposes.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Architecture Board (IAB) and
represents information that the IAB has deemed valuable to provide for
permanent record. It represents the consensus of the Internet
Architecture Board (IAB). Documents approved for publication by the IAB
are not candidates for any level of Internet Standard; see Section 2 of
RFC 7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9170>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Imperfect Implementations Limit Protocol
    Evolution](#name-imperfect-implementations-l){.xref}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Good Protocol Design Is Not Itself
        Sufficient](#name-good-protocol-design-is-not){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Disuse Can Hide
        Problems](#name-disuse-can-hide-problems){.xref}
        :::

    -   ::: {#section-toc.1-1.2.2.3}
        [2.3](#section-2.3){.xref}.  [Multi-party Interactions and
        Middleboxes](#name-multi-party-interactions-an){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Active Use](#name-active-use){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Dependency Is
        Better](#name-dependency-is-better){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Version
        Negotiation](#name-version-negotiation){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Falsifying Active
        Use](#name-falsifying-active-use){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [Examples of Active
        Use](#name-examples-of-active-use){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [Restoring Active
        Use](#name-restoring-active-use){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Complementary
    Techniques](#name-complementary-techniques){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Fewer Extension
        Points](#name-fewer-extension-points){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Invariants](#name-invariants){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Limiting
        Participation](#name-limiting-participation){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [Effective
        Feedback](#name-effective-feedback){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Informative
    References](#name-informative-references){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [Appendix A](#appendix-A){.xref}.  [Examples](#name-examples){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [A.1](#appendix-A.1){.xref}.  [DNS](#name-dns){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [A.2](#appendix-A.2){.xref}.  [HTTP](#name-http){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [A.3](#appendix-A.3){.xref}.  [IP](#name-ip){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [A.4](#appendix-A.4){.xref}.  [SNMP](#name-snmp){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.5}
        [A.5](#appendix-A.5){.xref}.  [TCP](#name-tcp){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.6}
        [A.6](#appendix-A.6){.xref}.  [TLS](#name-tls){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [](#appendix-B){.xref}[IAB Members at the Time of
    Approval](#name-iab-members-at-the-time-of-){.xref}
    :::

-   ::: {#section-toc.1-1.10}
    [](#appendix-C){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-D){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

A successful protocol \[[SUCCESS](#RFC5218){.xref}\] needs to change in
ways that allow it to continue to fulfill the changing needs of its
users. New use cases, conditions, and constraints on the deployment of a
protocol can render a protocol that does not change
obsolete.[¶](#section-1-1){.pilcrow}

Usage patterns and requirements for a protocol shift over time. In
response, implementations might adjust usage patterns within the
constraints of the protocol, the protocol could be extended, or a
replacement protocol might be developed. Experience with Internet-scale
protocol deployment shows that each option comes with different costs.
\[[TRANSITIONS](#RFC8170){.xref}\] examines the problem of protocol
evolution more broadly.[¶](#section-1-2){.pilcrow}

An extension point is a mechanism that allows a protocol to be changed
or enhanced. This document examines the specific conditions that
determine whether protocol maintainers have the ability to design and
deploy new or modified protocols via their specified extension points.
[Section 2](#implementations){.xref} highlights some historical examples
of difficulties in transitions to new protocol features. [Section
3](#use-it){.xref} argues that ossified protocols are more difficult to
update and describes how successful protocols make frequent use of new
extensions and code points. [Section 4](#other){.xref} outlines several
additional strategies that might aid in ensuring that protocol changes
remain possible over time.[¶](#section-1-3){.pilcrow}

The experience that informs this document is predominantly at \"higher\"
layers of the network stack, in protocols with limited numbers of
participants. Though similar issues are present in many protocols that
operate at scale, the trade-offs involved with applying some of the
suggested techniques can be more complex when there are many
participants, such as at the network layer or in routing
systems.[¶](#section-1-4){.pilcrow}
:::
:::

::: {#implementations}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Imperfect Implementations Limit Protocol Evolution](#name-imperfect-implementations-l){.section-name .selfRef} {#name-imperfect-implementations-l}

It can be extremely difficult to deploy a change to a protocol if
implementations with which the new deployment needs to interoperate do
not operate predictably. Variation in how new code points or extensions
are handled can be the result of bugs in implementation or
specifications. Unpredictability can manifest as errors, crashes,
timeouts, abrupt termination of sessions, or disappearances of
endpoints.[¶](#section-2-1){.pilcrow}

The risk of interoperability problems can in turn make it infeasible to
deploy certain protocol changes. If deploying a new code point or
extension makes an implementation less reliable than others, even if
only in rare cases, it is far less likely that implementations will
adopt the change.[¶](#section-2-2){.pilcrow}

Deploying a change to a protocol could require implementations to fix a
substantial proportion of the bugs that the change exposes. This can
involve a difficult process that includes identifying the cause of these
errors, finding the responsible implementation(s), coordinating a bug
fix and release plan, contacting users and/or the operator of affected
services, and waiting for the fix to be
deployed.[¶](#section-2-3){.pilcrow}

Given the effort involved in fixing problems, the existence of these
sorts of bugs can outright prevent the deployment of some types of
protocol changes, especially for protocols involving multiple parties or
that are considered critical infrastructure (e.g., IP, BGP, DNS, or
TLS). It could even be necessary to come up with a new protocol design
that uses a different method to achieve the same
result.[¶](#section-2-4){.pilcrow}

This document only addresses cases where extensions are not deliberately
blocked. Some deployments or implementations apply policies that
explicitly prohibit the use of unknown capabilities. This is especially
true of functions that seek to make security guarantees, like
firewalls.[¶](#section-2-5){.pilcrow}

The set of interoperable features in a protocol is often the subset of
its features that have some value to those implementing and deploying
the protocol. It is not always the case that future extensibility is in
that set.[¶](#section-2-6){.pilcrow}

::: {#not-good-enough}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Good Protocol Design Is Not Itself Sufficient](#name-good-protocol-design-is-not){.section-name .selfRef} {#name-good-protocol-design-is-not}

It is often argued that the careful design of a protocol extension point
or version-negotiation capability is critical to the freedom that it
ultimately offers.[¶](#section-2.1-1){.pilcrow}

RFC 6709 \[[EXTENSIBILITY](#RFC6709){.xref}\] contains a great deal of
well-considered advice on designing for extensions. It includes the
following advice:[¶](#section-2.1-2){.pilcrow}

> This means that, to be useful, a protocol version-negotiation
> mechanism should be simple enough that it can reasonably be assumed
> that all the implementers of the first protocol version at least
> managed to implement the version-negotiation mechanism
> correctly.[¶](#section-2.1-3.1){.pilcrow}

There are a number of protocols for which this has proven to be
insufficient in practice. These protocols have imperfect implementations
of these mechanisms. Mechanisms that aren\'t used are the ones that fail
most often. The same paragraph from RFC 6709 acknowledges the existence
of this problem but does not offer any
remedy:[¶](#section-2.1-4){.pilcrow}

> The nature of protocol version-negotiation mechanisms is that, by
> definition, they don\'t get widespread real-world testing until
> **after** the base protocol has been deployed for a while, and its
> deficiencies have become evident.[¶](#section-2.1-5.1){.pilcrow}

Indeed, basic interoperability is considered critical early in the
deployment of a protocol. A desire to deploy can result in early focus
on a reduced feature set, which could result in deferring implementation
of version-negotiation and extension mechanisms. This leads to these
mechanisms being particularly affected by this
problem.[¶](#section-2.1-6){.pilcrow}
:::
:::

::: {#disuse}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Disuse Can Hide Problems](#name-disuse-can-hide-problems){.section-name .selfRef} {#name-disuse-can-hide-problems}

There are many examples of extension points in protocols that have been
either completely unused or their use was so infrequent that they could
no longer be relied upon to function
correctly.[¶](#section-2.2-1){.pilcrow}

[Appendix A](#examples){.xref} includes examples of disuse in a number
of widely deployed Internet protocols.[¶](#section-2.2-2){.pilcrow}

Even where extension points have multiple valid values, if the set of
permitted values does not change over time, there is still a risk that
new values are not tolerated by existing implementations. If the set of
values for a particular field of a protocol or the order in which these
values appear remains fixed over a long period, some implementations
might not correctly handle a new value when it is introduced. For
example, implementations of TLS broke when new values of the
signature_algorithms extension were
introduced.[¶](#section-2.2-3){.pilcrow}
:::
:::

::: {#middleboxes}
::: {#section-2.3 .section}
### [2.3.](#section-2.3){.section-number .selfRef} [Multi-party Interactions and Middleboxes](#name-multi-party-interactions-an){.section-name .selfRef} {#name-multi-party-interactions-an}

One of the key challenges in deploying new features is ensuring
compatibility with all actors that could be involved in the protocol.
Even the most superficially simple protocols can often involve more
actors than is immediately apparent.[¶](#section-2.3-1){.pilcrow}

The design of extension points needs to consider what actions
middleboxes might take in response to a protocol change as well as the
effect those actions could have on the operation of the
protocol.[¶](#section-2.3-2){.pilcrow}

Deployments of protocol extensions also need to consider the impact of
the changes on entities beyond protocol participants and middleboxes.
Protocol changes can affect the behavior of applications or systems that
don\'t directly interact with the protocol, such as when a protocol
change modifies the formatting of data delivered to an
application.[¶](#section-2.3-3){.pilcrow}
:::
:::
:::
:::

::: {#use-it}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Active Use](#name-active-use){.section-name .selfRef} {#name-active-use}

The design of a protocol for extensibility and eventual replacement
\[[EXTENSIBILITY](#RFC6709){.xref}\] does not guarantee the ability to
exercise those options. The set of features that enable future evolution
need to be interoperable in the first implementations and deployments of
the protocol. Implementation of mechanisms that support evolution is
necessary to ensure that they remain available for new uses, and history
has shown this occurs almost exclusively through active mechanism
use.[¶](#section-3-1){.pilcrow}

Only by using the extension capabilities of a protocol is the
availability of that capability assured. \"Using\" here includes
specifying, implementing, and deploying capabilities that rely on the
extension capability. Protocols that fail to use a mechanism, or a
protocol that only rarely uses a mechanism, could lead to that mechanism
being unreliable.[¶](#section-3-2){.pilcrow}

Implementations that routinely see new values are more likely to
correctly handle new values. More frequent changes will improve the
likelihood that incorrect handling or intolerance is discovered and
rectified. The longer an intolerant implementation is deployed, the more
difficult it is to correct.[¶](#section-3-3){.pilcrow}

Protocols that routinely add new extensions and code points rarely have
trouble adding additional ones especially when the handling of new
versions or extensions are well defined. The definition of mechanisms
alone is insufficient; it is the assured implementation and active use
of those mechanisms that determines their
availability.[¶](#section-3-4){.pilcrow}

What constitutes \"active use\" can depend greatly on the environment in
which a protocol is deployed. The frequency of changes necessary to
safeguard some mechanisms might be slow enough to attract ossification
in another protocol deployment, while being excessive in
others.[¶](#section-3-5){.pilcrow}

::: {#need-it}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Dependency Is Better](#name-dependency-is-better){.section-name .selfRef} {#name-dependency-is-better}

The easiest way to guarantee that a protocol mechanism is used is to
make the handling of it critical to an endpoint participating in that
protocol. This means that implementations must rely on both the
existence of extension mechanisms and their continued, repeated
expansion over time.[¶](#section-3.1-1){.pilcrow}

For example, the message format in SMTP relies on header fields for most
of its functions, including the most basic delivery functions. A
deployment of SMTP cannot avoid including an implementation of header
field handling. In addition to this, the regularity with which new
header fields are defined and used ensures that deployments frequently
encounter header fields that they do not yet (and may never) understand.
An SMTP implementation therefore needs to be able to both process header
fields that it understands and ignore those that it does
not.[¶](#section-3.1-2){.pilcrow}

In this way, implementing the extensibility mechanism is not merely
mandated by the specification, it is crucial to the functioning of a
protocol deployment. Should an implementation fail to correctly
implement the mechanism, that failure would quickly become
apparent.[¶](#section-3.1-3){.pilcrow}

Caution is advised to avoid assuming that building a dependency on an
extension mechanism is sufficient to ensure availability of that
mechanism in the long term. If the set of possible uses is narrowly
constrained and deployments do not change over time, implementations
might not see new variations or assume a narrower interpretation of what
is possible. Those implementations might still exhibit errors when
presented with new variations.[¶](#section-3.1-4){.pilcrow}
:::
:::

::: {#version-negotiation}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Version Negotiation](#name-version-negotiation){.section-name .selfRef} {#name-version-negotiation}

As noted in [Section 2.1](#not-good-enough){.xref}, protocols that
provide version-negotiation mechanisms might not be able to test that
feature until a new version is deployed. One relatively successful
design approach has been to use the protocol selection mechanisms built
into a lower-layer protocol to select the protocol. This could allow a
version-negotiation mechanism to benefit from active use of the
extension point by other protocols.[¶](#section-3.2-1){.pilcrow}

For instance, all published versions of IP contain a version number as
the four high bits of the first header byte. However, version selection
using this field proved to be unsuccessful. Ultimately, successful
deployment of IPv6 over Ethernet \[[RFC2464](#RFC2464){.xref}\] required
a different EtherType from IPv4. This change took advantage of the
already diverse usage of EtherType.[¶](#section-3.2-2){.pilcrow}

Other examples of this style of design include Application-Layer
Protocol Negotiation (\[[ALPN](#RFC7301){.xref}\]) and HTTP content
negotiation ([Section
12](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19#section-12){.relref}
of
\[[HTTP](#I-D.ietf-httpbis-semantics){.xref}\]).[¶](#section-3.2-3){.pilcrow}

This technique relies on the code point being usable. For instance, the
IP protocol number is known to be unreliable and therefore not suitable
\[[NEW-PROTOCOLS](#NEW-PROTOCOLS){.xref}\].[¶](#section-3.2-4){.pilcrow}
:::
:::

::: {#grease}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Falsifying Active Use](#name-falsifying-active-use){.section-name .selfRef} {#name-falsifying-active-use}

\"Grease\" was originally defined for TLS \[[GREASE](#RFC8701){.xref}\]
but has been adopted by other protocols such as QUIC
\[[QUIC](#RFC9000){.xref}\]. Grease identifies lack of use as an issue
(protocol mechanisms \"rusting\" shut) and proposes reserving values for
extensions that have no semantic value
attached.[¶](#section-3.3-1){.pilcrow}

The design in \[[GREASE](#RFC8701){.xref}\] is aimed at the style of
negotiation most used in TLS, where one endpoint offers a set of options
and the other chooses the one that it most prefers from those that it
supports. An endpoint that uses grease randomly offers options, usually
just one, from a set of reserved values. These values are guaranteed to
never be assigned real meaning, so its peer will never have cause to
genuinely select one of these values.[¶](#section-3.3-2){.pilcrow}

More generally, greasing is used to refer to any attempt to exercise
extension points without changing endpoint behavior other than to
encourage participants to tolerate new or varying values of protocol
elements.[¶](#section-3.3-3){.pilcrow}

The principle that grease operates on is that an implementation that is
regularly exposed to unknown values is less likely to be intolerant of
new values when they appear. This depends largely on the assumption that
the difficulty of implementing the extension mechanism correctly is as
easy or easier than implementing code to identify and filter out
reserved values. Reserving random or unevenly distributed values for
this purpose is thought to further discourage special
treatment.[¶](#section-3.3-4){.pilcrow}

Without reserved greasing code points, an implementation can use code
points from spaces used for private or experimental use if such a range
exists. In addition to the risk of triggering participation in an
unwanted experiment, this can be less effective. Incorrect
implementations might still be able to identify these code points and
ignore them.[¶](#section-3.3-5){.pilcrow}

In addition to advertising bogus capabilities, an endpoint might also
selectively disable noncritical protocol elements to test the ability of
peers to handle the absence of certain
capabilities.[¶](#section-3.3-6){.pilcrow}

This style of defensive design is limited because it is only
superficial. As greasing only mimics active use of an extension point,
it only exercises a small part of the mechanisms that support
extensibility. More critically, it does not easily translate to all
forms of extension points. For instance, highest mutually supported
version (HMSV) negotiation cannot be greased in this fashion. Other
techniques might be necessary for protocols that don\'t rely on the
particular style of exchange that is predominant in
TLS.[¶](#section-3.3-7){.pilcrow}

Grease is deployed with the intent of quickly revealing errors in
implementing the mechanisms it safeguards. Though it has been effective
at revealing problems in some cases with TLS, the efficacy of greasing
isn\'t proven more generally. Where implementations are able to tolerate
a non-zero error rate in their operation, greasing offers a potential
option for safeguarding future extensibility. However, this relies on
there being a sufficient proportion of participants that are willing to
invest the effort and tolerate the risk of interoperability
failures.[¶](#section-3.3-8){.pilcrow}
:::
:::

::: {#ex-active}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [Examples of Active Use](#name-examples-of-active-use){.section-name .selfRef} {#name-examples-of-active-use}

Header fields in email \[[SMTP](#RFC5321){.xref}\], HTTP
\[[HTTP](#I-D.ietf-httpbis-semantics){.xref}\], and SIP
\[[SIP](#RFC3261){.xref}\] all derive from the same basic design, which
amounts to a list of name/value pairs. There is no evidence of
significant barriers to deploying header fields with new names and
semantics in email and HTTP as clients and servers generally ignore
headers they do not understand or need. The widespread deployment of SIP
back-to-back user agents (B2BUAs), which generally do not ignore unknown
fields, means that new SIP header fields do not reliably reach peers.
This does not necessarily cause interoperability issues in SIP but
rather causes features to remain unavailable until the B2BUA is updated.
All three protocols are still able to deploy new features reliably, but
SIP features are deployed more slowly due to the larger number of active
participants that need to support new
features.[¶](#section-3.4-1){.pilcrow}

As another example, the attribute-value pairs (AVPs) in Diameter
\[[DIAMETER](#RFC6733){.xref}\] are fundamental to the design of the
protocol. Any use of Diameter requires exercising the ability to add new
AVPs. This is routinely done without fear that the new feature might not
be successfully deployed.[¶](#section-3.4-2){.pilcrow}

These examples show extension points that are heavily used are also
being relatively unaffected by deployment issues preventing addition of
new values for new use cases.[¶](#section-3.4-3){.pilcrow}

These examples show that a good design is not required for success. On
the contrary, success is often despite shortcomings in the design. For
instance, the shortcomings of HTTP header fields are significant enough
that there are ongoing efforts to improve the syntax
\[[HTTP-HEADERS](#RFC8941){.xref}\].[¶](#section-3.4-4){.pilcrow}
:::
:::

::: {#restoring-active-use}
::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [Restoring Active Use](#name-restoring-active-use){.section-name .selfRef} {#name-restoring-active-use}

With enough effort, active use can be used to restore
capabilities.[¶](#section-3.5-1){.pilcrow}

Extension Mechanisms for DNS (\[[EDNS](#RFC6891){.xref}\]) was defined
to provide extensibility in DNS. Intolerance of the extension in DNS
servers resulted in a fallback method being widely deployed (see
[Section
6.2.2](https://www.rfc-editor.org/rfc/rfc6891#section-6.2.2){.relref} of
\[[EDNS](#RFC6891){.xref}\]). This fallback resulted in EDNS being
disabled for affected servers. Over time, greater support for EDNS and
increased reliance on it for different features motivated a flag day
\[[DNSFLAGDAY](#DNSFLAGDAY){.xref}\] where the workaround was
removed.[¶](#section-3.5-2){.pilcrow}

The EDNS example shows that effort can be used to restore capabilities.
This is in part because EDNS was actively used with most resolvers and
servers. It was therefore possible to force a change to ensure that
extension capabilities would always be available. However, this required
an enormous coordination effort. A small number of incompatible servers
and the names they serve also became inaccessible to most
clients.[¶](#section-3.5-3){.pilcrow}
:::
:::
:::
:::

::: {#other}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Complementary Techniques](#name-complementary-techniques){.section-name .selfRef} {#name-complementary-techniques}

The protections to protocol evolution that come from [active
use](#use-it){.xref} ([Section 3](#use-it){.xref}) can be improved
through the use of other defensive techniques. The techniques listed
here might not prevent ossification on their own, but they can make
active use more effective.[¶](#section-4-1){.pilcrow}

::: {#fewer-extension-points}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Fewer Extension Points](#name-fewer-extension-points){.section-name .selfRef} {#name-fewer-extension-points}

A successful protocol will include many potential types of extensions.
Designing multiple types of extension mechanisms, each suited to a
specific purpose, might leave some extension points less heavily used
than others.[¶](#section-4.1-1){.pilcrow}

Disuse of a specialized extension point might render it unusable. In
contrast, having a smaller number of extension points with wide
applicability could improve the use of those extension points. Use of a
shared extension point for any purpose can protect rarer or more
specialized uses.[¶](#section-4.1-2){.pilcrow}

Both extensions and core protocol elements use the same extension points
in protocols like HTTP \[[HTTP](#I-D.ietf-httpbis-semantics){.xref}\]
and DIAMETER \[[DIAMETER](#RFC6733){.xref}\]; see [Section
3.4](#ex-active){.xref}.[¶](#section-4.1-3){.pilcrow}
:::
:::

::: {#invariants}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Invariants](#name-invariants){.section-name .selfRef} {#name-invariants}

Documenting aspects of the protocol that cannot or will not change as
extensions or new versions are added can be a useful exercise. [Section
2.2](https://www.rfc-editor.org/rfc/rfc5704#section-2.2){.relref} of
\[[RFC5704](#RFC5704){.xref}\] defines invariants
as:[¶](#section-4.2-1){.pilcrow}

> Invariants are core properties that are consistent across the network
> and do not change over extremely long
> time-scales.[¶](#section-4.2-2.1){.pilcrow}

Understanding what aspects of a protocol are invariant can help guide
the process of identifying those parts of the protocol that might
change. \[[QUIC-INVARIANTS](#RFC8999){.xref}\] and [Section
9.3](https://www.rfc-editor.org/rfc/rfc8446#section-9.3){.relref} of
\[[TLS13](#RFC8446){.xref}\] are both examples of documented
invariants.[¶](#section-4.2-3){.pilcrow}

As a means of protecting extensibility, a declaration of protocol
invariants is useful only to the extent that protocol participants are
willing to allow new uses for the protocol. A protocol that declares
protocol invariants relies on implementations understanding and
respecting those invariants. If active use is not possible for all
non-invariant parts of the protocol, greasing ([Section
3.3](#grease){.xref}) might be used to improve the chance that
invariants are respected.[¶](#section-4.2-4){.pilcrow}

Protocol invariants need to be clearly and concisely documented.
Including examples of aspects of the protocol that are not invariant,
such as [Appendix
A](https://www.rfc-editor.org/rfc/rfc8999#appendix-A){.relref} of
\[[QUIC-INVARIANTS](#RFC8999){.xref}\], can be used to clarify
intent.[¶](#section-4.2-5){.pilcrow}
:::
:::

::: {#limiting-participation}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Limiting Participation](#name-limiting-participation){.section-name .selfRef} {#name-limiting-participation}

Reducing the number of entities that can participate in a protocol or
limiting the extent of participation can reduce the number of entities
that might affect extensibility. Using TLS or other cryptographic tools
can therefore reduce the number of entities that can influence whether
new features are usable.[¶](#section-4.3-1){.pilcrow}

\[[PATH-SIGNALS](#RFC8558){.xref}\] also recommends the use of
encryption and integrity protection to limit participation. For example,
encryption is used by the QUIC protocol \[[QUIC](#RFC9000){.xref}\] to
limit the information that is available to middleboxes and integrity
protection prevents modification.[¶](#section-4.3-2){.pilcrow}
:::
:::

::: {#effective-feedback}
::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [Effective Feedback](#name-effective-feedback){.section-name .selfRef} {#name-effective-feedback}

While not a direct means of protecting extensibility mechanisms,
feedback systems can be important to discovering
problems.[¶](#section-4.4-1){.pilcrow}

The visibility of errors is critical to the success of techniques like
grease (see [Section 3.3](#grease){.xref}). The grease design is most
effective if a deployment has a means of detecting and reporting errors.
Ignoring errors could allow problems to become
entrenched.[¶](#section-4.4-2){.pilcrow}

Feedback on errors is more important during the development and early
deployment of a change. It might also be helpful to disable automatic
error recovery methods during development.[¶](#section-4.4-3){.pilcrow}

Automated feedback systems are important for automated systems, or where
error recovery is also automated. For instance, connection failures with
HTTP alternative services \[[ALT-SVC](#RFC7838){.xref}\] are not
permitted to affect the outcome of transactions. An automated feedback
system for capturing failures in alternative services is therefore
necessary for failures to be detected.[¶](#section-4.4-4){.pilcrow}

How errors are gathered and reported will depend greatly on the nature
of the protocol deployment and the entity that receives the report. For
instance, end users, developers, and network operations each have
different requirements for how error reports are created, managed, and
acted upon.[¶](#section-4.4-5){.pilcrow}

Automated delivery of error reports can be critical for rectifying
deployment errors as early as possible, as seen in
\[[DMARC](#RFC7489){.xref}\] and
\[[SMTP-TLS-REPORTING](#RFC8460){.xref}\].[¶](#section-4.4-6){.pilcrow}
:::
:::
:::
:::

::: {#security-considerations}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Many of the problems identified in this document are not the result of
deliberate actions by an adversary but more the result of mistakes,
decisions made without sufficient context, or simple neglect, i.e.,
problems therefore not the result of opposition by an adversary. In
response, the recommended measures generally assume that other protocol
participants will not take deliberate action to prevent protocol
evolution.[¶](#section-5-1){.pilcrow}

The use of cryptographic techniques to exclude potential participants is
the only strong measure that the document recommends. However,
authorized protocol peers are most often responsible for the identified
problems, which can mean that cryptography is insufficient to exclude
them.[¶](#section-5-2){.pilcrow}

The ability to design, implement, and deploy new protocol mechanisms can
be critical to security. In particular, it is important to be able to
replace cryptographic algorithms over time
\[[AGILITY](#RFC7696){.xref}\]. For example, preparing for the
replacement of weak hash algorithms was made more difficult through
misuse \[[HASH](#HASH){.xref}\].[¶](#section-5-3){.pilcrow}
:::
:::

::: {#iana-considerations}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document has no IANA actions.[¶](#section-6-1){.pilcrow}
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[AGILITY\]
:   [Housley, R.]{.refAuthor}, [\"Guidelines for Cryptographic Algorithm
    Agility and Selecting Mandatory-to-Implement
    Algorithms\"]{.refTitle}, [BCP 201]{.seriesInfo}, [RFC
    7696]{.seriesInfo}, [DOI 10.17487/RFC7696]{.seriesInfo}, November
    2015, \<<https://www.rfc-editor.org/info/rfc7696>\>.
:   

\[ALPN\]
:   [Friedl, S.]{.refAuthor}, [Popov, A.]{.refAuthor},
    [Langley, A.]{.refAuthor}, and [E. Stephan]{.refAuthor},
    [\"Transport Layer Security (TLS) Application-Layer Protocol
    Negotiation Extension\"]{.refTitle}, [RFC 7301]{.seriesInfo}, [DOI
    10.17487/RFC7301]{.seriesInfo}, July 2014,
    \<<https://www.rfc-editor.org/info/rfc7301>\>.
:   

\[ALT-SVC\]
:   [Nottingham, M.]{.refAuthor}, [McManus, P.]{.refAuthor}, and [J.
    Reschke]{.refAuthor}, [\"HTTP Alternative Services\"]{.refTitle},
    [RFC 7838]{.seriesInfo}, [DOI 10.17487/RFC7838]{.seriesInfo}, April
    2016, \<<https://www.rfc-editor.org/info/rfc7838>\>.
:   

\[DIAMETER\]
:   [Fajardo, V., Ed.]{.refAuthor}, [Arkko, J.]{.refAuthor},
    [Loughney, J.]{.refAuthor}, and [G. Zorn, Ed.]{.refAuthor},
    [\"Diameter Base Protocol\"]{.refTitle}, [RFC 6733]{.seriesInfo},
    [DOI 10.17487/RFC6733]{.seriesInfo}, October 2012,
    \<<https://www.rfc-editor.org/info/rfc6733>\>.
:   

\[DMARC\]
:   [Kucherawy, M., Ed.]{.refAuthor} and [E. Zwicky, Ed.]{.refAuthor},
    [\"Domain-based Message Authentication, Reporting, and Conformance
    (DMARC)\"]{.refTitle}, [RFC 7489]{.seriesInfo}, [DOI
    10.17487/RFC7489]{.seriesInfo}, March 2015,
    \<<https://www.rfc-editor.org/info/rfc7489>\>.
:   

\[DNSFLAGDAY\]
:   [\"DNS Flag Day 2019\"]{.refTitle}, May 2019,
    \<<https://dnsflagday.net/2019/>\>.
:   

\[EDNS\]
:   [Damas, J.]{.refAuthor}, [Graff, M.]{.refAuthor}, and [P.
    Vixie]{.refAuthor}, [\"Extension Mechanisms for DNS
    (EDNS(0))\"]{.refTitle}, [STD 75]{.seriesInfo}, [RFC
    6891]{.seriesInfo}, [DOI 10.17487/RFC6891]{.seriesInfo}, April 2013,
    \<<https://www.rfc-editor.org/info/rfc6891>\>.
:   

\[EXT-TCP\]
:   [Honda, M.]{.refAuthor}, [Nishida, Y.]{.refAuthor},
    [Raiciu, C.]{.refAuthor}, [Greenhalgh, A.]{.refAuthor},
    [Handley, M.]{.refAuthor}, and [H. Tokuda]{.refAuthor}, [\"Is it
    still possible to extend TCP?\"]{.refTitle}, [IMC \'11: Proceedings
    of the 2011 ACM SIGCOMM conference on Internet measurement
    conference]{.refContent}, [DOI
    10.1145/2068816.2068834]{.seriesInfo}, November 2011,
    \<<https://doi.org/10.1145/2068816.2068834>\>.
:   

\[EXTENSIBILITY\]
:   [Carpenter, B.]{.refAuthor}, [Aboba, B., Ed.]{.refAuthor}, and [S.
    Cheshire]{.refAuthor}, [\"Design Considerations for Protocol
    Extensions\"]{.refTitle}, [RFC 6709]{.seriesInfo}, [DOI
    10.17487/RFC6709]{.seriesInfo}, September 2012,
    \<<https://www.rfc-editor.org/info/rfc6709>\>.
:   

\[GREASE\]
:   [Benjamin, D.]{.refAuthor}, [\"Applying Generate Random Extensions
    And Sustain Extensibility (GREASE) to TLS
    Extensibility\"]{.refTitle}, [RFC 8701]{.seriesInfo}, [DOI
    10.17487/RFC8701]{.seriesInfo}, January 2020,
    \<<https://www.rfc-editor.org/info/rfc8701>\>.
:   

\[HASH\]
:   [Bellovin, S.]{.refAuthor} and [E. Rescorla]{.refAuthor},
    [\"Deploying a New Hash Algorithm\"]{.refTitle}, [Proceedings of
    NDSS]{.refContent}, 2006,
    \<<https://www.cs.columbia.edu/~smb/papers/new-hash.pdf>\>.
:   

\[HTTP\]
:   [Fielding, R., Ed.]{.refAuthor}, [Nottingham, M., Ed.]{.refAuthor},
    and [J. Reschke, Ed.]{.refAuthor}, [\"HTTP Semantics\"]{.refTitle},
    [Work in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-httpbis-semantics-19]{.seriesInfo}, September 2021,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19>\>.
:   

\[HTTP-HEADERS\]
:   [Nottingham, M.]{.refAuthor} and [P-H. Kamp]{.refAuthor},
    [\"Structured Field Values for HTTP\"]{.refTitle}, [RFC
    8941]{.seriesInfo}, [DOI 10.17487/RFC8941]{.seriesInfo}, February
    2021, \<<https://www.rfc-editor.org/info/rfc8941>\>.
:   

\[HTTP11\]
:   [Fielding, R., Ed.]{.refAuthor}, [Nottingham, M., Ed.]{.refAuthor},
    and [J. Reschke, Ed.]{.refAuthor}, [\"HTTP/1.1\"]{.refTitle}, [Work
    in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-httpbis-messaging-19]{.seriesInfo}, September 2021,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-messaging-19>\>.
:   

\[INTOLERANCE\]
:   [Kario, H.]{.refAuthor}, [\"Re: \[TLS\] Thoughts on Version
    Intolerance\"]{.refTitle}, July 2016,
    \<<https://mailarchive.ietf.org/arch/msg/tls/bOJ2JQc3HjAHFFWCiNTIb0JuMZc>\>.
:   

\[MPTCP\]
:   [Ford, A.]{.refAuthor}, [Raiciu, C.]{.refAuthor},
    [Handley, M.]{.refAuthor}, [Bonaventure, O.]{.refAuthor}, and [C.
    Paasch]{.refAuthor}, [\"TCP Extensions for Multipath Operation with
    Multiple Addresses\"]{.refTitle}, [RFC 8684]{.seriesInfo}, [DOI
    10.17487/RFC8684]{.seriesInfo}, March 2020,
    \<<https://www.rfc-editor.org/info/rfc8684>\>.
:   

\[MPTCP-HOW-HARD\]
:   [Raiciu, C.]{.refAuthor}, [Paasch, C.]{.refAuthor},
    [Barre, S.]{.refAuthor}, [Ford, A.]{.refAuthor},
    [Honda, M.]{.refAuthor}, [Duchene, F.]{.refAuthor},
    [Bonaventure, O.]{.refAuthor}, and [M. Handley]{.refAuthor}, [\"How
    Hard Can It Be? Designing and Implementing a Deployable Multipath
    TCP\"]{.refTitle}, April 2012,
    \<<https://www.usenix.org/conference/nsdi12/technical-sessions/presentation/raiciu>\>.
:   

\[NEW-PROTOCOLS\]
:   [Barik, R.]{.refAuthor}, [Welzl, M.]{.refAuthor},
    [Fairhurst, G.]{.refAuthor}, [Elmokashfi, A.]{.refAuthor},
    [Dreibholz, T.]{.refAuthor}, and [S. Gjessing]{.refAuthor}, [\"On
    the usability of transport protocols other than TCP: A home gateway
    and internet path traversal study\"]{.refTitle}, [Computer Networks,
    Vol. 173, pp. 107211]{.refContent}, [DOI
    10.1016/j.comnet.2020.107211]{.seriesInfo}, May 2020,
    \<<https://doi.org/10.1016/j.comnet.2020.107211>\>.
:   

\[PATH-SIGNALS\]
:   [Hardie, T., Ed.]{.refAuthor}, [\"Transport Protocol Path
    Signals\"]{.refTitle}, [RFC 8558]{.seriesInfo}, [DOI
    10.17487/RFC8558]{.seriesInfo}, April 2019,
    \<<https://www.rfc-editor.org/info/rfc8558>\>.
:   

\[QUIC\]
:   [Iyengar, J., Ed.]{.refAuthor} and [M. Thomson, Ed.]{.refAuthor},
    [\"QUIC: A UDP-Based Multiplexed and Secure Transport\"]{.refTitle},
    [RFC 9000]{.seriesInfo}, [DOI 10.17487/RFC9000]{.seriesInfo}, May
    2021, \<<https://www.rfc-editor.org/info/rfc9000>\>.
:   

\[QUIC-INVARIANTS\]
:   [Thomson, M.]{.refAuthor}, [\"Version-Independent Properties of
    QUIC\"]{.refTitle}, [RFC 8999]{.seriesInfo}, [DOI
    10.17487/RFC8999]{.seriesInfo}, May 2021,
    \<<https://www.rfc-editor.org/info/rfc8999>\>.
:   

\[RAv4\]
:   [Katz, D.]{.refAuthor}, [\"IP Router Alert Option\"]{.refTitle},
    [RFC 2113]{.seriesInfo}, [DOI 10.17487/RFC2113]{.seriesInfo},
    February 1997, \<<https://www.rfc-editor.org/info/rfc2113>\>.
:   

\[RAv6\]
:   [Partridge, C.]{.refAuthor} and [A. Jackson]{.refAuthor}, [\"IPv6
    Router Alert Option\"]{.refTitle}, [RFC 2711]{.seriesInfo}, [DOI
    10.17487/RFC2711]{.seriesInfo}, October 1999,
    \<<https://www.rfc-editor.org/info/rfc2711>\>.
:   

\[RFC0791\]
:   [Postel, J.]{.refAuthor}, [\"Internet Protocol\"]{.refTitle}, [STD
    5]{.seriesInfo}, [RFC 791]{.seriesInfo}, [DOI
    10.17487/RFC0791]{.seriesInfo}, September 1981,
    \<<https://www.rfc-editor.org/info/rfc791>\>.
:   

\[RFC1112\]
:   [Deering, S.]{.refAuthor}, [\"Host extensions for IP
    multicasting\"]{.refTitle}, [STD 5]{.seriesInfo}, [RFC
    1112]{.seriesInfo}, [DOI 10.17487/RFC1112]{.seriesInfo}, August
    1989, \<<https://www.rfc-editor.org/info/rfc1112>\>.
:   

\[RFC2464\]
:   [Crawford, M.]{.refAuthor}, [\"Transmission of IPv6 Packets over
    Ethernet Networks\"]{.refTitle}, [RFC 2464]{.seriesInfo}, [DOI
    10.17487/RFC2464]{.seriesInfo}, December 1998,
    \<<https://www.rfc-editor.org/info/rfc2464>\>.
:   

\[RFC5704\]
:   [Bryant, S., Ed.]{.refAuthor}, [Morrow, M., Ed.]{.refAuthor}, and
    [IAB]{.refAuthor}, [\"Uncoordinated Protocol Development Considered
    Harmful\"]{.refTitle}, [RFC 5704]{.seriesInfo}, [DOI
    10.17487/RFC5704]{.seriesInfo}, November 2009,
    \<<https://www.rfc-editor.org/info/rfc5704>\>.
:   

\[RRTYPE\]
:   [Gustafsson, A.]{.refAuthor}, [\"Handling of Unknown DNS Resource
    Record (RR) Types\"]{.refTitle}, [RFC 3597]{.seriesInfo}, [DOI
    10.17487/RFC3597]{.seriesInfo}, September 2003,
    \<<https://www.rfc-editor.org/info/rfc3597>\>.
:   

\[SIP\]
:   [Rosenberg, J.]{.refAuthor}, [Schulzrinne, H.]{.refAuthor},
    [Camarillo, G.]{.refAuthor}, [Johnston, A.]{.refAuthor},
    [Peterson, J.]{.refAuthor}, [Sparks, R.]{.refAuthor},
    [Handley, M.]{.refAuthor}, and [E. Schooler]{.refAuthor}, [\"SIP:
    Session Initiation Protocol\"]{.refTitle}, [RFC 3261]{.seriesInfo},
    [DOI 10.17487/RFC3261]{.seriesInfo}, June 2002,
    \<<https://www.rfc-editor.org/info/rfc3261>\>.
:   

\[SMTP\]
:   [Klensin, J.]{.refAuthor}, [\"Simple Mail Transfer
    Protocol\"]{.refTitle}, [RFC 5321]{.seriesInfo}, [DOI
    10.17487/RFC5321]{.seriesInfo}, October 2008,
    \<<https://www.rfc-editor.org/info/rfc5321>\>.
:   

\[SMTP-TLS-REPORTING\]
:   [Margolis, D.]{.refAuthor}, [Brotman, A.]{.refAuthor},
    [Ramakrishnan, B.]{.refAuthor}, [Jones, J.]{.refAuthor}, and [M.
    Risher]{.refAuthor}, [\"SMTP TLS Reporting\"]{.refTitle}, [RFC
    8460]{.seriesInfo}, [DOI 10.17487/RFC8460]{.seriesInfo}, September
    2018, \<<https://www.rfc-editor.org/info/rfc8460>\>.
:   

\[SNI\]
:   [Langley, A.]{.refAuthor}, [\"\[TLS\] Accepting that other SNI name
    types will never work.\"]{.refTitle}, March 2016,
    \<<https://mailarchive.ietf.org/arch/msg/tls/1t79gzNItZd71DwwoaqcQQ_4Yxc>\>.
:   

\[SNMPv1\]
:   [Case, J.]{.refAuthor}, [Fedor, M.]{.refAuthor},
    [Schoffstall, M.]{.refAuthor}, and [J. Davin]{.refAuthor}, [\"Simple
    Network Management Protocol (SNMP)\"]{.refTitle}, [RFC
    1157]{.seriesInfo}, [DOI 10.17487/RFC1157]{.seriesInfo}, May 1990,
    \<<https://www.rfc-editor.org/info/rfc1157>\>.
:   

\[SPF\]
:   [Kitterman, S.]{.refAuthor}, [\"Sender Policy Framework (SPF) for
    Authorizing Use of Domains in Email, Version 1\"]{.refTitle}, [RFC
    7208]{.seriesInfo}, [DOI 10.17487/RFC7208]{.seriesInfo}, April 2014,
    \<<https://www.rfc-editor.org/info/rfc7208>\>.
:   

\[SUCCESS\]
:   [Thaler, D.]{.refAuthor} and [B. Aboba]{.refAuthor}, [\"What Makes
    for a Successful Protocol?\"]{.refTitle}, [RFC 5218]{.seriesInfo},
    [DOI 10.17487/RFC5218]{.seriesInfo}, July 2008,
    \<<https://www.rfc-editor.org/info/rfc5218>\>.
:   

\[TCP\]
:   [Postel, J.]{.refAuthor}, [\"Transmission Control
    Protocol\"]{.refTitle}, [STD 7]{.seriesInfo}, [RFC
    793]{.seriesInfo}, [DOI 10.17487/RFC0793]{.seriesInfo}, September
    1981, \<<https://www.rfc-editor.org/info/rfc793>\>.
:   

\[TFO\]
:   [Cheng, Y.]{.refAuthor}, [Chu, J.]{.refAuthor},
    [Radhakrishnan, S.]{.refAuthor}, and [A. Jain]{.refAuthor}, [\"TCP
    Fast Open\"]{.refTitle}, [RFC 7413]{.seriesInfo}, [DOI
    10.17487/RFC7413]{.seriesInfo}, December 2014,
    \<<https://www.rfc-editor.org/info/rfc7413>\>.
:   

\[TLS-EXT\]
:   [Eastlake 3rd, D.]{.refAuthor}, [\"Transport Layer Security (TLS)
    Extensions: Extension Definitions\"]{.refTitle}, [RFC
    6066]{.seriesInfo}, [DOI 10.17487/RFC6066]{.seriesInfo}, January
    2011, \<<https://www.rfc-editor.org/info/rfc6066>\>.
:   

\[TLS12\]
:   [Dierks, T.]{.refAuthor} and [E. Rescorla]{.refAuthor}, [\"The
    Transport Layer Security (TLS) Protocol Version 1.2\"]{.refTitle},
    [RFC 5246]{.seriesInfo}, [DOI 10.17487/RFC5246]{.seriesInfo}, August
    2008, \<<https://www.rfc-editor.org/info/rfc5246>\>.
:   

\[TLS13\]
:   [Rescorla, E.]{.refAuthor}, [\"The Transport Layer Security (TLS)
    Protocol Version 1.3\"]{.refTitle}, [RFC 8446]{.seriesInfo}, [DOI
    10.17487/RFC8446]{.seriesInfo}, August 2018,
    \<<https://www.rfc-editor.org/info/rfc8446>\>.
:   

\[TRANSITIONS\]
:   [Thaler, D., Ed.]{.refAuthor}, [\"Planning for Protocol Adoption and
    Subsequent Transitions\"]{.refTitle}, [RFC 8170]{.seriesInfo}, [DOI
    10.17487/RFC8170]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8170>\>.
:   
:::

::: {#examples}
::: {#appendix-A .section}
## [Appendix A.](#appendix-A){.section-number .selfRef} [Examples](#name-examples){.section-name .selfRef} {#name-examples}

This appendix contains a brief study of problems in a range of Internet
protocols at different layers of the stack.[¶](#appendix-A-1){.pilcrow}

::: {#dns}
::: {#appendix-A.1 .section}
### [A.1.](#appendix-A.1){.section-number .selfRef} [DNS](#name-dns){.section-name .selfRef} {#name-dns}

Ossified DNS code bases and systems resulted in new Resource Record
Codes (RRCodes) being unusable. A new code point would take years of
coordination between implementations and deployments before it could be
relied upon. Consequently, use of the TXT record was overloaded in order
to avoid the effort and delays involved in allocating new code points;
this approach was used in the Sender Policy Framework
\[[SPF](#RFC7208){.xref}\] and other
protocols.[¶](#appendix-A.1-1){.pilcrow}

It was not until after the standard mechanism for dealing with new
RRCodes \[[RRTYPE](#RFC3597){.xref}\] was considered widely deployed
that new RRCodes could be safely created and
used.[¶](#appendix-A.1-2){.pilcrow}
:::
:::

::: {#HTTP}
::: {#appendix-A.2 .section}
### [A.2.](#appendix-A.2){.section-number .selfRef} [HTTP](#name-http){.section-name .selfRef} {#name-http}

HTTP has a number of very effective extension points in addition to the
aforementioned header fields. It also has some examples of extension
points that are so rarely used that it is possible that they are not at
all usable.[¶](#appendix-A.2-1){.pilcrow}

Extension points in HTTP that might be unwise to use include the
extension point on each chunk in the chunked transfer coding ([Section
7.1](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-messaging-19#section-7.1){.relref}
of \[[HTTP11](#I-D.ietf-httpbis-messaging){.xref}\]), the ability to use
transfer codings other than the chunked coding, and the range unit in a
range request ([Section
14](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19#section-14){.relref}
of
\[[HTTP](#I-D.ietf-httpbis-semantics){.xref}\]).[¶](#appendix-A.2-2){.pilcrow}
:::
:::

::: {#ip}
::: {#appendix-A.3 .section}
### [A.3.](#appendix-A.3){.section-number .selfRef} [IP](#name-ip){.section-name .selfRef} {#name-ip}

The version field in IP was rendered useless when encapsulated over
Ethernet, requiring a new EtherType with IPv6
\[[RFC2464](#RFC2464){.xref}\], due in part to Layer 2 devices making
version-independent assumptions about the structure of the IPv4
header.[¶](#appendix-A.3-1){.pilcrow}

Protocol identifiers or code points that are reserved for future use can
be especially problematic. Reserving values without attributing
semantics to their use can result in diverse or conflicting semantics
being attributed without any hope of interoperability. An example of
this is the 224/3 address space in IPv4 that
\[[RFC0791](#RFC0791){.xref}\] reserved without assigning any semantics.
\[[RFC1112](#RFC1112){.xref}\] partially reclaimed that reserved address
space for use in multicast (224/4), but the remaining address space
(240/4) has not been successfully reclaimed for any
purpose.[¶](#appendix-A.3-2){.pilcrow}

For protocols that can use negotiation to attribute semantics to values,
it is possible that unused code points can be reclaimed for active use,
though this requires that the negotiation include all protocol
participants. For something as fundamental as addressing, negotiation is
difficult or even impossible, as all nodes on the network path plus
potential alternative paths would need to be
involved.[¶](#appendix-A.3-3){.pilcrow}

IP Router Alerts \[[RAv4](#RFC2113){.xref}\]\[[RAv6](#RFC2711){.xref}\]
use IP options or extension headers to indicate that data is intended
for consumption by the next-hop router rather than the addressed
destination. In part, the deployment of router alerts was unsuccessful
due to the realities of processing IP packets at line rates, combined
with bad assumptions in the protocol design about these performance
constraints. However, this was not exclusively down to design problems
or bugs, as the capability was also deliberately blocked at some
routers.[¶](#appendix-A.3-4){.pilcrow}
:::
:::

::: {#snmp}
::: {#appendix-A.4 .section}
### [A.4.](#appendix-A.4){.section-number .selfRef} [SNMP](#name-snmp){.section-name .selfRef} {#name-snmp}

As a counter example, the first version of the Simple Network Management
Protocol (SNMP) \[[SNMPv1](#RFC1157){.xref}\] states that unparseable or
unauthenticated messages are simply discarded without
response:[¶](#appendix-A.4-1){.pilcrow}

> It then verifies the version number of the SNMP message. If there is a
> mismatch, it discards the datagram and performs no further
> actions.[¶](#appendix-A.4-2.1){.pilcrow}

When SNMP versions 2, 2c, and 3 came along, older agents did exactly
what the protocol specifies. Deployment of new versions was likely
successful because the handling of newer versions was both clear and
simple.[¶](#appendix-A.4-3){.pilcrow}
:::
:::

::: {#tcp}
::: {#appendix-A.5 .section}
### [A.5.](#appendix-A.5){.section-number .selfRef} [TCP](#name-tcp){.section-name .selfRef} {#name-tcp}

Extension points in TCP \[[TCP](#RFC0793){.xref}\] have been rendered
difficult to use largely due to middlebox interactions; see
\[[EXT-TCP](#EXT-TCP){.xref}\].[¶](#appendix-A.5-1){.pilcrow}

For instance, multipath TCP (\[[MPTCP](#RFC8684){.xref}\]) can only be
deployed opportunistically; see
\[[MPTCP-HOW-HARD](#MPTCP-HOW-HARD){.xref}\]. Since MPTCP is a protocol
enhancement that doesn\'t impair the connection if it is blocked,
network path intolerance of the extension only results in the multipath
functionality becoming unavailable.[¶](#appendix-A.5-2){.pilcrow}

In comparison, the deployment of TCP Fast Open
(\[[TFO](#RFC7413){.xref}\]) critically depends on extension capability
being widely available. Though very few network paths were intolerant of
the extension in absolute terms, TCP Fast Open could not be deployed as
a result.[¶](#appendix-A.5-3){.pilcrow}
:::
:::

::: {#tls}
::: {#appendix-A.6 .section}
### [A.6.](#appendix-A.6){.section-number .selfRef} [TLS](#name-tls){.section-name .selfRef} {#name-tls}

Transport Layer Security (TLS) \[[TLS12](#RFC5246){.xref}\] provides
examples of where a design that is objectively sound fails when
incorrectly implemented. TLS provides examples of failures in protocol
version negotiation and extensibility.[¶](#appendix-A.6-1){.pilcrow}

Version negotiation in TLS 1.2 and earlier uses the \"Highest mutually
supported version (HMSV)\" scheme exactly as it is described in
\[[EXTENSIBILITY](#RFC6709){.xref}\]. However, clients are unable to
advertise a new version without causing a non-trivial proportion of
sessions to fail due to bugs in server and middlebox
implementations.[¶](#appendix-A.6-2){.pilcrow}

Intolerance to new TLS versions is so severe
\[[INTOLERANCE](#INTOLERANCE){.xref}\] that TLS 1.3
\[[TLS13](#RFC8446){.xref}\] abandoned HMSV version negotiation for a
new mechanism.[¶](#appendix-A.6-3){.pilcrow}

The server name indication (SNI) \[[TLS-EXT](#RFC6066){.xref}\] in TLS
is another excellent example of the failure of a well-designed
extensibility point. SNI uses the same technique for extensions that is
used successfully in other parts of the TLS protocol. The original
design of SNI anticipated the ability to include multiple names of
different types.[¶](#appendix-A.6-4){.pilcrow}

SNI was originally defined with just one type of name: a domain name. No
other type has ever been standardized, though several have been
proposed. Despite an otherwise exemplary design, SNI is so
inconsistently implemented that any hope for using the extension point
it defines has been abandoned
\[[SNI](#SNI){.xref}\].[¶](#appendix-A.6-5){.pilcrow}
:::
:::
:::
:::

::: {#appendix-B .section}
## [IAB Members at the Time of Approval](#name-iab-members-at-the-time-of-){.section-name .selfRef} {#name-iab-members-at-the-time-of-}

Internet Architecture Board members at the time this document was
approved for publication were:[¶](#appendix-B-1){.pilcrow}

-   ::: {#appendix-B-2.1}
    [Jari Arkko]{.contact-name}[¶](#appendix-B-2.1.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.2}
    [Deborah Brungard]{.contact-name}[¶](#appendix-B-2.2.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.3}
    [Ben Campbell]{.contact-name}[¶](#appendix-B-2.3.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.4}
    [Lars Eggert]{.contact-name}[¶](#appendix-B-2.4.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.5}
    [Wes Hardaker]{.contact-name}[¶](#appendix-B-2.5.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.6}
    [Cullen Jennings]{.contact-name}[¶](#appendix-B-2.6.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.7}
    [Mirja Kühlewind]{.contact-name}[¶](#appendix-B-2.7.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.8}
    [Zhenbin Li]{.contact-name}[¶](#appendix-B-2.8.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.9}
    [Jared Mauch]{.contact-name}[¶](#appendix-B-2.9.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.10}
    [Tommy Pauly]{.contact-name}[¶](#appendix-B-2.10.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.11}
    [David Schinazi]{.contact-name}[¶](#appendix-B-2.11.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.12}
    [Russ White]{.contact-name}[¶](#appendix-B-2.12.1){.pilcrow}
    :::

-   ::: {#appendix-B-2.13}
    [Jiankang Yao]{.contact-name}[¶](#appendix-B-2.13.1){.pilcrow}
    :::
:::

::: {#acknowledgments}
::: {#appendix-C .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

[Toerless Eckert]{.contact-name}, [Wes Hardaker]{.contact-name}, [Mirja
Kühlewind]{.contact-name}, [Eliot Lear]{.contact-name}, [Mark
Nottingham]{.contact-name}, and [Brian Trammell]{.contact-name} made
significant contributions to this document.[¶](#appendix-C-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#appendix-D .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Martin Thomson]{.fn .nameRole}
:::

::: email
Email: <mt@lowentropy.net>
:::

::: {.left dir="auto"}
[Tommy Pauly]{.fn .nameRole}
:::

::: email
Email: <tpauly@apple.com>
:::
:::
:::
