  RFC 9197            In Situ OAM Data Fields   May 2022
  ------------------- ------------------------- ----------
  Brockners, et al.   Standards Track           \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9197](https://www.rfc-editor.org/rfc/rfc9197){.eref}

Category:
:   Standards Track

Published:
:   May 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    F. Brockners, [Ed.]{.editor}
    :::

    ::: org
    Cisco
    :::
    :::

    ::: author
    ::: author-name
    S. Bhandari, [Ed.]{.editor}
    :::

    ::: org
    Thoughtspot
    :::
    :::

    ::: author
    ::: author-name
    T. Mizrahi, [Ed.]{.editor}
    :::

    ::: org
    Huawei
    :::
    :::
:::

# RFC 9197 {#rfcnum}

# Data Fields for In Situ Operations, Administration, and Maintenance (IOAM) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

In situ Operations, Administration, and Maintenance (IOAM) collects
operational and telemetry information in the packet while the packet
traverses a path between two points in the network. This document
discusses the data fields and associated data types for IOAM.
IOAM-Data-Fields can be encapsulated into a variety of protocols, such
as Network Service Header (NSH), Segment Routing, Generic Network
Virtualization Encapsulation (Geneve), or IPv6. IOAM can be used to
complement OAM mechanisms based on, e.g., ICMP or other types of probe
packets.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9197>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Conventions](#name-conventions){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Scope, Applicability, and
    Assumptions](#name-scope-applicability-and-ass){.xref}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [IOAM Data-Fields, Types, and
    Nodes](#name-ioam-data-fields-types-and-){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [IOAM Data-Fields and
        Option-Types](#name-ioam-data-fields-and-option){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [IOAM-Domains and Types of IOAM
        Nodes](#name-ioam-domains-and-types-of-i){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [IOAM-Namespaces](#name-ioam-namespaces){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [IOAM Trace
        Option-Types](#name-ioam-trace-option-types){.xref}

        -   ::: {#section-toc.1-1.4.2.4.2.1}
            [4.4.1](#section-4.4.1){.xref}.  [Pre-allocated and
            Incremental Trace
            Option-Types](#name-pre-allocated-and-increment){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.4.2.2}
            [4.4.2](#section-4.4.2){.xref}.  [IOAM Node Data Fields and
            Associated
            Formats](#name-ioam-node-data-fields-and-a){.xref}

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.1}
                [4.4.2.1](#section-4.4.2.1){.xref}.  [Hop_Lim and
                node_id Short](#name-hop_lim-and-node_id-short){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.2}
                [4.4.2.2](#section-4.4.2.2){.xref}.  [ingress_if_id and
                egress_if_id
                Short](#name-ingress_if_id-and-egress_if){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.3}
                [4.4.2.3](#section-4.4.2.3){.xref}.  [Timestamp
                Seconds](#name-timestamp-seconds){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.4}
                [4.4.2.4](#section-4.4.2.4){.xref}.  [Timestamp
                Fraction](#name-timestamp-fraction){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.5}
                [4.4.2.5](#section-4.4.2.5){.xref}.  [Transit
                Delay](#name-transit-delay){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.6}
                [4.4.2.6](#section-4.4.2.6){.xref}.  [Namespace-Specific
                Data](#name-namespace-specific-data){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.7}
                [4.4.2.7](#section-4.4.2.7){.xref}.  [Queue
                Depth](#name-queue-depth){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.8}
                [4.4.2.8](#section-4.4.2.8){.xref}.  [Checksum
                Complement](#name-checksum-complement){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.9}
                [4.4.2.9](#section-4.4.2.9){.xref}.  [Hop_Lim and
                node_id Wide](#name-hop_lim-and-node_id-wide){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.10}
                [4.4.2.10](#section-4.4.2.10){.xref}. [ingress_if_id and
                egress_if_id
                Wide](#name-ingress_if_id-and-egress_if_){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.11}
                [4.4.2.11](#section-4.4.2.11){.xref}. [Namespace-Specific
                Data Wide](#name-namespace-specific-data-wid){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.12}
                [4.4.2.12](#section-4.4.2.12){.xref}. [Buffer
                Occupancy](#name-buffer-occupancy){.xref}
                :::

            -   ::: {#section-toc.1-1.4.2.4.2.2.2.13}
                [4.4.2.13](#section-4.4.2.13){.xref}. [Opaque State
                Snapshot](#name-opaque-state-snapshot){.xref}
                :::
            :::

        -   ::: {#section-toc.1-1.4.2.4.2.3}
            [4.4.3](#section-4.4.3){.xref}.  [Examples of IOAM Node
            Data](#name-examples-of-ioam-node-data){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [IOAM Proof of Transit
        Option-Type](#name-ioam-proof-of-transit-optio){.xref}

        -   ::: {#section-toc.1-1.4.2.5.2.1}
            [4.5.1](#section-4.5.1){.xref}.  [IOAM Proof of Transit Type
            0](#name-ioam-proof-of-transit-type-){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [IOAM Edge-to-Edge
        Option-Type](#name-ioam-edge-to-edge-option-ty){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Timestamp
    Formats](#name-timestamp-formats){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [PTP Truncated Timestamp
        Format](#name-ptp-truncated-timestamp-for){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [NTP 64-Bit Timestamp
        Format](#name-ntp-64-bit-timestamp-format){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [POSIX-Based Timestamp
        Format](#name-posix-based-timestamp-forma){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [IOAM Data
    Export](#name-ioam-data-export){.xref}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [IOAM Option-Type
        Registry](#name-ioam-option-type-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [IOAM Trace-Type
        Registry](#name-ioam-trace-type-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.3}
        [7.3](#section-7.3){.xref}.  [IOAM Trace-Flags
        Registry](#name-ioam-trace-flags-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.4}
        [7.4](#section-7.4){.xref}.  [IOAM POT-Type
        Registry](#name-ioam-pot-type-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.5}
        [7.5](#section-7.5){.xref}.  [IOAM POT-Flags
        Registry](#name-ioam-pot-flags-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.6}
        [7.6](#section-7.6){.xref}.  [IOAM E2E-Type
        Registry](#name-ioam-e2e-type-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.7}
        [7.7](#section-7.7){.xref}.  [IOAM Namespace-ID
        Registry](#name-ioam-namespace-id-registry){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Management and Deployment
    Considerations](#name-management-and-deployment-c){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-A){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-B){.xref}[Contributors](#name-contributors){.xref}
    :::

-   ::: {#section-toc.1-1.13}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

This document defines data fields for In situ Operations,
Administration, and Maintenance (IOAM). IOAM records OAM information
within the packet while the packet traverses a particular network
domain. The term \"in situ\" refers to the fact that the OAM data is
added to the data packets rather than being sent within packets
specifically dedicated to OAM. IOAM is used to complement mechanisms,
such as Ping or Traceroute. In terms of \"active\" or \"passive\" OAM,
IOAM can be considered a hybrid OAM type. \"In situ\" mechanisms do not
require extra packets to be sent. IOAM adds information to the already
available data packets and therefore cannot be considered passive. In
terms of the classification given in \[[RFC7799](#RFC7799){.xref}\],
IOAM could be portrayed as Hybrid Type I. IOAM mechanisms can be
leveraged where mechanisms using, e.g., ICMP do not apply or do not
offer the desired results, such as proving that a certain traffic flow
takes a predefined path, Service Level Agreement (SLA) verification for
the data traffic, detailed statistics on traffic distribution paths in
networks that distribute traffic across multiple paths, or scenarios in
which probe traffic is potentially handled differently from regular data
traffic by the network devices.[¶](#section-1-1){.pilcrow}

The term \"in situ OAM\" was originally motivated by the use of
OAM-related mechanisms that add information into a packet. This document
uses IOAM as a term defining the IOAM technology. IOAM includes \"in
situ\" mechanisms but also mechanisms that could trigger the creation of
additional packets dedicated to OAM.[¶](#section-1-2){.pilcrow}
:::

::: {#Conventions}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Conventions](#name-conventions){.section-name .selfRef} {#name-conventions}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

Abbreviations and definitions used in this
document:[¶](#section-2-2){.pilcrow}

[]{.break}

E2E:
:   Edge to Edge[¶](#section-2-3.2){.pilcrow}
:   

Geneve:
:   Generic Network Virtualization Encapsulation
    \[[RFC8926](#RFC8926){.xref}\][¶](#section-2-3.4){.pilcrow}
:   

IOAM:
:   In situ Operations, Administration, and
    Maintenance[¶](#section-2-3.6){.pilcrow}
:   

MTU:
:   Maximum Transmission Unit[¶](#section-2-3.8){.pilcrow}
:   

NSH:
:   Network Service Header
    \[[RFC8300](#RFC8300){.xref}\][¶](#section-2-3.10){.pilcrow}
:   

OAM:
:   Operations, Administration, and
    Maintenance[¶](#section-2-3.12){.pilcrow}
:   

PMTU:
:   Path MTU[¶](#section-2-3.14){.pilcrow}
:   

POT:
:   Proof of Transit[¶](#section-2-3.16){.pilcrow}
:   

Short format:
:   refers to an IOAM-Data-Field that comprises 4
    octets[¶](#section-2-3.18){.pilcrow}
:   

SID:
:   Segment Identifier[¶](#section-2-3.20){.pilcrow}
:   

SR:
:   Segment Routing[¶](#section-2-3.22){.pilcrow}
:   

VXLAN-GPE:
:   Virtual eXtensible Local Area Network, Generic Protocol Extension
    \[[NVO3-VXLAN-GPE](#I-D.ietf-nvo3-vxlan-gpe){.xref}\][¶](#section-2-3.24){.pilcrow}
:   

Wide format:
:   refers to an IOAM-Data-Field that comprises 8
    octets[¶](#section-2-3.26){.pilcrow}
:   
:::
:::

::: {#IOAM_scope}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Scope, Applicability, and Assumptions](#name-scope-applicability-and-ass){.section-name .selfRef} {#name-scope-applicability-and-ass}

IOAM assumes a set of constraints as well as guiding principles and
concepts that go hand in hand with the definition of the
IOAM-Data-Fields. These constraints, guiding principles, and concepts
are described in this section. A discussion of how IOAM-Data-Fields and
the associated concepts are applied to an IOAM deployment are out of
scope for this document. Please refer to
\[[IPPM-IOAM-DEPLOYMENT](#I-D.ietf-ippm-ioam-deployment){.xref}\] for
IOAM deployment considerations.[¶](#section-3-1){.pilcrow}

[]{.break}

Scope:
:   This document defines the data fields and associated data types for
    IOAM. The IOAM-Data-Fields can be encapsulated in a variety of
    protocols, including NSH, Segment Routing, Geneve, and IPv6.
    Specification details for these different protocols are outside the
    scope of this document. It is expected that each such encapsulation
    would be specified by an RFC and jointly designed by the working
    group that develops or maintains the encapsulation protocol and the
    IETF IP Performance Measurement (IPPM) Working
    Group.[¶](#section-3-2.2){.pilcrow}
:   

Domain (or scope) of in situ OAM deployment:
:   IOAM is focused on \"limited domains\", as defined in
    \[[RFC8799](#RFC8799){.xref}\]. For IOAM, a limited domain could,
    for example, be an enterprise campus using physical connections
    between devices or an overlay network using virtual
    connections/tunnels for connectivity between said devices. A limited
    domain that uses IOAM may constitute one or multiple
    \"IOAM-Domains\", each disambiguated through separate namespace
    identifiers. An IOAM-Domain is bounded by its perimeter or edge.
    IOAM-Domains may overlap inside the limited domain. Designers of
    protocol encapsulations for IOAM specify mechanisms to ensure that
    IOAM data stays within an IOAM-Domain. In addition, the operator of
    such a domain is expected to put provisions in place to ensure that
    IOAM data does not leak beyond the edge of an IOAM-Domain using, for
    example, packet filtering methods. The operator [SHOULD]{.bcp14}
    consider the potential operational impact of IOAM to mechanisms,
    such as ECMP processing (e.g., load-balancing schemes based on
    packet length could be impacted by the increased packet size due to
    IOAM), PMTU (i.e., ensure that the MTU of all links within a domain
    is sufficiently large to support the increased packet size due to
    IOAM), and ICMP message handling (i.e., in case of IPv6, IOAM
    support for ICMPv6 echo request/reply is desired, which would
    translate into ICMPv6 extensions to enable IOAM-Data-Fields to be
    copied from an echo request message to an echo reply
    message).[¶](#section-3-2.4){.pilcrow}
:   

IOAM control points:
:   IOAM-Data-Fields are added to or removed from the user traffic by
    the devices that form the edge of a domain. Devices that form an
    IOAM-Domain can add, update, or remove IOAM-Data-Fields. Edge
    devices of an IOAM-Domain can be hosts or network
    devices.[¶](#section-3-2.6){.pilcrow}
:   

Traffic sets that IOAM is applied to:
:   IOAM can be deployed on all or only on subsets of the user traffic.
    Using IOAM on a selected set of traffic (e.g., per interface, based
    on an access control list or flow specification defining a specific
    set of traffic, etc.) could be useful in deployments where the cost
    of processing IOAM-Data-Fields by encapsulating, transit, or
    decapsulating nodes might be a concern from a performance or
    operational perspective. Thus, limiting the amount of traffic IOAM
    is applied to could be beneficial in some
    deployments.[¶](#section-3-2.8){.pilcrow}
:   

Encapsulation independence:
:   The definition of IOAM-Data-Fields is independent from the protocols
    the IOAM-Data-Fields are encapsulated into. IOAM-Data-Fields can be
    encapsulated into several encapsulating
    protocols.[¶](#section-3-2.10){.pilcrow}
:   

Layering:
:   If several encapsulation protocols (e.g., in case of tunneling) are
    stacked on top of each other, IOAM-Data-Fields could be present at
    multiple layers. The behavior follows the \"ships-in-the-night\"
    model, i.e., IOAM-Data-Fields in one layer are independent from
    IOAM-Data-Fields in another layer. Layering allows operators to
    instrument the protocol layer they want to measure. The different
    layers could, but do not have to, share the same IOAM encapsulation
    mechanisms.[¶](#section-3-2.12){.pilcrow}
:   

IOAM implementation:
:   The definition of the IOAM-Data-Fields takes the specifics of
    devices with hardware data planes and software data planes into
    account.[¶](#section-3-2.14){.pilcrow}
:   
:::
:::

::: {#IOAM_option_format}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [IOAM Data-Fields, Types, and Nodes](#name-ioam-data-fields-types-and-){.section-name .selfRef} {#name-ioam-data-fields-types-and-}

This section details IOAM-related nomenclature and describes data types,
such as IOAM-Data-Fields, IOAM-Types, IOAM-Namespaces, as well as the
different types of IOAM nodes.[¶](#section-4-1){.pilcrow}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [IOAM Data-Fields and Option-Types](#name-ioam-data-fields-and-option){.section-name .selfRef} {#name-ioam-data-fields-and-option}

An IOAM-Data-Field is a set of bits with a defined format and meaning,
which can be stored at a certain place in a packet for the purpose of
IOAM.[¶](#section-4.1-1){.pilcrow}

To accommodate the different uses of IOAM, IOAM-Data-Fields fall into
different categories. In IOAM, these categories are referred to as
\"IOAM-Option-Types\". A common registry is maintained for
IOAM-Option-Types (see [Section 7.1](#IOAM-type-registry){.xref} for
details). Corresponding to these IOAM-Option-Types, different
IOAM-Data-Fields are defined.[¶](#section-4.1-2){.pilcrow}

This document defines four
IOAM-Option-Types:[¶](#section-4.1-3){.pilcrow}

-   [Pre-allocated Trace
    Option-Type[¶](#section-4.1-4.1){.pilcrow}]{#section-4.1-4.1}
-   [Incremental Trace
    Option-Type[¶](#section-4.1-4.2){.pilcrow}]{#section-4.1-4.2}
-   [POT Option-Type[¶](#section-4.1-4.3){.pilcrow}]{#section-4.1-4.3}
-   [E2E Option-Type[¶](#section-4.1-4.4){.pilcrow}]{#section-4.1-4.4}

Future IOAM-Option-Types can be allocated by IANA, as described in
[Section 7.1](#IOAM-type-registry){.xref}.[¶](#section-4.1-5){.pilcrow}
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [IOAM-Domains and Types of IOAM Nodes](#name-ioam-domains-and-types-of-i){.section-name .selfRef} {#name-ioam-domains-and-types-of-i}

[Section 3](#IOAM_scope){.xref} already mentioned that IOAM is expected
to be deployed in a limited domain \[[RFC8799](#RFC8799){.xref}\]. One
or more IOAM-Option-Types are added to a packet upon entering an
IOAM-Domain and are removed from the packet when exiting the domain.
Within the IOAM-Domain, the IOAM-Data-Fields [MAY]{.bcp14} be updated by
network nodes that the packet traverses. An IOAM-Domain consists of
\"IOAM encapsulating nodes\", \"IOAM decapsulating nodes\", and \"IOAM
transit nodes\". The role of a node (i.e., encapsulating, transit, and
decapsulating) is defined within an IOAM-Namespace (see below). A node
can have different roles in different
IOAM-Namespaces.[¶](#section-4.2-1){.pilcrow}

A device that adds at least one IOAM-Option-Type to the packet is called
an \"IOAM encapsulating node\", whereas a device that removes an
IOAM-Option-Type is referred to as an \"IOAM decapsulating node\". Nodes
within the domain that are aware of IOAM data and read, write, and/or
process IOAM data are called \"IOAM transit nodes\". IOAM nodes that add
or remove the IOAM-Data-Fields can also update the IOAM-Data-Fields at
the same time. Or, in other words, IOAM encapsulating or decapsulating
nodes can also serve as IOAM transit nodes at the same time. Note that
not every node in an IOAM-Domain needs to be an IOAM transit node. For
example, a deployment might require that packets traverse a set of
firewalls that support IOAM. In that case, only the set of firewall
nodes would be IOAM transit nodes, rather than all
nodes.[¶](#section-4.2-2){.pilcrow}

An IOAM encapsulating node incorporates one or more IOAM-Option-Types
(from the list of IOAM-Types, see [Section
7.1](#IOAM-type-registry){.xref}) into packets that IOAM is enabled for.
If IOAM is enabled for a selected subset of the traffic, the IOAM
encapsulating node is responsible for applying the IOAM functionality to
the selected subset.[¶](#section-4.2-3){.pilcrow}

An IOAM transit node reads, writes, and/or processes one or more of the
IOAM-Data-Fields. If both the Pre-allocated and the Incremental Trace
Option-Types are present in the packet, each IOAM transit node, based on
configuration and available implementation of IOAM, might populate IOAM
trace data in either a Pre-allocated or Incremental Trace Option-Type
but not both. Note that not populating any of the Trace Option-Types is
also valid behavior for an IOAM transit node. A transit node
[MUST]{.bcp14} ignore IOAM-Option-Types that it does not understand. A
transit node [MUST NOT]{.bcp14} add new IOAM-Option-Types to a packet,
[MUST NOT]{.bcp14} remove IOAM-Option-Types from a packet, and [MUST
NOT]{.bcp14} change the IOAM-Data-Fields of an IOAM Edge-to-Edge
Option-Type.[¶](#section-4.2-4){.pilcrow}

An IOAM decapsulating node removes IOAM-Option-Type(s) from
packets.[¶](#section-4.2-5){.pilcrow}

The role of an IOAM encapsulating, IOAM transit, or IOAM decapsulating
node is always performed within a specific IOAM-Namespace. This means
that an IOAM node that is, e.g., an IOAM decapsulating node for
IOAM-Namespace \"A\" but not for IOAM-Namespace \"B\" will only remove
the IOAM-Option-Types for IOAM-Namespace \"A\" from the packet. Note
that this applies even for IOAM-Option-Types that the node does not
understand, for example, an IOAM-Option-Type other than the four
described above, which is added in a future
revision.[¶](#section-4.2-6){.pilcrow}

IOAM-Namespaces allow for a namespace-specific definition and
interpretation of IOAM-Data-Fields. An interface identifier could, for
example, point to a physical interface (e.g., to understand which
physical interface of an aggregated link is used when receiving or
transmitting a packet), whereas, in another case, it could refer to a
logical interface (e.g., in case of tunnels). Please refer to [Section
4.3](#ioam_namespaces){.xref} for details on
IOAM-Namespaces.[¶](#section-4.2-7){.pilcrow}
:::

::: {#ioam_namespaces}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [IOAM-Namespaces](#name-ioam-namespaces){.section-name .selfRef} {#name-ioam-namespaces}

IOAM-Namespaces add further context to IOAM-Option-Types and associated
IOAM-Data-Fields. The IOAM-Option-Types and associated IOAM-Data-Fields
are interpreted as defined in this document, regardless of the value of
the IOAM-Namespace. However, IOAM-Namespaces provide a way to group
nodes to support different deployment approaches of IOAM (see a few
example use cases below). IOAM-Namespaces also help to resolve potential
issues that can occur due to IOAM-Data-Fields not being globally unique
(e.g., IOAM node identifiers do not have to be globally unique). The
significance of IOAM-Data-Fields is always within a particular
IOAM-Namespace. Given that IOAM-Data-Fields are always interpreted as
the context of a specific namespace, the Namespace-ID field always needs
to be carried along with the IOAM data-fields
themselves.[¶](#section-4.3-1){.pilcrow}

An IOAM-Namespace is identified by a 16-bit namespace identifier
(Namespace-ID). The IOAM-Namespace field is included in all the
IOAM-Option-Types defined in this document and [MUST]{.bcp14} be
included in all future IOAM-Option-Types. The Namespace-ID value is
divided into two subranges:[¶](#section-4.3-2){.pilcrow}

-   [an operator-assigned range from 0x0001 to 0x7FFF
    and[¶](#section-4.3-3.1){.pilcrow}]{#section-4.3-3.1}
-   [an IANA-assigned range from 0x8000 to
    0xFFFF.[¶](#section-4.3-3.2){.pilcrow}]{#section-4.3-3.2}

The IANA-assigned range is intended to allow future extensions to have
new and interoperable IOAM functionality, while the operator-assigned
range is intended to be domain specific and managed by the network
operator. The Namespace-ID value of 0x0000 is the
\"Default-Namespace-ID\". The Default-Namespace-ID indicates that no
specific namespace is associated with the IOAM-Data-Fields in the
packet. The Default-Namespace-ID [MUST]{.bcp14} be supported by all
nodes implementing IOAM. A use case for the Default-Namespace-ID are
deployments that do not leverage specific namespaces for some or all of
their packets that carry IOAM-Data-Fields.[¶](#section-4.3-4){.pilcrow}

Namespace identifiers allow devices that are IOAM capable to
determine:[¶](#section-4.3-5){.pilcrow}

-   [whether one or more IOAM-Option-Types need to be processed by a
    device. If the Namespace-ID contained in a packet does not match any
    Namespace-ID the node is configured to operate on, then the node
    [MUST NOT]{.bcp14} change the contents of the
    IOAM-Data-Fields.[¶](#section-4.3-6.1){.pilcrow}]{#section-4.3-6.1}
-   [which IOAM-Option-Type needs to be processed/updated in case there
    are multiple IOAM-Option-Types present in the packet. Multiple
    IOAM-Option-Types can be present in a packet in case of overlapping
    IOAM-Domains or in case of a layered IOAM
    deployment.[¶](#section-4.3-6.2){.pilcrow}]{#section-4.3-6.2}
-   [whether one or more IOAM-Option-Types have to be removed from the
    packet, e.g., at a domain edge or domain
    boundary.[¶](#section-4.3-6.3){.pilcrow}]{#section-4.3-6.3}

IOAM-Namespaces support several different
uses:[¶](#section-4.3-7){.pilcrow}

-   [IOAM-Namespaces can be used by an operator to distinguish different
    IOAM-Domains. Devices at edges of an IOAM-Domain can filter on
    Namespace-IDs to provide for proper IOAM-Domain
    isolation.[¶](#section-4.3-8.1){.pilcrow}]{#section-4.3-8.1}
-   [IOAM-Namespaces provide additional context for IOAM-Data-Fields
    and, thus, can be used to ensure that IOAM-Data-Fields are unique
    and are interpreted properly by management stations or network
    controllers. The node identifier field (node_id, see below) does not
    need to be unique in a deployment. This could be the case if an
    operator wishes to use different node identifiers for different IOAM
    layers, even within the same device, or node identifiers might not
    be unique for other organizational reasons, such as after a merger
    of two formerly separated organizations. The Namespace-ID can be
    used as a context identifier, such that the combination of node_id
    and Namespace-ID will always be
    unique.[¶](#section-4.3-8.2){.pilcrow}]{#section-4.3-8.2}
-   [Similarly, IOAM-Namespaces can be used to define how certain
    IOAM-Data-Fields are interpreted; IOAM offers three different
    timestamp format options. The Namespace-ID can be used to determine
    the timestamp format. IOAM-Data-Fields (e.g., buffer occupancy) that
    do not have a unit associated are to be interpreted within the
    context of an
    IOAM-Namespace.[¶](#section-4.3-8.3){.pilcrow}]{#section-4.3-8.3}
-   [IOAM-Namespaces can be used to identify different sets of devices
    (e.g., different types of devices) in a deployment; if an operator
    wants to insert different IOAM-Data-Fields based on the device, the
    devices could be grouped into multiple IOAM-Namespaces. This could
    be due to the fact that the IOAM feature set differs between
    different sets of devices, or it could be for reasons of optimized
    space usage in the packet header. It could also stem from hardware
    or operational limitations on the size of the trace data that can be
    added and processed, preventing collection of a full trace for a
    flow.[¶](#section-4.3-8.4){.pilcrow}]{#section-4.3-8.4}
-   [By assigning different IOAM Namespace-IDs to different sets of
    nodes or network partitions and using a separate instance of an
    IOAM-Option-Type for each Namespace-ID, a full trace for a flow
    could be collected and constructed via partial traces from each
    IOAM-Option-Type in each of the packets in the flow. For example, an
    operator could choose to group the devices of a domain into two
    IOAM-Namespaces in a way that each IOAM-Namespace is represented by
    one of two IOAM-Option-Types in the packet. Each node would record
    data only for the IOAM-Namespace that it belongs to, ignoring the
    other IOAM-Option-Type with an IOAM-Namespace to which it doesn\'t
    belong. To retrieve a full view of the deployment, the captured
    IOAM-Data-Fields of the two IOAM-Namespaces need to be
    correlated.[¶](#section-4.3-8.5){.pilcrow}]{#section-4.3-8.5}
:::
:::

::: {#IOAM_tracing_option}
::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [IOAM Trace Option-Types](#name-ioam-trace-option-types){.section-name .selfRef} {#name-ioam-trace-option-types}

In a typical deployment, all nodes in an IOAM-Domain would participate
in IOAM; thus, they would be IOAM transit nodes, IOAM encapsulating
nodes, or IOAM decapsulating nodes. If not all nodes within a domain
support IOAM functionality as defined in this document, IOAM tracing
information (i.e., node data, see below) can only be collected on those
nodes that support IOAM functionality as defined in this document. Nodes
that do not support IOAM functionality as defined in this document will
forward the packet without any changes to the IOAM-Data-Fields. The
maximum number of hops and the minimum PMTU of the IOAM-Domain is
assumed to be known. An overflow indicator (O-bit) is defined as one of
the ways to deal with situations where the PMTU was underestimated,
i.e., where the number of hops that are IOAM capable exceeds the
available space in the packet.[¶](#section-4.4-1){.pilcrow}

To optimize hardware and software implementations, IOAM tracing is
defined as two separate options. A deployment can choose to configure
and support one or both of the following
options.[¶](#section-4.4-2){.pilcrow}

[]{.break}

Pre-allocated Trace-Option:
:   This trace option is defined as a container of node data fields (see
    below) with pre-allocated space for each node to populate its
    information. This option is useful for implementations where it is
    efficient to allocate the space once and index into the array to
    populate the data during transit (e.g., software forwarders often
    fall into this class). The IOAM encapsulating node allocates space
    for the Pre-allocated Trace Option-Type in the packet and sets
    corresponding fields in this IOAM-Option-Type. The IOAM
    encapsulating node allocates an array that is used to store
    operational data retrieved from every node while the packet
    traverses the domain. IOAM transit nodes update the content of the
    array and possibly update the checksums of outer headers. A pointer
    that is part of the IOAM trace data points to the next empty slot in
    the array. An IOAM transit node that updates the content of the
    Pre-allocated Trace-Option also updates the value of the pointer,
    which specifies where the next IOAM transit node fills in its data.
    The \"node data list\" array (see below) in the packet is populated
    iteratively as the packet traverses the network, starting with the
    last entry of the array, i.e., \"node data list \[n\]\" is the first
    entry to be populated, \"node data list \[n-1\]\" is the second one,
    etc.[¶](#section-4.4-3.2){.pilcrow}
:   

Incremental Trace-Option:
:   This trace option is defined as a container of node data fields,
    where each node allocates and pushes its node data immediately
    following the option header. This type of trace recording is useful
    for some of the hardware implementations, as it eliminates the need
    for the transit network elements to read the full array in the
    option and allows for as arbitrarily long packets as the MTU allows.
    The IOAM encapsulating node allocates space for the Incremental
    Trace Option-Type. Based on the operational state and configuration,
    the IOAM encapsulating node sets the fields in the Option-Type that
    control what IOAM-Data-Fields have to be collected and how large the
    node data list can grow. IOAM transit nodes push their node data to
    the node data list subject to any protocol constraints of the
    encapsulating layer. They then decrease the remaining length
    available to subsequent nodes and adjust the lengths and possibly
    checksums in outer headers.[¶](#section-4.4-3.4){.pilcrow}
:   

IOAM encapsulating nodes and IOAM decapsulating nodes that support
tracing [MUST]{.bcp14} support both Trace Option-Types. For IOAM transit
nodes, it is sufficient to support one of the Trace Option-Types. In the
event that both options are utilized in a deployment at the same time,
the Incremental Trace-Option [MUST]{.bcp14} be placed before the
Pre-allocated Trace-Option. Deployments that mix devices with either the
Incremental Trace-Option or the Pre-allocated Trace-Option could result
in both Option-Types being present in a packet. Given that the operator
knows which equipment is deployed in a particular IOAM-Domain, the
operator will decide by means of configuration which type(s) of trace
options will be used for a particular
domain.[¶](#section-4.4-4){.pilcrow}

Every node data entry holds information for a particular IOAM transit
node that is traversed by a packet. The IOAM decapsulating node removes
the IOAM-Option-Types and processes and/or exports the associated data.
Like all IOAM-Data-Fields, the IOAM-Data-Fields of the IOAM Trace
Option-Types are defined in the context of an
IOAM-Namespace.[¶](#section-4.4-5){.pilcrow}

IOAM tracing can collect the following types of
information:[¶](#section-4.4-6){.pilcrow}

-   [Identification of the IOAM node. An IOAM node identifier can match
    to a device identifier or a particular control point or subsystem
    within a device.[¶](#section-4.4-7.1){.pilcrow}]{#section-4.4-7.1}
-   [Identification of the interface that a packet was received on,
    i.e., ingress
    interface.[¶](#section-4.4-7.2){.pilcrow}]{#section-4.4-7.2}
-   [Identification of the interface that a packet was sent out on,
    i.e., egress
    interface.[¶](#section-4.4-7.3){.pilcrow}]{#section-4.4-7.3}
-   [Time of day when the packet was processed by the node, as well as
    the transit delay. Different definitions of processing time are
    feasible and expected, though it is important that all devices of an
    IOAM-Domain follow the same
    definition.[¶](#section-4.4-7.4){.pilcrow}]{#section-4.4-7.4}
-   [Generic data, i.e., format-free information where syntax and
    semantics of the information is defined by the operator in a
    specific deployment. For a specific IOAM-Namespace, all IOAM nodes
    have to interpret the generic data the same way. Examples for
    generic IOAM data include geolocation information (location of the
    node at the time the packet was processed), buffer queue fill level
    or cache fill level at the time the packet was processed, or even a
    battery-charge
    level.[¶](#section-4.4-7.5){.pilcrow}]{#section-4.4-7.5}
-   [Information to detect whether IOAM trace data was added at every
    hop or whether certain hops in the domain weren\'t IOAM transit
    nodes.[¶](#section-4.4-7.6){.pilcrow}]{#section-4.4-7.6}

It should be noted that the semantics of some of the node data fields
that are defined below, such as the queue depth and buffer occupancy,
are implementation specific. This approach is intended to allow IOAM
nodes with various different architectures.[¶](#section-4.4-8){.pilcrow}

::: {#TraceOptionDef}
::: {#section-4.4.1 .section}
#### [4.4.1.](#section-4.4.1){.section-number .selfRef} [Pre-allocated and Incremental Trace Option-Types](#name-pre-allocated-and-increment){.section-name .selfRef} {#name-pre-allocated-and-increment}

The IOAM Pre-allocated Trace-Option and the IOAM Incremental
Trace-Option have similar formats. Except where noted below, the
internal formats and fields of the two trace options are identical. Both
trace options consist of a fixed-size \"trace option header\" and a
variable data space to store gathered data, i.e., the \"node data
list\". An IOAM transit node (that is, not an IOAM encapsulating node or
IOAM decapsulating node) [MUST NOT]{.bcp14} modify any of the fields in
the fixed-size \"trace option header\", other than Flags\" and
\"RemainingLen\", i.e., an IOAM transit node [MUST NOT]{.bcp14} modify
the Namespace-ID, NodeLen, IOAM Trace-Type, or Reserved
fields.[¶](#section-4.4.1-1){.pilcrow}

The Pre-allocated and Incremental Trace-Option
headers:[¶](#section-4.4.1-2){.pilcrow}

::: {#section-4.4.1-3 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        Namespace-ID           |NodeLen  | Flags | RemainingLen|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |               IOAM Trace-Type                 |  Reserved     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.1-3){.pilcrow}
:::

The trace option data [MUST]{.bcp14} be aligned by 4
octets:[¶](#section-4.4.1-4){.pilcrow}

::: {#section-4.4.1-5 .alignLeft .art-text .artwork}
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<-+
    |                                                               |  |
    |                        node data list [0]                     |  |
    |                                                               |  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  D
    |                                                               |  a
    |                        node data list [1]                     |  t
    |                                                               |  a
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ~                             ...                               ~  S
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  p
    |                                                               |  a
    |                        node data list [n-1]                   |  c
    |                                                               |  e
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  |
    |                                                               |  |
    |                        node data list [n]                     |  |
    |                                                               |  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<-+

[¶](#section-4.4.1-5){.pilcrow}
:::

[]{.break}

Namespace-ID:
:   16-bit identifier of an IOAM-Namespace. The Namespace-ID value of
    0x0000 is defined as the \"Default-Namespace-ID\" (see [Section
    4.3](#ioam_namespaces){.xref}) and [MUST]{.bcp14} be known to all
    the nodes implementing IOAM. For any other Namespace-ID value that
    does not match any Namespace-ID the node is configured to operate
    on, the node [MUST NOT]{.bcp14} change the contents of the
    IOAM-Data-Fields.[¶](#section-4.4.1-6.2){.pilcrow}
:   

NodeLen:

:   5-bit unsigned integer. This field specifies the length of data
    added by each node in multiples of 4 octets, excluding the length of
    the \"Opaque State Snapshot\"
    field.[¶](#section-4.4.1-6.4.1){.pilcrow}

    If IOAM Trace-Type Bit 22 is not set, then NodeLen specifies the
    actual length added by each node. If IOAM Trace-Type Bit 22 is set,
    then the actual length added by a node would be (NodeLen + length of
    the \"Opaque State Snapshot\" field) in 4-octet
    units.[¶](#section-4.4.1-6.4.2){.pilcrow}

    For example, if 3 IOAM Trace-Type bits are set and none of them are
    in wide format, then NodeLen would be 3. If 3 IOAM Trace-Type bits
    are set and 2 of them are wide, then NodeLen would be
    5.[¶](#section-4.4.1-6.4.3){.pilcrow}

    An IOAM encapsulating node [MUST]{.bcp14} set
    NodeLen.[¶](#section-4.4.1-6.4.4){.pilcrow}

    A node receiving an IOAM Pre-allocated or Incremental Trace-Option
    relies on the NodeLen value.[¶](#section-4.4.1-6.4.5){.pilcrow}

:   

Flags:

:   ::: {#TraceFlags}
    4-bit field. Flags are allocated by IANA, as specified in [Section
    7.3](#Flags-Registry-Sec){.xref}. This document allocates a single
    flag as follows:[¶](#section-4.4.1-6.6.1){.pilcrow}

    []{.break}

    Bit 0:
    :   \"Overflow\" (O-bit) (most significant bit). In case a network
        element is supposed to add node data to a packet but detects
        that there are not enough octets left to record the node data,
        the network element [MUST NOT]{.bcp14} add any fields and
        [MUST]{.bcp14} set the overflow \"O-bit\" to \"1\" in the IOAM
        Trace-Option header. This is useful for transit nodes to ignore
        further processing of the
        option.[¶](#section-4.4.1-6.6.2.2){.pilcrow}
    :   
    :::

:   

RemainingLen:
:   7-bit unsigned integer. This field specifies the data space in
    multiples of 4 octets remaining for recording the node data before
    the node data list is considered to have overflowed. The sender
    [MUST]{.bcp14} assign the initial value of the RemainingLen field.
    The sender [MAY]{.bcp14} calculate the value of the RemainingLen
    field by computing the number of node data bytes allowed before
    exceeding the PMTU, given that the PMTU is known to the sender.
    Subsequent nodes can carry out a simple comparison between
    RemainingLen and NodeLen, along with the length of the \"Opaque
    State Snapshot\", if applicable, to determine whether or not data
    can be added by this node. When node data is added, the node
    [MUST]{.bcp14} decrease RemainingLen by the amount of data added. In
    the Pre-allocated Trace-Option, RemainingLen is used to derive the
    offset in data space to record the node data element. Specifically,
    the recording of the node data element would start from RemainingLen
    - NodeLen - size of (opaque snapshot) in 4-octet units. If
    RemainingLen in a Pre-allocated Trace-Option exceeds the length of
    the option, as specified in the lower-layer header (which is not
    within the scope of this document), then the node [MUST NOT]{.bcp14}
    add any fields.[¶](#section-4.4.1-6.8){.pilcrow}
:   

IOAM Trace-Type:

:   ::: {#IOAMTraceType}
    24-bit identifier that specifies which data types are used in this
    node data list.[¶](#section-4.4.1-6.10.1){.pilcrow}

    The IOAM Trace-Type value is a bit field. The following bits are
    defined in this document, with details on each bit described in
    [Section 4.4.2](#trace-node-data-element){.xref}. The order of
    packing the data fields in each node data element follows the bit
    order of the IOAM Trace-Type field as
    follows:[¶](#section-4.4.1-6.10.2){.pilcrow}

    []{.break}

    Bit 0
    :   Most significant bit. When set, indicates the presence of
        Hop_Lim and node_id (short format) in the node
        data.[¶](#section-4.4.1-6.10.3.2){.pilcrow}
    :   

    Bit 1
    :   When set, indicates the presence of ingress_if_id and
        egress_if_id (short format) in the node
        data.[¶](#section-4.4.1-6.10.3.4){.pilcrow}
    :   

    Bit 2
    :   When set, indicates the presence of timestamp seconds in the
        node data.[¶](#section-4.4.1-6.10.3.6){.pilcrow}
    :   

    Bit 3
    :   When set, indicates the presence of timestamp fraction in the
        node data.[¶](#section-4.4.1-6.10.3.8){.pilcrow}
    :   

    Bit 4
    :   When set, indicates the presence of transit delay in the node
        data.[¶](#section-4.4.1-6.10.3.10){.pilcrow}
    :   

    Bit 5
    :   When set, indicates the presence of IOAM-Namespace-specific data
        in short format in the node
        data.[¶](#section-4.4.1-6.10.3.12){.pilcrow}
    :   

    Bit 6
    :   When set, indicates the presence of queue depth in the node
        data.[¶](#section-4.4.1-6.10.3.14){.pilcrow}
    :   

    Bit 7
    :   When set, indicates the presence of the Checksum Complement node
        data.[¶](#section-4.4.1-6.10.3.16){.pilcrow}
    :   

    Bit 8
    :   When set, indicates the presence of Hop_Lim and node_id in wide
        format in the node data.[¶](#section-4.4.1-6.10.3.18){.pilcrow}
    :   

    Bit 9
    :   When set, indicates the presence of ingress_if_id and
        egress_if_id in wide format in the node
        data.[¶](#section-4.4.1-6.10.3.20){.pilcrow}
    :   

    Bit 10
    :   When set, indicates the presence of IOAM-Namespace-specific data
        in wide format in the node
        data.[¶](#section-4.4.1-6.10.3.22){.pilcrow}
    :   

    Bit 11
    :   When set, indicates the presence of buffer occupancy in the node
        data.[¶](#section-4.4.1-6.10.3.24){.pilcrow}
    :   

    Bits 12-21

    :   Undefined. These values are available for future assignment in
        the IOAM Trace-Type Registry ([Section
        7.2](#ioam-trace-type-registry){.xref}). Every future node data
        field corresponding to one of these bits [MUST]{.bcp14} be 4
        octets long. An IOAM encapsulating node [MUST]{.bcp14} set the
        value of each undefined bit to 0. If an IOAM transit node
        receives a packet with one or more of these bits set to 1, it
        [MUST]{.bcp14} either:[¶](#section-4.4.1-6.10.3.26.1){.pilcrow}

        1.  [add corresponding node data filled with the reserved value
            0xFFFFFFFF after the node data fields for the IOAM
            Trace-Type bits defined above, such that the total node data
            added by this node in units of 4 octets is equal to NodeLen
            or[¶](#section-4.4.1-6.10.3.26.2.1){.pilcrow}]{#section-4.4.1-6.10.3.26.2.1}
        2.  [not add any node data fields to the packet, even for the
            IOAM Trace-Type bits defined
            above.[¶](#section-4.4.1-6.10.3.26.2.2){.pilcrow}]{#section-4.4.1-6.10.3.26.2.2}

    :   

    Bit 22
    :   When set, indicates the presence of the variable-length Opaque
        State Snapshot field.[¶](#section-4.4.1-6.10.3.28){.pilcrow}
    :   

    Bit 23
    :   Reserved; [MUST]{.bcp14} be set to zero upon transmission and be
        ignored upon receipt. This bit is reserved to allow for future
        extensions of the IOAM Trace-Type bit
        field.[¶](#section-4.4.1-6.10.3.30){.pilcrow}
    :   

    [Section 4.4.2](#trace-node-data-element){.xref} describes the
    IOAM-Data-Types and their formats. Within an IOAM-Domain, possible
    combinations of these bits making the IOAM Trace-Type can be
    restricted by configuration
    knobs.[¶](#section-4.4.1-6.10.4){.pilcrow}
    :::

:   

Reserved:
:   8 bits. An IOAM encapsulating node [MUST]{.bcp14} set the value to
    zero upon transmission. IOAM transit nodes [MUST]{.bcp14} ignore the
    received value.[¶](#section-4.4.1-6.12){.pilcrow}
:   

Node data List \[n\]:
:   Variable-length field. This is a list of node data elements where
    the content of each node data element is determined by the IOAM
    Trace-Type. The order of packing the data fields in each node data
    element follows the bit order of the IOAM Trace-Type field. Each
    node [MUST]{.bcp14} prepend its node data element in front of the
    node data elements that it received, such that the transmitted node
    data list begins with this node\'s data element as the first
    populated element in the list. The last node data element in this
    list is the node data of the first IOAM-capable node in the path.
    Populating the node data list in this way ensures that the order of
    the node data list is the same for Incremental and Pre-allocated
    Trace-Options. In the Pre-allocated Trace-Option, the index
    contained in RemainingLen identifies the offset for current active
    node data to be populated.[¶](#section-4.4.1-6.14){.pilcrow}
:   
:::
:::

::: {#trace-node-data-element}
::: {#section-4.4.2 .section}
#### [4.4.2.](#section-4.4.2){.section-number .selfRef} [IOAM Node Data Fields and Associated Formats](#name-ioam-node-data-fields-and-a){.section-name .selfRef} {#name-ioam-node-data-fields-and-a}

All the IOAM-Data-Fields [MUST]{.bcp14} be aligned by 4 octets. If a
node that is supposed to update an IOAM-Data-Field is not capable of
populating the value of a field set in the IOAM Trace-Type, the field
value [MUST]{.bcp14} be set to 0xFFFFFFFF for 4-octet fields or
0xFFFFFFFFFFFFFFFF for 8-octet fields, indicating that the value is not
populated, except when explicitly specified in the field description
below.[¶](#section-4.4.2-1){.pilcrow}

Some IOAM-Data-Fields defined below, such as interface identifiers or
IOAM-Namespace-specific data, are defined in both \"short format\" and
\"wide format\". The use of \"short format\" or \"wide format\" is not
mutually exclusive. A deployment could choose to leverage both. For
example, ingress_if_id\_(short format) could be an identifier for the
physical interface, whereas ingress_if_id\_(wide format) could be an
identifier for a logical sub-interface of that physical
interface.[¶](#section-4.4.2-2){.pilcrow}

Data fields and associated data types for each of the IOAM-Data-Fields
are specified in the following sections. The definition of
IOAM-Data-Fields focuses on the syntax of the data fields and avoids
specifying the semantics where feasible. This is why no units are
defined for data fields, e.g., like \"buffer occupancy\" or \"queue
depth\". With this approach, nodes can supply the information in their
original format and are not required to perform unit or format
conversions. Systems that further process IOAM information, e.g., like a
network management system, are assumed to also handle unit conversions
as part of their IOAM-Data-Fields processing. The combination of a
particular data field and the Namespace-ID provides for the context to
interpret the provided data
appropriately.[¶](#section-4.4.2-3){.pilcrow}

::: {#Hop_Lim}
::: {#section-4.4.2.1 .section}
##### [4.4.2.1.](#section-4.4.2.1){.section-number .selfRef} [Hop_Lim and node_id Short](#name-hop_lim-and-node_id-short){.section-name .selfRef} {#name-hop_lim-and-node_id-short}

The \"Hop_Lim and node_id short\" field is a 4-octet field that is
defined as follows:[¶](#section-4.4.2.1-1){.pilcrow}

::: {#section-4.4.2.1-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Hop_Lim     |              node_id                          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.1-2){.pilcrow}
:::

[]{.break}

Hop_Lim:
:   1-octet unsigned integer. It is set to the Hop Limit value in the
    packet at egress from the node that records this data. Hop Limit
    information is used to identify the location of the node in the
    communication path. This is copied from the lower layer, e.g., TTL
    value in IPv4 header or Hop Limit field from IPv6 header of the
    packet when the packet is ready for transmission. The semantics of
    the Hop_Lim field depend on the lower-layer protocol that IOAM is
    encapsulated into; therefore, its specific semantics are outside the
    scope of this memo. The value of this field [MUST]{.bcp14} be set to
    0xff when the lower level does not have a field equivalent to TTL /
    Hop Limit.[¶](#section-4.4.2.1-3.2){.pilcrow}
:   

node_id:
:   3-octet unsigned integer. A node identifier field to uniquely
    identify a node within the IOAM-Namespace and associated
    IOAM-Domain. The procedure to allocate, manage, and map the node_ids
    is beyond the scope of this document. See
    \[[IPPM-IOAM-DEPLOYMENT](#I-D.ietf-ippm-ioam-deployment){.xref}\]
    for a discussion of deployment-related aspects of the
    node_id.[¶](#section-4.4.2.1-3.4){.pilcrow}
:   
:::
:::

::: {#section-4.4.2.2 .section}
##### [4.4.2.2.](#section-4.4.2.2){.section-number .selfRef} [ingress_if_id and egress_if_id Short](#name-ingress_if_id-and-egress_if){.section-name .selfRef} {#name-ingress_if_id-and-egress_if}

The \"ingress_if_id and egress_if_id\" field is a 4-octet field that is
defined as follows:[¶](#section-4.4.2.2-1){.pilcrow}

::: {#section-4.4.2.2-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |     ingress_if_id             |         egress_if_id          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.2-2){.pilcrow}
:::

[]{.break}

ingress_if_id:
:   2-octet unsigned integer. An interface identifier to record the
    ingress interface the packet was received
    on.[¶](#section-4.4.2.2-3.2){.pilcrow}
:   

egress_if_id:
:   2-octet unsigned integer. An interface identifier to record the
    egress interface the packet is forwarded out
    of.[¶](#section-4.4.2.2-3.4){.pilcrow}
:   

Note that due to the fact that IOAM uses its own IOAM-Namespaces for
IOAM-Data-Fields, data fields, like interface identifiers, can be used
in a flexible way to represent system resources that are associated with
ingressing or egressing packets, i.e., ingress_if_id could represent a
physical interface, a virtual or logical interface, or even a
queue.[¶](#section-4.4.2.2-4){.pilcrow}
:::

::: {#section-4.4.2.3 .section}
##### [4.4.2.3.](#section-4.4.2.3){.section-number .selfRef} [Timestamp Seconds](#name-timestamp-seconds){.section-name .selfRef} {#name-timestamp-seconds}

The \"timestamp seconds\" field is a 4-octet unsigned integer field. It
contains the absolute timestamp in seconds that specifies the time at
which the packet was received by the node. This field has three possible
formats, based on either the Precision Time Protocol (PTP) (see e.g.,
\[[RFC8877](#RFC8877){.xref}\]), NTP \[[RFC5905](#RFC5905){.xref}\], or
POSIX \[[POSIX](#POSIX){.xref}\]. The three timestamp formats are
specified in [Section 5](#TimestampSec){.xref}. In all three cases, the
timestamp seconds field contains the 32 most significant bits of the
timestamp format that is specified in [Section 5](#TimestampSec){.xref}.
If a node is not capable of populating this field, it assigns the value
0xFFFFFFFF. Note that this is a legitimate value that is valid for 1
second in approximately 136 years; the analyzer has to correlate several
packets or compare the timestamp value to its own time of day in order
to detect the error indication.[¶](#section-4.4.2.3-1){.pilcrow}
:::

::: {#section-4.4.2.4 .section}
##### [4.4.2.4.](#section-4.4.2.4){.section-number .selfRef} [Timestamp Fraction](#name-timestamp-fraction){.section-name .selfRef} {#name-timestamp-fraction}

The \"timestamp fraction\" field is a 4-octet unsigned integer field.
Fraction specifies the fractional portion of the number of seconds since
the NTP epoch \[[RFC8877](#RFC8877){.xref}\]. The field specifies the
time at which the packet was received by the node. This field has three
possible formats, based on either PTP (see e.g.,
\[[RFC8877](#RFC8877){.xref}\]), NTP \[[RFC5905](#RFC5905){.xref}\], or
POSIX \[[POSIX](#POSIX){.xref}\]. The three timestamp formats are
specified in [Section 5](#TimestampSec){.xref}. In all three cases, the
timestamp fraction field contains the 32 least significant bits of the
timestamp format that is specified in [Section 5](#TimestampSec){.xref}.
If a node is not capable of populating this field, it assigns the value
0xFFFFFFFF. Note that this is a legitimate value in the NTP format,
valid for approximately 233 picoseconds in every second. If the NTP
format is used, the analyzer has to correlate several packets in order
to detect the error indication.[¶](#section-4.4.2.4-1){.pilcrow}
:::

::: {#section-4.4.2.5 .section}
##### [4.4.2.5.](#section-4.4.2.5){.section-number .selfRef} [Transit Delay](#name-transit-delay){.section-name .selfRef} {#name-transit-delay}

The \"transit delay\" field is a 4-octet unsigned integer in the range 0
to 2^31^-1. It is the time in nanoseconds the packet spent in the
transit node. This can serve as an indication of the queuing delay at
the node. If the transit delay exceeds 2^31^-1 nanoseconds, then the top
bit \'O\' is set to indicate overflow and value set to 0x80000000. When
this field is part of the data field but a node populating the field is
not able to fill it, the field position in the field [MUST]{.bcp14} be
filled with value 0xFFFFFFFF to mean not
populated.[¶](#section-4.4.2.5-1){.pilcrow}

::: {#section-4.4.2.5-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |O|                     transit delay                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.5-2){.pilcrow}
:::
:::

::: {#section-4.4.2.6 .section}
##### [4.4.2.6.](#section-4.4.2.6){.section-number .selfRef} [Namespace-Specific Data](#name-namespace-specific-data){.section-name .selfRef} {#name-namespace-specific-data}

The \"namespace-specific data\" field is a 4-octet field that can be
used by the node to add IOAM-Namespace-specific data. This represents a
\"free-format\" 4-octet bit field with its semantics defined in the
context of a specific IOAM-Namespace.[¶](#section-4.4.2.6-1){.pilcrow}

::: {#section-4.4.2.6-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                    namespace-specific data                    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.6-2){.pilcrow}
:::
:::

::: {#section-4.4.2.7 .section}
##### [4.4.2.7.](#section-4.4.2.7){.section-number .selfRef} [Queue Depth](#name-queue-depth){.section-name .selfRef} {#name-queue-depth}

The \"queue depth\" field is a 4-octet unsigned integer field. This
field indicates the current length of the egress interface queue of the
interface from where the packet is forwarded out. The queue depth is
expressed as the current amount of memory buffers used by the queue (a
packet could consume one or more memory buffers, depending on its
size).[¶](#section-4.4.2.7-1){.pilcrow}

::: {#section-4.4.2.7-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                       queue depth                             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.7-2){.pilcrow}
:::
:::

::: {#section-4.4.2.8 .section}
##### [4.4.2.8.](#section-4.4.2.8){.section-number .selfRef} [Checksum Complement](#name-checksum-complement){.section-name .selfRef} {#name-checksum-complement}

The \"Checksum Complement\" field is a 4-octet node data that contains
the Checksum Complement value. The Checksum Complement is useful when
IOAM is transported over encapsulations that make use of a UDP
transport, such as VXLAN-GPE or Geneve. Without the Checksum Complement,
nodes adding IOAM node data update the UDP Checksum field following the
recommendation of the encapsulation protocols. When the Checksum
Complement is present, an IOAM encapsulating node or IOAM transit node
adding node data [MUST]{.bcp14} carry out one of the following two
alternatives in order to maintain the correctness of the UDP Checksum
value:[¶](#section-4.4.2.8-1){.pilcrow}

1.  [recompute the UDP Checksum field
    or[¶](#section-4.4.2.8-2.1){.pilcrow}]{#section-4.4.2.8-2.1}
2.  [use the Checksum Complement to make a checksum-neutral update in
    the UDP payload; the Checksum Complement is assigned a value that
    complements the rest of the node data fields that were added by the
    current node, causing the existing UDP Checksum field to remain
    correct.[¶](#section-4.4.2.8-2.2){.pilcrow}]{#section-4.4.2.8-2.2}

IOAM decapsulating nodes [MUST]{.bcp14} recompute the UDP Checksum
field, since they do not know whether previous hops modified the UDP
Checksum field or the Checksum Complement
field.[¶](#section-4.4.2.8-3){.pilcrow}

Checksum Complement fields are used in a similar manner in
\[[RFC7820](#RFC7820){.xref}\] and
\[[RFC7821](#RFC7821){.xref}\].[¶](#section-4.4.2.8-4){.pilcrow}

::: {#section-4.4.2.8-5 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                   Checksum Complement                         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.8-5){.pilcrow}
:::
:::

::: {#section-4.4.2.9 .section}
##### [4.4.2.9.](#section-4.4.2.9){.section-number .selfRef} [Hop_Lim and node_id Wide](#name-hop_lim-and-node_id-wide){.section-name .selfRef} {#name-hop_lim-and-node_id-wide}

The \"Hop_Lim and node_id wide\" field is an 8-octet field defined as
follows:[¶](#section-4.4.2.9-1){.pilcrow}

::: {#section-4.4.2.9-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Hop_Lim     |              node_id                          ~
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ~                         node_id (contd)                       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.9-2){.pilcrow}
:::

[]{.break}

Hop_Lim:
:   1-octet unsigned integer. See [Section 4.4.2.1](#Hop_Lim){.xref} for
    the definition of the field.[¶](#section-4.4.2.9-3.2){.pilcrow}
:   

node_id:
:   7-octet unsigned integer. It is a node identifier field to uniquely
    identify a node within the IOAM-Namespace and associated
    IOAM-Domain. The procedure to allocate, manage, and map the node_ids
    is beyond the scope of this
    document.[¶](#section-4.4.2.9-3.4){.pilcrow}
:   
:::

::: {#section-4.4.2.10 .section}
##### [4.4.2.10.](#section-4.4.2.10){.section-number .selfRef} [ingress_if_id and egress_if_id Wide](#name-ingress_if_id-and-egress_if_){.section-name .selfRef} {#name-ingress_if_id-and-egress_if_}

The \"ingress_if_id and egress_if_id wide\" field is an 8-octet field,
which is defined as follows:[¶](#section-4.4.2.10-1){.pilcrow}

::: {#section-4.4.2.10-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                       ingress_if_id                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                       egress_if_id                            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.10-2){.pilcrow}
:::

[]{.break}

ingress_if_id:
:   4-octet unsigned integer. It is an interface identifier to record
    the ingress interface the packet was received
    on.[¶](#section-4.4.2.10-3.2){.pilcrow}
:   

egress_if_id:
:   4-octet unsigned integer. It is an interface identifier to record
    the egress interface the packet is forwarded out
    of.[¶](#section-4.4.2.10-3.4){.pilcrow}
:   
:::

::: {#section-4.4.2.11 .section}
##### [4.4.2.11.](#section-4.4.2.11){.section-number .selfRef} [Namespace-Specific Data Wide](#name-namespace-specific-data-wid){.section-name .selfRef} {#name-namespace-specific-data-wid}

The \"namespace-specific data wide\" field is an 8-octet field that can
be used by the node to add IOAM-Namespace-specific data. This represents
a \"free-format\" 8-octet bit field with its semantics defined in the
context of a specific IOAM-Namespace.[¶](#section-4.4.2.11-1){.pilcrow}

::: {#section-4.4.2.11-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                    namespace-specific data                    ~
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ~                namespace-specific data (contd)                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.11-2){.pilcrow}
:::
:::

::: {#section-4.4.2.12 .section}
##### [4.4.2.12.](#section-4.4.2.12){.section-number .selfRef} [Buffer Occupancy](#name-buffer-occupancy){.section-name .selfRef} {#name-buffer-occupancy}

The \"buffer occupancy\" field is a 4-octet unsigned integer field. This
field indicates the current status of the occupancy of the common buffer
pool used by a set of queues. The units of this field are implementation
specific. Hence, the units are interpreted within the context of an
IOAM-Namespace and/or node identifier if used. The authors acknowledge
that, in some operational cases, there is a need for the units to be
consistent across a packet path through the network; hence, it is
recommended for implementations to use standard units, such as
bytes.[¶](#section-4.4.2.12-1){.pilcrow}

::: {#section-4.4.2.12-2 .alignLeft .art-text .artwork}
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                       buffer occupancy                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.12-2){.pilcrow}
:::
:::

::: {#section-4.4.2.13 .section}
##### [4.4.2.13.](#section-4.4.2.13){.section-number .selfRef} [Opaque State Snapshot](#name-opaque-state-snapshot){.section-name .selfRef} {#name-opaque-state-snapshot}

The \"Opaque State Snapshot\" field is a variable-length field and
follows the fixed-length IOAM-Data-Fields defined above. It allows the
network element to store an arbitrary state in the node data field
without a predefined schema. The schema is to be defined within the
context of an IOAM-Namespace. The schema needs to be made known to the
analyzer by some out-of-band mechanism. The specification of this
mechanism is beyond the scope of this document. A 24-bit \"Schema ID\"
field, interpreted within the context of an IOAM-Namespace, indicates
which particular schema is used and has to be configured on the network
element by the operator.[¶](#section-4.4.2.13-1){.pilcrow}

::: {#section-4.4.2.13-2 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Length      |                     Schema ID                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    |                                                               |
    |                        Opaque data                            |
    ~                                                               ~
    .                                                               .
    .                                                               .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.4.2.13-2){.pilcrow}
:::

[]{.break}

Length:
:   1-octet unsigned integer. It is the length in multiples of 4 octets
    of the Opaque data field that follows Schema
    ID.[¶](#section-4.4.2.13-3.2){.pilcrow}
:   

Schema ID:
:   3-octet unsigned integer identifying the schema of Opaque
    data.[¶](#section-4.4.2.13-3.4){.pilcrow}
:   

Opaque data:
:   Variable-length field. This field is interpreted as specified by the
    schema identified by the Schema
    ID.[¶](#section-4.4.2.13-3.6){.pilcrow}
:   

When this field is part of the data field, but a node populating the
field has no opaque state data to report, the Length [MUST]{.bcp14} be
set to 0 and the Schema ID [MUST]{.bcp14} be set to 0xFFFFFF to mean no
schema.[¶](#section-4.4.2.13-4){.pilcrow}
:::
:::
:::

::: {#trace-type-node-data}
::: {#section-4.4.3 .section}
#### [4.4.3.](#section-4.4.3){.section-number .selfRef} [Examples of IOAM Node Data](#name-examples-of-ioam-node-data){.section-name .selfRef} {#name-examples-of-ioam-node-data}

The format used for the entries in a packet\'s \"node data list\" array
can vary from packet to packet and deployment to deployment. Some
deployments might only be interested in recording the node identifiers,
whereas others might be interested in recording node identifiers and
timestamps. This section provides example entries of the \"node data
list\" array.[¶](#section-4.4.3-1){.pilcrow}

[]{.break}

0xD40000:

:   If the IOAM Trace-Type is 0xD40000 (0b110101000000000000000000),
    then the format of node data is:[¶](#section-4.4.3-2.2.1){.pilcrow}

    ::: {#section-4.4.3-2.2.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |     ingress_if_id             |         egress_if_id          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                     timestamp fraction                        |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                    namespace-specific data                    |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.2.2){.pilcrow}
    :::

:   

0xC00000:

:   If the IOAM Trace-Type is 0xC00000 (0b110000000000000000000000),
    then the format is:[¶](#section-4.4.3-2.4.1){.pilcrow}

    ::: {#section-4.4.3-2.4.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |     ingress_if_id             |         egress_if_id          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.4.2){.pilcrow}
    :::

:   

0x900000:

:   If the IOAM Trace-Type is 0x900000 (0b100100000000000000000000),
    then the format is:[¶](#section-4.4.3-2.6.1){.pilcrow}

    ::: {#section-4.4.3-2.6.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                   timestamp fraction                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.6.2){.pilcrow}
    :::

:   

0x840000:

:   If the IOAM Trace-Type is 0x840000 (0b100001000000000000000000),
    then the format is:[¶](#section-4.4.3-2.8.1){.pilcrow}

    ::: {#section-4.4.3-2.8.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                    namespace-specific data                    |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.8.2){.pilcrow}
    :::

:   

0x940000:

:   If the IOAM Trace-Type is 0x940000 (0b100101000000000000000000),
    then the format is:[¶](#section-4.4.3-2.10.1){.pilcrow}

    ::: {#section-4.4.3-2.10.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                    timestamp fraction                         |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                    namespace-specific data                    |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.10.2){.pilcrow}
    :::

:   

0x308002:

:   If the IOAM Trace-Type is 0x308002 (0b001100001000000000000010),
    then the format is:[¶](#section-4.4.3-2.12.1){.pilcrow}

    ::: {#section-4.4.3-2.12.2 .alignLeft .art-text .artwork}
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                      timestamp seconds                        |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                    timestamp fraction                         |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Hop_Lim     |              node_id                          |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                         node_id(contd)                        |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |   Length      |                     Schema ID                 |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |                                                               |
        |                                                               |
        |                        Opaque data                            |
        ~                                                               ~
        .                                                               .
        .                                                               .
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    [¶](#section-4.4.3-2.12.2){.pilcrow}
    :::

:   
:::
:::
:::
:::

::: {#IOAM_proof_of_transit_option}
::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [IOAM Proof of Transit Option-Type](#name-ioam-proof-of-transit-optio){.section-name .selfRef} {#name-ioam-proof-of-transit-optio}

The IOAM Proof of Transit Option-Type is used to support path or service
function chain \[[RFC7665](#RFC7665){.xref}\] verification use cases,
i.e., prove that traffic transited a defined path. While the details on
how the IOAM data for the Proof of Transit Option-Type is processed at
IOAM encapsulating, decapsulating, and transit nodes are outside the
scope of the document, Proof of Transit approaches share the need to
uniquely identify a packet, as well as iteratively operate on a set of
information that is handed from node to node. Correspondingly, two
pieces of information are added as IOAM-Data-Fields to the
packet:[¶](#section-4.5-1){.pilcrow}

[]{.break}

PktID:
:   unique identifier for the packet[¶](#section-4.5-2.2){.pilcrow}
:   

Cumulative:
:   information that is handed from node to node and updated by every
    node according to a verification
    algorithm[¶](#section-4.5-2.4){.pilcrow}
:   

The IOAM Proof of Transit Option-Type consist of a fixed-size \"IOAM
Proof of Transit Option header\" and \"IOAM Proof of Transit Option data
fields\":[¶](#section-4.5-3){.pilcrow}

IOAM Proof of Transit Option header:[¶](#section-4.5-4){.pilcrow}

::: {#section-4.5-5 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       Namespace-ID            |IOAM POT-Type  | IOAM POT flags|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.5-5){.pilcrow}
:::

IOAM Proof of Transit Option-Type IOAM-Data-Fields [MUST]{.bcp14} be
aligned by 4 octets:[¶](#section-4.5-6){.pilcrow}

::: {#section-4.5-7 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       POT Option data field determined by IOAM POT-Type       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.5-7){.pilcrow}
:::

[]{.break}

Namespace-ID:
:   16-bit identifier of an IOAM-Namespace. The Namespace-ID value of
    0x0000 is defined as the \"Default-Namespace-ID\" (see [Section
    4.3](#ioam_namespaces){.xref}) and [MUST]{.bcp14} be known to all
    the nodes implementing IOAM. For any other Namespace-ID value that
    does not match any Namespace-ID the node is configured to operate
    on, the node [MUST NOT]{.bcp14} change the contents of the
    IOAM-Data-Fields.[¶](#section-4.5-8.2){.pilcrow}
:   

IOAM POT-Type:

:   8-bit identifier of a particular POT variant that specifies the POT
    data that is included. This document defines IOAM POT-Type
    0:[¶](#section-4.5-8.4.1){.pilcrow}

    []{.break}

    0:
    :   POT data is a 16-octet field to carry data associated to POT
        procedures.[¶](#section-4.5-8.4.2.2){.pilcrow}
    :   

    If a node receives an IOAM POT-Type value that it does not
    understand, the node [MUST NOT]{.bcp14} change, add to, or remove
    the contents of the
    IOAM-Data-Fields.[¶](#section-4.5-8.4.3){.pilcrow}

:   

IOAM POT flags:
:   8 bits. This document does not define any flags. Bits 0-7 are
    available for assignment (see [Section 7.5](#pot-flags-sec){.xref}).
    Bits that have not been assigned [MUST]{.bcp14} be set to zero upon
    transmission and be ignored upon
    receipt.[¶](#section-4.5-8.6){.pilcrow}
:   

POT Option data:
:   Variable-length field. The type of which is determined by the IOAM
    POT-Type.[¶](#section-4.5-8.8){.pilcrow}
:   

::: {#section-4.5.1 .section}
#### [4.5.1.](#section-4.5.1){.section-number .selfRef} [IOAM Proof of Transit Type 0](#name-ioam-proof-of-transit-type-){.section-name .selfRef} {#name-ioam-proof-of-transit-type-}

IOAM Proof of Transit Option of IOAM POT-Type
0:[¶](#section-4.5.1-1){.pilcrow}

::: {#section-4.5.1-2 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        Namespace-ID           |IOAM POT-Type=0|R R R R R R R R|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<-+
    |                        PktID                                  |  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  P
    |                        PktID (contd)                          |  O
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  T
    |                        Cumulative                             |  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  |
    |                        Cumulative (contd)                     |  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<-+

[¶](#section-4.5.1-2){.pilcrow}
:::

[]{.break}

Namespace-ID:
:   16-bit identifier of an IOAM-Namespace (see [Section
    4.3](#ioam_namespaces){.xref}
    above).[¶](#section-4.5.1-3.2){.pilcrow}
:   

IOAM POT-Type:
:   8-bit identifier of a particular POT variant that specifies the POT
    data that is included (see [Section
    4.5](#IOAM_proof_of_transit_option){.xref} above). For this case
    here, IOAM POT-Type is set to the value
    0.[¶](#section-4.5.1-3.4){.pilcrow}
:   

Bit 0-7:
:   Undefined (see [Section 4.5](#IOAM_proof_of_transit_option){.xref}
    above).[¶](#section-4.5.1-3.6){.pilcrow}
:   

PktID:
:   64-bit packet identifier.[¶](#section-4.5.1-3.8){.pilcrow}
:   

Cumulative:
:   64-bit Cumulative that is updated at specific nodes by processing
    per packet PktID field and configured
    parameters.[¶](#section-4.5.1-3.10){.pilcrow}
:   

Note: Larger or smaller sizes of \"PktID\" and \"Cumulative\" data are
feasible and could be required for certain deployments, e.g., in case of
space constraints in the encapsulation protocols used. Future documents
could introduce different sizes of data for \"Proof of
Transit\".[¶](#section-4.5.1-4.1){.pilcrow}
:::
:::
:::

::: {#IOAM_edge_to_edge_opt}
::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [IOAM Edge-to-Edge Option-Type](#name-ioam-edge-to-edge-option-ty){.section-name .selfRef} {#name-ioam-edge-to-edge-option-ty}

The IOAM Edge-to-Edge Option-Type carries data that is added by the IOAM
encapsulating node and interpreted by the IOAM decapsulating node. The
IOAM transit nodes [MAY]{.bcp14} process the data but [MUST NOT]{.bcp14}
modify it.[¶](#section-4.6-1){.pilcrow}

The IOAM Edge-to-Edge Option-Type consist of a fixed-size \"IOAM
Edge-to-Edge Option-Type header\" and \"IOAM Edge-to-Edge Option-Type
data fields\":[¶](#section-4.6-2){.pilcrow}

IOAM Edge-to-Edge Option-Type header:[¶](#section-4.6-3){.pilcrow}

::: {#section-4.6-4 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        Namespace-ID           |         IOAM E2E-Type         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.6-4){.pilcrow}
:::

The IOAM Edge-to-Edge Option-Type IOAM-Data-Fields [MUST]{.bcp14} be
aligned by 4 octets:[¶](#section-4.6-5){.pilcrow}

::: {#section-4.6-6 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       E2E Option data field determined by IOAM-E2E-Type       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-4.6-6){.pilcrow}
:::

[]{.break}

Namespace-ID:
:   16-bit identifier of an IOAM-Namespace. The Namespace-ID value of
    0x0000 is defined as the \"Default-Namespace-ID\" (see [Section
    4.3](#ioam_namespaces){.xref}) and [MUST]{.bcp14} be known to all
    the nodes implementing IOAM. For any other Namespace-ID value that
    does not match any Namespace-ID the node is configured to operate
    on, the node [MUST NOT]{.bcp14} change the contents of the
    IOAM-Data-Fields.[¶](#section-4.6-7.2){.pilcrow}
:   

IOAM-E2E-Type:

:   16-bit identifier that specifies which data types are used in the
    E2E Option data. The IOAM-E2E-Type value is a bit field. The order
    of packing the E2E Option data field elements follows the bit order
    of the IOAM E2E-Type field as
    follows:[¶](#section-4.6-7.4.1){.pilcrow}

    []{.break}

    Bit 0
    :   Most significant bit. When set, it indicates the presence of a
        64-bit sequence number added to a specific \"packet group\" that
        is used to detect packet loss, packet reordering, or packet
        duplication within the group. The \"packet group\" is deployment
        dependent and defined at the IOAM encapsulating node, e.g., by
        n-tuple-based classification of packets. When this bit is set,
        \"Bit 1\" (for a 32-bit sequence number, see below)
        [MUST]{.bcp14} be zero.[¶](#section-4.6-7.4.2.2){.pilcrow}
    :   

    Bit 1
    :   When set, it indicates the presence of a 32-bit sequence number
        added to a specific \"packet group\" that is used to detect
        packet loss, packet reordering, or packet duplication within
        that group. The \"packet group\" is deployment dependent and
        defined at the IOAM encapsulating node, e.g., by n-tuple-based
        classification of packets. When this bit is set, \"Bit 0\" (for
        a 64-bit sequence number, see above) [MUST]{.bcp14} be
        zero.[¶](#section-4.6-7.4.2.4){.pilcrow}
    :   

    Bit 2
    :   When set, it indicates the presence of timestamp seconds,
        representing the time at which the packet entered the
        IOAM-Domain. Within the IOAM encapsulating node, the time that
        the timestamp is retrieved can depend on the implementation.
        Some possibilities are 1) the time at which the packet was
        received by the node, 2) the time at which the packet was
        transmitted by the node, or 3) when a tunnel encapsulation is
        used, the point at which the packet is encapsulated into the
        tunnel. Each implementation has to document when the E2E
        timestamp that is going to be put in the packet is retrieved.
        This 4-octet field has three possible formats, based on either
        PTP (see e.g., \[[RFC8877](#RFC8877){.xref}\]), NTP
        \[[RFC5905](#RFC5905){.xref}\], or POSIX
        \[[POSIX](#POSIX){.xref}\]. The three timestamp formats are
        specified in [Section 5](#TimestampSec){.xref}. In all three
        cases, the timestamp seconds field contains the 32 most
        significant bits of the timestamp format that is specified in
        [Section 5](#TimestampSec){.xref}. If a node is not capable of
        populating this field, it assigns the value 0xFFFFFFFF. Note
        that this is a legitimate value that is valid for 1 second in
        approximately 136 years; the analyzer has to correlate several
        packets or compare the timestamp value to its own time of day in
        order to detect the error
        indication.[¶](#section-4.6-7.4.2.6){.pilcrow}
    :   

    Bit 3
    :   When set, it indicates the presence of timestamp fraction,
        representing the time at which the packet entered the
        IOAM-Domain. This 4-octet field has three possible formats,
        based on either PTP (see e.g., \[[RFC8877](#RFC8877){.xref}\]),
        NTP \[[RFC5905](#RFC5905){.xref}\], or POSIX
        \[[POSIX](#POSIX){.xref}\]. The three timestamp formats are
        specified in [Section 5](#TimestampSec){.xref}. In all three
        cases, the timestamp fraction field contains the 32 least
        significant bits of the timestamp format that is specified in
        [Section 5](#TimestampSec){.xref}. If a node is not capable of
        populating this field, it assigns the value 0xFFFFFFFF. Note
        that this is a legitimate value in the NTP format, valid for
        approximately 233 picoseconds in every second. If the NTP format
        is used, the analyzer has to correlate several packets in order
        to detect the error
        indication.[¶](#section-4.6-7.4.2.8){.pilcrow}
    :   

    Bit 4-15
    :   Undefined. An IOAM encapsulating node [MUST]{.bcp14} set the
        value of these bits to zero upon transmission and ignore them
        upon receipt.[¶](#section-4.6-7.4.2.10){.pilcrow}
    :   

:   

E2E Option data:
:   Variable-length field. The type of which is determined by the IOAM
    E2E-Type.[¶](#section-4.6-7.6){.pilcrow}
:   
:::
:::
:::
:::

::: {#TimestampSec}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Timestamp Formats](#name-timestamp-formats){.section-name .selfRef} {#name-timestamp-formats}

The IOAM-Data-Fields include a timestamp field that is represented in
one of three possible timestamp formats. It is assumed that the
management plane is responsible for determining which timestamp format
is used.[¶](#section-5-1){.pilcrow}

::: {#PTPFromatSec}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [PTP Truncated Timestamp Format](#name-ptp-truncated-timestamp-for){.section-name .selfRef} {#name-ptp-truncated-timestamp-for}

The Precision Time Protocol (PTP) uses an 80-bit timestamp format. The
truncated timestamp format is a 64-bit field, which is the 64 least
significant bits of the 80-bit PTP timestamp. The PTP truncated format
is specified in [Section
4.3](https://www.rfc-editor.org/rfc/rfc8877#section-4.3){.relref} of
\[[RFC8877](#RFC8877){.xref}\], and the details are presented below for
the sake of completeness.[¶](#section-5.1-1){.pilcrow}

::: {#section-5.1-2 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Seconds                            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          Nanoseconds                          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-5.1-2){.pilcrow}
:::

[]{.break}

Timestamp field format:
:   []{.break}

    Seconds:

    :   Specifies the integer portion of the number of seconds since the
        PTP epoch[¶](#section-5.1-3.2.1.2.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.1-3.2.1.2.2.2){.pilcrow}
        :   

        Units:
        :   seconds[¶](#section-5.1-3.2.1.2.2.4){.pilcrow}
        :   

    :   

    Nanoseconds:

    :   Specifies the fractional portion of the number of seconds since
        the PTP epoch[¶](#section-5.1-3.2.1.4.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.1-3.2.1.4.2.2){.pilcrow}
        :   

        Units:
        :   nanoseconds. The value of this field is in the range 0 to
            (10^9^)-1.[¶](#section-5.1-3.2.1.4.2.4){.pilcrow}
        :   

    :   
:   

Epoch:
:   PTP epoch. For details, see e.g.,
    \[[RFC8877](#RFC8877){.xref}\].[¶](#section-5.1-3.4){.pilcrow}
:   

Resolution:
:   The resolution is 1 nanosecond.[¶](#section-5.1-3.6){.pilcrow}
:   

Wraparound:
:   This time format wraps around every 2^32^ seconds, which is roughly
    136 years. The next wraparound will occur in the year
    2106.[¶](#section-5.1-3.8){.pilcrow}
:   

Synchronization Aspects:
:   It is assumed that the nodes that run this protocol are synchronized
    among themselves. Nodes [MAY]{.bcp14} be synchronized to a global
    reference time. Note that if PTP is used for synchronization, the
    timestamp [MAY]{.bcp14} be derived from the PTP-synchronized clock,
    allowing the timestamp to be measured with respect to the clock of a
    PTP Grandmaster clock.[¶](#section-5.1-3.10){.pilcrow}
:   
:::
:::

::: {#NTPFormatSec}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [NTP 64-Bit Timestamp Format](#name-ntp-64-bit-timestamp-format){.section-name .selfRef} {#name-ntp-64-bit-timestamp-format}

The Network Time Protocol (NTP) \[[RFC5905](#RFC5905){.xref}\] timestamp
format is 64 bits long. This specification uses the NTP timestamp format
that is specified in [Section
4.2.1](https://www.rfc-editor.org/rfc/rfc8877#section-4.2.1){.relref} of
\[[RFC8877](#RFC8877){.xref}\], and the details are presented below for
the sake of completeness.[¶](#section-5.2-1){.pilcrow}

::: {#section-5.2-2 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Seconds                            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Fraction                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-5.2-2){.pilcrow}
:::

[]{.break}

Timestamp field format:
:   []{.break}

    Seconds:

    :   specifies the integer portion of the number of seconds since the
        NTP epoch[¶](#section-5.2-3.2.1.2.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.2-3.2.1.2.2.2){.pilcrow}
        :   

        Units:
        :   seconds[¶](#section-5.2-3.2.1.2.2.4){.pilcrow}
        :   

    :   

    Fraction:

    :   specifies the fractional portion of the number of seconds since
        the NTP epoch[¶](#section-5.2-3.2.1.4.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.2-3.2.1.4.2.2){.pilcrow}
        :   

        Units:
        :   the unit is 2^(-32)^ seconds, which is roughly equal to 233
            picoseconds.[¶](#section-5.2-3.2.1.4.2.4){.pilcrow}
        :   

    :   
:   

Epoch:
:   NTP epoch. For details, see
    \[[RFC5905](#RFC5905){.xref}\].[¶](#section-5.2-3.4){.pilcrow}
:   

Resolution:
:   The resolution is 2^(-32)^ seconds.[¶](#section-5.2-3.6){.pilcrow}
:   

Wraparound:
:   This time format wraps around every 2^32^ seconds, which is roughly
    136 years. The next wraparound will occur in the year
    2036.[¶](#section-5.2-3.8){.pilcrow}
:   

Synchronization Aspects:
:   Nodes that use this timestamp format will typically be synchronized
    to UTC using NTP \[[RFC5905](#RFC5905){.xref}\]. Thus, the timestamp
    [MAY]{.bcp14} be derived from the NTP-synchronized clock, allowing
    the timestamp to be measured with respect to the clock of an NTP
    server.[¶](#section-5.2-3.10){.pilcrow}
:   
:::
:::

::: {#POSIXFormatSec}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [POSIX-Based Timestamp Format](#name-posix-based-timestamp-forma){.section-name .selfRef} {#name-posix-based-timestamp-forma}

This timestamp format is based on the POSIX time format
\[[POSIX](#POSIX){.xref}\]. The detailed specification of the timestamp
format used in this document is presented
below.[¶](#section-5.3-1){.pilcrow}

::: {#section-5.3-2 .alignLeft .art-text .artwork}
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                            Seconds                            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          Microseconds                         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

[¶](#section-5.3-2){.pilcrow}
:::

[]{.break}

Timestamp field format:
:   []{.break}

    Seconds:

    :   specifies the integer portion of the number of seconds since the
        POSIX epoch[¶](#section-5.3-3.2.1.2.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.3-3.2.1.2.2.2){.pilcrow}
        :   

        Units:
        :   seconds[¶](#section-5.3-3.2.1.2.2.4){.pilcrow}
        :   

    :   

    Microseconds:

    :   specifies the fractional portion of the number of seconds since
        the POSIX epoch[¶](#section-5.3-3.2.1.4.1){.pilcrow}

        []{.break}

        Size:
        :   32 bits[¶](#section-5.3-3.2.1.4.2.2){.pilcrow}
        :   

        Units:
        :   the unit is microseconds. The value of this field is in the
            range 0 to (10^6^)-1.[¶](#section-5.3-3.2.1.4.2.4){.pilcrow}
        :   

    :   
:   

Epoch:
:   POSIX epoch. For details, see \[[POSIX](#POSIX){.xref}\], Appendix
    A.4.16.[¶](#section-5.3-3.4){.pilcrow}
:   

Resolution:
:   The resolution is 1 microsecond.[¶](#section-5.3-3.6){.pilcrow}
:   

Wraparound:
:   This time format wraps around every 2^32^ seconds, which is roughly
    136 years. The next wraparound will occur in the year
    2106.[¶](#section-5.3-3.8){.pilcrow}
:   

Synchronization Aspects:
:   It is assumed that nodes that use this timestamp format run the
    Linux operating system and hence use the POSIX time. In some cases,
    nodes [MAY]{.bcp14} be synchronized to UTC using a synchronization
    mechanism that is outside the scope of this document, such as NTP
    \[[RFC5905](#RFC5905){.xref}\]. Thus, the timestamp [MAY]{.bcp14} be
    derived from the NTP-synchronized clock, allowing the timestamp to
    be measured with respect to the clock of an NTP
    server.[¶](#section-5.3-3.10){.pilcrow}
:   
:::
:::
:::
:::

::: {#export}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [IOAM Data Export](#name-ioam-data-export){.section-name .selfRef} {#name-ioam-data-export}

IOAM nodes collect information for packets traversing a domain that
supports IOAM. IOAM decapsulating nodes, as well as IOAM transit nodes,
can choose to retrieve IOAM information from the packet, process the
information further, and export the information using e.g., IP Flow
Information Export (IPFIX). The mechanisms and associated data formats
for exporting IOAM data are outside the scope of this
document.[¶](#section-6-1){.pilcrow}

A way to perform raw data export of IOAM data using IPFIX is discussed
in
\[[IPPM-IOAM-RAWEXPORT](#I-D.spiegel-ippm-ioam-rawexport){.xref}\].[¶](#section-6-2){.pilcrow}
:::
:::

::: {#IANA}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA has defined a registry group named \"In Situ OAM
(IOAM)\".[¶](#section-7-1){.pilcrow}

This group includes the following registries:[¶](#section-7-2){.pilcrow}

-   [IOAM Option-Type[¶](#section-7-3.1){.pilcrow}]{#section-7-3.1}
-   [IOAM Trace-Type[¶](#section-7-3.2){.pilcrow}]{#section-7-3.2}
-   [IOAM Trace-Flags[¶](#section-7-3.3){.pilcrow}]{#section-7-3.3}
-   [IOAM POT-Type[¶](#section-7-3.4){.pilcrow}]{#section-7-3.4}
-   [IOAM POT-Flags[¶](#section-7-3.5){.pilcrow}]{#section-7-3.5}
-   [IOAM E2E-Type[¶](#section-7-3.6){.pilcrow}]{#section-7-3.6}
-   [IOAM Namespace-ID[¶](#section-7-3.7){.pilcrow}]{#section-7-3.7}

The subsequent subsections detail the registries therein
contained.[¶](#section-7-4){.pilcrow}

::: {#IOAM-type-registry}
::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [IOAM Option-Type Registry](#name-ioam-option-type-registry){.section-name .selfRef} {#name-ioam-option-type-registry}

This registry defines 128 code points for the IOAM Option-Type field for
identifying IOAM-Option-Types, as explained in [Section
4](#IOAM_option_format){.xref}. The following code points are defined in
this document:[¶](#section-7.1-1){.pilcrow}

[]{.break}

0:
:   IOAM Pre-allocated Trace Option-Type[¶](#section-7.1-2.2){.pilcrow}
:   

1:
:   IOAM Incremental Trace Option-Type[¶](#section-7.1-2.4){.pilcrow}
:   

2:
:   IOAM POT Option-Type[¶](#section-7.1-2.6){.pilcrow}
:   

3:
:   IOAM E2E Option-Type[¶](#section-7.1-2.8){.pilcrow}
:   

Code points 4-127 are available for assignment via the \"IETF Review\"
process, as per
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.1-3){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.1-4){.pilcrow}

[]{.break}

Name:
:   name of the newly registered
    Option-Type[¶](#section-7.1-5.2){.pilcrow}
:   

Code point:
:   desired value of the requested code
    point[¶](#section-7.1-5.4){.pilcrow}
:   

Description:
:   brief description of the newly registered
    Option-Type[¶](#section-7.1-5.6){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    Option-Type[¶](#section-7.1-5.8){.pilcrow}
:   

The evaluation of a new registration request [MUST]{.bcp14} also include
checking whether the new IOAM-Option-Type includes an IOAM-Namespace
field and that the IOAM-Namespace field is the first field in the newly
defined header of the new Option-Type.[¶](#section-7.1-6){.pilcrow}
:::
:::

::: {#ioam-trace-type-registry}
::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [IOAM Trace-Type Registry](#name-ioam-trace-type-registry){.section-name .selfRef} {#name-ioam-trace-type-registry}

This registry defines code points for each bit in the 24-bit IOAM
Trace-Type field for the Pre-allocated Trace Option-Type and Incremental
Trace Option-Type defined in [Section 4.4](#IOAM_tracing_option){.xref}.
Bits 0-11 are defined in this document in [Paragraph
5](#IOAMTraceType){.xref} of [Section
4.4.1](#TraceOptionDef){.xref}:[¶](#section-7.2-1){.pilcrow}

[]{.break}

Bit 0:
:   hop_Lim and node_id in short format[¶](#section-7.2-2.2){.pilcrow}
:   

Bit 1:
:   ingress_if_id and egress_if_id in short
    format[¶](#section-7.2-2.4){.pilcrow}
:   

Bit 2:
:   timestamp seconds[¶](#section-7.2-2.6){.pilcrow}
:   

Bit 3:
:   timestamp fraction[¶](#section-7.2-2.8){.pilcrow}
:   

Bit 4:
:   transit delay[¶](#section-7.2-2.10){.pilcrow}
:   

Bit 5:
:   namespace-specific data in short
    format[¶](#section-7.2-2.12){.pilcrow}
:   

Bit 6:
:   queue depth[¶](#section-7.2-2.14){.pilcrow}
:   

Bit 7:
:   checksum complement[¶](#section-7.2-2.16){.pilcrow}
:   

Bit 8:
:   hop_Lim and node_id in wide format[¶](#section-7.2-2.18){.pilcrow}
:   

Bit 9:
:   ingress_if_id and egress_if_id in wide
    format[¶](#section-7.2-2.20){.pilcrow}
:   

Bit 10:
:   namespace-specific data in wide
    format[¶](#section-7.2-2.22){.pilcrow}
:   

Bit 11:
:   buffer occupancy[¶](#section-7.2-2.24){.pilcrow}
:   

Bit 22:
:   variable-length Opaque State
    Snapshot[¶](#section-7.2-2.26){.pilcrow}
:   

Bit 23:
:   reserved[¶](#section-7.2-2.28){.pilcrow}
:   

Bits 12-21 are available for assignment via the \"IETF Review\" process,
as per \[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.2-3){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.2-4){.pilcrow}

[]{.break}

Bit:
:   desired bit to be allocated in the 24-bit IOAM Trace Option-Type
    field for the Pre-allocated Trace Option-Type and Incremental Trace
    Option-Type[¶](#section-7.2-5.2){.pilcrow}
:   

Description:
:   brief description of the newly registered
    bit[¶](#section-7.2-5.4){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    bit[¶](#section-7.2-5.6){.pilcrow}
:   
:::
:::

::: {#Flags-Registry-Sec}
::: {#section-7.3 .section}
### [7.3.](#section-7.3){.section-number .selfRef} [IOAM Trace-Flags Registry](#name-ioam-trace-flags-registry){.section-name .selfRef} {#name-ioam-trace-flags-registry}

This registry defines code points for each bit in the 4-bit flags for
the Pre-allocated Trace-Option and Incremental Trace-Option defined in
[Section 4.4](#IOAM_tracing_option){.xref}. The meaning of Bit 0 (the
most significant bit) for trace flags is defined in this document in
[Paragraph 3](#TraceFlags){.xref} of [Section
4.4.1](#TraceOptionDef){.xref}:[¶](#section-7.3-1){.pilcrow}

[]{.break}

Bit 0:
:   \"Overflow\" (O-bit)[¶](#section-7.3-2.2){.pilcrow}
:   

Bits 1-3 are available for assignment via the \"IETF Review\" process,
as per \[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.3-3){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.3-4){.pilcrow}

[]{.break}

Bit:
:   desired bit to be allocated in the 8-bit flags field of the
    Pre-allocated Trace Option-Type and Incremental Trace
    Option-Type[¶](#section-7.3-5.2){.pilcrow}
:   

Description:
:   brief description of the newly registered
    bit[¶](#section-7.3-5.4){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    bit[¶](#section-7.3-5.6){.pilcrow}
:   
:::
:::

::: {#section-7.4 .section}
### [7.4.](#section-7.4){.section-number .selfRef} [IOAM POT-Type Registry](#name-ioam-pot-type-registry){.section-name .selfRef} {#name-ioam-pot-type-registry}

This registry defines 256 code points to define the IOAM POT-Type for
the IOAM Proof of Transit Option ([Section
4.5](#IOAM_proof_of_transit_option){.xref}). The code point value 0 is
defined in this document:[¶](#section-7.4-1){.pilcrow}

[]{.break}

0:
:   16-Octet POT data[¶](#section-7.4-2.2){.pilcrow}
:   

Code points 1-255 are available for assignment via the \"IETF Review\"
process, as per
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.4-3){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.4-4){.pilcrow}

[]{.break}

Name:
:   name of the newly registered POT-Type[¶](#section-7.4-5.2){.pilcrow}
:   

Code point:
:   desired value of the requested code
    point[¶](#section-7.4-5.4){.pilcrow}
:   

Description:
:   brief description of the newly registered
    POT-Type[¶](#section-7.4-5.6){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    POT-Type[¶](#section-7.4-5.8){.pilcrow}
:   
:::

::: {#pot-flags-sec}
::: {#section-7.5 .section}
### [7.5.](#section-7.5){.section-number .selfRef} [IOAM POT-Flags Registry](#name-ioam-pot-flags-registry){.section-name .selfRef} {#name-ioam-pot-flags-registry}

This registry defines code points for each bit in the 8-bit flags for
the IOAM POT Option-Type defined in [Section
4.5](#IOAM_proof_of_transit_option){.xref}.[¶](#section-7.5-1){.pilcrow}

Bits 0-7 are available for assignment via the \"IETF Review\" process,
as per \[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.5-2){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.5-3){.pilcrow}

[]{.break}

Bit:
:   desired bit to be allocated in the 8-bit flags field of the IOAM POT
    Option-Type[¶](#section-7.5-4.2){.pilcrow}
:   

Description:
:   brief description of the newly registered
    bit[¶](#section-7.5-4.4){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    bit[¶](#section-7.5-4.6){.pilcrow}
:   
:::
:::

::: {#section-7.6 .section}
### [7.6.](#section-7.6){.section-number .selfRef} [IOAM E2E-Type Registry](#name-ioam-e2e-type-registry){.section-name .selfRef} {#name-ioam-e2e-type-registry}

This registry defines code points for each bit in the 16-bit IOAM
E2E-Type field for the IOAM E2E Option ([Section
4.6](#IOAM_edge_to_edge_opt){.xref}). Bits 0-3 are defined in this
document:[¶](#section-7.6-1){.pilcrow}

[]{.break}

Bit 0:
:   64-bit sequence number[¶](#section-7.6-2.2){.pilcrow}
:   

Bit 1:
:   32-bit sequence number[¶](#section-7.6-2.4){.pilcrow}
:   

Bit 2:
:   timestamp seconds[¶](#section-7.6-2.6){.pilcrow}
:   

Bit 3:
:   timestamp fraction[¶](#section-7.6-2.8){.pilcrow}
:   

Bits 4-15 are available for assignment via the \"IETF Review\" process,
as per \[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.6-3){.pilcrow}

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.6-4){.pilcrow}

[]{.break}

Bit:
:   desired bit to be allocated in the 16-bit IOAM E2E-Type
    field[¶](#section-7.6-5.2){.pilcrow}
:   

Description:
:   brief description of the newly registered
    bit[¶](#section-7.6-5.4){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    bit[¶](#section-7.6-5.6){.pilcrow}
:   
:::

::: {#section-7.7 .section}
### [7.7.](#section-7.7){.section-number .selfRef} [IOAM Namespace-ID Registry](#name-ioam-namespace-id-registry){.section-name .selfRef} {#name-ioam-namespace-id-registry}

IANA has set up the \"IOAM Namespace-ID\" registry that contains 16-bit
values and follows the template for requests shown below. The meaning of
0x0000 is defined in this document. IANA has reserved the values 0x0001
to 0x7FFF for private use (managed by operators), as specified in
[Section 4.3](#ioam_namespaces){.xref} of this document. Registry
entries for the values 0x8000 to 0xFFFF are to be assigned via the
\"Expert Review\" policy, as per
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-7.7-1){.pilcrow}

Upon receiving a new allocation request, a designated expert will
perform the following:[¶](#section-7.7-2){.pilcrow}

-   [Review whether the request is complete, i.e., the registration
    template has been filled in. The expert will send incomplete
    requests back to the
    requester.[¶](#section-7.7-3.1){.pilcrow}]{#section-7.7-3.1}
-   [Check whether the request is neither a duplicate of nor conflicting
    with either an already existing allocation or a pending allocation.
    In case of duplicates or conflicts, the expert will ask the
    requester to update the allocation request
    accordingly.[¶](#section-7.7-3.2){.pilcrow}]{#section-7.7-3.2}
-   [Solicit feedback from relevant working groups and communities to
    ensure that the new allocation request has been properly reviewed
    and that rough consensus on the request exists. At a minimum, the
    expert will solicit feedback from the IPPM Working Group by posting
    the request to the ippm\@ietf.org mailing list. The expert will
    allow for a 3-week review period on the mailing lists. If the
    feedback received from the relevant working groups and communities
    within the review period indicates rough consensus on the request,
    the expert will approve the request and ask IANA to allocate the new
    Namespace-ID. In case the expert senses a lack of consensus from the
    feedback received, the expert will ask the requester to engage with
    the corresponding working groups and communities to further review
    and refine the
    request.[¶](#section-7.7-3.3){.pilcrow}]{#section-7.7-3.3}

It is intended that any allocation will be accompanied by a published
RFC. In order to allow for the allocation of code points prior to the
RFC being approved for publication, the designated expert can approve
allocations once it seems clear that an RFC will be
published.[¶](#section-7.7-4){.pilcrow}

[]{.break}

0x0000:
:   default namespace (known to all IOAM
    nodes)[¶](#section-7.7-5.2){.pilcrow}
:   

0x0001 - 0x7FFF:
:   reserved for private use[¶](#section-7.7-5.4){.pilcrow}
:   

0x8000 - 0xFFFF:
:   unassigned[¶](#section-7.7-5.6){.pilcrow}
:   

New registration requests [MUST]{.bcp14} use the following
template:[¶](#section-7.7-6){.pilcrow}

[]{.break}

Name:
:   name of the newly registered
    Namespace-ID[¶](#section-7.7-7.2){.pilcrow}
:   

Code point:
:   desired value of the requested
    Namespace-ID[¶](#section-7.7-7.4){.pilcrow}
:   

Description:
:   brief description of the newly registered
    Namespace-ID[¶](#section-7.7-7.6){.pilcrow}
:   

Reference:
:   reference to the document that defines the new
    Namespace-ID[¶](#section-7.7-7.8){.pilcrow}
:   

Status of the registration:
:   Status can be either \"permanent\" or \"provisional\". Namespace-ID
    registrations following a successful expert review will have the
    status \"provisional\". Once the RFC that defines the new
    Namespace-ID is published, the status is changed to
    \"permanent\".[¶](#section-7.7-7.10){.pilcrow}
:   
:::
:::
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Management and Deployment Considerations](#name-management-and-deployment-c){.section-name .selfRef} {#name-management-and-deployment-c}

This document defines the structure and use of IOAM-Data-Fields. This
document does not define the encapsulation of IOAM-Data-Fields into
different protocols. Management and deployment aspects for IOAM have to
be considered within the context of the protocol IOAM-Data-Fields are
encapsulated into and, as such, are out of scope for this document. For
a discussion of IOAM deployment, please also refer to
\[[IPPM-IOAM-DEPLOYMENT](#I-D.ietf-ippm-ioam-deployment){.xref}\], which
outlines a framework for IOAM deployment and provides best current
practices.[¶](#section-8-1){.pilcrow}
:::

::: {#Security}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

As discussed in \[[RFC7276](#RFC7276){.xref}\], a successful attack on
an OAM protocol in general, and specifically on IOAM, can prevent the
detection of failures or anomalies or create a false illusion of
nonexistent ones. In particular, these threats are applicable by
compromising the integrity of IOAM data, either by maliciously modifying
IOAM options in transit or by injecting packets with maliciously
generated IOAM options. All nodes in the path of an IOAM-carrying packet
can perform such an attack.[¶](#section-9-1){.pilcrow}

The Proof of Transit Option-Type (see [Section
4.5](#IOAM_proof_of_transit_option){.xref}) is used for verifying the
path of data packets, i.e., proving that packets transited through a
defined set of nodes.[¶](#section-9-2){.pilcrow}

In case an attacker gains access to several nodes in a network and would
be able to change the system software of these nodes, IOAM-Data-Fields
could be misused and repurposed for a use different from what is
specified in this document. One type of misuse is the implementation of
a covert channel between network nodes.[¶](#section-9-3){.pilcrow}

From a confidentiality perspective, although IOAM options are not
expected to contain user data, they can be used for network
reconnaissance, allowing attackers to collect information about network
paths, performance, queue states, buffer occupancy, etc. Moreover, if
IOAM data leaks from the IOAM-Domain, it could enable reconnaissance
beyond the scope of the IOAM-Domain. One possible application of such
reconnaissance is to gauge the effectiveness of an ongoing attack, e.g.,
if buffers and queues are overflowing.[¶](#section-9-4){.pilcrow}

IOAM can be used as a means for implementing Denial-of-Service (DoS)
attacks or for amplifying them. For example, a malicious attacker can
add an IOAM header to packets in order to consume the resources of
network devices that take part in IOAM or entities that receive,
collect, or analyze the IOAM data. Another example is a packet length
attack in which an attacker pushes headers associated with
IOAM-Option-Types into data packets, causing these packets to be
increased beyond the MTU size, resulting in fragmentation or in packet
drops. In case POT is used, an attacker could corrupt the POT data
fields in the packet, resulting in a verification failure of the POT
data, even if the packet followed the correct
path.[¶](#section-9-5){.pilcrow}

Since IOAM options can include timestamps, if network devices use
synchronization protocols, then any attack on the time protocol
\[[RFC7384](#RFC7384){.xref}\] can compromise the integrity of the
timestamp-related data fields.[¶](#section-9-6){.pilcrow}

At the management plane, attacks can be set up by misconfiguring or by
maliciously configuring IOAM-enabled nodes in a way that enables other
attacks. IOAM configuration should only be managed by authorized
processes or users.[¶](#section-9-7){.pilcrow}

IETF protocols require features to ensure their security. While
IOAM-Data-Fields don\'t represent a protocol by themselves, the
IOAM-Data-Fields add to the protocol that the IOAM-Data-Fields are
encapsulated into. Any specification that defines how IOAM-Data-Fields
carried in an encapsulating protocol [MUST]{.bcp14} provide for a
mechanism for cryptographic integrity protection of the
IOAM-Data-Fields. Cryptographic integrity protection could be achieved
through a mechanism of the encapsulating protocol, or it could
incorporate the mechanisms specified in
\[[IPPM-IOAM-DATA-INTEGRITY](#I-D.ietf-ippm-ioam-data-integrity){.xref}\].[¶](#section-9-8){.pilcrow}

The current document does not define a specific IOAM encapsulation. It
has to be noted that some IOAM encapsulation types can introduce
specific security considerations. A specification that defines an IOAM
encapsulation is expected to address the respective
encapsulation-specific security
considerations.[¶](#section-9-9){.pilcrow}

Notably, IOAM is expected to be deployed in limited domains, thus
confining the potential attack vectors to within the limited domain. A
limited administrative domain provides the operator with the means to
select, monitor, and control the access of all the network devices,
making these devices trusted by the operator. Indeed, in order to limit
the scope of threats mentioned above to within the current limited
domain, the network operator is expected to enforce policies that
prevent IOAM traffic from leaking outside of the IOAM-Domain and prevent
IOAM data from outside the domain to be processed and used within the
domain.[¶](#section-9-10){.pilcrow}

This document does not define the data contents of custom fields, like
\"Opaque State Snapshot\" and \"namespace-specific data\"
IOAM-Data-Fields. These custom data fields will have security
considerations corresponding to their defined data contents that need to
be described where those formats are
defined.[¶](#section-9-11){.pilcrow}

IOAM deployments that leverage both IOAM Trace Option-Types, i.e., the
Pre-allocated Trace Option-Type and Incremental Trace Option-Type, can
suffer from incomplete visibility if the information gathered via the
two Trace Option-Types is not correlated and aggregated appropriately.
If IOAM transit nodes leverage the IOAM-Data-Fields in the packet for
further actions or insights, then IOAM transit nodes that only support
one IOAM Trace Option-Type in an IOAM deployment that leverages both
Trace Option-Types have limited visibility and thus can draw
inappropriate conclusions or take wrong
actions.[¶](#section-9-12){.pilcrow}

The security considerations of a system that deploys IOAM, much like any
system, has to be reviewed on a per-deployment-scenario basis based on a
systems-specific threat analysis, which can lead to specific security
solutions that are beyond the scope of the current document.
Specifically, in an IOAM deployment that is not confined to a single LAN
but spans multiple inter-connected sites (for example, using an overlay
network), the inter-site links can be secured (e.g., by IPsec) in order
to avoid external threats.[¶](#section-9-13){.pilcrow}

IOAM deployment considerations, including approaches to mitigate the
above discussed threads and potential attacks, are outside the scope of
this document. IOAM deployment considerations are discussed in
\[[IPPM-IOAM-DEPLOYMENT](#I-D.ietf-ippm-ioam-deployment){.xref}\].[¶](#section-9-14){.pilcrow}
:::
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[POSIX\]
:   [IEEE]{.refAuthor}, [\"IEEE/Open Group 1003.1-2017 - IEEE Standard
    for Information Technology\--Portable Operating System Interface
    (POSIX(TM)) Base Specifications, Issue 7\"]{.refTitle}, [IEEE Std
    1003.1-2017]{.seriesInfo}, January 2018,
    \<<https://standards.ieee.org/ieee/1003.1/7101/>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC5905\]
:   [Mills, D.]{.refAuthor}, [Martin, J., Ed.]{.refAuthor},
    [Burbank, J.]{.refAuthor}, and [W. Kasch]{.refAuthor}, [\"Network
    Time Protocol Version 4: Protocol and Algorithms
    Specification\"]{.refTitle}, [RFC 5905]{.seriesInfo}, [DOI
    10.17487/RFC5905]{.seriesInfo}, June 2010,
    \<<https://www.rfc-editor.org/info/rfc5905>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[IPPM-IOAM-DATA-INTEGRITY\]
:   [Brockners, F.]{.refAuthor}, [Bhandari, S.]{.refAuthor},
    [Mizrahi, T.]{.refAuthor}, and [J. Iurman]{.refAuthor}, [\"Integrity
    of In-situ OAM Data Fields\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-ietf-ippm-ioam-data-integrity-01]{.seriesInfo}, 2 March 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-ippm-ioam-data-integrity-01>\>.
:   

\[IPPM-IOAM-DEPLOYMENT\]
:   [Brockners, F.]{.refAuthor}, [Bhandari, S.]{.refAuthor},
    [Bernier, D.]{.refAuthor}, and [T. Mizrahi]{.refAuthor}, [\"In-situ
    OAM Deployment\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-ietf-ippm-ioam-deployment-01]{.seriesInfo},
    11 April 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-ippm-ioam-deployment-01>\>.
:   

\[IPPM-IOAM-RAWEXPORT\]
:   [Spiegel, M.]{.refAuthor}, [Brockners, F.]{.refAuthor},
    [Bhandari, S.]{.refAuthor}, and [R. Sivakolundu]{.refAuthor},
    [\"In-situ OAM raw data export with IPFIX\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-spiegel-ippm-ioam-rawexport-06]{.seriesInfo}, 21 February
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-spiegel-ippm-ioam-rawexport-06>\>.
:   

\[IPV6-RECORD-ROUTE\]
:   [Kitamura, H.]{.refAuthor}, [\"Record Route for IPv6 (RR6)
    Hop-by-Hop Option Extension\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-kitamura-ipv6-record-route-00]{.seriesInfo}, 17 November 2000,
    \<<https://datatracker.ietf.org/doc/html/draft-kitamura-ipv6-record-route-00>\>.
:   

\[NVO3-VXLAN-GPE\]
:   [Maino, F., Ed.]{.refAuthor}, [Kreeger, L., Ed.]{.refAuthor}, and
    [U. Elzur, Ed.]{.refAuthor}, [\"Generic Protocol Extension for VXLAN
    (VXLAN-GPE)\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-ietf-nvo3-vxlan-gpe-12]{.seriesInfo}, 22
    September 2021,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-nvo3-vxlan-gpe-12>\>.
:   

\[RFC7276\]
:   [Mizrahi, T.]{.refAuthor}, [Sprecher, N.]{.refAuthor},
    [Bellagamba, E.]{.refAuthor}, and [Y. Weingarten]{.refAuthor}, [\"An
    Overview of Operations, Administration, and Maintenance (OAM)
    Tools\"]{.refTitle}, [RFC 7276]{.seriesInfo}, [DOI
    10.17487/RFC7276]{.seriesInfo}, June 2014,
    \<<https://www.rfc-editor.org/info/rfc7276>\>.
:   

\[RFC7384\]
:   [Mizrahi, T.]{.refAuthor}, [\"Security Requirements of Time
    Protocols in Packet Switched Networks\"]{.refTitle}, [RFC
    7384]{.seriesInfo}, [DOI 10.17487/RFC7384]{.seriesInfo}, October
    2014, \<<https://www.rfc-editor.org/info/rfc7384>\>.
:   

\[RFC7665\]
:   [Halpern, J., Ed.]{.refAuthor} and [C. Pignataro, Ed.]{.refAuthor},
    [\"Service Function Chaining (SFC) Architecture\"]{.refTitle}, [RFC
    7665]{.seriesInfo}, [DOI 10.17487/RFC7665]{.seriesInfo}, October
    2015, \<<https://www.rfc-editor.org/info/rfc7665>\>.
:   

\[RFC7799\]
:   [Morton, A.]{.refAuthor}, [\"Active and Passive Metrics and Methods
    (with Hybrid Types In-Between)\"]{.refTitle}, [RFC
    7799]{.seriesInfo}, [DOI 10.17487/RFC7799]{.seriesInfo}, May 2016,
    \<<https://www.rfc-editor.org/info/rfc7799>\>.
:   

\[RFC7820\]
:   [Mizrahi, T.]{.refAuthor}, [\"UDP Checksum Complement in the One-Way
    Active Measurement Protocol (OWAMP) and Two-Way Active Measurement
    Protocol (TWAMP)\"]{.refTitle}, [RFC 7820]{.seriesInfo}, [DOI
    10.17487/RFC7820]{.seriesInfo}, March 2016,
    \<<https://www.rfc-editor.org/info/rfc7820>\>.
:   

\[RFC7821\]
:   [Mizrahi, T.]{.refAuthor}, [\"UDP Checksum Complement in the Network
    Time Protocol (NTP)\"]{.refTitle}, [RFC 7821]{.seriesInfo}, [DOI
    10.17487/RFC7821]{.seriesInfo}, March 2016,
    \<<https://www.rfc-editor.org/info/rfc7821>\>.
:   

\[RFC8300\]
:   [Quinn, P., Ed.]{.refAuthor}, [Elzur, U., Ed.]{.refAuthor}, and [C.
    Pignataro, Ed.]{.refAuthor}, [\"Network Service Header
    (NSH)\"]{.refTitle}, [RFC 8300]{.seriesInfo}, [DOI
    10.17487/RFC8300]{.seriesInfo}, January 2018,
    \<<https://www.rfc-editor.org/info/rfc8300>\>.
:   

\[RFC8799\]
:   [Carpenter, B.]{.refAuthor} and [B. Liu]{.refAuthor}, [\"Limited
    Domains and Internet Protocols\"]{.refTitle}, [RFC
    8799]{.seriesInfo}, [DOI 10.17487/RFC8799]{.seriesInfo}, July 2020,
    \<<https://www.rfc-editor.org/info/rfc8799>\>.
:   

\[RFC8877\]
:   [Mizrahi, T.]{.refAuthor}, [Fabini, J.]{.refAuthor}, and [A.
    Morton]{.refAuthor}, [\"Guidelines for Defining Packet
    Timestamps\"]{.refTitle}, [RFC 8877]{.seriesInfo}, [DOI
    10.17487/RFC8877]{.seriesInfo}, September 2020,
    \<<https://www.rfc-editor.org/info/rfc8877>\>.
:   

\[RFC8926\]
:   [Gross, J., Ed.]{.refAuthor}, [Ganga, I., Ed.]{.refAuthor}, and [T.
    Sridhar, Ed.]{.refAuthor}, [\"Geneve: Generic Network Virtualization
    Encapsulation\"]{.refTitle}, [RFC 8926]{.seriesInfo}, [DOI
    10.17487/RFC8926]{.seriesInfo}, November 2020,
    \<<https://www.rfc-editor.org/info/rfc8926>\>.
:   
:::
:::

::: {#appendix-A .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors would like to thank [Éric Vyncke]{.contact-name}, [Nalini
Elkins]{.contact-name}, [Srihari Raghavan]{.contact-name}, [Ranganathan
T S]{.contact-name}, [Karthik Babu Harichandra Babu]{.contact-name},
[Akshaya Nadahalli]{.contact-name}, [LJ Wobker]{.contact-name}, [Erik
Nordmark]{.contact-name}, [Vengada Prasad Govindan]{.contact-name},
[Andrew Yourtchenko]{.contact-name}, [Aviv Kfir]{.contact-name},
[Tianran Zhou]{.contact-name}, [Zhenbin (Robin)]{.contact-name}, and
[Greg Mirsky]{.contact-name} for the comments and
advice.[¶](#appendix-A-1){.pilcrow}

This document leverages and builds on top of several concepts described
in \[[IPV6-RECORD-ROUTE](#I-D.kitamura-ipv6-record-route){.xref}\]. The
authors would like to acknowledge the work done by the author [Hiroshi
Kitamura]{.contact-name} and people involved in writing
it.[¶](#appendix-A-2){.pilcrow}

The authors would like to gracefully acknowledge useful review and
insightful comments received from [Joe Clarke]{.contact-name}, [Al
Morton]{.contact-name}, [Tom Herbert]{.contact-name}, [Carlos J.
Bernardos]{.contact-name}, [Haoyu Song]{.contact-name}, [Mickey
Spiegel]{.contact-name}, [Roman Danyliw]{.contact-name}, [Benjamin
Kaduk]{.contact-name}, [Murray S. Kucherawy]{.contact-name}, [Ian
Swett]{.contact-name}, [Martin Duke]{.contact-name}, [Francesca
Palombini]{.contact-name}, [Lars Eggert]{.contact-name}, [Alvaro
Retana]{.contact-name}, [Erik Kline]{.contact-name}, [Robert
Wilton]{.contact-name}, [Zaheduzzaman Sarker]{.contact-name}, [Dan
Romascanu]{.contact-name}, and [Barak
Gafni]{.contact-name}.[¶](#appendix-A-3){.pilcrow}
:::

::: {#appendix-B .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

This document was the collective effort of several authors. The text and
content were contributed by the editors and the coauthors listed
below.[¶](#appendix-B-1){.pilcrow}

::: {.left dir="auto"}
[Carlos Pignataro]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Research Triangle Park]{.extended-address}
:::

::: {.left dir="auto"}
[7200-11 Kit Creek Road]{.street-address}
:::

::: {.left dir="auto"}
[NC]{.region} [27709]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <cpignata@cisco.com>
:::

::: {.left dir="auto"}
[Mickey Spiegel]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Barefoot Networks, an Intel company]{.org}
:::

::: {.left dir="auto"}
[101 Innovation Drive]{.street-address}
:::

::: {.left dir="auto"}
[San Jose]{.locality}, [CA]{.region} [95134-1941]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <mickey.spiegel@intel.com>
:::

::: {.left dir="auto"}
[Barak Gafni]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nvidia]{.org}
:::

::: {.left dir="auto"}
[Suite 100]{.extended-address}
:::

::: {.left dir="auto"}
[350 Oakmead Parkway]{.street-address}
:::

::: {.left dir="auto"}
[Sunnyvale]{.locality}, [CA]{.region} [94085]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <gbarak@nvidia.com>
:::

::: {.left dir="auto"}
[Jennifer Lemon]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Broadcom]{.org}
:::

::: {.left dir="auto"}
[270 Innovation Drive]{.street-address}
:::

::: {.left dir="auto"}
[San Jose]{.locality}, [CA]{.region} [95134]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <jennifer.lemon@broadcom.com>
:::

::: {.left dir="auto"}
[Hannes Gredler]{.fn .nameRole}
:::

::: {.left dir="auto"}
[RtBrick Inc.]{.org}
:::

::: email
Email: <hannes@rtbrick.com>
:::

::: {.left dir="auto"}
[John Leddy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <john@leddy.net>
:::

::: {.left dir="auto"}
[Stephen Youell]{.fn .nameRole}
:::

::: {.left dir="auto"}
[JP Morgan Chase]{.org}
:::

::: {.left dir="auto"}
[25 Bank Street]{.street-address}
:::

::: {.left dir="auto"}
[London]{.locality}
:::

::: {.left dir="auto"}
[E14 5JP]{.postal-code}
:::

::: {.left dir="auto"}
[United Kingdom]{.country-name}
:::

::: email
Email: <stephen.youell@jpmorgan.com>
:::

::: {.left dir="auto"}
[David Mozes]{.fn .nameRole}
:::

::: email
Email: <mosesster@gmail.com>
:::

::: {.left dir="auto"}
[Petr Lapukhov]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Facebook]{.org}
:::

::: {.left dir="auto"}
[1 Hacker Way]{.street-address}
:::

::: {.left dir="auto"}
[Menlo Park]{.locality}, [CA]{.region} [94025]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <petr@fb.com>
:::

::: {.left dir="auto"}
[Remy Chang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Barefoot Networks, an Intel company]{.org}
:::

::: {.left dir="auto"}
[101 Innovation Drive]{.street-address}
:::

::: {.left dir="auto"}
[San Jose]{.locality}, [CA]{.region} [95134-1941]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <remy.chang@intel.com>
:::

::: {.left dir="auto"}
[Daniel Bernier]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <daniel.bernier@bell.ca>
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Frank Brockners ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[3rd Floor\
Nordhein-Westfalen]{.extended-address}
:::

::: {.left dir="auto"}
[Hansaallee 249]{.street-address}
:::

::: {.left dir="auto"}
[40549]{.postal-code} [Duesseldorf]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: email
Email: <fbrockne@cisco.com>
:::

::: {.left dir="auto"}
[Shwetha Bhandari ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Thoughtspot]{.org}
:::

::: {.left dir="auto"}
[3rd Floor\
Indiqube Orion\
Garden Layout\
HSR Layout]{.extended-address}
:::

::: {.left dir="auto"}
[24th Main Rd]{.street-address}
:::

::: {.left dir="auto"}
[Bangalore]{.locality} [560 102]{.postal-code}
:::

::: {.left dir="auto"}
[Karnataka]{.region}
:::

::: {.left dir="auto"}
[India]{.country-name}
:::

::: email
Email: <shwetha.bhandari@thoughtspot.com>
:::

::: {.left dir="auto"}
[Tal Mizrahi ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei]{.org}
:::

::: {.left dir="auto"}
[8-2 Matam]{.street-address}
:::

::: {.left dir="auto"}
[Haifa]{.locality} [3190501]{.postal-code}
:::

::: {.left dir="auto"}
[Israel]{.country-name}
:::

::: email
Email: <tal.mizrahi.phd@gmail.com>
:::
:::
:::
