  RFC 9239         Updates to ECMAScript Media Types   May 2022
  ---------------- ----------------------------------- ----------
  Miller, et al.   Informational                       \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9239](https://www.rfc-editor.org/rfc/rfc9239){.eref}

Obsoletes:
:   [4329](https://www.rfc-editor.org/rfc/rfc4329){.eref}

Category:
:   Informational

Published:
:   May 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    M. Miller
    :::
    :::

    ::: author
    ::: author-name
    M. Borins
    :::

    ::: org
    GitHub
    :::
    :::

    ::: author
    ::: author-name
    M. Bynens
    :::

    ::: org
    Google
    :::
    :::

    ::: author
    ::: author-name
    B. Farias
    :::
    :::
:::

# RFC 9239 {#rfcnum}

# Updates to ECMAScript Media Types {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document describes the registration of media types for the
ECMAScript and JavaScript programming languages and conformance
requirements for implementations of these types. This document obsoletes
RFC 4329 (\"Scripting Media Types)\", replacing the previous
registrations with information and requirements aligned with common
usage and implementation experiences.[¶](#section-abstract-1){.pilcrow}
:::

::: {#section-note.1 .section .note}
## [IESG Note](#name-iesg-note){.section-name .selfRef} {#name-iesg-note}

This document records the relationship between the work of Ecma
International\'s Technical Committee 39 and the media types used to
identify relevant payloads.[¶](#section-note.1-1){.pilcrow}

That relationship was developed outside of the IETF and as a result is
unfortunately not aligned with the best practices of BCP 13.
Consequently, consensus exists in the IETF to document the relationship
and update the relevant IANA registrations for those media types, but
this is not an IETF endorsement of the media types chosen for this
work.[¶](#section-note.1-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for informational
purposes.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Not all documents approved
by the IESG are candidates for any level of Internet Standard; see
Section 2 of RFC 7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9239>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Terminology](#name-terminology){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Compatibility](#name-compatibility){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Modules](#name-modules){.xref}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Encoding](#name-encoding){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Charset
        Parameter](#name-charset-parameter){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Character Encoding Scheme
        Detection](#name-character-encoding-scheme-d){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Character Encoding Scheme Error
        Handling](#name-character-encoding-scheme-e){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Common JavaScript Media
        Types](#name-common-javascript-media-typ){.xref}

        -   ::: {#section-toc.1-1.6.2.1.2.1}
            [6.1.1](#section-6.1.1){.xref}.  [text/javascript](#name-text-javascript){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Historic JavaScript Media
        Types](#name-historic-javascript-media-t){.xref}

        -   ::: {#section-toc.1-1.6.2.2.2.1}
            [6.2.1](#section-6.2.1){.xref}.  [text/ecmascript](#name-text-ecmascript){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [Appendix A](#appendix-A){.xref}.  [Changes from RFC
    4329](#name-changes-from-rfc-4329){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [](#appendix-B){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.10}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

This memo describes media types for the JavaScript and ECMAScript
programming languages. Refer to the sections \"Introduction\" and
\"Overview\" in \[[ECMA-262](#ECMA-262){.xref}\] for background
information on these languages. This document updates the descriptions
and registrations for these media types to reflect existing usage on the
Internet, and it provides up-to-date security
considerations.[¶](#section-1-1){.pilcrow}

This document replaces the media type registrations in
\[[RFC4329](#RFC4329){.xref}\] and updates the requirements for
implementations using those media types defined in
\[[RFC4329](#RFC4329){.xref}\] based on current existing practices. As a
consequence, this document obsoletes
\[[RFC4329](#RFC4329){.xref}\].[¶](#section-1-2){.pilcrow}

::: {#terminology}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.1-1){.pilcrow}
:::
:::
:::
:::

::: {#compatibility}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Compatibility](#name-compatibility){.section-name .selfRef} {#name-compatibility}

This document defines equivalent processing requirements for the various
script media types. The most widely supported media type in use is
text/javascript; all others are considered historical and obsolete
aliases of text/javascript.[¶](#section-2-1){.pilcrow}

The types defined in this document are applicable to scripts written in
\[[ECMA-262](#ECMA-262){.xref}\]. New editions of
\[[ECMA-262](#ECMA-262){.xref}\] are subjected to strong obligations of
backward compatibility, imposed by the standardization process of Ecma
International\'s Technical Committee 39 (TC39). As a result, JavaScript
code based on an earlier edition is generally compatible with a
JavaScript engine adhering to a later edition. The few exceptions to
this are documented in \[[ECMA-262](#ECMA-262){.xref}\] in the section
\"Additions and Changes That Introduce Incompatibilities with Prior
Editions\". JavaScript developers commonly use feature detection to
ensure that modern JavaScript features are only used when available in
the current environment. Later editions of
\[[ECMA-262](#ECMA-262){.xref}\] are not directly addressed in this
document, although it is expected that implementations will behave as if
applicability were extended to them. This document does not address
other extensions to \[[ECMA-262](#ECMA-262){.xref}\] or scripts written
in other languages.[¶](#section-2-2){.pilcrow}

This document may be updated to take other content into account. Updates
of this document may introduce new optional parameters; implementations
must consider the impact of such an update.[¶](#section-2-3){.pilcrow}

This document does not define how fragment identifiers in resource
identifiers \[[RFC3986](#RFC3986){.xref}\]
\[[RFC3987](#RFC3987){.xref}\] for documents labeled with one of the
media types defined in this document are resolved. An update of this
document may define processing of fragment
identifiers.[¶](#section-2-4){.pilcrow}

Note that this use of the \"text\" media type tree willfully does not
align with its original intent per \[[RFC2045](#RFC2045){.xref}\]. The
reason for this is historical. \[[RFC4329](#RFC4329){.xref}\] registered
both the text/\* and application/\* types, marking the text/\* types
obsolete. This was done to encourage people toward application/\*,
matching the guidance in \[[RFC4288](#RFC4288){.xref}\], the predecessor
to \[[RFC6838](#RFC6838){.xref}\]. Since then, however, the industry
widely adopted text/\* anyway. The definitions in this document reflect
the current state of implementation across the JavaScript ecosystem, in
web browsers and other environments such as Node.js alike, in order to
guarantee backward compatibility with existing applications as much as
possible. Future registrations should not view this as a repeatable
precedent.[¶](#section-2-5){.pilcrow}
:::
:::

::: {#modules}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Modules](#name-modules){.section-name .selfRef} {#name-modules}

In order to formalize support for modular programs,
\[[ECMA-262](#ECMA-262){.xref}\] (starting with the 6th Edition) defines
two top-level goal symbols (or roots to the abstract syntax tree) for
the ECMAScript grammar: Module and Script. The Script goal represents
the original structure where the code executes in the global scope,
while the Module goal represents the module system built into ECMAScript
starting with the 6th Edition. See the section \"ECMAScript Language:
Scripts and Modules\" in \[[ECMA-262](#ECMA-262){.xref}\] for
details.[¶](#section-3-1){.pilcrow}

This separation means that (in the absence of additional information)
there are two possible interpretations for any given ECMAScript source
text.[¶](#section-3-2){.pilcrow}

Ecma International\'s Technical Committee 39 (TC39), the standards body
in charge of ECMAScript, has determined that media types are outside of
their scope of work
\[[TC39-MIME-ISSUE](#TC39-MIME-ISSUE){.xref}\].[¶](#section-3-3){.pilcrow}

It is not possible to fully determine if a source text of ECMAScript is
meant to be parsed using the Module or Script grammar goals based upon
content or media type alone. Therefore, as permitted by the media types
in this document, scripting environments use out-of-band information in
order to determine what goal should be used. Some scripting environments
have chosen to adopt the file extension of .mjs for this
purpose.[¶](#section-3-4){.pilcrow}
:::
:::

::: {#encoding}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Encoding](#name-encoding){.section-name .selfRef} {#name-encoding}

Refer to \[[RFC6365](#RFC6365){.xref}\] for a discussion of terminology
used in this section. Source text (as defined in the section \"Source
Text\" in \[[ECMA-262](#ECMA-262){.xref}\]) can be binary source text.
Binary source text is a textual data object that represents source text
encoded using a character encoding scheme. A textual data object is a
whole text protocol message or a whole text document, or a part of it,
that is treated separately for purposes of external storage and
retrieval. An implementation\'s internal representation of source text
is not considered binary source text.[¶](#section-4-1){.pilcrow}

Implementations need to determine a character encoding scheme in order
to decode binary source text to source text. The media types defined in
this document allow an optional charset parameter to explicitly specify
the character encoding scheme used to encode the source
text.[¶](#section-4-2){.pilcrow}

In order to ensure interoperability and align with widespread
implementation practices, the charset parameter is optional rather than
required, despite the recommendation in [BCP 13](#RFC6838){.xref}
\[[RFC6838](#RFC6838){.xref}\] for text/\*
types.[¶](#section-4-3){.pilcrow}

How implementations determine the character encoding scheme can be
subject to processing rules that are out of the scope of this document.
For example, transport protocols can require that a specific character
encoding scheme is to be assumed if the optional charset parameter is
not specified, or they can require that the charset parameter is used in
certain cases. Such requirements are not defined by this
document.[¶](#section-4-4){.pilcrow}

Implementations that support binary source text [MUST]{.bcp14} support
binary source text encoded using the UTF-8
\[[RFC3629](#RFC3629){.xref}\] character encoding scheme. Module goal
sources [MUST]{.bcp14} be encoded as UTF-8; all other encodings will
fail. Source goal sources [SHOULD]{.bcp14} be encoded as UTF-8; other
character encoding schemes [MAY]{.bcp14} be supported but are
discouraged. Whether U+FEFF is processed as a Byte Order Mark (BOM)
signature or not depends on the host environment and is not defined by
this document.[¶](#section-4-5){.pilcrow}

::: {#charset-parameter}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Charset Parameter](#name-charset-parameter){.section-name .selfRef} {#name-charset-parameter}

The charset parameter provides a means to specify the character encoding
scheme of binary source text. If present, the value of the charset
parameter [MUST]{.bcp14} be a registered charset
\[[CHARSETS](#CHARSETS){.xref}\] and is considered valid if it matches
the mime-charset production defined in [Section
2.3](https://www.rfc-editor.org/rfc/rfc2978#section-2.3){.relref} of
\[[RFC2978](#RFC2978){.xref}\].[¶](#section-4.1-1){.pilcrow}

The charset parameter is only used when processing a Script goal source;
Module goal sources [MUST]{.bcp14} always be processed as
UTF-8.[¶](#section-4.1-2){.pilcrow}
:::
:::

::: {#character-encoding-scheme-detection}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Character Encoding Scheme Detection](#name-character-encoding-scheme-d){.section-name .selfRef} {#name-character-encoding-scheme-d}

It is possible that implementations cannot interoperably determine a
single character encoding scheme simply by complying with all
requirements of the applicable specifications. To foster
interoperability in such cases, the following algorithm is defined.
Implementations apply this algorithm until a single character encoding
scheme is determined.[¶](#section-4.2-1){.pilcrow}

1.  ::: {#section-4.2-2.1}
    If the binary source text is not already determined to be using a
    Module goal and starts with a Unicode encoding form signature, the
    signature determines the encoding. The following octet sequences, at
    the very beginning of the binary source text, are considered with
    their corresponding character encoding
    schemes:[¶](#section-4.2-2.1.1){.pilcrow}

    ::: {#tab}
      Leading sequence   Encoding
      ------------------ ----------
      EF BB BF           UTF-8
      FF FE              UTF-16LE
      FE FF              UTF-16BE

      : [Table 1](#table-1){.selfRef}
    :::

    Implementations of this step [MUST]{.bcp14} use these octet
    sequences to determine the character encoding scheme, even if the
    determined scheme is not supported. If this step determines the
    character encoding scheme, the octet sequence representing the
    Unicode encoding form signature [MUST]{.bcp14} be ignored when
    decoding the binary source text.[¶](#section-4.2-2.1.3){.pilcrow}
    :::

2.  [Else, if a charset parameter is specified and its value is valid
    and supported by the implementation, the value determines the
    character encoding
    scheme.[¶](#section-4.2-2.2){.pilcrow}]{#section-4.2-2.2}

3.  [Else, the character encoding scheme is assumed to be
    UTF-8.[¶](#section-4.2-2.3){.pilcrow}]{#section-4.2-2.3}

If the character encoding scheme is determined to be UTF-8 through any
means other than step 1 as defined above and the binary source text
starts with the octet sequence EF BB BF, the octet sequence is ignored
when decoding the binary source text.[¶](#section-4.2-3){.pilcrow}
:::
:::

::: {#character-encoding-scheme-error-handling}
::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Character Encoding Scheme Error Handling](#name-character-encoding-scheme-e){.section-name .selfRef} {#name-character-encoding-scheme-e}

Binary source text that is not properly encoded for the determined
character encoding can pose a security risk, as discussed in [Section
5](#security-considerations){.xref}. That said, because of the varied
and complex environments scripts are executed in, most of the error
handling specifics are left to the processors. The following are broad
guidelines that processors follow.[¶](#section-4.3-1){.pilcrow}

If binary source text is determined to have been encoded using a certain
character encoding scheme that the implementation is unable to process,
implementations can consider the resource unsupported (i.e., do not
decode the binary source text using a different character encoding
scheme).[¶](#section-4.3-2){.pilcrow}

Binary source text can be determined to have been encoded using a
certain character encoding scheme but contain octet sequences that are
not valid according to that scheme. Implementations can substitute those
invalid sequences with the replacement character U+FFFD (properly
encoded for the scheme) or stop processing
altogether.[¶](#section-4.3-3){.pilcrow}
:::
:::
:::
:::

::: {#security-considerations}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Refer to \[[RFC3552](#RFC3552){.xref}\] for a discussion of terminology
used in this section. Examples in this section and discussions of
interactions of host environments with scripts, modules, and extensions
to \[[ECMA-262](#ECMA-262){.xref}\] are to be understood as
non-exhaustive and of a purely illustrative
nature.[¶](#section-5-1){.pilcrow}

The programming language defined in \[[ECMA-262](#ECMA-262){.xref}\] is
not intended to be computationally self-sufficient; rather, it is
expected that the computational environment provides facilities to
programs to enable specific functionality. Such facilities constitute
unknown factors and are thus not defined by this
document.[¶](#section-5-2){.pilcrow}

Derived programming languages are permitted to include additional
functionality that is not described in \[[ECMA-262](#ECMA-262){.xref}\];
such functionality constitutes an unknown factor and is thus not defined
by this document. In particular, extensions to
\[[ECMA-262](#ECMA-262){.xref}\] defined for the JavaScript programming
language are not discussed in this document.[¶](#section-5-3){.pilcrow}

Uncontrolled execution of scripts can be exceedingly dangerous.
Implementations that execute scripts [MUST]{.bcp14} give consideration
to their application\'s threat models and those of the individual
features they implement; in particular, they [MUST]{.bcp14} ensure that
untrusted content is not executed in an unprotected
environment.[¶](#section-5-4){.pilcrow}

Module scripts in ECMAScript can request the fetching and processing of
additional scripts; this is called \"importing\". Implementations that
support modules need to process imported sources in the same way as
scripts. See the section \"ECMAScript Language: Scripts and Modules\" in
\[[ECMA-262](#ECMA-262){.xref}\] for details. Further, there may be
additional privacy and security concerns, depending on the location(s)
the original script and its imported modules are obtained from. For
instance, a script obtained from \"host-a.example\" could request to
import a script from \"host-b.example\", which could expose information
about the executing environment (e.g., IP address) to
\"host-b.example\".[¶](#section-5-5){.pilcrow}

Specifications for host environment facilities and for derived
programming languages should include security considerations. If an
implementation supports such facilities, the respective security
considerations apply. In particular, if scripts can be referenced from
or included in specific document formats, the considerations for the
embedding or referencing document format
apply.[¶](#section-5-6){.pilcrow}

For example, scripts embedded in application/xhtml+xml
\[[RFC3236](#RFC3236){.xref}\] documents could be enabled through the
host environment to manipulate the document instance, which could cause
the retrieval of remote resources; security considerations regarding
retrieval of remote resources of the embedding document would apply in
this case.[¶](#section-5-7){.pilcrow}

This circumstance can further be used to make information that is
normally only available to the script also available to a web server by
encoding the information in the resource identifier of the resource,
which can further enable eavesdropping attacks. Implementation of such
facilities is subject to the security considerations of the host
environment, as discussed above.[¶](#section-5-8){.pilcrow}

The programming language defined in \[[ECMA-262](#ECMA-262){.xref}\]
does include facilities to loop, cause computationally complex
operations, or consume large amounts of memory; this includes, but is
not limited to, facilities that allow dynamically generated source text
to be executed (e.g., the eval() function); uncontrolled execution of
such features can cause denial of service, which implementations
[MUST]{.bcp14} protect against.[¶](#section-5-9){.pilcrow}

With the addition of SharedArrayBuffer objects in ECMAScript version 8,
it could be possible to implement a high-resolution timer, which could
lead to certain types of timing and side-channel attacks (e.g.,
\[[SPECTRE](#SPECTRE){.xref}\]). Implementations can take steps to
mitigate this concern, such as disabling or removing support for
SharedArrayBuffer objects, or can take additional steps to ensure that
this shared memory is only accessible between execution contexts that
have some form of mutual trust.[¶](#section-5-10){.pilcrow}

A host environment can provide facilities to access external input.
Scripts that pass such input to the eval() function or similar language
features can be vulnerable to code injection attacks. Scripts are
expected to protect against such attacks.[¶](#section-5-11){.pilcrow}

A host environment can provide facilities to output computed results in
a user-visible manner. For example, host environments supporting a
graphical user interface can provide facilities that enable scripts to
present certain messages to the user. Implementations [MUST]{.bcp14}
take steps to avoid confusion of the origin of such messages. In
general, the security considerations for the host environment apply in
such a case as discussed above.[¶](#section-5-12){.pilcrow}

Implementations are required to support the UTF-8 character encoding
scheme; the security considerations of \[[RFC3629](#RFC3629){.xref}\]
apply. Additional character encoding schemes may be supported; support
for such schemes is subject to the security considerations of those
schemes.[¶](#section-5-13){.pilcrow}

Source text is expected to be in Unicode Normalization Form C. Scripts
and implementations [MUST]{.bcp14} consider security implications of
unnormalized source text and data. For a detailed discussion of such
implications, refer to the security considerations in
\[[RFC3629](#RFC3629){.xref}\].[¶](#section-5-14){.pilcrow}

Scripts can be executed in an environment that is vulnerable to code
injection attacks. For example, a Common Gateway Interface (CGI) script
\[[RFC3875](#RFC3875){.xref}\] echoing user input could allow the
inclusion of untrusted scripts that could be executed in an otherwise
trusted environment. This threat scenario is subject to security
considerations that are out of the scope of this
document.[¶](#section-5-15){.pilcrow}

The \"data\" resource identifier scheme \[[RFC2397](#RFC2397){.xref}\],
in combination with the types defined in this document, could be used to
cause execution of untrusted scripts through the inclusion of untrusted
resource identifiers in otherwise trusted content. Security
considerations of \[[RFC2397](#RFC2397){.xref}\]
apply.[¶](#section-5-16){.pilcrow}

Implementations can fail to implement a specific security model or other
means to prevent possibly dangerous operations. Such failure could
possibly be exploited to gain unauthorized access to a system or
sensitive information; such failure constitutes an unknown factor and is
thus not defined by this document.[¶](#section-5-17){.pilcrow}
:::
:::

::: {#iana-considerations}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

The media type registrations herein are divided into two major
categories: (1) the sole media type \"text/javascript\", which is now in
common usage and (2) all of the media types that are obsolete (i.e.,
\"application/ecmascript\", \"application/javascript\",
\"application/x-ecmascript\", \"application/x-javascript\",
\"text/ecmascript\", \"text/javascript1.0\", \"text/javascript1.1\",
\"text/javascript1.2\", \"text/javascript1.3\", \"text/javascript1.4\",
\"text/javascript1.5\", \"text/jscript\", \"text/livescript\", and
\"text/x-ecmascript\").[¶](#section-6-1){.pilcrow}

For both categories, the \"Published specification\" entry for the media
types is updated to reference \[[ECMA-262](#ECMA-262){.xref}\]. In
addition, a new file extension of .mjs has been added to the list of
file extensions with the restriction that contents should be parsed
using the Module goal. Finally, the \[[HTML](#HTML){.xref}\]
specification uses \"text/javascript\" as the default media type of
ECMAScript when preparing script tags; therefore, \"text/javascript\"
intended usage has been moved from OBSOLETE to
COMMON.[¶](#section-6-2){.pilcrow}

These changes have been reflected in the IANA \"Media Types\" registry
in accordance with \[[RFC6838](#RFC6838){.xref}\]. All registrations
will point to this document as the reference. The outdated note stating
that the \"text/javascript\" media type has been \"OBSOLETED in favor of
application/javascript\" has been removed. The outdated note stating
that the \"text/ecmascript\" media type has been \"OBSOLETED in favor of
application/ecmascript\" has been removed. IANA has added the note
\"OBSOLETED in favor of text/javascript\" to all registrations except
\"text/javascript\"; that is, this note has been added to the
\"text/ecmascript\", \"application/javascript\", and
\"application/ecmascript\" registrations.[¶](#section-6-3){.pilcrow}

Four of the legacy media types in this document have a subtype starting
with the \"x-\" prefix:[¶](#section-6-4){.pilcrow}

-   [application/x-ecmascript[¶](#section-6-5.1){.pilcrow}]{#section-6-5.1}
-   [application/x-javascript[¶](#section-6-5.2){.pilcrow}]{#section-6-5.2}
-   [text/x-ecmascript[¶](#section-6-5.3){.pilcrow}]{#section-6-5.3}
-   [text/x-javascript[¶](#section-6-5.4){.pilcrow}]{#section-6-5.4}

Note that these are grandfathered media types registered as per
[Appendix A](https://www.rfc-editor.org/rfc/rfc6838#appendix-A){.relref}
of \[[RFC6838](#RFC6838){.xref}\]. These registrations predate [BCP
178](#RFC6648){.xref} \[[RFC6648](#RFC6648){.xref}\], which they
violate, and are only included in this document for backward
compatibility.[¶](#section-6-6){.pilcrow}

::: {#common-javascript-media-types}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Common JavaScript Media Types](#name-common-javascript-media-typ){.section-name .selfRef} {#name-common-javascript-media-typ}

::: {#textjavascript}
::: {#section-6.1.1 .section}
#### [6.1.1.](#section-6.1.1){.section-number .selfRef} [text/javascript](#name-text-javascript){.section-name .selfRef} {#name-text-javascript}

[]{.break}

Type name:
:   text[¶](#section-6.1.1-1.2){.pilcrow}
:   

Subtype name:
:   javascript[¶](#section-6.1.1-1.4){.pilcrow}
:   

Required parameters:
:   N/A[¶](#section-6.1.1-1.6){.pilcrow}
:   

Optional parameters:
:   charset. See [Section 4.1](#charset-parameter){.xref} of RFC
    9239.[¶](#section-6.1.1-1.8){.pilcrow}
:   

Encoding considerations:
:   Binary[¶](#section-6.1.1-1.10){.pilcrow}
:   

Security considerations:
:   See [Section 5](#security-considerations){.xref} of RFC
    9239.[¶](#section-6.1.1-1.12){.pilcrow}
:   

Interoperability considerations:
:   It is expected that implementations will behave as if this
    registration applies to later editions of
    \[[ECMA-262](#ECMA-262){.xref}\], and its published specification
    references may be updated accordingly from time to time. Although
    this expectation is unusual among media type registrations, it
    matches widespread industry conventions. See [Section
    2](#compatibility){.xref} of RFC
    9239.[¶](#section-6.1.1-1.14){.pilcrow}
:   

Published specification:
:   \[[ECMA-262](#ECMA-262){.xref}\][¶](#section-6.1.1-1.16){.pilcrow}
:   

Applications that use this media type:
:   Script interpreters as discussed in RFC
    9239.[¶](#section-6.1.1-1.18){.pilcrow}
:   

[]{.break}

Additional information:
:   []{.break}

    Deprecated alias names for this type:
    :   application/javascript, application/x-javascript,
        text/javascript1.0, text/javascript1.1, text/javascript1.2,
        text/javascript1.3, text/javascript1.4, text/javascript1.5,
        text/jscript,
        text/livescript[¶](#section-6.1.1-2.2.1.2){.pilcrow}
    :   

    Magic number(s):
    :   N/A[¶](#section-6.1.1-2.2.1.4){.pilcrow}
    :   

    File extension(s):
    :   .js, .mjs[¶](#section-6.1.1-2.2.1.6){.pilcrow}
    :   

    Macintosh File Type Code(s):
    :   TEXT[¶](#section-6.1.1-2.2.1.8){.pilcrow}
    :   
:   

[]{.break}

Person & email address to contact for further information:
:   See the Authors\' Addresses sections of RFC 9239 and
    \[[RFC4329](#RFC4329){.xref}\].[¶](#section-6.1.1-3.2){.pilcrow}
:   

Intended usage:
:   COMMON[¶](#section-6.1.1-3.4){.pilcrow}
:   

Restrictions on usage:
:   The .mjs file extension signals that the file represents a
    JavaScript module. Execution environments that rely on file
    extensions to determine how to process inputs parse .mjs files using
    the Module grammar of
    \[[ECMA-262](#ECMA-262){.xref}\].[¶](#section-6.1.1-3.6){.pilcrow}
:   

Author:
:   See the Authors\' Addresses sections of RFC 9239 and
    \[[RFC4329](#RFC4329){.xref}\].[¶](#section-6.1.1-3.8){.pilcrow}
:   

Change controller:
:   IESG \<iesg\@ietf.org>[¶](#section-6.1.1-3.10){.pilcrow}
:   
:::
:::
:::
:::

::: {#historic-javascript-media-types}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Historic JavaScript Media Types](#name-historic-javascript-media-t){.section-name .selfRef} {#name-historic-javascript-media-t}

The following media types and legacy aliases are added or updated for
historical purposes. All herein have an intended usage of OBSOLETE and
are not expected to be in use with modern
implementations.[¶](#section-6.2-1){.pilcrow}

::: {#textecmascript}
::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [text/ecmascript](#name-text-ecmascript){.section-name .selfRef} {#name-text-ecmascript}

[]{.break}

Type name:
:   text[¶](#section-6.2.1-1.2){.pilcrow}
:   

Subtype name:
:   ecmascript[¶](#section-6.2.1-1.4){.pilcrow}
:   

Required parameters:
:   N/A[¶](#section-6.2.1-1.6){.pilcrow}
:   

Optional parameters:
:   charset. See [Section 4.1](#charset-parameter){.xref} of RFC
    9239.[¶](#section-6.2.1-1.8){.pilcrow}
:   

Encoding considerations:
:   Binary[¶](#section-6.2.1-1.10){.pilcrow}
:   

Security considerations:
:   See [Section 5](#security-considerations){.xref} of RFC
    9239.[¶](#section-6.2.1-1.12){.pilcrow}
:   

Interoperability considerations:
:   It is expected that implementations will behave as if this
    registration applies to later editions of
    \[[ECMA-262](#ECMA-262){.xref}\], and its published specification
    references may be updated accordingly from time to time. Although
    this expectation is unusual among media type registrations, it
    matches widespread industry conventions. See [Section
    2](#compatibility){.xref} of RFC
    9239.[¶](#section-6.2.1-1.14){.pilcrow}
:   

Published specification:
:   \[[ECMA-262](#ECMA-262){.xref}\][¶](#section-6.2.1-1.16){.pilcrow}
:   

Applications that use this media type:
:   Script interpreters as discussed in RFC
    9239.[¶](#section-6.2.1-1.18){.pilcrow}
:   

[]{.break}

Additional information:
:   []{.break}

    Deprecated alias names for this type:
    :   application/ecmascript, application/x-ecmascript,
        text/x-ecmascript[¶](#section-6.2.1-2.2.1.2){.pilcrow}
    :   

    Magic number(s):
    :   N/A[¶](#section-6.2.1-2.2.1.4){.pilcrow}
    :   

    File extension(s):
    :   .es, .mjs[¶](#section-6.2.1-2.2.1.6){.pilcrow}
    :   

    Macintosh File Type Code(s):
    :   TEXT[¶](#section-6.2.1-2.2.1.8){.pilcrow}
    :   
:   

[]{.break}

Person & email address to contact for further information:
:   See the Authors\' Addresses sections of RFC 9239 and
    \[[RFC4329](#RFC4329){.xref}\].[¶](#section-6.2.1-3.2){.pilcrow}
:   

Intended usage:
:   OBSOLETE[¶](#section-6.2.1-3.4){.pilcrow}
:   

Restrictions on usage:
:   This media type is obsolete; current implementations should use
    text/javascript as the only JavaScript/ECMAScript media type. The
    .mjs file extension signals that the file represents a JavaScript
    module. Execution environments that rely on file extensions to
    determine how to process inputs parse .mjs files using the Module
    grammar of
    \[[ECMA-262](#ECMA-262){.xref}\].[¶](#section-6.2.1-3.6){.pilcrow}
:   

Author:
:   See the Authors\' Addresses sections of RFC 9239 and
    \[[RFC4329](#RFC4329){.xref}\].[¶](#section-6.2.1-3.8){.pilcrow}
:   

Change controller:
:   IESG \<iesg\@ietf.org>[¶](#section-6.2.1-3.10){.pilcrow}
:   
:::
:::
:::
:::
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[CHARSETS\]
:   [IANA]{.refAuthor}, [\"Character Sets\"]{.refTitle},
    \<<https://www.iana.org/assignments/character-sets>\>.
:   

\[ECMA-262\]
:   [Ecma International]{.refAuthor}, [\"ECMA-262 12th Edition,
    June 2021. ECMAScript 2021 language specification\"]{.refTitle},
    June 2021, \<<https://262.ecma-international.org/12.0/>\>.
:   

\[RFC2045\]
:   [Freed, N.]{.refAuthor} and [N. Borenstein]{.refAuthor},
    [\"Multipurpose Internet Mail Extensions (MIME) Part One: Format of
    Internet Message Bodies\"]{.refTitle}, [RFC 2045]{.seriesInfo}, [DOI
    10.17487/RFC2045]{.seriesInfo}, November 1996,
    \<<https://www.rfc-editor.org/info/rfc2045>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2397\]
:   [Masinter, L.]{.refAuthor}, [\"The \"data\" URL
    scheme\"]{.refTitle}, [RFC 2397]{.seriesInfo}, [DOI
    10.17487/RFC2397]{.seriesInfo}, August 1998,
    \<<https://www.rfc-editor.org/info/rfc2397>\>.
:   

\[RFC2978\]
:   [Freed, N.]{.refAuthor} and [J. Postel]{.refAuthor}, [\"IANA Charset
    Registration Procedures\"]{.refTitle}, [BCP 19]{.seriesInfo}, [RFC
    2978]{.seriesInfo}, [DOI 10.17487/RFC2978]{.seriesInfo}, October
    2000, \<<https://www.rfc-editor.org/info/rfc2978>\>.
:   

\[RFC3552\]
:   [Rescorla, E.]{.refAuthor} and [B. Korver]{.refAuthor},
    [\"Guidelines for Writing RFC Text on Security
    Considerations\"]{.refTitle}, [BCP 72]{.seriesInfo}, [RFC
    3552]{.seriesInfo}, [DOI 10.17487/RFC3552]{.seriesInfo}, July 2003,
    \<<https://www.rfc-editor.org/info/rfc3552>\>.
:   

\[RFC3629\]
:   [Yergeau, F.]{.refAuthor}, [\"UTF-8, a transformation format of ISO
    10646\"]{.refTitle}, [STD 63]{.seriesInfo}, [RFC 3629]{.seriesInfo},
    [DOI 10.17487/RFC3629]{.seriesInfo}, November 2003,
    \<<https://www.rfc-editor.org/info/rfc3629>\>.
:   

\[RFC4288\]
:   [Freed, N.]{.refAuthor} and [J. Klensin]{.refAuthor}, [\"Media Type
    Specifications and Registration Procedures\"]{.refTitle}, [RFC
    4288]{.seriesInfo}, [DOI 10.17487/RFC4288]{.seriesInfo}, December
    2005, \<<https://www.rfc-editor.org/info/rfc4288>\>.
:   

\[RFC4329\]
:   [Hoehrmann, B.]{.refAuthor}, [\"Scripting Media Types\"]{.refTitle},
    [RFC 4329]{.seriesInfo}, [DOI 10.17487/RFC4329]{.seriesInfo}, April
    2006, \<<https://www.rfc-editor.org/info/rfc4329>\>.
:   

\[RFC6365\]
:   [Hoffman, P.]{.refAuthor} and [J. Klensin]{.refAuthor},
    [\"Terminology Used in Internationalization in the
    IETF\"]{.refTitle}, [BCP 166]{.seriesInfo}, [RFC 6365]{.seriesInfo},
    [DOI 10.17487/RFC6365]{.seriesInfo}, September 2011,
    \<<https://www.rfc-editor.org/info/rfc6365>\>.
:   

\[RFC6648\]
:   [Saint-Andre, P.]{.refAuthor}, [Crocker, D.]{.refAuthor}, and [M.
    Nottingham]{.refAuthor}, [\"Deprecating the \"X-\" Prefix and
    Similar Constructs in Application Protocols\"]{.refTitle}, [BCP
    178]{.seriesInfo}, [RFC 6648]{.seriesInfo}, [DOI
    10.17487/RFC6648]{.seriesInfo}, June 2012,
    \<<https://www.rfc-editor.org/info/rfc6648>\>.
:   

\[RFC6838\]
:   [Freed, N.]{.refAuthor}, [Klensin, J.]{.refAuthor}, and [T.
    Hansen]{.refAuthor}, [\"Media Type Specifications and Registration
    Procedures\"]{.refTitle}, [BCP 13]{.seriesInfo}, [RFC
    6838]{.seriesInfo}, [DOI 10.17487/RFC6838]{.seriesInfo}, January
    2013, \<<https://www.rfc-editor.org/info/rfc6838>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[HTML\]
:   [WHATWG]{.refAuthor}, [\"HTML Living Standard\"]{.refTitle}, May
    2022,
    \<<https://html.spec.whatwg.org/multipage/scripting.html#prepare-a-script>\>.
:   

\[RFC3236\]
:   [Baker, M.]{.refAuthor} and [P. Stark]{.refAuthor}, [\"The
    \'application/xhtml+xml\' Media Type\"]{.refTitle}, [RFC
    3236]{.seriesInfo}, [DOI 10.17487/RFC3236]{.seriesInfo}, January
    2002, \<<https://www.rfc-editor.org/info/rfc3236>\>.
:   

\[RFC3875\]
:   [Robinson, D.]{.refAuthor} and [K. Coar]{.refAuthor}, [\"The Common
    Gateway Interface (CGI) Version 1.1\"]{.refTitle}, [RFC
    3875]{.seriesInfo}, [DOI 10.17487/RFC3875]{.seriesInfo}, October
    2004, \<<https://www.rfc-editor.org/info/rfc3875>\>.
:   

\[RFC3986\]
:   [Berners-Lee, T.]{.refAuthor}, [Fielding, R.]{.refAuthor}, and [L.
    Masinter]{.refAuthor}, [\"Uniform Resource Identifier (URI): Generic
    Syntax\"]{.refTitle}, [STD 66]{.seriesInfo}, [RFC
    3986]{.seriesInfo}, [DOI 10.17487/RFC3986]{.seriesInfo}, January
    2005, \<<https://www.rfc-editor.org/info/rfc3986>\>.
:   

\[RFC3987\]
:   [Duerst, M.]{.refAuthor} and [M. Suignard]{.refAuthor},
    [\"Internationalized Resource Identifiers (IRIs)\"]{.refTitle}, [RFC
    3987]{.seriesInfo}, [DOI 10.17487/RFC3987]{.seriesInfo}, January
    2005, \<<https://www.rfc-editor.org/info/rfc3987>\>.
:   

\[SPECTRE\]
:   [Kocher, P.]{.refAuthor}, [Genkin, D.]{.refAuthor},
    [Gruss, D.]{.refAuthor}, [Haas, W.]{.refAuthor},
    [Hamburg, M.]{.refAuthor}, [Lipp, M.]{.refAuthor},
    [Mangard, S.]{.refAuthor}, [Prescher, T.]{.refAuthor},
    [Schwarz, M.]{.refAuthor}, and [Y. Yarom]{.refAuthor}, [\"Spectre
    Attacks: Exploiting Speculative Execution\"]{.refTitle}, [DOI
    10.48550/arXiv.1801.01203]{.seriesInfo}, January 2018,
    \<<https://arxiv.org/abs/1801.01203>\>.
:   

\[TC39-MIME-ISSUE\]
:   [TC39]{.refAuthor}, [\"Add \'application/javascript+module\' mime to
    remove ambiguity\"]{.refTitle}, [Wayback Machine
    archive]{.refContent}, August 2017,
    \<<https://web.archive.org/web/20170814193912/https://github.com/tc39/ecma262/issues/322>\>.
:   
:::
:::

::: {#changes-from-rfc-4329}
::: {#appendix-A .section}
## [Appendix A.](#appendix-A){.section-number .selfRef} [Changes from RFC 4329](#name-changes-from-rfc-4329){.section-name .selfRef} {#name-changes-from-rfc-4329}

-   [Added a section discussing ECMAScript modules and the impact on
    processing.[¶](#appendix-A-1.1){.pilcrow}]{#appendix-A-1.1}
-   [Updated the Security Considerations section to discuss concerns
    associated with ECMAScript modules and
    SharedArrayBuffers.[¶](#appendix-A-1.2){.pilcrow}]{#appendix-A-1.2}
-   [Updated the character encoding scheme detection to remove normative
    guidance on its use, to better reflect operational
    reality.[¶](#appendix-A-1.3){.pilcrow}]{#appendix-A-1.3}
-   [Changed the intended usage of the media type \"text/javascript\"
    from OBSOLETE to
    COMMON.[¶](#appendix-A-1.4){.pilcrow}]{#appendix-A-1.4}
-   [Changed the intended usage for all other script media types to
    obsolete.[¶](#appendix-A-1.5){.pilcrow}]{#appendix-A-1.5}
-   [Updated various references where the original has been
    obsoleted.[¶](#appendix-A-1.6){.pilcrow}]{#appendix-A-1.6}
-   [Updated references to ECMA-262 to match the version at the time of
    publication.[¶](#appendix-A-1.7){.pilcrow}]{#appendix-A-1.7}
:::
:::

::: {#acknowledgements}
::: {#appendix-B .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

This work builds upon its antecedent document, authored by [Björn
Höhrmann]{.contact-name}. The authors would like to thank [Adam
Roach]{.contact-name}, [Alexey Melnikov]{.contact-name}, [Allen
Wirfs-Brock]{.contact-name}, [Anne van Kesteren]{.contact-name}, [Ben
Campbell]{.contact-name}, [Benjamin Kaduk]{.contact-name}, [Éric
Vyncke]{.contact-name}, [Francesca Palombini]{.contact-name}, [James
Snell]{.contact-name}, [Kirsty Paine]{.contact-name}, [Mark
Nottingham]{.contact-name}, [Murray Kucherawy]{.contact-name}, [Ned
Freed]{.contact-name}, [Robert Sparks]{.contact-name}, and [Suresh
Krishnan]{.contact-name} for their guidance and feedback throughout this
process.[¶](#appendix-B-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Matthew A. Miller]{.fn .nameRole}
:::

::: email
Email: <linuxwolf+ietf@outer-planes.net>
:::

::: {.left dir="auto"}
[Myles Borins]{.fn .nameRole}
:::

::: {.left dir="auto"}
[GitHub]{.org}
:::

::: email
Email: <mylesborins@github.com>
:::

::: {.left dir="auto"}
[Mathias Bynens]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Google]{.org}
:::

::: email
Email: <mths@google.com>
:::

::: {.left dir="auto"}
[Bradley Farias]{.fn .nameRole}
:::

::: email
Email: <bradley.meck@gmail.com>
:::
:::
:::
