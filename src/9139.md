  RFC 9139           ICN Adaptation to LoWPANs   November 2021
  ------------------ --------------------------- ---------------
  Gündoğan, et al.   Experimental                \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Research Task Force (IRTF)

RFC:
:   [9139](https://www.rfc-editor.org/rfc/rfc9139){.eref}

Category:
:   Experimental

Published:
:   November 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    C. Gündoğan
    :::

    ::: org
    HAW Hamburg
    :::
    :::

    ::: author
    ::: author-name
    T. Schmidt
    :::

    ::: org
    HAW Hamburg
    :::
    :::

    ::: author
    ::: author-name
    M. Wählisch
    :::

    ::: org
    link-lab & FU Berlin
    :::
    :::

    ::: author
    ::: author-name
    C. Scherb
    :::

    ::: org
    FHNW
    :::
    :::

    ::: author
    ::: author-name
    C. Marxer
    :::

    ::: org
    University of Basel
    :::
    :::

    ::: author
    ::: author-name
    C. Tschudin
    :::

    ::: org
    University of Basel
    :::
    :::
:::

# RFC 9139 {#rfcnum}

# Information-Centric Networking (ICN) Adaptation to Low-Power Wireless Personal Area Networks (LoWPANs) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document defines a convergence layer for Content-Centric Networking
(CCNx) and Named Data Networking (NDN) over IEEE 802.15.4 Low-Power
Wireless Personal Area Networks (LoWPANs). A new frame format is
specified to adapt CCNx and NDN packets to the small MTU size of IEEE
802.15.4. For that, syntactic and semantic changes to the TLV-based
header formats are described. To support compatibility with other LoWPAN
technologies that may coexist on a wireless medium, the dispatching
scheme provided by IPv6 over LoWPAN (6LoWPAN) is extended to include new
dispatch types for CCNx and NDN. Additionally, the fragmentation
component of the 6LoWPAN dispatching framework is applied to
Information-Centric Network (ICN) chunks. In its second part, the
document defines stateless and stateful compression schemes to improve
efficiency on constrained links. Stateless compression reduces TLV
expressions to static header fields for common use cases. Stateful
compression schemes elide states local to the LoWPAN and replace names
in Data packets by short local
identifiers.[¶](#section-abstract-1){.pilcrow}

This document is a product of the IRTF Information-Centric Networking
Research Group (ICNRG).[¶](#section-abstract-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for examination, experimental implementation, and
evaluation.[¶](#section-boilerplate.1-1){.pilcrow}

This document defines an Experimental Protocol for the Internet
community. This document is a product of the Internet Research Task
Force (IRTF). The IRTF publishes the results of Internet-related
research and development activities. These results might not be suitable
for deployment. This RFC represents the consensus of the
Information-Centric Networking Research Group of the Internet Research
Task Force (IRTF). Documents approved for publication by the IRSG are
not candidates for any level of Internet Standard; see Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9139>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Overview of ICN
    LoWPAN](#name-overview-of-icn-lowpan){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Link-Layer
        Convergence](#name-link-layer-convergence){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Stateless Header
        Compression](#name-stateless-header-compressio){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Stateful Header
        Compression](#name-stateful-header-compression){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [IEEE 802.15.4
    Adaptation](#name-ieee-802154-adaptation){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [LoWPAN
        Encapsulation](#name-lowpan-encapsulation){.xref}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [Dispatch
            Extensions](#name-dispatch-extensions){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Adaptation-Layer
        Fragmentation](#name-adaptation-layer-fragmentat){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Space-Efficient Message Encoding for
    NDN](#name-space-efficient-message-enc){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [TLV
        Encoding](#name-tlv-encoding){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [Name TLV
        Compression](#name-name-tlv-compression){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Interest
        Messages](#name-interest-messages){.xref}

        -   ::: {#section-toc.1-1.5.2.3.2.1}
            [5.3.1](#section-5.3.1){.xref}.  [Uncompressed Interest
            Messages](#name-uncompressed-interest-messa){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.3.2.2}
            [5.3.2](#section-5.3.2){.xref}.  [Compressed Interest
            Messages](#name-compressed-interest-message){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.3.2.3}
            [5.3.3](#section-5.3.3){.xref}.  [Dispatch
            Extension](#name-dispatch-extension){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [Data
        Messages](#name-data-messages){.xref}

        -   ::: {#section-toc.1-1.5.2.4.2.1}
            [5.4.1](#section-5.4.1){.xref}.  [Uncompressed Data
            Messages](#name-uncompressed-data-messages){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.4.2.2}
            [5.4.2](#section-5.4.2){.xref}.  [Compressed Data
            Messages](#name-compressed-data-messages){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.4.2.3}
            [5.4.3](#section-5.4.3){.xref}.  [Dispatch
            Extension](#name-dispatch-extension-2){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Space-Efficient Message Encoding for
    CCNx](#name-space-efficient-message-enco){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [TLV
        Encoding](#name-tlv-encoding-2){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Name TLV
        Compression](#name-name-tlv-compression-2){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [Interest
        Messages](#name-interest-messages-2){.xref}

        -   ::: {#section-toc.1-1.6.2.3.2.1}
            [6.3.1](#section-6.3.1){.xref}.  [Uncompressed Interest
            Messages](#name-uncompressed-interest-messag){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.2}
            [6.3.2](#section-6.3.2){.xref}.  [Compressed Interest
            Messages](#name-compressed-interest-messages){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.3.2.3}
            [6.3.3](#section-6.3.3){.xref}.  [Dispatch
            Extension](#name-dispatch-extension-3){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Content
        Objects](#name-content-objects){.xref}

        -   ::: {#section-toc.1-1.6.2.4.2.1}
            [6.4.1](#section-6.4.1){.xref}.  [Uncompressed Content
            Objects](#name-uncompressed-content-object){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.4.2.2}
            [6.4.2](#section-6.4.2){.xref}.  [Compressed Content
            Objects](#name-compressed-content-objects){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.4.2.3}
            [6.4.3](#section-6.4.3){.xref}.  [Dispatch
            Extension](#name-dispatch-extension-4){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Compressed Time
    Encoding](#name-compressed-time-encoding){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Stateful Header
    Compression](#name-stateful-header-compression-2){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [LoWPAN-Local
        State](#name-lowpan-local-state){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [En Route
        State](#name-en-route-state){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [Integrating Stateful Header
        Compression](#name-integrating-stateful-header){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [ICN LoWPAN Constants and
    Variables](#name-icn-lowpan-constants-and-va){.xref}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Implementation Report and
    Guidance](#name-implementation-report-and-g){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Preferred
        Configuration](#name-preferred-configuration){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Further Experimental
        Deployments](#name-further-experimental-deploy){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.12.2.1}
        [12.1](#section-12.1){.xref}.  [Updates to the 6LoWPAN Dispatch
        Type Field Registry](#name-updates-to-the-6lowpan-disp){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.13.2.1}
        [13.1](#section-13.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.13.2.2}
        [13.2](#section-13.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.14}
    [Appendix A](#appendix-A){.xref}.  [Estimated Size
    Reduction](#name-estimated-size-reduction){.xref}

    -   ::: {#section-toc.1-1.14.2.1}
        [A.1](#appendix-A.1){.xref}.  [NDN](#name-ndn){.xref}

        -   ::: {#section-toc.1-1.14.2.1.2.1}
            [A.1.1](#appendix-A.1.1){.xref}.  [Interest](#name-interest){.xref}
            :::

        -   ::: {#section-toc.1-1.14.2.1.2.2}
            [A.1.2](#appendix-A.1.2){.xref}.  [Data](#name-data){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.14.2.2}
        [A.2](#appendix-A.2){.xref}.  [CCNx](#name-ccnx){.xref}

        -   ::: {#section-toc.1-1.14.2.2.2.1}
            [A.2.1](#appendix-A.2.1){.xref}.  [Interest](#name-interest-2){.xref}
            :::

        -   ::: {#section-toc.1-1.14.2.2.2.2}
            [A.2.2](#appendix-A.2.2){.xref}.  [Content
            Object](#name-content-object){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.15}
    [](#appendix-B){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.16}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#intro}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The Internet of Things (IoT) has been identified as a promising
deployment area for Information-Centric Networking (ICN), as
infrastructureless access to content, resilient forwarding, and
in-network data replication demonstrates notable advantages over the
Internet host-to-host approach \[[NDN-EXP1](#NDN-EXP1){.xref}\]
\[[NDN-EXP2](#NDN-EXP2){.xref}\]. Recent studies
\[[NDN-MAC](#NDN-MAC){.xref}\] have shown that an appropriate mapping to
link-layer technologies has a large impact on the practical performance
of an ICN. This will be even more relevant in the context of IoT
communication where nodes often exchange messages via low-power wireless
links under lossy conditions. In this memo, we address the base
adaptation of data chunks to such link layers for the ICN flavors NDN
\[[NDN](#NDN){.xref}\] and CCNx \[[RFC8569](#RFC8569){.xref}\]
\[[RFC8609](#RFC8609){.xref}\].[¶](#section-1-1){.pilcrow}

The IEEE 802.15.4 \[[ieee802.15.4](#ieee802.15.4){.xref}\] link layer is
used in low-power and lossy networks (see `LLN` in
\[[RFC7228](#RFC7228){.xref}\]), in which devices are typically battery
operated and constrained in resources. Characteristics of LLNs include
an unreliable environment, low-bandwidth transmissions, and increased
latencies. IEEE 802.15.4 admits a maximum physical-layer packet size of
127 bytes. The maximum frame header size is 25 bytes, which leaves 102
bytes for the payload. IEEE 802.15.4 security features further reduce
this payload length by up to 21 bytes, yielding a net of 81 bytes for
CCNx or NDN packet headers, signatures, and
content.[¶](#section-1-2){.pilcrow}

6LoWPAN \[[RFC4944](#RFC4944){.xref}\] \[[RFC6282](#RFC6282){.xref}\] is
a convergence layer that provides frame formats, header compression, and
adaptation-layer fragmentation for IPv6 packets in IEEE 802.15.4
networks. The 6LoWPAN adaptation introduces a dispatching framework that
prepends further information to 6LoWPAN packets, including a protocol
identifier for payload and meta information about
fragmentation.[¶](#section-1-3){.pilcrow}

Prevalent packet formats based on Type-Length-Value (TLV), such as in
CCNx and NDN, are designed to be generic and extensible. This leads to
header verbosity, which is inappropriate in constrained environments of
IEEE 802.15.4 links. This document presents ICN LoWPAN, a convergence
layer for IEEE 802.15.4 motivated by 6LoWPAN. ICN LoWPAN compresses
packet headers of CCNx, as well as NDN, and allows for an increased
effective payload size per packet. Additionally, reusing the dispatching
framework defined by 6LoWPAN enables compatibility between coexisting
wireless deployments of competing network technologies. This also allows
reuse of the adaptation-layer fragmentation scheme specified by 6LoWPAN
for ICN LoWPAN.[¶](#section-1-4){.pilcrow}

ICN LoWPAN defines a more space-efficient representation of CCNx and NDN
packet formats. This syntactic change is described for CCNx and NDN
separately, as the header formats and TLV encodings differ notably. For
further reductions, default header values suitable for constrained IoT
networks are selected in order to elide corresponding TLVs. Experimental
evaluations of the ICN LoWPAN header compression schemes in
\[[ICNLOWPAN](#ICNLOWPAN){.xref}\] illustrate a reduced message
overhead, a shortened message airtime, and an overall decline in power
consumption for typical Class 2 devices \[[RFC7228](#RFC7228){.xref}\]
compared to uncompressed ICN messages.[¶](#section-1-5){.pilcrow}

In a typical IoT scenario (see [Figure 1](#fig-iot_network){.xref}),
embedded devices are interconnected via a quasi-stationary
infrastructure using a border router (BR) that connects the constrained
LoWPAN network by some gateway with the public Internet. In ICN-based
IoT networks, nonlocal Interest and Data messages transparently travel
through the BR up and down between a gateway and the embedded devices
situated in the constrained LoWPAN.[¶](#section-1-6){.pilcrow}

[]{#name-iot-stub-network}

::: {#fig-iot_network}
::: {#section-1-7.1 .alignCenter .art-text .artwork}
      |Gateway Services|
      -------------------------
            |
        ,--------,
        |        |
        |   BR   |
        |        |
        '--------'
                     LoWPAN
      O            O
             O
    O                O   embedded
      O      O     O     devices
       O         O
:::

[Figure 1](#figure-1){.selfRef}: [IoT Stub
Network](#name-iot-stub-network){.selfRef}
:::

The document has received fruitful reviews by members of the ICN
community and the research group (see the Acknowledgments section) for a
period of two years. It is the consensus of ICNRG that this document
should be published in the IRTF Stream of the RFC series. This document
does not constitute an IETF standard.[¶](#section-1-8){.pilcrow}
:::
:::

::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

This document uses the terminology of \[[RFC7476](#RFC7476){.xref}\],
\[[RFC7927](#RFC7927){.xref}\], and \[[RFC7945](#RFC7945){.xref}\] for
ICN entities.[¶](#section-2-2){.pilcrow}

The following terms are used in the document and defined as
follows:[¶](#section-2-3){.pilcrow}

[]{.break}

ICN LoWPAN:
:   Information-Centric Networking over Low-Power Wireless Personal Area
    Network[¶](#section-2-4.2){.pilcrow}
:   

LLN:
:   Low-Power and Lossy Network[¶](#section-2-4.4){.pilcrow}
:   

CCNx:
:   Content-Centric Networking[¶](#section-2-4.6){.pilcrow}
:   

NDN:
:   Named Data Networking[¶](#section-2-4.8){.pilcrow}
:   

byte:
:   synonym for octet[¶](#section-2-4.10){.pilcrow}
:   

nibble:
:   synonym for 4 bits[¶](#section-2-4.12){.pilcrow}
:   

time-value:
:   a time offset measured in seconds[¶](#section-2-4.14){.pilcrow}
:   

time-code:
:   an 8-bit encoded time-value[¶](#section-2-4.16){.pilcrow}
:   
:::

::: {#ICNLoWPAN}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Overview of ICN LoWPAN](#name-overview-of-icn-lowpan){.section-name .selfRef} {#name-overview-of-icn-lowpan}

::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Link-Layer Convergence](#name-link-layer-convergence){.section-name .selfRef} {#name-link-layer-convergence}

ICN LoWPAN provides a convergence layer that maps ICN packets onto
constrained link-layer technologies. This includes features such as
link-layer fragmentation, protocol separation on the link-layer level,
and link-layer address mappings. The stack traversal is visualized in
[Figure 2](#fig.intro.hbh){.xref}.[¶](#section-3.1-1){.pilcrow}

[]{#name-icn-lowpan-convergence-laye}

::: {#fig.intro.hbh}
::: {#section-3.1-2.1 .alignCenter .art-text .artwork}
          Device 1                                         Device 2
    ,------------------,           Router            ,------------------,
    |  Application   . |     __________________      | ,-> Application  |
    |----------------|-|    |    NDN / CCNx    |     |-|----------------|
    |  NDN / CCNx    | |    | ,--------------, |     | |    NDN / CCNx  |
    |----------------|-|    |-|--------------|-|     |-|----------------|
    |  ICN LoWPAN    | |    | |  ICN LoWPAN  | |     | |    ICN LoWPAN  |
    |----------------|-|    |-|--------------|-|     |-|----------------|
    |  Link Layer    | |    | |  Link Layer  | |     | |    Link Layer  |
    '----------------|-'    '-|--------------|-'     '-|----------------'
                     '--------'              '---------'
:::

[Figure 2](#figure-2){.selfRef}: [ICN LoWPAN Convergence Layer for IEEE
802.15.4](#name-icn-lowpan-convergence-laye){.selfRef}
:::

[Section 4](#sec.lowpan_adaptation){.xref} of this document defines the
convergence layer for IEEE 802.15.4.[¶](#section-3.1-3){.pilcrow}
:::

::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Stateless Header Compression](#name-stateless-header-compressio){.section-name .selfRef} {#name-stateless-header-compressio}

ICN LoWPAN also defines a stateless header compression scheme with the
main purpose of reducing header overhead of ICN packets. This is of
particular importance for link layers with small MTUs. The stateless
compression does not require preconfiguration of a global
state.[¶](#section-3.2-1){.pilcrow}

The CCNx and NDN header formats are composed of Type-Length-Value (TLV)
fields to encode header data. The advantage of the TLV format is its
support of variably structured data. The main disadvantage of the TLV
format is the verbosity that results from storing the type and length of
the encoded data.[¶](#section-3.2-2){.pilcrow}

The stateless header compression scheme makes use of compact bit fields
to indicate the presence of optional TLVs in the uncompressed packet.
The order of set bits in the bit fields corresponds to the order of each
TLV in the packet. Further compression is achieved by specifying default
values and reducing the range of certain header
fields.[¶](#section-3.2-3){.pilcrow}

[Figure 3](#fig.TLV.compressed){.xref} demonstrates the stateless header
compression idea. In this example, the first type of the first TLV is
removed and the corresponding bit in the bit field is set. The second
TLV represents a fixed-length TLV (e.g., the Nonce TLV in NDN), so that
the Type and Length fields are removed. The third TLV represents a
boolean TLV (e.g., the MustBeFresh selector in NDN) for which the Type,
Length, and Value fields are elided.[¶](#section-3.2-4){.pilcrow}

[]{#name-compression-using-a-compact}

::: {#fig.TLV.compressed}
::: {#section-3.2-5.1 .alignCenter .art-text .artwork}
    Uncompressed:

       Variable-length TLV      Fixed-length TLV      Boolean TLV
    ,-----------------------,-----------------------,-------------,
    +-------+-------+-------+-------+-------+-------+------+------+
    |  TYP  |  LEN  |  VAL  |  TYP  |  LEN  |  VAL  |  TYP | LEN  |
    +-------+-------+-------+-------+-------+-------+------+------+

    Compressed:

      +---+---+---+---+---+---+---+---+
      | 1 | 0 | 1 | 0 | 0 | 0 | 0 | 1 |  Bit Field
      +---+---+---+---+---+---+---+---+
        |       |                   |
     ,--'       '----,              '- Boolean Value
     |               |
    +-------+-------+-------+
    |  LEN  |  VAL  |  VAL  |
    +-------+-------+-------+
    '---------------'-------'
      Var-len Value  Fixed-len Value
:::

[Figure 3](#figure-3){.selfRef}: [Compression Using a Compact Bit Field
\-- Bits Encode the Inclusion of
TLVs](#name-compression-using-a-compact){.selfRef}
:::

Stateless TLV compression for NDN is defined in [Section
5](#sec.ndn){.xref}. [Section 6](#sec.ccnx){.xref} defines the stateless
TLV compression for CCNx.[¶](#section-3.2-6){.pilcrow}

The extensibility of this compression is described in [Section
4.1.1](#sec.dispatch.ext){.xref} and allows future documents to update
the compression rules outlined in this
document.[¶](#section-3.2-7){.pilcrow}
:::

::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Stateful Header Compression](#name-stateful-header-compression){.section-name .selfRef} {#name-stateful-header-compression}

ICN LoWPAN further employs two orthogonal, stateful compression schemes
for packet size reductions, which are defined in [Section
8](#stateful.compression){.xref}. These mechanisms rely on shared
contexts that are either distributed and maintained in the entire LoWPAN
or are generated on demand hop-wise on a particular Interest-Data
path.[¶](#section-3.3-1){.pilcrow}

The shared context identification is defined in [Section
8.1](#stateful.compression.local){.xref}. The hop-wise name compression
\"en route\" is specified in [Section
8.2](#stateful.compression.en-route){.xref}.[¶](#section-3.3-2){.pilcrow}
:::
:::
:::

::: {#sec.lowpan_adaptation}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [IEEE 802.15.4 Adaptation](#name-ieee-802154-adaptation){.section-name .selfRef} {#name-ieee-802154-adaptation}

::: {#sec.lowpan_encap}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [LoWPAN Encapsulation](#name-lowpan-encapsulation){.section-name .selfRef} {#name-lowpan-encapsulation}

The IEEE 802.15.4 frame header does not provide a protocol identifier
for its payload. This causes problems of misinterpreting frames when
several network layers coexist on the same link. To mitigate errors,
6LoWPAN defines dispatches as encapsulation headers for IEEE 802.15.4
frames (see [Section
5](https://www.rfc-editor.org/rfc/rfc4944#section-5){.relref} of
\[[RFC4944](#RFC4944){.xref}\]). Multiple LoWPAN encapsulation headers
can precede the actual payload, and each encapsulation header is
identified by a dispatch type.[¶](#section-4.1-1){.pilcrow}

\[[RFC8025](#RFC8025){.xref}\] further specifies dispatch Pages to
switch between different contexts. When a LoWPAN parser encounters a
`Page  switch` LoWPAN encapsulation header, all following encapsulation
headers are interpreted by using a dispatch Page, as specified by the
`Page switch` header. Pages 0 and 1 are reserved for 6LoWPAN. This
document uses Page 14 (`1111 1110 (0xFE)`) for ICN
LoWPAN.[¶](#section-4.1-2){.pilcrow}

The base dispatch format ([Figure 4](#fig.disp.base){.xref}) is used and
extended by CCNx and NDN in Sections [5](#sec.ndn){.xref} and
[6](#sec.ccnx){.xref}.[¶](#section-4.1-3){.pilcrow}

[]{#name-base-dispatch-format-for-ic}

::: {#fig.disp.base}
::: {#section-4.1-4.1 .alignCenter .art-text .artwork}
      0   1   2   3   ...
    +---+---+---+---+---
    | 0 | P | M | C |
    +---+---+---+---+---
:::

[Figure 4](#figure-4){.selfRef}: [Base Dispatch Format for ICN
LoWPAN](#name-base-dispatch-format-for-ic){.selfRef}
:::

[]{.break}

P: Protocol
:   []{.break}

    0:
    :   The included protocol is NDN.[¶](#section-4.1-5.2.1.2){.pilcrow}
    :   

    1:
    :   The included protocol is
        CCNx.[¶](#section-4.1-5.2.1.4){.pilcrow}
    :   
:   

M: Message Type
:   []{.break}

    0:
    :   The payload contains an Interest
        message.[¶](#section-4.1-5.4.1.2){.pilcrow}
    :   

    1:
    :   The payload contains a Data
        message.[¶](#section-4.1-5.4.1.4){.pilcrow}
    :   
:   

C: Compression
:   []{.break}

    0:
    :   The message is uncompressed.[¶](#section-4.1-5.6.1.2){.pilcrow}
    :   

    1:
    :   The message is compressed.[¶](#section-4.1-5.6.1.4){.pilcrow}
    :   
:   

ICN LoWPAN frames with compressed CCNx and NDN messages (C=1) use the
extended dispatch format in [Figure
5](#fig.disp.base.compr){.xref}.[¶](#section-4.1-6){.pilcrow}

[]{#name-extended-dispatch-format-fo}

::: {#fig.disp.base.compr}
::: {#section-4.1-7.1 .alignCenter .art-text .artwork}
      0   1   2   3      ... ...
    +---+---+---+---+...+---+---+
    | 0 | P | M | 1 |   |CID|EXT|
    +---+---+---+---+...+---+---+
:::

[Figure 5](#figure-5){.selfRef}: [Extended Dispatch Format for
Compressed ICN LoWPAN](#name-extended-dispatch-format-fo){.selfRef}
:::

[]{.break}

CID: Context Identifier
:   []{.break}

    0:
    :   No context identifiers are
        present.[¶](#section-4.1-8.2.1.2){.pilcrow}
    :   

    1:
    :   Context identifier(s) are present (see [Section
        8.1](#stateful.compression.local){.xref}).[¶](#section-4.1-8.2.1.4){.pilcrow}
    :   
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension bytes are
        present.[¶](#section-4.1-8.4.1.2){.pilcrow}
    :   

    1:
    :   Extension byte(s) are present (see [Section
        4.1.1](#sec.dispatch.ext){.xref}).[¶](#section-4.1-8.4.1.4){.pilcrow}
    :   
:   

The encapsulation format for ICN LoWPAN is displayed in [Figure
6](#fig.ICN-LoWPAN.header){.xref}.[¶](#section-4.1-9){.pilcrow}

[]{#name-lowpan-encapsulation-with-i}

::: {#fig.ICN-LoWPAN.header}
::: {#section-4.1-10.1 .alignCenter .art-text .artwork}
    +------...------+------...-----+--------+-------...-------+-----...
    | IEEE 802.15.4 | RFC4944 Disp.|  Page  | ICN LoWPAN Disp.| Payl. /
    +------...------+------...-----+--------+-------...-------+-----...
:::

[Figure 6](#figure-6){.selfRef}: [LoWPAN Encapsulation with ICN
LoWPAN](#name-lowpan-encapsulation-with-i){.selfRef}
:::

[]{.break}

IEEE 802.15.4:
:   The IEEE 802.15.4 header.[¶](#section-4.1-11.2){.pilcrow}
:   

RFC4944 Disp.:
:   Optional additional dispatches defined in [Section
    5.1](https://www.rfc-editor.org/rfc/rfc4944#section-5.1){.relref} of
    \[[RFC4944](#RFC4944){.xref}\].[¶](#section-4.1-11.4){.pilcrow}
:   

Page:
:   `Page switch`. 14 for ICN LoWPAN.[¶](#section-4.1-11.6){.pilcrow}
:   

ICN LoWPAN:
:   Dispatches as defined in Sections [5](#sec.ndn){.xref} and
    [6](#sec.ccnx){.xref}.[¶](#section-4.1-11.8){.pilcrow}
:   

Payload:
:   The actual (un-)compressed CCNx or NDN
    message.[¶](#section-4.1-11.10){.pilcrow}
:   

::: {#sec.dispatch.ext}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [Dispatch Extensions](#name-dispatch-extensions){.section-name .selfRef} {#name-dispatch-extensions}

Extension bytes allow for the extensibility of the initial compression
rule set. The base format for an extension byte is depicted in [Figure
7](#fig.ext.base){.xref}.[¶](#section-4.1.1-1){.pilcrow}

[]{#name-base-format-for-dispatch-ex}

::: {#fig.ext.base}
::: {#section-4.1.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | - | - | - | - | - | - | - |EXT|
    +---+---+---+---+---+---+---+---+
:::

[Figure 7](#figure-7){.selfRef}: [Base Format for Dispatch
Extensions](#name-base-format-for-dispatch-ex){.selfRef}
:::

[]{.break}

EXT: Extension
:   []{.break}

    0:
    :   No other extension byte
        follows.[¶](#section-4.1.1-3.2.1.2){.pilcrow}
    :   

    1:
    :   A further extension byte
        follows.[¶](#section-4.1.1-3.2.1.4){.pilcrow}
    :   
:   

Extension bytes are numbered according to their order. Future documents
[MUST]{.bcp14} follow the naming scheme `EXT_0, EXT_1, ...` when
updating or referring to a specific dispatch extension byte. Amendments
that require an exchange of configurational parameters between devices
[SHOULD]{.bcp14} use manifests to encode structured data in a
well-defined format, e.g., as outlined in
\[[ICNRG-FLIC](#I-D.irtf-icnrg-flic){.xref}\].[¶](#section-4.1.1-4){.pilcrow}
:::
:::
:::
:::

::: {#sec.Fragmentation}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Adaptation-Layer Fragmentation](#name-adaptation-layer-fragmentat){.section-name .selfRef} {#name-adaptation-layer-fragmentat}

Small payload sizes in the LoWPAN require fragmentation for various
network layers. Therefore, [Section
5.3](https://www.rfc-editor.org/rfc/rfc4944#section-5.3){.relref} of
\[[RFC4944](#RFC4944){.xref}\] defines a protocol-independent
fragmentation dispatch type, a fragmentation header for the first
fragment, and a separate fragmentation header for subsequent fragments.
ICN LoWPAN adopts this fragmentation handling of
\[[RFC4944](#RFC4944){.xref}\].[¶](#section-4.2-1){.pilcrow}

The fragmentation LoWPAN header can encapsulate other dispatch headers.
The order of dispatch types is defined in [Section
5](https://www.rfc-editor.org/rfc/rfc4944#section-5){.relref} of
\[[RFC4944](#RFC4944){.xref}\]. [Figure 8](#fig.fr_first){.xref} shows
the fragmentation scheme. The reassembled ICN LoWPAN frame does not
contain any fragmentation headers and is depicted in [Figure
9](#fig.fr_done){.xref}.[¶](#section-4.2-2){.pilcrow}

[]{#name-fragmentation-scheme}

::: {#fig.fr_first}
::: {#section-4.2-3.1 .alignCenter .art-text .artwork}
    +------...------+----...----+--------+------...-------+--------...
    | IEEE 802.15.4 | Frag. 1st |  Page  |   ICN LoWPAN   | Payload  /
    +------...------+----...----+--------+------...-------+--------...

    +------...------+----...----+--------...
    | IEEE 802.15.4 | Frag. 2nd | Payload  /
    +------...------+----...----+--------...

                    .
                    .
                    .

    +------...------+----...----+--------...
    | IEEE 802.15.4 | Frag. Nth | Payload  /
    +------...------+----...----+--------...
:::

[Figure 8](#figure-8){.selfRef}: [Fragmentation
Scheme](#name-fragmentation-scheme){.selfRef}
:::

[]{#name-reassembled-icn-lowpan-fram}

::: {#fig.fr_done}
::: {#section-4.2-4.1 .alignCenter .art-text .artwork}
    +------...------+--------+------...-------+--------...
    | IEEE 802.15.4 |  Page  |   ICN LoWPAN   | Payload  /
    +------...------+--------+------...-------+--------...
:::

[Figure 9](#figure-9){.selfRef}: [Reassembled ICN LoWPAN
Frame](#name-reassembled-icn-lowpan-fram){.selfRef}
:::

The 6LoWPAN Fragment Forwarding (6LFF) \[[RFC8930](#RFC8930){.xref}\] is
an alternative approach that enables forwarding of fragments without
reassembling packets on every intermediate hop. By reusing the 6LoWPAN
dispatching framework, 6LFF integrates into ICN LoWPAN as seamlessly as
the conventional hop-wise fragmentation. However, experimental
evaluations \[[SFR-ICNLOWPAN](#SFR-ICNLOWPAN){.xref}\] suggest that a
more-refined integration can increase the cache utilization of
forwarders on a request path.[¶](#section-4.2-5){.pilcrow}
:::
:::
:::
:::

::: {#sec.ndn}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Space-Efficient Message Encoding for NDN](#name-space-efficient-message-enc){.section-name .selfRef} {#name-space-efficient-message-enc}

::: {#sec.tlvencoding}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [TLV Encoding](#name-tlv-encoding){.section-name .selfRef} {#name-tlv-encoding}

The NDN packet format consists of TLV fields using the TLV encoding that
is described in \[[NDN-PACKET-SPEC](#NDN-PACKET-SPEC){.xref}\]. Type and
Length fields are of variable size, where numbers greater than 252 are
encoded using multiple bytes.[¶](#section-5.1-1){.pilcrow}

If the type or length number is less than `253`, then that number is
encoded into the actual Type or Length field. If the number is greater
or equals `253` and fits into 2 bytes, then the Type or Length field is
set to `253` and the number is encoded in the next following 2 bytes in
network byte order, i.e., from the most significant byte (MSB) to the
least significant byte (LSB). If the number is greater than 2 bytes and
fits into 4 bytes, then the Type or Length field is set to `254` and the
number is encoded in the subsequent 4 bytes in network byte order. For
larger numbers, the Type or Length field is set to `255` and the number
is encoded in the subsequent 8 bytes in network byte
order.[¶](#section-5.1-2){.pilcrow}

In this specification, compressed NDN TLVs encode Type and Length fields
using self-delimiting numeric values (SDNVs)
\[[RFC6256](#RFC6256){.xref}\] commonly known from Delay-Tolerant
Networking (DTN) protocols. Instead of using the first byte as a marker
for the number of following bytes, SDNVs use a single bit to indicate
subsequent bytes.[¶](#section-5.1-3){.pilcrow}

[]{#name-ndn-tlv-encoding-compared-t}

::: {#tab.sdnvperformance}
  Value       NDN TLV Encoding                               SDNV Encoding
  ----------- ---------------------------------------------- -------------------------------
  0           0x00                                           0x00
  127         0x7F                                           0x7F
  128         0x80                                           0x81 0x00
  253         0xFD 0x00 0xFD                                 0x81 0x7D
  2^14^ - 1   0xFD 0x3F 0xFF                                 0xFF 0x7F
  2^14^       0xFD 0x40 0x00                                 0x81 0x80 0x00
  2^16^       0xFE 0x00 0x01 0x00 0x00                       0x84 0x80 0x00
  2^21^ - 1   0xFE 0x00 0x1F 0xFF 0xFF                       0xFF 0xFF 0x7F
  2^21^       0xFE 0x00 0x20 0x00 0x00                       0x81 0x80 0x80 0x00
  2^28^ - 1   0xFE 0x0F 0xFF 0xFF 0xFF                       0xFF 0xFF 0xFF 0x7F
  2^28^       0xFE 0x1F 0x00 0x00 0x00                       0x81 0x80 0x80 0x80 0x00
  2^32^       0xFF 0x00 0x00 0x00 0x01 0x00 0x00 0x00 0x00   0x90 0x80 0x80 0x80 0x00
  2^35^ - 1   0xFF 0x00 0x00 0x00 0x07 0xFF 0xFF 0xFF 0xFF   0xFF 0xFF 0xFF 0xFF 0x7F
  2^35^       0xFF 0x00 0x00 0x00 0x08 0x00 0x00 0x00 0x00   0x81 0x80 0x80 0x80 0x80 0x00

  : [Table 1](#table-1){.selfRef}: [NDN TLV Encoding Compared to
  SDNVs](#name-ndn-tlv-encoding-compared-t){.selfRef}
:::

[Table 1](#tab.sdnvperformance){.xref} compares the required bytes for
encoding a few selected values using the NDN TLV encoding and SDNVs. For
values up to 127, both methods require a single byte. Values in the
range (128\...252) encode as one byte for the NDN TLV scheme, while
SDNVs require two bytes. Starting at value 253, SDNVs require a less or
equal amount of bytes compared to the NDN TLV
encoding.[¶](#section-5.1-5){.pilcrow}
:::
:::

::: {#sec.ndn.namecompression}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [Name TLV Compression](#name-name-tlv-compression){.section-name .selfRef} {#name-name-tlv-compression}

This Name TLV compression encodes Length fields of two consecutive
NameComponent TLVs into one byte, using a nibble for each. The most
significant nibble indicates the length of an immediately following
NameComponent TLV. The least significant nibble denotes the length of a
subsequent NameComponent TLV. A length of 0 marks the end of the
compressed Name TLV. The last Length field of an encoded NameComponent
is either 0x00 for a name with an even number of components and 0xYF (Y
\> 0) if an odd number of components are present. This process limits
the length of a NameComponent TLV to 15 bytes but allows for an
unlimited number of components. An example for this encoding is
presented in [Figure
10](#fig.ndnshortnco){.xref}.[¶](#section-5.2-1){.pilcrow}

[]{#name-name-tlv-compression-for-ha}

::: {#fig.ndnshortnco}
::: {#section-5.2-2.1 .alignCenter .art-text .artwork}
                    Name: /HAW/Room/481/Humid/99

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |0 0 1 1|0 1 0 0|       H       |       A       |       W       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       R       |       o       |       o       |       m       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |0 0 1 1|0 1 0 1|       4       |       8       |       1       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       H       |       u       |       m       |       i       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       d       |0 0 1 0|0 0 0 0|       9       |       9       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 10](#figure-10){.selfRef}: [Name TLV Compression for
/HAW/Room/481/Humid/99](#name-name-tlv-compression-for-ha){.selfRef}
:::
:::
:::

::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Interest Messages](#name-interest-messages){.section-name .selfRef} {#name-interest-messages}

::: {#section-5.3.1 .section}
#### [5.3.1.](#section-5.3.1){.section-number .selfRef} [Uncompressed Interest Messages](#name-uncompressed-interest-messa){.section-name .selfRef} {#name-uncompressed-interest-messa}

An uncompressed Interest message uses the base dispatch format (see
[Figure 4](#fig.disp.base){.xref}) and sets the C, P, and M flags to `0`
([Figure 11](#fig.ndn.int.uncompr){.xref}). The Interest message is
handed to the NDN stack without
modifications.[¶](#section-5.3.1-1){.pilcrow}

[]{#name-dispatch-format-for-uncompr}

::: {#fig.ndn.int.uncompr}
::: {#section-5.3.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
    +---+---+---+---+---+---+---+---+
:::

[Figure 11](#figure-11){.selfRef}: [Dispatch Format for Uncompressed NDN
Interest Messages](#name-dispatch-format-for-uncompr){.selfRef}
:::
:::

::: {#section-5.3.2 .section}
#### [5.3.2.](#section-5.3.2){.section-number .selfRef} [Compressed Interest Messages](#name-compressed-interest-message){.section-name .selfRef} {#name-compressed-interest-message}

The compressed Interest message uses the extended dispatch format
([Figure 5](#fig.disp.base.compr){.xref}) and sets the C flag to `1` and
the P and M flags to `0`. If an Interest message contains TLVs that are
not mentioned in the following compression rules, then this message
[MUST]{.bcp14} be sent uncompressed.[¶](#section-5.3.2-1){.pilcrow}

This specification assumes that a HopLimit TLV is part of the original
Interest message. If such a HopLimit TLV is not present, it will be
inserted with a default value of DEFAULT_NDN_HOPLIMIT prior to the
compression.[¶](#section-5.3.2-2){.pilcrow}

In the default use case, the Interest message is compressed with the
following minimal rule set:[¶](#section-5.3.2-3){.pilcrow}

1.  [The `Type` field of the outermost MessageType TLV is
    removed.[¶](#section-5.3.2-4.1){.pilcrow}]{#section-5.3.2-4.1}
2.  [The Name TLV is compressed according to [Section
    5.2](#sec.ndn.namecompression){.xref}. For this, all NameComponents
    are expected to be of type GenericNameComponent with a length
    greater than 0. An ImplicitSha256DigestComponent or
    ParametersSha256DigestComponent [MAY]{.bcp14} appear at the end of
    the name. In any other case, the message [MUST]{.bcp14} be sent
    uncompressed.[¶](#section-5.3.2-4.2){.pilcrow}]{#section-5.3.2-4.2}
3.  [The Nonce TLV and InterestLifetime TLV are moved to the end of the
    compressed Interest, as illustrated in [Figure
    12](#fig.ndn.int.newformat){.xref}. The InterestLifetime is encoded
    as described in [Section 7](#sec.compressedtime){.xref}. On
    decompression, this encoding may yield an InterestLifetime that is
    smaller than the original
    value.[¶](#section-5.3.2-4.3){.pilcrow}]{#section-5.3.2-4.3}
4.  [The Type and Length fields of Nonce TLV, HopLimit TLV, and
    InterestLifetime TLV are elided. The Nonce value has a length of 4
    bytes, and the HopLimit value has a length of 1 byte. The compressed
    InterestLifetime ([Section 7](#sec.compressedtime){.xref}) has a
    length of 1 byte. The presence of a Nonce TLV and InterestLifetime
    TLV is deduced from the remaining length to parse. A remaining
    length of `1` indicates the presence of an InterestLifetime, a
    length of `4` indicates the presence of a nonce, and a length of `5`
    indicates the presence of both
    TLVs.[¶](#section-5.3.2-4.4){.pilcrow}]{#section-5.3.2-4.4}

The compressed NDN LoWPAN Interest message is visualized in [Figure
12](#fig.ndn.int.newformat){.xref}.[¶](#section-5.3.2-5){.pilcrow}

[]{#name-compression-of-ndn-lowpan-i}

::: {#fig.ndn.int.newformat}
::: {#section-5.3.2-6.1 .alignCenter .art-text .artwork}
    T = Type, L = Length, V = Value
    Lc = Compressed Length, Vc = Compressed Value
    : = optional field, | = mandatory field

    +---------+---------+                 +---------+
    |  Msg T  |  Msg L  |                 |  Msg Lc |
    +---------+---------+---------+       +---------+
    | Name T  | Name L  | Name V  |       | Name Vc |
    +---------+---------+---------+       +---------+---------+
    : CBPfx T : CBPfx L :                 : FWDH Lc : FWDH Vc :
    +---------+---------+                 +---------+---------+
    : MBFr T  : MBFr L  :                 |  HPL V  |
    +---------+---------+---------+  ==>  +---------+---------+
    : FWDH T  : FWDH L  : FWDH V  :       :  APM Lc : APM Vc  :
    +---------+---------+---------+       +---------+---------+
    : NONCE T : NONCE L : NONCE V :       : NONCE V :
    +---------+---------+---------+       +---------+
    :  ILT T  :  ILT L  :  ILT V  :       :  ILT Vc :
    +---------+---------+---------+       +---------+
    :  HPL T  :  HPL L  :  HPL V  :
    +---------+---------+---------+
    :  APM T  :  APM L  :  APM V  :
    +---------+---------+---------+
:::

[Figure 12](#figure-12){.selfRef}: [Compression of NDN LoWPAN Interest
Message](#name-compression-of-ndn-lowpan-i){.selfRef}
:::

Further TLV compression is indicated by the ICN LoWPAN dispatch in
[Figure 13](#fig.ndn.intcompr){.xref}.[¶](#section-5.3.2-7){.pilcrow}

[]{#name-dispatch-format-for-compres}

::: {#fig.ndn.intcompr}
::: {#section-5.3.2-8.1 .alignCenter .art-text .artwork}
      0                                       1
      0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | 0 | 0 | 0 | 1 |PFX|FRE|FWD|APM|DIG|        RSV        |CID|EXT|
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
:::

[Figure 13](#figure-13){.selfRef}: [Dispatch Format for Compressed NDN
Interest Messages](#name-dispatch-format-for-compres){.selfRef}
:::

[]{.break}

PFX: CanBePrefix TLV
:   []{.break}

    0:
    :   The uncompressed message does not include a CanBePrefix
        TLV.[¶](#section-5.3.2-9.2.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include a CanBePrefix TLV and is
        removed from the compressed
        message.[¶](#section-5.3.2-9.2.1.4){.pilcrow}
    :   
:   

FRE: MustBeFresh TLV
:   []{.break}

    0:
    :   The uncompressed message does not include a MustBeFresh
        TLV.[¶](#section-5.3.2-9.4.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include a MustBeFresh TLV and is
        removed from the compressed
        message.[¶](#section-5.3.2-9.4.1.4){.pilcrow}
    :   
:   

FWD: ForwardingHint TLV
:   []{.break}

    0:
    :   The uncompressed message does not include a ForwardingHint
        TLV.[¶](#section-5.3.2-9.6.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include a ForwardingHint TLV. The
        Type field is removed from the compressed message. Further, all
        link delegation types and link preference types are removed. All
        included names are compressed according to [Section
        5.2](#sec.ndn.namecompression){.xref}. If any name is not
        compressible, the message [MUST]{.bcp14} be sent
        uncompressed.[¶](#section-5.3.2-9.6.1.4){.pilcrow}
    :   
:   

APM: ApplicationParameters TLV
:   []{.break}

    0:
    :   The uncompressed message does not include an
        ApplicationParameters TLV.[¶](#section-5.3.2-9.8.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include an ApplicationParameters
        TLV. The Type field is removed from the compressed
        message.[¶](#section-5.3.2-9.8.1.4){.pilcrow}
    :   
:   

DIG: ImplicitSha256DigestComponent TLV
:   []{.break}

    0:
    :   The name does not include an ImplicitSha256DigestComponent as
        the last TLV.[¶](#section-5.3.2-9.10.1.2){.pilcrow}
    :   

    1:
    :   The name does include an ImplicitSha256DigestComponent as the
        last TLV. The Type and Length fields are
        omitted.[¶](#section-5.3.2-9.10.1.4){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-5.3.2-9.12){.pilcrow}
:   

CID: Context Identifier
:   See [Figure
    5](#fig.disp.base.compr){.xref}.[¶](#section-5.3.2-9.14){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-5.3.2-9.16.1.2){.pilcrow}
    :   

    1:
    :   Extension byte `EXT_0` follows immediately. See [Section
        5.3.3](#sec.ndn.interest.ext0){.xref}.[¶](#section-5.3.2-9.16.1.4){.pilcrow}
    :   
:   
:::

::: {#sec.ndn.interest.ext0}
::: {#section-5.3.3 .section}
#### [5.3.3.](#section-5.3.3){.section-number .selfRef} [Dispatch Extension](#name-dispatch-extension){.section-name .selfRef} {#name-dispatch-extension}

The `EXT_0` byte follows the description in [Section
4.1.1](#sec.dispatch.ext){.xref} and is illustrated in [Figure
14](#fig.ndn.interest.ext0){.xref}.[¶](#section-5.3.3-1){.pilcrow}

[]{#name-ext_0-format}

::: {#fig.ndn.interest.ext0}
::: {#section-5.3.3-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    |  NCS  |        RSV        |EXT|
    +---+---+---+---+---+---+---+---+
:::

[Figure 14](#figure-14){.selfRef}: [EXT_0
Format](#name-ext_0-format){.selfRef}
:::

[]{.break}

NCS: Name Compression Strategy
:   []{.break}

    00:
    :   Names are compressed with the default name compression strategy
        (see [Section
        5.2](#sec.ndn.namecompression){.xref}).[¶](#section-5.3.3-3.2.1.2){.pilcrow}
    :   

    01:
    :   Reserved.[¶](#section-5.3.3-3.2.1.4){.pilcrow}
    :   

    10:
    :   Reserved.[¶](#section-5.3.3-3.2.1.6){.pilcrow}
    :   

    11:
    :   Reserved.[¶](#section-5.3.3-3.2.1.8){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-5.3.3-3.4){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-5.3.3-3.6.1.2){.pilcrow}
    :   

    1:
    :   A further extension byte follows
        immediately.[¶](#section-5.3.3-3.6.1.4){.pilcrow}
    :   
:   
:::
:::
:::

::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [Data Messages](#name-data-messages){.section-name .selfRef} {#name-data-messages}

::: {#section-5.4.1 .section}
#### [5.4.1.](#section-5.4.1){.section-number .selfRef} [Uncompressed Data Messages](#name-uncompressed-data-messages){.section-name .selfRef} {#name-uncompressed-data-messages}

An uncompressed Data message uses the base dispatch format and sets the
C and P flags to `0` and the M flag to `1` ([Figure
15](#fig.ndn.data.uncompr){.xref}). The Data message is handed to the
NDN stack without modifications.[¶](#section-5.4.1-1){.pilcrow}

[]{#name-dispatch-format-for-uncompre}

::: {#fig.ndn.data.uncompr}
::: {#section-5.4.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 |
    +---+---+---+---+---+---+---+---+
:::

[Figure 15](#figure-15){.selfRef}: [Dispatch Format for Uncompressed NDN
Data Messages](#name-dispatch-format-for-uncompre){.selfRef}
:::
:::

::: {#section-5.4.2 .section}
#### [5.4.2.](#section-5.4.2){.section-number .selfRef} [Compressed Data Messages](#name-compressed-data-messages){.section-name .selfRef} {#name-compressed-data-messages}

The compressed Data message uses the extended dispatch format ([Figure
5](#fig.disp.base.compr){.xref}) and sets the C and M flags to `1`. The
P flag is set to `0`. If a Data message contains TLVs that are not
mentioned in the following compression rules, then this message
[MUST]{.bcp14} be sent uncompressed.[¶](#section-5.4.2-1){.pilcrow}

By default, the Data message is compressed with the following base rule
set:[¶](#section-5.4.2-2){.pilcrow}

1.  [The `Type` field of the outermost MessageType TLV is
    removed.[¶](#section-5.4.2-3.1){.pilcrow}]{#section-5.4.2-3.1}
2.  [The Name TLV is compressed according to [Section
    5.2](#sec.ndn.namecompression){.xref}. For this, all NameComponents
    are expected to be of type GenericNameComponent and to have a length
    greater than 0. In any other case, the message [MUST]{.bcp14} be
    sent
    uncompressed.[¶](#section-5.4.2-3.2){.pilcrow}]{#section-5.4.2-3.2}
3.  [The MetaInfo TLV Type and Length fields are elided from the
    compressed Data
    message.[¶](#section-5.4.2-3.3){.pilcrow}]{#section-5.4.2-3.3}
4.  [The FreshnessPeriod TLV [MUST]{.bcp14} be moved to the end of the
    compressed Data message. Type and Length fields are elided, and the
    value is encoded as described in [Section
    7](#sec.compressedtime){.xref} as a 1-byte time-code. If the
    freshness period is not a valid time-value, then the message
    [MUST]{.bcp14} be sent uncompressed in order to preserve the
    security envelope of the Data message. The presence of a
    FreshnessPeriod TLV is deduced from the remaining one-byte length to
    parse.[¶](#section-5.4.2-3.4){.pilcrow}]{#section-5.4.2-3.4}
5.  [The Type fields of the SignatureInfo TLV, SignatureType TLV, and
    SignatureValue TLV are
    removed.[¶](#section-5.4.2-3.5){.pilcrow}]{#section-5.4.2-3.5}

The compressed NDN LoWPAN Data message is visualized in [Figure
16](#fig.ndn.data.newformat){.xref}.[¶](#section-5.4.2-4){.pilcrow}

[]{#name-compression-of-ndn-lowpan-d}

::: {#fig.ndn.data.newformat}
::: {#section-5.4.2-5.1 .alignCenter .art-text .artwork}
    T = Type, L = Length, V = Value
    Lc = Compressed Length, Vc = Compressed Value
    : = optional field, | = mandatory field

    +---------+---------+                 +---------+
    |  Msg T  |  Msg L  |                 |  Msg Lc |
    +---------+---------+---------+       +---------+
    | Name T  | Name L  | Name V  |       | Name Vc |
    +---------+---------+---------+       +---------+---------+
    : Meta T  : Meta L  :                 : CTyp Lc : CTyp V  :
    +---------+---------+---------+       +---------+---------+
    : CTyp T  : CTyp L  : CTyp V  :       : FBID V  :
    +---------+---------+---------+  ==>  +---------+---------+
    : FrPr T  : FrPr L  : FrPr V  :       : CONT Lc : CONT V  :
    +---------+---------+---------+       +---------+---------+
    : FBID T  : FBID L  : FBID V  :       |  Sig Lc |
    +---------+---------+---------+       +---------+---------+
    : CONT T  : CONT L  : CONT V  :       | SInf Lc | SInf Vc |
    +---------+---------+---------+       +---------+---------+
    |  Sig T  |  Sig L  |                 | SVal Lc | SVal Vc |
    +---------+---------+---------+       +---------+---------+
    | SInf T  | SInf L  | SInf V  |       : FrPr Vc :
    +---------+---------+---------+       +---------+
    | SVal T  | SVal L  | SVal V  |
    +---------+---------+---------+
:::

[Figure 16](#figure-16){.selfRef}: [Compression of NDN LoWPAN Data
Message](#name-compression-of-ndn-lowpan-d){.selfRef}
:::

Further TLV compression is indicated by the ICN LoWPAN dispatch in
[Figure 17](#fig.ndn.datacompr){.xref}.[¶](#section-5.4.2-6){.pilcrow}

[]{#name-dispatch-format-for-compress}

::: {#fig.ndn.datacompr}
::: {#section-5.4.2-7.1 .alignCenter .art-text .artwork}
      0                                       1
      0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | 0 | 0 | 1 | 1 |FBI|CON|KLO|            RSV            |CID|EXT|
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
:::

[Figure 17](#figure-17){.selfRef}: [Dispatch Format for Compressed NDN
Data Messages](#name-dispatch-format-for-compress){.selfRef}
:::

[]{.break}

FBI: FinalBlockId TLV
:   []{.break}

    0:
    :   The uncompressed message does not include a FinalBlockId
        TLV.[¶](#section-5.4.2-8.2.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include a FinalBlockId, and it is
        encoded according to [Section
        5.2](#sec.ndn.namecompression){.xref}. If the FinalBlockId TLV
        is not compressible, then the message [MUST]{.bcp14} be sent
        uncompressed.[¶](#section-5.4.2-8.2.1.4){.pilcrow}
    :   
:   

CON: ContentType TLV
:   []{.break}

    0:
    :   The uncompressed message does not include a ContentType
        TLV.[¶](#section-5.4.2-8.4.1.2){.pilcrow}
    :   

    1:
    :   The uncompressed message does include a ContentType TLV. The
        Type field is removed from the compressed
        message.[¶](#section-5.4.2-8.4.1.4){.pilcrow}
    :   
:   

KLO: KeyLocator TLV
:   []{.break}

    0:
    :   If the included SignatureType requires a KeyLocator TLV, then
        the KeyLocator represents a name and is compressed according to
        [Section 5.2](#sec.ndn.namecompression){.xref}. If the name is
        not compressible, then the message [MUST]{.bcp14} be sent
        uncompressed.[¶](#section-5.4.2-8.6.1.2){.pilcrow}
    :   

    1:
    :   If the included SignatureType requires a KeyLocator TLV, then
        the KeyLocator represents a KeyDigest. The Type field of this
        KeyDigest is removed.[¶](#section-5.4.2-8.6.1.4){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-5.4.2-8.8){.pilcrow}
:   

CID: Context Identifier
:   See [Figure
    5](#fig.disp.base.compr){.xref}.[¶](#section-5.4.2-8.10){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-5.4.2-8.12.1.2){.pilcrow}
    :   

    1:
    :   Extension byte `EXT_0` follows immediately. See [Section
        5.4.3](#sec.ndn.data.ext0){.xref}.[¶](#section-5.4.2-8.12.1.4){.pilcrow}
    :   
:   
:::

::: {#sec.ndn.data.ext0}
::: {#section-5.4.3 .section}
#### [5.4.3.](#section-5.4.3){.section-number .selfRef} [Dispatch Extension](#name-dispatch-extension-2){.section-name .selfRef} {#name-dispatch-extension-2}

The `EXT_0` byte follows the description in [Section
4.1.1](#sec.dispatch.ext){.xref} and is illustrated in [Figure
18](#fig.ndn.data.ext0){.xref}.[¶](#section-5.4.3-1){.pilcrow}

[]{#name-ext_0-format-2}

::: {#fig.ndn.data.ext0}
::: {#section-5.4.3-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    |  NCS  |        RSV        |EXT|
    +---+---+---+---+---+---+---+---+
:::

[Figure 18](#figure-18){.selfRef}: [EXT_0
Format](#name-ext_0-format-2){.selfRef}
:::

[]{.break}

NCS: Name Compression Strategy
:   []{.break}

    00:
    :   Names are compressed with the default name compression strategy
        (see [Section
        5.2](#sec.ndn.namecompression){.xref}).[¶](#section-5.4.3-3.2.1.2){.pilcrow}
    :   

    01:
    :   Reserved.[¶](#section-5.4.3-3.2.1.4){.pilcrow}
    :   

    10:
    :   Reserved.[¶](#section-5.4.3-3.2.1.6){.pilcrow}
    :   

    11:
    :   Reserved.[¶](#section-5.4.3-3.2.1.8){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-5.4.3-3.4){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-5.4.3-3.6.1.2){.pilcrow}
    :   

    1:
    :   A further extension byte follows
        immediately.[¶](#section-5.4.3-3.6.1.4){.pilcrow}
    :   
:   
:::
:::
:::
:::
:::

::: {#sec.ccnx}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Space-Efficient Message Encoding for CCNx](#name-space-efficient-message-enco){.section-name .selfRef} {#name-space-efficient-message-enco}

::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [TLV Encoding](#name-tlv-encoding-2){.section-name .selfRef} {#name-tlv-encoding-2}

The generic CCNx TLV encoding is described in
\[[RFC8609](#RFC8609){.xref}\]. Type and Length fields attain the common
fixed length of 2 bytes.[¶](#section-6.1-1){.pilcrow}

The TLV encoding for CCNx LoWPAN is changed to the more space-efficient
encoding described in [Section 5.1](#sec.tlvencoding){.xref}. Hence, NDN
and CCNx use the same compressed format for writing
TLVs.[¶](#section-6.1-2){.pilcrow}
:::

::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Name TLV Compression](#name-name-tlv-compression-2){.section-name .selfRef} {#name-name-tlv-compression-2}

Name TLVs are compressed using the scheme already defined in [Section
5.2](#sec.ndn.namecompression){.xref} for NDN. If a Name TLV contains
T_IPID, T_APP, or organizational TLVs, then the name remains
uncompressed.[¶](#section-6.2-1){.pilcrow}
:::

::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [Interest Messages](#name-interest-messages-2){.section-name .selfRef} {#name-interest-messages-2}

::: {#section-6.3.1 .section}
#### [6.3.1.](#section-6.3.1){.section-number .selfRef} [Uncompressed Interest Messages](#name-uncompressed-interest-messag){.section-name .selfRef} {#name-uncompressed-interest-messag}

An uncompressed Interest message uses the base dispatch format (see
[Figure 4](#fig.disp.base){.xref}) and sets the C and M flags to `0`.
The P flag is set to `1` ([Figure 19](#fig.ccnx.int.uncompr){.xref}).
The Interest message is handed to the CCNx stack without
modifications.[¶](#section-6.3.1-1){.pilcrow}

[]{#name-dispatch-format-for-uncompres}

::: {#fig.ccnx.int.uncompr}
::: {#section-6.3.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |
    +---+---+---+---+---+---+---+---+
:::

[Figure 19](#figure-19){.selfRef}: [Dispatch Format for Uncompressed
CCNx Interest Messages](#name-dispatch-format-for-uncompres){.selfRef}
:::
:::

::: {#sec.ccnxintcompbaseheader}
::: {#section-6.3.2 .section}
#### [6.3.2.](#section-6.3.2){.section-number .selfRef} [Compressed Interest Messages](#name-compressed-interest-messages){.section-name .selfRef} {#name-compressed-interest-messages}

The compressed Interest message uses the extended dispatch format
([Figure 5](#fig.disp.base.compr){.xref}) and sets the C and P flags to
`1`. The M flag is set to `0`. If an Interest message contains TLVs that
are not mentioned in the following compression rules, then this message
[MUST]{.bcp14} be sent uncompressed.[¶](#section-6.3.2-1){.pilcrow}

In the default use case, the Interest message is compressed with the
following minimal rule set:[¶](#section-6.3.2-2){.pilcrow}

1.  [The version is elided from the fixed header and assumed to be
    1.[¶](#section-6.3.2-3.1){.pilcrow}]{#section-6.3.2-3.1}
2.  [The Type and Length fields of the CCNx Message TLV are elided and
    are obtained from the fixed header on
    decompression.[¶](#section-6.3.2-3.2){.pilcrow}]{#section-6.3.2-3.2}

The compressed CCNx LoWPAN Interest message is visualized in [Figure
20](#fig.ccnx.int.newformat){.xref}.[¶](#section-6.3.2-4){.pilcrow}

[]{#name-compression-of-ccnx-lowpan-}

::: {#fig.ccnx.int.newformat}
::: {#section-6.3.2-5.1 .alignCenter .art-text .artwork}
    T = Type, L = Length, V = Value
    Lc = Compressed Length, Vc = Compressed Value
    : = optional field, | = mandatory field

    +-----------------------------+           +-------------------------+
    |    Uncompr. Fixed Header    |           |   Compr. Fixed Header   |
    +-----------------------------+           +-------------------------+
    +---------+---------+---------+           +---------+
    : ILT T   : ILT L   : ILT V   :           : ILT Vc  :
    +---------+---------+---------+           +---------+
    : MSGH T  : MSGH L  : MSGH V  :           : MSGH Vc :
    +---------+---------+---------+           +---------+
    +---------+---------+                     +---------+
    | MSGT T  | MSGT L  |                     | Name Vc |
    +---------+---------+---------+           +---------+
    | Name T  | Name L  | Name V  |    ==>    : KIDR Vc :
    +---------+---------+---------+           +---------+
    : KIDR T  : KIDR L  : KIDR V  :           : OBHR Vc :
    +---------+---------+---------+           +---------+---------+
    : OBHR T  : OBHR L  : OBHR V  :           : PAYL Lc : PAYL V  :
    +---------+---------+---------+           +---------+---------+
    : PAYL T  : PAYL L  : PAYL V  :           : VALG Lc : VALG Vc :
    +---------+---------+---------+           +---------+---------+
    : VALG T  : VALG L  : VALG V  :           : VPAY Lc : VPAY V  :
    +---------+---------+---------+           +---------+---------+
    : VPAY T  : VPAY L  : VPAY V  :
    +---------+---------+---------+
:::

[Figure 20](#figure-20){.selfRef}: [Compression of CCNx LoWPAN Interest
Message](#name-compression-of-ccnx-lowpan-){.selfRef}
:::

Further TLV compression is indicated by the ICN LoWPAN dispatch in
[Figure 21](#fig.ccnx.intcompr){.xref}.[¶](#section-6.3.2-6){.pilcrow}

[]{#name-dispatch-format-for-compresse}

::: {#fig.ccnx.intcompr}
::: {#section-6.3.2-7.1 .alignCenter .art-text .artwork}
      0                                       1
      0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | 0 | 1 | 0 | 1 |FLG|PTY|HPL|FRS|PAY|ILT|MGH|KIR|CHR|VAL|CID|EXT|
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
:::

[Figure 21](#figure-21){.selfRef}: [Dispatch Format for Compressed CCNx
Interest Messages](#name-dispatch-format-for-compresse){.selfRef}
:::

[]{.break}

FLG: Flags field in the fixed header
:   []{.break}

    0:
    :   The Flags field equals 0 and is removed from the Interest
        message.[¶](#section-6.3.2-8.2.1.2){.pilcrow}
    :   

    1:
    :   The Flags field appears in the fixed
        header.[¶](#section-6.3.2-8.2.1.4){.pilcrow}
    :   
:   

PTY: PacketType field in the fixed header
:   []{.break}

    0:
    :   The PacketType field is elided and assumed to be
        `PT_INTEREST`.[¶](#section-6.3.2-8.4.1.2){.pilcrow}
    :   

    1:
    :   The PacketType field is elided and assumed to be
        `PT_RETURN`.[¶](#section-6.3.2-8.4.1.4){.pilcrow}
    :   
:   

HPL: HopLimit field in the fixed header
:   []{.break}

    0:
    :   The HopLimit field appears in the fixed
        header.[¶](#section-6.3.2-8.6.1.2){.pilcrow}
    :   

    1:
    :   The HopLimit field is elided and assumed to be
        `1`.[¶](#section-6.3.2-8.6.1.4){.pilcrow}
    :   
:   

FRS: Reserved field in the fixed header
:   []{.break}

    0:
    :   The Reserved field appears in the fixed
        header.[¶](#section-6.3.2-8.8.1.2){.pilcrow}
    :   

    1:
    :   The Reserved field is elided and assumed to be
        `0`.[¶](#section-6.3.2-8.8.1.4){.pilcrow}
    :   
:   

PAY: Optional Payload TLV
:   []{.break}

    0:
    :   The Payload TLV is absent.[¶](#section-6.3.2-8.10.1.2){.pilcrow}
    :   

    1:
    :   The Payload TLV is present, and the Type field is
        elided.[¶](#section-6.3.2-8.10.1.4){.pilcrow}
    :   
:   

ILT: Optional hop-by-hop InterestLifetime TLV

:   See [Section 6.3.2.1](#sec.ccnxhbhint){.xref} for further details on
    the ordering of hop-by-hop TLVs.[¶](#section-6.3.2-8.12.1){.pilcrow}

    []{.break}

    0:
    :   No InterestLifetime TLV is present in the Interest
        message.[¶](#section-6.3.2-8.12.2.2){.pilcrow}
    :   

    1:
    :   An InterestLifetime TLV is present with a fixed length of 1 byte
        and is encoded as described in [Section
        7](#sec.compressedtime){.xref}. The Type and Length fields are
        elided.[¶](#section-6.3.2-8.12.2.4){.pilcrow}
    :   

:   

MGH: Optional hop-by-hop MessageHash TLV

:   See [Section 6.3.2.1](#sec.ccnxhbhint){.xref} for further details on
    the ordering of hop-by-hop TLVs.[¶](#section-6.3.2-8.14.1){.pilcrow}

    This TLV is expected to contain a T_SHA-256 TLV. If another hash is
    contained, then the Interest [MUST]{.bcp14} be sent
    uncompressed.[¶](#section-6.3.2-8.14.2){.pilcrow}

    []{.break}

    0:
    :   The MessageHash TLV is
        absent.[¶](#section-6.3.2-8.14.3.2){.pilcrow}
    :   

    1:
    :   A T_SHA-256 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 32 bytes. The
        outer Message Hash TLV is
        omitted.[¶](#section-6.3.2-8.14.3.4){.pilcrow}
    :   

:   

KIR: Optional KeyIdRestriction TLV

:   This TLV is expected to contain a T_SHA-256 TLV. If another hash is
    contained, then the Interest [MUST]{.bcp14} be sent
    uncompressed.[¶](#section-6.3.2-8.16.1){.pilcrow}

    []{.break}

    0:
    :   The KeyIdRestriction TLV is
        absent.[¶](#section-6.3.2-8.16.2.2){.pilcrow}
    :   

    1:
    :   A T_SHA-256 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 32 bytes. The
        outer KeyIdRestriction TLV is
        omitted.[¶](#section-6.3.2-8.16.2.4){.pilcrow}
    :   

:   

CHR: Optional ContentObjectHashRestriction TLV

:   This TLV is expected to contain a T_SHA-256 TLV. If another hash is
    contained, then the Interest [MUST]{.bcp14} be sent
    uncompressed.[¶](#section-6.3.2-8.18.1){.pilcrow}

    []{.break}

    0:
    :   The ContentObjectHashRestriction TLV is
        absent.[¶](#section-6.3.2-8.18.2.2){.pilcrow}
    :   

    1:
    :   A T_SHA-256 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 32 bytes. The
        outer ContentObjectHashRestriction TLV is
        omitted.[¶](#section-6.3.2-8.18.2.4){.pilcrow}
    :   

:   

VAL: Optional ValidationAlgorithm and ValidationPayload TLVs
:   []{.break}

    0:
    :   No validation-related TLVs are present in the Interest
        message.[¶](#section-6.3.2-8.20.1.2){.pilcrow}
    :   

    1:
    :   Validation-related TLVs are present in the Interest message. An
        additional byte follows immediately that handles
        validation-related TLV compressions and is described in [Section
        6.3.2.2](#sec.ccnx.intval){.xref}.[¶](#section-6.3.2-8.20.1.4){.pilcrow}
    :   
:   

CID: Context Identifier

:   See [Figure
    5](#fig.disp.base.compr){.xref}.[¶](#section-6.3.2-8.22.1){.pilcrow}

:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-6.3.2-8.24.1.2){.pilcrow}
    :   

    1:
    :   Extension byte `EXT_0` follows immediately. See [Section
        6.3.3](#sec.ccnx.interest.ext0){.xref}.[¶](#section-6.3.2-8.24.1.4){.pilcrow}
    :   
:   

::: {#sec.ccnxhbhint}
::: {#section-6.3.2.1 .section}
##### [6.3.2.1.](#section-6.3.2.1){.section-number .selfRef} [Hop-By-Hop Header TLVs Compression](#name-hop-by-hop-header-tlvs-comp){.section-name .selfRef} {#name-hop-by-hop-header-tlvs-comp}

Hop-by-hop header TLVs are unordered. For an Interest message, two
optional hop-by-hop header TLVs are defined in
\[[RFC8609](#RFC8609){.xref}\], but several more can be defined in
higher-level specifications. For the compression specified in the
previous section, the hop-by-hop TLVs are ordered as
follows:[¶](#section-6.3.2.1-1){.pilcrow}

1.  [InterestLifetime
    TLV[¶](#section-6.3.2.1-2.1){.pilcrow}]{#section-6.3.2.1-2.1}
2.  [Message Hash
    TLV[¶](#section-6.3.2.1-2.2){.pilcrow}]{#section-6.3.2.1-2.2}

Note: All hop-by-hop header TLVs other than the InterestLifetime and
MessageHash TLVs remain uncompressed in the encoded message, and they
appear after the InterestLifetime and MessageHash TLVs in the same order
as in the original message.[¶](#section-6.3.2.1-3){.pilcrow}
:::
:::

::: {#sec.ccnx.intval}
::: {#section-6.3.2.2 .section}
##### [6.3.2.2.](#section-6.3.2.2){.section-number .selfRef} [Validation](#name-validation){.section-name .selfRef} {#name-validation}

[]{#name-dispatch-for-interest-valid}

::: {#fig.ccnx.dispatchintval}
::: {#section-6.3.2.2-1.1 .alignCenter .art-text .artwork}
    0       1       2       3       4       5       6       7       8
    +-------+-------+-------+-------+-------+-------+-------+-------+
    |         ValidationAlg         |     KeyID     |      RSV      |
    +-------+-------+-------+-------+-------+-------+-------+-------+
:::

[Figure 22](#figure-22){.selfRef}: [Dispatch for Interest
Validations](#name-dispatch-for-interest-valid){.selfRef}
:::

[]{.break}

ValidationAlg: Optional ValidationAlgorithm TLV
:   []{.break}

    0000:
    :   An uncompressed ValidationAlgorithm TLV is
        included.[¶](#section-6.3.2.2-2.2.1.2){.pilcrow}
    :   

    0001:
    :   A T_CRC32C ValidationAlgorithm TLV is assumed, but no
        ValidationAlgorithm TLV is
        included.[¶](#section-6.3.2.2-2.2.1.4){.pilcrow}
    :   

    0010:
    :   A T_CRC32C ValidationAlgorithm TLV is assumed, but no
        ValidationAlgorithm TLV is included. Additionally, a
        SignatureTime TLV is inlined without a Type and a Length
        field.[¶](#section-6.3.2.2-2.2.1.6){.pilcrow}
    :   

    0011:
    :   A T_HMAC-SHA256 ValidationAlgorithm TLV is assumed, but no
        ValidationAlgorithm TLV is
        included.[¶](#section-6.3.2.2-2.2.1.8){.pilcrow}
    :   

    0100:
    :   A T_HMAC-SHA256 ValidationAlgorithm TLV is assumed, but no
        ValidationAlgorithm TLV is included. Additionally, a
        SignatureTime TLV is inlined without a Type and a Length
        field.[¶](#section-6.3.2.2-2.2.1.10){.pilcrow}
    :   

    0101:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.12){.pilcrow}
    :   

    0110:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.14){.pilcrow}
    :   

    0111:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.16){.pilcrow}
    :   

    1000:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.18){.pilcrow}
    :   

    1001:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.20){.pilcrow}
    :   

    1010:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.22){.pilcrow}
    :   

    1011:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.24){.pilcrow}
    :   

    1100:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.26){.pilcrow}
    :   

    1101:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.28){.pilcrow}
    :   

    1110:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.30){.pilcrow}
    :   

    1111:
    :   Reserved.[¶](#section-6.3.2.2-2.2.1.32){.pilcrow}
    :   
:   

KeyID: Optional KeyID TLV within the ValidationAlgorithm TLV
:   []{.break}

    00:
    :   The KeyID TLV is absent.[¶](#section-6.3.2.2-2.4.1.2){.pilcrow}
    :   

    01:
    :   The KeyID TLV is present and
        uncompressed.[¶](#section-6.3.2.2-2.4.1.4){.pilcrow}
    :   

    10:
    :   A T_SHA-256 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 32 bytes. The
        outer KeyID TLV is
        omitted.[¶](#section-6.3.2.2-2.4.1.6){.pilcrow}
    :   

    11:
    :   A T_SHA-512 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 64 bytes. The
        outer KeyID TLV is
        omitted.[¶](#section-6.3.2.2-2.4.1.8){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-6.3.2.2-2.6){.pilcrow}
:   

The ValidationPayload TLV is present if the ValidationAlgorithm TLV is
present. The Type field is omitted.[¶](#section-6.3.2.2-3){.pilcrow}
:::
:::
:::
:::

::: {#sec.ccnx.interest.ext0}
::: {#section-6.3.3 .section}
#### [6.3.3.](#section-6.3.3){.section-number .selfRef} [Dispatch Extension](#name-dispatch-extension-3){.section-name .selfRef} {#name-dispatch-extension-3}

The `EXT_0` byte follows the description in [Section
4.1.1](#sec.dispatch.ext){.xref} and is illustrated in [Figure
23](#fig.ccnx.interest.ext0){.xref}.[¶](#section-6.3.3-1){.pilcrow}

[]{#name-ext_0-format-3}

::: {#fig.ccnx.interest.ext0}
::: {#section-6.3.3-2.1 .alignCenter .art-text .artwork}
    0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    |  NCS  |        RSV        |EXT|
    +---+---+---+---+---+---+---+---+
:::

[Figure 23](#figure-23){.selfRef}: [EXT_0
Format](#name-ext_0-format-3){.selfRef}
:::

[]{.break}

NCS: Name Compression Strategy
:   []{.break}

    00:
    :   Names are compressed with the default name compression strategy
        (see [Section
        5.2](#sec.ndn.namecompression){.xref}).[¶](#section-6.3.3-3.2.1.2){.pilcrow}
    :   

    01:
    :   Reserved.[¶](#section-6.3.3-3.2.1.4){.pilcrow}
    :   

    10:
    :   Reserved.[¶](#section-6.3.3-3.2.1.6){.pilcrow}
    :   

    11:
    :   Reserved.[¶](#section-6.3.3-3.2.1.8){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-6.3.3-3.4){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-6.3.3-3.6.1.2){.pilcrow}
    :   

    1:
    :   A further extension byte follows
        immediately.[¶](#section-6.3.3-3.6.1.4){.pilcrow}
    :   
:   
:::
:::
:::

::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Content Objects](#name-content-objects){.section-name .selfRef} {#name-content-objects}

::: {#section-6.4.1 .section}
#### [6.4.1.](#section-6.4.1){.section-number .selfRef} [Uncompressed Content Objects](#name-uncompressed-content-object){.section-name .selfRef} {#name-uncompressed-content-object}

An uncompressed Content Object uses the base dispatch format (see
[Figure 4](#fig.disp.base){.xref}) and sets the C flag to `0` and the P
and M flags to `1` ([Figure 24](#fig.ccnx.data.uncompr){.xref}). The
Content Object is handed to the CCNx stack without
modifications.[¶](#section-6.4.1-1){.pilcrow}

[]{#name-dispatch-format-for-uncompress}

::: {#fig.ccnx.data.uncompr}
::: {#section-6.4.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | 0 | 1 | 1 | 0 | 0 | 0 | 0 | 0 |
    +---+---+---+---+---+---+---+---+
:::

[Figure 24](#figure-24){.selfRef}: [Dispatch Format for Uncompressed
CCNx Content Objects](#name-dispatch-format-for-uncompress){.selfRef}
:::
:::

::: {#section-6.4.2 .section}
#### [6.4.2.](#section-6.4.2){.section-number .selfRef} [Compressed Content Objects](#name-compressed-content-objects){.section-name .selfRef} {#name-compressed-content-objects}

The compressed Content Object uses the extended dispatch format ([Figure
5](#fig.disp.base.compr){.xref}) and sets the C, P, and M flags to `1`.
If a Content Object contains TLVs that are not mentioned in the
following compression rules, then this message [MUST]{.bcp14} be sent
uncompressed.[¶](#section-6.4.2-1){.pilcrow}

By default, the Content Object is compressed with the following base
rule set:[¶](#section-6.4.2-2){.pilcrow}

1.  [The version is elided from the fixed header and assumed to be
    1.[¶](#section-6.4.2-3.1){.pilcrow}]{#section-6.4.2-3.1}
2.  [The PacketType field is elided from the fixed
    header.[¶](#section-6.4.2-3.2){.pilcrow}]{#section-6.4.2-3.2}
3.  [The Type and Length fields of the CCNx Message TLV are elided and
    are obtained from the fixed header on
    decompression.[¶](#section-6.4.2-3.3){.pilcrow}]{#section-6.4.2-3.3}

The compressed CCNx LoWPAN Data message is visualized in [Figure
25](#fig.ccnx.data.newformat){.xref}.[¶](#section-6.4.2-4){.pilcrow}

[]{#name-compression-of-ccnx-lowpan-d}

::: {#fig.ccnx.data.newformat}
::: {#section-6.4.2-5.1 .alignCenter .art-text .artwork}
    T = Type, L = Length, V = Value
    Lc = Compressed Length, Vc = Compressed Value
    : = optional field, | = mandatory field

    +-----------------------------+           +-------------------------+
    |    Uncompr. Fixed Header    |           |   Compr. Fixed Header   |
    +-----------------------------+           +-------------------------+
    +---------+---------+---------+           +---------+
    : RCT T   : RCT L   : RCT V   :           : RCT Vc  :
    +---------+---------+------.--+           +---------+
    : MSGH T  : MSGH L  : MSGH V  :           : MSGH Vc :
    +---------+---------+---------+           +---------+
    +---------+---------+                     +---------+
    | MSGT T  | MSGT L  |                     | Name Vc |
    +---------+---------+---------+           +---------+
    | Name T  | Name L  | Name V  |    ==>    : EXPT Vc :
    +---------+---------+---------+           +---------+---------+
    : PTYP T  : PTYP L  : PTYP V  :           : PAYL Lc : PAYL V  :
    +---------+---------+---------+           +---------+---------+
    : EXPT T  : EXPT L  : EXPT V  :           : VALG Lc : VALG Vc :
    +---------+---------+---------+           +---------+---------+
    : PAYL T  : PAYL L  : PAYL V  :           : VPAY Lc : VPAY V  :
    +---------+---------+---------+           +---------+---------+
    : VALG T  : VALG L  : VALG V  :
    +---------+---------+---------+
    : VPAY T  : VPAY L  : VPAY V  :
    +---------+---------+---------+
:::

[Figure 25](#figure-25){.selfRef}: [Compression of CCNx LoWPAN Data
Message](#name-compression-of-ccnx-lowpan-d){.selfRef}
:::

Further TLV compression is indicated by the ICN LoWPAN dispatch in
[Figure 26](#fig.ccnx.datacompr){.xref}.[¶](#section-6.4.2-6){.pilcrow}

[]{#name-dispatch-format-for-compressed}

::: {#fig.ccnx.datacompr}
::: {#section-6.4.2-7.1 .alignCenter .art-text .artwork}
      0                                       1
      0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | 0 | 1 | 1 | 1 |FLG|FRS|PAY|RCT|MGH| PLTYP |EXP|VAL|RSV|CID|EXT|
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
:::

[Figure 26](#figure-26){.selfRef}: [Dispatch Format for Compressed CCNx
Content Objects](#name-dispatch-format-for-compressed){.selfRef}
:::

[]{.break}

FLG: Flags field in the fixed header
:   See [Section
    6.3.2](#sec.ccnxintcompbaseheader){.xref}.[¶](#section-6.4.2-8.2){.pilcrow}
:   

FRS: Reserved field in the fixed header
:   See [Section
    6.3.2](#sec.ccnxintcompbaseheader){.xref}.[¶](#section-6.4.2-8.4){.pilcrow}
:   

PAY: Optional Payload TLV
:   See [Section
    6.3.2](#sec.ccnxintcompbaseheader){.xref}.[¶](#section-6.4.2-8.6){.pilcrow}
:   

RCT: Optional hop-by-hop Recommended Cache Time TLV
:   []{.break}

    0:
    :   The Recommended Cache Time TLV is
        absent.[¶](#section-6.4.2-8.8.1.2){.pilcrow}
    :   

    1:
    :   The Recommended Cache Time TLV is present, and the Type and
        Length fields are elided.[¶](#section-6.4.2-8.8.1.4){.pilcrow}
    :   
:   

MGH: Optional hop-by-hop MessageHash TLV

:   See [Section 6.4.2.1](#sec.ccnxhbhdata){.xref} for further details
    on the ordering of hop-by-hop
    TLVs.[¶](#section-6.4.2-8.10.1){.pilcrow}

    This TLV is expected to contain a T_SHA-256 TLV. If another hash is
    contained, then the Content Object [MUST]{.bcp14} be sent
    uncompressed.[¶](#section-6.4.2-8.10.2){.pilcrow}

    []{.break}

    0:
    :   The MessageHash TLV is
        absent.[¶](#section-6.4.2-8.10.3.2){.pilcrow}
    :   

    1:
    :   A T_SHA-256 TLV is present, and the Type and Length fields are
        removed. The Length field is assumed to represent 32 bytes. The
        outer Message Hash TLV is
        omitted.[¶](#section-6.4.2-8.10.3.4){.pilcrow}
    :   

:   

PLTYP: Optional PayloadType TLV
:   []{.break}

    00:
    :   The PayloadType TLV is
        absent.[¶](#section-6.4.2-8.12.1.2){.pilcrow}
    :   

    01:
    :   The PayloadType TLV is absent, and T_PAYLOADTYPE_DATA is
        assumed.[¶](#section-6.4.2-8.12.1.4){.pilcrow}
    :   

    10:
    :   The PayloadType TLV is absent, and T_PAYLOADTYPE_KEY is
        assumed.[¶](#section-6.4.2-8.12.1.6){.pilcrow}
    :   

    11:
    :   The PayloadType TLV is present and
        uncompressed.[¶](#section-6.4.2-8.12.1.8){.pilcrow}
    :   
:   

EXP: Optional ExpiryTime TLV
:   []{.break}

    0:
    :   The ExpiryTime TLV is
        absent.[¶](#section-6.4.2-8.14.1.2){.pilcrow}
    :   

    1:
    :   The ExpiryTime TLV is present, and the Type and Length fields
        are elided.[¶](#section-6.4.2-8.14.1.4){.pilcrow}
    :   
:   

VAL: Optional ValidationAlgorithm and ValidationPayload TLVs
:   See [Section
    6.3.2](#sec.ccnxintcompbaseheader){.xref}.[¶](#section-6.4.2-8.16){.pilcrow}
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-6.4.2-8.18){.pilcrow}
:   

CID: Context Identifier
:   See [Figure
    5](#fig.disp.base.compr){.xref}.[¶](#section-6.4.2-8.20){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-6.4.2-8.22.1.2){.pilcrow}
    :   

    1:
    :   Extension byte `EXT_0` follows immediately. See [Section
        6.4.3](#sec.ccnx.data.ext0){.xref}.[¶](#section-6.4.2-8.22.1.4){.pilcrow}
    :   
:   

::: {#sec.ccnxhbhdata}
::: {#section-6.4.2.1 .section}
##### [6.4.2.1.](#section-6.4.2.1){.section-number .selfRef} [Hop-By-Hop Header TLVs Compression](#name-hop-by-hop-header-tlvs-compr){.section-name .selfRef} {#name-hop-by-hop-header-tlvs-compr}

Hop-by-hop header TLVs are unordered. For a Content Object message, two
optional hop-by-hop header TLVs are defined in
\[[RFC8609](#RFC8609){.xref}\], but several more can be defined in
higher-level specifications. For the compression specified in the
previous section, the hop-by-hop TLVs are ordered as
follows:[¶](#section-6.4.2.1-1){.pilcrow}

1.  [Recommended Cache Time
    TLV[¶](#section-6.4.2.1-2.1){.pilcrow}]{#section-6.4.2.1-2.1}
2.  [Message Hash
    TLV[¶](#section-6.4.2.1-2.2){.pilcrow}]{#section-6.4.2.1-2.2}

Note: All hop-by-hop header TLVs other than the RecommendedCacheTime and
MessageHash TLVs remain uncompressed in the encoded message, and they
appear after the RecommendedCacheTime and MessageHash TLVs in the same
order as in the original message.[¶](#section-6.4.2.1-3){.pilcrow}
:::
:::
:::

::: {#sec.ccnx.data.ext0}
::: {#section-6.4.3 .section}
#### [6.4.3.](#section-6.4.3){.section-number .selfRef} [Dispatch Extension](#name-dispatch-extension-4){.section-name .selfRef} {#name-dispatch-extension-4}

The `EXT_0` byte follows the description in [Section
4.1.1](#sec.dispatch.ext){.xref} and is illustrated in [Figure
27](#fig.ccnx.data.ext0){.xref}.[¶](#section-6.4.3-1){.pilcrow}

[]{#name-ext_0-format-4}

::: {#fig.ccnx.data.ext0}
::: {#section-6.4.3-2.1 .alignCenter .art-text .artwork}
    0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    |  NCS  |        RSV        |EXT|
    +---+---+---+---+---+---+---+---+
:::

[Figure 27](#figure-27){.selfRef}: [EXT_0
Format](#name-ext_0-format-4){.selfRef}
:::

[]{.break}

NCS: Name Compression Strategy
:   []{.break}

    00:
    :   Names are compressed with the default name compression strategy
        (see [Section
        5.2](#sec.ndn.namecompression){.xref}).[¶](#section-6.4.3-3.2.1.2){.pilcrow}
    :   

    01:
    :   Reserved.[¶](#section-6.4.3-3.2.1.4){.pilcrow}
    :   

    10:
    :   Reserved.[¶](#section-6.4.3-3.2.1.6){.pilcrow}
    :   

    11:
    :   Reserved.[¶](#section-6.4.3-3.2.1.8){.pilcrow}
    :   
:   

RSV: Reserved
:   Must be set to 0.[¶](#section-6.4.3-3.4){.pilcrow}
:   

EXT: Extension
:   []{.break}

    0:
    :   No extension byte follows.[¶](#section-6.4.3-3.6.1.2){.pilcrow}
    :   

    1:
    :   A further extension byte follows
        immediately.[¶](#section-6.4.3-3.6.1.4){.pilcrow}
    :   
:   
:::
:::
:::
:::
:::

::: {#sec.compressedtime}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Compressed Time Encoding](#name-compressed-time-encoding){.section-name .selfRef} {#name-compressed-time-encoding}

This document adopts the 8-bit compact time representation for relative
time-values described in [Section
5](https://www.rfc-editor.org/rfc/rfc5497#section-5){.relref} of
\[[RFC5497](#RFC5497){.xref}\] with the constant factor `C` set to
`C :=         1/32`.[¶](#section-7-1){.pilcrow}

Valid time offsets in CCNx and NDN range from a few milliseconds (e.g.,
lifetime of low-latency Interests) to several years (e.g., content
freshness periods in caches). Therefore, this document adds two
modifications to the compression algorithm.[¶](#section-7-2){.pilcrow}

The first modification is the inclusion of a subnormal form
\[[IEEE.754.2019](#IEEE.754.2019){.xref}\] for time-codes with exponent
0 to provide an increased precision and a gradual underflow for the
smallest numbers. The formula is changed as follows (a := mantissa, b :=
exponent):[¶](#section-7-3){.pilcrow}

[]{.break}

Subnormal (b == 0):
:   (0 + a/8) \* 2 \* C[¶](#section-7-4.2){.pilcrow}
:   

Normalized (b > 0):
:   (1 + a/8) \* 2^b^ \* C (see
    \[[RFC5497](#RFC5497){.xref}\])[¶](#section-7-4.4){.pilcrow}
:   

This configuration allows for the following
ranges:[¶](#section-7-5){.pilcrow}

-   [Minimum subnormal number: 0
    seconds[¶](#section-7-6.1){.pilcrow}]{#section-7-6.1}
-   [2nd minimum subnormal number: \~0.007812
    seconds[¶](#section-7-6.2){.pilcrow}]{#section-7-6.2}
-   [Maximum subnormal number: \~0.054688
    seconds[¶](#section-7-6.3){.pilcrow}]{#section-7-6.3}
-   [Minimum normalized number: \~0.062500
    seconds[¶](#section-7-6.4){.pilcrow}]{#section-7-6.4}
-   [2nd minimum normalized number: \~0.070312
    seconds[¶](#section-7-6.5){.pilcrow}]{#section-7-6.5}
-   [Maximum normalized number: \~3.99
    years[¶](#section-7-6.6){.pilcrow}]{#section-7-6.6}

The second modification only applies to uncompressible time offsets that
are outside any security envelope. An invalid time-value [MUST]{.bcp14}
be set to the largest valid time-value that is smaller than the invalid
input value before compression.[¶](#section-7-7){.pilcrow}
:::
:::

::: {#stateful.compression}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Stateful Header Compression](#name-stateful-header-compression-2){.section-name .selfRef} {#name-stateful-header-compression-2}

Stateful header compression in ICN LoWPAN enables packet size reductions
in two ways. First, common information that is shared throughout the
local LoWPAN may be memorized in the context state at all nodes and
omitted from communication. Second, redundancy in a single Interest-Data
exchange may be removed from ICN stateful forwarding on a hop-by-hop
basis and memorized in en route state tables.[¶](#section-8-1){.pilcrow}

::: {#stateful.compression.local}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [LoWPAN-Local State](#name-lowpan-local-state){.section-name .selfRef} {#name-lowpan-local-state}

A Context Identifier (CID) is a byte that refers to a particular
conceptual context between network devices and [MAY]{.bcp14} be used to
replace frequently appearing information, such as name prefixes,
suffixes, or meta information, such as Interest
lifetime.[¶](#section-8.1-1){.pilcrow}

[]{#name-context-identifier}

::: {#fig.cid}
::: {#section-8.1-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | X |            CID            |
    +---+---+---+---+---+---+---+---+
:::

[Figure 28](#figure-28){.selfRef}: [Context
Identifier](#name-context-identifier){.selfRef}
:::

The 7-bit CID is a locally scoped unique identifier that represents the
context state shared between the sender and receiver of the
corresponding frame (see [Figure 28](#fig.cid){.xref}). If set, the most
significant bit indicates the presence of another, subsequent CID byte
(see [Figure 33](#fig.cid.chain){.xref}).[¶](#section-8.1-3){.pilcrow}

The context state shared between senders and receivers is removed from
the compressed packet prior to sending and reinserted after reception
prior to passing to the upper stack.[¶](#section-8.1-4){.pilcrow}

The actual information in a context and how it is encoded are out of
scope of this document. The initial distribution and maintenance of
shared context is out of scope of this document. Frames containing
unknown or invalid CIDs [MUST]{.bcp14} be silently
discarded.[¶](#section-8.1-5){.pilcrow}
:::
:::

::: {#stateful.compression.en-route}
::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [En Route State](#name-en-route-state){.section-name .selfRef} {#name-en-route-state}

In CCNx and NDN, Name TLVs are included in Interest messages, and they
return in Data messages. Returning Name TLVs either equal the original
Name TLV or contain the original Name TLV as a prefix. ICN LoWPAN
reduces this redundancy in responses by replacing Name TLVs with single
bytes that represent link-local HopIDs. HopIDs are carried as Context
Identifiers (see [Section 8.1](#stateful.compression.local){.xref}) of
link-local scope, as shown in [Figure
29](#fig.hopid){.xref}.[¶](#section-8.2-1){.pilcrow}

[]{#name-context-identifier-as-hopid}

::: {#fig.hopid}
::: {#section-8.2-2.1 .alignCenter .art-text .artwork}
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | X |          HopID            |
    +---+---+---+---+---+---+---+---+
:::

[Figure 29](#figure-29){.selfRef}: [Context Identifier as
HopID](#name-context-identifier-as-hopid){.selfRef}
:::

A HopID is valid if not all ID bits are set to zero and invalid
otherwise. This yields 127 distinct HopIDs. If this range (1\...127) is
exhausted, the messages [MUST]{.bcp14} be sent without en route state
compression until new HopIDs are available. An ICN LoWPAN node that
forwards without replacing the Name TLV with a HopID (without en route
compression) [MUST]{.bcp14} invalidate the HopID by setting all ID bits
to zero.[¶](#section-8.2-3){.pilcrow}

While an Interest is traversing, a forwarder generates an ephemeral
HopID that is tied to a Pending Interest Table (PIT) entry. Each HopID
[MUST]{.bcp14} be unique within the local PIT and only exists during the
lifetime of a PIT entry. To maintain HopIDs, the local PIT is extended
by two new columns: HIDi (inbound HopIDs) and HIDo (outbound
HopIDs).[¶](#section-8.2-4){.pilcrow}

HopIDs are included in Interests and stored on the next hop with the
resulting PIT entry in the HIDi column. The HopID is replaced with a
newly generated local HopID before the Interest is forwarded. This new
HopID is stored in the HIDo column of the local PIT (see [Figure
30](#fig.enroute-a){.xref}).[¶](#section-8.2-5){.pilcrow}

[]{#name-setting-compression-state-e}

::: {#fig.enroute-a}
::: {#section-8.2-6.1 .alignCenter .art-text .artwork}
        PIT of B      PIT Extension          PIT of C      PIT Extension
    +--------+------++------+------+     +--------+------++------+------+
    | Prefix | Face || HIDi | HIDo |     | Prefix | Face || HIDi | HIDo |
    +========+======++======+======+     +========+======++======+======+
    |  /p0   | F_A  || h_A  | h_B  |     |  /p0   | F_A  || h_A  |      |
    +--------+------++------+------+     +--------+------++------+------+
                        ^       |                            ^
                  store |       '----------------------, ,---' store
                        |                 send         v |
    ,---,         /p0, h_A          ,---,         /p0, h_B          ,---,
    | A | ------------------------> | B | ------------------------> | C |
    '---'                           '---'                           '---'
:::

[Figure 30](#figure-30){.selfRef}: [Setting Compression State En Route
(Interest)](#name-setting-compression-state-e){.selfRef}
:::

Responses include HopIDs that were obtained from Interests. If the
returning Name TLV equals the original Name TLV, then the name is
entirely elided. Otherwise, only the matching name prefix is elided, and
the distinct name suffix is included along with the HopID. When a
response is forwarded, the contained HopID is extracted and used to
match against the correct PIT entry by performing a lookup on the HIDo
column. The HopID is then replaced with the corresponding HopID from the
HIDi column prior to forwarding the response ([Figure
31](#fig.enroute-b){.xref}).[¶](#section-8.2-7){.pilcrow}

[]{#name-eliding-name-tlvs-using-en-}

::: {#fig.enroute-b}
::: {#section-8.2-8.1 .alignCenter .art-text .artwork}
        PIT of B      PIT Extension          PIT of C      PIT Extension
    +--------+------++------+------+     +--------+------++------+------+
    | Prefix | Face || HIDi | HIDo |     | Prefix | Face || HIDi | HIDo |
    +========+======++======+======+     +========+======++======+======+
    |  /p0   | F_A  || h_A  | h_B  |     |  /p0   | F_A  || h_A  |      |
    +--------+------++------+------+     +--------+------++------+------+
                        |       ^                            |
                   send |       '----------------------, ,---' send
                        v                 match        | v
    ,---,              h_A          ,---,              h_B          ,---,
    | A | <------------------------ | B | <------------------------ | C |
    '---'                           '---'                           '---'
:::

[Figure 31](#figure-31){.selfRef}: [Eliding Name TLVs Using En Route
State (Data)](#name-eliding-name-tlvs-using-en-){.selfRef}
:::

It should be noted that each forwarder of an Interest in an ICN LoWPAN
network can individually decide whether to participate in en route
compression or not. However, an ICN LoWPAN node [SHOULD]{.bcp14} use en
route compression whenever the stateful compression mechanism is
activated.[¶](#section-8.2-9){.pilcrow}

Note also that the extensions of the PIT data structure are required
only at ICN LoWPAN nodes, while regular NDN/CCNx forwarders outside of
an ICN LoWPAN domain do not need to implement these
extensions.[¶](#section-8.2-10){.pilcrow}
:::
:::

::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [Integrating Stateful Header Compression](#name-integrating-stateful-header){.section-name .selfRef} {#name-integrating-stateful-header}

A CID appears whenever the CID flag is set (see [Figure
5](#fig.disp.base.compr){.xref}). The CID is appended to the last ICN
LoWPAN dispatch byte, as shown in [Figure
32](#fig.cid.loc){.xref}.[¶](#section-8.3-1){.pilcrow}

[]{#name-lowpan-encapsulation-with-ic}

::: {#fig.cid.loc}
::: {#section-8.3-2.1 .alignCenter .art-text .artwork}
    ...-------+--------+-------...-------+--...-+-------...
    /  ...    |  Page  | ICN LoWPAN Disp.| CIDs | Payload /
    ...-------+--------+-------...-------+--...-+-------...
:::

[Figure 32](#figure-32){.selfRef}: [LoWPAN Encapsulation with ICN LoWPAN
and CIDs](#name-lowpan-encapsulation-with-ic){.selfRef}
:::

Multiple CIDs are chained together, with the most significant bit
indicating the presence of a subsequent CID ([Figure
33](#fig.cid.chain){.xref}). This allows the use of multiple shared
contexts in compressed messages.[¶](#section-8.3-3){.pilcrow}

The HopID is always included as the very first
CID.[¶](#section-8.3-4){.pilcrow}

[]{#name-chaining-of-context-identif}

::: {#fig.cid.chain}
::: {#section-8.3-5.1 .alignCenter .art-text .artwork}
    +-+-+-+-+-+-+-+-+     +-+-+-+-+-+-+-+-+     +-+-+-+-+-+-+-+-+
    |1| CID / HopID | --> |1|     CID     | --> |0|     CID     |
    +-+-+-+-+-+-+-+-+     +-+-+-+-+-+-+-+-+     +-+-+-+-+-+-+-+-+
:::

[Figure 33](#figure-33){.selfRef}: [Chaining of Context
Identifiers](#name-chaining-of-context-identif){.selfRef}
:::
:::
:::
:::

::: {#sec.ndn.constvars}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [ICN LoWPAN Constants and Variables](#name-icn-lowpan-constants-and-va){.section-name .selfRef} {#name-icn-lowpan-constants-and-va}

This is a summary of all ICN LoWPAN constants and
variables.[¶](#section-9-1){.pilcrow}

[]{.break}

DEFAULT_NDN_HOPLIMIT:
:   255[¶](#section-9-2.2){.pilcrow}
:   
:::
:::

::: {#implementationnotice}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Implementation Report and Guidance](#name-implementation-report-and-g){.section-name .selfRef} {#name-implementation-report-and-g}

The ICN LoWPAN scheme defined in this document has been implemented as
an extension of the NDN/CCNx software stack
\[[CCN-LITE](#CCN-LITE){.xref}\] in its IoT version on RIOT
\[[RIOT](#RIOT){.xref}\]. An experimental evaluation for NDN over ICN
LoWPAN with varying configurations has been performed in
\[[ICNLOWPAN](#ICNLOWPAN){.xref}\]. Energy profiling and processing time
measurements indicate significant energy savings, and the amortized
costs for processing show no penalties.[¶](#section-10-1){.pilcrow}

::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Preferred Configuration](#name-preferred-configuration){.section-name .selfRef} {#name-preferred-configuration}

The header compression performance depends on certain aspects and
configurations. It works best for the following
cases:[¶](#section-10.1-1){.pilcrow}

-   [Signed time offsets compress, per [Section
    7](#sec.compressedtime){.xref}, without the need for
    rounding.[¶](#section-10.1-2.1){.pilcrow}]{#section-10.1-2.1}
-   [The context state (e.g., prefixes) is distributed such that long
    names can be elided from Interest and Data
    messages.[¶](#section-10.1-2.2){.pilcrow}]{#section-10.1-2.2}
-   [Frequently used TLV type numbers for CCNx and NDN stay in the lower
    range (\< 255).[¶](#section-10.1-2.3){.pilcrow}]{#section-10.1-2.3}

Name components are of type GenericNameComponent and are limited to a
length of 15 bytes to enable compression for all
messages.[¶](#section-10.1-3){.pilcrow}
:::

::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Further Experimental Deployments](#name-further-experimental-deploy){.section-name .selfRef} {#name-further-experimental-deploy}

An investigation of ICN LoWPAN in large-scale deployments with varying
traffic patterns using larger samples of the different board types
available remains as future work. This document will be revised to
progress it to the Standards Track, once sufficient operational
experience has been acquired. Experience reports are encouraged,
particularly in the following areas:[¶](#section-10.2-1){.pilcrow}

-   [The name compression scheme ([Section
    5.2](#sec.ndn.namecompression){.xref}) is optimized for short name
    components of type GenericNameComponent. An empirical study on name
    lengths in different deployments of selected use cases, such as
    smart home, smart city, and industrial IoT can provide meaningful
    reports on necessary name component types and lengths. A conclusive
    outcome helps to understand whether and how extension mechanisms are
    needed ([Section 5.3.3](#sec.ndn.interest.ext0){.xref}). As a
    preliminary analysis, \[[ICNLOWPAN](#ICNLOWPAN){.xref}\]
    investigates the effectiveness of the proposed compression scheme
    with URLs obtained from the WWW. Studies on deployments of
    Constrained Application Protocol (CoAP)
    \[[RFC7252](#RFC7252){.xref}\] can offer additional insights on
    naming schemes in the
    IoT.[¶](#section-10.2-2.1){.pilcrow}]{#section-10.2-2.1}
-   [The fragmentation scheme ([Section 4.2](#sec.Fragmentation){.xref})
    inherited from 6LoWPAN allows for a transparent, hop-wise reassembly
    of CCNx or NDN packets. Fragment forwarding
    \[[RFC8930](#RFC8930){.xref}\] with selective fragment recovery
    \[[RFC8931](#RFC8931){.xref}\] can improve the end-to-end latency
    and reliability while it reduces buffer requirements on forwarders.
    Initial evaluations \[[SFR-ICNLOWPAN](#SFR-ICNLOWPAN){.xref}\] show
    that a naive integration of these upcoming fragmentation features
    into ICN LoWPAN renders the hop-wise content replication
    inoperative, since Interest and Data messages are reassembled
    end-to-end. More deployment experiences are necessary to gauge the
    feasibility of different fragmentation schemes in ICN
    LoWPAN.[¶](#section-10.2-2.2){.pilcrow}]{#section-10.2-2.2}
-   [The context state ([Section
    8.1](#stateful.compression.local){.xref}) holds information that is
    shared between a set of devices in a LoWPAN. Fixed name prefixes and
    suffixes are good candidates to be distributed to all nodes in order
    to elide them from request and response messages. More experience
    and a deeper inspection of currently available and upcoming protocol
    features is necessary to identify other protocol
    fields.[¶](#section-10.2-2.3){.pilcrow}]{#section-10.2-2.3}
-   [The distribution and synchronization of the context state can
    potentially be adopted from [Section
    7.2](https://www.rfc-editor.org/rfc/rfc6775#section-7.2){.relref} of
    \[[RFC6775](#RFC6775){.xref}\] but requires further evaluations.
    While 6LoWPAN uses the Neighbor Discovery protocol to disseminate
    state, CCNx and NDN deployments are missing out on a standard
    mechanism to bootstrap and manage
    configurations.[¶](#section-10.2-2.4){.pilcrow}]{#section-10.2-2.4}
-   [The stateful en route compression ([Section
    8.2](#stateful.compression.en-route){.xref}) supports a limited
    number of 127 distinct HopIDs that can be simultaneously in use on a
    single node. Complex deployment scenarios that make use of multiple,
    concurrent requests can provide a better insight on the number of
    open requests stored in the PIT of memory-constrained devices. This
    number can serve as an upper bound and determines whether the HopID
    length needs to be resized to fit more HopIDs at the cost of
    additional header
    overhead.[¶](#section-10.2-2.5){.pilcrow}]{#section-10.2-2.5}
-   [Multiple implementations that generate and deploy the compression
    options of this memo in different ways will also add to the
    experience and understanding of the benefits and limitations of the
    proposed schemes. Different reports can help to illuminate the
    complexity of implementing ICN LoWPAN for constrained devices, as
    well as on maintaining interoperability with other
    implementations.[¶](#section-10.2-2.6){.pilcrow}]{#section-10.2-2.6}
:::
:::
:::

::: {#security.considerations}
::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

Main memory is typically a scarce resource of constrained networked
devices. Fragmentation, as described in this memo, preserves fragments
and purges them only after a packet is reassembled, which requires a
buffering of all fragments. This scheme is able to handle fragments for
distinctive packets simultaneously, which can lead to overflowing packet
buffers that cannot hold all necessary fragments for packet reassembly.
Implementers are thus urged to make use of appropriate buffer
replacement strategies for fragments. Minimal fragment forwarding
\[[RFC8930](#RFC8930){.xref}\] can potentially prevent fragment buffer
saturation in forwarders.[¶](#section-11-1){.pilcrow}

The stateful header compression generates ephemeral HopIDs for incoming
and outgoing Interests and consumes them on returning Data packets.
Forged Interests can deplete the number of available HopIDs, thus
leading to a denial of compression service for subsequent content
requests.[¶](#section-11-2){.pilcrow}

To further alleviate the problems caused by forged fragments or Interest
initiations, proper protective mechanisms for accessing the link layer
should be deployed. IEEE 802.15.4, e.g., provides capabilities to
protect frames and restrict them to a point-to-point link or a group of
devices.[¶](#section-11-3){.pilcrow}
:::
:::

::: {#iana}
::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#section-12.1 .section}
### [12.1.](#section-12.1){.section-number .selfRef} [Updates to the 6LoWPAN Dispatch Type Field Registry](#name-updates-to-the-6lowpan-disp){.section-name .selfRef} {#name-updates-to-the-6lowpan-disp}

IANA has assigned dispatch values for ICN LoWPAN in the \"Dispatch Type
Field\" subregistry \[[RFC4944](#RFC4944){.xref}\]
\[[RFC8025](#RFC8025){.xref}\] of the \"IPv6 Low Power Personal Area
Network Parameters\" registry. [Table 2](#tab.iana.dispatches){.xref}
represents the updates to the registry.[¶](#section-12.1-1){.pilcrow}

[]{#name-dispatch-types-for-ndn-and-}

::: {#tab.iana.dispatches}
  Bit Pattern   Page   Header Type                                 Reference
  ------------- ------ ------------------------------------------- -----------
  00 000000     14     Uncompressed NDN Interest messages          RFC 9139
  00 01xxxx     14     Compressed NDN Interest messages            RFC 9139
  00 100000     14     Uncompressed NDN Data messages              RFC 9139
  00 11xxxx     14     Compressed NDN Data messages                RFC 9139
  01 000000     14     Uncompressed CCNx Interest messages         RFC 9139
  01 01xxxx     14     Compressed CCNx Interest messages           RFC 9139
  01 100000     14     Uncompressed CCNx Content Object messages   RFC 9139
  01 11xxxx     14     Compressed CCNx Content Object messages     RFC 9139

  : [Table 2](#table-2){.selfRef}: [Dispatch Types for NDN and
  CCNx](#name-dispatch-types-for-ndn-and-){.selfRef}
:::
:::
:::
:::

::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-13.1 .section}
### [13.1.](#section-13.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[IEEE.754.2019\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Floating-Point
    Arithmetic\"]{.refTitle}, [IEEE Std 754-2019]{.seriesInfo},
    \<<https://standards.ieee.org/content/ieee-standards/en/standard/754-2019.html>\>.
:   

\[ieee802.15.4\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Low-Rate Wireless
    Networks\"]{.refTitle}, [IEEE Std 802.15.4-2020]{.seriesInfo},
    \<<https://standards.ieee.org/standard/802_15_4-2020.html>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4944\]
:   [Montenegro, G.]{.refAuthor}, [Kushalnagar, N.]{.refAuthor},
    [Hui, J.]{.refAuthor}, and [D. Culler]{.refAuthor}, [\"Transmission
    of IPv6 Packets over IEEE 802.15.4 Networks\"]{.refTitle}, [RFC
    4944]{.seriesInfo}, [DOI 10.17487/RFC4944]{.seriesInfo}, September
    2007, \<<https://www.rfc-editor.org/info/rfc4944>\>.
:   

\[RFC5497\]
:   [Clausen, T.]{.refAuthor} and [C. Dearlove]{.refAuthor},
    [\"Representing Multi-Value Time in Mobile Ad Hoc Networks
    (MANETs)\"]{.refTitle}, [RFC 5497]{.seriesInfo}, [DOI
    10.17487/RFC5497]{.seriesInfo}, March 2009,
    \<<https://www.rfc-editor.org/info/rfc5497>\>.
:   

\[RFC6256\]
:   [Eddy, W.]{.refAuthor} and [E. Davies]{.refAuthor}, [\"Using
    Self-Delimiting Numeric Values in Protocols\"]{.refTitle}, [RFC
    6256]{.seriesInfo}, [DOI 10.17487/RFC6256]{.seriesInfo}, May 2011,
    \<<https://www.rfc-editor.org/info/rfc6256>\>.
:   

\[RFC6282\]
:   [Hui, J., Ed.]{.refAuthor} and [P. Thubert]{.refAuthor},
    [\"Compression Format for IPv6 Datagrams over IEEE 802.15.4-Based
    Networks\"]{.refTitle}, [RFC 6282]{.seriesInfo}, [DOI
    10.17487/RFC6282]{.seriesInfo}, September 2011,
    \<<https://www.rfc-editor.org/info/rfc6282>\>.
:   

\[RFC6775\]
:   [Shelby, Z., Ed.]{.refAuthor}, [Chakrabarti, S.]{.refAuthor},
    [Nordmark, E.]{.refAuthor}, and [C. Bormann]{.refAuthor},
    [\"Neighbor Discovery Optimization for IPv6 over Low-Power Wireless
    Personal Area Networks (6LoWPANs)\"]{.refTitle}, [RFC
    6775]{.seriesInfo}, [DOI 10.17487/RFC6775]{.seriesInfo}, November
    2012, \<<https://www.rfc-editor.org/info/rfc6775>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-13.2 .section}
### [13.2.](#section-13.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[CCN-LITE\]
:   [\"CCN-lite, a lightweight implementation of the CCNx protocol and
    its variations\"]{.refTitle},
    \<<https://github.com/cn-uofbasel/ccn-lite>\>.
:   

\[ICNLOWPAN\]
:   [Gündoğan, C.]{.refAuthor}, [Kietzmann, P.]{.refAuthor},
    [Schmidt, T.]{.refAuthor}, and [M. Wählisch]{.refAuthor},
    [\"Designing a LoWPAN convergence layer for the Information Centric
    Internet of Things\"]{.refTitle}, [Computer Communications, Vol.
    164, No. 1, p. 114--123, Elsevier]{.refContent}, December 2020,
    \<<https://doi.org/10.1016/j.comcom.2020.10.002>\>.
:   

\[ICNRG-FLIC\]
:   [Tschudin, C.]{.refAuthor}, [Wood, C.]{.refAuthor},
    [Mosko, M.]{.refAuthor}, and [D. Oran, Ed.]{.refAuthor},
    [\"File-Like ICN Collections (FLIC)\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-irtf-icnrg-flic-02]{.seriesInfo}, 4 November 2019,
    \<<https://datatracker.ietf.org/doc/html/draft-irtf-icnrg-flic-02>\>.
:   

\[NDN\]
:   [Jacobson, V.]{.refAuthor}, [Smetters, D.]{.refAuthor},
    [Thornton, J.]{.refAuthor}, [Plass, M.]{.refAuthor},
    [Briggs, N.]{.refAuthor}, and [R. Braynard]{.refAuthor},
    [\"Networking named content\"]{.refTitle}, [5th Int. Conf. on
    emerging Networking Experiments and Technologies (ACM
    CoNEXT)]{.refContent}, December 2009,
    \<<https://doi.org/10.1145/1658939.1658941>\>.
:   

\[NDN-EXP1\]
:   [Baccelli, E.]{.refAuthor}, [Mehlis, C.]{.refAuthor},
    [Hahm, O.]{.refAuthor}, [Schmidt, TC.]{.refAuthor}, and [M.
    Wählisch]{.refAuthor}, [\"Information centric networking in the IoT:
    experiments with NDN in the wild\"]{.refTitle}, [Proc. of 1st ACM
    Conf. on Information-Centric Networking (ICN-2014) ACM DL, pp.
    77-86]{.refContent}, September 2014,
    \<[http://dx.doi.org/10.1145/2660129.2660144](https://dx.doi.org/10.1145/2660129.2660144)\>.
:   

\[NDN-EXP2\]
:   [Gündoğan, C.]{.refAuthor}, [Kietzmann, P.]{.refAuthor},
    [Lenders, M.]{.refAuthor}, [Petersen, H.]{.refAuthor}, [Schmidt,
    TC.]{.refAuthor}, and [M. Wählisch]{.refAuthor}, [\"NDN, CoAP, and
    MQTT: a comparative measurement study in the IoT\"]{.refTitle},
    [Proc. of 5th ACM Conf. on Information-Centric Networking (ICN-2018)
    ACM DL, pp. 159-171]{.refContent}, September 2018,
    \<<https://doi.org/10.1145/3267955.3267967>\>.
:   

\[NDN-MAC\]
:   [Kietzmann, P.]{.refAuthor}, [Gündoğan, C.]{.refAuthor}, [Schmidt,
    TC.]{.refAuthor}, [Hahm, O.]{.refAuthor}, and [M.
    Wählisch]{.refAuthor}, [\"The need for a name to MAC address mapping
    in NDN: towards quantifying the resource gain\"]{.refTitle}, [Proc.
    of 4th ACM Conf. on Information-Centric Networking (ICN-2017) ACM
    DL, pp. 36-42]{.refContent}, September 2017,
    \<<https://doi.org/10.1145/3125719.3125737>\>.
:   

\[NDN-PACKET-SPEC\]
:   [\"NDN Packet Format Specification\"]{.refTitle},
    \<<https://named-data.net/doc/NDN-packet-spec/0.3/>\>.
:   

\[RFC7228\]
:   [Bormann, C.]{.refAuthor}, [Ersue, M.]{.refAuthor}, and [A.
    Keranen]{.refAuthor}, [\"Terminology for Constrained-Node
    Networks\"]{.refTitle}, [RFC 7228]{.seriesInfo}, [DOI
    10.17487/RFC7228]{.seriesInfo}, May 2014,
    \<<https://www.rfc-editor.org/info/rfc7228>\>.
:   

\[RFC7252\]
:   [Shelby, Z.]{.refAuthor}, [Hartke, K.]{.refAuthor}, and [C.
    Bormann]{.refAuthor}, [\"The Constrained Application Protocol
    (CoAP)\"]{.refTitle}, [RFC 7252]{.seriesInfo}, [DOI
    10.17487/RFC7252]{.seriesInfo}, June 2014,
    \<<https://www.rfc-editor.org/info/rfc7252>\>.
:   

\[RFC7476\]
:   [Pentikousis, K., Ed.]{.refAuthor}, [Ohlman, B.]{.refAuthor},
    [Corujo, D.]{.refAuthor}, [Boggia, G.]{.refAuthor},
    [Tyson, G.]{.refAuthor}, [Davies, E.]{.refAuthor},
    [Molinaro, A.]{.refAuthor}, and [S. Eum]{.refAuthor},
    [\"Information-Centric Networking: Baseline Scenarios\"]{.refTitle},
    [RFC 7476]{.seriesInfo}, [DOI 10.17487/RFC7476]{.seriesInfo}, March
    2015, \<<https://www.rfc-editor.org/info/rfc7476>\>.
:   

\[RFC7927\]
:   [Kutscher, D., Ed.]{.refAuthor}, [Eum, S.]{.refAuthor},
    [Pentikousis, K.]{.refAuthor}, [Psaras, I.]{.refAuthor},
    [Corujo, D.]{.refAuthor}, [Saucez, D.]{.refAuthor},
    [Schmidt, T.]{.refAuthor}, and [M. Waehlisch]{.refAuthor},
    [\"Information-Centric Networking (ICN) Research
    Challenges\"]{.refTitle}, [RFC 7927]{.seriesInfo}, [DOI
    10.17487/RFC7927]{.seriesInfo}, July 2016,
    \<<https://www.rfc-editor.org/info/rfc7927>\>.
:   

\[RFC7945\]
:   [Pentikousis, K., Ed.]{.refAuthor}, [Ohlman, B.]{.refAuthor},
    [Davies, E.]{.refAuthor}, [Spirou, S.]{.refAuthor}, and [G.
    Boggia]{.refAuthor}, [\"Information-Centric Networking: Evaluation
    and Security Considerations\"]{.refTitle}, [RFC 7945]{.seriesInfo},
    [DOI 10.17487/RFC7945]{.seriesInfo}, September 2016,
    \<<https://www.rfc-editor.org/info/rfc7945>\>.
:   

\[RFC8025\]
:   [Thubert, P., Ed.]{.refAuthor} and [R. Cragie]{.refAuthor}, [\"IPv6
    over Low-Power Wireless Personal Area Network (6LoWPAN) Paging
    Dispatch\"]{.refTitle}, [RFC 8025]{.seriesInfo}, [DOI
    10.17487/RFC8025]{.seriesInfo}, November 2016,
    \<<https://www.rfc-editor.org/info/rfc8025>\>.
:   

\[RFC8569\]
:   [Mosko, M.]{.refAuthor}, [Solis, I.]{.refAuthor}, and [C.
    Wood]{.refAuthor}, [\"Content-Centric Networking (CCNx)
    Semantics\"]{.refTitle}, [RFC 8569]{.seriesInfo}, [DOI
    10.17487/RFC8569]{.seriesInfo}, July 2019,
    \<<https://www.rfc-editor.org/info/rfc8569>\>.
:   

\[RFC8609\]
:   [Mosko, M.]{.refAuthor}, [Solis, I.]{.refAuthor}, and [C.
    Wood]{.refAuthor}, [\"Content-Centric Networking (CCNx) Messages in
    TLV Format\"]{.refTitle}, [RFC 8609]{.seriesInfo}, [DOI
    10.17487/RFC8609]{.seriesInfo}, July 2019,
    \<<https://www.rfc-editor.org/info/rfc8609>\>.
:   

\[RFC8930\]
:   [Watteyne, T., Ed.]{.refAuthor}, [Thubert, P., Ed.]{.refAuthor}, and
    [C. Bormann]{.refAuthor}, [\"On Forwarding 6LoWPAN Fragments over a
    Multi-Hop IPv6 Network\"]{.refTitle}, [RFC 8930]{.seriesInfo}, [DOI
    10.17487/RFC8930]{.seriesInfo}, November 2020,
    \<<https://www.rfc-editor.org/info/rfc8930>\>.
:   

\[RFC8931\]
:   [Thubert, P., Ed.]{.refAuthor}, [\"IPv6 over Low-Power Wireless
    Personal Area Network (6LoWPAN) Selective Fragment
    Recovery\"]{.refTitle}, [RFC 8931]{.seriesInfo}, [DOI
    10.17487/RFC8931]{.seriesInfo}, November 2020,
    \<<https://www.rfc-editor.org/info/rfc8931>\>.
:   

\[RIOT\]
:   [Baccelli, E.]{.refAuthor}, [Gündoğan, C.]{.refAuthor},
    [Hahm, O.]{.refAuthor}, [Kietzmann, P.]{.refAuthor}, [Lenders,
    MS.]{.refAuthor}, [Petersen, H.]{.refAuthor},
    [Schleiser, K.]{.refAuthor}, [Schmidt, TC.]{.refAuthor}, and [M.
    Wählisch]{.refAuthor}, [\"RIOT: An Open Source Operating System for
    Low-End Embedded Devices in the IoT\"]{.refTitle}, [IEEE Internet of
    Things Journal Vol. 5, No. 6, p. 4428-4440]{.refContent}, December
    2018, \<<https://doi.org/10.1109/JIOT.2018.2815038>\>.
:   

\[SFR-ICNLOWPAN\]
:   [Lenders, M.]{.refAuthor}, [Gündoğan, C.]{.refAuthor}, [Schmidt,
    TC.]{.refAuthor}, and [M. Wählisch]{.refAuthor}, [\"Connecting the
    Dots: Selective Fragment Recovery in ICNLoWPAN\"]{.refTitle}, [Proc.
    of 7th ACM Conf. on Information-Centric Networking (ICN-2020) ACM
    DL, pp. 70-76]{.refContent}, September 2020,
    \<<https://doi.org/10.1145/3405656.3418719>\>.
:   

\[TLV-ENC-802.15.4\]
:   [Mosko, M.]{.refAuthor} and [C. Tschudin]{.refAuthor}, [\"CCN and
    NDN TLV encodings in 802.15.4 packets\"]{.refTitle}, January 2015,
    \<<https://datatracker.ietf.org/meeting/interim-2015-icnrg-01/materials/slides-interim-2015-icnrg-1-2>\>.
:   

\[WIRE-FORMAT-CONSID\]
:   [Wang, G.]{.refAuthor}, [Tschudin, C.]{.refAuthor}, and [R.
    Ravindran]{.refAuthor}, [\"CCN/NDN Protocol Wire Format and
    Functionality Considerations\"]{.refTitle}, January 2015,
    \<<https://datatracker.ietf.org/meeting/interim-2015-icnrg-01/materials/slides-interim-2015-icnrg-1-8>\>.
:   
:::
:::

::: {#sec.EstimatedSizeReduction}
::: {#appendix-A .section}
## [Appendix A.](#appendix-A){.section-number .selfRef} [Estimated Size Reduction](#name-estimated-size-reduction){.section-name .selfRef} {#name-estimated-size-reduction}

In the following, a theoretical evaluation is given to estimate the
gains of ICN LoWPAN compared to uncompressed CCNx and NDN
messages.[¶](#appendix-A-1){.pilcrow}

We assume that `n` is the number of name components; `comps_n` denotes
the sum of n name component lengths. We also assume that the length of
each name component is lower than 16 bytes. The length of the content is
given by `clen`. The lengths of TLV components are specific to the CCNx
or NDN encoding and are outlined below.[¶](#appendix-A-2){.pilcrow}

::: {#appendix-A.1 .section}
### [A.1.](#appendix-A.1){.section-number .selfRef} [NDN](#name-ndn){.section-name .selfRef} {#name-ndn}

The NDN TLV encoding has variable-sized TLV fields. For simplicity, the
1-byte form of each TLV component is assumed. A typical TLV component
therefore is of size 2 (Type field + Length field) + the actual
value.[¶](#appendix-A.1-1){.pilcrow}

::: {#appendix-A.1.1 .section}
#### [A.1.1.](#appendix-A.1.1){.section-number .selfRef} [Interest](#name-interest){.section-name .selfRef} {#name-interest}

[Figure 34](#fig.Size.NDN.interest.uncompressed){.xref} depicts the size
requirements for a basic, uncompressed NDN Interest containing a
CanBePrefix TLV, a MustBeFresh TLV, an InterestLifetime TLV set to 4
seconds, and a HopLimit TLV set to 6. Numbers below represent the amount
of bytes.[¶](#appendix-A.1.1-1){.pilcrow}

[]{#name-estimated-size-of-an-uncomp}

::: {#fig.Size.NDN.interest.uncompressed}
::: {#appendix-A.1.1-2.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Interest TLV            = 2         |
      ---------------------,            |
      Name                 |  2 +       |
        NameComponents      = 2n +      |
                           |  comps_n   |
      ---------------------'             = 21 + 2n + comps_n
      CanBePrefix           = 2         |
      MustBeFresh           = 2         |
      Nonce                 = 6         |
      InterestLifetime      = 4         |
      HopLimit              = 3         |
    ------------------------------------'
:::

[Figure 34](#figure-34){.selfRef}: [Estimated Size of an Uncompressed
NDN Interest](#name-estimated-size-of-an-uncomp){.selfRef}
:::

[Figure 35](#fig.Size.NDN.interest.compressed){.xref} depicts the size
requirements after compression.[¶](#appendix-A.1.1-3){.pilcrow}

[]{#name-estimated-size-of-a-compres}

::: {#fig.Size.NDN.interest.compressed}
::: {#appendix-A.1.1-4.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Dispatch Page Switch    = 1         |
    NDN Interest Dispatch   = 2         |
    Interest TLV            = 1         |
    -----------------------,            |
    Name                   |            |
      NameComponents        = n/2 +      = 10 + n/2 + comps_n
                           |  comps_n   |
    -----------------------'            |
    Nonce                   = 4         |
    HopLimit                = 1         |
    InterestLifetime        = 1         |
    ------------------------------------'
:::

[Figure 35](#figure-35){.selfRef}: [Estimated Size of a Compressed NDN
Interest](#name-estimated-size-of-a-compres){.selfRef}
:::

The size difference is 11 + 1.5n bytes.[¶](#appendix-A.1.1-5){.pilcrow}

For the name `/DE/HH/HAW/BT7`, the total size gain is 17 bytes, which is
43% of the uncompressed packet.[¶](#appendix-A.1.1-6){.pilcrow}
:::

::: {#appendix-A.1.2 .section}
#### [A.1.2.](#appendix-A.1.2){.section-number .selfRef} [Data](#name-data){.section-name .selfRef} {#name-data}

[Figure 36](#fig.Size.NDN.Data.uncompressed){.xref} depicts the size
requirements for a basic, uncompressed NDN Data containing a
FreshnessPeriod as MetaInfo. A FreshnessPeriod of 1 minute is assumed,
and the value is encoded using 1 byte. An HMACWithSha256 is assumed as a
signature. The key locator is assumed to contain a Name TLV of length
klen.[¶](#appendix-A.1.2-1){.pilcrow}

[]{#name-estimated-size-of-an-uncompr}

::: {#fig.Size.NDN.Data.uncompressed}
::: {#appendix-A.1.2-2.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Data TLV                = 2         |
      ---------------------,            |
      Name                 |  2 +       |
        NameComponents      = 2n +      |
                           |  comps_n   |
      ---------------------'            |
      ---------------------,            |
      MetaInfo             |            |
        FreshnessPeriod     = 6         |
                           |             = 53 + 2n + comps_n +
      ---------------------'            |  clen + klen
      Content               = 2 + clen  |
      ---------------------,            |
      SignatureInfo        |            |
        SignatureType      |            |
          KeyLocator        = 41 + klen |
      SignatureValue       |            |
        DigestSha256       |            |
      ---------------------'            |
    ------------------------------------'
:::

[Figure 36](#figure-36){.selfRef}: [Estimated Size of an Uncompressed
NDN Data](#name-estimated-size-of-an-uncompr){.selfRef}
:::

[Figure 37](#fig.Size.NDN.Data.compressed){.xref} depicts the size
requirements for the compressed version of the above Data
packet.[¶](#appendix-A.1.2-3){.pilcrow}

[]{#name-estimated-size-of-a-compress}

::: {#fig.Size.NDN.Data.compressed}
::: {#appendix-A.1.2-4.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Dispatch Page Switch    = 1         |
    NDN Data Dispatch       = 2         |
    -----------------------,            |
    Name                   |            |
      NameComponents        = n/2 +     |
                           |  comps_n    = 38 + n/2 + comps_n +
    -----------------------'            |  clen + klen
    Content                 = 1 + clen  |
    KeyLocator              = 1 + klen  |
    DigestSha256            = 32        |
    FreshnessPeriod         = 1         |
    ------------------------------------'
:::

[Figure 37](#figure-37){.selfRef}: [Estimated Size of a Compressed NDN
Data](#name-estimated-size-of-a-compress){.selfRef}
:::

The size difference is 15 + 1.5n bytes.[¶](#appendix-A.1.2-5){.pilcrow}

For the name `/DE/HH/HAW/BT7`, the total size gain is 21
bytes.[¶](#appendix-A.1.2-6){.pilcrow}
:::
:::

::: {#appendix-A.2 .section}
### [A.2.](#appendix-A.2){.section-number .selfRef} [CCNx](#name-ccnx){.section-name .selfRef} {#name-ccnx}

The CCNx TLV encoding defines a 2-byte encoding for Type and Length
fields, summing up to 4 bytes in total without a
value.[¶](#appendix-A.2-1){.pilcrow}

::: {#appendix-A.2.1 .section}
#### [A.2.1.](#appendix-A.2.1){.section-number .selfRef} [Interest](#name-interest-2){.section-name .selfRef} {#name-interest-2}

[Figure 38](#fig.Size.CCNx.interest.uncompressed){.xref} depicts the
size requirements for a basic, uncompressed CCNx Interest. No hop-by-hop
TLVs are included, the protocol version is assumed to be 1, and the
Reserved field is assumed to be 0. A KeyIdRestriction TLV with T_SHA-256
is included to limit the responses to Content Objects containing the
specific key.[¶](#appendix-A.2.1-1){.pilcrow}

[]{#name-estimated-size-of-an-uncompre}

::: {#fig.Size.CCNx.interest.uncompressed}
::: {#appendix-A.2.1-2.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Fixed Header            = 8         |
    Message                 = 4         |
      ---------------------,            |
      Name                 |  4 +        = 56 + 4n + comps_n
        NameSegments        = 4n +      |
                           |  comps_n   |
      ---------------------'            |
      KeyIdRestriction      = 40        |
    ------------------------------------'
:::

[Figure 38](#figure-38){.selfRef}: [Estimated Size of an Uncompressed
CCNx Interest](#name-estimated-size-of-an-uncompre){.selfRef}
:::

[Figure 39](#fig.Size.CCNx.interest.compressed){.xref} depicts the size
requirements after compression.[¶](#appendix-A.2.1-3){.pilcrow}

[]{#name-estimated-size-of-a-compresse}

::: {#fig.Size.CCNx.interest.compressed}
::: {#appendix-A.2.1-4.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Dispatch Page Switch    = 1         |
    CCNx Interest Dispatch  = 2         |
    Fixed Header            = 3         |
    -----------------------,            |
    Name                   |             = 38 + n/2 + comps_n
      NameSegments          = n/2 +     |
                           |  comps_n   |
    -----------------------'            |
    T_SHA-256               = 32        |
    ------------------------------------'
:::

[Figure 39](#figure-39){.selfRef}: [Estimated Size of a Compressed CCNx
Interest](#name-estimated-size-of-a-compresse){.selfRef}
:::

The size difference is 18 + 3.5n bytes.[¶](#appendix-A.2.1-5){.pilcrow}

For the name `/DE/HH/HAW/BT7`, the size is reduced by 53 bytes, which is
53% of the uncompressed packet.[¶](#appendix-A.2.1-6){.pilcrow}
:::

::: {#appendix-A.2.2 .section}
#### [A.2.2.](#appendix-A.2.2){.section-number .selfRef} [Content Object](#name-content-object){.section-name .selfRef} {#name-content-object}

[Figure 40](#fig.Size.CCNx.Data.uncompressed){.xref} depicts the size
requirements for a basic, uncompressed CCNx Content Object containing an
ExpiryTime Message TLV, an HMAC_SHA-256 signature, the signature time,
and a hash of the shared secret key. In the fixed header, the protocol
version is assumed to be 1 and the Reserved field is assumed to be
0[¶](#appendix-A.2.2-1){.pilcrow}

[]{#name-estimated-size-of-an-uncompres}

::: {#fig.Size.CCNx.Data.uncompressed}
::: {#appendix-A.2.2-2.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Fixed Header            = 8         |
    Message                 = 4         |
      ---------------------,            |
      Name                 |  4 +       |
        NameSegments        = 4n +      |
                           |  comps_n   |
      ---------------------'            |
      ExpiryTime            = 12         = 124 + 4n + comps_n + clen
      Payload               = 4 + clen  |
      ---------------------,            |
      ValidationAlgorithm  |            |
        T_HMAC-256          = 56        |
          KeyID            |            |
        SignatureTime      |            |
      ---------------------'            |
      ValidationPayload     = 36        |
    ------------------------------------'
:::

[Figure 40](#figure-40){.selfRef}: [Estimated Size of an Uncompressed
CCNx Content Object](#name-estimated-size-of-an-uncompres){.selfRef}
:::

[Figure 41](#fig.Size.CCNx.Data.compressed){.xref} depicts the size
requirements for a basic, compressed CCNx
Data.[¶](#appendix-A.2.2-3){.pilcrow}

[]{#name-estimated-size-of-a-compressed}

::: {#fig.Size.CCNx.Data.compressed}
::: {#appendix-A.2.2-4.1 .alignCenter .art-text .artwork}
    ------------------------------------,
    Dispatch Page Switch    = 1         |
    CCNx Content Dispatch   = 3         |
    Fixed Header            = 2         |
    -----------------------,            |
    Name                   |            |
      NameSegments          = n/2 +     |
                           |  comps_n    = 89 + n/2 + comps_n + clen
    -----------------------'            |
    ExpiryTime              = 8         |
    Payload                 = 1 + clen  |
    T_HMAC-SHA256           = 32        |
    SignatureTime           = 8         |
    ValidationPayload       = 34        |
    ------------------------------------'
:::

[Figure 41](#figure-41){.selfRef}: [Estimated Size of a Compressed CCNx
Data Object](#name-estimated-size-of-a-compressed){.selfRef}
:::

The size difference is 35 + 3.5n bytes.[¶](#appendix-A.2.2-5){.pilcrow}

For the name `/DE/HH/HAW/BT7`, the size is reduced by 70 bytes, which is
40% of the uncompressed packet containing a 4-byte
payload.[¶](#appendix-A.2.2-6){.pilcrow}
:::
:::
:::
:::

::: {#appendix-B .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

This work was stimulated by fruitful discussions in the ICNRG and the
communities of RIOT and CCNlite. We would like to thank all active
members for constructive thoughts and feedback. In particular, the
authors would like to thank (in alphabetical order) [Peter
Kietzmann]{.contact-name}, [Dirk Kutscher]{.contact-name}, [Martine
Lenders]{.contact-name}, [Colin Perkins]{.contact-name}, and [Junxiao
Shi]{.contact-name}. The hop-wise stateful name compression was brought
up in a discussion by [Dave Oran]{.contact-name}, which is gratefully
acknowledged. Larger parts of this work are inspired by
\[[RFC4944](#RFC4944){.xref}\] and \[[RFC6282](#RFC6282){.xref}\].
Special mention goes to [Mark Mosko]{.contact-name}, as well as [G.Q.
Wang]{.contact-name} and [Ravi Ravindran]{.contact-name}, as their
previous work in \[[TLV-ENC-802.15.4](#TLV-ENC-802.15.4){.xref}\] and
\[[WIRE-FORMAT-CONSID](#WIRE-FORMAT-CONSID){.xref}\] provided a good
base for our discussions on stateless header compression mechanisms.
Many thanks also to [Carsten Bormann]{.contact-name} and [Lars
Eggert]{.contact-name}, who contributed in-depth comments during the
IRSG review. This work was supported in part by the German Federal
Ministry of Research and Education within the projects I3 and
RAPstore.[¶](#appendix-B-1){.pilcrow}
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Cenk Gündoğan]{.fn .nameRole}
:::

::: {.left dir="auto"}
[HAW Hamburg]{.org}
:::

::: {.left dir="auto"}
[Berliner Tor 7]{.street-address}
:::

::: {.left dir="auto"}
[D-20099]{.postal-code} [Hamburg]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: tel
Phone: [+4940428758067](tel:+4940428758067){.tel}
:::

::: email
Email: <cenk.guendogan@haw-hamburg.de>
:::

::: url
URI: <http://inet.haw-hamburg.de/members/cenk-gundogan>
:::

::: {.left dir="auto"}
[Thomas C. Schmidt]{.fn .nameRole}
:::

::: {.left dir="auto"}
[HAW Hamburg]{.org}
:::

::: {.left dir="auto"}
[Berliner Tor 7]{.street-address}
:::

::: {.left dir="auto"}
[D-20099]{.postal-code} [Hamburg]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: email
Email: <t.schmidt@haw-hamburg.de>
:::

::: url
URI: <http://inet.haw-hamburg.de/members/schmidt>
:::

::: {.left dir="auto"}
[Matthias Wählisch]{.fn .nameRole}
:::

::: {.left dir="auto"}
[link-lab & FU Berlin]{.org}
:::

::: {.left dir="auto"}
[Hoenower Str. 35]{.street-address}
:::

::: {.left dir="auto"}
[D-10318]{.postal-code} [Berlin]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: email
Email: <mw@link-lab.net>
:::

::: url
URI:
<https://www.mi.fu-berlin.de/en/inf/groups/ilab/members/waehlisch.html>
:::

::: {.left dir="auto"}
[Christopher Scherb]{.fn .nameRole}
:::

::: {.left dir="auto"}
[University of Applied Sciences and Arts Northwestern Switzerland]{.org}
:::

::: {.left dir="auto"}
[Peter Merian-Str. 86]{.street-address}
:::

::: {.left dir="auto"}
CH-[4002]{.postal-code} [Basel]{.locality}
:::

::: {.left dir="auto"}
[Switzerland]{.country-name}
:::

::: email
Email: <christopher.scherb@fhnw.ch>
:::

::: {.left dir="auto"}
[Claudio Marxer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[University of Basel]{.org}
:::

::: {.left dir="auto"}
[Spiegelgasse 1]{.street-address}
:::

::: {.left dir="auto"}
CH-[4051]{.postal-code} [Basel]{.locality}
:::

::: {.left dir="auto"}
[Switzerland]{.country-name}
:::

::: email
Email: <claudio.marxer@unibas.ch>
:::

::: {.left dir="auto"}
[Christian Tschudin]{.fn .nameRole}
:::

::: {.left dir="auto"}
[University of Basel]{.org}
:::

::: {.left dir="auto"}
[Spiegelgasse 1]{.street-address}
:::

::: {.left dir="auto"}
CH-[4051]{.postal-code} [Basel]{.locality}
:::

::: {.left dir="auto"}
[Switzerland]{.country-name}
:::

::: email
Email: <christian.tschudin@unibas.ch>
:::
:::
:::
