  RFC 8804             CDNI Request Routing Extensions   September 2020
  -------------------- --------------------------------- ----------------
  Finkelman & Mishra   Standards Track                   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8804](https://www.rfc-editor.org/rfc/rfc8804){.eref}

Category:
:   Standards Track

Published:
:   September 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    O. Finkelman
    :::

    ::: org
    Qwilt
    :::
    :::

    ::: author
    ::: author-name
    S. Mishra
    :::

    ::: org
    Verizon
    :::
    :::
:::

# RFC 8804 {#rfcnum}

# Content Delivery Network Interconnection (CDNI) Request Routing Extensions {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Open Caching architecture is a use case of Content Delivery Network
Interconnection (CDNI) in which the commercial Content Delivery Network
(CDN) is the upstream CDN (uCDN) and the ISP caching layer serves as the
downstream CDN (dCDN). This document defines extensions to the CDNI
Metadata Interface (MI) and the Footprint & Capabilities Advertisement
interface (FCI). These extensions are derived from requirements raised
by Open Caching but are also applicable to CDNI use cases in
general.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8804>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.1.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.1.2.2}
        [1.2](#section-1.2){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.1.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Redirect Target
    Capability](#name-redirect-target-capability){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [DNS Redirect
        Target](#name-dns-redirect-target){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [HTTP Redirect
        Target](#name-http-redirect-target){.xref}[¶](#section-toc.1-1.2.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.2.2.3}
        [2.3](#section-2.3){.xref}.  [Properties of Redirect Target
        Capability
        Object](#name-properties-of-redirect-targ){.xref}[¶](#section-toc.1-1.2.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.2.2.4}
        [2.4](#section-2.4){.xref}.  [DnsTarget
        Object](#name-dnstarget-object){.xref}[¶](#section-toc.1-1.2.2.4.1){.pilcrow}

        -   ::: {#section-toc.1-1.2.2.4.2.1}
            [2.4.1](#section-2.4.1){.xref}.  [DnsTarget
            Example](#name-dnstarget-example){.xref}[¶](#section-toc.1-1.2.2.4.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.2.2.5}
        [2.5](#section-2.5){.xref}.  [HttpTarget
        Object](#name-httptarget-object){.xref}[¶](#section-toc.1-1.2.2.5.1){.pilcrow}

        -   ::: {#section-toc.1-1.2.2.5.2.1}
            [2.5.1](#section-2.5.1){.xref}.  [HttpTarget
            Example](#name-httptarget-example){.xref}[¶](#section-toc.1-1.2.2.5.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.2.2.6}
        [2.6](#section-2.6){.xref}.  [Usage
        Example](#name-usage-example){.xref}[¶](#section-toc.1-1.2.2.6.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Fallback Target Server
    Address](#name-fallback-target-server-addr){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Properties of Fallback Target
        Generic Metadata
        Object](#name-properties-of-fallback-targ){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Usage
        Example](#name-usage-example-2){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [uCDN Addressing
        Considerations](#name-ucdn-addressing-considerati){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [CDNI Payload
        Types](#name-cdni-payload-types){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [CDNI FCI RedirectTarget
            Payload
            Type](#name-cdni-fci-redirecttarget-pay){.xref}[¶](#section-toc.1-1.4.2.1.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.2}
            [4.1.2](#section-4.1.2){.xref}.  [CDNI MI FallbackTarget
            Payload
            Type](#name-cdni-mi-fallbacktarget-payl){.xref}[¶](#section-toc.1-1.4.2.1.2.2.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Confidentiality and
        Privacy](#name-confidentiality-and-privacy){.xref}[¶](#section-toc.1-1.5.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.6.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.6.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.8}
    [](#section-appendix.b){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The Streaming Video Alliance \[[SVA](#SVA){.xref}\] is a global
association that works to solve streaming video challenges in an effort
to improve end-user experience and adoption. The Open Caching Working
Group \[[OCWG](#OCWG){.xref}\] of the Streaming Video Alliance
\[[SVA](#SVA){.xref}\] is focused on the delegation of video delivery
requests from commercial CDNs to a caching layer at the ISP\'s network.
Open Caching architecture is a specific use case of CDNI where the
commercial CDN is the upstream CDN (uCDN) and the ISP caching layer is
the downstream CDN (dCDN). The Open Caching Request Routing Functional
Specification \[[OC-RR](#OC-RR){.xref}\] defines the Request Routing
process and the interfaces that are required for its provisioning. This
document defines the CDNI metadata object \[[RFC8006](#RFC8006){.xref}\]
and the CDNI Footprint and Capabilities object
\[[RFC8008](#RFC8008){.xref}\] that are required for Open Caching
Request Routing:[¶](#section-1-1){.pilcrow}

-   [Redirect Target Capability (for dCDN advertising redirect target
    address)[¶](#section-1-2.1){.pilcrow}]{#section-1-2.1}
-   [Fallback Target Metadata (for uCDN configuring fallback target
    address)[¶](#section-1-2.2){.pilcrow}]{#section-1-2.2}

This document also registers CDNI Payload Types
\[[RFC7736](#RFC7736){.xref}\] for these defined
objects.[¶](#section-1-3){.pilcrow}

For consistency with other CDNI documents, this document follows the
CDNI convention of uCDN (upstream CDN) and dCDN (downstream CDN) to
represent the commercial CDN and ISP caching layer,
respectively.[¶](#section-1-4){.pilcrow}

::: {#terminology}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The following terms are used throughout this
document:[¶](#section-1.1-1){.pilcrow}

[]{.break}

FQDN
:   Fully Qualified Domain Name[¶](#section-1.1-2.2){.pilcrow}
:   

CDN
:   Content Delivery Network[¶](#section-1.1-2.4){.pilcrow}
:   

Additionally, this document reuses the terminology defined in
\[[RFC6707](#RFC6707){.xref}\], \[[RFC7336](#RFC7336){.xref}\],
\[[RFC8006](#RFC8006){.xref}\], \[[RFC8007](#RFC8007){.xref}\], and
\[[RFC8008](#RFC8008){.xref}\]. Specifically, we use the following CDNI
acronyms:[¶](#section-1.1-3){.pilcrow}

[]{.break}

FCI
:   Footprint & Capabilities Advertisement interface (see
    \[[RFC8008](#RFC8008){.xref}\])[¶](#section-1.1-4.2){.pilcrow}
:   

MI
:   Metadata Interface (see
    \[[RFC8006](#RFC8006){.xref}\])[¶](#section-1.1-4.4){.pilcrow}
:   

uCDN
:   Upstream CDN (see
    \[[RFC7336](#RFC7336){.xref}\])[¶](#section-1.1-4.6){.pilcrow}
:   

dCDN
:   Downstream CDN (see
    \[[RFC7336](#RFC7336){.xref}\])[¶](#section-1.1-4.8){.pilcrow}
:   

RT
:   Redirection Target. Endpoint for redirection from uCDN to
    dCDN.[¶](#section-1.1-4.10){.pilcrow}
:   

RR
:   Request Router. An element responsible for routing user requests,
    typically using HTTP redirect or DNS CNAME, depending on the use
    case.[¶](#section-1.1-4.12){.pilcrow}
:   
:::
:::

::: {#section-1.2 .section}
### [1.2.](#section-1.2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.2-1){.pilcrow}
:::
:::

::: {#redirect-target-capability}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Redirect Target Capability](#name-redirect-target-capability){.section-name .selfRef} {#name-redirect-target-capability}

Iterative CDNI Request Redirection is defined in [Section
1.1](https://www.rfc-editor.org/rfc/rfc7336#section-1.1){.relref} of
\[[RFC7336](#RFC7336){.xref}\] and elaborated by examples in Sections
[3.2](https://www.rfc-editor.org/rfc/rfc7336#section-3.2){.relref} and
[3.4](https://www.rfc-editor.org/rfc/rfc7336#section-3.4){.relref} of
\[[RFC7336](#RFC7336){.xref}\]. A Redirection Target (RT) is defined in
[Section 2](https://www.rfc-editor.org/rfc/rfc7975#section-2){.relref}
of \[[RFC7975](#RFC7975){.xref}\] for Recursive Request Redirection
as:[¶](#section-2-1){.pilcrow}

> The endpoint to which the User Agent is redirected. In CDNI, an RT may
> point to a number of different components, some examples include a
> surrogate in the same CDN as the request router, a request router in a
> dCDN, or a surrogate in a dCDN.[¶](#section-2-2){.pilcrow}

In this document, we adopt the same definition of the RT for the
Iterative Request Redirect use case. This use case requires the
provisioning of the RT address to be used by the uCDN in order to
redirect to the dCDN. RT addresses can vary between different footprints
(for example, between different regions), and they may also change over
time (for example, as a result of network problems). Given this variable
and dynamic nature of the redirect target address, it may not be
suitable to advertise it during bootstrap. A more dynamic and
footprint-oriented interface is required. [Section
4.3](https://www.rfc-editor.org/rfc/rfc7336#section-4.3){.relref} of
\[[RFC7336](#RFC7336){.xref}\] suggests that it could be one of the
roles of the FCI \[[RFC8008](#RFC8008){.xref}\]. Following this
suggestion, we have therefore chosen to use the CDNI Footprint &
Capabilities Advertisement interface for redirect target address
advertisement.[¶](#section-2-3){.pilcrow}

Use cases:[¶](#section-2-4){.pilcrow}

-   [Footprint: The dCDN may want to have a different target per
    footprint. Note that a dCDN may spread across multiple geographies.
    This makes it easier to route client requests to a nearby request
    router. Though this can be achieved using a single canonical name
    and \"Geo DNS\", such that in different geographies the same
    hostname is resolved to different IP address, that approach has
    limitations; for example, a client may be using a third-party DNS
    resolver, making it impossible for the redirector to detect where
    the client is located, or Geo DNS granularity may be too rough for
    the requirement of the
    application.[¶](#section-2-5.1){.pilcrow}]{#section-2-5.1}
-   [Scaling: The dCDN may choose to scale its Request Routing service
    by deploying more request routers in new locations and advertise
    them via an updatable interface like the
    FCI.[¶](#section-2-5.2){.pilcrow}]{#section-2-5.2}

The Redirect Target capability object is used to indicate the target
address the uCDN should use in order to redirect a client to the dCDN. A
target may be attached to a specific uCDN host, attached to a list of
uCDN hosts, or used globally for all the hosts of the
uCDN.[¶](#section-2-6){.pilcrow}

When a dCDN is attaching the redirect target to a specific uCDN host or
a list of uCDN hosts, the dCDN [MUST]{.bcp14} advertise the hosts within
the Redirect Target capability object as \"redirecting-hosts\". In this
case, the uCDN can redirect to that dCDN address, only if the User Agent
request was to one of these uCDN hosts.[¶](#section-2-7){.pilcrow}

If the Redirect Target capability object does not contain a target or
the target is empty, the uCDN [MUST]{.bcp14} interpret it as \"no target
available for these uCDN hosts for the specified footprint\". In case
such a target was already advertised in a previous FCI object, the uCDN
[MUST]{.bcp14} interpret it as an update that deletes the previous
redirect target.[¶](#section-2-8){.pilcrow}

::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [DNS Redirect Target](#name-dns-redirect-target){.section-name .selfRef} {#name-dns-redirect-target}

A redirect target for DNS redirection is an FQDN used as an alias in a
CNAME record response (see \[[RFC1034](#RFC1034){.xref}\]) of the uCDN
DNS router. Note that DNS routers make routing decisions based on either
the DNS resolver\'s IP address or the client IP subnet when EDNS0
client-subnet (ECS) is used (see \[[RFC7871](#RFC7871){.xref}\]). The
dCDN may choose to advertise redirect targets and footprints to cover
both cases, such that the uCDN resolution would route the DNS query to
different dCDN CNAMEs according to client subnet or dCDN resolver IP
address. This method further allows the dCDN DNS to optimize the
resolution by localizing the target CNAMEs. A uCDN implementation
[SHOULD]{.bcp14} prefer routing based on client IP subnet when the ECS
option is present. A dCDN implementation using the ECS option
[MUST]{.bcp14} be aware of the privacy drawbacks listed in [Section
2](https://www.rfc-editor.org/rfc/rfc7871#section-2){.relref} of
\[[RFC7871](#RFC7871){.xref}\] and [SHOULD]{.bcp14} follow the
guidelines provided in [Section
11.1](https://www.rfc-editor.org/rfc/rfc7871#section-11.1){.relref} of
\[[RFC7871](#RFC7871){.xref}\].[¶](#section-2.1-1){.pilcrow}
:::

::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [HTTP Redirect Target](#name-http-redirect-target){.section-name .selfRef} {#name-http-redirect-target}

A redirect target for HTTP redirection is the URI to be used as the
value for the Location header of an HTTP redirect 3xx response,
typically a 302 (Found) (see [Section
7.1.2](https://www.rfc-editor.org/rfc/rfc7231#section-7.1.2){.relref} of
\[[RFC7231](#RFC7231){.xref}\] and [Section
6.4](https://www.rfc-editor.org/rfc/rfc7231#section-6.4){.relref} of
\[[RFC7231](#RFC7231){.xref}\]).[¶](#section-2.2-1){.pilcrow}
:::

::: {#redirect-target-capability-properties}
::: {#section-2.3 .section}
### [2.3.](#section-2.3){.section-number .selfRef} [Properties of Redirect Target Capability Object](#name-properties-of-redirect-targ){.section-name .selfRef} {#name-properties-of-redirect-targ}

The Redirect Target capability object consists of the following
properties:[¶](#section-2.3-1){.pilcrow}

[]{.break}

Property:

:   redirecting-hosts[¶](#section-2.3-2.2.1){.pilcrow}

    []{.break}

    Description:
    :   One or more uCDN hosts to which this redirect target is
        attached. A redirecting host [SHOULD]{.bcp14} be a host that was
        published in a HostMatch object by the uCDN as defined in
        [Section
        4.1.2](https://www.rfc-editor.org/rfc/rfc8006#section-4.1.2){.relref}
        of
        \[[RFC8006](#RFC8006){.xref}\].[¶](#section-2.3-2.2.2.2){.pilcrow}
    :   

    Type:
    :   A list of Endpoint objects (see [Section
        4.3.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.3.3){.relref}
        of
        \[[RFC8006](#RFC8006){.xref}\])[¶](#section-2.3-2.2.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. If absent or empty, the redirect target applies to all hosts
        of the redirecting uCDN.[¶](#section-2.3-2.2.2.6){.pilcrow}
    :   

:   

Property:

:   dns-target[¶](#section-2.3-2.4.1){.pilcrow}

    []{.break}

    Description:
    :   Target CNAME record for DNS
        redirection.[¶](#section-2.3-2.4.2.2){.pilcrow}
    :   

    Type:
    :   DnsTarget object (see [Section
        2.4](#dns-target){.xref})[¶](#section-2.3-2.4.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. If the dns-target is absent or empty, the uCDN
        [MUST]{.bcp14} interpret it as \"no dns-target
        available\".[¶](#section-2.3-2.4.2.6){.pilcrow}
    :   

:   

Property:

:   http-target[¶](#section-2.3-2.6.1){.pilcrow}

    []{.break}

    Description:
    :   Target URI for an HTTP
        redirect.[¶](#section-2.3-2.6.2.2){.pilcrow}
    :   

    Type:
    :   HttpTarget object (see [Section
        2.5](#http-target){.xref})[¶](#section-2.3-2.6.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. If the http-target is absent or empty, the uCDN
        [MUST]{.bcp14} interpret it as \"no http-target
        available\".[¶](#section-2.3-2.6.2.6){.pilcrow}
    :   

:   

The following is an example of a Redirect Target capability object
serialization that advertises a dCDN target address that is attached to
a specific list of uCDN \"redirecting-hosts\". A uCDN host that is
included in that list can redirect to the advertised dCDN redirect
target. The capabilities object is serialized as a JSON object as
defined in [Section
5.1](https://www.rfc-editor.org/rfc/rfc8008#section-5.1){.relref} of
\[[RFC8008](#RFC8008){.xref}\].[¶](#section-2.3-3){.pilcrow}

::: {#section-2.3-4}
``` {.sourcecode .lang-json}
{
  "capabilities": [
    {
      "capability-type": "FCI.RedirectTarget",
      "capability-value": {
          "redirecting-hosts": [
             "a.service123.ucdn.example.com",
             "b.service123.ucdn.example.com"
          ],
          "dns-target": {
             "host": "service123.ucdn.dcdn.example.com"
          },
          "http-target": {
              "host": "us-east1.dcdn.example.com",
              "path-prefix": "/cache/1/",
              "include-redirecting-host": true
          }
      },
      "footprints": [
          <Footprint objects>
      ]
    }
  ]
}
```

[¶](#section-2.3-4){.pilcrow}
:::
:::
:::

::: {#dns-target}
::: {#section-2.4 .section}
### [2.4.](#section-2.4){.section-number .selfRef} [DnsTarget Object](#name-dnstarget-object){.section-name .selfRef} {#name-dnstarget-object}

The DnsTarget object gives the target address for the DNS response to
delegate from the uCDN to the dCDN.[¶](#section-2.4-1){.pilcrow}

[]{.break}

Property:

:   host[¶](#section-2.4-2.2.1){.pilcrow}

    []{.break}

    Description:
    :   The host property is a hostname or an IP address, without a port
        number.[¶](#section-2.4-2.2.2.2){.pilcrow}
    :   

    Type:
    :   Endpoint object as defined in [Section
        4.3.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.3.3){.relref}
        of \[[RFC8006](#RFC8006){.xref}\], with the limitation that it
        [SHOULD NOT]{.bcp14} include a port number and, in case a port
        number is present, the uCDN [MUST]{.bcp14} ignore
        it.[¶](#section-2.4-2.2.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   Yes.[¶](#section-2.4-2.2.2.6){.pilcrow}
    :   

:   

::: {#section-2.4.1 .section}
#### [2.4.1.](#section-2.4.1){.section-number .selfRef} [DnsTarget Example](#name-dnstarget-example){.section-name .selfRef} {#name-dnstarget-example}

The following is an example of the DnsTarget
object:[¶](#section-2.4.1-1){.pilcrow}

::: {#section-2.4.1-2}
``` {.sourcecode .lang-json}
{
   "host": "service123.ucdn.dcdn.example.com"
}
```

[¶](#section-2.4.1-2){.pilcrow}
:::

The following is an example of a DNS query for uCDN address
\"a.service123.ucdn.example.com\" and the corresponding CNAME
redirection response:[¶](#section-2.4.1-3){.pilcrow}

::: {#section-2.4.1-4 .artwork .art-text .alignLeft}
    Query:
    a.service123.ucdn.example.com:
    type A, class IN

    Response:
    NAME: a.service123.ucdn.example.com, TYPE: CNAME, CLASS: IN,
    TTL: 120, RDATA: service123.ucdn.dcdn.example.com

[¶](#section-2.4.1-4){.pilcrow}
:::
:::
:::
:::

::: {#http-target}
::: {#section-2.5 .section}
### [2.5.](#section-2.5){.section-number .selfRef} [HttpTarget Object](#name-httptarget-object){.section-name .selfRef} {#name-httptarget-object}

The HttpTarget object gives the necessary information to construct the
target Location URI for HTTP redirection.[¶](#section-2.5-1){.pilcrow}

[]{.break}

Property:

:   host[¶](#section-2.5-2.2.1){.pilcrow}

    []{.break}

    Description:
    :   Hostname or IP address and an optional port, i.e., the host and
        port of the authority component of the URI as described in
        [Section
        3.2](https://www.rfc-editor.org/rfc/rfc3986#section-3.2){.relref}
        of
        \[[RFC3986](#RFC3986){.xref}\].[¶](#section-2.5-2.2.2.2){.pilcrow}
    :   

    Type:
    :   Endpoint object as defined in [Section
        4.3.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.3.3){.relref}
        of
        \[[RFC8006](#RFC8006){.xref}\].[¶](#section-2.5-2.2.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   Yes.[¶](#section-2.5-2.2.2.6){.pilcrow}
    :   

:   

Property:

:   scheme[¶](#section-2.5-2.4.1){.pilcrow}

    []{.break}

    Description:
    :   A URI scheme to be used in the redirect response location
        construction. When present, the uCDN [MUST]{.bcp14} use the
        provided scheme in for HTTP redirection to the
        dCDN.[¶](#section-2.5-2.4.2.2){.pilcrow}
    :   

    Type:
    :   A URI scheme as defined in [Section
        3.1](https://www.rfc-editor.org/rfc/rfc3986#section-3.1){.relref}
        of \[[RFC3986](#RFC3986){.xref}\], represented as a JSON string.
        The scheme [MUST]{.bcp14} be either \"http\" or
        \"https\".[¶](#section-2.5-2.4.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. If this property is absent or empty, the uCDN request router
        [MUST]{.bcp14} use the same scheme as was used in the original
        request before redirection.[¶](#section-2.5-2.4.2.6){.pilcrow}
    :   

:   

Property:

:   path-prefix[¶](#section-2.5-2.6.1){.pilcrow}

    []{.break}

    Description:
    :   A path prefix for the HTTP redirect Location header. The
        original path is appended after this
        prefix.[¶](#section-2.5-2.6.2.2){.pilcrow}
    :   

    Type:
    :   A prefix of a path-absolute as defined in [Section
        3.3](https://www.rfc-editor.org/rfc/rfc3986#section-3.3){.relref}
        of \[[RFC3986](#RFC3986){.xref}\]. The prefix [MUST]{.bcp14} end
        with a trailing slash to indicate the end of the last path
        segment in the prefix.[¶](#section-2.5-2.6.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. If this property is absent or empty, the uCDN [MUST
        NOT]{.bcp14} prepend a path-prefix to the original content path,
        i.e., the original path [MUST]{.bcp14} appear in the Location
        URI right after the authority
        component.[¶](#section-2.5-2.6.2.6){.pilcrow}
    :   

:   

Property:

:   include-redirecting-host[¶](#section-2.5-2.8.1){.pilcrow}

    []{.break}

    Description:
    :   A flag indicating whether or not to include the redirecting host
        as the first path segment after the path-prefix. If set to true
        and a \"path-prefix\" is used, the uCDN redirecting host
        [MUST]{.bcp14} be added as a separate path segment after the
        path-prefix and before the original URL path. If set to true and
        there is no path-prefix, the uCDN redirecting host
        [MUST]{.bcp14} be prepended as the first path segment in the
        redirect URL.[¶](#section-2.5-2.8.2.2){.pilcrow}
    :   

    Type:
    :   Boolean.[¶](#section-2.5-2.8.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. Default value is False.[¶](#section-2.5-2.8.2.6){.pilcrow}
    :   

:   

::: {#section-2.5.1 .section}
#### [2.5.1.](#section-2.5.1){.section-number .selfRef} [HttpTarget Example](#name-httptarget-example){.section-name .selfRef} {#name-httptarget-example}

The following is an example of the HttpTarget object with a \"scheme\",
a \"path-prefix\", and \"include-redirecting-host\"
properties:[¶](#section-2.5.1-1){.pilcrow}

::: {#section-2.5.1-2}
``` {.sourcecode .lang-json}
{
   "host": "us-east1.dcdn.example.com",
   "scheme": "https",
   "path-prefix": "/cache/1/",
   "include-redirecting-host": true
}
```

[¶](#section-2.5.1-2){.pilcrow}
:::

The following is an example of an HTTP request for content at uCDN host
\"a.service123.ucdn.example.com\" and the corresponding HTTP response
with a Location header, used for redirecting the client to the dCDN,
constructed according to the HttpTarget object from the above
example:[¶](#section-2.5.1-3){.pilcrow}

::: {#section-2.5.1-4 .artwork .art-text .alignLeft}
    Request:
    GET /vod/1/movie.mp4 HTTP/1.1
    Host: a.service123.ucdn.example.com

    Response:
    HTTP/1.1 302 Found
    Location: https://us-east1.dcdn.example.com/cache/1/
    a.service123.ucdn.example.com/vod/1/movie.mp4

[¶](#section-2.5.1-4){.pilcrow}
:::
:::
:::
:::

::: {#redirect-target-usage-example}
::: {#section-2.6 .section}
### [2.6.](#section-2.6){.section-number .selfRef} [Usage Example](#name-usage-example){.section-name .selfRef} {#name-usage-example}

Before requests can be routed from the uCDN to the dCDN, the CDNs must
exchange service configurations between them. Using the MI, the uCDN
advertises out-of-band its hosts to the dCDN; each host is designated by
a hostname and has its own specific metadata (see [Section
4.1.2](https://www.rfc-editor.org/rfc/rfc8006#section-4.1.2){.relref} of
\[[RFC8006](#RFC8006){.xref}\]). Using the FCI, the dCDN advertises
(also out-of-band) the redirect target address defined in [Section
2.3](#redirect-target-capability-properties){.xref} for the relevant
uCDN hosts. The following is a generalized example of the message flow
between a uCDN and a dCDN. For simplicity, we focus on the sequence of
messages between the uCDN and dCDN and not on how they are
passed.[¶](#section-2.6-1){.pilcrow}

[]{#name-redirect-target-address-adv}

::: {#redirect}
::: {#section-2.6-2.1 .artwork .art-text .alignLeft}
      dCDN                                                    uCDN
        +                                                       +
        |                                                       |
    (1) | MI:  host: s123.ucdn.example.com                      |
        |      host-metadata: < metadata >                      |
        <-------------------------------------------------------+
        |                                                       |
    (2) | FCI:  capability-type: FCI.RedirectTarget             |
        |       redirecting-hosts: s123.ucdn.example.com        |
        |       target host: us-east1.dcdn.example.com          |
        +------------------------------------------------------->
        |                                                       |
        |                                                       |
        +                                                       +
:::

[Figure 1](#figure-1){.selfRef}: [Redirect Target Address
Advertisement](#name-redirect-target-address-adv){.selfRef}
:::

Explanation:[¶](#section-2.6-3){.pilcrow}

[]{.break}

\(1\)
:   The uCDN advertises a host (s123.ucdn.example.com) with the host
    metadata.[¶](#section-2.6-4.1){.pilcrow}
:   

\(2\)
:   The dCDN advertises its FCI objects to the uCDN, including a
    Redirect Target capability object that contains the redirect target
    address (us-east1.dcdn.example.com) specified for that uCDN
    host.[¶](#section-2.6-4.2){.pilcrow}
:   

Once the redirect target has been set, the uCDN can start redirecting
user requests to the dCDN. The following is a generic sequence of
redirection using the host and redirect target that were advertised in
[Figure 1](#redirect){.xref}.[¶](#section-2.6-5){.pilcrow}

[]{#name-generic-request-redirection}

::: {#generic}
::: {#section-2.6-6.1 .artwork .art-text .alignLeft}
    End User                  dCDN                   uCDN RR
        +                       +                       +
        |                       |                       |
    (1) | Request sent s123.ucdn.example.com            |
        +-----------------------+----------------------->
        |                       |                       |
    (2) | Redirect to us-east1.dcdn.example.com         |
        <-----------------------+-----------------------+
        |                       |                       |
    (3) | Request us-east1.dcdn.example.com             |
        +----------------------->                       |
        |                       |                       |
    (4) | Response              |                       |
        <-----------------------+                       |
        |                       |                       |
        +                       +                       +
:::

[Figure 2](#figure-2){.selfRef}: [Generic Request Redirection
Sequence](#name-generic-request-redirection){.selfRef}
:::

Explanation:[¶](#section-2.6-7){.pilcrow}

[]{.break}

\(1\)
:   The End User sends a request (DNS or HTTP) to the uCDN Request
    Router (RR).[¶](#section-2.6-8.1){.pilcrow}
:   

\(2\)
:   Using the previously advertised Redirect Target, the uCDN redirects
    the request to the dCDN.[¶](#section-2.6-8.2){.pilcrow}
:   

\(3\)
:   The End User sends a request to the
    dCDN.[¶](#section-2.6-8.3){.pilcrow}
:   

\(4\)
:   The dCDN either sends a response or reroutes it, for example, to a
    dCDN surrogate.[¶](#section-2.6-8.4){.pilcrow}
:   
:::
:::
:::
:::

::: {#fallback-target-metadata}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Fallback Target Server Address](#name-fallback-target-server-addr){.section-name .selfRef} {#name-fallback-target-server-addr}

Open Caching requires that the uCDN provides a fallback target server to
the dCDN to be used in cases where the dCDN cannot properly handle the
request. To avoid redirect loops, the fallback target server\'s address
at the uCDN [MUST]{.bcp14} be different from the original uCDN address
from which the client was redirected to the dCDN. The uCDN
[MUST]{.bcp14} avoid further redirection when receiving the client
request at the fallback target. The Fallback Target is defined as a
generic metadata object (see [Section
3.2](https://www.rfc-editor.org/rfc/rfc8006#section-3.2){.relref} of
\[[RFC8006](#RFC8006){.xref}\]).[¶](#section-3-1){.pilcrow}

Use cases:[¶](#section-3-2){.pilcrow}

-   [Failover: A dCDN request router receives a request but has no
    caches to which it can route the request. This can happen in the
    case of failures or temporary network
    overload.[¶](#section-3-3.1){.pilcrow}]{#section-3-3.1}
-   [No coverage: A dCDN request router receives a request from a client
    located in an area inside the footprint but not covered by the dCDN
    caches or outside the dCDN footprint coverage. In such cases, the
    router may choose to redirect the request back to the uCDN fallback
    address.[¶](#section-3-3.2){.pilcrow}]{#section-3-3.2}
-   [Error: A cache may receive a request that it cannot properly serve,
    for example, some of the metadata objects for that service were not
    properly acquired. In this case, the cache\'s \"default action\" may
    be to \"redirect back to
    uCDN\".[¶](#section-3-3.3){.pilcrow}]{#section-3-3.3}

The Fallback Target metadata object is used to indicate the target
address the dCDN should redirect a client to when falling back to the
uCDN. The fallback target address is represented as an Endpoint object
as defined in [Section
4.3.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.3.3){.relref} of
\[[RFC8006](#RFC8006){.xref}\].[¶](#section-3-4){.pilcrow}

In DNS redirection, a CNAME record is used as the fallback target
address.[¶](#section-3-5){.pilcrow}

In HTTP redirection, a hostname is used as the fallback target
address.[¶](#section-3-6){.pilcrow}

When using HTTP redirect to route a client request back to the uCDN, it
is the dCDN\'s responsibility to use the original URL path as the client
would have used for the original uCDN request, stripping, if needed, the
dCDN path-prefix and/or the uCDN hostname from the redirect URL that may
have been used to request the content from the
dCDN.[¶](#section-3-7){.pilcrow}

::: {#fallback-target-metadata-properties}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Properties of Fallback Target Generic Metadata Object](#name-properties-of-fallback-targ){.section-name .selfRef} {#name-properties-of-fallback-targ}

The MI.FallbackTarget generic metadata object consists of the following
two properties:[¶](#section-3.1-1){.pilcrow}

[]{.break}

Property:

:   host[¶](#section-3.1-2.2.1){.pilcrow}

    []{.break}

    Description:
    :   Target address to which the dCDN can redirect the
        client.[¶](#section-3.1-2.2.2.2){.pilcrow}
    :   

    Type:
    :   Endpoint object as defined in [Section
        4.3.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.3.3){.relref}
        of \[[RFC8006](#RFC8006){.xref}\], with the limitation that in
        case of DNS delegation, it [SHOULD NOT]{.bcp14} include a port
        number, and in case a port number is present, the dCDN
        [MUST]{.bcp14} ignore it.[¶](#section-3.1-2.2.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   Yes.[¶](#section-3.1-2.2.2.6){.pilcrow}
    :   

:   

Property:

:   scheme[¶](#section-3.1-2.4.1){.pilcrow}

    []{.break}

    Description:
    :   A URI scheme to be used in the redirect response location
        construction. When present, the dCDN [MUST]{.bcp14} use this
        scheme in case of HTTP redirection to the uCDN fallback
        address.[¶](#section-3.1-2.4.2.2){.pilcrow}
    :   

    Type:
    :   A URI scheme as defined in [Section
        3.1](https://www.rfc-editor.org/rfc/rfc3986#section-3.1){.relref}
        of \[[RFC3986](#RFC3986){.xref}\], represented as a JSON string.
        The scheme [MUST]{.bcp14} be either \"http\" or
        \"https\".[¶](#section-3.1-2.4.2.4){.pilcrow}
    :   

    Mandatory-to-Specify:
    :   No. In case of HTTP redirection to fallback, if this property is
        absent or empty, the dCDN redirecting entity [MUST]{.bcp14} use
        the same scheme as in the request received by the
        dCDN.[¶](#section-3.1-2.4.2.6){.pilcrow}
    :   

:   

The following is an example of an MI.FallbackTarget generic metadata
object that designates the host address the dCDN should use as fallback
address to redirect back to the uCDN:[¶](#section-3.1-3){.pilcrow}

::: {#section-3.1-4}
``` {.sourcecode .lang-json}
{
    "generic-metadata-type": "MI.FallbackTarget",
    "generic-metadata-value":
    {
        "host": "fallback-a.service123.ucdn.example",
        "scheme": "https"
    }
}
```

[¶](#section-3.1-4){.pilcrow}
:::
:::
:::

::: {#fallback-address-usage-example}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Usage Example](#name-usage-example-2){.section-name .selfRef} {#name-usage-example-2}

The uCDN advertises out-of-band the fallback target address to the dCDN,
so that the dCDN may redirect a request back to the uCDN in case the
dCDN cannot serve it. Using the MI, the uCDN advertises its hosts to the
dCDN, along with their specific host metadata (see [Section
4.1.2](https://www.rfc-editor.org/rfc/rfc8006#section-4.1.2){.relref} of
\[[RFC8006](#RFC8006){.xref}\]). The Fallback Target generic metadata
object is encapsulated within the \"host-metadata\" property of each
host. The following is an example of a message flow between a uCDN and a
dCDN. For simplicity, we focus on the sequence of messages between the
uCDN and dCDN, not on how they are passed.[¶](#section-3.2-1){.pilcrow}

[]{#name-advertisement-of-host-metad}

::: {#fallback}
::: {#section-3.2-2.1 .artwork .art-text .alignLeft}
      dCDN                                                    uCDN
        +                                                       +
        |                                                       |
    (1) | MI:  host: s123.ucdn.example.com                      |
        |      host-metadata:                                   |
        |          < metadata objects >                         |
        |          < MI.FallbackTarget                          |
        |            host: fallback-a.service123.ucdn.example > |
        |          < metadata objects >                         |
        <-------------------------------------------------------+
        |                                                       |
    (2) | FCI:  capability-type: FCI.RedirectTarget             |
        |       redirecting-hosts: s123.ucdn.example.com        |
        |       target host: us-east1.dcdn.example.com          |
        +------------------------------------------------------->
        |                                                       |
        |                                                       |
        +                                                       +
:::

[Figure 3](#figure-3){.selfRef}: [Advertisement of Host Metadata with
Fallback Target](#name-advertisement-of-host-metad){.selfRef}
:::

Explanation:[¶](#section-3.2-3){.pilcrow}

[]{.break}

\(1\)
:   The uCDN advertises a host (s123.ucdn.example.com) with the host
    metadata. The host-metadata property contains an MI.FallbackTarget
    generic metadata object.[¶](#section-3.2-4.1){.pilcrow}
:   

\(2\)
:   The dCDN advertises its FCI objects to the uCDN, including a
    Redirect Target capability object that contains the redirect target
    address (us-east1.dcdn.example.com) specified for that uCDN
    host.[¶](#section-3.2-4.2){.pilcrow}
:   

The following is a generic sequence of redirection using the
configurations that were advertised in [Figure 3](#fallback){.xref}. In
this case, the dCDN redirects back to the uCDN fallback target
address.[¶](#section-3.2-5){.pilcrow}

[]{#name-redirection-to-fallback-tar}

::: {#redirection}
::: {#section-3.2-6.1 .artwork .art-text .alignLeft}
    End User              dCDN            uCDN fallback          uCDN RR
        +                   +                   +                   +
        |                   |                   |                   |
    (1) | Request sent s123.ucdn.example.com    |                   |
        +-------------------+-------------------+------------------->
        |                   |                   |                   |
    (2) | Redirect to us-east1.dcdn.example.com |                   |
        <-------------------+-------------------+-------------------+
        |                   |                   |                   |
    (3) | Request us-east1.dcdn.example.com     |                   |
        +------------------->                   |                   |
        |                   |                   |                   |
    (4) | Redirect back to fallback-a.service123.ucdn.example       |
        <-------------------+                   |                   |
        |                   |                   |                   |
    (5) | Request fallback-a.service123.ucdn.example                |
        +--------------------------------------->                   |
        |                   |                   |                   |
    (6) | Response          |                   |                   |
        <-------------------+-------------------+                   |
        |                   |                   |                   |
        +                   +                   +                   +
:::

[Figure 4](#figure-4){.selfRef}: [Redirection to Fallback
Target](#name-redirection-to-fallback-tar){.selfRef}
:::

Explanation:[¶](#section-3.2-7){.pilcrow}

[]{.break}

\(1\)
:   The End User sends a request (DNS or HTTP) to the uCDN Request
    Router (RR).[¶](#section-3.2-8.1){.pilcrow}
:   

\(2\)
:   Using the previously advertised Redirect Target, the uCDN redirects
    the request to the dCDN.[¶](#section-3.2-8.2){.pilcrow}
:   

\(3\)
:   The End User sends a request to the
    dCDN.[¶](#section-3.2-8.3){.pilcrow}
:   

\(4\)
:   The dCDN cannot handle the request and therefore redirects it back
    to the uCDN fallback target address.[¶](#section-3.2-8.4){.pilcrow}
:   

\(5\)
:   The End User sends the request to the uCDN fallback target
    address.[¶](#section-3.2-8.5){.pilcrow}
:   

\(6\)
:   The uCDN either sends a response or reroutes it, for example, to a
    uCDN surrogate.[¶](#section-3.2-8.6){.pilcrow}
:   
:::
:::

::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [uCDN Addressing Considerations](#name-ucdn-addressing-considerati){.section-name .selfRef} {#name-ucdn-addressing-considerati}

When advertising fallback addresses to the dCDN, the uCDN
[SHOULD]{.bcp14} consider the failure use cases that may lead the dCDN
to route requests to uCDN fallback. In extreme dCDN network failures or
under denial-of-service (DoS) attacks, requests coming from a large
segment or multiple segments of the dCDN may be routed back to the uCDN.
The uCDN [SHOULD]{.bcp14} therefore design its fallback addressing
scheme and its available resources accordingly. A favorable approach
would be for the uCDN to use a different fallback target address for
each uCDN host, enabling it to load balance the requests using the same
methods as it would for its original hosts. See Sections
[4.1.2](https://www.rfc-editor.org/rfc/rfc8006#section-4.1.2){.relref}
and
[4.1.3](https://www.rfc-editor.org/rfc/rfc8006#section-4.1.3){.relref}
of \[[RFC8006](#RFC8006){.xref}\] for a detailed description of how to
use GenericMetadata objects within the HostMatch object advertised in
the HostIndex of the uCDN.[¶](#section-3.3-1){.pilcrow}
:::
:::
:::

::: {#IANA}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#IANA.payload}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [CDNI Payload Types](#name-cdni-payload-types){.section-name .selfRef} {#name-cdni-payload-types}

IANA has registered the following CDNI Payload Types in the \"CDNI
Payload Types\" registry defined in
\[[RFC7736](#RFC7736){.xref}\]:[¶](#section-4.1-1){.pilcrow}

  Payload Type         Specification
  -------------------- ---------------
  FCI.RedirectTarget   RFC 8804
  MI.FallbackTarget    RFC 8804

  : [Table 1](#table-1){.selfRef}

::: {#IANA.payload.RedirectTarget}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [CDNI FCI RedirectTarget Payload Type](#name-cdni-fci-redirecttarget-pay){.section-name .selfRef} {#name-cdni-fci-redirecttarget-pay}

[]{.break}

Purpose:
:   The purpose of this payload type is to distinguish FCI advertisement
    objects for redirect target.[¶](#section-4.1.1-1.2){.pilcrow}
:   

Interface:
:   FCI[¶](#section-4.1.1-1.4){.pilcrow}
:   

Encoding:
:   See [Section
    2.3](#redirect-target-capability-properties){.xref}.[¶](#section-4.1.1-1.6){.pilcrow}
:   
:::
:::

::: {#IANA.payload.FallbackTarget}
::: {#section-4.1.2 .section}
#### [4.1.2.](#section-4.1.2){.section-number .selfRef} [CDNI MI FallbackTarget Payload Type](#name-cdni-mi-fallbacktarget-payl){.section-name .selfRef} {#name-cdni-mi-fallbacktarget-payl}

[]{.break}

Purpose:
:   The purpose of this payload type is to distinguish FallbackTarget MI
    objects (and any associated capability
    advertisement).[¶](#section-4.1.2-1.2){.pilcrow}
:   

Interface:
:   MI/FCI[¶](#section-4.1.2-1.4){.pilcrow}
:   

Encoding:
:   See [Section
    3.1](#fallback-target-metadata-properties){.xref}.[¶](#section-4.1.2-1.6){.pilcrow}
:   
:::
:::
:::
:::
:::
:::

::: {#Security}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This specification defines extensions to the CDNI Metadata Interface
(MI) and the Footprint & Capabilities Advertisement interface (FCI). As
such, it is subject to the security and privacy considerations defined
in [Section
8](https://www.rfc-editor.org/rfc/rfc8006#section-8){.relref} of
\[[RFC8006](#RFC8006){.xref}\] and in [Section
7](https://www.rfc-editor.org/rfc/rfc8008#section-7){.relref} of
\[[RFC8008](#RFC8008){.xref}\], respectively.[¶](#section-5-1){.pilcrow}

::: {#Privacy}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Confidentiality and Privacy](#name-confidentiality-and-privacy){.section-name .selfRef} {#name-confidentiality-and-privacy}

The Redirect Target capability object potentially reveals information
about the internal structure of the dCDN network. A third party could
intercept the FCI transactions and use the information to attack the
dCDN. The same is also true for the Fallback Target generic metadata
object, as it may reveal information about the internal structure of the
uCDN, exposing it to external exploits. Implementations of the FCI and
MI [MUST]{.bcp14} therefore use strong authentication and encryption and
strictly follow the directions for securing the interface as defined for
the Metadata Interface in [Section
8.3](https://www.rfc-editor.org/rfc/rfc8006#section-8.3){.relref} of
\[[RFC8006](#RFC8006){.xref}\].[¶](#section-5.1-1){.pilcrow}
:::
:::
:::
:::

::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC1034\]
:   [Mockapetris, P.]{.refAuthor}, [\"Domain names - concepts and
    facilities\"]{.refTitle}, [STD 13]{.seriesInfo}, [RFC
    1034]{.seriesInfo}, [DOI 10.17487/RFC1034]{.seriesInfo}, November
    1987, \<<https://www.rfc-editor.org/info/rfc1034>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC3986\]
:   [Berners-Lee, T.]{.refAuthor}[, Fielding, R.]{.refAuthor}[, and L.
    Masinter]{.refAuthor}, [\"Uniform Resource Identifier (URI): Generic
    Syntax\"]{.refTitle}, [STD 66]{.seriesInfo}, [RFC
    3986]{.seriesInfo}, [DOI 10.17487/RFC3986]{.seriesInfo}, January
    2005, \<<https://www.rfc-editor.org/info/rfc3986>\>.
:   

\[RFC6707\]
:   [Niven-Jenkins, B.]{.refAuthor}[, Le Faucheur, F.]{.refAuthor}[,
    and N. Bitar]{.refAuthor}, [\"Content Distribution Network
    Interconnection (CDNI) Problem Statement\"]{.refTitle}, [RFC
    6707]{.seriesInfo}, [DOI 10.17487/RFC6707]{.seriesInfo}, September
    2012, \<<https://www.rfc-editor.org/info/rfc6707>\>.
:   

\[RFC7231\]
:   [Fielding, R., Ed.]{.refAuthor}[ and J. Reschke, Ed.]{.refAuthor},
    [\"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
    Content\"]{.refTitle}, [RFC 7231]{.seriesInfo}, [DOI
    10.17487/RFC7231]{.seriesInfo}, June 2014,
    \<<https://www.rfc-editor.org/info/rfc7231>\>.
:   

\[RFC7336\]
:   [Peterson, L.]{.refAuthor}[, Davie, B.]{.refAuthor}[, and R. van
    Brandenburg, Ed.]{.refAuthor}, [\"Framework for Content Distribution
    Network Interconnection (CDNI)\"]{.refTitle}, [RFC
    7336]{.seriesInfo}, [DOI 10.17487/RFC7336]{.seriesInfo}, August
    2014, \<<https://www.rfc-editor.org/info/rfc7336>\>.
:   

\[RFC7975\]
:   [Niven-Jenkins, B., Ed.]{.refAuthor}[ and R. van Brandenburg,
    Ed.]{.refAuthor}, [\"Request Routing Redirection Interface for
    Content Delivery Network (CDN) Interconnection\"]{.refTitle}, [RFC
    7975]{.seriesInfo}, [DOI 10.17487/RFC7975]{.seriesInfo}, October
    2016, \<<https://www.rfc-editor.org/info/rfc7975>\>.
:   

\[RFC8006\]
:   [Niven-Jenkins, B.]{.refAuthor}[, Murray, R.]{.refAuthor}[,
    Caulfield, M.]{.refAuthor}[, and K. Ma]{.refAuthor}, [\"Content
    Delivery Network Interconnection (CDNI) Metadata\"]{.refTitle}, [RFC
    8006]{.seriesInfo}, [DOI 10.17487/RFC8006]{.seriesInfo}, December
    2016, \<<https://www.rfc-editor.org/info/rfc8006>\>.
:   

\[RFC8007\]
:   [Murray, R.]{.refAuthor}[ and B. Niven-Jenkins]{.refAuthor},
    [\"Content Delivery Network Interconnection (CDNI) Control Interface
    / Triggers\"]{.refTitle}, [RFC 8007]{.seriesInfo}, [DOI
    10.17487/RFC8007]{.seriesInfo}, December 2016,
    \<<https://www.rfc-editor.org/info/rfc8007>\>.
:   

\[RFC8008\]
:   [Seedorf, J.]{.refAuthor}[, Peterson, J.]{.refAuthor}[,
    Previdi, S.]{.refAuthor}[, van Brandenburg, R.]{.refAuthor}[, and K.
    Ma]{.refAuthor}, [\"Content Delivery Network Interconnection (CDNI)
    Request Routing: Footprint and Capabilities Semantics\"]{.refTitle},
    [RFC 8008]{.seriesInfo}, [DOI 10.17487/RFC8008]{.seriesInfo},
    December 2016, \<<https://www.rfc-editor.org/info/rfc8008>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[OC-RR\]
:   [Finkelman, O., Ed.]{.refAuthor}[, Hofmann, J.]{.refAuthor}[,
    Klein, E.]{.refAuthor}[, Mishra, S.]{.refAuthor}[,
    Ma, K.]{.refAuthor}[, Sahar, D.]{.refAuthor}[, and B.
    Zurat]{.refAuthor}, [\"Open Cache Request Routing Functional
    Specification\"]{.refTitle}, [Version 1.1]{.seriesInfo}, November
    2016,
    \<<https://www.streamingvideoalliance.org/books/open-cache-request-routing-functional-specification/>\>.
:   

\[OCWG\]
:   [Streaming Video Alliance]{.refAuthor}, [\"Open
    Caching\"]{.refTitle},
    \<<https://www.streamingvideoalliance.org/technical-groups/open-caching/>\>.
:   

\[RFC7736\]
:   [Ma, K.]{.refAuthor}, [\"Content Delivery Network Interconnection
    (CDNI) Media Type Registration\"]{.refTitle}, [RFC
    7736]{.seriesInfo}, [DOI 10.17487/RFC7736]{.seriesInfo}, December
    2015, \<<https://www.rfc-editor.org/info/rfc7736>\>.
:   

\[RFC7871\]
:   [Contavalli, C.]{.refAuthor}[, van der Gaast, W.]{.refAuthor}[,
    Lawrence, D.]{.refAuthor}[, and W. Kumari]{.refAuthor}, [\"Client
    Subnet in DNS Queries\"]{.refTitle}, [RFC 7871]{.seriesInfo}, [DOI
    10.17487/RFC7871]{.seriesInfo}, May 2016,
    \<<https://www.rfc-editor.org/info/rfc7871>\>.
:   

\[SVA\]
:   [\"Streaming Video Alliance\"]{.refTitle},
    \<<https://www.streamingvideoalliance.org>\>.
:   
:::
:::

::: {#Acknowledgements}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors thank [Nir B. Sopher]{.contact-name} for reality checks
against production use cases; his contribution is significant to this
document. The authors also thank [Ben Niven-Jenkins]{.contact-name} for
his review and feedback and [Kevin J. Ma]{.contact-name} for his
guidance throughout the development of this document, including his
regular reviews.[¶](#section-appendix.a-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.b .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Ori Finkelman]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Qwilt]{.org}
:::

::: {.left dir="auto"}
[6, Ha\'harash]{.street-address}
:::

::: {.left dir="auto"}
[Hod HaSharon]{.locality} [4524079]{.postal-code}
:::

::: {.left dir="auto"}
[Israel]{.country-name}
:::

::: email
Email: <ori.finkelman.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Sanjay Mishra]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Verizon]{.org}
:::

::: {.left dir="auto"}
[13100 Columbia Pike]{.street-address}
:::

::: {.left dir="auto"}
[Silver Spring]{.locality}, [MD]{.region} [20904]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <sanjay.mishra@verizon.com>
:::
:::
:::
