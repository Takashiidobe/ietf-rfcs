  RFC 8986           SRv6 Network Programming   February 2021
  ------------------ -------------------------- ---------------
  Filsfils, et al.   Standards Track            \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8986](https://www.rfc-editor.org/rfc/rfc8986){.eref}

Category:
:   Standards Track

Published:
:   February 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    C. Filsfils, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    P. Camarillo, [Ed.]{.editor}
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    J. Leddy
    :::

    ::: org
    Akamai Technologies
    :::
    :::

    ::: author
    ::: author-name
    D. Voyer
    :::

    ::: org
    Bell Canada
    :::
    :::

    ::: author
    ::: author-name
    S. Matsushima
    :::

    ::: org
    SoftBank
    :::
    :::

    ::: author
    ::: author-name
    Z. Li
    :::

    ::: org
    Huawei Technologies
    :::
    :::
:::

# RFC 8986 {#rfcnum}

# Segment Routing over IPv6 (SRv6) Network Programming {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The Segment Routing over IPv6 (SRv6) Network Programming framework
enables a network operator or an application to specify a packet
processing program by encoding a sequence of instructions in the IPv6
packet header.[¶](#section-abstract-1){.pilcrow}

Each instruction is implemented on one or several nodes in the network
and identified by an SRv6 Segment Identifier in the
packet.[¶](#section-abstract-2){.pilcrow}

This document defines the SRv6 Network Programming concept and specifies
the base set of SRv6 behaviors that enables the creation of
interoperable overlays with underlay
optimization.[¶](#section-abstract-3){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8986>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [SRv6
    SID](#name-srv6-sid){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [SID
        Format](#name-sid-format){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [SID Allocation within an SR
        Domain](#name-sid-allocation-within-an-sr){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [SID
        Reachability](#name-sid-reachability){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [SR Endpoint
    Behaviors](#name-sr-endpoint-behaviors){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [End:
        Endpoint](#name-end-endpoint){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [Upper-Layer
            Header](#name-upper-layer-header){.xref}[¶](#section-toc.1-1.4.2.1.2.1.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [End.X: L3
        Cross-Connect](#name-endx-l3-cross-connect){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [End.T: Specific IPv6 Table
        Lookup](#name-endt-specific-ipv6-table-lo){.xref}[¶](#section-toc.1-1.4.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [End.DX6: Decapsulation and IPv6
        Cross-Connect](#name-enddx6-decapsulation-and-ip){.xref}[¶](#section-toc.1-1.4.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [End.DX4: Decapsulation and IPv4
        Cross-Connect](#name-enddx4-decapsulation-and-ip){.xref}[¶](#section-toc.1-1.4.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [End.DT6: Decapsulation and
        Specific IPv6 Table
        Lookup](#name-enddt6-decapsulation-and-sp){.xref}[¶](#section-toc.1-1.4.2.6.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.7}
        [4.7](#section-4.7){.xref}.  [End.DT4: Decapsulation and
        Specific IPv4 Table
        Lookup](#name-enddt4-decapsulation-and-sp){.xref}[¶](#section-toc.1-1.4.2.7.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.8}
        [4.8](#section-4.8){.xref}.  [End.DT46: Decapsulation and
        Specific IP Table
        Lookup](#name-enddt46-decapsulation-and-s){.xref}[¶](#section-toc.1-1.4.2.8.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.9}
        [4.9](#section-4.9){.xref}.  [End.DX2: Decapsulation and L2
        Cross-Connect](#name-enddx2-decapsulation-and-l2){.xref}[¶](#section-toc.1-1.4.2.9.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.10}
        [4.10](#section-4.10){.xref}. [End.DX2V: Decapsulation and VLAN
        L2 Table
        Lookup](#name-enddx2v-decapsulation-and-v){.xref}[¶](#section-toc.1-1.4.2.10.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.11}
        [4.11](#section-4.11){.xref}. [End.DT2U: Decapsulation and
        Unicast MAC L2 Table
        Lookup](#name-enddt2u-decapsulation-and-u){.xref}[¶](#section-toc.1-1.4.2.11.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.12}
        [4.12](#section-4.12){.xref}. [End.DT2M: Decapsulation and L2
        Table
        Flooding](#name-enddt2m-decapsulation-and-l){.xref}[¶](#section-toc.1-1.4.2.12.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.13}
        [4.13](#section-4.13){.xref}. [End.B6.Encaps: Endpoint Bound to
        an SRv6 Policy with
        Encapsulation](#name-endb6encaps-endpoint-bound-){.xref}[¶](#section-toc.1-1.4.2.13.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.14}
        [4.14](#section-4.14){.xref}. [End.B6.Encaps.Red: End.B6.Encaps
        with Reduced
        SRH](#name-endb6encapsred-endb6encaps-){.xref}[¶](#section-toc.1-1.4.2.14.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.15}
        [4.15](#section-4.15){.xref}. [End.BM: Endpoint Bound to an
        SR-MPLS
        Policy](#name-endbm-endpoint-bound-to-an-){.xref}[¶](#section-toc.1-1.4.2.15.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.16}
        [4.16](#section-4.16){.xref}. [Flavors](#name-flavors){.xref}[¶](#section-toc.1-1.4.2.16.1){.pilcrow}

        -   ::: {#section-toc.1-1.4.2.16.2.1}
            [4.16.1](#section-4.16.1){.xref}.  [PSP: Penultimate Segment
            Pop of the
            SRH](#name-psp-penultimate-segment-pop){.xref}[¶](#section-toc.1-1.4.2.16.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.16.2.2}
            [4.16.2](#section-4.16.2){.xref}.  [USP: Ultimate Segment
            Pop of the
            SRH](#name-usp-ultimate-segment-pop-of){.xref}[¶](#section-toc.1-1.4.2.16.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.4.2.16.2.3}
            [4.16.3](#section-4.16.3){.xref}.  [USD: Ultimate Segment
            Decapsulation](#name-usd-ultimate-segment-decaps){.xref}[¶](#section-toc.1-1.4.2.16.2.3.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [SR Policy Headend
    Behaviors](#name-sr-policy-headend-behaviors){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [H.Encaps: SR Headend with
        Encapsulation in an SR
        Policy](#name-hencaps-sr-headend-with-enc){.xref}[¶](#section-toc.1-1.5.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [H.Encaps.Red: H.Encaps with
        Reduced
        Encapsulation](#name-hencapsred-hencaps-with-red){.xref}[¶](#section-toc.1-1.5.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [H.Encaps.L2: H.Encaps Applied to
        Received L2
        Frames](#name-hencapsl2-hencaps-applied-t){.xref}[¶](#section-toc.1-1.5.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.5.2.4}
        [5.4](#section-5.4){.xref}.  [H.Encaps.L2.Red: H.Encaps.Red
        Applied to Received L2
        Frames](#name-hencapsl2red-hencapsred-app){.xref}[¶](#section-toc.1-1.5.2.4.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Counters](#name-counters){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Flow-Based Hash
    Computation](#name-flow-based-hash-computation){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Control
    Plane](#name-control-plane){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [IGP](#name-igp){.xref}[¶](#section-toc.1-1.8.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [BGP-LS](#name-bgp-ls){.xref}[¶](#section-toc.1-1.8.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [BGP
        IP/VPN/EVPN](#name-bgp-ip-vpn-evpn){.xref}[¶](#section-toc.1-1.8.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [8.4](#section-8.4){.xref}.  [Summary](#name-summary){.xref}[¶](#section-toc.1-1.8.2.4.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Ethernet Next Header
        Type](#name-ethernet-next-header-type){.xref}[¶](#section-toc.1-1.10.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [SRv6 Endpoint Behaviors
        Registry](#name-srv6-endpoint-behaviors-reg){.xref}[¶](#section-toc.1-1.10.2.2.1){.pilcrow}

        -   ::: {#section-toc.1-1.10.2.2.2.1}
            [10.2.1](#section-10.2.1){.xref}.  [Registration
            Procedures](#name-registration-procedures){.xref}[¶](#section-toc.1-1.10.2.2.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.10.2.2.2.2}
            [10.2.2](#section-10.2.2){.xref}.  [Initial
            Registrations](#name-initial-registrations){.xref}[¶](#section-toc.1-1.10.2.2.2.2.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [References](#name-references){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}

    -   ::: {#section-toc.1-1.11.2.1}
        [11.1](#section-11.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.11.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.11.2.2}
        [11.2](#section-11.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.11.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.12}
    [](#section-appendix.a){.xref}[Acknowledgements](#name-acknowledgements){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.13}
    [](#section-appendix.b){.xref}[Contributors](#name-contributors){.xref}[¶](#section-toc.1-1.13.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.14}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.14.1){.pilcrow}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Segment Routing \[[RFC8402](#RFC8402){.xref}\] leverages the source
routing paradigm. An ingress node steers a packet through an ordered
list of instructions, called \"segments\". Each one of these
instructions represents a function to be called at a specific location
in the network. A function is locally defined on the node where it is
executed and may range from simply moving forward in the segment list to
any complex user-defined behavior. Network Programming combines Segment
Routing functions, both simple and complex, to achieve a networking
objective that goes beyond mere packet
routing.[¶](#section-1-1){.pilcrow}

This document defines the SRv6 Network Programming concept and specifies
the main Segment Routing behaviors to enable the creation of
interoperable overlays with underlay
optimization.[¶](#section-1-2){.pilcrow}

\[[SRV6-NET-PGM-ILLUST](#I-D.filsfils-spring-srv6-net-pgm-illustration){.xref}\]
illustrates the concepts defined in this
document.[¶](#section-1-3){.pilcrow}

Familiarity with the [Segment Routing Header](#RFC8754){.xref}
\[[RFC8754](#RFC8754){.xref}\] is expected.[¶](#section-1-4){.pilcrow}
:::

::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The following terms used within this document are defined in
\[[RFC8402](#RFC8402){.xref}\]: Segment Routing (SR), SR Domain, Segment
ID (SID), SRv6, SRv6 SID, SR Policy, Prefix-SID, and
Adj-SID.[¶](#section-2-1){.pilcrow}

The following terms used within this document are defined in
\[[RFC8754](#RFC8754){.xref}\]: Segment Routing Header (SRH), SR source
node, transit node, SR Segment Endpoint Node, Reduced SRH, Segments
Left, and Last Entry.[¶](#section-2-2){.pilcrow}

The following terms are used in this document as defined
below:[¶](#section-2-3){.pilcrow}

[]{.break}

FIB:
:   Forwarding Information Base. A FIB lookup is a lookup in the
    forwarding table.[¶](#section-2-4.2){.pilcrow}
:   

SA:
:   Source Address[¶](#section-2-4.4){.pilcrow}
:   

DA:
:   Destination Address[¶](#section-2-4.6){.pilcrow}
:   

L3:
:   Layer 3[¶](#section-2-4.8){.pilcrow}
:   

L2:
:   Layer 2[¶](#section-2-4.10){.pilcrow}
:   

MAC:
:   Media Access Control[¶](#section-2-4.12){.pilcrow}
:   

EVPN:
:   Ethernet VPN[¶](#section-2-4.14){.pilcrow}
:   

ESI:
:   Ethernet Segment Identifier[¶](#section-2-4.16){.pilcrow}
:   

Per-CE VPN label:
:   A single label for each attachment circuit that is shared by all
    routes with the same \"outgoing attachment circuit\" ([Section
    4.3.2](https://www.rfc-editor.org/rfc/rfc4364#section-4.3.2){.relref}
    of \[[RFC4364](#RFC4364){.xref}\])[¶](#section-2-4.18){.pilcrow}
:   

Per-VRF VPN label:
:   A single label for the entire VPN Routing and Forwarding (VRF) table
    that is shared by all routes from that VRF ([Section
    4.3.2](https://www.rfc-editor.org/rfc/rfc4364#section-4.3.2){.relref}
    of \[[RFC4364](#RFC4364){.xref}\])[¶](#section-2-4.20){.pilcrow}
:   

SL:
:   The Segments Left field of the SRH[¶](#section-2-4.22){.pilcrow}
:   

SRv6 SID function:
:   The function part of the SID is an opaque identification of a local
    behavior bound to the SID. It is formally defined in [Section
    3.1](#sid_format){.xref} of this
    document.[¶](#section-2-4.24){.pilcrow}
:   

SRv6 Endpoint behavior:

:   A packet processing behavior executed at an SRv6 Segment Endpoint
    Node. [Section 4](#behaviors){.xref} of this document defines SRv6
    Endpoint behaviors related to traffic-engineering and overlay use
    cases. Other behaviors (e.g., service programming) are outside the
    scope of this document.[¶](#section-2-4.26.1){.pilcrow}

:   

An SR Policy is resolved to a SID list. A SID list is represented as
\<S1, S2, S3> where S1 is the first SID to visit, S2 is the second SID
to visit, and S3 is the last SID to visit along the SR
path.[¶](#section-2-5){.pilcrow}

(SA,DA) (S3, S2, S1; SL) represents an IPv6 packet
with:[¶](#section-2-6){.pilcrow}

-   [Source Address (SA), Destination Address (DA), and next header
    (SRH).[¶](#section-2-7.1){.pilcrow}]{#section-2-7.1}

-   ::: {#section-2-7.2}
    SRH with SID list \<S1, S2, S3> with Segments Left =
    SL.[¶](#section-2-7.2.1){.pilcrow}

    Note the difference between the \<\> and () symbols: \<S1, S2, S3>
    represents a SID list where S1 is the first SID and S3 is the last
    SID to traverse. (S3, S2, S1; SL) represents the same SID list but
    encoded in the SRH format where the rightmost SID in the SRH is the
    first SID and the leftmost SID in the SRH is the last SID. When
    referring to an SR Policy in a high-level use case, it is simpler to
    use the \<S1, S2, S3> notation. When referring to an illustration of
    the detailed packet behavior, the (S3, S2, S1; SL) notation is more
    convenient.[¶](#section-2-7.2.2){.pilcrow}
    :::

-   [The payload of the packet is
    omitted.[¶](#section-2-7.3){.pilcrow}]{#section-2-7.3}

::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2.1-1){.pilcrow}
:::
:::

::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [SRv6 SID](#name-srv6-sid){.section-name .selfRef} {#name-srv6-sid}

\[[RFC8402](#RFC8402){.xref}\] defines an SRv6 Segment Identifier as an
IPv6 address explicitly associated with the
segment.[¶](#section-3-1){.pilcrow}

When an SRv6 SID is in the Destination Address field of an IPv6 header
of a packet, it is routed through transit nodes in an IPv6 network as an
IPv6 address.[¶](#section-3-2){.pilcrow}

Its processing is defined in [Section
4.3](https://www.rfc-editor.org/rfc/rfc8754#section-4.3){.relref} of
\[[RFC8754](#RFC8754){.xref}\] and reproduced here as a
reminder:[¶](#section-3-3){.pilcrow}

> Without constraining the details of an implementation, the SR segment
> endpoint node creates Forwarding Information Base (FIB) entries for
> its local SIDs.[¶](#section-3-4.1){.pilcrow}
>
> When an SRv6-capable node receives an IPv6 packet, it performs a
> longest-prefix-match lookup on the packet\'s destination address. This
> lookup can return any of the following:[¶](#section-3-4.2){.pilcrow}
>
> -   [A FIB entry that represents a locally instantiated SRv6
>     SID[¶](#section-3-4.3.1){.pilcrow}]{#section-3-4.3.1}
> -   [A FIB entry that represents a local interface, not locally
>     instantiated as an SRv6
>     SID[¶](#section-3-4.3.2){.pilcrow}]{#section-3-4.3.2}
> -   [A FIB entry that represents a nonlocal
>     route[¶](#section-3-4.3.3){.pilcrow}]{#section-3-4.3.3}
> -   [No Match[¶](#section-3-4.3.4){.pilcrow}]{#section-3-4.3.4}

[Section 4](#behaviors){.xref} of this document defines a new set of
SRv6 SID behaviors in addition to that defined in [Section
4.3.1](https://www.rfc-editor.org/rfc/rfc8754#section-4.3.1){.relref} of
\[[RFC8754](#RFC8754){.xref}\].[¶](#section-3-5){.pilcrow}

::: {#sid_format}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [SID Format](#name-sid-format){.section-name .selfRef} {#name-sid-format}

This document defines an SRv6 SID as consisting of LOC:FUNCT:ARG, where
a locator (LOC) is encoded in the L most significant bits of the SID,
followed by F bits of function (FUNCT) and A bits of arguments (ARG). L,
the locator length, is flexible, and an operator is free to use the
locator length of their choice. F and A may be any value as long as
L+F+A \<= 128. When L+F+A is less than 128, then the remaining bits of
the SID [MUST]{.bcp14} be zero.[¶](#section-3.1-1){.pilcrow}

A locator may be represented as B:N where B is the SRv6 SID block (IPv6
prefix allocated for SRv6 SIDs by the operator) and N is the identifier
of the parent node instantiating the SID.[¶](#section-3.1-2){.pilcrow}

When the LOC part of the SRv6 SIDs is routable, it leads to the node,
which instantiates the SID.[¶](#section-3.1-3){.pilcrow}

The FUNCT is an opaque identification of a local behavior bound to the
SID.[¶](#section-3.1-4){.pilcrow}

The term \"function\" refers to the bit string in the SRv6 SID. The term
\"behavior\" identifies the behavior bound to the SID. Some behaviors
are defined in [Section 4](#behaviors){.xref} of this
document.[¶](#section-3.1-5){.pilcrow}

An SRv6 Endpoint behavior may require additional information for its
processing (e.g., related to the flow or service). This information may
be encoded in the ARG bits of the SID.[¶](#section-3.1-6){.pilcrow}

In such a case, the semantics and format of the ARG bits are defined as
part of the SRv6 Endpoint behavior
specification.[¶](#section-3.1-7){.pilcrow}

The ARG value of a routed SID [SHOULD]{.bcp14} remain constant among
packets in a given flow. Varying ARG values among packets in a flow may
result in different ECMP hashing and cause
reordering.[¶](#section-3.1-8){.pilcrow}
:::
:::

::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [SID Allocation within an SR Domain](#name-sid-allocation-within-an-sr){.section-name .selfRef} {#name-sid-allocation-within-an-sr}

Locators are assigned consistent with IPv6 infrastructure allocation.
For example, a network operator may:[¶](#section-3.2-1){.pilcrow}

-   [Assign block B::/48 to the SR
    domain[¶](#section-3.2-2.1){.pilcrow}]{#section-3.2-2.1}
-   [Assign a unique B:N::/64 block to each SRv6-enabled node in the
    domain[¶](#section-3.2-2.2){.pilcrow}]{#section-3.2-2.2}

As an example, one mobile service provider has commercially deployed
SRv6 across more than 1000 commercial routers and 1800 whitebox routers.
All these devices are enabled for SRv6 and advertise SRv6 SIDs. The
provider historically deployed IPv6 and assigned infrastructure
addresses from the Unique Local Address (ULA) space
\[[RFC4193](#RFC4193){.xref}\]. They specifically allocated three /48
prefixes (Country X, Country Y, Country Z) to support their SRv6
infrastructure. From those /48 prefixes, each router was assigned a /64
prefix from which all SIDs of that router are
allocated.[¶](#section-3.2-3){.pilcrow}

In another example, a large mobile and fixed-line service provider has
commercially deployed SRv6 in their country-wide network. This provider
is assigned a /20 prefix by a Regional Internet Registry (RIR). They
sub-allocated a few /48 prefixes to their infrastructure to deploy SRv6.
Each router is assigned a /64 prefix from which all SIDs of that router
are allocated.[¶](#section-3.2-4){.pilcrow}

IPv6 address consumption in both these examples is minimal, representing
less than one billionth and one millionth of the available address
space, respectively.[¶](#section-3.2-5){.pilcrow}

A service provider receiving the current minimum allocation of a /32
prefix from an RIR may assign a /48 prefix to their infrastructure
deploying SRv6 and subsequently allocate /64 prefixes for SIDs at each
SRv6 node. The /48 assignment is one sixty-five thousandth (1/2\^16) of
the usable IPv6 address space available for assignment by the
provider.[¶](#section-3.2-6){.pilcrow}

When an operator instantiates a SID at a node, they specify a SID value
B:N:FUNCT and the behavior bound to the SID using one of the SRv6
Endpoint Behavior codepoints of the registry defined in this document
(see [Table 6](#endpoint_cp_types){.xref}).[¶](#section-3.2-7){.pilcrow}

The node advertises the SID, B:N:FUNCT, in the control plane (see
[Section 8](#cp){.xref}) together with the SRv6 Endpoint Behavior
codepoint identifying the behavior of the
SID.[¶](#section-3.2-8){.pilcrow}

An SR source node cannot infer the behavior by examination of the FUNCT
value of a SID.[¶](#section-3.2-9){.pilcrow}

Therefore, the SRv6 Endpoint Behavior codepoint is advertised along with
the SID in the control plane.[¶](#section-3.2-10){.pilcrow}

An SR source node uses the SRv6 Endpoint Behavior codepoint to map the
received SID (B:N:FUNCT) to a behavior.[¶](#section-3.2-11){.pilcrow}

An SR source node selects a desired behavior at an advertising node by
selecting the SID (B:N:FUNCT) advertised with the desired
behavior.[¶](#section-3.2-12){.pilcrow}

As an example:[¶](#section-3.2-13){.pilcrow}

-   [A network operator may assign an SRv6 SID block 2001:db8:bbbb::/48
    from their in-house operation block for their SRv6
    infrastructure.[¶](#section-3.2-14.1){.pilcrow}]{#section-3.2-14.1}

-   [A network operator may assign an SRv6 Locator 2001:db8:bbbb:3::/64
    to one particular router, for example Router 3, in their SR
    Domain.[¶](#section-3.2-14.2){.pilcrow}]{#section-3.2-14.2}

-   ::: {#section-3.2-14.3}
    At Router 3, within the locator 2001:db8:bbbb:3::/64, the network
    operator or the router performs dynamic assignment
    for:[¶](#section-3.2-14.3.1){.pilcrow}

    -   ::: {#section-3.2-14.3.2.1}
        Function 0x0100 associated with the behavior End.X (Endpoint
        with L3 cross-connect) between router 3 and its connected
        neighbor router (e.g., Router 4). This function is encoded as a
        16-bit value and has no arguments (F=16,
        A=0).[¶](#section-3.2-14.3.2.1.1){.pilcrow}

        This SID is advertised in the control plane as
        2001:db8:bbbb:3:100:: with an SRv6 Endpoint Behavior codepoint
        value of 5.[¶](#section-3.2-14.3.2.1.2){.pilcrow}
        :::

    -   ::: {#section-3.2-14.3.2.2}
        Function 0x0101 associated with the behavior End.X (Endpoint
        with L3 cross-connect) between router 3 and its connected
        neighbor router (e.g., Router 2). This function is encoded as a
        16-bit value and has no arguments (F=16,
        A=0).[¶](#section-3.2-14.3.2.2.1){.pilcrow}

        This SID is advertised in the control plane as
        2001:db8:bbbb:3:101:: with an SRv6 Endpoint Behavior codepoint
        value of 5.[¶](#section-3.2-14.3.2.2.2){.pilcrow}
        :::
    :::

These examples do not preclude any other IPv6 addressing allocation
scheme.[¶](#section-3.2-15){.pilcrow}
:::

::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [SID Reachability](#name-sid-reachability){.section-name .selfRef} {#name-sid-reachability}

Most often, the node N would advertise IPv6 prefix(es) matching the LOC
parts covering its SIDs or shorter-mask prefix. The distribution of
these advertisements and calculation of their reachability are specific
to the routing protocol and are outside of the scope of this
document.[¶](#section-3.3-1){.pilcrow}

An SRv6 SID is said to be routed if its SID belongs to an IPv6 prefix
advertised via a routing protocol. An SRv6 SID that does not fulfill
this condition is non-routed.[¶](#section-3.3-2){.pilcrow}

Let\'s provide a classic illustration:[¶](#section-3.3-3){.pilcrow}

Node N is configured explicitly with two SIDs: 2001:db8:b:1:100:: and
2001:db8:b:2:101::.[¶](#section-3.3-4){.pilcrow}

The network learns about a path to 2001:db8:b:1::/64 via the IGP; hence,
a packet destined to 2001:db8:b:1:100:: would be routed up to N. The
network does not learn about a path to 2001:db8:b:2::/64 via the IGP;
hence, a packet destined to 2001:db8:b:2:101:: would not be routed up to
N.[¶](#section-3.3-5){.pilcrow}

A packet could be steered through a non-routed SID 2001:db8:b:2:101:: by
using a SID list \<\...,2001:db8:b:1:100::,2001:db8:b:2:101::,\...\>
where the non-routed SID is preceded by a routed SID to the same node. A
packet could also be steered to a node instantiating a non-routed SID by
preceding it in the SID list with an Adj-SID to that node. Routed and
non-routed SRv6 SIDs are the SRv6 instantiation of global and local
segments, respectively
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-3.3-6){.pilcrow}
:::
:::

::: {#behaviors}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [SR Endpoint Behaviors](#name-sr-endpoint-behaviors){.section-name .selfRef} {#name-sr-endpoint-behaviors}

The following is a set of well-known behaviors that can be associated
with a SID.[¶](#section-4-1){.pilcrow}

[]{#name-endpoint-behaviors}

::: {#endpoint}
+-----------------------------------+-----------------------------------+
| End                               | Endpoint[¶                        |
|                                   | ](#section-4-2.1.1.2.1){.pilcrow} |
|                                   |                                   |
|                                   | The SRv6 instantiation of a       |
|                                   | Prefix-SID                        |
|                                   | \[[RFC8402](#RFC8402){.xref}\][¶  |
|                                   | ](#section-4-2.1.1.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.X                             | Endpoint with L3                  |
|                                   | cross-connect[¶                   |
|                                   | ](#section-4-2.1.2.2.1){.pilcrow} |
|                                   |                                   |
|                                   | The SRv6 instantiation of an      |
|                                   | Adj-SID                           |
|                                   | \[[RFC8402](#RFC8402){.xref}\][¶  |
|                                   | ](#section-4-2.1.2.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.T                             | Endpoint with specific IPv6 table |
|                                   | lookup                            |
+-----------------------------------+-----------------------------------+
| End.DX6                           | Endpoint with decapsulation and   |
|                                   | IPv6                              |
|                                   | cross-connect[¶                   |
|                                   | ](#section-4-2.1.4.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., IPv6-L3VPN (equivalent to   |
|                                   | per-CE VPN                        |
|                                   | label)[¶                          |
|                                   | ](#section-4-2.1.4.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DX4                           | Endpoint with decapsulation and   |
|                                   | IPv4                              |
|                                   | cross-connect[¶                   |
|                                   | ](#section-4-2.1.5.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., IPv4-L3VPN (equivalent to   |
|                                   | per-CE VPN                        |
|                                   | label)[¶                          |
|                                   | ](#section-4-2.1.5.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DT6                           | Endpoint with decapsulation and   |
|                                   | specific IPv6 table               |
|                                   | lookup[¶                          |
|                                   | ](#section-4-2.1.6.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., IPv6-L3VPN (equivalent to   |
|                                   | per-VRF VPN                       |
|                                   | label)[¶                          |
|                                   | ](#section-4-2.1.6.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DT4                           | Endpoint with decapsulation and   |
|                                   | specific IPv4 table               |
|                                   | lookup[¶                          |
|                                   | ](#section-4-2.1.7.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., IPv4-L3VPN (equivalent to   |
|                                   | per-VRF VPN                       |
|                                   | label)[¶                          |
|                                   | ](#section-4-2.1.7.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DT46                          | Endpoint with decapsulation and   |
|                                   | specific IP table                 |
|                                   | lookup[¶                          |
|                                   | ](#section-4-2.1.8.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., IP-L3VPN (equivalent to     |
|                                   | per-VRF VPN                       |
|                                   | label)[¶                          |
|                                   | ](#section-4-2.1.8.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DX2                           | Endpoint with decapsulation and   |
|                                   | L2                                |
|                                   | cross-connect[¶                   |
|                                   | ](#section-4-2.1.9.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., L2VPN use                   |
|                                   | case[¶                            |
|                                   | ](#section-4-2.1.9.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DX2V                          | Endpoint with decapsulation and   |
|                                   | VLAN L2 table                     |
|                                   | lookup[¶]                         |
|                                   | (#section-4-2.1.10.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., EVPN Flexible Cross-connect |
|                                   | use                               |
|                                   | case[¶]                           |
|                                   | (#section-4-2.1.10.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DT2U                          | Endpoint with decapsulation and   |
|                                   | unicast MAC L2 table              |
|                                   | lookup[¶]                         |
|                                   | (#section-4-2.1.11.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., EVPN Bridging Unicast use   |
|                                   | case[¶]                           |
|                                   | (#section-4-2.1.11.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.DT2M                          | Endpoint with decapsulation and   |
|                                   | L2 table                          |
|                                   | flooding[¶]                       |
|                                   | (#section-4-2.1.12.2.1){.pilcrow} |
|                                   |                                   |
|                                   | e.g., EVPN Bridging Broadcast,    |
|                                   | Unknown Unicast, and Multicast    |
|                                   | (BUM) use case with Ethernet      |
|                                   | Segment Identifier (ESI)          |
|                                   | filtering[¶]                      |
|                                   | (#section-4-2.1.12.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.B6.Encaps                     | Endpoint bound to an SRv6 Policy  |
|                                   | with                              |
|                                   | encapsulation[¶]                  |
|                                   | (#section-4-2.1.13.2.1){.pilcrow} |
|                                   |                                   |
|                                   | SRv6 instantiation of a Binding   |
|                                   | SID[¶]                            |
|                                   | (#section-4-2.1.13.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.B6.Encaps.Red                 | End.B6.Encaps with reduced        |
|                                   | SRH[¶]                            |
|                                   | (#section-4-2.1.14.2.1){.pilcrow} |
|                                   |                                   |
|                                   | SRv6 instantiation of a Binding   |
|                                   | SID[¶]                            |
|                                   | (#section-4-2.1.14.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+
| End.BM                            | Endpoint bound to an SR-MPLS      |
|                                   | Policy[¶]                         |
|                                   | (#section-4-2.1.15.2.1){.pilcrow} |
|                                   |                                   |
|                                   | SRv6 instantiation of an SR-MPLS  |
|                                   | Binding                           |
|                                   | SID[¶]                            |
|                                   | (#section-4-2.1.15.2.2){.pilcrow} |
+-----------------------------------+-----------------------------------+

: [Table 1](#table-1){.selfRef}: [Endpoint
Behaviors](#name-endpoint-behaviors){.selfRef}
:::

The list is not exhaustive. In practice, any behavior can be attached to
a local SID; for example, a node N can bind a SID to a local Virtual
Machine (VM) or container that can apply any complex processing on the
packet, provided there is an SRv6 Endpoint Behavior codepoint allocated
for the processing.[¶](#section-4-3){.pilcrow}

When an SRv6-capable node (N) receives an IPv6 packet whose destination
address matches a FIB entry that represents a locally instantiated SRv6
SID (S), the IPv6 header chain is processed as defined in [Section
4](https://www.rfc-editor.org/rfc/rfc8200#section-4){.relref} of
\[[RFC8200](#RFC8200){.xref}\]. For SRv6 SIDs associated with an
Endpoint behavior defined in this document, the SRH and Upper-Layer
header are processed as defined in the following
subsections.[¶](#section-4-4){.pilcrow}

The pseudocode describing these behaviors details local processing at a
node. An implementation of the pseudocode is compliant as long as the
externally observable wire protocol is as described by the
pseudocode.[¶](#section-4-5){.pilcrow}

[Section 4.16](#BehFlavors){.xref} defines flavors of some of these
behaviors.[¶](#section-4-6){.pilcrow}

[Section 10.2](#iana_registry){.xref} of this document defines the IANA
registry used to maintain all these behaviors as well as future ones
defined in other documents.[¶](#section-4-7){.pilcrow}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [End: Endpoint](#name-end-endpoint){.section-name .selfRef} {#name-end-endpoint}

The Endpoint behavior (\"End\" for short) is the most basic behavior. It
is the instantiation of a Prefix-SID
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-4.1-1){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local End SID, N
does the following:[¶](#section-4.1-2){.pilcrow}

::: {#section-4.1-3}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.      Stop processing the SRH, and proceed to process the next
             header in the packet, whose type is identified by
             the Next Header field in the routing header.
S04.   }
S05.   If (IPv6 Hop Limit <= 1) {
S06.      Send an ICMP Time Exceeded message to the Source Address
             with Code 0 (Hop limit exceeded in transit),
             interrupt packet processing, and discard the packet.
S07.   }
S08.   max_LE = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry > max_LE) or (Segments Left > Last Entry+1)) {
S10.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.

S11.   }
S12.   Decrement IPv6 Hop Limit by 1
S13.   Decrement Segments Left by 1
S14.   Update IPv6 DA with Segment List[Segments Left]
S15.   Submit the packet to the egress IPv6 FIB lookup for
          transmission to the new destination
S16. }
```

[¶](#section-4.1-3){.pilcrow}
:::

Note:[¶](#section-4.1-4.1){.pilcrow}

The End behavior operates on the same FIB table (i.e., identified by VRF
or L3 relay ID) associated to the packet. Hence, the FIB lookup on line
S15 is done in the same FIB table as the ingress
interface.[¶](#section-4.1-4.2){.pilcrow}

::: {#upper}
::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [Upper-Layer Header](#name-upper-layer-header){.section-name .selfRef} {#name-upper-layer-header}

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End SID, N does the
following:[¶](#section-4.1.1-1){.pilcrow}

::: {#section-4.1.1-2}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type is allowed by local configuration) {
S02.   Proceed to process the Upper-Layer header
S03. } Else {
S04.   Send an ICMP Parameter Problem to the Source Address
          with Code 4 (SR Upper-layer Header Error)
          and Pointer set to the offset of the Upper-Layer header,
          interrupt packet processing, and discard the packet.
S05  }
```

[¶](#section-4.1.1-2){.pilcrow}
:::

Allowing the processing of specific Upper-Layer header types is useful
for Operations, Administration, and Maintenance (OAM). As an example, an
operator might permit pinging of SIDs. To do this, they may enable local
configuration to allow Upper-Layer header type 58
(ICMPv6).[¶](#section-4.1.1-3){.pilcrow}

It is [RECOMMENDED]{.bcp14} that an implementation of local
configuration only allows Upper-Layer header processing of types that do
not result in the packet being forwarded (e.g.,
ICMPv6).[¶](#section-4.1.1-4){.pilcrow}
:::
:::
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [End.X: L3 Cross-Connect](#name-endx-l3-cross-connect){.section-name .selfRef} {#name-endx-l3-cross-connect}

The \"Endpoint with L3 cross-connect\" behavior (\"End.X\" for short) is
a variant of the End behavior.[¶](#section-4.2-1){.pilcrow}

It is the SRv6 instantiation of an Adj-SID
\[[RFC8402](#RFC8402){.xref}\], and its main use is for
traffic-engineering policies.[¶](#section-4.2-2){.pilcrow}

Any SID instance of this behavior is associated with a set, J, of one or
more L3 adjacencies.[¶](#section-4.2-3){.pilcrow}

When N receives a packet destined to S and S is a local End.X SID, the
line S15 from the End processing is replaced by the
following:[¶](#section-4.2-4){.pilcrow}

::: {#section-4.2-5}
``` {.sourcecode .lang-pseudocode}
S15.   Submit the packet to the IPv6 module for transmission
          to the new destination via a member of J
```

[¶](#section-4.2-5){.pilcrow}
:::

Note:[¶](#section-4.2-6.1){.pilcrow}

S15. If the set J contains several L3 adjacencies, then one element of
the set is selected based on a hash of the packet\'s header (see
[Section 7](#OpsFlowLabel){.xref}).[¶](#section-4.2-6.2){.pilcrow}

If a node N has 30 outgoing interfaces to 30 neighbors, usually the
operator would explicitly instantiate 30 End.X SIDs at N: one per L3
adjacency to a neighbor. Potentially, more End.X could be explicitly
defined (groups of L3 adjacencies to the same neighbor or to different
neighbors).[¶](#section-4.2-7){.pilcrow}

Note that if N has an outgoing interface bundle I to a neighbor Q made
of 10 member links, N might allocate up to 11 End.X local SIDs: one for
the bundle itself and then up to one for each L2 member link. The flows
steered using the End.X SID corresponding to the bundle itself get
load-balanced across the member links via hashing while the flows
steered using the End.X SID corresponding to a member link get steered
over that specific member link alone.[¶](#section-4.2-8){.pilcrow}

When the End.X behavior is associated with a BGP Next-Hop, it is the
SRv6 instantiation of the BGP peering segments
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-4.2-9){.pilcrow}

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.X SID, process the packet as per [Section
4.1.1](#upper){.xref}.[¶](#section-4.2-10){.pilcrow}
:::

::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [End.T: Specific IPv6 Table Lookup](#name-endt-specific-ipv6-table-lo){.section-name .selfRef} {#name-endt-specific-ipv6-table-lo}

The \"Endpoint with specific IPv6 table lookup\" behavior (\"End.T\" for
short) is a variant of the End behavior.[¶](#section-4.3-1){.pilcrow}

The End.T behavior is used for multi-table operation in the core. For
this reason, an instance of the End.T behavior is associated with an
IPv6 FIB table T.[¶](#section-4.3-2){.pilcrow}

When N receives a packet destined to S and S is a local End.T SID, the
line S15 from the End processing is replaced by the
following:[¶](#section-4.3-3){.pilcrow}

::: {#section-4.3-4}
``` {.sourcecode .lang-pseudocode}
S15.1.   Set the packet's associated FIB table to T
S15.2.   Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
```

[¶](#section-4.3-4){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.T SID, process the packet as per [Section
4.1.1](#upper){.xref}.[¶](#section-4.3-5){.pilcrow}
:::

::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [End.DX6: Decapsulation and IPv6 Cross-Connect](#name-enddx6-decapsulation-and-ip){.section-name .selfRef} {#name-enddx6-decapsulation-and-ip}

The \"Endpoint with decapsulation and IPv6 cross-connect\" behavior
(\"End.DX6\" for short) is a variant of the End.X
behavior.[¶](#section-4.4-1){.pilcrow}

One of the applications of the End.DX6 behavior is the L3VPNv6 use case
where a FIB lookup in a specific tenant table at the egress Provider
Edge (PE) is not required. This is equivalent to the per-CE VPN label in
MPLS \[[RFC4364](#RFC4364){.xref}\].[¶](#section-4.4-2){.pilcrow}

The End.DX6 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
it is associated with one or more L3 IPv6 adjacencies
J.[¶](#section-4.4-3){.pilcrow}

When N receives a packet destined to S and S is a local End.DX6 SID, N
does the following:[¶](#section-4.4-4){.pilcrow}

::: {#section-4.4-5}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.4-5){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DX6 SID, N does the
following:[¶](#section-4.4-6){.pilcrow}

::: {#section-4.4-7}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 41(IPv6) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Forward the exposed IPv6 packet to the L3 adjacency J
S04. } Else {
S05.    Process as per Section 4.1.1
S06. }
```

[¶](#section-4.4-7){.pilcrow}
:::

Note:[¶](#section-4.4-8.1){.pilcrow}

S01. \"41\" refers to \"IPv6 encapsulation\" as defined in the IANA
\"Assigned Internet Protocol Numbers\"
registry.[¶](#section-4.4-8.2){.pilcrow}

S03. If the End.DX6 SID is bound to an array of L3 adjacencies, then one
entry of the array is selected based on the hash of the packet\'s header
(see [Section 7](#OpsFlowLabel){.xref}).[¶](#section-4.4-8.3){.pilcrow}
:::

::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [End.DX4: Decapsulation and IPv4 Cross-Connect](#name-enddx4-decapsulation-and-ip){.section-name .selfRef} {#name-enddx4-decapsulation-and-ip}

The \"Endpoint with decapsulation and IPv4 cross-connect\" behavior
(\"End.DX4\" for short) is a variant of the End.X
behavior.[¶](#section-4.5-1){.pilcrow}

One of the applications of the End.DX4 behavior is the L3VPNv4 use case
where a FIB lookup in a specific tenant table at the egress PE is not
required. This is equivalent to the per-CE VPN label in MPLS
\[[RFC4364](#RFC4364){.xref}\].[¶](#section-4.5-2){.pilcrow}

The End.DX4 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
it is associated with one or more L3 IPv4 adjacencies
J.[¶](#section-4.5-3){.pilcrow}

When N receives a packet destined to S and S is a local End.DX4 SID, N
does the following:[¶](#section-4.5-4){.pilcrow}

::: {#section-4.5-5}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.5-5){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DX4 SID, N does the
following:[¶](#section-4.5-6){.pilcrow}

::: {#section-4.5-7}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 4(IPv4) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Forward the exposed IPv4 packet to the L3 adjacency J
S04. } Else {
S05.    Process as per Section 4.1.1
S06. }
```

[¶](#section-4.5-7){.pilcrow}
:::

Note:[¶](#section-4.5-8.1){.pilcrow}

S01. \"4\" refers to \"IPv4 encapsulation\" as defined in the IANA
\"Assigned Internet Protocol Numbers\"
registry.[¶](#section-4.5-8.2){.pilcrow}

S03. If the End.DX4 SID is bound to an array of L3 adjacencies, then one
entry of the array is selected based on the hash of the packet\'s header
(see [Section 7](#OpsFlowLabel){.xref}).[¶](#section-4.5-8.3){.pilcrow}
:::

::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [End.DT6: Decapsulation and Specific IPv6 Table Lookup](#name-enddt6-decapsulation-and-sp){.section-name .selfRef} {#name-enddt6-decapsulation-and-sp}

The \"Endpoint with decapsulation and specific IPv6 table lookup\"
behavior (\"End.DT6\" for short) is a variant of the End.T
behavior.[¶](#section-4.6-1){.pilcrow}

One of the applications of the End.DT6 behavior is the L3VPNv6 use case
where a FIB lookup in a specific tenant table at the egress PE is
required. This is equivalent to the per-VRF VPN label in MPLS
\[[RFC4364](#RFC4364){.xref}\].[¶](#section-4.6-2){.pilcrow}

Note that an End.DT6 may be defined for the main IPv6 table, in which
case an End.DT6 supports the equivalent of an IPv6-in-IPv6 decapsulation
(without VPN/tenant implication).[¶](#section-4.6-3){.pilcrow}

The End.DT6 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
a SID instance is associated with an IPv6 FIB table
T.[¶](#section-4.6-4){.pilcrow}

When N receives a packet destined to S and S is a local End.DT6 SID, N
does the following:[¶](#section-4.6-5){.pilcrow}

::: {#section-4.6-6}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.6-6){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DT6 SID, N does the
following:[¶](#section-4.6-7){.pilcrow}

::: {#section-4.6-8}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 41(IPv6) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Set the packet's associated FIB table to T
S04.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S05. } Else {
S06.    Process as per Section 4.1.1
S07. }
```

[¶](#section-4.6-8){.pilcrow}
:::
:::

::: {#section-4.7 .section}
### [4.7.](#section-4.7){.section-number .selfRef} [End.DT4: Decapsulation and Specific IPv4 Table Lookup](#name-enddt4-decapsulation-and-sp){.section-name .selfRef} {#name-enddt4-decapsulation-and-sp}

The \"Endpoint with decapsulation and specific IPv4 table lookup\"
behavior (\"End.DT4\" for short) is a variant of the End.T
behavior.[¶](#section-4.7-1){.pilcrow}

One of the applications of the End.DT4 behavior is the L3VPNv4 use case
where a FIB lookup in a specific tenant table at the egress PE is
required. This is equivalent to the per-VRF VPN label in MPLS
\[[RFC4364](#RFC4364){.xref}\].[¶](#section-4.7-2){.pilcrow}

Note that an End.DT4 may be defined for the main IPv4 table, in which
case an End.DT4 supports the equivalent of an IPv4-in-IPv6 decapsulation
(without VPN/tenant implication).[¶](#section-4.7-3){.pilcrow}

The End.DT4 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
a SID instance is associated with an IPv4 FIB table
T.[¶](#section-4.7-4){.pilcrow}

When N receives a packet destined to S and S is a local End.DT4 SID, N
does the following:[¶](#section-4.7-5){.pilcrow}

::: {#section-4.7-6}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.7-6){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DT4 SID, N does the
following:[¶](#section-4.7-7){.pilcrow}

::: {#section-4.7-8}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 4(IPv4) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Set the packet's associated FIB table to T
S04.    Submit the packet to the egress IPv4 FIB lookup for
           transmission to the new destination
S05. } Else {
S06.    Process as per Section 4.1.1
S07. }
```

[¶](#section-4.7-8){.pilcrow}
:::
:::

::: {#section-4.8 .section}
### [4.8.](#section-4.8){.section-number .selfRef} [End.DT46: Decapsulation and Specific IP Table Lookup](#name-enddt46-decapsulation-and-s){.section-name .selfRef} {#name-enddt46-decapsulation-and-s}

The \"Endpoint with decapsulation and specific IP table lookup\"
behavior (\"End.DT46\" for short) is a variant of the End.DT4 and
End.DT6 behavior.[¶](#section-4.8-1){.pilcrow}

One of the applications of the End.DT46 behavior is the L3VPN use case
where a FIB lookup in a specific IP tenant table at the egress PE is
required. This is equivalent to the single per-VRF VPN label (for IPv4
and IPv6) in MPLS
\[[RFC4364](#RFC4364){.xref}\].[¶](#section-4.8-2){.pilcrow}

Note that an End.DT46 may be defined for the main IP table, in which
case an End.DT46 supports the equivalent of an IP-in-IPv6 decapsulation
(without VPN/tenant implication).[¶](#section-4.8-3){.pilcrow}

The End.DT46 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
a SID instance is associated with an IPv4 FIB table T4 and an IPv6 FIB
table T6.[¶](#section-4.8-4){.pilcrow}

When N receives a packet destined to S and S is a local End.DT46 SID, N
does the following:[¶](#section-4.8-5){.pilcrow}

::: {#section-4.8-6}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.8-6){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DT46 SID, N does the
following:[¶](#section-4.8-7){.pilcrow}

::: {#section-4.8-8}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 4(IPv4) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Set the packet's associated FIB table to T4
S04.    Submit the packet to the egress IPv4 FIB lookup for
           transmission to the new destination
S05. } Else if (Upper-Layer header type == 41(IPv6) ) {
S06.    Remove the outer IPv6 header with all its extension headers
S07.    Set the packet's associated FIB table to T6
S08.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S09. } Else {
S10.    Process as per Section 4.1.1
S11. }
```

[¶](#section-4.8-8){.pilcrow}
:::
:::

::: {#section-4.9 .section}
### [4.9.](#section-4.9){.section-number .selfRef} [End.DX2: Decapsulation and L2 Cross-Connect](#name-enddx2-decapsulation-and-l2){.section-name .selfRef} {#name-enddx2-decapsulation-and-l2}

The \"Endpoint with decapsulation and L2 cross-connect\" behavior
(\"End.DX2\" for short) is a variant of the Endpoint
behavior.[¶](#section-4.9-1){.pilcrow}

One of the applications of the End.DX2 behavior is the L2VPN
\[[RFC4664](#RFC4664){.xref}\] / EVPN Virtual Private Wire Service
(VPWS) \[[RFC7432](#RFC7432){.xref}\] \[[RFC8214](#RFC8214){.xref}\] use
case.[¶](#section-4.9-2){.pilcrow}

The End.DX2 SID [MUST]{.bcp14} be the last segment in an SR Policy, and
it is associated with one outgoing interface
I.[¶](#section-4.9-3){.pilcrow}

When N receives a packet destined to S and S is a local End.DX2 SID, N
does the following:[¶](#section-4.9-4){.pilcrow}

::: {#section-4.9-5}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
```

[¶](#section-4.9-5){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.DX2 SID, N does the
following:[¶](#section-4.9-6){.pilcrow}

::: {#section-4.9-7}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 143(Ethernet) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Forward the Ethernet frame to the OIF I
S04. } Else {
S05.    Process as per Section 4.1.1
S06. }
```

[¶](#section-4.9-7){.pilcrow}
:::

Note:[¶](#section-4.9-8.1){.pilcrow}

S01. IANA has allocated value \"143\" for \"Ethernet\"
\[[IEEE.802.3_2018](#IEEE.802.3_2018){.xref}\] in the \"Assigned
Internet Protocol Numbers\" registry (see [Section
10.1](#ianaethernet){.xref}).[¶](#section-4.9-8.2){.pilcrow}

S03. An End.DX2 behavior could be customized to expect a specific IEEE
header (e.g., VLAN tag) and rewrite the egress IEEE header before
forwarding on the outgoing interface.[¶](#section-4.9-8.3){.pilcrow}

Note that an End.DX2 SID may also be associated with a bundle of
outgoing interfaces.[¶](#section-4.9-9){.pilcrow}
:::

::: {#section-4.10 .section}
### [4.10.](#section-4.10){.section-number .selfRef} [End.DX2V: Decapsulation and VLAN L2 Table Lookup](#name-enddx2v-decapsulation-and-v){.section-name .selfRef} {#name-enddx2v-decapsulation-and-v}

The \"Endpoint with decapsulation and VLAN L2 table lookup\" behavior
(\"End.DX2V\" for short) is a variant of the End.DX2
behavior.[¶](#section-4.10-1){.pilcrow}

One of the applications of the End.DX2V behavior is the EVPN Flexible
Cross-connect use case. The End.DX2V behavior is used to perform a
lookup of the Ethernet frame VLANs in a particular L2 table. Any SID
instance of this behavior is associated with an L2 table
T.[¶](#section-4.10-2){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local End.DX2
SID, the processing is identical to the End.DX2 behavior except for the
Upper-Layer header processing, which is modified as
follows:[¶](#section-4.10-3){.pilcrow}

::: {#section-4.10-4}
``` {.sourcecode .lang-pseudocode}
S03. Look up the exposed VLANs in L2 table T, and forward
        via the matched table entry.
```

[¶](#section-4.10-4){.pilcrow}
:::

Note:[¶](#section-4.10-5.1){.pilcrow}

S03. An End.DX2V behavior could be customized to expect a specific VLAN
format and rewrite the egress VLAN header before forwarding on the
outgoing interface.[¶](#section-4.10-5.2){.pilcrow}
:::

::: {#section-4.11 .section}
### [4.11.](#section-4.11){.section-number .selfRef} [End.DT2U: Decapsulation and Unicast MAC L2 Table Lookup](#name-enddt2u-decapsulation-and-u){.section-name .selfRef} {#name-enddt2u-decapsulation-and-u}

The \"Endpoint with decapsulation and unicast MAC L2 table lookup\"
behavior (\"End.DT2U\" for short) is a variant of the End
behavior.[¶](#section-4.11-1){.pilcrow}

One of the applications of the End.DT2U behavior is the EVPN Bridging
Unicast \[[RFC7432](#RFC7432){.xref}\]. Any SID instance of the End.DT2U
behavior is associated with an L2 table T.[¶](#section-4.11-2){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local End.DT2U
SID, the processing is identical to the End.DX2 behavior except for the
Upper-Layer header processing, which is as
follows:[¶](#section-4.11-3){.pilcrow}

::: {#section-4.11-4}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 143(Ethernet) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Learn the exposed MAC Source Address in L2 table T
S04.    Look up the exposed MAC Destination Address in L2 table T
S05.    If (matched entry in T) {
S06.       Forward via the matched table T entry
S07.    } Else {
S08.       Forward via all L2 OIFs in table T
S09.    }
S10. } Else {
S11.    Process as per Section 4.1.1
S12. }
```

[¶](#section-4.11-4){.pilcrow}
:::

Note:[¶](#section-4.11-5.1){.pilcrow}

S01. IANA has allocated value \"143\" for \"Ethernet\" in the \"Assigned
Internet Protocol Numbers\" registry (see [Section
10.1](#ianaethernet){.xref}).[¶](#section-4.11-5.2){.pilcrow}

S03. In EVPN \[[RFC7432](#RFC7432){.xref}\], the learning of the exposed
MAC Source Address is done via the control plane. In L2VPN Virtual
Private LAN Service (VPLS) \[[RFC4761](#RFC4761){.xref}\]
\[[RFC4762](#RFC4762){.xref}\], reachability is obtained by standard
learning bridge functions in the data
plane.[¶](#section-4.11-5.3){.pilcrow}
:::

::: {#section-4.12 .section}
### [4.12.](#section-4.12){.section-number .selfRef} [End.DT2M: Decapsulation and L2 Table Flooding](#name-enddt2m-decapsulation-and-l){.section-name .selfRef} {#name-enddt2m-decapsulation-and-l}

The \"Endpoint with decapsulation and L2 table flooding\" behavior
(\"End.DT2M\" for short) is a variant of the End.DT2U
behavior.[¶](#section-4.12-1){.pilcrow}

Two of the applications of the End.DT2M behavior are the EVPN Bridging
of Broadcast, Unknown Unicast, and Multicast (BUM) traffic with Ethernet
Segment Identifier (ESI) filtering \[[RFC7432](#RFC7432){.xref}\] and
the EVPN Ethernet-Tree (E-Tree) \[[RFC8317](#RFC8317){.xref}\] use
cases.[¶](#section-4.12-2){.pilcrow}

Any SID instance of this behavior is associated with an L2 table T. The
behavior also takes an argument: \"Arg.FE2\". This argument provides a
local mapping to ESI for split-horizon filtering of the received traffic
to exclude a specific OIF (or set of OIFs) from L2 table T flooding. The
allocation of the argument values is local to the SR Segment Endpoint
Node instantiating this behavior, and the signaling of the argument to
other nodes for the EVPN functionality occurs via the control
plane.[¶](#section-4.12-3){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local End.DT2M
SID, the processing is identical to the End.DX2 behavior except for the
Upper-Layer header processing, which is as
follows:[¶](#section-4.12-4){.pilcrow}

::: {#section-4.12-5}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 143(Ethernet) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Learn the exposed MAC Source Address in L2 table T
S04.    Forward via all L2 OIFs excluding those associated with the
           identifier Arg.FE2
S05. } Else {
S06.    Process as per Section 4.1.1
S07. }
```

[¶](#section-4.12-5){.pilcrow}
:::

Note:[¶](#section-4.12-6.1){.pilcrow}

S01. IANA has allocated value \"143\" for \"Ethernet\" in the \"Assigned
Internet Protocol Numbers\" registry (see [Section
10.1](#ianaethernet){.xref}).[¶](#section-4.12-6.2){.pilcrow}

S03. In EVPN \[[RFC7432](#RFC7432){.xref}\], the learning of the exposed
MAC Source Address is done via the control plane. In L2VPN VPLS
\[[RFC4761](#RFC4761){.xref}\] \[[RFC4762](#RFC4762){.xref}\],
reachability is obtained by standard learning bridge functions in the
data plane.[¶](#section-4.12-6.3){.pilcrow}
:::

::: {#section-4.13 .section}
### [4.13.](#section-4.13){.section-number .selfRef} [End.B6.Encaps: Endpoint Bound to an SRv6 Policy with Encapsulation](#name-endb6encaps-endpoint-bound-){.section-name .selfRef} {#name-endb6encaps-endpoint-bound-}

This is a variation of the End behavior.[¶](#section-4.13-1){.pilcrow}

One of its applications is to express scalable traffic-engineering
policies across multiple domains. It is one of the SRv6 instantiations
of a Binding SID
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-4.13-2){.pilcrow}

Any SID instance of this behavior is associated with an SR Policy B and
a source address A.[¶](#section-4.13-3){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local
End.B6.Encaps SID, N does the following:[¶](#section-4.13-4){.pilcrow}

::: {#section-4.13-5}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.      Stop processing the SRH, and proceed to process the next
             header in the packet, whose type is identified by
             the Next Header field in the routing header.
S04.   }
S05.   If (IPv6 Hop Limit <= 1) {
S06.      Send an ICMP Time Exceeded message to the Source Address
             with Code 0 (Hop limit exceeded in transit),
             interrupt packet processing, and discard the packet.
S07.   }
S08.   max_LE = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry > max_LE) or (Segments Left > Last Entry+1)) {
S10.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S11.   }
S12.   Decrement IPv6 Hop Limit by 1
S13.   Decrement Segments Left by 1
S14.   Update IPv6 DA with Segment List[Segments Left]
S15.   Push a new IPv6 header with its own SRH containing B
S16.   Set the outer IPv6 SA to A
S17.   Set the outer IPv6 DA to the first SID of B
S18.   Set the outer Payload Length, Traffic Class, Flow Label,
          Hop Limit, and Next Header fields
S19.   Submit the packet to the egress IPv6 FIB lookup for
          transmission to the new destination
S20. }
```

[¶](#section-4.13-5){.pilcrow}
:::

Note:[¶](#section-4.13-6.1){.pilcrow}

S15. The SRH [MAY]{.bcp14} be omitted when the SRv6 Policy B only
contains one SID and there is no need to use any flag, tag, or
TLV.[¶](#section-4.13-6.2){.pilcrow}

S18. The Payload Length, Traffic Class, Hop Limit, and Next Header
fields are set as per \[[RFC2473](#RFC2473){.xref}\]. The Flow Label is
computed as per
\[[RFC6437](#RFC6437){.xref}\].[¶](#section-4.13-6.3){.pilcrow}

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.B6.Encaps SID, process the packet as per
[Section 4.1.1](#upper){.xref}.[¶](#section-4.13-7){.pilcrow}
:::

::: {#section-4.14 .section}
### [4.14.](#section-4.14){.section-number .selfRef} [End.B6.Encaps.Red: End.B6.Encaps with Reduced SRH](#name-endb6encapsred-endb6encaps-){.section-name .selfRef} {#name-endb6encapsred-endb6encaps-}

This is an optimization of the End.B6.Encaps
behavior.[¶](#section-4.14-1){.pilcrow}

End.B6.Encaps.Red reduces the size of the SRH by one SID by excluding
the first SID in the SRH of the new IPv6 header. Thus, the first segment
is only placed in the IPv6 Destination Address of the new IPv6 header,
and the packet is forwarded according to
it.[¶](#section-4.14-2){.pilcrow}

The SRH Last Entry field is set as defined in [Section
4.1.1](https://www.rfc-editor.org/rfc/rfc8754#section-4.1.1){.relref} of
\[[RFC8754](#RFC8754){.xref}\].[¶](#section-4.14-3){.pilcrow}

The SRH [MAY]{.bcp14} be omitted when the SRv6 Policy only contains one
SID and there is no need to use any flag, tag, or
TLV.[¶](#section-4.14-4){.pilcrow}
:::

::: {#section-4.15 .section}
### [4.15.](#section-4.15){.section-number .selfRef} [End.BM: Endpoint Bound to an SR-MPLS Policy](#name-endbm-endpoint-bound-to-an-){.section-name .selfRef} {#name-endbm-endpoint-bound-to-an-}

The \"Endpoint bound to an SR-MPLS Policy\" behavior (\"End.BM\" for
short) is a variant of the End behavior.[¶](#section-4.15-1){.pilcrow}

The End.BM behavior is required to express scalable traffic-engineering
policies across multiple domains where some domains support the MPLS
instantiation of Segment Routing. This is an SRv6 instantiation of an
SR-MPLS Binding SID
\[[RFC8402](#RFC8402){.xref}\].[¶](#section-4.15-2){.pilcrow}

Any SID instance of this behavior is associated with an SR-MPLS Policy
B.[¶](#section-4.15-3){.pilcrow}

When N receives a packet whose IPv6 DA is S and S is a local End.BM SID,
N does the following:[¶](#section-4.15-4){.pilcrow}

::: {#section-4.15-5}
``` {.sourcecode .lang-pseudocode}
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.      Stop processing the SRH, and proceed to process the next
             header in the packet, whose type is identified by
             the Next Header field in the routing header.
S04.   }
S05.   If (IPv6 Hop Limit <= 1) {
S06.      Send an ICMP Time Exceeded message to the Source Address
             with Code 0 (Hop limit exceeded in transit),
             interrupt packet processing, and discard the packet.
S07.   }
S08.   max_LE = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry > max_LE) or (Segments Left > Last Entry+1)) {
S10.      Send an ICMP Parameter Problem to the Source Address
             with Code 0 (Erroneous header field encountered)
             and Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.

S11.   }
S12.   Decrement IPv6 Hop Limit by 1
S13.   Decrement Segments Left by 1
S14.   Update IPv6 DA with Segment List[Segments Left]
S15.   Push the MPLS label stack for B
S16.   Submit the packet to the MPLS engine for transmission
S17. }
```

[¶](#section-4.15-5){.pilcrow}
:::

When processing the Upper-Layer header of a packet matching a FIB entry
locally instantiated as an End.BM SID, process the packet as per
[Section 4.1.1](#upper){.xref}.[¶](#section-4.15-6){.pilcrow}
:::

::: {#BehFlavors}
::: {#section-4.16 .section}
### [4.16.](#section-4.16){.section-number .selfRef} [Flavors](#name-flavors){.section-name .selfRef} {#name-flavors}

The Penultimate Segment Pop (PSP) of the SRH, Ultimate Segment Pop (USP)
of the SRH, and Ultimate Segment Decapsulation (USD) flavors are
variants of the End, End.X, and End.T behaviors. The End, End.X, and
End.T behaviors can support these flavors either individually or in
combinations.[¶](#section-4.16-1){.pilcrow}

::: {#section-4.16.1 .section}
#### [4.16.1.](#section-4.16.1){.section-number .selfRef} [PSP: Penultimate Segment Pop of the SRH](#name-psp-penultimate-segment-pop){.section-name .selfRef} {#name-psp-penultimate-segment-pop}

::: {#section-4.16.1.1 .section}
##### [4.16.1.1.](#section-4.16.1.1){.section-number .selfRef} [Guidelines](#name-guidelines){.section-name .selfRef} {#name-guidelines}

SR Segment Endpoint Nodes advertise the SIDs instantiated on them via
control-plane protocols as described in [Section 8](#cp){.xref}.
Different behavior IDs are allocated for flavored and unflavored SIDs
(see [Table
6](#endpoint_cp_types){.xref}).[¶](#section-4.16.1.1-1){.pilcrow}

An SR Segment Endpoint Node that offers both PSP- and non-PSP-flavored
behavior advertises them as two different
SIDs.[¶](#section-4.16.1.1-2){.pilcrow}

The SR Segment Endpoint Node only advertises the PSP flavor if the
operator enables this capability at the
node.[¶](#section-4.16.1.1-3){.pilcrow}

The PSP operation is deterministically controlled by the SR source
node.[¶](#section-4.16.1.1-4){.pilcrow}

A PSP-flavored SID is used by the SR source node when it needs to
instruct the penultimate SR Segment Endpoint Node listed in the SRH to
remove the SRH from the IPv6 header.[¶](#section-4.16.1.1-5){.pilcrow}
:::

::: {#section-4.16.1.2 .section}
##### [4.16.1.2.](#section-4.16.1.2){.section-number .selfRef} [Definition](#name-definition){.section-name .selfRef} {#name-definition}

SR Segment Endpoint Nodes receive the IPv6 packet with the Destination
Address field of the IPv6 header equal to its SID
address.[¶](#section-4.16.1.2-1){.pilcrow}

A penultimate SR Segment Endpoint Node is one that, as part of the SID
processing, copies the last SID from the SRH into the IPv6 Destination
Address and decrements the Segments Left value from one to
zero.[¶](#section-4.16.1.2-2){.pilcrow}

The PSP operation only takes place at a penultimate SR Segment Endpoint
Node and does not happen at any transit node. When a SID of PSP flavor
is processed at a non-penultimate SR Segment Endpoint Node, the PSP
behavior is not performed as described in the pseudocode below since
Segments Left would not be zero.[¶](#section-4.16.1.2-3){.pilcrow}

The SRH processing of the End, End.X, and End.T behaviors are modified:
after the instruction \"S14. Update IPv6 DA with Segment List\[Segments
Left\]\" is executed, the following instructions must be executed as
well:[¶](#section-4.16.1.2-4){.pilcrow}

::: {#section-4.16.1.2-5}
``` {.sourcecode .lang-pseudocode}
S14.1.   If (Segments Left == 0) {
S14.2.      Update the Next Header field in the preceding header to
               the Next Header value from the SRH
S14.3.      Decrease the IPv6 header Payload Length by
               8*(Hdr Ext Len+1)
S14.4.      Remove the SRH from the IPv6 extension header chain
S14.5.   }
```

[¶](#section-4.16.1.2-5){.pilcrow}
:::

The usage of PSP does not increase the MTU of the IPv6 packet and hence
does not have any impact on the Path MTU (PMTU) discovery
mechanism.[¶](#section-4.16.1.2-6){.pilcrow}

As a reminder, [Section
5](https://www.rfc-editor.org/rfc/rfc8754#section-5){.relref} of
\[[RFC8754](#RFC8754){.xref}\] defines the SR Deployment Model within
the SR Domain \[[RFC8402](#RFC8402){.xref}\]. Within this framework, the
Authentication Header (AH) is not used to secure the SRH as described in
[Section
7.5](https://www.rfc-editor.org/rfc/rfc8754#section-7.5){.relref} of
\[[RFC8754](#RFC8754){.xref}\]. Hence, the discussion of applicability
of PSP along with AH usage is beyond the scope of this
document.[¶](#section-4.16.1.2-7){.pilcrow}

In the context of this specification, the End, End.X, and End.T
behaviors with PSP do not contravene [Section
4](https://www.rfc-editor.org/rfc/rfc8200#section-4){.relref} of
\[[RFC8200](#RFC8200){.xref}\] because the destination address of the
incoming packet is the address of the node executing the
behavior.[¶](#section-4.16.1.2-8){.pilcrow}
:::

::: {#section-4.16.1.3 .section}
##### [4.16.1.3.](#section-4.16.1.3){.section-number .selfRef} [Use Case](#name-use-case){.section-name .selfRef} {#name-use-case}

One use case for the PSP functionality is streamlining the operation of
an egress border router.[¶](#section-4.16.1.3-1){.pilcrow}

[]{#name-psp-use-case-topology}

::: {#fig-psp}
::: {#section-4.16.1.3-2.1 .artwork .art-text .alignLeft}
      +----------------------------------------------------+
      |                                                    |
    +-+-+         +--+         +--+         +--+         +-+-+
    |iPE+-------->+R2+-------->+R3+-------->+R4+-------->+ePE|
    | R1|         +--+         +--+         +--+         |R5 |
    +-+-+ +-----+      +-----+      +-----+      +-----+ +-+-+
      |   |IPv6 |      |IPv6 |      |IPv6 |      |IPv6 |   |
      |   |DA=R3|      |DA=R3|      |DA=R5|      |DA=R5|   |
      |   +-----+      +-----+      +-----+      +-----+   |
      |   | SRH |      | SRH |      | IP  |      | IP  |   |
      |   |SL=1 |      |SL=1 |      +-----+      +-----+   |
      |   | R5  |      | R5  |                             |
      |   +-----+      +-----+                             |
      |   | IP  |      | IP  |                             |
      |   +-----+      +-----+                             |
      |                                                    |
      +----------------------------------------------------+
:::

[Figure 1](#figure-1){.selfRef}: [PSP Use Case
Topology](#name-psp-use-case-topology){.selfRef}
:::

In the above illustration, for a packet sent from the ingress provider
edge (iPE) to the egress provider edge (ePE), node R3 is an intermediate
traffic-engineering waypoint and is the penultimate segment endpoint
router; this node copies the last segment from the SRH into the IPv6
Destination Address and decrements Segments Left to 0. The
Software-Defined Networking (SDN) controller knows that no other node
after R3 needs to inspect the SRH, and it instructs R3 to remove the
exhausted SRH from the packet by using a PSP-flavored
SID.[¶](#section-4.16.1.3-3){.pilcrow}

The benefits for the egress PE are
straightforward:[¶](#section-4.16.1.3-4){.pilcrow}

-   [As part of the decapsulation process, the egress PE is required to
    parse and remove fewer bytes from the
    packet.[¶](#section-4.16.1.3-5.1){.pilcrow}]{#section-4.16.1.3-5.1}
-   [If a lookup on an upper-layer IP header is required (e.g., per-VRF
    VPN), the header is more likely to be within the memory accessible
    to the lookup engine in the forwarding ASIC (Application-Specific
    Integrated
    Circuit).[¶](#section-4.16.1.3-5.2){.pilcrow}]{#section-4.16.1.3-5.2}
:::
:::

::: {#section-4.16.2 .section}
#### [4.16.2.](#section-4.16.2){.section-number .selfRef} [USP: Ultimate Segment Pop of the SRH](#name-usp-ultimate-segment-pop-of){.section-name .selfRef} {#name-usp-ultimate-segment-pop-of}

The SRH processing of the End, End.X, and End.T behaviors are modified;
the instructions S02-S04 are substituted by the following
ones:[¶](#section-4.16.2-1){.pilcrow}

::: {#section-4.16.2-2}
``` {.sourcecode .lang-pseudocode}
S02.     If (Segments Left == 0) {
S03.1.      Update the Next Header field in the preceding header to
               the Next Header value of the SRH
S03.2.      Decrease the IPv6 header Payload Length by
               8*(Hdr Ext Len+1)
S03.3.      Remove the SRH from the IPv6 extension header chain
S03.4.      Proceed to process the next header in the packet
S04.     }
```

[¶](#section-4.16.2-2){.pilcrow}
:::

One of the applications of the USP flavor is when a packet with an SRH
is destined to an application on hosts with smartNICs (\"Smart Network
Interface Cards\") implementing SRv6. The USP flavor is used to remove
the consumed SRH from the extension header chain before sending the
packet to the host.[¶](#section-4.16.2-3){.pilcrow}
:::

::: {#section-4.16.3 .section}
#### [4.16.3.](#section-4.16.3){.section-number .selfRef} [USD: Ultimate Segment Decapsulation](#name-usd-ultimate-segment-decaps){.section-name .selfRef} {#name-usd-ultimate-segment-decaps}

The Upper-Layer header processing of the End, End.X, and End.T behaviors
are modified as follows:[¶](#section-4.16.3-1){.pilcrow}

End:[¶](#section-4.16.3-2){.pilcrow}

::: {#section-4.16.3-3}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 41(IPv6) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S04. } Else if (Upper-Layer header type == 4(IPv4) ) {
S05.    Remove the outer IPv6 header with all its extension headers
S06.    Submit the packet to the egress IPv4 FIB lookup for
           transmission to the new destination
S07. Else {
S08.    Process as per Section 4.1.1
S09. }
```

[¶](#section-4.16.3-3){.pilcrow}
:::

End.T:[¶](#section-4.16.3-4){.pilcrow}

::: {#section-4.16.3-5}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 41(IPv6) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Set the packet's associated FIB table to T
S04.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S05. } Else if (Upper-Layer header type == 4(IPv4) ) {
S06.    Remove the outer IPv6 header with all its extension headers
S07.    Set the packet's associated FIB table to T
S08.    Submit the packet to the egress IPv4 FIB lookup for
           transmission to the new destination
S09. Else {
S10.    Process as per Section 4.1.1
S11. }
```

[¶](#section-4.16.3-5){.pilcrow}
:::

End.X:[¶](#section-4.16.3-6){.pilcrow}

::: {#section-4.16.3-7}
``` {.sourcecode .lang-pseudocode}
S01. If (Upper-Layer header type == 41(IPv6) ||
          Upper-Layer header type == 4(IPv4) ) {
S02.    Remove the outer IPv6 header with all its extension headers
S03.    Forward the exposed IP packet to the L3 adjacency J
S04. } Else {
S05.    Process as per Section 4.1.1
S06. }
```

[¶](#section-4.16.3-7){.pilcrow}
:::

One of the applications of the USD flavor is the case of a Topology
Independent Loop-Free Alternate (TI-LFA) in P routers with
encapsulation. The USD flavor allows the last SR Segment Endpoint Node
in the repair path list to decapsulate the IPv6 header added at the
TI-LFA Point of Local Repair and forward the inner
packet.[¶](#section-4.16.3-8){.pilcrow}
:::
:::
:::
:::
:::

::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [SR Policy Headend Behaviors](#name-sr-policy-headend-behaviors){.section-name .selfRef} {#name-sr-policy-headend-behaviors}

This section describes a set of SRv6 Policy Headend
\[[RFC8402](#RFC8402){.xref}\] behaviors.[¶](#section-5-1){.pilcrow}

[]{#name-sr-policy-headend-behaviors-2}

::: {#headend}
  ----------------- -----------------------------------------------
  H.Encaps          SR Headend with Encapsulation in an SR Policy
  H.Encaps.Red      H.Encaps with Reduced Encapsulation
  H.Encaps.L2       H.Encaps Applied to Received L2 Frames
  H.Encaps.L2.Red   H.Encaps.Red Applied to Received L2 Frames
  ----------------- -----------------------------------------------

  : [Table 2](#table-2){.selfRef}: [SR Policy Headend
  Behaviors](#name-sr-policy-headend-behaviors-2){.selfRef}
:::

This list is not exhaustive, and future documents may define additional
behaviors.[¶](#section-5-3){.pilcrow}

::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [H.Encaps: SR Headend with Encapsulation in an SR Policy](#name-hencaps-sr-headend-with-enc){.section-name .selfRef} {#name-hencaps-sr-headend-with-enc}

Node N receives two packets P1=(A, B2) and P2=(A,B2)(B3, B2, B1; SL=1).
B2 is neither a local address nor SID of N.[¶](#section-5.1-1){.pilcrow}

Node N is configured with an IPv6 address T (e.g., assigned to its
loopback).[¶](#section-5.1-2){.pilcrow}

N steers the transit packets P1 and P2 into an SRv6 Policy with a Source
Address T and a segment list \<S1, S2, S3>.[¶](#section-5.1-3){.pilcrow}

The H.Encaps encapsulation behavior is defined as
follows:[¶](#section-5.1-4){.pilcrow}

::: {#section-5.1-5}
``` {.sourcecode .lang-pseudocode}
S01.   Push an IPv6 header with its own SRH
S02.   Set outer IPv6 SA = T and outer IPv6 DA to the first SID
          in the segment list
S03.   Set outer Payload Length, Traffic Class, Hop Limit, and
          Flow Label fields
S04.   Set the outer Next Header value
S05.   Decrement inner IPv6 Hop Limit or IPv4 TTL
S06.   Submit the packet to the IPv6 module for transmission to S1
```

[¶](#section-5.1-5){.pilcrow}
:::

Note:[¶](#section-5.1-6.1){.pilcrow}

S03: As described in \[[RFC2473](#RFC2473){.xref}\] and
\[[RFC6437](#RFC6437){.xref}\].[¶](#section-5.1-6.2){.pilcrow}

After the H.Encaps behavior, P1\' and P2\' respectively look
like:[¶](#section-5.1-7){.pilcrow}

-   [(T, S1) (S3, S2, S1; SL=2) (A,
    B2)[¶](#section-5.1-8.1){.pilcrow}]{#section-5.1-8.1}
-   [(T, S1) (S3, S2, S1; SL=2) (A, B2) (B3, B2, B1;
    SL=1)[¶](#section-5.1-8.2){.pilcrow}]{#section-5.1-8.2}

The received packet is encapsulated unmodified (with the exception of
the IPv4 TTL or IPv6 Hop Limit that is decremented as described in
\[[RFC2473](#RFC2473){.xref}\]).[¶](#section-5.1-9){.pilcrow}

The H.Encaps behavior is valid for any kind of L3 traffic. This behavior
is commonly used for L3VPN with IPv4 and IPv6 deployments. It may be
also used for TI-LFA
\[[SR-TI-LFA](#I-D.ietf-rtgwg-segment-routing-ti-lfa){.xref}\] at the
Point of Local Repair.[¶](#section-5.1-10){.pilcrow}

The push of the SRH [MAY]{.bcp14} be omitted when the SRv6 Policy only
contains one segment and there is no need to use any flag, tag, or
TLV.[¶](#section-5.1-11){.pilcrow}
:::

::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [H.Encaps.Red: H.Encaps with Reduced Encapsulation](#name-hencapsred-hencaps-with-red){.section-name .selfRef} {#name-hencapsred-hencaps-with-red}

The H.Encaps.Red behavior is an optimization of the H.Encaps
behavior.[¶](#section-5.2-1){.pilcrow}

H.Encaps.Red reduces the length of the SRH by excluding the first SID in
the SRH of the pushed IPv6 header. The first SID is only placed in the
Destination Address field of the pushed IPv6
header.[¶](#section-5.2-2){.pilcrow}

After the H.Encaps.Red behavior, P1\' and P2\' respectively look
like:[¶](#section-5.2-3){.pilcrow}

-   [(T, S1) (S3, S2; SL=2) (A,
    B2)[¶](#section-5.2-4.1){.pilcrow}]{#section-5.2-4.1}
-   [(T, S1) (S3, S2; SL=2) (A, B2) (B3, B2, B1;
    SL=1)[¶](#section-5.2-4.2){.pilcrow}]{#section-5.2-4.2}

The push of the SRH [MAY]{.bcp14} be omitted when the SRv6 Policy only
contains one segment and there is no need to use any flag, tag, or
TLV.[¶](#section-5.2-5){.pilcrow}
:::

::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [H.Encaps.L2: H.Encaps Applied to Received L2 Frames](#name-hencapsl2-hencaps-applied-t){.section-name .selfRef} {#name-hencapsl2-hencaps-applied-t}

The H.Encaps.L2 behavior encapsulates a received Ethernet
\[[IEEE.802.3_2018](#IEEE.802.3_2018){.xref}\] frame and its attached
VLAN header, if present, in an IPv6 packet with an SRH. The Ethernet
frame becomes the payload of the new IPv6
packet.[¶](#section-5.3-1){.pilcrow}

The Next Header field of the SRH [MUST]{.bcp14} be set to
143.[¶](#section-5.3-2){.pilcrow}

The push of the SRH [MAY]{.bcp14} be omitted when the SRv6 Policy only
contains one segment and there is no need to use any flag, tag, or
TLV.[¶](#section-5.3-3){.pilcrow}

The encapsulating node [MUST]{.bcp14} remove the preamble (if any) and
frame check sequence (FCS) from the Ethernet frame upon encapsulation,
and the decapsulating node [MUST]{.bcp14} regenerate, as required, the
preamble and FCS before forwarding the Ethernet
frame.[¶](#section-5.3-4){.pilcrow}
:::

::: {#section-5.4 .section}
### [5.4.](#section-5.4){.section-number .selfRef} [H.Encaps.L2.Red: H.Encaps.Red Applied to Received L2 Frames](#name-hencapsl2red-hencapsred-app){.section-name .selfRef} {#name-hencapsl2red-hencapsred-app}

The H.Encaps.L2.Red behavior is an optimization of the H.Encaps.L2
behavior.[¶](#section-5.4-1){.pilcrow}

H.Encaps.L2.Red reduces the length of the SRH by excluding the first SID
in the SRH of the pushed IPv6 header. The first SID is only placed in
the Destination Address field of the pushed IPv6
header.[¶](#section-5.4-2){.pilcrow}

The push of the SRH [MAY]{.bcp14} be omitted when the SRv6 Policy only
contains one segment and there is no need to use any flag, tag, or
TLV.[¶](#section-5.4-3){.pilcrow}
:::
:::

::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Counters](#name-counters){.section-name .selfRef} {#name-counters}

A node supporting this document [SHOULD]{.bcp14} implement a pair of
traffic counters (one for packets and one for bytes) per local SID
entry, for traffic that matched that SID and was processed successfully
(i.e., packets that generate ICMP Error Messages or are dropped are not
counted). The retrieval of these counters from MIB, NETCONF/YANG, or any
other data structure is outside the scope of this
document.[¶](#section-6-1){.pilcrow}
:::

::: {#OpsFlowLabel}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Flow-Based Hash Computation](#name-flow-based-hash-computation){.section-name .selfRef} {#name-flow-based-hash-computation}

When a flow-based selection within a set needs to be performed, the IPv6
Source Address, the IPv6 Destination Address, and the IPv6 Flow Label of
the outer IPv6 header [MUST]{.bcp14} be included in the flow-based
hash.[¶](#section-7-1){.pilcrow}

This may occur in any of the following
scenarios:[¶](#section-7-2){.pilcrow}

-   ::: {#section-7-3.1}
    A FIB lookup is performed and multiple ECMP paths exist to the
    updated destination address.[¶](#section-7-3.1.1){.pilcrow}
    :::

-   ::: {#section-7-3.2}
    End.X, End.DX4, or End.DX6 is bound to an array of
    adjacencies.[¶](#section-7-3.2.1){.pilcrow}
    :::

-   ::: {#section-7-3.3}
    The packet is steered in an SR Policy whose selected path has
    multiple SID lists.[¶](#section-7-3.3.1){.pilcrow}
    :::

Additionally, any transit router in an SRv6 domain includes the outer
flow label in its ECMP flow-based hash
\[[RFC6437](#RFC6437){.xref}\].[¶](#section-7-4){.pilcrow}
:::
:::

::: {#cp}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Control Plane](#name-control-plane){.section-name .selfRef} {#name-control-plane}

In an SDN environment, one expects the controller to explicitly
provision the SIDs and/or discover them as part of a service discovery
function. Applications residing on top of the controller could then
discover the required SIDs and combine them to form a distributed
network program.[¶](#section-8-1){.pilcrow}

The concept of \"SRv6 Network Programming\" refers to the capability of
an application to encode any complex program as a set of individual
functions distributed through the network. Some functions relate to
underlay SLA, others to overlay/tenant, and others to complex
applications residing in VMs and containers.[¶](#section-8-2){.pilcrow}

While not necessary for an SDN control plane, the remainder of this
section provides a high-level illustrative overview of how control-plane
protocols may be involved with SRv6. Their specification is outside the
scope of this document.[¶](#section-8-3){.pilcrow}

::: {#igp}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [IGP](#name-igp){.section-name .selfRef} {#name-igp}

The End, End.T, and End.X SIDs express topological behaviors and hence
are expected to be signaled in the IGP together with the flavors PSP,
USP, and USD. The IGP should also advertise the Maximum SID Depth (MSD)
capability of the node for each type of SRv6 operation \-- in
particular, the SR source (e.g., H.Encaps), intermediate endpoint (e.g.,
End and End.X), and final endpoint (e.g., End.DX4 and End.DT6)
behaviors. These capabilities are factored in by an SR source node (or a
controller) during the SR Policy
computation.[¶](#section-8.1-1){.pilcrow}

The presence of SIDs in the IGP does not imply any routing semantics to
the addresses represented by these SIDs. The routing reachability to an
IPv6 address is solely governed by the non-SID-related IGP prefix
reachability information that includes locators. Routing is neither
governed nor influenced in any way by a SID advertisement in the
IGP.[¶](#section-8.1-2){.pilcrow}

These SIDs provide important topological behaviors for the IGP to build
Fast Reroute (FRR) solutions based on TI-LFA
\[[SR-TI-LFA](#I-D.ietf-rtgwg-segment-routing-ti-lfa){.xref}\] and for
TE processes relying on an IGP topology database to build SR
Policies.[¶](#section-8.1-3){.pilcrow}
:::
:::

::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [BGP-LS](#name-bgp-ls){.section-name .selfRef} {#name-bgp-ls}

BGP-LS provides the functionality for topology discovery that includes
the SRv6 capabilities of the nodes, their locators, and locally
instantiated SIDs. This enables controllers or applications to build an
inter-domain topology that can be used for computation of SR Policies
using the SRv6 SIDs.[¶](#section-8.2-1){.pilcrow}
:::

::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [BGP IP/VPN/EVPN](#name-bgp-ip-vpn-evpn){.section-name .selfRef} {#name-bgp-ip-vpn-evpn}

The End.DX4, End.DX6, End.DT4, End.DT6, End.DT46, End.DX2, End.DX2V,
End.DT2U, and End.DT2M SIDs can be signaled in
BGP.[¶](#section-8.3-1){.pilcrow}

In some scenarios, an egress PE advertising a VPN route might wish to
abstract the specific behavior bound to the SID from the ingress PE and
other routers in the network. In such case, the SID may be advertised
using the Opaque SRv6 Endpoint Behavior codepoint defined in [Table
6](#endpoint_cp_types){.xref}. The details of such control-plane
signaling mechanisms are out of the scope of this
document.[¶](#section-8.3-2){.pilcrow}
:::

::: {#section-8.4 .section}
### [8.4.](#section-8.4){.section-number .selfRef} [Summary](#name-summary){.section-name .selfRef} {#name-summary}

The following table summarizes which SID behaviors may be signaled in
which control-plane protocol.[¶](#section-8.4-1){.pilcrow}

[]{#name-srv6-locally-instantiated-s}

::: {#localsid_signaling}
                          IGP   BGP-LS   BGP IP/VPN/EVPN
  ----------------------- ----- -------- -----------------
  End (PSP, USP, USD)     X     X        
  End.X (PSP, USP, USD)   X     X        
  End.T (PSP, USP, USD)   X     X        
  End.DX6                 X     X        X
  End.DX4                 X     X        X
  End.DT6                 X     X        X
  End.DT4                 X     X        X
  End.DT46                X     X        X
  End.DX2                       X        X
  End.DX2V                      X        X
  End.DT2U                      X        X
  End.DT2M                      X        X
  End.B6.Encaps                 X        
  End.B6.Encaps.Red             X        
  End.B6.BM                     X        

  : [Table 3](#table-3){.selfRef}: [SRv6 Locally Instantiated SIDs
  Signaling](#name-srv6-locally-instantiated-s){.selfRef}
:::

The following table summarizes which SR Policy Headend capabilities may
be signaled in which control-plane
protocol.[¶](#section-8.4-3){.pilcrow}

[]{#name-srv6-policy-headend-behavio}

::: {#transit_signaling}
                    IGP   BGP-LS   BGP IP/VPN/EVPN
  ----------------- ----- -------- -----------------
  H.Encaps          X     X        
  H.Encaps.Red      X     X        
  H.Encaps.L2             X        
  H.Encaps.L2.Red         X        

  : [Table 4](#table-4){.selfRef}: [SRv6 Policy Headend Behaviors
  Signaling](#name-srv6-policy-headend-behavio){.selfRef}
:::

The previous table describes generic capabilities. It does not describe
specific instantiated SR Policies.[¶](#section-8.4-5){.pilcrow}

For example, a BGP-LS advertisement of H.Encaps behavior would describe
the capability of node N to perform H.Encaps behavior. Specifically, it
would describe how many SIDs could be pushed by N without significant
performance degradation.[¶](#section-8.4-6){.pilcrow}

As a reminder, an SR Policy is always assigned a Binding SID
\[[RFC8402](#RFC8402){.xref}\]. Binding SIDs are also advertised in
BGP-LS as shown in [Table 3](#localsid_signaling){.xref}. Hence, [Table
4](#transit_signaling){.xref} only focuses on the generic capabilities
related to H.Encaps.[¶](#section-8.4-8){.pilcrow}
:::
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

The security considerations for Segment Routing are discussed in
\[[RFC8402](#RFC8402){.xref}\]. [Section
5](https://www.rfc-editor.org/rfc/rfc8754#section-5){.relref} of
\[[RFC8754](#RFC8754){.xref}\] describes the SR Deployment Model and the
requirements for securing the SR Domain. The security considerations of
\[[RFC8754](#RFC8754){.xref}\] also cover topics such as attack vectors
and their mitigation mechanisms that also apply the behaviors introduced
in this document. Together, they describe the required security
mechanisms that allow establishment of an SR domain of trust. Having
such a well-defined trust boundary is necessary in order to operate
SRv6-based services for internal traffic while preventing any external
traffic from accessing or exploiting the SRv6-based services. Care and
rigor in IPv6 address allocation for use for SRv6 SID allocations and
network infrastructure addresses, as distinct from IPv6 addresses
allocated for end users and systems (as illustrated in [Section
5.1](https://www.rfc-editor.org/rfc/rfc8754#section-5.1){.relref} of
\[[RFC8754](#RFC8754){.xref}\]), can provide the clear distinction
between internal and external address space that is required to maintain
the integrity and security of the SRv6 Domain. Additionally,
\[[RFC8754](#RFC8754){.xref}\] defines a Hashed Message Authentication
Code (HMAC) TLV permitting SR Segment Endpoint Nodes in the SR domain to
verify that the SRH applied to a packet was selected by an authorized
party and to ensure that the segment list is not modified after
generation, regardless of the number of segments in the segment list.
When enabled by local configuration, HMAC processing occurs at the
beginning of SRH processing as defined in [Section
2.1.2.1](https://www.rfc-editor.org/rfc/rfc8754#section-2.1.2.1){.relref}
of \[[RFC8754](#RFC8754){.xref}\].[¶](#section-9-1){.pilcrow}

This document introduces SRv6 Endpoint and SR Policy Headend behaviors
for implementation on SRv6-capable nodes in the network. The definition
of the SR Policy Headend should be consistent with the specific behavior
used and any local configuration (as specified in [Section
4.1.1](#upper){.xref}). As such, this document does not introduce any
new security considerations.[¶](#section-9-2){.pilcrow}

The SID behaviors specified in this document have the same HMAC TLV
handling and mutability properties with regard to the Flags, Tag, and
Segment List field as the SID behavior specified in
\[[RFC8754](#RFC8754){.xref}\].[¶](#section-9-3){.pilcrow}
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#ianaethernet}
::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Ethernet Next Header Type](#name-ethernet-next-header-type){.section-name .selfRef} {#name-ethernet-next-header-type}

IANA has allocated \"Ethernet\" (value 143) in the \"Assigned Internet
Protocol Numbers\" registry (see
\<<https://www.iana.org/assignments/protocol-numbers/>\>). Value 143 in
the Next Header field of an IPv6 header or any extension header
indicates that the payload is an Ethernet frame
\[[IEEE.802.3_2018](#IEEE.802.3_2018){.xref}\].[¶](#section-10.1-1){.pilcrow}
:::
:::

::: {#iana_registry}
::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [SRv6 Endpoint Behaviors Registry](#name-srv6-endpoint-behaviors-reg){.section-name .selfRef} {#name-srv6-endpoint-behaviors-reg}

IANA has created a new top-level registry called \"Segment Routing\"
(see \<<https://www.iana.org/assignments/segment-routing/>\>). This
registry serves as a top-level registry for all Segment Routing
subregistries.[¶](#section-10.2-1){.pilcrow}

Additionally, IANA has created a new subregistry called \"SRv6 Endpoint
Behaviors\" under the top-level \"Segment Routing\" registry. This
subregistry maintains 16-bit identifiers for the SRv6 Endpoint
behaviors. This registry is established to provide consistency for
control-plane protocols that need to refer to these behaviors. These
values are not encoded in the function bits within a
SID.[¶](#section-10.2-2){.pilcrow}

::: {#iana_policy}
::: {#section-10.2.1 .section}
#### [10.2.1.](#section-10.2.1){.section-number .selfRef} [Registration Procedures](#name-registration-procedures){.section-name .selfRef} {#name-registration-procedures}

The range of the registry is 0-65535 (0x0000-0xFFFF). The table below
contains the allocation ranges and registration policies
\[[RFC8126](#RFC8126){.xref}\] for each:[¶](#section-10.2.1-1){.pilcrow}

[]{#name-registration-procedures-2}

::: {#endpoint_cp_codepoint_ranges}
  Range         Range (Hex)     Registration Procedures   Note
  ------------- --------------- ------------------------- ---------------------
  0             0x0000          Reserved                  Not to be allocated
  1-32767       0x0001-0x7FFF   First Come First Served   
  32768-34815   0x8000-0x87FF   Private Use               
  34816-65534   0x8800-0xFFFE   Reserved                  
  65535         0xFFFF          Reserved                  Opaque

  : [Table 5](#table-5){.selfRef}: [Registration
  Procedures](#name-registration-procedures-2){.selfRef}
:::
:::
:::

::: {#section-10.2.2 .section}
#### [10.2.2.](#section-10.2.2){.section-number .selfRef} [Initial Registrations](#name-initial-registrations){.section-name .selfRef} {#name-initial-registrations}

The initial registrations for the subregistry are as
follows:[¶](#section-10.2.2-1){.pilcrow}

[]{#name-initial-registrations-2}

::: {#endpoint_cp_types}
  Value         Hex             Endpoint Behavior             Reference
  ------------- --------------- ----------------------------- --------------------
  0             0x0000          Reserved                      
  1             0x0001          End                           RFC 8986
  2             0x0002          End with PSP                  RFC 8986
  3             0x0003          End with USP                  RFC 8986
  4             0x0004          End with PSP & USP            RFC 8986
  5             0x0005          End.X                         RFC 8986
  6             0x0006          End.X with PSP                RFC 8986
  7             0x0007          End.X with USP                RFC 8986
  8             0x0008          End.X with PSP & USP          RFC 8986
  9             0x0009          End.T                         RFC 8986
  10            0x000A          End.T with PSP                RFC 8986
  11            0x000B          End.T with USP                RFC 8986
  12            0x000C          End.T with PSP & USP          RFC 8986
  13            0x000D          Unassigned                    
  14            0x000E          End.B6.Encaps                 RFC 8986
  15            0x000F          End.BM                        RFC 8986
  16            0x0010          End.DX6                       RFC 8986
  17            0x0011          End.DX4                       RFC 8986
  18            0x0012          End.DT6                       RFC 8986
  19            0x0013          End.DT4                       RFC 8986
  20            0x0014          End.DT46                      RFC 8986
  21            0x0015          End.DX2                       RFC 8986
  22            0x0016          End.DX2V                      RFC 8986
  23            0x0017          End.DT2U                      RFC 8986
  24            0x0018          End.DT2M                      RFC 8986
  25            0x0019          Reserved                      RFC 8986
  26            0x001A          Unassigned                    
  27            0x001B          End.B6.Encaps.Red             RFC 8986
  28            0x001C          End with USD                  RFC 8986
  29            0x001D          End with PSP & USD            RFC 8986
  30            0x001E          End with USP & USD            RFC 8986
  31            0x001F          End with PSP, USP & USD       RFC 8986
  32            0x0020          End.X with USD                RFC 8986
  33            0x0021          End.X with PSP & USD          RFC 8986
  34            0x0022          End.X with USP & USD          RFC 8986
  35            0x0023          End.X with PSP, USP & USD     RFC 8986
  36            0x0024          End.T with USD                RFC 8986
  37            0x0025          End.T with PSP & USD          RFC 8986
  38            0x0026          End.T with USP & USD          RFC 8986
  39            0x0027          End.T with PSP, USP & USD     RFC 8986
  40-32766      0x0028-0x7FFE   Unassigned                    
  32767         0x7FFF          The SID defined in RFC 8754   RFC 8986, RFC 8754
  32768-34815   0x8000-0x87FF   Reserved for Private Use      RFC 8986
  34816-65534   0x8800-0xFFFE   Reserved                      RFC 8986
  65535         0xFFFF          Opaque                        RFC 8986

  : [Table 6](#table-6){.selfRef}: [Initial
  Registrations](#name-initial-registrations-2){.selfRef}
:::
:::
:::
:::
:::

::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-11.1 .section}
### [11.1.](#section-11.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[IEEE.802.3_2018\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Ethernet\"]{.refTitle},
    [IEEE 802.3-2018]{.refContent}, [DOI
    10.1109/IEEESTD.2018.8457469]{.seriesInfo}, 31 August 2018,
    \<<https://ieeexplore.ieee.org/document/8457469>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2473\]
:   [Conta, A.]{.refAuthor}[ and S. Deering]{.refAuthor}, [\"Generic
    Packet Tunneling in IPv6 Specification\"]{.refTitle}, [RFC
    2473]{.seriesInfo}, [DOI 10.17487/RFC2473]{.seriesInfo}, December
    1998, \<<https://www.rfc-editor.org/info/rfc2473>\>.
:   

\[RFC6437\]
:   [Amante, S.]{.refAuthor}[, Carpenter, B.]{.refAuthor}[,
    Jiang, S.]{.refAuthor}[, and J. Rajahalme]{.refAuthor}, [\"IPv6 Flow
    Label Specification\"]{.refTitle}, [RFC 6437]{.seriesInfo}, [DOI
    10.17487/RFC6437]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6437>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8200\]
:   [Deering, S.]{.refAuthor}[ and R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.
:   

\[RFC8402\]
:   [Filsfils, C., Ed.]{.refAuthor}[, Previdi, S., Ed.]{.refAuthor}[,
    Ginsberg, L.]{.refAuthor}[, Decraene, B.]{.refAuthor}[,
    Litkowski, S.]{.refAuthor}[, and R. Shakir]{.refAuthor}, [\"Segment
    Routing Architecture\"]{.refTitle}, [RFC 8402]{.seriesInfo}, [DOI
    10.17487/RFC8402]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8402>\>.
:   

\[RFC8754\]
:   [Filsfils, C., Ed.]{.refAuthor}[, Dukes, D., Ed.]{.refAuthor}[,
    Previdi, S.]{.refAuthor}[, Leddy, J.]{.refAuthor}[,
    Matsushima, S.]{.refAuthor}[, and D. Voyer]{.refAuthor}, [\"IPv6
    Segment Routing Header (SRH)\"]{.refTitle}, [RFC 8754]{.seriesInfo},
    [DOI 10.17487/RFC8754]{.seriesInfo}, March 2020,
    \<<https://www.rfc-editor.org/info/rfc8754>\>.
:   
:::

::: {#section-11.2 .section}
### [11.2.](#section-11.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[RFC4193\]
:   [Hinden, R.]{.refAuthor}[ and B. Haberman]{.refAuthor}, [\"Unique
    Local IPv6 Unicast Addresses\"]{.refTitle}, [RFC 4193]{.seriesInfo},
    [DOI 10.17487/RFC4193]{.seriesInfo}, October 2005,
    \<<https://www.rfc-editor.org/info/rfc4193>\>.
:   

\[RFC4364\]
:   [Rosen, E.]{.refAuthor}[ and Y. Rekhter]{.refAuthor}, [\"BGP/MPLS IP
    Virtual Private Networks (VPNs)\"]{.refTitle}, [RFC
    4364]{.seriesInfo}, [DOI 10.17487/RFC4364]{.seriesInfo}, February
    2006, \<<https://www.rfc-editor.org/info/rfc4364>\>.
:   

\[RFC4664\]
:   [Andersson, L., Ed.]{.refAuthor}[ and E. Rosen, Ed.]{.refAuthor},
    [\"Framework for Layer 2 Virtual Private Networks
    (L2VPNs)\"]{.refTitle}, [RFC 4664]{.seriesInfo}, [DOI
    10.17487/RFC4664]{.seriesInfo}, September 2006,
    \<<https://www.rfc-editor.org/info/rfc4664>\>.
:   

\[RFC4761\]
:   [Kompella, K., Ed.]{.refAuthor}[ and Y. Rekhter, Ed.]{.refAuthor},
    [\"Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery
    and Signaling\"]{.refTitle}, [RFC 4761]{.seriesInfo}, [DOI
    10.17487/RFC4761]{.seriesInfo}, January 2007,
    \<<https://www.rfc-editor.org/info/rfc4761>\>.
:   

\[RFC4762\]
:   [Lasserre, M., Ed.]{.refAuthor}[ and V. Kompella, Ed.]{.refAuthor},
    [\"Virtual Private LAN Service (VPLS) Using Label Distribution
    Protocol (LDP) Signaling\"]{.refTitle}, [RFC 4762]{.seriesInfo},
    [DOI 10.17487/RFC4762]{.seriesInfo}, January 2007,
    \<<https://www.rfc-editor.org/info/rfc4762>\>.
:   

\[RFC7432\]
:   [Sajassi, A., Ed.]{.refAuthor}[, Aggarwal, R.]{.refAuthor}[,
    Bitar, N.]{.refAuthor}[, Isaac, A.]{.refAuthor}[,
    Uttaro, J.]{.refAuthor}[, Drake, J.]{.refAuthor}[, and W.
    Henderickx]{.refAuthor}, [\"BGP MPLS-Based Ethernet
    VPN\"]{.refTitle}, [RFC 7432]{.seriesInfo}, [DOI
    10.17487/RFC7432]{.seriesInfo}, February 2015,
    \<<https://www.rfc-editor.org/info/rfc7432>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}[, Leiba, B.]{.refAuthor}[, and T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8214\]
:   [Boutros, S.]{.refAuthor}[, Sajassi, A.]{.refAuthor}[,
    Salam, S.]{.refAuthor}[, Drake, J.]{.refAuthor}[, and J.
    Rabadan]{.refAuthor}, [\"Virtual Private Wire Service Support in
    Ethernet VPN\"]{.refTitle}, [RFC 8214]{.seriesInfo}, [DOI
    10.17487/RFC8214]{.seriesInfo}, August 2017,
    \<<https://www.rfc-editor.org/info/rfc8214>\>.
:   

\[RFC8317\]
:   [Sajassi, A., Ed.]{.refAuthor}[, Salam, S.]{.refAuthor}[,
    Drake, J.]{.refAuthor}[, Uttaro, J.]{.refAuthor}[,
    Boutros, S.]{.refAuthor}[, and J. Rabadan]{.refAuthor},
    [\"Ethernet-Tree (E-Tree) Support in Ethernet VPN (EVPN) and
    Provider Backbone Bridging EVPN (PBB-EVPN)\"]{.refTitle}, [RFC
    8317]{.seriesInfo}, [DOI 10.17487/RFC8317]{.seriesInfo}, January
    2018, \<<https://www.rfc-editor.org/info/rfc8317>\>.
:   

\[SR-TI-LFA\]
:   [Litkowski, S.]{.refAuthor}[, Bashandy, A.]{.refAuthor}[,
    Filsfils, C.]{.refAuthor}[, Francois, P.]{.refAuthor}[,
    Decraene, B.]{.refAuthor}[, and D. Voyer]{.refAuthor}, [\"Topology
    Independent Fast Reroute using Segment Routing\"]{.refTitle}, [Work
    in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-rtgwg-segment-routing-ti-lfa-06]{.seriesInfo}, 1 February
    2021,
    \<<https://tools.ietf.org/html/draft-ietf-rtgwg-segment-routing-ti-lfa-06>\>.
:   

\[SRV6-NET-PGM-ILLUST\]
:   [Filsfils, C.]{.refAuthor}[, Camarillo, P., Ed.]{.refAuthor}[,
    Li, Z.]{.refAuthor}[, Matsushima, S.]{.refAuthor}[,
    Decraene, B.]{.refAuthor}[, Steinberg, D.]{.refAuthor}[,
    Lebrun, D.]{.refAuthor}[, Raszuk, R.]{.refAuthor}[, and J.
    Leddy]{.refAuthor}, [\"Illustrations for SRv6 Network
    Programming\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-filsfils-spring-srv6-net-pgm-illustration-03]{.seriesInfo}, 25
    September 2020,
    \<<https://tools.ietf.org/html/draft-filsfils-spring-srv6-net-pgm-illustration-03>\>.
:   
:::
:::

::: {#Acknowledgements}
::: {#section-appendix.a .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The authors would like to acknowledge [Stefano Previdi]{.contact-name},
[Dave Barach]{.contact-name}, [Mark Townsley]{.contact-name}, [Peter
Psenak]{.contact-name}, [Thierry Couture]{.contact-name}, [Kris
Michielsen]{.contact-name}, [Paul Wells]{.contact-name}, [Robert
Hanzl]{.contact-name}, [Dan Ye]{.contact-name}, [Gaurav
Dawra]{.contact-name}, [Faisal Iqbal]{.contact-name}, [Jaganbabu
Rajamanickam]{.contact-name}, [David Toscano]{.contact-name}, [Asif
Islam]{.contact-name}, [Jianda Liu]{.contact-name}, [Yunpeng
Zhang]{.contact-name}, [Jiaoming Li]{.contact-name}, [Narendra
A.K]{.contact-name}, [Mike Mc Gourty]{.contact-name}, [Bhupendra
Yadav]{.contact-name}, [Sherif Toulan]{.contact-name}, [Satish
Damodaran]{.contact-name}, [John Bettink]{.contact-name}, [Kishore
Nandyala Veera Venk]{.contact-name}, [Jisu Bhattacharya]{.contact-name},
[Saleem Hafeez]{.contact-name}, and [Brian
Carpenter]{.contact-name}.[¶](#section-appendix.a-1){.pilcrow}
:::
:::

::: {#section-appendix.b .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

::: {.left dir="auto"}
[Daniel Bernier]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <daniel.bernier@bell.ca>
:::

::: {.left dir="auto"}
[Dirk Steinberg]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Lapishills Consulting Limited]{.org}
:::

::: {.left dir="auto"}
[Cyprus]{.country-name}
:::

::: email
Email: <dirk@lapishills.com>
:::

::: {.left dir="auto"}
[Robert Raszuk]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bloomberg LP]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <robert@raszuk.net>
:::

::: {.left dir="auto"}
[Bruno Decraene]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Orange]{.org}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <bruno.decraene@orange.com>
:::

::: {.left dir="auto"}
[Bart Peirens]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Proximus]{.org}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <bart.peirens@proximus.com>
:::

::: {.left dir="auto"}
[Hani Elmalky]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Google]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <helmalky@google.com>
:::

::: {.left dir="auto"}
[Prem Jonnalagadda]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Barefoot Networks]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <prem@barefootnetworks.com>
:::

::: {.left dir="auto"}
[Milad Sharif]{.fn .nameRole}
:::

::: {.left dir="auto"}
[SambaNova Systems]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <milad.sharif@sambanova.ai>
:::

::: {.left dir="auto"}
[David Lebrun]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Google]{.org}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <dlebrun@google.com>
:::

::: {.left dir="auto"}
[Stefano Salsano]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universita di Roma \"Tor Vergata\"]{.org}
:::

::: {.left dir="auto"}
[Italy]{.country-name}
:::

::: email
Email: <stefano.salsano@uniroma2.it>
:::

::: {.left dir="auto"}
[Ahmed AbdelSalam]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Gran Sasso Science Institute]{.org}
:::

::: {.left dir="auto"}
[Italy]{.country-name}
:::

::: email
Email: <ahmed.abdelsalam@gssi.it>
:::

::: {.left dir="auto"}
[Gaurav Naik]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Drexel University]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <gn@drexel.edu>
:::

::: {.left dir="auto"}
[Arthi Ayyangar]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Arrcus, Inc]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <arthi@arrcus.com>
:::

::: {.left dir="auto"}
[Satish Mynam]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Arrcus, Inc]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <satishm@arrcus.com>
:::

::: {.left dir="auto"}
[Wim Henderickx]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nokia]{.org}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <wim.henderickx@nokia.com>
:::

::: {.left dir="auto"}
[Shaowen Ma]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper]{.org}
:::

::: {.left dir="auto"}
[Singapore]{.country-name}
:::

::: email
Email: <mashao@juniper.net>
:::

::: {.left dir="auto"}
[Ahmed Bashandy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Individual]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <abashandy.ietf@gmail.com>
:::

::: {.left dir="auto"}
[Francois Clad]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <fclad@cisco.com>
:::

::: {.left dir="auto"}
[Kamran Raza]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <skraza@cisco.com>
:::

::: {.left dir="auto"}
[Darren Dukes]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <ddukes@cisco.com>
:::

::: {.left dir="auto"}
[Patrice Brissete]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <pbrisset@cisco.com>
:::

::: {.left dir="auto"}
[Zafar Ali]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <zali@cisco.com>
:::

::: {.left dir="auto"}
[Ketan Talaulikar]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[India]{.country-name}
:::

::: email
Email: <ketant@cisco.com>
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Clarence Filsfils ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Belgium]{.country-name}
:::

::: email
Email: <cf@cisco.com>
:::

::: {.left dir="auto"}
[Pablo Camarillo Garvia ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: email
Email: <pcamaril@cisco.com>
:::

::: {.left dir="auto"}
[John Leddy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Akamai Technologies]{.org}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <john@leddy.net>
:::

::: {.left dir="auto"}
[Daniel Voyer]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Bell Canada]{.org}
:::

::: {.left dir="auto"}
[Canada]{.country-name}
:::

::: email
Email: <daniel.voyer@bell.ca>
:::

::: {.left dir="auto"}
[Satoru Matsushima]{.fn .nameRole}
:::

::: {.left dir="auto"}
[SoftBank]{.org}
:::

::: {.left dir="auto"}
[Japan]{.country-name}
:::

::: email
Email: <satoru.matsushima@g.softbank.co.jp>
:::

::: {.left dir="auto"}
[Zhenbin Li]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Huawei Technologies]{.org}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <lizhenbin@huawei.com>
:::
:::
:::
