  RFC 9275      ALTO-PV        September 2022
  ------------- -------------- ----------------
  Gao, et al.   Experimental   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9275](https://www.rfc-editor.org/rfc/rfc9275){.eref}

Category:
:   Experimental

Published:
:   September 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    K. Gao
    :::

    ::: org
    Sichuan University
    :::
    :::

    ::: author
    ::: author-name
    Y. Lee
    :::

    ::: org
    Samsung
    :::
    :::

    ::: author
    ::: author-name
    S. Randriamasy
    :::

    ::: org
    Nokia Bell Labs
    :::
    :::

    ::: author
    ::: author-name
    Y. Yang
    :::

    ::: org
    Yale University
    :::
    :::

    ::: author
    ::: author-name
    J. Zhang
    :::

    ::: org
    Tongji University
    :::
    :::
:::

# RFC 9275 {#rfcnum}

# An Extension for Application-Layer Traffic Optimization (ALTO): Path Vector {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document is an extension to the base Application-Layer Traffic
Optimization (ALTO) protocol. It extends the ALTO cost map and ALTO
property map services so that an application can decide to which
endpoint(s) to connect based not only on numerical/ordinal cost values
but also on fine-grained abstract information regarding the paths. This
is useful for applications whose performance is impacted by specific
components of a network on the end-to-end paths, e.g., they may infer
that several paths share common links and prevent traffic bottlenecks by
avoiding such paths. This extension introduces a new abstraction called
the \"Abstract Network Element\" (ANE) to represent these components and
encodes a network path as a vector of ANEs. Thus, it provides a more
complete but still abstract graph representation of the underlying
network(s) for informed traffic optimization among
endpoints.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for examination, experimental implementation, and
evaluation.[¶](#section-boilerplate.1-1){.pilcrow}

This document defines an Experimental Protocol for the Internet
community. This document is a product of the Internet Engineering Task
Force (IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Not all documents approved
by the IESG are candidates for any level of Internet Standard; see
Section 2 of RFC 7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9275>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Requirements
    Language](#name-requirements-language){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Terminology](#name-terminology){.xref}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Requirements and Use
    Cases](#name-requirements-and-use-cases){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Design
        Requirements](#name-design-requirements){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Sample Use
        Cases](#name-sample-use-cases){.xref}

        -   ::: {#section-toc.1-1.4.2.2.2.1}
            [4.2.1](#section-4.2.1){.xref}.  [Exposing Network
            Bottlenecks](#name-exposing-network-bottleneck){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.2.2.2}
            [4.2.2](#section-4.2.2){.xref}.  [Resource Exposure for CDNs
            and Service Edges](#name-resource-exposure-for-cdns-){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Path Vector Extension:
    Overview](#name-path-vector-extension-overv){.xref}

    -   ::: {#section-toc.1-1.5.2.1}
        [5.1](#section-5.1){.xref}.  [Abstract Network Element
        (ANE)](#name-abstract-network-element-an){.xref}

        -   ::: {#section-toc.1-1.5.2.1.2.1}
            [5.1.1](#section-5.1.1){.xref}.  [ANE Entity
            Domain](#name-ane-entity-domain){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.1.2.2}
            [5.1.2](#section-5.1.2){.xref}.  [Ephemeral and Persistent
            ANEs](#name-ephemeral-and-persistent-an){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.1.2.3}
            [5.1.3](#section-5.1.3){.xref}.  [Property
            Filtering](#name-property-filtering){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.5.2.2}
        [5.2](#section-5.2){.xref}.  [Path Vector Cost
        Type](#name-path-vector-cost-type){.xref}
        :::

    -   ::: {#section-toc.1-1.5.2.3}
        [5.3](#section-5.3){.xref}.  [Multipart Path Vector
        Response](#name-multipart-path-vector-respo){.xref}

        -   ::: {#section-toc.1-1.5.2.3.2.1}
            [5.3.1](#section-5.3.1){.xref}.  [Identifying the Media Type
            of the Object
            Root](#name-identifying-the-media-type-){.xref}
            :::

        -   ::: {#section-toc.1-1.5.2.3.2.2}
            [5.3.2](#section-5.3.2){.xref}.  [References to Part
            Messages](#name-references-to-part-messages){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Specification: Basic Data
    Types](#name-specification-basic-data-ty){.xref}

    -   ::: {#section-toc.1-1.6.2.1}
        [6.1](#section-6.1){.xref}.  [ANE Name](#name-ane-name){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.2}
        [6.2](#section-6.2){.xref}.  [ANE Entity
        Domain](#name-ane-entity-domain-2){.xref}

        -   ::: {#section-toc.1-1.6.2.2.2.1}
            [6.2.1](#section-6.2.1){.xref}.  [Entity Domain
            Type](#name-entity-domain-type){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.2}
            [6.2.2](#section-6.2.2){.xref}.  [Domain-Specific Entity
            Identifier](#name-domain-specific-entity-iden){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.3}
            [6.2.3](#section-6.2.3){.xref}.  [Hierarchy and
            Inheritance](#name-hierarchy-and-inheritance){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.2.2.4}
            [6.2.4](#section-6.2.4){.xref}.  [Media Type of Defining
            Resource](#name-media-type-of-defining-reso){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.3}
        [6.3](#section-6.3){.xref}.  [ANE Property
        Name](#name-ane-property-name){.xref}
        :::

    -   ::: {#section-toc.1-1.6.2.4}
        [6.4](#section-6.4){.xref}.  [Initial ANE Property
        Types](#name-initial-ane-property-types){.xref}

        -   ::: {#section-toc.1-1.6.2.4.2.1}
            [6.4.1](#section-6.4.1){.xref}.  [Maximum Reservable
            Bandwidth](#name-maximum-reservable-bandwidt){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.4.2.2}
            [6.4.2](#section-6.4.2){.xref}.  [Persistent Entity
            ID](#name-persistent-entity-id){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.4.2.3}
            [6.4.3](#section-6.4.3){.xref}.  [Examples](#name-examples){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.5}
        [6.5](#section-6.5){.xref}.  [Path Vector Cost
        Type](#name-path-vector-cost-type-2){.xref}

        -   ::: {#section-toc.1-1.6.2.5.2.1}
            [6.5.1](#section-6.5.1){.xref}.  [Cost Metric:
            \"ane-path\"](#name-cost-metric-ane-path){.xref}
            :::

        -   ::: {#section-toc.1-1.6.2.5.2.2}
            [6.5.2](#section-6.5.2){.xref}.  [Cost Mode:
            \"array\"](#name-cost-mode-array){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.6.2.6}
        [6.6](#section-6.6){.xref}.  [Part Resource ID and Part Content
        ID](#name-part-resource-id-and-part-c){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Specification: Service
    Extensions](#name-specification-service-exten){.xref}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Notation](#name-notation){.xref}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Multipart Filtered Cost Map for
        Path Vector](#name-multipart-filtered-cost-map){.xref}

        -   ::: {#section-toc.1-1.7.2.2.2.1}
            [7.2.1](#section-7.2.1){.xref}.  [Media
            Type](#name-media-type){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.2}
            [7.2.2](#section-7.2.2){.xref}.  [HTTP
            Method](#name-http-method){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.3}
            [7.2.3](#section-7.2.3){.xref}.  [Accept Input
            Parameters](#name-accept-input-parameters){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.4}
            [7.2.4](#section-7.2.4){.xref}.  [Capabilities](#name-capabilities){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.5}
            [7.2.5](#section-7.2.5){.xref}.  [Uses](#name-uses){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.2.2.6}
            [7.2.6](#section-7.2.6){.xref}.  [Response](#name-response){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.7.2.3}
        [7.3](#section-7.3){.xref}.  [Multipart Endpoint Cost Service
        for Path Vector](#name-multipart-endpoint-cost-ser){.xref}

        -   ::: {#section-toc.1-1.7.2.3.2.1}
            [7.3.1](#section-7.3.1){.xref}.  [Media
            Type](#name-media-type-2){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.3.2.2}
            [7.3.2](#section-7.3.2){.xref}.  [HTTP
            Method](#name-http-method-2){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.3.2.3}
            [7.3.3](#section-7.3.3){.xref}.  [Accept Input
            Parameters](#name-accept-input-parameters-2){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.3.2.4}
            [7.3.4](#section-7.3.4){.xref}.  [Capabilities](#name-capabilities-2){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.3.2.5}
            [7.3.5](#section-7.3.5){.xref}.  [Uses](#name-uses-2){.xref}
            :::

        -   ::: {#section-toc.1-1.7.2.3.2.6}
            [7.3.6](#section-7.3.6){.xref}.  [Response](#name-response-2){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Examples](#name-examples-2){.xref}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [Sample
        Setup](#name-sample-setup){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [Information Resource
        Directory](#name-information-resource-direct){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [Multipart Filtered Cost
        Map](#name-multipart-filtered-cost-map-2){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [8.4](#section-8.4){.xref}.  [Multipart Endpoint Cost Service
        Resource](#name-multipart-endpoint-cost-serv){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.5}
        [8.5](#section-8.5){.xref}.  [Incremental
        Updates](#name-incremental-updates){.xref}
        :::

    -   ::: {#section-toc.1-1.8.2.6}
        [8.6](#section-8.6){.xref}.  [Multi-Cost](#name-multi-cost){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Compatibility with Other ALTO
    Extensions](#name-compatibility-with-other-al){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Compatibility with Legacy ALTO
        Clients/Servers](#name-compatibility-with-legacy-a){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Compatibility with Multi-Cost
        Extension](#name-compatibility-with-multi-co){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.3}
        [9.3](#section-9.3){.xref}.  [Compatibility with Incremental
        Update Extension](#name-compatibility-with-incremen){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.4}
        [9.4](#section-9.4){.xref}.  [Compatibility with Cost Calendar
        Extension](#name-compatibility-with-cost-cal){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [General
    Discussion](#name-general-discussion){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Constraint Tests for General
        Cost Types](#name-constraint-tests-for-genera){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [General Multi-Resource
        Query](#name-general-multi-resource-quer){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}

    -   ::: {#section-toc.1-1.12.2.1}
        [12.1](#section-12.1){.xref}.  [\"ALTO Cost Metrics\"
        Registry](#name-alto-cost-metrics-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.12.2.2}
        [12.2](#section-12.2){.xref}.  [\"ALTO Cost Modes\"
        Registry](#name-alto-cost-modes-registry){.xref}
        :::

    -   ::: {#section-toc.1-1.12.2.3}
        [12.3](#section-12.3){.xref}.  [\"ALTO Entity Domain Types\"
        Registry](#name-alto-entity-domain-types-re){.xref}
        :::

    -   ::: {#section-toc.1-1.12.2.4}
        [12.4](#section-12.4){.xref}.  [\"ALTO Entity Property Types\"
        Registry](#name-alto-entity-property-types-){.xref}

        -   ::: {#section-toc.1-1.12.2.4.2.1}
            [12.4.1](#section-12.4.1){.xref}.  [New ANE Property Type:
            Maximum Reservable
            Bandwidth](#name-new-ane-property-type-maxim){.xref}
            :::

        -   ::: {#section-toc.1-1.12.2.4.2.2}
            [12.4.2](#section-12.4.2){.xref}.  [New ANE Property Type:
            Persistent Entity
            ID](#name-new-ane-property-type-persi){.xref}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.13.2.1}
        [13.1](#section-13.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.13.2.2}
        [13.2](#section-13.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.14}
    [](#appendix-A){.xref}[Acknowledgments](#name-acknowledgments){.xref}
    :::

-   ::: {#section-toc.1-1.15}
    [](#appendix-B){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Network performance metrics are crucial for assessing the Quality of
Experience (QoE) of applications. The Application-Layer Traffic
Optimization (ALTO) protocol allows Internet Service Providers (ISPs) to
provide guidance, such as topological distances between different end
hosts, to overlay applications. Thus, the overlay applications can
potentially improve the perceived QoE by better orchestrating their
traffic to utilize the resources in the underlying network
infrastructure.[¶](#section-1-1){.pilcrow}

The existing ALTO cost map ([Section
11.2.3](https://www.rfc-editor.org/rfc/rfc7285#section-11.2.3){.relref}
of \[[RFC7285](#RFC7285){.xref}\]) and Endpoint Cost Service ([Section
11.5](https://www.rfc-editor.org/rfc/rfc7285#section-11.5){.relref} of
\[[RFC7285](#RFC7285){.xref}\]) provide only cost information for an
end-to-end path defined by its \<source, destination> endpoints: the
base protocol \[[RFC7285](#RFC7285){.xref}\] allows the services to
expose the topological distances of end-to-end paths, while various
extensions have been proposed to extend the capability of these
services, e.g., to express other performance metrics
\[[ALTO-PERF-METRICS](#ALTO-PERF-METRICS){.xref}\], to query multiple
costs simultaneously \[[RFC8189](#RFC8189){.xref}\], and to obtain
time-varying values
\[[RFC8896](#RFC8896){.xref}\].[¶](#section-1-2){.pilcrow}

While numerical/ordinal cost values for end-to-end paths provided by the
existing extensions are sufficient to optimize the QoE of many overlay
applications, the QoE of some overlay applications also depends on the
properties of particular components on the paths. For example, job
completion time, which is an important QoE metric for a large-scale data
analytics application, is impacted by shared bottleneck links inside the
carrier network, as link capacity may impact the rate of data
input/output to the job. We refer to such components of a network as
Abstract Network Elements (ANEs).[¶](#section-1-3){.pilcrow}

Predicting such information can be very complex without the help of
ISPs; for example, \[[BOXOPT](#BOXOPT){.xref}\] has shown that finding
the optimal bandwidth reservation for multiple flows can be NP-hard
without further information than whether a reservation succeeds. With
proper guidance from the ISP, an overlay application may be able to
schedule its traffic for better QoE. In the meantime, it may be helpful
as well for ISPs if applications could avoid using bottlenecks or
challenging the network with poorly scheduled
traffic.[¶](#section-1-4){.pilcrow}

Despite the claimed benefits, ISPs are not likely to expose raw details
on their network paths: first because ISPs have requirements to hide
their network topologies, second because these details may increase
volume and computation overhead, and last because applications do not
necessarily need all the network path details and are likely not able to
understand them.[¶](#section-1-5){.pilcrow}

Therefore, it is beneficial for both ISPs and applications if an ALTO
server provides ALTO clients with an \"abstract network state\" that
provides the necessary information to applications, while hiding network
complexity and confidential information. An \"abstract network state\"
is a selected set of abstract representations of ANEs traversed by the
paths between \<source, destination> pairs combined with properties of
these ANEs that are relevant to the overlay applications\' QoE. Both an
application via its ALTO client and the ISP via the ALTO server can
achieve better confidentiality and resource utilization by appropriately
abstracting relevant ANEs. Server scalability can also be improved by
combining ANEs and their properties in a single
response.[¶](#section-1-6){.pilcrow}

This document extends the ALTO base protocol
\[[RFC7285](#RFC7285){.xref}\] to allow an ALTO server to convey
\"abstract network state\" for paths defined by their \<source,
destination> pairs. To this end, it introduces a new cost type called a
\"Path Vector\", following the cost metric registration specified in
\[[RFC7285](#RFC7285){.xref}\] and the updated cost mode registration
specified in \[[RFC9274](#RFC9274){.xref}\]. A Path Vector is an array
of identifiers that identifies an ANE, which can be associated with
various properties. The associations between ANEs and their properties
are encoded in an ALTO information resource called the \"entity property
map\", which is specified in
\[[RFC9240](#RFC9240){.xref}\].[¶](#section-1-7){.pilcrow}

For better confidentiality, this document aims to minimize information
exposure of an ALTO server when providing Path Vector services. In
particular, this document enables the capability, and also recommends
that 1) ANEs be constructed on demand and 2) an ANE only be associated
with properties that are requested by an ALTO client. A Path Vector
response involves two ALTO maps: the cost map, which contains the Path
Vector results; and the up-to-date entity property map, which contains
the properties requested for these ANEs. To enforce consistency and
improve server scalability, this document uses the \"multipart/related\"
content type as defined in \[[RFC2387](#RFC2387){.xref}\] to return the
two maps in a single response.[¶](#section-1-8){.pilcrow}

As a single ISP may not have knowledge of the full Internet paths
between arbitrary endpoints, this document is mainly applicable
when[¶](#section-1-9){.pilcrow}

-   [there is a single ISP between the requested source and destination
    Provider-defined Identifiers (PIDs) or endpoints \-- for example,
    ISP-hosted Content Delivery Network (CDN) / edge, tenant
    interconnection in a single public cloud platform, etc.,
    or[¶](#section-1-10.1){.pilcrow}]{#section-1-10.1}
-   [the Path Vectors are generated from end-to-end measurement
    data.[¶](#section-1-10.2){.pilcrow}]{#section-1-10.2}
:::
:::

::: {#requirements-languages}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}
:::
:::

::: {#term}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

This document extends the ALTO base protocol
\[[RFC7285](#RFC7285){.xref}\] and the entity property map extension
\[[RFC9240](#RFC9240){.xref}\]. In addition to the terms defined in
those documents, this document also uses the following
terms:[¶](#section-3-1){.pilcrow}

[]{.break}

Abstract Network Element (ANE):

:   An abstract representation for a component in a network that handles
    data packets and whose properties can potentially have an impact on
    the end-to-end performance of traffic. An ANE can be a physical
    device such as a router, a link, or an interface; or an aggregation
    of devices such as a subnetwork or a data
    center.[¶](#section-3-2.2.1){.pilcrow}

    The definition of an ANE is similar to that for a network element as
    defined in \[[RFC2216](#RFC2216){.xref}\] in the sense that they
    both provide an abstract representation of specific components of a
    network. However, they have different criteria on how these
    particular components are selected. Specifically, a network element
    requires the components to be capable of exercising QoS control,
    while an ANE only requires the components to have an impact on
    end-to-end performance.[¶](#section-3-2.2.2){.pilcrow}

:   

ANE name:

:   A string that uniquely identifies an ANE in a specific scope. An ANE
    can be constructed either statically in advance or on demand based
    on the requested information. Thus, different ANEs may only be valid
    within a particular scope, either ephemeral or persistent. Within
    each scope, an ANE is uniquely identified by an ANE name, as defined
    in [Section 6.1](#ane-name-spec){.xref}. Note that an ALTO client
    must not assume ANEs in different scopes but with the same ANE name
    refer to the same component(s) of the
    network.[¶](#section-3-2.4.1){.pilcrow}

:   

Path Vector (or ANE Path Vector):

:   Refers to a JSON array of ANE names. It is a generalization of a BGP
    path vector. While a standard BGP path vector ([Section
    5.1.2](https://www.rfc-editor.org/rfc/rfc4271#section-5.1.2){.relref}
    of \[[RFC4271](#RFC4271){.xref}\]) specifies a sequence of
    Autonomous Systems (ASes) for a destination IP prefix, the Path
    Vector defined in this extension specifies a sequence of ANEs for
    either 1) a source PID and a destination PID, as in the CostMapData
    object ([Section
    11.2.3.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.2.3.6){.relref}
    of \[[RFC7285](#RFC7285){.xref}\]) or 2) a source endpoint and a
    destination endpoint, as in the EndpointCostMapData object ([Section
    11.5.1.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.5.1.6){.relref}
    of \[[RFC7285](#RFC7285){.xref}\]).[¶](#section-3-2.6.1){.pilcrow}

:   

Path Vector resource:

:   An ALTO information resource ([Section
    8.1](https://www.rfc-editor.org/rfc/rfc7285#section-8.1){.relref} of
    \[[RFC7285](#RFC7285){.xref}\]) that supports the extension defined
    in this document.[¶](#section-3-2.8.1){.pilcrow}

:   

Path Vector cost type:

:   A special cost type, which is specified in [Section
    6.5](#cost-type-spec){.xref}. When this cost type is present in an
    Information Resource Directory (IRD) entry, it indicates that the
    information resource is a Path Vector resource. When this cost type
    is present in a filtered cost map request or an Endpoint Cost
    Service request, it indicates that each cost value must be
    interpreted as a Path Vector.[¶](#section-3-2.10.1){.pilcrow}

:   

Path Vector request:

:   The POST message sent to an ALTO Path Vector
    resource.[¶](#section-3-2.12.1){.pilcrow}

:   

Path Vector response:

:   Refers to the multipart/related message returned by a Path Vector
    resource.[¶](#section-3-2.14.1){.pilcrow}

:   
:::
:::

::: {#probstat}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Requirements and Use Cases](#name-requirements-and-use-cases){.section-name .selfRef} {#name-requirements-and-use-cases}

::: {#design-requirements}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Design Requirements](#name-design-requirements){.section-name .selfRef} {#name-design-requirements}

This section gives an illustrative example of how an overlay application
can benefit from the extension defined in this
document.[¶](#section-4.1-1){.pilcrow}

Assume that an application has control over a set of flows, which may go
through shared links/nodes and share bottlenecks. The application seeks
to schedule the traffic among multiple flows to get better performance.
The constraints of feasible rate allocations of those flows will benefit
the scheduling. However, cost maps as defined in
\[[RFC7285](#RFC7285){.xref}\] cannot reveal such
information.[¶](#section-4.1-2){.pilcrow}

Specifically, consider the example network shown in [Figure
1](#fig-dumbbell){.xref}. The network has seven switches (\"sw1\" to
\"sw7\") forming a dumbbell topology. Switches \"sw1\", \"sw2\",
\"sw3\", and \"sw4\" are access switches, and \"sw5-sw7\" form the
backbone. End hosts \"eh1\" to \"eh4\" are connected to access switches
\"sw1\" to \"sw4\", respectively. Assume that the bandwidth of link
\"eh1 -\> sw1\" and link \"sw1 -\> sw5\" is 150 Mbps and the bandwidth
of the other links is 100 Mbps.[¶](#section-4.1-3){.pilcrow}

[]{#name-raw-network-topology}

::: {#fig-dumbbell}
::: {#section-4.1-4.1 .alignLeft .art-text .artwork}
                                  +-----+
                                  |     |
                                --+ sw6 +--
                               /  |     |  \
         PID1 +-----+         /   +-----+   \          +-----+  PID2
         eh1__|     |_       /               \     ____|     |__eh2
    192.0.2.2 | sw1 | \   +--|--+         +--|--+ /    | sw2 | 192.0.2.3
              +-----+  \  |     |         |     |/     +-----+
                        \_| sw5 +---------+ sw7 |
         PID3 +-----+   / |     |         |     |\     +-----+  PID4
         eh3__|     |__/  +-----+         +-----+ \____|     |__eh4
    192.0.2.4 | sw3 |                                  | sw4 | 192.0.2.5
              +-----+                                  +-----+

    bw(eh1--sw1) = bw(sw1--sw5) = 150 Mbps
    bw(eh2--sw2) = bw(eh3--sw3) = bw(eh4--sw4) = 100 Mbps
    bw(sw1--sw5) = bw(sw3--sw5) = bw(sw2--sw7) = bw(sw4--sw7) = 100 Mbps
    bw(sw5--sw6) = bw(sw5--sw7) = bw(sw6--sw7) = 100 Mbps
:::

[Figure 1](#figure-1){.selfRef}: [Raw Network
Topology](#name-raw-network-topology){.selfRef}
:::

The base ALTO topology abstraction of the network is shown in [Figure
2](#fig-base){.xref}. Assume that the cost map returns a hypothetical
cost type representing the available bandwidth between a source and a
destination.[¶](#section-4.1-5){.pilcrow}

[]{#name-base-topology-abstraction}

::: {#fig-base}
::: {#section-4.1-6.1 .alignLeft .art-text .artwork}
                              +----------------------+
                     {eh1}    |                      |     {eh2}
                     PID1     |                      |     PID2
                       +------+                      +------+
                              |                      |
                              |                      |
                     {eh3}    |                      |     {eh4}
                     PID3     |                      |     PID4
                       +------+                      +------+
                              |                      |
                              +----------------------+
:::

[Figure 2](#figure-2){.selfRef}: [Base Topology
Abstraction](#name-base-topology-abstraction){.selfRef}
:::

Now, assume that the application wants to maximize the total rate of the
traffic among a set of \<source, destination> pairs \-- say, \"eh1 -\>
eh2\" and \"eh1 -\> eh4\". Let \"x\" denote the transmission rate of
\"eh1 -\> eh2\" and \"y\" denote the rate of \"eh1 -\> eh4\". The
objective function is[¶](#section-4.1-7){.pilcrow}

::: {#section-4.1-8 .alignLeft .art-text .artwork}
        max(x + y).

[¶](#section-4.1-8){.pilcrow}
:::

With the ALTO cost map, the costs between PID1 and PID2 and between PID1
and PID4 will both be 100 Mbps. The client can get a capacity region
of[¶](#section-4.1-9){.pilcrow}

::: {#section-4.1-10 .alignLeft .art-text .artwork}
        x <= 100 Mbps
        y <= 100 Mbps.

[¶](#section-4.1-10){.pilcrow}
:::

With this information, the client may mistakenly think it can achieve a
maximum total rate of 200 Mbps. However, this rate is infeasible, as
there are only two potential cases:[¶](#section-4.1-11){.pilcrow}

[]{.break}

Case 1:

:   \"eh1 -\> eh2\" and \"eh1 -\> eh4\" take different path segments
    from \"sw5\" to \"sw7\". For example, if \"eh1 -\> eh2\" uses path
    \"eh1 -\> sw1 -\> sw5 -\> sw6 -\> sw7 -\> sw2 -\> eh2\" and \"eh1
    -\> eh4\" uses path \"eh1 -\> sw1 -\> sw5 -\> sw7 -\> sw4 -\> eh4\",
    then the shared bottleneck links are \"eh1 -\> sw1\" and \"sw1 -\>
    sw5\". In this case, the capacity region
    is:[¶](#section-4.1-12.2.1){.pilcrow}

    ::: {#section-4.1-12.2.2 .alignLeft .art-text .artwork}
            x     <= 100 Mbps
            y     <= 100 Mbps
            x + y <= 150 Mbps

    [¶](#section-4.1-12.2.2){.pilcrow}
    :::

    and the real optimal total rate is 150
    Mbps.[¶](#section-4.1-12.2.3){.pilcrow}

:   

Case 2:

:   \"eh1 -\> eh2\" and \"eh1 -\> eh4\" take the same path segment from
    \"sw5\" to \"sw7\". For example, if \"eh1 -\> eh2\" uses path \"eh1
    -\> sw1 -\> sw5 -\> sw7 -\> sw2 -\> eh2\" and \"eh1 -\> eh4\" also
    uses path \"eh1 -\> sw1 -\> sw5 -\> sw7 -\> sw4 -\> eh4\", then the
    shared bottleneck link is \"sw5 -\> sw7\". In this case, the
    capacity region is:[¶](#section-4.1-12.4.1){.pilcrow}

    ::: {#section-4.1-12.4.2 .alignLeft .art-text .artwork}
            x     <= 100 Mbps
            y     <= 100 Mbps
            x + y <= 100 Mbps

    [¶](#section-4.1-12.4.2){.pilcrow}
    :::

    and the real optimal total rate is 100
    Mbps.[¶](#section-4.1-12.4.3){.pilcrow}

:   

Clearly, with more accurate and fine-grained information, the
application can better predict its traffic and may orchestrate its
resources accordingly. However, to provide such information, the network
needs to expose abstract information beyond the simple cost map
abstraction. In particular:[¶](#section-4.1-13){.pilcrow}

-   [The ALTO server must expose abstract information about the network
    paths that are traversed by the traffic between a source and a
    destination beyond a simple numerical value, which allows the
    overlay application to distinguish between Cases 1 and 2 and to
    compute the optimal total rate
    accordingly.[¶](#section-4.1-14.1){.pilcrow}]{#section-4.1-14.1}
-   [The ALTO server must allow the client to distinguish the common ANE
    shared by \"eh1 -\> eh2\" and \"eh1 -\> eh4\", e.g., \"eh1‑‑sw1\"
    and \"sw1‑‑sw5\" in Case
    1.[¶](#section-4.1-14.2){.pilcrow}]{#section-4.1-14.2}
-   [The ALTO server must expose abstract information on the properties
    of the ANEs used by \"eh1 -\> eh2\" and \"eh1 -\> eh4\". For
    example, an ALTO server can either expose the available bandwidth
    between \"eh1‑‑sw1\", \"sw1‑‑sw5\", \"sw5‑‑sw7\", \"sw5‑‑sw6\",
    \"sw6‑‑sw7\", \"sw7‑‑sw2\", \"sw7‑‑sw4\", \"sw2‑‑eh2\", \"sw4‑‑eh4\"
    in Case 1 or expose three abstract elements \"A\", \"B\", and \"C\",
    which represent the linear constraints that define the same capacity
    region in Case
    1.[¶](#section-4.1-14.3){.pilcrow}]{#section-4.1-14.3}

In general, we can conclude that to support the use case for multiple
flow scheduling, the ALTO framework must be extended to satisfy the
following additional requirements (ARs):[¶](#section-4.1-15){.pilcrow}

[]{.break}

AR1:

:   An ALTO server must provide the ANEs that are important for
    assessing the QoE of the overlay application on the path of a
    \<source, destination> pair.[¶](#section-4.1-16.2.1){.pilcrow}

:   

AR2:

:   An ALTO server must provide information to identify how ANEs are
    shared on the paths of different \<source, destination>
    pairs.[¶](#section-4.1-16.4.1){.pilcrow}

:   

AR3:

:   An ALTO server must provide information on the properties that are
    important for assessing the QoE of the application for
    ANEs.[¶](#section-4.1-16.6.1){.pilcrow}

:   

The extension defined in this document specifies a solution to expose
such abstract information.[¶](#section-4.1-17){.pilcrow}
:::
:::

::: {#sample-use-cases}
::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Sample Use Cases](#name-sample-use-cases){.section-name .selfRef} {#name-sample-use-cases}

While the problem related to multiple flow scheduling is used to help
identify the additional requirements, the extension defined in this
document can be applied to a wide range of applications. This section
highlights some of the reported use cases.[¶](#section-4.2-1){.pilcrow}

::: {#exposing-network-bottlenecks}
::: {#section-4.2.1 .section}
#### [4.2.1.](#section-4.2.1){.section-number .selfRef} [Exposing Network Bottlenecks](#name-exposing-network-bottleneck){.section-name .selfRef} {#name-exposing-network-bottleneck}

One important use case for the Path Vector extension is to expose
network bottlenecks. Applications that need to perform large-scale data
transfers can benefit from being aware of the resource constraints
exposed by this extension even if they have different objectives. One
such example is the Worldwide LHC Computing Grid (WLCG) (where \"LHC\"
means \"Large Hadron Collider\"), which is the largest example of a
distributed computation collaboration in the research and education
world.[¶](#section-4.2.1-1){.pilcrow}

[Figure 3](#fig-da){.xref} illustrates an example of using an ALTO Path
Vector as an interface between the job optimizer for a data analytics
system and the network manager. In particular, we assume that the
objective of the job optimizer is to minimize the job completion
time.[¶](#section-4.2.1-2){.pilcrow}

In such a setting, the network-aware job optimizer (e.g.,
\[[CLARINET](#CLARINET){.xref}\]) takes a query and generates multiple
query execution plans (QEPs). It can encode the QEPs as Path Vector
requests that are sent to an ALTO server. The ALTO server obtains the
routing information for the flows in a QEP and finds links, routers, or
middleboxes (e.g., a stateful firewall) that can potentially become
bottlenecks for the QEP (e.g., see \[[NOVA](#NOVA){.xref}\] and
\[[G2](#G2){.xref}\] for mechanisms to identify bottleneck links under
different settings). The resource constraint information is encoded in a
Path Vector response and returned to the ALTO
client.[¶](#section-4.2.1-3){.pilcrow}

With the network resource constraints, the job optimizer may choose the
QEP with the optimal job completion time to be executed. It must be
noted that the ALTO framework itself does not offer the capability to
control the traffic. However, certain network managers may offer ways to
enforce resource guarantees, such as on-demand tunnels (e.g.,
\[[SWAN](#SWAN){.xref}\]), demand vectors (e.g., \[[HUG](#HUG){.xref}\],
\[[UNICORN](#UNICORN){.xref}\]), etc. The traffic control interfaces and
mechanisms are out of scope for this
document.[¶](#section-4.2.1-4){.pilcrow}

[]{#name-example-use-case-for-data-a}

::: {#fig-da}
::: {#section-4.2.1-5.1 .alignLeft .art-text .artwork}
                                         Data schema      Queries
                                              |             |
                                              \             /
           +-------------+                   +-----------------+
           | ALTO Client | <===============> |  Job Optimizer  |
           +-------------+                   +-----------------+
    PV          |   ^ PV                                    |
    Request     |   | Response                              |
                |   |                  On-demand resource   |
    (Potential  |   | (Network         allocation, demand   |
    Data        |   | Resource         vectors, etc.        |
    Transfers)  |   | Constraints)     (Non-ALTO interfaces)|
                v   |                                       v
           +-------------+                   +-----------------+
           | ALTO Server | <===============> | Network Manager |
           +-------------+                   +-----------------+
                                               /      |      \
                                               |      |      |
                                              WAN    DC1    DC2
:::

[Figure 3](#figure-3){.selfRef}: [Example Use Case for Data
Analytics](#name-example-use-case-for-data-a){.selfRef}
:::

Another example is illustrated in [Figure 4](#fig-dts){.xref}. Consider
a network consisting of multiple sites and a non-blocking core network,
i.e., the links in the core network have sufficient bandwidth that they
will not become a bottleneck for the data
transfers.[¶](#section-4.2.1-6){.pilcrow}

[]{#name-example-use-case-for-cross-}

::: {#fig-dts}
::: {#section-4.2.1-7.1 .alignLeft .art-text .artwork}
                   Ongoing transfers    New transfer requests
                                 \----\        |
                                      |        |
                                      v        v
       +-------------+               +---------------+
       | ALTO Client | <===========> | Data Transfer |
       +-------------+               |   Scheduler   |
         ^ |      ^ | PV Request     +---------------+
         | |      | \--------------\
         | |      \--------------\ |
         | v       PV Response   | v
       +-------------+          +-------------+
       | ALTO Server |          | ALTO Server |
       +-------------+          +-------------+
             ||                       ||
         +---------+              +---------+
         | Network |              | Network |
         | Manager |              | Manager |
         +---------+              +---------+
          .                           .
         .             _~_  __         . . .
        .             (   )(  )             .___
      ~v~v~       /--(         )------------(   )
     (     )-----/    (       )            (     )
      ~w~w~            ~^~^~^~              ~v~v~
     Site 1        Non-blocking Core        Site 2
:::

[Figure 4](#figure-4){.selfRef}: [Example Use Case for Cross-Site
Bottleneck Discovery](#name-example-use-case-for-cross-){.selfRef}
:::

With the Path Vector extension, a site can reveal the bottlenecks inside
its own network with necessary information (such as link capacities) to
the ALTO client, instead of providing the full topology and routing
information, or no bottleneck information at all. The bottleneck
information can be used to analyze the impact of adding/removing data
transfer flows, e.g., using the framework defined in
\[[G2](#G2){.xref}\]. For example, assume that hosts \"a\", \"b\", and
\"c\" are in Site 1 and hosts \"d\", \"e\", and \"f\" are in Site 2, and
there are three flows in two sites: \"a -\> b\", \"c -\> d\", and \"e
-\> f\" ([Figure 5](#fig-sbot){.xref}).[¶](#section-4.2.1-8){.pilcrow}

[]{#name-example-three-flows-in-two-}

::: {#fig-sbot}
::: {#section-4.2.1-9.1 .alignLeft .art-text .artwork}
    Site 1:

    [c]
     .
     ........................................> [d]
      +---+ 10 Gbps +---+ 10 Gbps +----+ 50 Gbps
      | A |---------| B |---------| GW |--------- Core
      +---+         +---+         +----+
     ...................
     .                 .
     .                 v
    [a]               [b]

    Site 2:

    [d] <........................................ [c]
      +---+ 5 Gbps +---+ 10 Gbps +----+ 20 Gbps
      | X |--------| Y |---------| GW |--------- Core
      +---+        +---+         +----+
                 ....................
                 .                  .
                 .                  v
                [e]                [f]
:::

[Figure 5](#figure-5){.selfRef}: [Example: Three Flows in Two
Sites](#name-example-three-flows-in-two-){.selfRef}
:::

For these flows, Site 1 returns:[¶](#section-4.2.1-10){.pilcrow}

::: {#section-4.2.1-11}
``` sourcecode
a: { b: [ane1] },
c: { d: [ane1, ane2, ane3] }

ane1: bw = 10 Gbps (link: A->B)
ane2: bw = 10 Gbps (link: B->GW)
ane3: bw = 50 Gbps (link: GW->Core)
```

[¶](#section-4.2.1-11){.pilcrow}
:::

and Site 2 returns:[¶](#section-4.2.1-12){.pilcrow}

::: {#section-4.2.1-13}
``` sourcecode
c: { d: [anei, aneii, aneiii] }
e: { f: [aneiv] }

anei: bw = 5 Gbps (link Y->X)
aneii: bw = 10 Gbps (link GW->Y)
aneiii: bw = 20 Gbps (link Core->GW)
aneiv: bw = 10 Gbps (link Y->GW)
```

[¶](#section-4.2.1-13){.pilcrow}
:::

With this information, the data transfer scheduler can use algorithms
such as the theory on bottleneck structure \[[G2](#G2){.xref}\] to
predict the potential throughput of the
flows.[¶](#section-4.2.1-14){.pilcrow}
:::
:::

::: {#resource-exposure-for-cdn-and-service-edge}
::: {#section-4.2.2 .section}
#### [4.2.2.](#section-4.2.2){.section-number .selfRef} [Resource Exposure for CDNs and Service Edges](#name-resource-exposure-for-cdns-){.section-name .selfRef} {#name-resource-exposure-for-cdns-}

At the time of this writing, a growing trend in today\'s applications is
to bring storage and computation closer to the end users for better QoE,
such as CDNs, augmented reality / virtual reality, and cloud gaming, as
reported in various documents (e.g., \[[SEREDGE](#SEREDGE){.xref}\] and
\[[MOWIE](#MOWIE){.xref}\]). ISPs may deploy multiple layers of CDN
caches or, more generally, service edges, with different latencies and
available resources, including the number of CPU cores, memory, and
storage.[¶](#section-4.2.2-1){.pilcrow}

For example, [Figure 6](#fig-se){.xref} illustrates a typical edge-cloud
scenario where memory is measured in gigabytes (GB) and storage is
measured in terabytes (TB). The \"on-premise\" edge nodes are closest to
the end hosts and have the lowest latency, and the site-radio edge node
and access central office (CO) have higher latencies but more available
resources.[¶](#section-4.2.2-2){.pilcrow}

[]{#name-example-use-case-for-servic}

::: {#fig-se}
::: {#section-4.2.2-3.1 .alignLeft .art-text .artwork}
          +-------------+              +----------------------+
          | ALTO Client | <==========> | Application Provider |
          +-------------+              +----------------------+
    PV         |   ^ PV                      |
    Request    |   | Response                | Resource allocation,
               |   |                         | service establishment,
    (End hosts |   | (Edge nodes             | etc.
    and cloud  |   | and metrics)            |
    servers)   |   |                         |
               v   |                         v
          +-------------+             +---------------------+
          | ALTO Server | <=========> | Cloud-Edge Provider |
          +-------------+             +---------------------+
           ____________________________________/\___________
          /                                                 \
          |           (((o                                  |
                         |
                        /_\             _~_            __   __
      a               (/\_/\)          (   )          (  )~(  )_
       \      /------(      )---------(     )----\\---(          )
       _|_   /        (______)         (___)          (          )
       |_| -/         Site-radio     Access CO       (__________)
      /---\          Edge Node 1         |             Cloud DC
    On premise                           |
                               /---------/
               (((o           /
                  |          /
     Site-radio  /_\        /
    Edge Node 2(/\_/\)-----/
              /(_____)\
       ___   /         \   ---
    b--|_| -/           \--|_|--c
      /---\               /---\
    On premise          On premise
:::

[Figure 6](#figure-6){.selfRef}: [Example Use Case for Service Edge
Exposure](#name-example-use-case-for-servic){.selfRef}
:::

With the extension defined in this document, an ALTO server can
selectively reveal the CDNs and service edges that reside along the
paths between different end hosts and/or the cloud servers, together
with their properties (e.g., storage capabilities or Graphics Processing
Unit (GPU) capabilities) and available Service Level Agreement (SLA)
plans. See [Figure 7](#fig-se-example){.xref} for an example where the
query is made for sources \[a, b\] and destinations \[b, c, DC\]. Here,
each ANE represents a service edge, and the properties include access
latency, available resources, etc. Note that the properties here are
only used for illustration purposes and are not part of this
extension.[¶](#section-4.2.2-4){.pilcrow}

[]{#name-example-service-edge-query-}

::: {#fig-se-example}
::: {#section-4.2.2-5.1}
``` sourcecode
a: { b: [ane1, ane2, ane3, ane4, ane5],
     c: [ane1, ane2, ane3, ane4, ane6],
     DC: [ane1, ane2, ane3] }
b: { c: [ane5, ane4, ane6], DC: [ane5, ane4, ane3] }

ane1: latency = 5 ms  cpu = 2  memory = 8 GB  storage = 10 TB
(On premise, a)

ane2: latency = 20 ms  cpu = 4  memory = 8 GB  storage = 10 TB
(Site-radio Edge Node 1)

ane3: latency = 100 ms  cpu = 8  memory = 128 GB  storage = 100 TB
(Access CO)

ane4: latency = 20 ms  cpu = 4  memory = 8 GB  storage = 10 TB
(Site-radio Edge Node 2)

ane5: latency = 5 ms  cpu = 2  memory = 8 GB  storage = 10 TB
(On premise, b)

ane6: latency = 5 ms  cpu = 2  memory = 8 GB  storage = 10 TB
(On premise, c)
```
:::

[Figure 7](#figure-7){.selfRef}: [Example Service Edge Query
Results](#name-example-service-edge-query-){.selfRef}
:::

With the service edge information, an ALTO client may better conduct CDN
request routing or offload functionalities from the user equipment to
the service edge, with considerations in place for customized quality of
experience.[¶](#section-4.2.2-6){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#Overview}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Path Vector Extension: Overview](#name-path-vector-extension-overv){.section-name .selfRef} {#name-path-vector-extension-overv}

This section provides a non-normative overview of the Path Vector
extension defined in this document. It is assumed that readers are
familiar with both the base protocol \[[RFC7285](#RFC7285){.xref}\] and
the entity property map extension
\[[RFC9240](#RFC9240){.xref}\].[¶](#section-5-1){.pilcrow}

To satisfy the additional requirements listed in [Section
4.1](#design-requirements){.xref}, this
extension:[¶](#section-5-2){.pilcrow}

1.  [introduces the concept of an ANE as the abstraction of components
    in a network whose properties may have an impact on end-to-end
    performance of the traffic handled by those
    components,[¶](#section-5-3.1){.pilcrow}]{#section-5-3.1}
2.  [extends the cost map and Endpoint Cost Service to convey the ANEs
    traversed by the path of a \<source, destination> pair as Path
    Vectors, and[¶](#section-5-3.2){.pilcrow}]{#section-5-3.2}
3.  [uses the entity property map to convey the association between the
    ANEs and their
    properties.[¶](#section-5-3.3){.pilcrow}]{#section-5-3.3}

Thus, an ALTO client can learn about the ANEs that are important for
assessing the QoE of different \<source, destination> pairs by
investigating the corresponding Path Vector value (AR1) and can also
(1) identify common ANEs if an ANE appears in the Path Vectors of
multiple \<source, destination> pairs (AR2) and (2) retrieve the
properties of the ANEs by searching the entity property map
(AR3).[¶](#section-5-4){.pilcrow}

::: {#ane-design}
::: {#section-5.1 .section}
### [5.1.](#section-5.1){.section-number .selfRef} [Abstract Network Element (ANE)](#name-abstract-network-element-an){.section-name .selfRef} {#name-abstract-network-element-an}

This extension introduces the ANE as an indirect and network-agnostic
way to specify a component or an aggregation of components of a network
whose properties have an impact on end-to-end performance for
application traffic between endpoints.[¶](#section-5.1-1){.pilcrow}

ANEs allow ALTO servers to focus on common properties of different types
of network components. For example, the throughput of a flow can be
constrained by different components in a network: the capacity of a
physical link, the maximum throughput of a firewall, the reserved
bandwidth of an MPLS tunnel, etc. In the example below, assume that the
throughput of the firewall is 100 Mbps and the capacity for link (A, B)
is also 100 Mbps; they result in the same constraint on the total
throughput of f1 and f2. Thus, they are identical when treated as an
ANE.[¶](#section-5.1-2){.pilcrow}

::: {#section-5.1-3 .alignLeft .art-text .artwork}
       f1 |      ^                  f1
          |      |                 ----------------->
        +----------+                +---+     +---+
        | Firewall |                | A |-----| B |
        +----------+                +---+     +---+
          |      |                 ----------------->
          v      | f2               f2

[¶](#section-5.1-3){.pilcrow}
:::

When an ANE is defined by an ALTO server, it is assigned an identifier
by the ALTO server, i.e., a string of type ANEName as specified in
[Section 6.1](#ane-name-spec){.xref}, and a set of associated
properties.[¶](#section-5.1-4){.pilcrow}

::: {#ane-entity-domain}
::: {#section-5.1.1 .section}
#### [5.1.1.](#section-5.1.1){.section-number .selfRef} [ANE Entity Domain](#name-ane-entity-domain){.section-name .selfRef} {#name-ane-entity-domain}

In this extension, the associations between ANEs and their properties
are conveyed in an entity property map.  Thus, ANEs must constitute an
\"entity domain\" ([Section
5.1](https://www.rfc-editor.org/rfc/rfc9240#section-5.1){.relref} of
\[[RFC9240](#RFC9240){.xref}\]), and each ANE property must be an entity
property ([Section
5.2](https://www.rfc-editor.org/rfc/rfc9240#section-5.2){.relref} of
\[[RFC9240](#RFC9240){.xref}\]).[¶](#section-5.1.1-1){.pilcrow}

Specifically, this document defines a new entity domain called \"ane\"
as specified in [Section 6.2](#ane-domain-spec){.xref}; [Section
6.4](#initial-ane-property-types){.xref} defines two initial property
types for the ANE entity domain.[¶](#section-5.1.1-2){.pilcrow}
:::
:::

::: {#assoc}
::: {#section-5.1.2 .section}
#### [5.1.2.](#section-5.1.2){.section-number .selfRef} [Ephemeral and Persistent ANEs](#name-ephemeral-and-persistent-an){.section-name .selfRef} {#name-ephemeral-and-persistent-an}

By design, ANEs are ephemeral and not to be used in further requests to
other ALTO resources. More precisely, the corresponding ANE names are no
longer valid beyond the scope of a Path Vector response or the
incremental update stream for a Path Vector request. Compared with
globally unique ANE names, ephemeral ANEs have several benefits,
including better privacy for the ISP\'s internal structure and more
flexible ANE computation.[¶](#section-5.1.2-1){.pilcrow}

For example, an ALTO server may define an ANE for each aggregated
bottleneck link between the sources and destinations specified in the
request. For requests with different sources and destinations, the
bottlenecks may be different but can safely reuse the same ANE names.
The client can still adjust its traffic based on the information, but it
is difficult to infer the underlying topology with multiple
queries.[¶](#section-5.1.2-2){.pilcrow}

However, sometimes an ISP may intend to selectively reveal some
\"persistent\" network components that, as opposed to being ephemeral,
have a longer life cycle. For example, an ALTO server may define an ANE
for each service edge cluster. Once a client chooses to use a service
edge, e.g., by deploying some user-defined functions, it may want to
stick to the service edge to avoid the complexity of state transition or
synchronization, and continuously query the properties of the edge
cluster.[¶](#section-5.1.2-3){.pilcrow}

This document provides a mechanism to expose such network components as
persistent ANEs. A persistent ANE has a persistent ID that is registered
in a property map, together with its properties. See
Sections [6.2.4](#domain-defining){.xref} and
[6.4.2](#persistent-entity-id){.xref} for more detailed instructions on
how to identify ephemeral ANEs and persistent
ANEs.[¶](#section-5.1.2-4){.pilcrow}
:::
:::

::: {#property-filtering}
::: {#section-5.1.3 .section}
#### [5.1.3.](#section-5.1.3){.section-number .selfRef} [Property Filtering](#name-property-filtering){.section-name .selfRef} {#name-property-filtering}

Resource-constrained ALTO clients (see [Section
4.1.2](https://www.rfc-editor.org/rfc/rfc7285#section-4.1.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]) may benefit from the filtering of Path
Vector query results at the ALTO server, as an ALTO client may only
require a subset of the available
properties.[¶](#section-5.1.3-1){.pilcrow}

Specifically, the available properties for a given resource are
announced in the Information Resource Directory (IRD) as a new filtering
capability called \"ane-property-names\". The properties selected by a
client as being of interest are specified in the subsequent Path Vector
queries using the \"ane-property-names\" filter. The response only
includes the selected properties for the
ANEs.[¶](#section-5.1.3-2){.pilcrow}

The \"ane-property-names\" capability for the cost map and the Endpoint
Cost Service is specified in Sections [7.2.4](#pvcm-cap){.xref} and
[7.3.4](#pvecs-cap){.xref}, respectively. The \"ane-property-names\"
filter for the cost map and the Endpoint Cost Service is specified in
Sections [7.2.3](#pvcm-accept){.xref} and [7.3.3](#pvecs-accept){.xref}
accordingly.[¶](#section-5.1.3-3){.pilcrow}
:::
:::
:::
:::

::: {#path-vector-design}
::: {#section-5.2 .section}
### [5.2.](#section-5.2){.section-number .selfRef} [Path Vector Cost Type](#name-path-vector-cost-type){.section-name .selfRef} {#name-path-vector-cost-type}

For an ALTO client to correctly interpret the Path Vector, this
extension specifies a new cost type called the \"Path Vector cost
type\".[¶](#section-5.2-1){.pilcrow}

The Path Vector cost type must convey both the interpretation and
semantics in the \"cost-mode\" and \"cost-metric\" parameters,
respectively. Unfortunately, a single \"cost-mode\" value cannot fully
specify the interpretation of a Path Vector, which is a compound data
type. For example, in programming languages such as C++, if there
existed a JSON array type named JSONArray, a Path Vector would have the
type of `JSONArray<ANEName>`.[¶](#section-5.2-2){.pilcrow}

Instead of extending the \"type system\" of ALTO, this document takes a
simple and backward-compatible approach. Specifically, the \"cost-mode\"
of the Path Vector cost type is \"array\", which indicates that the
value is a JSON array. Then, an ALTO client must check the value of the
\"cost-metric\" parameter. If the value is \"ane-path\", it means that
the JSON array should be further interpreted as a path of
ANENames.[¶](#section-5.2-3){.pilcrow}

The Path Vector cost type is specified in [Section
6.5](#cost-type-spec){.xref}.[¶](#section-5.2-4){.pilcrow}
:::
:::

::: {#multipart-path-vector-response}
::: {#section-5.3 .section}
### [5.3.](#section-5.3){.section-number .selfRef} [Multipart Path Vector Response](#name-multipart-path-vector-respo){.section-name .selfRef} {#name-multipart-path-vector-respo}

For a basic ALTO information resource, a response contains only one type
of ALTO resource, e.g., network map, cost map, or property map.  Thus,
only one round of communication is required: an ALTO client sends a
request to an ALTO server, and the ALTO server returns a response, as
shown in [Figure 8](#fig-alto){.xref}.[¶](#section-5.3-1){.pilcrow}

[]{#name-a-typical-alto-request-and-}

::: {#fig-alto}
::: {#section-5.3-2.1 .alignCenter .art-text .artwork}
      ALTO client                              ALTO server
           |-------------- Request ---------------->|
           |<------------- Response ----------------|
:::

[Figure 8](#figure-8){.selfRef}: [A Typical ALTO Request and
Response](#name-a-typical-alto-request-and-){.selfRef}
:::

The extension defined in this document, on the other hand, involves two
types of information resources: Path Vectors conveyed in an
InfoResourceCostMap data component (defined in [Section
11.2.3.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.2.3.6){.relref}
of \[[RFC7285](#RFC7285){.xref}\]) or an InfoResourceEndpointCostMap
data component (defined in [Section
11.5.1.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.5.1.6){.relref}
of \[[RFC7285](#RFC7285){.xref}\]), and ANE properties conveyed in an
InfoResourceProperties data component (defined in [Section
7.6](https://www.rfc-editor.org/rfc/rfc9240#section-7.6){.relref} of
\[[RFC9240](#RFC9240){.xref}\]).[¶](#section-5.3-3){.pilcrow}

Instead of two consecutive message exchanges, the extension defined in
this document enforces one round of communication. Specifically, the
ALTO client must include the source and destination pairs and the
requested ANE properties in a single request, and the ALTO server must
return a single response containing both the Path Vectors and properties
associated with the ANEs in the Path Vectors, as shown in [Figure
9](#fig-pv){.xref}. Since the two parts are bundled together in one
response message, their orders are interchangeable. See
Sections [7.2.6](#pvcm-resp){.xref} and [7.3.6](#pvecs-resp){.xref} for
details.[¶](#section-5.3-4){.pilcrow}

[]{#name-the-path-vector-extension-r}

::: {#fig-pv}
::: {#section-5.3-5.1 .alignCenter .art-text .artwork}
      ALTO client                              ALTO server
           |------------- PV Request -------------->|
           |<----- PV Response (Cost Map Part) -----|
           |<--- PV Response (Property Map Part) ---|
:::

[Figure 9](#figure-9){.selfRef}: [The Path Vector Extension Request and
Response](#name-the-path-vector-extension-r){.selfRef}
:::

This design is based on the following
considerations:[¶](#section-5.3-6){.pilcrow}

1.  [ANEs may be constructed on demand and, potentially, based on the
    requested properties (see [Section 5.1](#ane-design){.xref} for more
    details). If sources and destinations are not in the same request as
    the properties, an ALTO server either cannot construct ANEs on
    demand or must wait until both requests are
    received.[¶](#section-5.3-7.1){.pilcrow}]{#section-5.3-7.1}
2.  [As ANEs may be constructed on demand, mappings of each ANE to its
    underlying network devices and resources can be specific to the
    request. In order to respond to the property map request correctly,
    an ALTO server must store the mapping of each Path Vector request
    until the client fully retrieves the property information. This
    \"stateful\" behavior may substantially harm server scalability and
    potentially lead to denial-of-service
    attacks.[¶](#section-5.3-7.2){.pilcrow}]{#section-5.3-7.2}

One approach for realizing the one-round communication is to define a
new media type to contain both objects, but this violates modular
design. This document follows the standard-conforming usage of the
\"multipart/related\" media type as defined in
\[[RFC2387](#RFC2387){.xref}\] to elegantly combine the objects. Path
Vectors are encoded in an InfoResourceCostMap data component or
InfoResourceEndpointCostMap data component, and the property map is
encoded in an InfoResourceProperties data component. They are
encapsulated as parts of a multipart message. This modular composition
allows ALTO servers and clients to reuse the data models of the existing
information resources. Specifically, this document addresses the
following practical issues using
\"multipart/related\".[¶](#section-5.3-8){.pilcrow}

::: {#identifying-the-media-type-of-the-root-object}
::: {#section-5.3.1 .section}
#### [5.3.1.](#section-5.3.1){.section-number .selfRef} [Identifying the Media Type of the Object Root](#name-identifying-the-media-type-){.section-name .selfRef} {#name-identifying-the-media-type-}

ALTO uses a media type to indicate the type of an entry in the IRD
(e.g., \"application/alto-costmap+json\" for the cost map and
\"application/alto-endpointcost+json\" for the Endpoint Cost Service).
Simply using \"multipart/related\" as the media type, however, makes it
impossible for an ALTO client to identify the type of service provided
by related entries.[¶](#section-5.3.1-1){.pilcrow}

To address this issue, this document uses the \"type\" parameter to
indicate the object root of a multipart/related message. For a cost map
resource, the \"media-type\" field in the IRD entry is
\"multipart/related\" with the parameter
\"type=application/alto-costmap+json\"; for an Endpoint Cost Service,
the parameter is
\"type=application/alto-endpointcost+json\".[¶](#section-5.3.1-2){.pilcrow}
:::
:::

::: {#ref-partmsg-design}
::: {#section-5.3.2 .section}
#### [5.3.2.](#section-5.3.2){.section-number .selfRef} [References to Part Messages](#name-references-to-part-messages){.section-name .selfRef} {#name-references-to-part-messages}

As the response of a Path Vector resource is a multipart message with
two different parts, it is important that each part can be uniquely
identified. Following the design provided in
\[[RFC8895](#RFC8895){.xref}\], this extension requires that an ALTO
server assign a unique identifier to each part of the multipart response
message. This identifier, referred to as a Part Resource ID (see
[Section 6.6](#part-rid-spec){.xref} for details), is present in the
part message\'s \"Content-ID\" header field. By concatenating the Part
Resource ID to the identifier of the Path Vector request, an ALTO
server/client can uniquely identify the Path Vector part or the property
map part.[¶](#section-5.3.2-1){.pilcrow}
:::
:::
:::
:::
:::
:::

::: {#Basic}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Specification: Basic Data Types](#name-specification-basic-data-ty){.section-name .selfRef} {#name-specification-basic-data-ty}

::: {#ane-name-spec}
::: {#section-6.1 .section}
### [6.1.](#section-6.1){.section-number .selfRef} [ANE Name](#name-ane-name){.section-name .selfRef} {#name-ane-name}

An ANE name is encoded as a JSON string with the same format as that of
the type PIDName ([Section
10.1](https://www.rfc-editor.org/rfc/rfc7285#section-10.1){.relref} of
\[[RFC7285](#RFC7285){.xref}\]).[¶](#section-6.1-1){.pilcrow}

The type ANEName is used in this document to indicate a string of this
format.[¶](#section-6.1-2){.pilcrow}
:::
:::

::: {#ane-domain-spec}
::: {#section-6.2 .section}
### [6.2.](#section-6.2){.section-number .selfRef} [ANE Entity Domain](#name-ane-entity-domain-2){.section-name .selfRef} {#name-ane-entity-domain-2}

The ANE entity domain associates property values with the ANEs in a
property map.  Accordingly, the ANE entity domain always depends on a
property map.[¶](#section-6.2-1){.pilcrow}

It must be noted that the term \"domain\" here does not refer to a
network domain. Rather, it is inherited from the entity domain as
defined in [Section
3.2](https://www.rfc-editor.org/rfc/rfc9240#section-3.2){.relref} of
\[[RFC9240](#RFC9240){.xref}\]; the entity domain represents the set of
valid entities defined by an ALTO information resource (called the
\"defining information resource\").[¶](#section-6.2-2){.pilcrow}

::: {#domain-type}
::: {#section-6.2.1 .section}
#### [6.2.1.](#section-6.2.1){.section-number .selfRef} [Entity Domain Type](#name-entity-domain-type){.section-name .selfRef} {#name-entity-domain-type}

The entity domain type is \"ane\".[¶](#section-6.2.1-1){.pilcrow}
:::
:::

::: {#entity-address}
::: {#section-6.2.2 .section}
#### [6.2.2.](#section-6.2.2){.section-number .selfRef} [Domain-Specific Entity Identifier](#name-domain-specific-entity-iden){.section-name .selfRef} {#name-domain-specific-entity-iden}

The entity identifiers are the ANE names in the associated property
map.[¶](#section-6.2.2-1){.pilcrow}
:::
:::

::: {#hierarchy-and-inheritance}
::: {#section-6.2.3 .section}
#### [6.2.3.](#section-6.2.3){.section-number .selfRef} [Hierarchy and Inheritance](#name-hierarchy-and-inheritance){.section-name .selfRef} {#name-hierarchy-and-inheritance}

There is no hierarchy or inheritance for properties associated with
ANEs.[¶](#section-6.2.3-1){.pilcrow}
:::
:::

::: {#domain-defining}
::: {#section-6.2.4 .section}
#### [6.2.4.](#section-6.2.4){.section-number .selfRef} [Media Type of Defining Resource](#name-media-type-of-defining-reso){.section-name .selfRef} {#name-media-type-of-defining-reso}

The defining resource for entity domain type \"ane\" [MUST]{.bcp14} be a
property map, i.e., the media type of defining resources
is:[¶](#section-6.2.4-1){.pilcrow}

::: {#section-6.2.4-2 .alignLeft .art-text .artwork}
    application/alto-propmap+json

[¶](#section-6.2.4-2){.pilcrow}
:::

Specifically, for ephemeral ANEs that appear in a Path Vector response,
their entity domain names [MUST]{.bcp14} be exactly \".ane\", and the
defining resource of these ANEs is the property map part of the
multipart response. Meanwhile, for any persistent ANE whose defining
resource is a property map resource, its entity domain name
[MUST]{.bcp14} have the format of \"PROPMAP.ane\", where PROPMAP is the
resource ID of the defining resource. Persistent entities are
\"persistent\" because standalone queries can be made by an ALTO client
to their defining resource(s) when the connection to the Path Vector
service is closed.[¶](#section-6.2.4-3){.pilcrow}

For example, the defining resource of an ephemeral ANE whose entity
identifier is \".ane:NET1\" is the property map part that contains this
identifier. The defining resource of a persistent ANE whose entity
identifier is \"dc-props.ane:DC1\" is the property map with the resource
ID \"dc-props\".[¶](#section-6.2.4-4){.pilcrow}
:::
:::
:::
:::

::: {#ane-prop-name-spec}
::: {#section-6.3 .section}
### [6.3.](#section-6.3){.section-number .selfRef} [ANE Property Name](#name-ane-property-name){.section-name .selfRef} {#name-ane-property-name}

An ANE property name is encoded as a JSON string with the same format as
that of an entity property name ([Section
5.2.2](https://www.rfc-editor.org/rfc/rfc9240#section-5.2.2){.relref} of
\[[RFC9240](#RFC9240){.xref}\]).[¶](#section-6.3-1){.pilcrow}
:::
:::

::: {#initial-ane-property-types}
::: {#section-6.4 .section}
### [6.4.](#section-6.4){.section-number .selfRef} [Initial ANE Property Types](#name-initial-ane-property-types){.section-name .selfRef} {#name-initial-ane-property-types}

Two initial ANE property types are specified:
\"max-reservable-bandwidth\" and
\"persistent-entity-id\".[¶](#section-6.4-1){.pilcrow}

Note that these property types do not depend on any information
resources. As such, the \"EntityPropertyName\" parameter [MUST]{.bcp14}
only have the EntityPropertyType part.[¶](#section-6.4-2){.pilcrow}

::: {#maxresbw}
::: {#section-6.4.1 .section}
#### [6.4.1.](#section-6.4.1){.section-number .selfRef} [Maximum Reservable Bandwidth](#name-maximum-reservable-bandwidt){.section-name .selfRef} {#name-maximum-reservable-bandwidt}

The maximum reservable bandwidth property (\"max-reservable-bandwidth\")
stands for the maximum bandwidth that can be reserved for all the
traffic that traverses an ANE. The value [MUST]{.bcp14} be encoded as a
non-negative numerical cost value as defined in [Section
6.1.2.1](https://www.rfc-editor.org/rfc/rfc7285#section-6.1.2.1){.relref}
of \[[RFC7285](#RFC7285){.xref}\], and the unit is bits per second
(bps). If this property is requested by the ALTO client but is not
present for an ANE in the server response, it [MUST]{.bcp14} be
interpreted as meaning that the property is not defined for the
ANE.[¶](#section-6.4.1-1){.pilcrow}

This property can be offered in a setting where the ALTO server is part
of a network system that provides on-demand resource allocation and the
ALTO client is part of a user application. One existing example is
\[[NOVA](#NOVA){.xref}\]: the ALTO server is part of a Software-Defined
Networking (SDN) controller and exposes a list of traversed network
elements and associated link bandwidth to the client. The encoding in
\[[NOVA](#NOVA){.xref}\] differs from the Path Vector response defined
in this document in that the Path Vector part and property map part are
placed in the same JSON object.[¶](#section-6.4.1-2){.pilcrow}

In such a framework, the ALTO server exposes resource availability
information (e.g., reservable bandwidth) to the ALTO client. How the
client makes resource requests based on the information, and how the
resource allocation is achieved, respectively, depend on interfaces
between the management system and the users or a higher-layer protocol
(e.g., SDN network intents
\[[INTENT-BASED-NETWORKING](#INTENT-BASED-NETWORKING){.xref}\] or MPLS
tunnels), which are out of scope for this
document.[¶](#section-6.4.1-3){.pilcrow}
:::
:::

::: {#persistent-entity-id}
::: {#section-6.4.2 .section}
#### [6.4.2.](#section-6.4.2){.section-number .selfRef} [Persistent Entity ID](#name-persistent-entity-id){.section-name .selfRef} {#name-persistent-entity-id}

This document enables the discovery of a persistent ANE by exposing its
entity identifier as the persistent entity ID property of an ephemeral
ANE in the path vector response. The value of this property is encoded
with the EntityID format defined in [Section
5.1.3](https://www.rfc-editor.org/rfc/rfc9240#section-5.1.3){.relref} of
\[[RFC9240](#RFC9240){.xref}\].[¶](#section-6.4.2-1){.pilcrow}

In this format, the entity ID combines:[¶](#section-6.4.2-2){.pilcrow}

-   [a defining information resource for the ANE on which a
    \"persistent-entity-id\" is queried, which is the property map
    resource defining the ANE as a persistent entity, together with the
    properties.[¶](#section-6.4.2-3.1){.pilcrow}]{#section-6.4.2-3.1}
-   [the persistent name of the ANE in that property
    map.[¶](#section-6.4.2-3.2){.pilcrow}]{#section-6.4.2-3.2}

With this format, the client has all the needed information for further
standalone query properties on the persistent
ANE.[¶](#section-6.4.2-4){.pilcrow}
:::
:::

::: {#examples}
::: {#section-6.4.3 .section}
#### [6.4.3.](#section-6.4.3){.section-number .selfRef} [Examples](#name-examples){.section-name .selfRef} {#name-examples}

To illustrate the use of \"max-reservable-bandwidth\", consider the
following network with five nodes. Assume that the client wants to query
the maximum reservable bandwidth from H1 to H2. An ALTO server may split
the network into two ANEs: \"ane1\", which represents the subnetwork
with routers A, B, and C; and \"ane2\", which represents the subnetwork
with routers B, D, and E. The maximum reservable bandwidth for \"ane1\"
is 15 Mbps (using path A-\>C-\>B), and the maximum reservable bandwidth
for \"ane2\" is 20 Mbps (using path
B-\>D-\>E).[¶](#section-6.4.3-1){.pilcrow}

::: {#section-6.4.3-2 .alignLeft .art-text .artwork}
                         20 Mbps  20 Mbps
              10 Mbps +---+   +---+    +---+
                 /----| B |---| D |----| E |---- H2
           +---+/     +---+   +---+    +---+
    H1 ----| A | 15 Mbps|
           +---+\     +---+
                 \----| C |
              15 Mbps +---+

[¶](#section-6.4.3-2){.pilcrow}
:::

To illustrate the use of \"persistent-entity-id\", consider the scenario
in [Figure 6](#fig-se){.xref}. As the life cycles of service edges are
typically long, the service edges may contain information that is not
specific to the query. Such information can be stored in an individual
entity property map and can later be accessed by an ALTO
client.[¶](#section-6.4.3-3){.pilcrow}

For example, \"ane1\" in [Figure 7](#fig-se-example){.xref} represents
the on-premise service edge closest to host \"a\". Assume that the
properties of the service edges are provided in an entity property map
called \"se-props\" and the ID of the on-premise service edge is
\"9a0b55f7-7442-4d56-8a2c-b4cc6a8e3aa1\"; the \"persistent-entity-id\"
setting for \"ane1\" will be
\"se-props.ane:9a0b55f7-7442-4d56-8a2c-b4cc6a8e3aa1\". With this
persistent entity ID, an ALTO client may send queries to the
\"se-props\" resource with the entity ID
\".ane:9a0b55f7-7442-4d56-8a2c-b4cc6a8e3aa1\".[¶](#section-6.4.3-4){.pilcrow}
:::
:::
:::
:::

::: {#cost-type-spec}
::: {#section-6.5 .section}
### [6.5.](#section-6.5){.section-number .selfRef} [Path Vector Cost Type](#name-path-vector-cost-type-2){.section-name .selfRef} {#name-path-vector-cost-type-2}

This document defines a new cost type, which is referred to as the Path
Vector cost type. An ALTO server [MUST]{.bcp14} offer this cost type if
it supports the extension defined in this
document.[¶](#section-6.5-1){.pilcrow}

::: {#metric-spec}
::: {#section-6.5.1 .section}
#### [6.5.1.](#section-6.5.1){.section-number .selfRef} [Cost Metric: \"ane-path\"](#name-cost-metric-ane-path){.section-name .selfRef} {#name-cost-metric-ane-path}

The cost metric \"ane-path\" indicates that the value of such a cost
type conveys an array of ANE names, where each ANE name uniquely
represents an ANE traversed by traffic from a source to a
destination.[¶](#section-6.5.1-1){.pilcrow}

An ALTO client [MUST]{.bcp14} interpret the Path Vector as if the
traffic between a source and a destination logically traverses the ANEs
in the same order as they appear in the Path
Vector.[¶](#section-6.5.1-2){.pilcrow}

When the Path Vector procedures defined in this document are in use, an
ALTO server using the \"ane-path\" cost metric and the \"array\" cost
mode (see [Section 6.5.2](#mode-spec){.xref}) [MUST]{.bcp14} return as
the cost value a JSON array of data type ANEName, and the client
[MUST]{.bcp14} also check that each element contained in the array is an
ANEName ([Section 6.1](#ane-name-spec){.xref}). Otherwise, the client
[MUST]{.bcp14} discard the response and [SHOULD]{.bcp14} follow the
guidance in [Section
8.3.4.3](https://www.rfc-editor.org/rfc/rfc7285#section-8.3.4.3){.relref}
of \[[RFC7285](#RFC7285){.xref}\] to handle the
error.[¶](#section-6.5.1-3){.pilcrow}
:::
:::

::: {#mode-spec}
::: {#section-6.5.2 .section}
#### [6.5.2.](#section-6.5.2){.section-number .selfRef} [Cost Mode: \"array\"](#name-cost-mode-array){.section-name .selfRef} {#name-cost-mode-array}

The cost mode \"array\" indicates that every cost value in the response
body of a (filtered) cost map or an Endpoint Cost Service [MUST]{.bcp14}
be interpreted as a JSON array object. While this cost mode can be
applied to all cost metrics, additional specifications will be needed to
clarify the semantics of the \"array\" cost mode when combined with cost
metrics other than \"ane-path\".[¶](#section-6.5.2-1){.pilcrow}
:::
:::
:::
:::

::: {#part-rid-spec}
::: {#section-6.6 .section}
### [6.6.](#section-6.6){.section-number .selfRef} [Part Resource ID and Part Content ID](#name-part-resource-id-and-part-c){.section-name .selfRef} {#name-part-resource-id-and-part-c}

A Part Resource ID is encoded as a JSON string with the same format as
that of the type ResourceID ([Section
10.2](https://www.rfc-editor.org/rfc/rfc7285#section-10.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]).[¶](#section-6.6-1){.pilcrow}

Even though the \"client-id\" assigned to a Path Vector request and the
Part Resource ID [MAY]{.bcp14} contain up to 64 characters by their own
definition, their concatenation (see [Section
5.3.2](#ref-partmsg-design){.xref}) [MUST]{.bcp14} also conform to the
same length constraint. The same requirement applies to the resource ID
of the Path Vector resource, too. Thus, it is [RECOMMENDED]{.bcp14} to
limit the length of the resource ID and client ID related to a Path
Vector resource to 31 characters.[¶](#section-6.6-2){.pilcrow}

A Part Content ID conforms to the format of \"msg-id\" as specified in
\[[RFC2387](#RFC2387){.xref}\] and \[[RFC5322](#RFC5322){.xref}\].
Specifically, it has the following format:[¶](#section-6.6-3){.pilcrow}

\"\<\" PART-RESOURCE-ID \"@\" DOMAIN-NAME
\"\>\"[¶](#section-6.6-4){.pilcrow}

[]{.break}

PART-RESOURCE-ID:

:   PART-RESOURCE-ID has the same format as the Part Resource ID. It is
    used to identify whether a part message is a Path Vector or a
    property map.[¶](#section-6.6-5.2.1){.pilcrow}

:   

DOMAIN-NAME:

:   DOMAIN-NAME has the same format as \"dot-atom-text\" as specified in
    [Section
    3.2.3](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.3){.relref}
    of \[[RFC5322](#RFC5322){.xref}\]. It must be the domain name of the
    ALTO server.[¶](#section-6.6-5.4.1){.pilcrow}

:   
:::
:::
:::
:::

::: {#Services}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Specification: Service Extensions](#name-specification-service-exten){.section-name .selfRef} {#name-specification-service-exten}

::: {#notation}
::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Notation](#name-notation){.section-name .selfRef} {#name-notation}

This document uses the same syntax and notation as those introduced in
[Section
8.2](https://www.rfc-editor.org/rfc/rfc7285#section-8.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\] to specify the extensions to existing
ALTO resources and services.[¶](#section-7.1-1){.pilcrow}
:::
:::

::: {#pvcm-spec}
::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Multipart Filtered Cost Map for Path Vector](#name-multipart-filtered-cost-map){.section-name .selfRef} {#name-multipart-filtered-cost-map}

This document introduces a new ALTO resource called the \"multipart
filtered cost map resource\", which allows an ALTO server to provide
other ALTO resources associated with the cost map resource in the same
response.[¶](#section-7.2-1){.pilcrow}

::: {#media-type}
::: {#section-7.2.1 .section}
#### [7.2.1.](#section-7.2.1){.section-number .selfRef} [Media Type](#name-media-type){.section-name .selfRef} {#name-media-type}

The media type of the multipart filtered cost map resource is
\"multipart/related\", and the required \"type\" parameter
[MUST]{.bcp14} have a value of
\"application/alto-costmap+json\".[¶](#section-7.2.1-1){.pilcrow}
:::
:::

::: {#http-method}
::: {#section-7.2.2 .section}
#### [7.2.2.](#section-7.2.2){.section-number .selfRef} [HTTP Method](#name-http-method){.section-name .selfRef} {#name-http-method}

The multipart filtered cost map is requested using the HTTP POST
method.[¶](#section-7.2.2-1){.pilcrow}
:::
:::

::: {#pvcm-accept}
::: {#section-7.2.3 .section}
#### [7.2.3.](#section-7.2.3){.section-number .selfRef} [Accept Input Parameters](#name-accept-input-parameters){.section-name .selfRef} {#name-accept-input-parameters}

The input parameters of the multipart filtered cost map are supplied in
the body of an HTTP POST request. This document extends the input
parameters to a filtered cost map, which is defined as a JSON object of
type ReqFilteredCostMap in [Section
4.1.2](https://www.rfc-editor.org/rfc/rfc8189#section-4.1.2){.relref} of
\[[RFC8189](#RFC8189){.xref}\], with a data format indicated by the
media type \"application/alto-costmapfilter+json\", which is a JSON
object of type PVReqFilteredCostMap:[¶](#section-7.2.3-1){.pilcrow}

::: {#section-7.2.3-2 .alignLeft .art-text .artwork}
    object {
      [EntityPropertyName ane-property-names<0..*>;]
    } PVReqFilteredCostMap : ReqFilteredCostMap;

[¶](#section-7.2.3-2){.pilcrow}
:::

with field:[¶](#section-7.2.3-3){.pilcrow}

[]{.break}

ane-property-names:

:   This field provides a list of selected ANE properties to be included
    in the response. Each property in this list [MUST]{.bcp14} match one
    of the supported ANE properties indicated in the resource\'s
    \"ane-property-names\" capability ([Section
    7.2.4](#pvcm-cap){.xref}). If the field is not present, it
    [MUST]{.bcp14} be interpreted as an empty
    list.[¶](#section-7.2.3-4.2.1){.pilcrow}

:   

Example: Consider the network in [Figure 1](#fig-dumbbell){.xref}. If an
ALTO client wants to query the \"max-reservable-bandwidth\" setting
between PID1 and PID2, it can submit the following
request.[¶](#section-7.2.3-5){.pilcrow}

::: {#section-7.2.3-6}
``` {.lang-http-message .sourcecode}
   POST /costmap/pv HTTP/1.1
   Host: alto.example.com
   Accept: multipart/related;type=application/alto-costmap+json,
           application/alto-error+json
   Content-Length: 212
   Content-Type: application/alto-costmapfilter+json

   {
     "cost-type": {
       "cost-mode": "array",
       "cost-metric": "ane-path"
     },
     "pids": {
       "srcs": [ "PID1" ],
       "dsts": [ "PID2" ]
     },
     "ane-property-names": [ "max-reservable-bandwidth" ]
   }
```

[¶](#section-7.2.3-6){.pilcrow}
:::
:::
:::

::: {#pvcm-cap}
::: {#section-7.2.4 .section}
#### [7.2.4.](#section-7.2.4){.section-number .selfRef} [Capabilities](#name-capabilities){.section-name .selfRef} {#name-capabilities}

The multipart filtered cost map resource extends the capabilities
defined in [Section
4.1.1](https://www.rfc-editor.org/rfc/rfc8189#section-4.1.1){.relref} of
\[[RFC8189](#RFC8189){.xref}\]. The capabilities are defined by a JSON
object of type
PVFilteredCostMapCapabilities:[¶](#section-7.2.4-1){.pilcrow}

::: {#section-7.2.4-2 .alignLeft .art-text .artwork}
    object {
      [EntityPropertyName ane-property-names<0..*>;]
    } PVFilteredCostMapCapabilities : FilteredCostMapCapabilities;

[¶](#section-7.2.4-2){.pilcrow}
:::

with field:[¶](#section-7.2.4-3){.pilcrow}

[]{.break}

ane-property-names:

:   This field provides a list of ANE properties that can be returned.
    If the field is not present, it [MUST]{.bcp14} be interpreted as an
    empty list, indicating that the ALTO server cannot provide any ANE
    properties.[¶](#section-7.2.4-4.2.1){.pilcrow}

:   

This extension also introduces additional restrictions for the following
fields:[¶](#section-7.2.4-5){.pilcrow}

[]{.break}

cost-type-names:

:   The \"cost-type-names\" field [MUST]{.bcp14} include the Path Vector
    cost type, unless explicitly documented by a future extension. This
    also implies that the Path Vector cost type [MUST]{.bcp14} be
    defined in the \"cost-types\" of the IRD\'s \"meta\"
    field.[¶](#section-7.2.4-6.2.1){.pilcrow}

:   

cost-constraints:

:   If the \"cost-type-names\" field includes the Path Vector cost type,
    the \"cost-constraints\" field [MUST]{.bcp14} be either \"false\" or
    not present, unless specifically instructed by a future
    document.[¶](#section-7.2.4-6.4.1){.pilcrow}

:   

testable-cost-type-names ([Section 4.1.1](https://www.rfc-editor.org/rfc/rfc8189#section-4.1.1){.relref} of \[[RFC8189](#RFC8189){.xref}\]):

:   If the \"cost-type-names\" field includes the Path Vector cost type
    and the \"testable-cost-type-names\" field is present, the Path
    Vector cost type [MUST NOT]{.bcp14} be included in the
    \"testable-cost-type-names\" field unless specifically instructed by
    a future document.[¶](#section-7.2.4-6.6.1){.pilcrow}

:   
:::
:::

::: {#uses}
::: {#section-7.2.5 .section}
#### [7.2.5.](#section-7.2.5){.section-number .selfRef} [Uses](#name-uses){.section-name .selfRef} {#name-uses}

This member [MUST]{.bcp14} include the resource ID of the network map
based on which the PIDs are defined. If this resource supports
\"persistent-entity-id\", it [MUST]{.bcp14} also include the defining
resources of persistent ANEs that may appear in the
response.[¶](#section-7.2.5-1){.pilcrow}
:::
:::

::: {#pvcm-resp}
::: {#section-7.2.6 .section}
#### [7.2.6.](#section-7.2.6){.section-number .selfRef} [Response](#name-response){.section-name .selfRef} {#name-response}

The response [MUST]{.bcp14} indicate an error, using ALTO Protocol error
handling as defined in [Section
8.5](https://www.rfc-editor.org/rfc/rfc7285#section-8.5){.relref} of
\[[RFC7285](#RFC7285){.xref}\], if the request is
invalid.[¶](#section-7.2.6-1){.pilcrow}

The \"Content-Type\" header field of the response [MUST]{.bcp14} be
\"multipart/related\" as defined by \[[RFC2387](#RFC2387){.xref}\], with
the following parameters:[¶](#section-7.2.6-2){.pilcrow}

[]{.break}

type:

:   The \"type\" parameter is mandatory and [MUST]{.bcp14} be
    \"application/alto-costmap+json\". Note that
    \[[RFC2387](#RFC2387){.xref}\] permits parameters both with and
    without double quotes.[¶](#section-7.2.6-3.2.1){.pilcrow}

:   

start:

:   The \"start\" parameter is as defined in
    \[[RFC2387](#RFC2387){.xref}\] and is optional. If present, it
    [MUST]{.bcp14} have the same value as the \"Content-ID\" header
    field of the Path Vector part.[¶](#section-7.2.6-3.4.1){.pilcrow}

:   

boundary:

:   The \"boundary\" parameter is as defined in [Section
    5.1.1](https://www.rfc-editor.org/rfc/rfc2046#section-5.1.1){.relref}
    of \[[RFC2046](#RFC2046){.xref}\] and is
    mandatory.[¶](#section-7.2.6-3.6.1){.pilcrow}

:   

The body of the response [MUST]{.bcp14} consist of two
parts:[¶](#section-7.2.6-4){.pilcrow}

-   ::: {#section-7.2.6-5.1}
    The Path Vector part [MUST]{.bcp14} include \"Content-ID\" and
    \"Content-Type\" in its header. The \"Content-Type\" [MUST]{.bcp14}
    be \"application/alto-costmap+json\". The value of \"Content-ID\"
    [MUST]{.bcp14} have the same format as the Part Content ID as
    specified in [Section
    6.6](#part-rid-spec){.xref}.[¶](#section-7.2.6-5.1.1){.pilcrow}

    The body of the Path Vector part [MUST]{.bcp14} be a JSON object
    with the same format as that defined in [Section
    11.2.3.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.2.3.6){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] when the \"cost-type\" field is
    present in the input parameters and [MUST]{.bcp14} be a JSON object
    with the same format as that defined in [Section
    4.1.3](https://www.rfc-editor.org/rfc/rfc8189#section-4.1.3){.relref}
    of \[[RFC8189](#RFC8189){.xref}\] if the \"multi-cost-types\" field
    is present. The JSON object [MUST]{.bcp14} include the \"vtag\"
    field in the \"meta\" field, which provides the version tag of the
    returned CostMapData object. The resource ID of the version tag
    [MUST]{.bcp14} follow the format
    of[¶](#section-7.2.6-5.1.2){.pilcrow}

    ::: {#section-7.2.6-5.1.3}
    ``` {.lang-rbnf .sourcecode}
    resource-id '.' part-resource-id
    ```

    [¶](#section-7.2.6-5.1.3){.pilcrow}
    :::

    where \"resource-id\" is the resource ID of the Path Vector resource
    and \"part-resource-id\" has the same value as the PART-RESOURCE-ID
    in the \"Content-ID\" of the Path Vector part. The \"meta\" field
    [MUST]{.bcp14} also include the \"dependent-vtags\" field, whose
    value is a single-element array to indicate the version tag of the
    network map used, where the network map is specified in the \"uses\"
    attribute of the multipart filtered cost map resource in the
    IRD.[¶](#section-7.2.6-5.1.4){.pilcrow}
    :::

-   ::: {#section-7.2.6-5.2}
    The entity property map part [MUST]{.bcp14} also include
    \"Content-ID\" and \"Content-Type\" in its header. The
    \"Content-Type\" [MUST]{.bcp14} be
    \"application/alto-propmap+json\". The value of \"Content-ID\"
    [MUST]{.bcp14} have the same format as the Part Content ID as
    specified in [Section
    6.6](#part-rid-spec){.xref}.[¶](#section-7.2.6-5.2.1){.pilcrow}

    The body of the entity property map part is a JSON object with the
    same format as that defined in [Section
    7.6](https://www.rfc-editor.org/rfc/rfc9240#section-7.6){.relref} of
    \[[RFC9240](#RFC9240){.xref}\]. The JSON object [MUST]{.bcp14}
    include the \"dependent-vtags\" field in the \"meta\" field. The
    value of the \"dependent-vtags\" field [MUST]{.bcp14} be an array of
    VersionTag objects as defined by [Section
    10.3](https://www.rfc-editor.org/rfc/rfc7285#section-10.3){.relref}
    of \[[RFC7285](#RFC7285){.xref}\]. The \"vtag\" of the Path Vector
    part [MUST]{.bcp14} be included in the \"dependent-vtags\" field. If
    \"persistent-entity-id\" is requested, the version tags of the
    dependent resources that may expose the entities in the response
    [MUST]{.bcp14} also be included.[¶](#section-7.2.6-5.2.2){.pilcrow}

    The PropertyMapData object has one member for each ANEName that
    appears in the Path Vector part, which is an entity identifier
    belonging to the self-defined entity domain as defined in [Section
    5.1.2.3](https://www.rfc-editor.org/rfc/rfc9240#section-5.1.2.3){.relref}
    of \[[RFC9240](#RFC9240){.xref}\]. The EntityProps object for each
    ANE has one member for each property that is both 1) associated with
    the ANE and 2) specified in the \"ane-property-names\" field in the
    request. If the Path Vector cost type is not included in the
    \"cost-type\" field or the \"multi-cost-type\" field, the
    \"property-map\" field [MUST]{.bcp14} be present and the value
    [MUST]{.bcp14} be an empty object
    ({}).[¶](#section-7.2.6-5.2.3){.pilcrow}
    :::

A complete and valid response [MUST]{.bcp14} include both the Path
Vector part and the property map part in the multipart message. If any
part is **not** present, the client [MUST]{.bcp14} discard the received
information and send another request if
necessary.[¶](#section-7.2.6-6){.pilcrow}

The Path Vector part, whose media type is the same as the \"type\"
parameter of the multipart response message, is the root body part as
defined in \[[RFC2387](#RFC2387){.xref}\]. Thus, it is the element that
the application processes first. Even though the \"start\" parameter
allows it to be placed anywhere in the part sequence, it is
[RECOMMENDED]{.bcp14} that the parts arrive in the same order as they
are processed, i.e., the Path Vector part is always placed as the first
part, followed by the property map part. When doing so, an ALTO server
[MAY]{.bcp14} choose not to set the \"start\" parameter, which implies
that the first part is the object root.[¶](#section-7.2.6-7){.pilcrow}

Example: Consider the network in [Figure 1](#fig-dumbbell){.xref}. The
response to the example request in [Section 7.2.3](#pvcm-accept){.xref}
is as follows, where \"ANE1\" represents the aggregation of all the
switches in the network.[¶](#section-7.2.6-8){.pilcrow}

::: {#section-7.2.6-9}
``` {.lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 911
Content-Type: multipart/related; boundary=example-1;
              type=application/alto-costmap+json

--example-1
Content-ID: <costmap@alto.example.com>
Content-Type: application/alto-costmap+json

{
  "meta": {
    "vtag": {
      "resource-id": "filtered-cost-map-pv.costmap",
      "tag": "fb20b76204814e9db37a51151faaaef2"
    },
    "dependent-vtags": [
      {
        "resource-id": "my-default-networkmap",
        "tag": "75ed013b3cb58f896e839582504f6228"
      }
    ],
    "cost-type": { "cost-mode": "array", "cost-metric": "ane-path" }
  },
  "cost-map": {
    "PID1": { "PID2": [ "ANE1" ] }
  }
}
--example-1
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "filtered-cost-map-pv.costmap",
        "tag": "fb20b76204814e9db37a51151faaaef2"
      }
    ]
  },
  "property-map": {
    ".ane:ANE1": { "max-reservable-bandwidth": 100000000 }
  }
}
--example-1
```

[¶](#section-7.2.6-9){.pilcrow}
:::
:::
:::
:::
:::

::: {#pvecs-spec}
::: {#section-7.3 .section}
### [7.3.](#section-7.3){.section-number .selfRef} [Multipart Endpoint Cost Service for Path Vector](#name-multipart-endpoint-cost-ser){.section-name .selfRef} {#name-multipart-endpoint-cost-ser}

This document introduces a new ALTO resource called the \"multipart
Endpoint Cost Service\", which allows an ALTO server to provide other
ALTO resources associated with the Endpoint Cost Service resource in the
same response.[¶](#section-7.3-1){.pilcrow}

::: {#media-type-1}
::: {#section-7.3.1 .section}
#### [7.3.1.](#section-7.3.1){.section-number .selfRef} [Media Type](#name-media-type-2){.section-name .selfRef} {#name-media-type-2}

The media type of the multipart Endpoint Cost Service resource is
\"multipart/related\", and the required \"type\" parameter
[MUST]{.bcp14} have a value of
\"application/alto-endpointcost+json\".[¶](#section-7.3.1-1){.pilcrow}
:::
:::

::: {#http-method-1}
::: {#section-7.3.2 .section}
#### [7.3.2.](#section-7.3.2){.section-number .selfRef} [HTTP Method](#name-http-method-2){.section-name .selfRef} {#name-http-method-2}

The multipart Endpoint Cost Service resource is requested using the HTTP
POST method.[¶](#section-7.3.2-1){.pilcrow}
:::
:::

::: {#pvecs-accept}
::: {#section-7.3.3 .section}
#### [7.3.3.](#section-7.3.3){.section-number .selfRef} [Accept Input Parameters](#name-accept-input-parameters-2){.section-name .selfRef} {#name-accept-input-parameters-2}

The input parameters of the multipart Endpoint Cost Service resource are
supplied in the body of an HTTP POST request. This document extends the
input parameters to an Endpoint Cost Service, which is defined as a JSON
object of type ReqEndpointCostMap in [Section
4.2.2](https://www.rfc-editor.org/rfc/rfc8189#section-4.2.2){.relref} of
\[[RFC8189](#RFC8189){.xref}\], with a data format indicated by the
media type \"application/alto-endpointcostparams+json\", which is a JSON
object of type PVReqEndpointCostMap:[¶](#section-7.3.3-1){.pilcrow}

::: {#section-7.3.3-2 .alignLeft .art-text .artwork}
    object {
      [EntityPropertyName ane-property-names<0..*>;]
    } PVReqEndpointCostMap : ReqEndpointCostMap;

[¶](#section-7.3.3-2){.pilcrow}
:::

with field:[¶](#section-7.3.3-3){.pilcrow}

[]{.break}

ane-property-names:

:   This document defines the \"ane-property-names\" field in
    PVReqEndpointCostMap as being the same as in PVReqFilteredCostMap.
    See [Section
    7.2.3](#pvcm-accept){.xref}.[¶](#section-7.3.3-4.2.1){.pilcrow}

:   

Example: Consider the network in [Figure 1](#fig-dumbbell){.xref}. If an
ALTO client wants to query the \"max-reservable-bandwidth\" setting
between \"eh1\" and \"eh2\", it can submit the following
request.[¶](#section-7.3.3-5){.pilcrow}

::: {#section-7.3.3-6}
``` {.lang-http-message .sourcecode}
POST /ecs/pv HTTP/1.1
Host: alto.example.com
Accept: multipart/related;type=application/alto-endpointcost+json,
        application/alto-error+json
Content-Length: 238
Content-Type: application/alto-endpointcostparams+json

{
  "cost-type": {
    "cost-mode": "array",
    "cost-metric": "ane-path"
  },
  "endpoints": {
    "srcs": [ "ipv4:192.0.2.2" ],
    "dsts": [ "ipv4:192.0.2.18" ]
  },
  "ane-property-names": [ "max-reservable-bandwidth" ]
}
```

[¶](#section-7.3.3-6){.pilcrow}
:::
:::
:::

::: {#pvecs-cap}
::: {#section-7.3.4 .section}
#### [7.3.4.](#section-7.3.4){.section-number .selfRef} [Capabilities](#name-capabilities-2){.section-name .selfRef} {#name-capabilities-2}

The capabilities of the multipart Endpoint Cost Service resource are
defined by a JSON object of type PVEndpointCostCapabilities, which is
defined as being the same as PVFilteredCostMapCapabilities. See [Section
7.2.4](#pvcm-cap){.xref}.[¶](#section-7.3.4-1){.pilcrow}
:::
:::

::: {#uses-1}
::: {#section-7.3.5 .section}
#### [7.3.5.](#section-7.3.5){.section-number .selfRef} [Uses](#name-uses-2){.section-name .selfRef} {#name-uses-2}

If this resource supports \"persistent-entity-id\", it [MUST]{.bcp14}
also include the defining resources of persistent ANEs that may appear
in the response.[¶](#section-7.3.5-1){.pilcrow}
:::
:::

::: {#pvecs-resp}
::: {#section-7.3.6 .section}
#### [7.3.6.](#section-7.3.6){.section-number .selfRef} [Response](#name-response-2){.section-name .selfRef} {#name-response-2}

The response [MUST]{.bcp14} indicate an error, using ALTO Protocol error
handling as defined in [Section
8.5](https://www.rfc-editor.org/rfc/rfc7285#section-8.5){.relref} of
\[[RFC7285](#RFC7285){.xref}\], if the request is
invalid.[¶](#section-7.3.6-1){.pilcrow}

The \"Content-Type\" header field of the response [MUST]{.bcp14} be
\"multipart/related\" as defined by \[[RFC2387](#RFC2387){.xref}\], with
the following parameters:[¶](#section-7.3.6-2){.pilcrow}

[]{.break}

type:

:   The \"type\" parameter [MUST]{.bcp14} be
    \"application/alto-endpointcost+json\" and is
    mandatory.[¶](#section-7.3.6-3.2.1){.pilcrow}

:   

start:

:   The \"start\" parameter is as defined in [Section
    7.2.6](#pvcm-resp){.xref}.[¶](#section-7.3.6-3.4.1){.pilcrow}

:   

boundary:

:   The \"boundary\" parameter is as defined in [Section
    5.1.1](https://www.rfc-editor.org/rfc/rfc2046#section-5.1.1){.relref}
    of \[[RFC2046](#RFC2046){.xref}\] and is
    mandatory.[¶](#section-7.3.6-3.6.1){.pilcrow}

:   

The body of the response [MUST]{.bcp14} consist of two
parts:[¶](#section-7.3.6-4){.pilcrow}

-   ::: {#section-7.3.6-5.1}
    The Path Vector part [MUST]{.bcp14} include \"Content-ID\" and
    \"Content-Type\" in its header. The \"Content-Type\" [MUST]{.bcp14}
    be \"application/alto-endpointcost+json\". The value of
    \"Content-ID\" [MUST]{.bcp14} have the same format as the Part
    Content ID as specified in [Section
    6.6](#part-rid-spec){.xref}.[¶](#section-7.3.6-5.1.1){.pilcrow}

    The body of the Path Vector part [MUST]{.bcp14} be a JSON object
    with the same format as that defined in [Section
    11.5.1.6](https://www.rfc-editor.org/rfc/rfc7285#section-11.5.1.6){.relref}
    of \[[RFC7285](#RFC7285){.xref}\] when the \"cost-type\" field is
    present in the input parameters and [MUST]{.bcp14} be a JSON object
    with the same format as that defined in [Section
    4.2.3](https://www.rfc-editor.org/rfc/rfc8189#section-4.2.3){.relref}
    of \[[RFC8189](#RFC8189){.xref}\] if the \"multi-cost-types\" field
    is present. The JSON object [MUST]{.bcp14} include the \"vtag\"
    field in the \"meta\" field, which provides the version tag of the
    returned EndpointCostMapData object. The resource ID of the version
    tag [MUST]{.bcp14} follow the format
    of[¶](#section-7.3.6-5.1.2){.pilcrow}

    ::: {#section-7.3.6-5.1.3}
    ``` {.lang-rbnf .sourcecode}
    resource-id '.' part-resource-id
    ```

    [¶](#section-7.3.6-5.1.3){.pilcrow}
    :::

    where \"resource-id\" is the resource ID of the Path Vector resource
    and \"part-resource-id\" has the same value as the PART-RESOURCE-ID
    in the \"Content-ID\" of the Path Vector
    part.[¶](#section-7.3.6-5.1.4){.pilcrow}
    :::

-   ::: {#section-7.3.6-5.2}
    The entity property map part [MUST]{.bcp14} also include
    \"Content-ID\" and \"Content-Type\" in its header. The
    \"Content-Type\" [MUST]{.bcp14} be
    \"application/alto-propmap+json\". The value of \"Content-ID\"
    [MUST]{.bcp14} have the same format as the Part Content ID as
    specified in [Section
    6.6](#part-rid-spec){.xref}.[¶](#section-7.3.6-5.2.1){.pilcrow}

    The body of the entity property map part [MUST]{.bcp14} be a JSON
    object with the same format as that defined in [Section
    7.6](https://www.rfc-editor.org/rfc/rfc9240#section-7.6){.relref} of
    \[[RFC9240](#RFC9240){.xref}\]. The JSON object [MUST]{.bcp14}
    include the \"dependent-vtags\" field in the \"meta\" field. The
    value of the \"dependent-vtags\" field [MUST]{.bcp14} be an array of
    VersionTag objects as defined by [Section
    10.3](https://www.rfc-editor.org/rfc/rfc7285#section-10.3){.relref}
    of \[[RFC7285](#RFC7285){.xref}\]. The \"vtag\" of the Path Vector
    part [MUST]{.bcp14} be included in the \"dependent-vtags\" field. If
    \"persistent-entity-id\" is requested, the version tags of the
    dependent resources that may expose the entities in the response
    [MUST]{.bcp14} also be included.[¶](#section-7.3.6-5.2.2){.pilcrow}

    The PropertyMapData object has one member for each ANEName that
    appears in the Path Vector part, which is an entity identifier
    belonging to the self-defined entity domain as defined in [Section
    5.1.2.3](https://www.rfc-editor.org/rfc/rfc9240#section-5.1.2.3){.relref}
    of \[[RFC9240](#RFC9240){.xref}\]. The EntityProps object for each
    ANE has one member for each property that is both 1) associated with
    the ANE and 2) specified in the \"ane-property-names\" field in the
    request. If the Path Vector cost type is not included in the
    \"cost-type\" field or the \"multi-cost-type\" field, the
    \"property-map\" field [MUST]{.bcp14} be present and the value
    [MUST]{.bcp14} be an empty object
    ({}).[¶](#section-7.3.6-5.2.3){.pilcrow}
    :::

A complete and valid response [MUST]{.bcp14} include both the Path
Vector part and the property map part in the multipart message. If any
part is **not** present, the client [MUST]{.bcp14} discard the received
information and send another request if
necessary.[¶](#section-7.3.6-6){.pilcrow}

The Path Vector part, whose media type is the same as the \"type\"
parameter of the multipart response message, is the root body part as
defined in \[[RFC2387](#RFC2387){.xref}\]. Thus, it is the element that
the application processes first. Even though the \"start\" parameter
allows it to be placed anywhere in the part sequence, it is
[RECOMMENDED]{.bcp14} that the parts arrive in the same order as they
are processed, i.e., the Path Vector part is always placed as the first
part, followed by the property map part. When doing so, an ALTO server
[MAY]{.bcp14} choose not to set the \"start\" parameter, which implies
that the first part is the object root.[¶](#section-7.3.6-7){.pilcrow}

Example: Consider the network in [Figure 1](#fig-dumbbell){.xref}. The
response to the example request in [Section 7.3.3](#pvecs-accept){.xref}
is as follows.[¶](#section-7.3.6-8){.pilcrow}

::: {#section-7.3.6-9}
``` {.lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 899
Content-Type: multipart/related; boundary=example-1;
              type=application/alto-endpointcost+json

--example-1
Content-ID: <ecs@alto.example.com>
Content-Type: application/alto-endpointcost+json

{
  "meta": {
    "vtag": {
      "resource-id": "ecs-pv.ecs",
      "tag": "ec137bb78118468c853d5b622ac003f1"
    },
    "dependent-vtags": [
      {
        "resource-id": "my-default-networkmap",
        "tag": "677fe5f4066848d282ece213a84f9429"
      }
    ],
    "cost-type": { "cost-mode": "array", "cost-metric": "ane-path" }
  },
  "cost-map": {
    "ipv4:192.0.2.2": { "ipv4:192.0.2.18": [ "ANE1" ] }
  }
}
--example-1
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "ecs-pv.ecs",
        "tag": "ec137bb78118468c853d5b622ac003f1"
      }
    ]
  },
  "property-map": {
    ".ane:ANE1": { "max-reservable-bandwidth": 100000000 }
  }
}
--example-1
```

[¶](#section-7.3.6-9){.pilcrow}
:::
:::
:::
:::
:::
:::
:::

::: {#Examples}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Examples](#name-examples-2){.section-name .selfRef} {#name-examples-2}

This section lists some examples of Path Vector queries and the
corresponding responses. Some long lines are truncated for better
readability.[¶](#section-8-1){.pilcrow}

::: {#sample-setup}
::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [Sample Setup](#name-sample-setup){.section-name .selfRef} {#name-sample-setup}

[Figure 10](#fig-pe){.xref} illustrates the network properties and thus
the message contents. There are three subnetworks (NET1, NET2, and NET3)
and two interconnection links (L1 and L2). It is assumed that each
subnetwork has sufficiently large bandwidth to be
reserved.[¶](#section-8.1-1){.pilcrow}

[]{#name-examples-of-ane-properties}

::: {#fig-pe}
::: {#section-8.1-2.1 .alignCenter .art-text .artwork}
                                         ----- L1
                                        /
            PID1   +----------+ 10 Gbps +----------+    PID3
     192.0.2.0/28+-+ +------+ +---------+          +--+192.0.2.32/28
                   | | MEC1 | |         |          |   2001:db8::3:0/16
                   | +------+ |   +-----+          |
            PID2   |          |   |     +----------+
    192.0.2.16/28+-+          |   |         NET3
                   |          |   | 15 Gbps
                   |          |   |        \
                   +----------+   |         -------- L2
                       NET1       |
                                +----------+
                                | +------+ |   PID4
                                | | MEC2 | +--+192.0.2.48/28
                                | +------+ |   2001:db8::4:0/16
                                +----------+
                                    NET2
:::

[Figure 10](#figure-10){.selfRef}: [Examples of ANE
Properties](#name-examples-of-ane-properties){.selfRef}
:::
:::
:::

::: {#example-ird}
::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [Information Resource Directory](#name-information-resource-direct){.section-name .selfRef} {#name-information-resource-direct}

To give a comprehensive example of the extension defined in this
document, we consider the network in [Figure 10](#fig-pe){.xref}. Assume
that the ALTO server provides the following information
resources:[¶](#section-8.2-1){.pilcrow}

[]{.break}

\"my-default-networkmap\":
:   A network map resource that contains the PIDs in the
    network.[¶](#section-8.2-2.2){.pilcrow}
:   

\"filtered-cost-map-pv\":
:   A multipart filtered cost map resource for the Path Vector. Exposes
    the \"max-reservable-bandwidth\" property for the PIDs in
    \"my-default-networkmap\".[¶](#section-8.2-2.4){.pilcrow}
:   

\"ane-props\":
:   A filtered entity property resource that exposes the information for
    persistent ANEs in the network.[¶](#section-8.2-2.6){.pilcrow}
:   

\"endpoint-cost-pv\":
:   A multipart Endpoint Cost Service for the Path Vector. Exposes the
    \"max-reservable-bandwidth\" and \"persistent-entity-id\"
    properties.[¶](#section-8.2-2.8){.pilcrow}
:   

\"update-pv\":
:   An update stream service that provides the incremental update
    service for the \"endpoint-cost-pv\"
    service.[¶](#section-8.2-2.10){.pilcrow}
:   

\"multicost-pv\":
:   A multipart Endpoint Cost Service with both the Multi-Cost extension
    and Path Vector extension enabled.[¶](#section-8.2-2.12){.pilcrow}
:   

Below is the IRD of the example ALTO server. To enable the extension
defined in this document, the Path Vector cost type ([Section
6.5](#cost-type-spec){.xref}), represented by \"path-vector\" below, is
defined in the \"cost-types\" of the \"meta\" field and is included in
the \"cost-type-names\" of resources \"filtered-cost-map-pv\" and
\"endpoint-cost-pv\".[¶](#section-8.2-3){.pilcrow}

::: {#section-8.2-4}
``` {.breakable .lang-json .sourcecode}
{
  "meta": {
    "cost-types": {
      "path-vector": {
        "cost-mode": "array",
        "cost-metric": "ane-path"
      },
      "num-rc": {
        "cost-mode": "numerical",
        "cost-metric": "routingcost"
      }
    }
  },
  "resources": {
    "my-default-networkmap": {
      "uri": "https://alto.example.com/networkmap",
      "media-type": "application/alto-networkmap+json"
    },
    "filtered-cost-map-pv": {
      "uri": "https://alto.example.com/costmap/pv",
      "media-type": "multipart/related;
                     type=application/alto-costmap+json",
      "accepts": "application/alto-costmapfilter+json",
      "capabilities": {
        "cost-type-names": [ "path-vector" ],
        "ane-property-names": [ "max-reservable-bandwidth" ]
      },
      "uses": [ "my-default-networkmap" ]
    },
    "ane-props": {
      "uri": "https://alto.example.com/ane-props",
      "media-type": "application/alto-propmap+json",
      "accepts": "application/alto-propmapparams+json",
      "capabilities": {
        "mappings": {
          ".ane": [ "cpu" ]
        }
      }
    },
    "endpoint-cost-pv": {
      "uri": "https://alto.exmaple.com/endpointcost/pv",
      "media-type": "multipart/related;
                     type=application/alto-endpointcost+json",
      "accepts": "application/alto-endpointcostparams+json",
      "capabilities": {
        "cost-type-names": [ "path-vector" ],
        "ane-property-names": [
          "max-reservable-bandwidth", "persistent-entity-id"
        ]
      },
      "uses": [ "ane-props" ]
    },
    "update-pv": {
      "uri": "https://alto.example.com/updates/pv",
      "media-type": "text/event-stream",
      "uses": [ "endpoint-cost-pv" ],
      "accepts": "application/alto-updatestreamparams+json",
      "capabilities": {
        "support-stream-control": true
      }
    },
    "multicost-pv": {
      "uri": "https://alto.exmaple.com/endpointcost/mcpv",
      "media-type": "multipart/related;
                     type=application/alto-endpointcost+json",
      "accepts": "application/alto-endpointcostparams+json",
      "capabilities": {
        "cost-type-names": [ "path-vector", "num-rc" ],
        "max-cost-types": 2,
        "testable-cost-type-names": [ "num-rc" ],
        "ane-property-names": [
          "max-reservable-bandwidth", "persistent-entity-id"
        ]
      },
      "uses": [ "ane-props" ]
    }
  }
}
```

[¶](#section-8.2-4){.pilcrow}
:::
:::
:::

::: {#multipart-filtered-cost-map}
::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [Multipart Filtered Cost Map](#name-multipart-filtered-cost-map-2){.section-name .selfRef} {#name-multipart-filtered-cost-map-2}

The following examples demonstrate the request to the
\"filtered-cost-map-pv\" resource and the corresponding
response.[¶](#section-8.3-1){.pilcrow}

The request uses the \"path-vector\" cost type in the \"cost-type\"
field. The \"ane-property-names\" field is missing, indicating that the
client only requests the Path Vector and not the ANE
properties.[¶](#section-8.3-2){.pilcrow}

The response consists of two parts:[¶](#section-8.3-3){.pilcrow}

-   [The first part returns the array of data type ANEName for each
    source and destination pair. There are two ANEs, where \"L1\"
    represents interconnection link L1 and \"L2\" represents
    interconnection link
    L2.[¶](#section-8.3-4.1){.pilcrow}]{#section-8.3-4.1}
-   [The second part returns the property map.  Note that the properties
    of the ANE entries are equal to the literal string \"{}\" (see
    [Section
    8.3](https://www.rfc-editor.org/rfc/rfc9240#section-8.3){.relref} of
    \[[RFC9240](#RFC9240){.xref}\]).[¶](#section-8.3-4.2){.pilcrow}]{#section-8.3-4.2}

::: {#section-8.3-5}
``` {.lang-http-message .sourcecode}
POST /costmap/pv HTTP/1.1
Host: alto.example.com
Accept: multipart/related;type=application/alto-costmap+json,
        application/alto-error+json
Content-Length: 163
Content-Type: application/alto-costmapfilter+json

{
  "cost-type": {
    "cost-mode": "array",
    "cost-metric": "ane-path"
  },
  "pids": {
    "srcs": [ "PID1" ],
    "dsts": [ "PID3", "PID4" ]
  }
}
```

[¶](#section-8.3-5){.pilcrow}
:::

::: {#section-8.3-6}
``` {.breakable .lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 952
Content-Type: multipart/related; boundary=example-1;
              type=application/alto-costmap+json

--example-1
Content-ID: <costmap@alto.example.com>
Content-Type: application/alto-costmap+json

{
  "meta": {
    "vtag": {
      "resource-id": "filtered-cost-map-pv.costmap",
      "tag": "d827f484cb66ce6df6b5077cb8562b0a"
    },
    "dependent-vtags": [
      {
        "resource-id": "my-default-networkmap",
        "tag": "c04bc5da49534274a6daeee8ea1dec62"
      }
    ],
    "cost-type": {
      "cost-mode": "array",
      "cost-metric": "ane-path"
    }
  },
  "cost-map": {
    "PID1": {
      "PID3": [ "L1" ],
      "PID4": [ "L1", "L2" ]
    }
  }
}
--example-1
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "filtered-cost-map-pv.costmap",
        "tag": "d827f484cb66ce6df6b5077cb8562b0a"
      }
    ]
  },
  "property-map": {
    ".ane:L1": {},
    ".ane:L2": {}
  }
}
--example-1
```

[¶](#section-8.3-6){.pilcrow}
:::
:::
:::

::: {#example-ecspv}
::: {#section-8.4 .section}
### [8.4.](#section-8.4){.section-number .selfRef} [Multipart Endpoint Cost Service Resource](#name-multipart-endpoint-cost-serv){.section-name .selfRef} {#name-multipart-endpoint-cost-serv}

The following examples demonstrate the request to the
\"endpoint-cost-pv\" resource and the corresponding
response.[¶](#section-8.4-1){.pilcrow}

The request uses the \"path-vector\" cost type in the \"cost-type\"
field and queries the maximum reservable bandwidth ANE property and the
persistent entity ID property for two IPv4 source and destination pairs
(192.0.2.34 -\> 192.0.2.2 and 192.0.2.34 -\> 192.0.2.50) and one IPv6
source and destination pair (2001:db8::3:1 -\>
2001:db8::4:1).[¶](#section-8.4-2){.pilcrow}

The response consists of two parts:[¶](#section-8.4-3){.pilcrow}

-   [The first part returns the array of data type ANEName for each
    valid source and destination pair. As one can see in [Figure
    10](#fig-pe){.xref}, flow 192.0.2.34 -\> 192.0.2.2 traverses NET3,
    L1, and NET1; and flows 192.0.2.34 -\> 192.0.2.50 and 2001:db8::3:1
    -\> 2001:db8::4:1 traverse NET2, L2, and
    NET3.[¶](#section-8.4-4.1){.pilcrow}]{#section-8.4-4.1}
-   [The second part returns the requested properties of ANEs. Assume
    that NET1, NET2, and NET3 have sufficient bandwidth and their
    \"max-reservable-bandwidth\" values are set to a sufficiently large
    number (50 Gbps in this case). On the other hand, assume that there
    are no prior reservations on L1 and L2 and their
    \"max-reservable-bandwidth\" values are the corresponding link
    capacity (10 Gbps for L1 and 15 Gbps for
    L2).[¶](#section-8.4-4.2){.pilcrow}]{#section-8.4-4.2}

Both NET1 and NET2 have a mobile edge deployed, i.e., MEC1 in NET1 and
MEC2 in NET2. Assume that the ANEName values for MEC1 and MEC2 are
\"MEC1\" and \"MEC2\" and their properties can be retrieved from the
property map \"ane-props\". Thus, the \"persistent-entity-id\" property
values for NET1 and NET2 are \"ane-props.ane:MEC1\" and
\"ane-props.ane:MEC2\", respectively.[¶](#section-8.4-5){.pilcrow}

::: {#section-8.4-6}
``` {.lang-http-message .sourcecode}
POST /endpointcost/pv HTTP/1.1
Host: alto.example.com
Accept: multipart/related;
        type=application/alto-endpointcost+json,
        application/alto-error+json
Content-Length: 383
Content-Type: application/alto-endpointcostparams+json

{
  "cost-type": {
    "cost-mode": "array",
    "cost-metric": "ane-path"
  },
  "endpoints": {
    "srcs": [
      "ipv4:192.0.2.34",
      "ipv6:2001:db8::3:1"
    ],
    "dsts": [
      "ipv4:192.0.2.2",
      "ipv4:192.0.2.50",
      "ipv6:2001:db8::4:1"
    ]
  },
  "ane-property-names": [
    "max-reservable-bandwidth",
    "persistent-entity-id"
  ]
}
```

[¶](#section-8.4-6){.pilcrow}
:::

::: {#section-8.4-7}
``` {.breakable .lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 1508
Content-Type: multipart/related; boundary=example-2;
              type=application/alto-endpointcost+json

--example-2
Content-ID: <ecs@alto.example.com>
Content-Type: application/alto-endpointcost+json

{
  "meta": {
    "vtags": {
      "resource-id": "endpoint-cost-pv.ecs",
      "tag": "bb6bb72eafe8f9bdc4f335c7ed3b10822a391cef"
    },
    "cost-type": {
      "cost-mode": "array",
      "cost-metric": "ane-path"
    }
  },
  "endpoint-cost-map": {
    "ipv4:192.0.2.34": {
      "ipv4:192.0.2.2":   [ "NET3", "L1", "NET1" ],
      "ipv4:192.0.2.50":   [ "NET3", "L2", "NET2" ]
    },
    "ipv6:2001:db8::3:1": {
      "ipv6:2001:db8::4:1": [ "NET3", "L2", "NET2" ]
    }
  }
}
--example-2
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "endpoint-cost-pv.ecs",
        "tag": "bb6bb72eafe8f9bdc4f335c7ed3b10822a391cef"
      },
      {
        "resource-id": "ane-props",
        "tag": "bf3c8c1819d2421c9a95a9d02af557a3"
      }
    ]
  },
  "property-map": {
    ".ane:NET1": {
      "max-reservable-bandwidth": 50000000000,
      "persistent-entity-id": "ane-props.ane:MEC1"
    },
    ".ane:NET2": {
      "max-reservable-bandwidth": 50000000000,
      "persistent-entity-id": "ane-props.ane:MEC2"
    },
    ".ane:NET3": {
      "max-reservable-bandwidth": 50000000000
    },
    ".ane:L1": {
      "max-reservable-bandwidth": 10000000000
    },
    ".ane:L2": {
      "max-reservable-bandwidth": 15000000000
    }
  }
}
--example-2
```

[¶](#section-8.4-7){.pilcrow}
:::

In certain scenarios where the traversal order is not crucial, an ALTO
server implementation may choose not to strictly follow the physical
traversal order and may even obfuscate the order intentionally to
preserve its own privacy or conform to its own policies. For example, an
ALTO server may choose to aggregate NET1 and L1 as a new ANE with ANE
name \"AGGR1\" and aggregate NET2 and L2 as a new ANE with ANE name
\"AGGR2\". The \"max-reservable-bandwidth\" property of \"AGGR1\" takes
the value of L1, which is smaller than that of NET1, and the
\"persistent-entity-id\" property of \"AGGR1\" takes the value of NET1.
The properties of \"AGGR2\" are computed in a similar way; the
obfuscated response is as shown below. Note that the obfuscation of Path
Vector responses is implementation specific and is out of scope for this
document. Developers may refer to [Section 11](#Security){.xref} for
further references.[¶](#section-8.4-8){.pilcrow}

::: {#section-8.4-9}
``` {.breakable .lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 1333
Content-Type: multipart/related; boundary=example-2;
              type=application/alto-endpointcost+json

--example-2
Content-ID: <ecs@alto.example.com>
Content-Type: application/alto-endpointcost+json

{
  "meta": {
    "vtags": {
      "resource-id": "endpoint-cost-pv.ecs",
      "tag": "bb975862fbe3422abf4dae386b132c1d"
    },
    "cost-type": {
      "cost-mode": "array",
      "cost-metric": "ane-path"
    }
  },
  "endpoint-cost-map": {
    "ipv4:192.0.2.34": {
      "ipv4:192.0.2.2":   [ "NET3", "AGGR1" ],
      "ipv4:192.0.2.50":   [ "NET3", "AGGR2" ]
    },
    "ipv6:2001:db8::3:1": {
      "ipv6:2001:db8::4:1": [ "NET3", "AGGR2" ]
    }
  }
}
--example-2
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "endpoint-cost-pv.ecs",
        "tag": "bb975862fbe3422abf4dae386b132c1d"
      },
      {
        "resource-id": "ane-props",
        "tag": "bf3c8c1819d2421c9a95a9d02af557a3"
      }
    ]
  },
  "property-map": {
    ".ane:AGGR1": {
      "max-reservable-bandwidth": 10000000000,
      "persistent-entity-id": "ane-props.ane:MEC1"
    },
    ".ane:AGGR2": {
      "max-reservable-bandwidth": 15000000000,
      "persistent-entity-id": "ane-props.ane:MEC2"
    },
    ".ane:NET3": {
      "max-reservable-bandwidth": 50000000000
    }
  }
}
--example-2
```

[¶](#section-8.4-9){.pilcrow}
:::
:::
:::

::: {#example-sse}
::: {#section-8.5 .section}
### [8.5.](#section-8.5){.section-number .selfRef} [Incremental Updates](#name-incremental-updates){.section-name .selfRef} {#name-incremental-updates}

In this example, an ALTO client subscribes to the incremental update for
the multipart Endpoint Cost Service resource
\"endpoint-cost-pv\".[¶](#section-8.5-1){.pilcrow}

::: {#section-8.5-2}
``` {.lang-http-message .sourcecode}
POST /updates/pv HTTP/1.1
Host: alto.example.com
Accept: text/event-stream
Content-Type: application/alto-updatestreamparams+json
Content-Length: 120

{
  "add": {
    "ecspvsub1": {
      "resource-id": "endpoint-cost-pv",
      "input": <ecs-input>
    }
  }
}
```

[¶](#section-8.5-2){.pilcrow}
:::

Based on the server-side process defined in
\[[RFC8895](#RFC8895){.xref}\], the ALTO server will send the
\"control-uri\" first, using a Server-Sent Event (SSE) followed by the
full response of the multipart message.[¶](#section-8.5-3){.pilcrow}

::: {#section-8.5-4}
``` {.lang-http-message .sourcecode}
HTTP/1.1 200 OK
Connection: keep-alive
Content-Type: text/event-stream

event: application/alto-updatestreamcontrol+json
data: {"control-uri": "https://alto.example.com/updates/streams/123"}

event: multipart/related;boundary=example-3;
       type=application/alto-endpointcost+json,ecspvsub1
data: --example-3
data: Content-ID: <ecsmap@alto.example.com>
data: Content-Type: application/alto-endpointcost+json
data:
data: <endpoint-cost-map-entry>
data: --example-3
data: Content-ID: <propmap@alto.example.com>
data: Content-Type: application/alto-propmap+json
data:
data: <property-map-entry>
data: --example-3--
```

[¶](#section-8.5-4){.pilcrow}
:::

When the contents change, the ALTO server will publish the updates for
each node in this tree separately, based on [Section
6.7.3](https://www.rfc-editor.org/rfc/rfc8895#section-6.7.3){.relref} of
\[[RFC8895](#RFC8895){.xref}\].[¶](#section-8.5-5){.pilcrow}

::: {#section-8.5-6}
``` {.lang-http-message .sourcecode}
event: application/merge-patch+json,
   ecspvsub1.ecsmap@alto.example.com
data: <Merge patch for endpoint-cost-map-update>

event: application/merge-patch+json,
   ecspvsub1.propmap@alto.example.com
data: <Merge patch for property-map-update>
```

[¶](#section-8.5-6){.pilcrow}
:::
:::
:::

::: {#multi-cost}
::: {#section-8.6 .section}
### [8.6.](#section-8.6){.section-number .selfRef} [Multi-Cost](#name-multi-cost){.section-name .selfRef} {#name-multi-cost}

The following examples demonstrate the request to the \"multicost-pv\"
resource and the corresponding response.[¶](#section-8.6-1){.pilcrow}

The request asks for two cost types: the first is the Path Vector cost
type, and the second is a numerical routing cost. It also queries the
maximum reservable bandwidth ANE property and the persistent entity ID
property for two IPv4 source and destination pairs (192.0.2.34 -\>
192.0.2.2 and 192.0.2.34 -\> 192.0.2.50) and one IPv6 source and
destination pair (2001:db8::3:1 -\>
2001:db8::4:1).[¶](#section-8.6-2){.pilcrow}

The response consists of two parts:[¶](#section-8.6-3){.pilcrow}

-   [The first part returns a JSONArray that contains two JSONValue
    entries for each requested source and destination pair: the first
    JSONValue is a JSONArray of ANENames, which is the value of the Path
    Vector cost type; and the second JSONValue is a JSONNumber, which is
    the value of the routing
    cost.[¶](#section-8.6-4.1){.pilcrow}]{#section-8.6-4.1}
-   [The second part contains a property map that maps the ANEs to their
    requested
    properties.[¶](#section-8.6-4.2){.pilcrow}]{#section-8.6-4.2}

::: {#section-8.6-5}
``` {.lang-http-message .sourcecode}
POST /endpointcost/mcpv HTTP/1.1
Host: alto.example.com
Accept: multipart/related;
        type=application/alto-endpointcost+json,
        application/alto-error+json
Content-Length: 454
Content-Type: application/alto-endpointcostparams+json

{
  "multi-cost-types": [
    { "cost-mode": "array", "cost-metric": "ane-path" },
    { "cost-mode": "numerical", "cost-metric": "routingcost" }
  ],
  "endpoints": {
    "srcs": [
      "ipv4:192.0.2.34",
      "ipv6:2001:db8::3:1"
    ],
    "dsts": [
      "ipv4:192.0.2.2",
      "ipv4:192.0.2.50",
      "ipv6:2001:db8::4:1"
    ]
  },
  "ane-property-names": [
    "max-reservable-bandwidth",
    "persistent-entity-id"
  ]
}
```

[¶](#section-8.6-5){.pilcrow}
:::

::: {#section-8.6-6}
``` {.breakable .lang-http-message .sourcecode}
HTTP/1.1 200 OK
Content-Length: 1419
Content-Type: multipart/related; boundary=example-4;
              type=application/alto-endpointcost+json

--example-4
Content-ID: <ecs@alto.example.com>
Content-Type: application/alto-endpointcost+json

{
  "meta": {
    "vtags": {
      "resource-id": "endpoint-cost-pv.ecs",
      "tag": "84a4f9c14f9341f0983e3e5f43a371c8"
    },
    "multi-cost-types": [
      { "cost-mode": "array", "cost-metric": "ane-path" },
      { "cost-mode": "numerical", "cost-metric": "routingcost" }
    ]
  },
  "endpoint-cost-map": {
    "ipv4:192.0.2.34": {
      "ipv4:192.0.2.2":   [[ "NET3", "AGGR1" ], 3],
      "ipv4:192.0.2.50":   [[ "NET3", "AGGR2" ], 2]
    },
    "ipv6:2001:db8::3:1": {
      "ipv6:2001:db8::4:1": [[ "NET3", "AGGR2" ], 2]
    }
  }
}
--example-4
Content-ID: <propmap@alto.example.com>
Content-Type: application/alto-propmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "endpoint-cost-pv.ecs",
        "tag": "84a4f9c14f9341f0983e3e5f43a371c8"
      },
      {
        "resource-id": "ane-props",
        "tag": "be157afa031443a187b60bb80a86b233"
      }
    ]
  },
  "property-map": {
    ".ane:AGGR1": {
      "max-reservable-bandwidth": 10000000000,
      "persistent-entity-id": "ane-props.ane:MEC1"
    },
    ".ane:AGGR2": {
      "max-reservable-bandwidth": 15000000000,
      "persistent-entity-id": "ane-props.ane:MEC2"
    },
    ".ane:NET3": {
      "max-reservable-bandwidth": 50000000000
    }
  }
}
--example-4
```

[¶](#section-8.6-6){.pilcrow}
:::
:::
:::
:::
:::

::: {#Compatibility}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Compatibility with Other ALTO Extensions](#name-compatibility-with-other-al){.section-name .selfRef} {#name-compatibility-with-other-al}

::: {#compatibility-with-legacy-alto-clientsservers}
::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Compatibility with Legacy ALTO Clients/Servers](#name-compatibility-with-legacy-a){.section-name .selfRef} {#name-compatibility-with-legacy-a}

The multipart filtered cost map resource and the multipart Endpoint Cost
Service resource have no backward-compatibility issues with legacy ALTO
clients and servers. Although these two types of resources reuse the
media types defined in the base ALTO Protocol for the \"Accept\" input
parameters, they have different media types for responses. If the ALTO
server provides these two types of resources but the ALTO client does
not support them, the ALTO client will ignore the resources without
incurring any incompatibility problems.[¶](#section-9.1-1){.pilcrow}
:::
:::

::: {#compatibility-with-multi-cost-extension}
::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Compatibility with Multi-Cost Extension](#name-compatibility-with-multi-co){.section-name .selfRef} {#name-compatibility-with-multi-co}

The extension defined in this document is compatible with the multi-cost
extension \[[RFC8189](#RFC8189){.xref}\]. Such a resource has a media
type of either \"multipart/related; type=application/alto-costmap+json\"
or \"multipart/related; type=application/alto-endpointcost+json\". Its
\"cost-constraints\" field must be either \"false\" or not present, and
the Path Vector cost type must be present in the \"cost-type-names\"
capability field but must not be present in the
\"testable-cost-type-names\" field, as specified in
Sections [7.2.4](#pvcm-cap){.xref} and
[7.3.4](#pvecs-cap){.xref}.[¶](#section-9.2-1){.pilcrow}
:::
:::

::: {#compatibility-with-incremental-update}
::: {#section-9.3 .section}
### [9.3.](#section-9.3){.section-number .selfRef} [Compatibility with Incremental Update Extension](#name-compatibility-with-incremen){.section-name .selfRef} {#name-compatibility-with-incremen}

This extension is compatible with the incremental update extension
\[[RFC8895](#RFC8895){.xref}\]. ALTO clients and servers [MUST]{.bcp14}
follow the specifications given in
Sections [5.2](https://www.rfc-editor.org/rfc/rfc8895#section-5.2){.relref}
and
[6.7.3](https://www.rfc-editor.org/rfc/rfc8895#section-6.7.3){.relref}
of \[[RFC8895](#RFC8895){.xref}\] to support incremental updates for a
Path Vector resource.[¶](#section-9.3-1){.pilcrow}
:::
:::

::: {#compatibility-with-cost-calendar}
::: {#section-9.4 .section}
### [9.4.](#section-9.4){.section-number .selfRef} [Compatibility with Cost Calendar Extension](#name-compatibility-with-cost-cal){.section-name .selfRef} {#name-compatibility-with-cost-cal}

The extension specified in this document is compatible with the Cost
Calendar extension \[[RFC8896](#RFC8896){.xref}\]. When used together
with the Cost Calendar extension, the cost value between a source and a
destination is an array of Path Vectors, where the k-th Path Vector
refers to the abstract network paths traversed in the k-th time interval
by traffic from the source to the
destination.[¶](#section-9.4-1){.pilcrow}

When used with time-varying properties, e.g., maximum reservable
bandwidth, a property of a single ANE may also have different values in
different time intervals. In this case, if such an ANE has different
property values in two time intervals, it [MUST]{.bcp14} be treated as
two different ANEs, i.e., with different entity identifiers. However, if
it has the same property values in two time intervals, it [MAY]{.bcp14}
use the same identifier.[¶](#section-9.4-2){.pilcrow}

This rule allows the Path Vector extension to represent both changes of
ANEs and changes of the ANEs\' properties in a uniform way. The Path
Vector part is calendared in a compatible way, and the property map part
is not affected by the Cost Calendar
extension.[¶](#section-9.4-3){.pilcrow}

The two extensions combined together can provide the historical network
correlation information for a set of source and destination pairs. A
network broker or client may use this information to derive other
resource requirements such as Time-Block-Maximum Bandwidth,
Bandwidth-Sliding-Window, and Time-Bandwidth-Product (TBP) (see
\[[SENSE](#SENSE){.xref}\] for details).[¶](#section-9.4-4){.pilcrow}
:::
:::
:::
:::

::: {#SecDisc}
::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [General Discussion](#name-general-discussion){.section-name .selfRef} {#name-general-discussion}

::: {#constraint-tests-for-general-cost-types}
::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Constraint Tests for General Cost Types](#name-constraint-tests-for-genera){.section-name .selfRef} {#name-constraint-tests-for-genera}

The constraint test is a simple approach for querying the data. It
allows users to filter query results by specifying some boolean tests.
This approach is already used in the ALTO Protocol. ALTO clients are
permitted to specify either the \"constraints\" test
\[[RFC7285](#RFC7285){.xref}\] \[[RFC8189](#RFC8189){.xref}\] or the
\"or-constraints\" test \[[RFC8189](#RFC8189){.xref}\] to better filter
the results.[¶](#section-10.1-1){.pilcrow}

However, the current syntax can only be used to test scalar cost types
and cannot easily express constraints on complex cost types, e.g., the
Path Vector cost type defined in this
document.[¶](#section-10.1-2){.pilcrow}

In practice, developing a bespoke language for general-purpose boolean
tests can be a complex undertaking, and it is conceivable that such
implementations already exist (the authors have not done an exhaustive
search to determine whether such implementations exist). One avenue for
developing such a language may be to explore extending current query
languages like XQuery \[[XQuery](#XQuery){.xref}\] or JSONiq
\[[JSONiq](#JSONiq){.xref}\] and integrating these with
ALTO.[¶](#section-10.1-3){.pilcrow}

Filtering the Path Vector results or developing a more sophisticated
filtering mechanism is beyond the scope of this
document.[¶](#section-10.1-4){.pilcrow}
:::
:::

::: {#general-multi-resource-query}
::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [General Multi-Resource Query](#name-general-multi-resource-quer){.section-name .selfRef} {#name-general-multi-resource-quer}

Querying multiple ALTO information resources continuously is a general
requirement. Enabling such a capability, however, must address general
issues like efficiency and consistency. The incremental update extension
\[[RFC8895](#RFC8895){.xref}\] supports submitting multiple queries in a
single request and allows flexible control over the queries. However, it
does not cover the case introduced in this document where multiple
resources are needed for a single request.[¶](#section-10.2-1){.pilcrow}

The extension specified in this document gives an example of using a
multipart message to encode the responses from two specific ALTO
information resources: a filtered cost map or an Endpoint Cost Service,
and a property map.  By packing multiple resources in a single response,
the implication is that servers may proactively push related information
resources to clients.[¶](#section-10.2-2){.pilcrow}

Thus, it is worth looking into extending the SSE mechanism as used in
the incremental update extension \[[RFC8895](#RFC8895){.xref}\]; or
upgrading to HTTP/2 \[[RFC9113](#RFC9113){.xref}\] and HTTP/3
\[[RFC9114](#RFC9114){.xref}\], which provides the ability to multiplex
queries and to allow servers to proactively send related information
resources.[¶](#section-10.2-3){.pilcrow}

Defining a general multi-resource query mechanism is out of scope for
this document.[¶](#section-10.2-4){.pilcrow}
:::
:::
:::
:::

::: {#Security}
::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This document is an extension of the base ALTO Protocol, so the security
considerations provided for the base ALTO Protocol
\[[RFC7285](#RFC7285){.xref}\] fully apply when this extension is
provided by an ALTO server.[¶](#section-11-1){.pilcrow}

The Path Vector extension requires additional scrutiny of three security
considerations discussed in the base protocol: confidentiality of ALTO
information ([Section
15.3](https://www.rfc-editor.org/rfc/rfc7285#section-15.3){.relref} of
\[[RFC7285](#RFC7285){.xref}\]), potential undesirable guidance from
authenticated ALTO information ([Section
15.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]), and availability of ALTO services
([Section
15.5](https://www.rfc-editor.org/rfc/rfc7285#section-15.5){.relref} of
\[[RFC7285](#RFC7285){.xref}\]).[¶](#section-11-2){.pilcrow}

For confidentiality of ALTO information, a network operator should be
aware that this extension may introduce a new risk: the Path Vector
information, when used together with sensitive ANE properties such as
capacities of bottleneck links, may make network attacks easier. For
example, as the Path Vector information may reveal more fine-grained
internal network structures than the base protocol, an attacker may
identify the bottleneck link or links and start a distributed
denial-of-service (DDoS) attack involving minimal flows, triggering
in-network congestion. Given the potential risk of leaking sensitive
information, the Path Vector extension is mainly applicable in scenarios
where 1) the ANE structures and ANE properties do not impose security
risks on the ALTO service provider (e.g., they do not carry sensitive
information) or 2) the ALTO server and client have established a
reliable trust relationship (e.g., they operate in the same
administrative domain or are managed by business partners with legal
contracts).[¶](#section-11-3){.pilcrow}

Three risk types are identified in [Section
15.3.1](https://www.rfc-editor.org/rfc/rfc7285#section-15.3.1){.relref}
of \[[RFC7285](#RFC7285){.xref}\]:[¶](#section-11-4){.pilcrow}

[]{.break}

\(1\)
:   excess disclosure of the ALTO service provider\'s data to an
    unauthorized ALTO client,[¶](#section-11-5.1){.pilcrow}
:   

\(2\)
:   disclosure of the ALTO service provider\'s data (e.g., network
    topology information or endpoint addresses) to an unauthorized third
    party, and[¶](#section-11-5.2){.pilcrow}
:   

\(3\)
:   excess retrieval of the ALTO service provider\'s data by
    collaborating ALTO clients.[¶](#section-11-5.3){.pilcrow}
:   

To mitigate these risks, an ALTO server [MUST]{.bcp14} follow the
guidelines in [Section
15.3.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.3.2){.relref}
of \[[RFC7285](#RFC7285){.xref}\]. Furthermore, an ALTO server
[MUST]{.bcp14} follow the following additional protections strategies
for risk types (1) and (3).[¶](#section-11-6){.pilcrow}

For risk type (1), an ALTO server [MUST]{.bcp14} use the authentication
methods specified in [Section
15.3.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.3.2){.relref}
of \[[RFC7285](#RFC7285){.xref}\] to authenticate the identity of an
ALTO client and apply access control techniques to restrict the
retrieval of sensitive Path Vector information by unprivileged ALTO
clients. For settings where the ALTO server and client are not in the
same trust domain, the ALTO server should reach agreements with the ALTO
client regarding protection of confidentiality before granting access to
Path Vector services with sensitive information. Such agreements may
include legal contracts or Digital Rights Management (DRM) techniques.
Otherwise, the ALTO server [MUST NOT]{.bcp14} offer Path Vector services
that carry sensitive information to the clients, unless the potential
risks are fully assessed and mitigated.[¶](#section-11-7){.pilcrow}

For risk type (3), an ALTO service provider must be aware that
persistent ANEs may be used as \"landmarks\" in collaborative
inferences. Thus, they should only be used when exposing public service
access points (e.g., API gateways, CDN Interconnections) and/or when the
granularity is coarse grained (e.g., when an ANE represents an AS, a
data center, or a WAN). Otherwise, an ALTO server [MUST]{.bcp14} use
dynamic mappings from ephemeral ANE names to underlying physical
entities. Specifically, for the same physical entity, an ALTO server
[SHOULD]{.bcp14} assign a different ephemeral ANE name when the entity
appears in the responses to different clients or even for different
requests from the same client. A [RECOMMENDED]{.bcp14} assignment
strategy is to generate ANE names from random
numbers.[¶](#section-11-8){.pilcrow}

Further, to protect the network topology from graph reconstruction
(e.g., through isomorphic graph identification
\[[BONDY](#BONDY){.xref}\]), the ALTO server [SHOULD]{.bcp14} consider
protection mechanisms to reduce information exposure or obfuscate the
real information. When doing so, the ALTO server must be aware that
information reduction/obfuscation may lead to a potential risk of
undesirable guidance from authenticated ALTO information ([Section
15.2](https://www.rfc-editor.org/rfc/rfc7285#section-15.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]).[¶](#section-11-9){.pilcrow}

Thus, implementations of ALTO servers involving reduction or obfuscation
of the Path Vector information [SHOULD]{.bcp14} consider
reduction/obfuscation mechanisms that can preserve the integrity of ALTO
information \-- for example, by using minimal feasible region
compression algorithms \[[NOVA](#NOVA){.xref}\] or obfuscation protocols
\[[RESA](#RESA){.xref}\] \[[MERCATOR](#MERCATOR){.xref}\]. However,
these obfuscation methods are experimental, and their practical
applicability to the generic capability provided by this extension has
not been fully assessed. The ALTO server [MUST]{.bcp14} carefully verify
that the deployment scenario satisfies the security assumptions of these
methods before applying them to protect Path Vector services with
sensitive network information.[¶](#section-11-10){.pilcrow}

For availability of ALTO services, an ALTO server should be cognizant
that using a Path Vector extension might introduce a new risk: frequent
requests for Path Vectors might consume intolerable amounts of
server-side computation and storage. This behavior can break the ALTO
server. For example, if an ALTO server implementation dynamically
computes the Path Vectors for each request, the service that provides
the Path Vectors may become an entry point for denial-of-service attacks
on the availability of an ALTO server.[¶](#section-11-11){.pilcrow}

To mitigate this risk, an ALTO server may consider using such
optimizations as precomputation-and-projection mechanisms
\[[MERCATOR](#MERCATOR){.xref}\] to reduce the overhead for processing
each query. An ALTO server may also protect itself from malicious
clients by monitoring client behavior and stopping service to clients
that exhibit suspicious behavior (e.g., sending requests at a high
frequency).[¶](#section-11-12){.pilcrow}

The ALTO service providers must be aware that providing incremental
updates of \"max-reservable-bandwidth\" may provide information about
other consumers of the network. For example, a change in value may
indicate that one or more reservations have been made or changed. To
mitigate this risk, an ALTO server can batch the updates and/or add a
random delay before publishing the updates.[¶](#section-11-13){.pilcrow}
:::
:::

::: {#IANA}
::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

::: {#alto-cost-metrics-registry}
::: {#section-12.1 .section}
### [12.1.](#section-12.1){.section-number .selfRef} [\"ALTO Cost Metrics\" Registry](#name-alto-cost-metrics-registry){.section-name .selfRef} {#name-alto-cost-metrics-registry}

This document registers a new entry in the \"ALTO Cost Metrics\"
registry, per [Section
14.2](https://www.rfc-editor.org/rfc/rfc7285#section-14.2){.relref} of
\[[RFC7285](#RFC7285){.xref}\]. The new entry is as shown below in
[Table 1](#tbl-cost-metric){.xref}.[¶](#section-12.1-1){.pilcrow}

[]{#name-alto-cost-metrics-registry-2}

::: {#tbl-cost-metric}
  Identifier   Intended Semantics                         Reference
  ------------ ------------------------------------------ -----------
  ane-path     See [Section 6.5.1](#metric-spec){.xref}   RFC 9275

  : [Table 1](#table-1){.selfRef}: [\"ALTO Cost Metrics\"
  Registry](#name-alto-cost-metrics-registry-2){.selfRef}
:::
:::
:::

::: {#alto-cost-modes-registry}
::: {#section-12.2 .section}
### [12.2.](#section-12.2){.section-number .selfRef} [\"ALTO Cost Modes\" Registry](#name-alto-cost-modes-registry){.section-name .selfRef} {#name-alto-cost-modes-registry}

This document registers a new entry in the \"ALTO Cost Modes\" registry,
per [Section
5](https://www.rfc-editor.org/rfc/rfc9274#section-5){.relref} of
\[[RFC9274](#RFC9274){.xref}\]. The new entry is as shown below in
[Table 2](#tbl-cost-mode){.xref}.[¶](#section-12.2-1){.pilcrow}

[]{#name-alto-cost-modes-registry-2}

::: {#tbl-cost-mode}
  Identifier   Description                                     Intended Semantics                       Reference
  ------------ ----------------------------------------------- ---------------------------------------- -----------
  array        Indicates that the cost value is a JSON array   See [Section 6.5.2](#mode-spec){.xref}   RFC 9275

  : [Table 2](#table-2){.selfRef}: [\"ALTO Cost Modes\"
  Registry](#name-alto-cost-modes-registry-2){.selfRef}
:::
:::
:::

::: {#alto-entity-domain-types-registry}
::: {#section-12.3 .section}
### [12.3.](#section-12.3){.section-number .selfRef} [\"ALTO Entity Domain Types\" Registry](#name-alto-entity-domain-types-re){.section-name .selfRef} {#name-alto-entity-domain-types-re}

This document registers a new entry in the \"ALTO Entity Domain Types\"
registry, per [Section
12.3](https://www.rfc-editor.org/rfc/rfc9240#section-12.3){.relref} of
\[[RFC9240](#RFC9240){.xref}\]. The new entry is as shown below in
[Table 3](#tbl-entity-domain){.xref}.[¶](#section-12.3-1){.pilcrow}

[]{#name-alto-entity-domain-types-reg}

::: {#tbl-entity-domain}
  Identifier   Entity Identifier Encoding                    Hierarchy and Inheritance   Media Type of Defining Resource   Mapping to ALTO Address Type
  ------------ --------------------------------------------- --------------------------- --------------------------------- ------------------------------
  ane          See [Section 6.2.2](#entity-address){.xref}   None                        application/alto-propmap+json     false

  : [Table 3](#table-3){.selfRef}: [\"ALTO Entity Domain Types\"
  Registry](#name-alto-entity-domain-types-reg){.selfRef}
:::

[]{.break}

Identifier:

:   See [Section
    6.2.1](#domain-type){.xref}.[¶](#section-12.3-3.2.1){.pilcrow}

:   

Entity Identifier Encoding:

:   See [Section
    6.2.2](#entity-address){.xref}.[¶](#section-12.3-3.4.1){.pilcrow}

:   

Hierarchy:

:   None[¶](#section-12.3-3.6.1){.pilcrow}

:   

Inheritance:

:   None[¶](#section-12.3-3.8.1){.pilcrow}

:   

Media Type of Defining Resource:

:   See [Section
    6.2.4](#domain-defining){.xref}.[¶](#section-12.3-3.10.1){.pilcrow}

:   

Mapping to ALTO Address Type:

:   This entity type does not map to an ALTO address
    type.[¶](#section-12.3-3.12.1){.pilcrow}

:   

Security Considerations:

:   In some usage scenarios, ANE addresses carried in ALTO Protocol
    messages may reveal information about an ALTO client or an ALTO
    service provider. If a naming schema is used to generate ANE names,
    either used privately or standardized by a future extension, how (or
    if) the naming schema relates to private information and network
    proximity must be explained to ALTO implementers and service
    providers.[¶](#section-12.3-3.14.1){.pilcrow}

:   
:::
:::

::: {#alto-entity-property-types-registry}
::: {#section-12.4 .section}
### [12.4.](#section-12.4){.section-number .selfRef} [\"ALTO Entity Property Types\" Registry](#name-alto-entity-property-types-){.section-name .selfRef} {#name-alto-entity-property-types-}

Two initial entries \-- \"max-reservable-bandwidth\" and
\"persistent-entity-id\" \-- are registered for the ALTO domain \"ane\"
in the \"ALTO Entity Property Types\" registry, per [Section
12.4](https://www.rfc-editor.org/rfc/rfc9240#section-12.4){.relref} of
\[[RFC9240](#RFC9240){.xref}\]. The two new entries are shown below in
[Table 4](#tbl-prop-type-reg){.xref}, and their details can be found in
Sections [12.4.1](#mrb-iana){.xref} and [12.4.2](#pei-iana){.xref} of
this document.[¶](#section-12.4-1){.pilcrow}

[]{#name-initial-entries-for-the-ane}

::: {#tbl-prop-type-reg}
  Identifier                 Intended Semantics                                  Media Type of Defining Resource
  -------------------------- --------------------------------------------------- ---------------------------------
  max-reservable-bandwidth   See [Section 6.4.1](#maxresbw){.xref}               application/alto-propmap+json
  persistent-entity-id       See [Section 6.4.2](#persistent-entity-id){.xref}   application/alto-propmap+json

  : [Table 4](#table-4){.selfRef}: [Initial Entries for the \"ane\"
  Domain in the \"ALTO Entity Property Types\"
  Registry](#name-initial-entries-for-the-ane){.selfRef}
:::

::: {#mrb-iana}
::: {#section-12.4.1 .section}
#### [12.4.1.](#section-12.4.1){.section-number .selfRef} [New ANE Property Type: Maximum Reservable Bandwidth](#name-new-ane-property-type-maxim){.section-name .selfRef} {#name-new-ane-property-type-maxim}

[]{.break}

Identifier:

:   \"max-reservable-bandwidth\"[¶](#section-12.4.1-1.2.1){.pilcrow}

:   

Intended Semantics:

:   See [Section
    6.4.1](#maxresbw){.xref}.[¶](#section-12.4.1-1.4.1){.pilcrow}

:   

Media Type of Defining Resource:

:   application/alto-propmap+json[¶](#section-12.4.1-1.6.1){.pilcrow}

:   

Security Considerations:

:   To make better choices regarding bandwidth reservation, this
    property is essential for applications such as large-scale data
    transfers or an overlay network interconnection. It may reveal the
    bandwidth usage of the underlying network and can potentially be
    leveraged to reduce the cost of conducting denial-of-service
    attacks. Thus, the ALTO server [MUST]{.bcp14} consider such
    protection mechanisms as providing the information to authorized
    clients only and applying information reduction and obfuscation as
    discussed in [Section
    11](#Security){.xref}.[¶](#section-12.4.1-1.8.1){.pilcrow}

:   
:::
:::

::: {#pei-iana}
::: {#section-12.4.2 .section}
#### [12.4.2.](#section-12.4.2){.section-number .selfRef} [New ANE Property Type: Persistent Entity ID](#name-new-ane-property-type-persi){.section-name .selfRef} {#name-new-ane-property-type-persi}

[]{.break}

Identifier:

:   \"persistent-entity-id\"[¶](#section-12.4.2-1.2.1){.pilcrow}

:   

Intended Semantics:

:   See [Section
    6.4.2](#persistent-entity-id){.xref}.[¶](#section-12.4.2-1.4.1){.pilcrow}

:   

Media Type of Defining Resource:

:   application/alto-propmap+json[¶](#section-12.4.2-1.6.1){.pilcrow}

:   

Security Considerations:

:   This property is useful when an ALTO server wants to selectively
    expose certain service points whose detailed properties can be
    further queried by applications. As mentioned in [Section
    12.3.2](https://www.rfc-editor.org/rfc/rfc9240#section-12.3.2){.relref}
    of \[[RFC9240](#RFC9240){.xref}\], the entity IDs may reveal
    sensitive information about the underlying network. An ALTO server
    should follow the security considerations provided in [Section
    11](https://www.rfc-editor.org/rfc/rfc9240#section-11){.relref} of
    \[[RFC9240](#RFC9240){.xref}\].[¶](#section-12.4.2-1.8.1){.pilcrow}

:   
:::
:::
:::
:::
:::
:::

::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-13.1 .section}
### [13.1.](#section-13.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2046\]
:   [Freed, N.]{.refAuthor} and [N. Borenstein]{.refAuthor},
    [\"Multipurpose Internet Mail Extensions (MIME) Part Two: Media
    Types\"]{.refTitle}, [RFC 2046]{.seriesInfo}, [DOI
    10.17487/RFC2046]{.seriesInfo}, November 1996,
    \<<https://www.rfc-editor.org/info/rfc2046>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2387\]
:   [Levinson, E.]{.refAuthor}, [\"The MIME Multipart/Related
    Content-type\"]{.refTitle}, [RFC 2387]{.seriesInfo}, [DOI
    10.17487/RFC2387]{.seriesInfo}, August 1998,
    \<<https://www.rfc-editor.org/info/rfc2387>\>.
:   

\[RFC5322\]
:   [Resnick, P., Ed.]{.refAuthor}, [\"Internet Message
    Format\"]{.refTitle}, [RFC 5322]{.seriesInfo}, [DOI
    10.17487/RFC5322]{.seriesInfo}, October 2008,
    \<<https://www.rfc-editor.org/info/rfc5322>\>.
:   

\[RFC7285\]
:   [Alimi, R., Ed.]{.refAuthor}, [Penno, R., Ed.]{.refAuthor}, [Yang,
    Y., Ed.]{.refAuthor}, [Kiesel, S.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Roome, W.]{.refAuthor},
    [Shalunov, S.]{.refAuthor}, and [R. Woundy]{.refAuthor},
    [\"Application-Layer Traffic Optimization (ALTO)
    Protocol\"]{.refTitle}, [RFC 7285]{.seriesInfo}, [DOI
    10.17487/RFC7285]{.seriesInfo}, September 2014,
    \<<https://www.rfc-editor.org/info/rfc7285>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8189\]
:   [Randriamasy, S.]{.refAuthor}, [Roome, W.]{.refAuthor}, and [N.
    Schwan]{.refAuthor}, [\"Multi-Cost Application-Layer Traffic
    Optimization (ALTO)\"]{.refTitle}, [RFC 8189]{.seriesInfo}, [DOI
    10.17487/RFC8189]{.seriesInfo}, October 2017,
    \<<https://www.rfc-editor.org/info/rfc8189>\>.
:   

\[RFC8895\]
:   [Roome, W.]{.refAuthor} and [Y. Yang]{.refAuthor},
    [\"Application-Layer Traffic Optimization (ALTO) Incremental Updates
    Using Server-Sent Events (SSE)\"]{.refTitle}, [RFC
    8895]{.seriesInfo}, [DOI 10.17487/RFC8895]{.seriesInfo}, November
    2020, \<<https://www.rfc-editor.org/info/rfc8895>\>.
:   

\[RFC8896\]
:   [Randriamasy, S.]{.refAuthor}, [Yang, R.]{.refAuthor},
    [Wu, Q.]{.refAuthor}, [Deng, L.]{.refAuthor}, and [N.
    Schwan]{.refAuthor}, [\"Application-Layer Traffic Optimization
    (ALTO) Cost Calendar\"]{.refTitle}, [RFC 8896]{.seriesInfo}, [DOI
    10.17487/RFC8896]{.seriesInfo}, November 2020,
    \<<https://www.rfc-editor.org/info/rfc8896>\>.
:   

\[RFC9240\]
:   [Roome, W.]{.refAuthor}, [Randriamasy, S.]{.refAuthor},
    [Yang, Y.]{.refAuthor}, [Zhang, J.]{.refAuthor}, and [K.
    Gao]{.refAuthor}, [\"An Extension for Application-Layer Traffic
    Optimization (ALTO): Entity Property Maps\"]{.refTitle}, [RFC
    9240]{.seriesInfo}, [DOI 10.17487/RFC9240]{.seriesInfo}, July 2022,
    \<<https://www.rfc-editor.org/info/rfc9240>\>.
:   

\[RFC9274\]
:   [Boucadair, M.]{.refAuthor} and [Q. Wu]{.refAuthor}, [\"A Cost Mode
    Registry for the Application-Layer Traffic Optimization (ALTO)
    Protocol\"]{.refTitle}, [RFC 9274]{.seriesInfo}, [DOI
    10.17487/RFC9274]{.seriesInfo}, July 2022,
    \<<https://www.rfc-editor.org/info/rfc9274>\>.
:   
:::

::: {#section-13.2 .section}
### [13.2.](#section-13.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[ALTO-PERF-METRICS\]
:   [Wu, Q.]{.refAuthor}, [Yang, Y.]{.refAuthor}, [Lee, Y.]{.refAuthor},
    [Dhody, D.]{.refAuthor}, [Randriamasy, S.]{.refAuthor}, and [L.
    Contreras]{.refAuthor}, [\"ALTO Performance Cost
    Metrics\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-ietf-alto-performance-metrics-28]{.seriesInfo}, 21 March 2022,
    \<<https://datatracker.ietf.org/doc/html/draft-ietf-alto-performance-metrics-28>\>.
:   

\[BONDY\]
:   [Bondy, J.A.]{.refAuthor} and [R.L. Hemminger]{.refAuthor}, [\"Graph
    reconstruction\--a survey\"]{.refTitle}, [Journal of Graph Theory,
    Volume 1, Issue 3, pp. 227-268]{.refContent}, [DOI
    10.1002/jgt.3190010306]{.seriesInfo}, 1977,
    \<<https://onlinelibrary.wiley.com/doi/10.1002/jgt.3190010306>\>.
:   

\[BOXOPT\]
:   [Xiang, Q.]{.refAuthor}, [Yu, H.]{.refAuthor},
    [Aspnes, J.]{.refAuthor}, [Le, F.]{.refAuthor},
    [Kong, L.]{.refAuthor}, and [Y.R. Yang]{.refAuthor}, [\"Optimizing
    in the Dark: Learning an Optimal Solution through a Simple Request
    Interface\"]{.refTitle}, [ Proceedings of the AAAI Conference on
    Artificial Intelligence 33, 1674-1681]{.refContent}, [DOI
    10.1609/aaai.v33i01.33011674]{.seriesInfo}, July 2019,
    \<<https://ojs.aaai.org//index.php/AAAI/article/view/3984>\>.
:   

\[CLARINET\]
:   [Viswanathan, R.]{.refAuthor}, [Ananthanarayanan, G.]{.refAuthor},
    and [A. Akella]{.refAuthor}, [\"CLARINET: WAN-aware optimization for
    analytics queries\"]{.refTitle}, [ Proceedings of the 12th USENIX
    conference on Operating Systems Design and Implementation
    (OSDI\'16), Savannah, GA, pp. 435-450]{.refContent}, November 2016,
    \<<https://dl.acm.org/doi/abs/10.5555/3026877.3026911>\>.
:   

\[G2\]
:   [Ros-Giralt, J.]{.refAuthor}, [Bohara, A.]{.refAuthor},
    [Yellamraju, S.]{.refAuthor}, [Langston, M.H.]{.refAuthor},
    [Lethin, R.]{.refAuthor}, [Jiang, Y.]{.refAuthor},
    [Tassiulas, L.]{.refAuthor}, [Li, J.]{.refAuthor},
    [Tan, Y.]{.refAuthor}, and [M. Veeraraghavan]{.refAuthor}, [\"On the
    Bottleneck Structure of Congestion-Controlled
    Networks\"]{.refTitle}, [Proceedings of the ACM on Measurement and
    Analysis of Computing Systems, Volume 3, Issue 3, pp.
    1-31]{.refContent}, [DOI 10.1145/3366707]{.seriesInfo}, December
    2019, \<<https://dl.acm.org/doi/10.1145/3366707>\>.
:   

\[HUG\]
:   [Chowdhury, M.]{.refAuthor}, [Liu, Z.]{.refAuthor},
    [Ghodsi, A.]{.refAuthor}, and [I. Stoica]{.refAuthor}, [\"HUG:
    multi-resource fairness for correlated and elastic
    demands\"]{.refTitle}, [Proceedings of the 13th USENIX Conference on
    Networked Systems Design and Implementation (NSDI\'16), Santa Clara,
    CA, pp. 407-424]{.refContent}, March 2016,
    \<<https://dl.acm.org/doi/10.5555/2930611.2930638>\>.
:   

\[INTENT-BASED-NETWORKING\]
:   [Clemm, A.]{.refAuthor}, [Ciavaglia, L.]{.refAuthor}, [Granville, L.
    Z.]{.refAuthor}, and [J. Tantsura]{.refAuthor}, [\"Intent-Based
    Networking - Concepts and Definitions\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-irtf-nmrg-ibn-concepts-definitions-09]{.seriesInfo}, 24 March
    2022,
    \<<https://datatracker.ietf.org/doc/html/draft-irtf-nmrg-ibn-concepts-definitions-09>\>.
:   

\[JSONiq\]
:   [JSONiq]{.refAuthor}, [\"The JSON Query Language\"]{.refTitle},
    2022, \<<https://www.jsoniq.org/>\>.
:   

\[MERCATOR\]
:   [Xiang, Q.]{.refAuthor}, [Zhang, J.]{.refAuthor},
    [Wang, X.]{.refAuthor}, [Liu, Y.]{.refAuthor},
    [Guok, C.]{.refAuthor}, [Le, F.]{.refAuthor},
    [MacAuley, J.]{.refAuthor}, [Newman, H.]{.refAuthor}, and [Y.R.
    Yang]{.refAuthor}, [\"Toward Fine-Grained, Privacy-Preserving,
    Efficient Multi-Domain Network Resource Discovery\"]{.refTitle},
    [IEEE/ACM, IEEE Journal on Selected Areas in Communications, Volume
    37, Issue 8, pp. 1924-1940]{.refContent}, [DOI
    10.1109/JSAC.2019.2927073]{.seriesInfo}, August 2019,
    \<<https://ieeexplore.ieee.org/document/8756056>\>.
:   

\[MOWIE\]
:   [Zhang, Y.]{.refAuthor}, [Li, G.]{.refAuthor},
    [Xiong, C.]{.refAuthor}, [Lei, Y.]{.refAuthor},
    [Huang, W.]{.refAuthor}, [Han, Y.]{.refAuthor},
    [Walid, A.]{.refAuthor}, [Yang, Y.R.]{.refAuthor}, and [Z.
    Zhang]{.refAuthor}, [\"MoWIE: Toward Systematic, Adaptive Network
    Information Exposure as an Enabling Technique for Cloud-Based
    Applications over 5G and Beyond\"]{.refTitle}, [Proceedings of the
    Workshop on Network Application Integration/CoDesign (NAI \'20),
    ACM, Virtual Event USA, pp. 20-27]{.refContent}, [DOI
    10.1145/3405672.3409489]{.seriesInfo}, August 2020,
    \<<https://dl.acm.org/doi/10.1145/3405672.3409489>\>.
:   

\[NOVA\]
:   [Gao, K.]{.refAuthor}, [Xiang, Q.]{.refAuthor},
    [Wang, X.]{.refAuthor}, [Yang, Y.R.]{.refAuthor}, and [J.
    Bi]{.refAuthor}, [\"An Objective-Driven On-Demand Network
    Abstraction for Adaptive Applications\"]{.refTitle}, [IEEE/ACM
    Transactions on Networking (TON) Vol. 27, Issue 2, pp.
    805-818]{.refContent}, [DOI 10.1109/TNET.2019.2899905]{.seriesInfo},
    April 2019, \<<https://doi.org/10.1109/TNET.2019.2899905>\>.
:   

\[RESA\]
:   [Xiang, Q.]{.refAuthor}, [Zhang, J.]{.refAuthor},
    [Wang, X.]{.refAuthor}, [Liu, Y.]{.refAuthor},
    [Guok, C.]{.refAuthor}, [Le, F.]{.refAuthor},
    [MacAuley, J.]{.refAuthor}, [Newman, H.]{.refAuthor}, and [Y.R.
    Yang]{.refAuthor}, [\"Fine-Grained, Multi-Domain Network Resource
    Abstraction as a Fundamental Primitive to Enable High-Performance,
    Collaborative Data Sciences\"]{.refTitle}, [SC18: International
    Conference for High Performance Computing, Networking, Storage and
    Analysis, pp. 58-70]{.refContent}, [DOI
    10.1109/SC.2018.00008]{.seriesInfo}, November 2018,
    \<<https://ieeexplore.ieee.org/document/8665783>\>.
:   

\[RFC2216\]
:   [Shenker, S.]{.refAuthor} and [J. Wroclawski]{.refAuthor},
    [\"Network Element Service Specification Template\"]{.refTitle},
    [RFC 2216]{.seriesInfo}, [DOI 10.17487/RFC2216]{.seriesInfo},
    September 1997, \<<https://www.rfc-editor.org/info/rfc2216>\>.
:   

\[RFC4271\]
:   [Rekhter, Y., Ed.]{.refAuthor}, [Li, T., Ed.]{.refAuthor}, and [S.
    Hares, Ed.]{.refAuthor}, [\"A Border Gateway Protocol 4
    (BGP-4)\"]{.refTitle}, [RFC 4271]{.seriesInfo}, [DOI
    10.17487/RFC4271]{.seriesInfo}, January 2006,
    \<<https://www.rfc-editor.org/info/rfc4271>\>.
:   

\[RFC9113\]
:   [Thomson, M., Ed.]{.refAuthor} and [C. Benfield, Ed.]{.refAuthor},
    [\"HTTP/2\"]{.refTitle}, [RFC 9113]{.seriesInfo}, [DOI
    10.17487/RFC9113]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9113>\>.
:   

\[RFC9114\]
:   [Bishop, M., Ed.]{.refAuthor}, [\"HTTP/3\"]{.refTitle}, [RFC
    9114]{.seriesInfo}, [DOI 10.17487/RFC9114]{.seriesInfo}, June 2022,
    \<<https://www.rfc-editor.org/info/rfc9114>\>.
:   

\[SENSE\]
:   [ESnet]{.refAuthor}, [\"Software Defined Networking (SDN) for
    End-to-End Networked Science at the Exascale\"]{.refTitle}, 2019,
    \<<https://www.es.net/network-r-and-d/sense/>\>.
:   

\[SEREDGE\]
:   [Contreras, L.]{.refAuthor}, [Baliosian, J.]{.refAuthor},
    [Martínez-Julia, P.]{.refAuthor}, and [J. Serrat]{.refAuthor},
    [\"Computing at the Edge: But, what Edge?\"]{.refTitle},
    [Proceedings of NOMS 2020 - 2020 IEEE/IFIP Network Operations and
    Management Symposium, pp. 1-9]{.refContent}, [DOI
    10.1109/NOMS47738.2020.9110342]{.seriesInfo}, April 2020,
    \<<https://ieeexplore.ieee.org/document/9110342>\>.
:   

\[SWAN\]
:   [Hong, C.]{.refAuthor}, [Kandula, S.]{.refAuthor},
    [Mahajan, R.]{.refAuthor}, [Zhang, M.]{.refAuthor},
    [Gill, V.]{.refAuthor}, [Nanduri, M.]{.refAuthor}, and [R.
    Wattenhofer]{.refAuthor}, [\"Achieving high utilization with
    software-driven WAN\"]{.refTitle}, [Proceedings of the ACM SIGCOMM
    2013 conference on SIGCOMM (SIGCOMM \'13), New York, NY, pp.
    15-26]{.refContent}, [DOI 10.1145/2486001.2486012]{.seriesInfo},
    August 2013, \<<https://dl.acm.org/doi/10.1145/2486001.2486012>\>.
:   

\[UNICORN\]
:   [Xiang, Q.]{.refAuthor}, [Wang, T.]{.refAuthor},
    [Zhang, J.]{.refAuthor}, [Newman, H.]{.refAuthor}, [Yang,
    Y.R.]{.refAuthor}, and [Y. Liu]{.refAuthor}, [\"Unicorn: Unified
    resource orchestration for multi-domain, geo-distributed data
    analytics\"]{.refTitle}, [Future Generation Computer Systems, Volume
    93, pp. 188-197]{.refContent}, [DOI
    10.1016/j.future.2018.09.048]{.seriesInfo}, April 2019,
    \<<https://www.sciencedirect.com/science/article/abs/pii/S0167739X18302413?via%3Dihub>\>.
:   

\[XQuery\]
:   [Robie, J., Ed.]{.refAuthor}, [Dyck, M., Ed.]{.refAuthor}, and [J.
    Spiegel, Ed.]{.refAuthor}, [\"XQuery 3.1: An XML Query
    Language\"]{.refTitle}, [W3C Recommendation]{.refContent}, March
    2017, \<<https://www.w3.org/TR/xquery-31/>\>.
:   
:::
:::

::: {#acknowledgments}
::: {#appendix-A .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

The authors would like to thank [Andreas Voellmy]{.contact-name}, [Erran
Li]{.contact-name}, [Haibin Song]{.contact-name}, [Haizhou
Du]{.contact-name}, [Jiayuan Hu]{.contact-name}, [Tianyuan
Liu]{.contact-name}, [Xiao Shi]{.contact-name}, [Xin
Wang]{.contact-name}, and [Yan Luo]{.contact-name} for fruitful
discussions. The authors thank [Greg Bernstein]{.contact-name}, [Dawn
Chen]{.contact-name}, [Wendy Roome]{.contact-name}, and [Michael
Scharf]{.contact-name} for their contributions to earlier draft versions
of this document.[¶](#appendix-A-1){.pilcrow}

The authors would also like to thank [Tim Chown]{.contact-name}, [Luis
Contreras]{.contact-name}, [Roman Danyliw]{.contact-name}, [Benjamin
Kaduk]{.contact-name}, [Erik Kline]{.contact-name}, [Suresh
Krishnan]{.contact-name}, [Murray Kucherawy]{.contact-name}, [Warren
Kumari]{.contact-name}, [Danny Lachos]{.contact-name}, [Francesca
Palombini]{.contact-name}, [Éric Vyncke]{.contact-name}, [Samuel
Weiler]{.contact-name}, and [Qiao Xiang]{.contact-name}, whose feedback
and suggestions were invaluable for improving the practicability and
conciseness of this document; and [Mohamed Boucadair]{.contact-name},
[Martin Duke]{.contact-name}, [Vijay Gurbani]{.contact-name}, [Jan
Seedorf]{.contact-name}, and [Qin Wu]{.contact-name}, who provided great
support and guidance.[¶](#appendix-A-2){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#appendix-B .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Kai Gao]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Sichuan University]{.org}
:::

::: {.left dir="auto"}
[No.24 South Section 1, Yihuan Road]{.street-address}
:::

::: {.left dir="auto"}
[Chengdu]{.locality}
:::

::: {.left dir="auto"}
[610000]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <kaigao@scu.edu.cn>
:::

::: {.left dir="auto"}
[Young Lee]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Samsung]{.org}
:::

::: {.left dir="auto"}
[Republic of Korea]{.country-name}
:::

::: email
Email: <younglee.tx@gmail.com>
:::

::: {.left dir="auto"}
[Sabine Randriamasy]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nokia Bell Labs]{.org}
:::

::: {.left dir="auto"}
[Route de Villejust]{.street-address}
:::

::: {.left dir="auto"}
[91460]{.postal-code} [Nozay]{.locality}
:::

::: {.left dir="auto"}
[France]{.country-name}
:::

::: email
Email: <sabine.randriamasy@nokia-bell-labs.com>
:::

::: {.left dir="auto"}
[Yang Richard Yang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Yale University]{.org}
:::

::: {.left dir="auto"}
[51 Prospect Street]{.street-address}
:::

::: {.left dir="auto"}
[New Haven]{.locality}, [CT]{.region} [06511]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <yry@cs.yale.edu>
:::

::: {.left dir="auto"}
[Jingxuan Jensen Zhang]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Tongji University]{.org}
:::

::: {.left dir="auto"}
[4800 Caoan Road]{.street-address}
:::

::: {.left dir="auto"}
[Shanghai]{.locality}
:::

::: {.left dir="auto"}
[201804]{.postal-code}
:::

::: {.left dir="auto"}
[China]{.country-name}
:::

::: email
Email: <jingxuan.n.zhang@gmail.com>
:::
:::
:::
