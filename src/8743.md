  RFC 8743           MAMS            March 2020
  ------------------ --------------- ------------
  Kanugovi, et al.   Informational   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Independent Submission

RFC:
:   [8743](https://www.rfc-editor.org/rfc/rfc8743){.eref}

Category:
:   Informational

Published:
:   March 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    S. Kanugovi
    :::

    ::: org
    Nokia Bell Labs
    :::
    :::

    ::: author
    ::: author-name
    F. Baboescu
    :::

    ::: org
    Broadcom
    :::
    :::

    ::: author
    ::: author-name
    J. Zhu
    :::

    ::: org
    Intel
    :::
    :::

    ::: author
    ::: author-name
    S. Seo
    :::

    ::: org
    Korea Telecom
    :::
    :::
:::

# RFC 8743 {#rfcnum}

# Multi-Access Management Services (MAMS) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

In multiconnectivity scenarios, the clients can simultaneously connect
to multiple networks based on different access technologies and network
architectures like Wi-Fi, LTE, and DSL. Both the quality of experience
of the users and the overall network utilization and efficiency may be
improved through the smart selection and combination of access and core
network paths that can dynamically adapt to changing network
conditions.[¶](#section-abstract-1){.pilcrow}

This document presents a unified problem statement and introduces a
solution for managing multiconnectivity. The solution has been developed
by the authors based on their experiences in multiple standards bodies,
including the IETF and the 3GPP. However, this document is not an
Internet Standards Track specification, and it does not represent the
consensus opinion of the IETF.[¶](#section-abstract-2){.pilcrow}

This document describes requirements, solution principles, and the
architecture of the Multi-Access Management Services (MAMS) framework.
The MAMS framework aims to provide best performance while being easy to
implement in a wide variety of multiconnectivity deployments. It
specifies the protocol for (1) flexibly selecting the best combination
of access and core network paths for the uplink and downlink, and (2)
determining the user-plane treatment (e.g., tunneling, encryption) and
traffic distribution over the selected links, to ensure network
efficiency and the best possible application
performance.[¶](#section-abstract-3){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This document is not an Internet Standards Track specification; it is
published for informational
purposes.[¶](#section-boilerplate.1-1){.pilcrow}

This is a contribution to the RFC Series, independently of any other RFC
stream. The RFC Editor has chosen to publish this document at its
discretion and makes no statement about its value for implementation or
deployment. Documents approved for publication by the RFC Editor are not
candidates for any level of Internet Standard; see Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8743>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Problem
    Statement](#name-problem-statement){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Requirements](#name-requirements){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Access-Technology-Agnostic
        Interworking](#name-access-technology-agnostic-){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Support for Common Transport
        Deployments](#name-support-for-common-transpor){.xref}[¶](#section-toc.1-1.4.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Independent Access Path Selection
        for Uplink and
        Downlink](#name-independent-access-path-sel){.xref}[¶](#section-toc.1-1.4.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.4}
        [4.4](#section-4.4){.xref}.  [Core Selection Independent of
        Uplink and Downlink
        Access](#name-core-selection-independent-){.xref}[¶](#section-toc.1-1.4.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.5}
        [4.5](#section-4.5){.xref}.  [Adaptive Access Network Path
        Selection](#name-adaptive-access-network-pat){.xref}[¶](#section-toc.1-1.4.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.6}
        [4.6](#section-4.6){.xref}.  [Multipath Support and Aggregation
        of Access Link
        Capacities](#name-multipath-support-and-aggre){.xref}[¶](#section-toc.1-1.4.2.6.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.7}
        [4.7](#section-4.7){.xref}.  [Scalable Mechanism Based on
        User-Plane
        Interworking](#name-scalable-mechanism-based-on){.xref}[¶](#section-toc.1-1.4.2.7.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.8}
        [4.8](#section-4.8){.xref}.  [Separate Control-Plane and
        User-Plane
        Functions](#name-separate-control-plane-and-){.xref}[¶](#section-toc.1-1.4.2.8.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.9}
        [4.9](#section-4.9){.xref}.  [Lossless Path (Connection)
        Switching](#name-lossless-path-connection-sw){.xref}[¶](#section-toc.1-1.4.2.9.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.10}
        [4.10](#section-4.10){.xref}. [Concatenation and Fragmentation
        for Adaptation to MTU
        Differences](#name-concatenation-and-fragmenta){.xref}[¶](#section-toc.1-1.4.2.10.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.11}
        [4.11](#section-4.11){.xref}. [Configuring Network Middleboxes
        Based on Negotiated
        Protocols](#name-configuring-network-middleb){.xref}[¶](#section-toc.1-1.4.2.11.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.12}
        [4.12](#section-4.12){.xref}. [Policy-Based Optimal Path
        Selection](#name-policy-based-optimal-path-s){.xref}[¶](#section-toc.1-1.4.2.12.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.13}
        [4.13](#section-4.13){.xref}. [Access-Technology-Agnostic
        Control
        Signaling](#name-access-technology-agnostic-c){.xref}[¶](#section-toc.1-1.4.2.13.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.4.2.14}
        [4.14](#section-4.14){.xref}. [Service Discovery and
        Reachability](#name-service-discovery-and-reach){.xref}[¶](#section-toc.1-1.4.2.14.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Solution
    Principles](#name-solution-principles){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [MAMS Reference
    Architecture](#name-mams-reference-architecture){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [MAMS Protocol
    Architecture](#name-mams-protocol-architecture){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [MAMS Control-Plane
        Protocol](#name-mams-control-plane-protocol){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [MAMS User-Plane
        Protocol](#name-mams-user-plane-protocol){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [MAMS Control-Plane
    Procedures](#name-mams-control-plane-procedur){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}

    -   ::: {#section-toc.1-1.8.2.1}
        [8.1](#section-8.1){.xref}.  [Overview](#name-overview){.xref}[¶](#section-toc.1-1.8.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.2}
        [8.2](#section-8.2){.xref}.  [Common Fields in MAMS Control
        Messages](#name-common-fields-in-mams-contr){.xref}[¶](#section-toc.1-1.8.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.3}
        [8.3](#section-8.3){.xref}.  [Common Procedures for MAMS Control
        Messages](#name-common-procedures-for-mams-){.xref}[¶](#section-toc.1-1.8.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.8.2.3.2.1}
            [8.3.1](#section-8.3.1){.xref}.  [Message
            Timeout](#name-message-timeout){.xref}[¶](#section-toc.1-1.8.2.3.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.8.2.3.2.2}
            [8.3.2](#section-8.3.2){.xref}.  [Keep-Alive
            Procedure](#name-keep-alive-procedure){.xref}[¶](#section-toc.1-1.8.2.3.2.2.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.8.2.4}
        [8.4](#section-8.4){.xref}.  [Discovery and Capability
        Exchange](#name-discovery-and-capability-ex){.xref}[¶](#section-toc.1-1.8.2.4.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.5}
        [8.5](#section-8.5){.xref}.  [User-Plane
        Configuration](#name-user-plane-configuration){.xref}[¶](#section-toc.1-1.8.2.5.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.6}
        [8.6](#section-8.6){.xref}.  [MAMS Path Quality
        Estimation](#name-mams-path-quality-estimatio){.xref}[¶](#section-toc.1-1.8.2.6.1){.pilcrow}

        -   ::: {#section-toc.1-1.8.2.6.2.1}
            [8.6.1](#section-8.6.1){.xref}.  [MX Control PDU
            Definition](#name-mx-control-pdu-definition){.xref}[¶](#section-toc.1-1.8.2.6.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.8.2.6.2.2}
            [8.6.2](#section-8.6.2){.xref}.  [Keep-Alive
            Message](#name-keep-alive-message){.xref}[¶](#section-toc.1-1.8.2.6.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.8.2.6.2.3}
            [8.6.3](#section-8.6.3){.xref}.  [Probe-REQ/ACK
            Message](#name-probe-req-ack-message){.xref}[¶](#section-toc.1-1.8.2.6.2.3.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.8.2.7}
        [8.7](#section-8.7){.xref}.  [MAMS Traffic
        Steering](#name-mams-traffic-steering){.xref}[¶](#section-toc.1-1.8.2.7.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.8}
        [8.8](#section-8.8){.xref}.  [MAMS Application MADP
        Association](#name-mams-application-madp-assoc){.xref}[¶](#section-toc.1-1.8.2.8.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.9}
        [8.9](#section-8.9){.xref}.  [MAMS Network ID
        Indication](#name-mams-network-id-indication){.xref}[¶](#section-toc.1-1.8.2.9.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.10}
        [8.10](#section-8.10){.xref}. [MAMS Client Measurement
        Configuration and
        Reporting](#name-mams-client-measurement-con){.xref}[¶](#section-toc.1-1.8.2.10.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.11}
        [8.11](#section-8.11){.xref}. [MAMS Session Termination
        Procedure](#name-mams-session-termination-pr){.xref}[¶](#section-toc.1-1.8.2.11.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.8.2.12}
        [8.12](#section-8.12){.xref}. [MAMS Network Analytics Request
        Procedure](#name-mams-network-analytics-requ){.xref}[¶](#section-toc.1-1.8.2.12.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Generic MAMS Signaling
    Flow](#name-generic-mams-signaling-flow){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [Relationship to IETF
    Technologies](#name-relationship-to-ietf-techno){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.11}
    [11](#section-11){.xref}. [Applying MAMS Control Procedures with
    MPTCP Proxy as User
    Plane](#name-applying-mams-control-proce){.xref}[¶](#section-toc.1-1.11.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.12}
    [12](#section-12){.xref}. [Applying MAMS Control Procedures for
    Network-Assisted Traffic Steering When There Is No Convergence
    Layer](#name-applying-mams-control-proced){.xref}[¶](#section-toc.1-1.12.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.13}
    [13](#section-13){.xref}. [Coexistence of MX Adaptation and MX
    Convergence
    Layers](#name-coexistence-of-mx-adaptatio){.xref}[¶](#section-toc.1-1.13.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.14}
    [14](#section-14){.xref}. [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.14.1){.pilcrow}

    -   ::: {#section-toc.1-1.14.2.1}
        [14.1](#section-14.1){.xref}.  [MAMS Control-Plane
        Security](#name-mams-control-plane-security){.xref}[¶](#section-toc.1-1.14.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.14.2.2}
        [14.2](#section-14.2){.xref}.  [MAMS User-Plane
        Security](#name-mams-user-plane-security){.xref}[¶](#section-toc.1-1.14.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.15}
    [15](#section-15){.xref}. [Implementation
    Considerations](#name-implementation-consideratio){.xref}[¶](#section-toc.1-1.15.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.16}
    [16](#section-16){.xref}. [Applicability to Multi-Access Edge
    Computing](#name-applicability-to-multi-acce){.xref}[¶](#section-toc.1-1.16.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.17}
    [17](#section-17){.xref}. [Related Work in Other Industry and
    Standards
    Forums](#name-related-work-in-other-indus){.xref}[¶](#section-toc.1-1.17.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.18}
    [18](#section-18){.xref}. [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.18.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.19}
    [19](#section-19){.xref}. [References](#name-references){.xref}[¶](#section-toc.1-1.19.1){.pilcrow}

    -   ::: {#section-toc.1-1.19.2.1}
        [19.1](#section-19.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.19.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.19.2.2}
        [19.2](#section-19.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.19.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.20}
    [Appendix A](#section-appendix.a){.xref}.  [MAMS Control-Plane
    Optimization over Secure
    Connections](#name-mams-control-plane-optimiza){.xref}[¶](#section-toc.1-1.20.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.21}
    [Appendix B](#section-appendix.b){.xref}.  [MAMS Application
    Interface](#name-mams-application-interface){.xref}[¶](#section-toc.1-1.21.1){.pilcrow}

    -   ::: {#section-toc.1-1.21.2.1}
        [B.1](#section-b.1){.xref}.  [Overall
        Design](#name-overall-design){.xref}[¶](#section-toc.1-1.21.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.21.2.2}
        [B.2](#section-b.2){.xref}.  [Notation](#name-notation){.xref}[¶](#section-toc.1-1.21.2.2.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.21.2.3}
        [B.3](#section-b.3){.xref}.  [Error
        Indication](#name-error-indication){.xref}[¶](#section-toc.1-1.21.2.3.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.21.2.4}
        [B.4](#section-b.4){.xref}.  [CCM
        APIs](#name-ccm-apis){.xref}[¶](#section-toc.1-1.21.2.4.1){.pilcrow}

        -   ::: {#section-toc.1-1.21.2.4.2.1}
            [B.4.1](#section-b.4.1){.xref}.  [GET
            Capabilities](#name-get-capabilities){.xref}[¶](#section-toc.1-1.21.2.4.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.21.2.4.2.2}
            [B.4.2](#section-b.4.2){.xref}.  [Posting Application
            Requirements](#name-posting-application-require){.xref}[¶](#section-toc.1-1.21.2.4.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.21.2.4.2.3}
            [B.4.3](#section-b.4.3){.xref}.  [Getting Predictive Link
            Parameters](#name-getting-predictive-link-par){.xref}[¶](#section-toc.1-1.21.2.4.2.3.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.22}
    [Appendix C](#section-appendix.c){.xref}.  [MAMS Control-Plane
    Messages Described Using
    JSON](#name-mams-control-plane-messages){.xref}[¶](#section-toc.1-1.22.1){.pilcrow}

    -   ::: {#section-toc.1-1.22.2.1}
        [C.1](#section-c.1){.xref}.  [Protocol Specification: General
        Processing](#name-protocol-specification-gene){.xref}[¶](#section-toc.1-1.22.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.22.2.1.2.1}
            [C.1.1](#section-c.1.1){.xref}.  [Notation](#name-notation-2){.xref}[¶](#section-toc.1-1.22.2.1.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.2}
            [C.1.2](#section-c.1.2){.xref}.  [Discovery
            Procedure](#name-discovery-procedure){.xref}[¶](#section-toc.1-1.22.2.1.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.3}
            [C.1.3](#section-c.1.3){.xref}.  [System Information
            Procedure](#name-system-information-procedur){.xref}[¶](#section-toc.1-1.22.2.1.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.4}
            [C.1.4](#section-c.1.4){.xref}.  [Capability Exchange
            Procedure](#name-capability-exchange-procedu){.xref}[¶](#section-toc.1-1.22.2.1.2.4.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.5}
            [C.1.5](#section-c.1.5){.xref}.  [User-Plane Configuration
            Procedure](#name-user-plane-configuration-pr){.xref}[¶](#section-toc.1-1.22.2.1.2.5.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.6}
            [C.1.6](#section-c.1.6){.xref}.  [Reconfiguration
            Procedure](#name-reconfiguration-procedure){.xref}[¶](#section-toc.1-1.22.2.1.2.6.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.7}
            [C.1.7](#section-c.1.7){.xref}.  [Path Estimation
            Procedure](#name-path-estimation-procedure){.xref}[¶](#section-toc.1-1.22.2.1.2.7.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.8}
            [C.1.8](#section-c.1.8){.xref}.  [Traffic-Steering
            Procedure](#name-traffic-steering-procedure){.xref}[¶](#section-toc.1-1.22.2.1.2.8.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.9}
            [C.1.9](#section-c.1.9){.xref}.  [MAMS Application MADP
            Association](#name-mams-application-madp-associa){.xref}[¶](#section-toc.1-1.22.2.1.2.9.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.10}
            [C.1.10](#section-c.1.10){.xref}. [MX SSID
            Indication](#name-mx-ssid-indication){.xref}[¶](#section-toc.1-1.22.2.1.2.10.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.11}
            [C.1.11](#section-c.1.11){.xref}. [Measurements](#name-measurements){.xref}[¶](#section-toc.1-1.22.2.1.2.11.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.12}
            [C.1.12](#section-c.1.12){.xref}. [Keep-Alive](#name-keep-alive){.xref}[¶](#section-toc.1-1.22.2.1.2.12.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.13}
            [C.1.13](#section-c.1.13){.xref}. [Session Termination
            Procedure](#name-session-termination-procedu){.xref}[¶](#section-toc.1-1.22.2.1.2.13.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.1.2.14}
            [C.1.14](#section-c.1.14){.xref}. [Network
            Analytics](#name-network-analytics){.xref}[¶](#section-toc.1-1.22.2.1.2.14.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.22.2.2}
        [C.2](#section-c.2){.xref}.  [Protocol Specification: Data
        Types](#name-protocol-specification-data){.xref}[¶](#section-toc.1-1.22.2.2.1){.pilcrow}

        -   ::: {#section-toc.1-1.22.2.2.2.1}
            [C.2.1](#section-c.2.1){.xref}.  [MXBase](#name-mxbase){.xref}[¶](#section-toc.1-1.22.2.2.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.2}
            [C.2.2](#section-c.2.2){.xref}.  [Unique Session
            ID](#name-unique-session-id){.xref}[¶](#section-toc.1-1.22.2.2.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.3}
            [C.2.3](#section-c.2.3){.xref}.  [NCM
            Connections](#name-ncm-connections){.xref}[¶](#section-toc.1-1.22.2.2.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.4}
            [C.2.4](#section-c.2.4){.xref}.  [Connection
            Information](#name-connection-information){.xref}[¶](#section-toc.1-1.22.2.2.2.4.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.5}
            [C.2.5](#section-c.2.5){.xref}.  [Features and Their
            Activation
            Status](#name-features-and-their-activati){.xref}[¶](#section-toc.1-1.22.2.2.2.5.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.6}
            [C.2.6](#section-c.2.6){.xref}.  [Anchor
            Connections](#name-anchor-connections){.xref}[¶](#section-toc.1-1.22.2.2.2.6.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.7}
            [C.2.7](#section-c.2.7){.xref}.  [Delivery
            Connections](#name-delivery-connections){.xref}[¶](#section-toc.1-1.22.2.2.2.7.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.8}
            [C.2.8](#section-c.2.8){.xref}.  [Method
            Support](#name-method-support){.xref}[¶](#section-toc.1-1.22.2.2.2.8.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.9}
            [C.2.9](#section-c.2.9){.xref}.  [Convergence
            Methods](#name-convergence-methods){.xref}[¶](#section-toc.1-1.22.2.2.2.9.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.10}
            [C.2.10](#section-c.2.10){.xref}. [Adaptation
            Methods](#name-adaptation-methods){.xref}[¶](#section-toc.1-1.22.2.2.2.10.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.11}
            [C.2.11](#section-c.2.11){.xref}. [Setup of Anchor
            Connections](#name-setup-of-anchor-connections){.xref}[¶](#section-toc.1-1.22.2.2.2.11.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.12}
            [C.2.12](#section-c.2.12){.xref}. [Init Probe
            Results](#name-init-probe-results){.xref}[¶](#section-toc.1-1.22.2.2.2.12.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.13}
            [C.2.13](#section-c.2.13){.xref}. [Active Probe
            Results](#name-active-probe-results){.xref}[¶](#section-toc.1-1.22.2.2.2.13.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.14}
            [C.2.14](#section-c.2.14){.xref}. [Downlink
            Delivery](#name-downlink-delivery){.xref}[¶](#section-toc.1-1.22.2.2.2.14.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.15}
            [C.2.15](#section-c.2.15){.xref}. [Uplink
            Delivery](#name-uplink-delivery){.xref}[¶](#section-toc.1-1.22.2.2.2.15.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.16}
            [C.2.16](#section-c.2.16){.xref}. [Traffic Flow
            Template](#name-traffic-flow-template){.xref}[¶](#section-toc.1-1.22.2.2.2.16.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.17}
            [C.2.17](#section-c.2.17){.xref}. [Measurement Report
            Configuration](#name-measurement-report-configur){.xref}[¶](#section-toc.1-1.22.2.2.2.17.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.2.2.18}
            [C.2.18](#section-c.2.18){.xref}. [Measurement
            Report](#name-measurement-report){.xref}[¶](#section-toc.1-1.22.2.2.2.18.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.22.2.3}
        [C.3](#section-c.3){.xref}.  [Schemas in
        JSON](#name-schemas-in-json){.xref}[¶](#section-toc.1-1.22.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.22.2.3.2.1}
            [C.3.1](#section-c.3.1){.xref}.  [MX Base
            Schema](#name-mx-base-schema){.xref}[¶](#section-toc.1-1.22.2.3.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.2}
            [C.3.2](#section-c.3.2){.xref}.  [MX
            Definitions](#name-mx-definitions){.xref}[¶](#section-toc.1-1.22.2.3.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.3}
            [C.3.3](#section-c.3.3){.xref}.  [MX
            Discover](#name-mx-discover){.xref}[¶](#section-toc.1-1.22.2.3.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.4}
            [C.3.4](#section-c.3.4){.xref}.  [MX System
            Info](#name-mx-system-info){.xref}[¶](#section-toc.1-1.22.2.3.2.4.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.5}
            [C.3.5](#section-c.3.5){.xref}.  [MX Capability
            Request](#name-mx-capability-request-2){.xref}[¶](#section-toc.1-1.22.2.3.2.5.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.6}
            [C.3.6](#section-c.3.6){.xref}.  [MX Capability
            Response](#name-mx-capability-response-2){.xref}[¶](#section-toc.1-1.22.2.3.2.6.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.7}
            [C.3.7](#section-c.3.7){.xref}.  [MX Capability
            Acknowledge](#name-mx-capability-acknowledge-2){.xref}[¶](#section-toc.1-1.22.2.3.2.7.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.8}
            [C.3.8](#section-c.3.8){.xref}.  [MX Reconfiguration
            Request](#name-mx-reconfiguration-request-2){.xref}[¶](#section-toc.1-1.22.2.3.2.8.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.9}
            [C.3.9](#section-c.3.9){.xref}.  [MX Reconfiguration
            Response](#name-mx-reconfiguration-response-2){.xref}[¶](#section-toc.1-1.22.2.3.2.9.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.10}
            [C.3.10](#section-c.3.10){.xref}. [MX UP Setup Configuration
            Request](#name-mx-up-setup-configuration-r){.xref}[¶](#section-toc.1-1.22.2.3.2.10.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.11}
            [C.3.11](#section-c.3.11){.xref}. [MX UP Setup
            Confirmation](#name-mx-up-setup-confirmation){.xref}[¶](#section-toc.1-1.22.2.3.2.11.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.12}
            [C.3.12](#section-c.3.12){.xref}. [MX Traffic Steering
            Request](#name-mx-traffic-steering-request-2){.xref}[¶](#section-toc.1-1.22.2.3.2.12.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.13}
            [C.3.13](#section-c.3.13){.xref}. [MX Traffic Steering
            Response](#name-mx-traffic-steering-response){.xref}[¶](#section-toc.1-1.22.2.3.2.13.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.14}
            [C.3.14](#section-c.3.14){.xref}. [MX Application MADP
            Association
            Request](#name-mx-application-madp-associati){.xref}[¶](#section-toc.1-1.22.2.3.2.14.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.15}
            [C.3.15](#section-c.3.15){.xref}. [MX Application MADP
            Association
            Response](#name-mx-application-madp-associatio){.xref}[¶](#section-toc.1-1.22.2.3.2.15.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.16}
            [C.3.16](#section-c.3.16){.xref}. [MX Path Estimation
            Request](#name-mx-path-estimation-request-2){.xref}[¶](#section-toc.1-1.22.2.3.2.16.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.17}
            [C.3.17](#section-c.3.17){.xref}. [MX Path Estimation
            Results](#name-mx-path-estimation-results-2){.xref}[¶](#section-toc.1-1.22.2.3.2.17.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.18}
            [C.3.18](#section-c.3.18){.xref}. [MX SSID
            Indication](#name-mx-ssid-indication-2){.xref}[¶](#section-toc.1-1.22.2.3.2.18.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.19}
            [C.3.19](#section-c.3.19){.xref}. [MX Measurement
            Configuration](#name-mx-measurement-configuration){.xref}[¶](#section-toc.1-1.22.2.3.2.19.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.20}
            [C.3.20](#section-c.3.20){.xref}. [MX Measurement
            Report](#name-mx-measurement-report-2){.xref}[¶](#section-toc.1-1.22.2.3.2.20.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.21}
            [C.3.21](#section-c.3.21){.xref}. [MX Keep-Alive
            Request](#name-mx-keep-alive-request-2){.xref}[¶](#section-toc.1-1.22.2.3.2.21.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.22}
            [C.3.22](#section-c.3.22){.xref}. [MX Keep-Alive
            Response](#name-mx-keep-alive-response-2){.xref}[¶](#section-toc.1-1.22.2.3.2.22.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.23}
            [C.3.23](#section-c.3.23){.xref}. [MX Session Termination
            Request](#name-mx-session-termination-reque){.xref}[¶](#section-toc.1-1.22.2.3.2.23.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.24}
            [C.3.24](#section-c.3.24){.xref}. [MX Session Termination
            Response](#name-mx-session-termination-respo){.xref}[¶](#section-toc.1-1.22.2.3.2.24.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.25}
            [C.3.25](#section-c.3.25){.xref}. [MX Network Analytics
            Request](#name-mx-network-analytics-request){.xref}[¶](#section-toc.1-1.22.2.3.2.25.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.3.2.26}
            [C.3.26](#section-c.3.26){.xref}. [MX Network Analytics
            Response](#name-mx-network-analytics-respons){.xref}[¶](#section-toc.1-1.22.2.3.2.26.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.22.2.4}
        [C.4](#section-c.4){.xref}.  [Examples in
        JSON](#name-examples-in-json){.xref}[¶](#section-toc.1-1.22.2.4.1){.pilcrow}

        -   ::: {#section-toc.1-1.22.2.4.2.1}
            [C.4.1](#section-c.4.1){.xref}.  [MX
            Discover](#name-mx-discover-2){.xref}[¶](#section-toc.1-1.22.2.4.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.2}
            [C.4.2](#section-c.4.2){.xref}.  [MX System
            Info](#name-mx-system-info-2){.xref}[¶](#section-toc.1-1.22.2.4.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.3}
            [C.4.3](#section-c.4.3){.xref}.  [MX Capability
            Request](#name-mx-capability-request-3){.xref}[¶](#section-toc.1-1.22.2.4.2.3.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.4}
            [C.4.4](#section-c.4.4){.xref}.  [MX Capability
            Response](#name-mx-capability-response-3){.xref}[¶](#section-toc.1-1.22.2.4.2.4.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.5}
            [C.4.5](#section-c.4.5){.xref}.  [MX Capability
            Acknowledge](#name-mx-capability-acknowledge-3){.xref}[¶](#section-toc.1-1.22.2.4.2.5.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.6}
            [C.4.6](#section-c.4.6){.xref}.  [MX Reconfiguration
            Request](#name-mx-reconfiguration-request-3){.xref}[¶](#section-toc.1-1.22.2.4.2.6.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.7}
            [C.4.7](#section-c.4.7){.xref}.  [MX Reconfiguration
            Response](#name-mx-reconfiguration-response-3){.xref}[¶](#section-toc.1-1.22.2.4.2.7.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.8}
            [C.4.8](#section-c.4.8){.xref}.  [MX UP Setup Configuration
            Request](#name-mx-up-setup-configuration-re){.xref}[¶](#section-toc.1-1.22.2.4.2.8.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.9}
            [C.4.9](#section-c.4.9){.xref}.  [MX UP Setup
            Confirmation](#name-mx-up-setup-confirmation-2){.xref}[¶](#section-toc.1-1.22.2.4.2.9.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.10}
            [C.4.10](#section-c.4.10){.xref}. [MX Traffic Steering
            Request](#name-mx-traffic-steering-request-3){.xref}[¶](#section-toc.1-1.22.2.4.2.10.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.11}
            [C.4.11](#section-c.4.11){.xref}. [MX Traffic Steering
            Response](#name-mx-traffic-steering-response-2){.xref}[¶](#section-toc.1-1.22.2.4.2.11.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.12}
            [C.4.12](#section-c.4.12){.xref}. [MX Application MADP
            Association
            Request](#name-mx-application-madp-association){.xref}[¶](#section-toc.1-1.22.2.4.2.12.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.13}
            [C.4.13](#section-c.4.13){.xref}. [MX Application MADP
            Association
            Response](#name-mx-application-madp-association-){.xref}[¶](#section-toc.1-1.22.2.4.2.13.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.14}
            [C.4.14](#section-c.4.14){.xref}. [MX Path Estimation
            Request](#name-mx-path-estimation-request-3){.xref}[¶](#section-toc.1-1.22.2.4.2.14.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.15}
            [C.4.15](#section-c.4.15){.xref}. [MX Path Estimation
            Results](#name-mx-path-estimation-results-3){.xref}[¶](#section-toc.1-1.22.2.4.2.15.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.16}
            [C.4.16](#section-c.4.16){.xref}. [MX SSID
            Indication](#name-mx-ssid-indication-3){.xref}[¶](#section-toc.1-1.22.2.4.2.16.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.17}
            [C.4.17](#section-c.4.17){.xref}. [MX Measurement
            Configuration](#name-mx-measurement-configuration-2){.xref}[¶](#section-toc.1-1.22.2.4.2.17.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.18}
            [C.4.18](#section-c.4.18){.xref}. [MX Measurement
            Report](#name-mx-measurement-report-3){.xref}[¶](#section-toc.1-1.22.2.4.2.18.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.19}
            [C.4.19](#section-c.4.19){.xref}. [MX Keep-Alive
            Request](#name-mx-keep-alive-request-3){.xref}[¶](#section-toc.1-1.22.2.4.2.19.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.20}
            [C.4.20](#section-c.4.20){.xref}. [MX Keep-Alive
            Response](#name-mx-keep-alive-response-3){.xref}[¶](#section-toc.1-1.22.2.4.2.20.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.21}
            [C.4.21](#section-c.4.21){.xref}. [MX Session Termination
            Request](#name-mx-session-termination-reques){.xref}[¶](#section-toc.1-1.22.2.4.2.21.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.22}
            [C.4.22](#section-c.4.22){.xref}. [MX Session Termination
            Response](#name-mx-session-termination-respon){.xref}[¶](#section-toc.1-1.22.2.4.2.22.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.23}
            [C.4.23](#section-c.4.23){.xref}. [MX Network Analytics
            Request](#name-mx-network-analytics-request-2){.xref}[¶](#section-toc.1-1.22.2.4.2.23.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.22.2.4.2.24}
            [C.4.24](#section-c.4.24){.xref}. [MX Network Analytics
            Response](#name-mx-network-analytics-response){.xref}[¶](#section-toc.1-1.22.2.4.2.24.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.23}
    [Appendix D](#section-appendix.d){.xref}.  [Definition of APIs
    Provided by the CCM to the Applications at the
    Client](#name-definition-of-apis-provided){.xref}[¶](#section-toc.1-1.23.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.24}
    [Appendix E](#section-appendix.e){.xref}.  [Implementation Example
    Using Python for MAMS Client and
    Server](#name-implementation-example-usin){.xref}[¶](#section-toc.1-1.24.1){.pilcrow}

    -   ::: {#section-toc.1-1.24.2.1}
        [E.1](#section-e.1){.xref}.  [Client-Side
        Implementation](#name-client-side-implementation){.xref}[¶](#section-toc.1-1.24.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.24.2.2}
        [E.2](#section-e.2){.xref}.  [Server-Side
        Implementation](#name-server-side-implementation){.xref}[¶](#section-toc.1-1.24.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.25}
    [](#section-appendix.f){.xref}[Acknowledgments](#name-acknowledgments){.xref}[¶](#section-toc.1-1.25.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.26}
    [](#section-appendix.g){.xref}[Contributors](#name-contributors){.xref}[¶](#section-toc.1-1.26.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.27}
    [](#section-appendix.h){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.27.1){.pilcrow}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Multi-Access Management Services (MAMS) is a programmable framework that
provides mechanisms for the flexible selection of network paths in a
multi-access (MX) communication environment, based on the application\'s
needs. The MAMS framework leverages network intelligence and policies to
dynamically adapt traffic distribution across selected paths and
user-plane treatments (e.g., encryption needed for transport over Wi-Fi,
or tunneling needed to overcome a NAT between client and multipath
proxy) to changing network/link conditions. The network path selection
and configuration messages are carried as user-plane data between the
functional elements in the network and the client, and thus without any
impact on the control-plane signaling schemes of the underlying access
networks. For example, in a multi-access network with LTE and Wi-Fi
technologies, existing LTE and Wi-Fi signaling procedures will be used
to set up the LTE and Wi-Fi connections, respectively, and MAMS-specific
control-plane messages are carried as LTE or Wi-Fi user-plane data. The
MAMS framework defined in this document provides the capability to make
a smart selection of a flexible combination of access paths and core
network paths, as well as to choose the user-plane treatment when the
traffic is distributed across the selected paths. Thus, it is a broad
programmable framework that provides functions beyond the simple sharing
of network policies such as those provided by the Access Network
Discovery and Selection Function (ANDSF) \[[ANDSF](#ANDSF){.xref}\],
which offers policies and rules for assisting 3GPP clients to discover
and select available access networks. Further, it allows the choice and
configuration of user-plane treatment for the traffic over the paths,
depending on the application\'s needs.[¶](#section-1-1){.pilcrow}

The MAMS framework mechanisms are not dependent on any specific access
network types or user-plane protocols (e.g., TCP, UDP, Generic Routing
Encapsulation (GRE) \[[RFC2784](#RFC2784){.xref}\]
\[[RFC2890](#RFC2890){.xref}\], Multipath TCP (MPTCP)
\[[RFC6824](#RFC6824){.xref}\]). The MAMS framework coexists and
complements the existing protocols by providing a way to negotiate and
configure those protocols to match their use to a given multi-access
scenario based on client and network capabilities, and the specific
needs of each access network path. Further, the MAMS framework allows
load balancing of the traffic flows across the selected access network
paths, and the exchange of network state information to be used for
network intelligence to optimize the performance of such
protocols.[¶](#section-1-2){.pilcrow}

This document presents the requirements, solution principles, functional
architecture, and protocols for realizing the MAMS framework. An
important goal for the MAMS framework is to ensure that it requires
either minimum dependency or (better) no dependency on the actual access
technologies of the participating links, beyond the fact that MAMS
functional elements form an IP overlay across the multiple paths. This
allows the scheme to be \"future proof\" by allowing independent
technology evolution of the existing access and core networks as well as
seamless integration of new access
technologies.[¶](#section-1-3){.pilcrow}

The solution described in this document has been developed by the
authors, based on their experiences in multiple standards bodies,
including the IETF and the 3GPP. However, this document is not an
Internet Standards Track specification, and it does not represent the
consensus opinion of the IETF.[¶](#section-1-4){.pilcrow}
:::

::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

Client:
:   An end-user device that supports connections with multiple access
    nodes, possibly over different access technologies. Also called a
    user device or user equipment (UE).[¶](#section-2-2.2){.pilcrow}

Multiconnectivity Client:
:   A client with multiple network
    connections.[¶](#section-2-2.4){.pilcrow}

Access Network:
:   The segment in the network that delivers user data packets to the
    client via an access link such as a Wi-Fi airlink, an LTE airlink,
    or DSL.[¶](#section-2-2.6){.pilcrow}

Core:
:   The functional element that anchors the client IP address used for
    communication with applications via the
    network.[¶](#section-2-2.8){.pilcrow}

Network Connection Manager (NCM):
:   A functional entity in the network that handles MAMS control
    messages from the client and configures the distribution of data
    packets over the available access and core network paths, and
    manages the user-plane treatment (e.g., tunneling, encryption) of
    the traffic flows.[¶](#section-2-2.10){.pilcrow}

Client Connection Manager (CCM):
:   A functional entity in the client that exchanges MAMS signaling
    messages with the NCM, and which configures the network paths at the
    client for the transport of user data.[¶](#section-2-2.12){.pilcrow}

Network Multi-Access Data Proxy (N-MADP):
:   A functional entity in the network that handles the forwarding of
    user data traffic across multiple network paths. The N-MADP is
    responsible for MAMS-related user-plane functionalities in the
    network.[¶](#section-2-2.14){.pilcrow}

Client Multi-Access Data Proxy (C-MADP):
:   A functional entity in the client that handles the forwarding of
    user data traffic across multiple network paths. The C-MADP is
    responsible for MAMS-related user-plane functionalities in the
    client.[¶](#section-2-2.16){.pilcrow}

Anchor Connection:
:   Refers to the network path from the N-MADP to the user-plane gateway
    (IP anchor) that has assigned an IP address to the
    client.[¶](#section-2-2.18){.pilcrow}

Delivery Connection:
:   Refers to the network path from the N-MADP to the
    client.[¶](#section-2-2.20){.pilcrow}

Uplink (also referred to as \"UL\" in this document):
:   Refers to the direction of a connection from a client toward the
    network.[¶](#section-2-2.22){.pilcrow}

Downlink (also referred to as \"DL\" in this document):
:   Refers to the direction of a connection from the network toward a
    client.[¶](#section-2-2.24){.pilcrow}
:::

::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Problem Statement](#name-problem-statement){.section-name .selfRef} {#name-problem-statement}

Typically, a client has access to multiple communication networks based
on different technologies for accessing application services, for
example, LTE, Wi-Fi, DSL, or MulteFire. Different technologies exhibit
benefits and limitations in different scenarios. For example, Wi-Fi
provides high throughput for end users when their Wi-Fi coverage is
good, but the throughput degrades significantly as a given user moves
closer to the edge of its Wi-Fi coverage area (typically in the range of
a few tens of meters) or if the user population is large (due to a
contention-based Wi-Fi access scheme). In LTE networks, the capacity is
often constrained by the limited availability of licensed spectrum.
However, the quality of the service is predictable even in multi-user
scenarios, due to controlled scheduling and licensed-spectrum
usage.[¶](#section-3-1){.pilcrow}

Additionally, the use of a particular access network path is often
coupled with the use of its associated core network and the services
that are offered by that network. For example, in an enterprise that has
deployed both Wi-Fi and LTE networks, the enterprise services, such as
printers and corporate audio/video conferencing, are accessible only via
Wi-Fi access connected to the enterprise-hosted (Wi-Fi) core, whereas
the LTE access can be used to get operator services, including access to
the public Internet.[¶](#section-3-2){.pilcrow}

Thus, application performance in different scenarios becomes dependent
on the choice of access networks (e.g., Wi-Fi, LTE) and the network and
transport protocols used (e.g., VPN, MPTCP, GRE). Therefore, to achieve
the best possible application performance in a wide range of scenarios,
a framework is needed that allows the selection and flexible combination
of access and core network paths as well as the protocols used for
uplink and downlink data delivery.[¶](#section-3-3){.pilcrow}

For example, in uncongested scenarios and when the user\'s Wi-Fi
coverage is good, to ensure best performance for enterprise applications
at all times, it would be beneficial to use Wi-Fi access for both the
uplink and downlink for connecting to enterprise applications. However,
in congested scenarios or when the user is getting close to the edge of
its Wi-Fi coverage area, the use of Wi-Fi in the uplink by multiple
users can lead to degraded capacity and increased delays due to
contention. In this case, it would be beneficial to at least use the LTE
access for increased uplink coverage, while Wi-Fi may still continue to
be used for the downlink.[¶](#section-3-4){.pilcrow}
:::

::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Requirements](#name-requirements){.section-name .selfRef} {#name-requirements}

The requirements set out in this section define the behavior of the MAMS
mechanism and the related functional
elements.[¶](#section-4-1){.pilcrow}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Access-Technology-Agnostic Interworking](#name-access-technology-agnostic-){.section-name .selfRef} {#name-access-technology-agnostic-}

The access nodes [MAY]{.bcp14} use different technology types (LTE,
Wi-Fi, etc.). The framework, however, [MUST]{.bcp14} be agnostic about
the type of underlying technology used by the access
network.[¶](#section-4.1-1){.pilcrow}
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Support for Common Transport Deployments](#name-support-for-common-transpor){.section-name .selfRef} {#name-support-for-common-transpor}

The network path selection and user data distribution [MUST]{.bcp14}
work transparently across various transport deployments that include
end-to-end IPsec, VPNs, and middleboxes like NATs and
proxies.[¶](#section-4.2-1){.pilcrow}
:::

::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Independent Access Path Selection for Uplink and Downlink](#name-independent-access-path-sel){.section-name .selfRef} {#name-independent-access-path-sel}

A client [SHOULD]{.bcp14} be able to transmit on the uplink and receive
on the downlink, using one or more access networks. The selections of
the access paths for the uplink and downlink [SHOULD]{.bcp14} happen
independently.[¶](#section-4.3-1){.pilcrow}
:::

::: {#section-4.4 .section}
### [4.4.](#section-4.4){.section-number .selfRef} [Core Selection Independent of Uplink and Downlink Access](#name-core-selection-independent-){.section-name .selfRef} {#name-core-selection-independent-}

A client [SHOULD]{.bcp14} flexibly select the core independently of the
access paths used to reach the core, depending on the application\'s
needs, local policies, and the result of MAMS control-plane
negotiation.[¶](#section-4.4-1){.pilcrow}
:::

::: {#section-4.5 .section}
### [4.5.](#section-4.5){.section-number .selfRef} [Adaptive Access Network Path Selection](#name-adaptive-access-network-pat){.section-name .selfRef} {#name-adaptive-access-network-pat}

The framework [MUST]{.bcp14} have the ability to determine the quality
of each of the network paths, e.g., access link delay and capacity. This
information regarding network path quality needs to be considered in the
logic for the selection of the combination of network paths to be used
for transporting user data. The path selection algorithm can use the
information regarding network path quality, in addition to other
considerations like network policies, for optimizing network usage and
enhancing the Quality of Experience (QoE) delivered to the
user.[¶](#section-4.5-1){.pilcrow}
:::

::: {#section-4.6 .section}
### [4.6.](#section-4.6){.section-number .selfRef} [Multipath Support and Aggregation of Access Link Capacities](#name-multipath-support-and-aggre){.section-name .selfRef} {#name-multipath-support-and-aggre}

The framework [MUST]{.bcp14} support the distribution and aggregation of
user data across multiple network paths at the IP layer. The client
[SHOULD]{.bcp14} be able to leverage the combined capacity of the
multiple network connections by enabling the simultaneous transport of
user data over multiple network paths. If required, packet reordering
needs to be done at the receiver. The framework [MUST]{.bcp14} allow the
flexibility to choose the flow-steering and aggregation protocols based
on capabilities supported by the client and the network user-plane
entities. The multiconnection aggregation solution [MUST]{.bcp14}
support existing transport and network-layer protocols like TCP, UDP,
and GRE. The framework [MUST]{.bcp14} allow the use and configuration of
existing aggregation protocols such as MPTCP and SCTP
\[[RFC4960](#RFC4960){.xref}\].[¶](#section-4.6-1){.pilcrow}
:::

::: {#section-4.7 .section}
### [4.7.](#section-4.7){.section-number .selfRef} [Scalable Mechanism Based on User-Plane Interworking](#name-scalable-mechanism-based-on){.section-name .selfRef} {#name-scalable-mechanism-based-on}

The framework [MUST]{.bcp14} leverage commonly available transport,
routing, and tunneling capabilities to provide user-plane interworking
functionality. The addition of functional elements in the user-plane
path between the client and the network [MUST NOT]{.bcp14} impact the
access-technology-specific procedures. This makes the solution easy to
deploy and scale when different networks are added and
removed.[¶](#section-4.7-1){.pilcrow}
:::

::: {#section-4.8 .section}
### [4.8.](#section-4.8){.section-number .selfRef} [Separate Control-Plane and User-Plane Functions](#name-separate-control-plane-and-){.section-name .selfRef} {#name-separate-control-plane-and-}

The client [MUST]{.bcp14} use the control-plane protocol to negotiate
the following with the network: (1) the choice of access and core
network paths for both the uplink and downlink, and (2) the user-plane
protocol treatment. The control plane [MUST]{.bcp14} configure the
actual user-plane data distribution function per this negotiation. A
common control protocol [SHOULD]{.bcp14} allow the creation of multiple
user-plane function instances with potentially different user-plane
(e.g., tunneling) protocol types. This enables maintaining a clear
separation between the control-plane and user-plane functions, allowing
the framework to be scalable and extensible, e.g., using architectures
and implementations based on Software-Defined Networking
(SDN).[¶](#section-4.8-1){.pilcrow}
:::

::: {#section-4.9 .section}
### [4.9.](#section-4.9){.section-number .selfRef} [Lossless Path (Connection) Switching](#name-lossless-path-connection-sw){.section-name .selfRef} {#name-lossless-path-connection-sw}

When switching data traffic from one path (connection) to another,
packets may be lost or delivered out of order; this will have negative
impact on the performance of higher-layer protocols, e.g., TCP. The
framework [SHOULD]{.bcp14} provide the necessary mechanisms to ensure
in-order delivery at the receiver, e.g., during path switching. The
framework [MUST NOT]{.bcp14} cause any packet loss beyond losses that
access network mobility functions may
cause.[¶](#section-4.9-1){.pilcrow}
:::

::: {#section-4.10 .section}
### [4.10.](#section-4.10){.section-number .selfRef} [Concatenation and Fragmentation for Adaptation to MTU Differences](#name-concatenation-and-fragmenta){.section-name .selfRef} {#name-concatenation-and-fragmenta}

Different network paths may have different security and middlebox (e.g.,
NAT) configurations. These configurations will lead to the use of
different tunneling protocols for the transport of data between the
network user-plane function and the client. As a result, different
effective payload sizes per network path are possible (e.g., due to
variable encapsulation header overheads). Hence, the MAMS framework
[SHOULD]{.bcp14} support the fragmentation of a single payload across
MTU-sized IP packets to avoid IP packet fragmentation when aggregating
packets from different paths. Further, the concatenation of multiple IP
packets into a single IP packet to improve efficiency in packing the MTU
size [SHOULD]{.bcp14} also be supported.[¶](#section-4.10-1){.pilcrow}
:::

::: {#section-4.11 .section}
### [4.11.](#section-4.11){.section-number .selfRef} [Configuring Network Middleboxes Based on Negotiated Protocols](#name-configuring-network-middleb){.section-name .selfRef} {#name-configuring-network-middleb}

The framework [SHOULD]{.bcp14} enable the identification of optimal
settings, like radio link dormancy timers, binding expiry times, and
supported MTUs, based on parameters negotiated between the client and
the network, that may be used to configure middleboxes for efficient
operation of user-plane protocols, e.g., configuring a NAT with a longer
binding expiry time when UDP versus TCP is
used.[¶](#section-4.11-1){.pilcrow}
:::

::: {#section-4.12 .section}
### [4.12.](#section-4.12){.section-number .selfRef} [Policy-Based Optimal Path Selection](#name-policy-based-optimal-path-s){.section-name .selfRef} {#name-policy-based-optimal-path-s}

The framework [MUST]{.bcp14} support both the implementation of policies
at the client and guidance from the network for network path selection
that will address different application
requirements.[¶](#section-4.12-1){.pilcrow}
:::

::: {#section-4.13 .section}
### [4.13.](#section-4.13){.section-number .selfRef} [Access-Technology-Agnostic Control Signaling](#name-access-technology-agnostic-c){.section-name .selfRef} {#name-access-technology-agnostic-c}

The control-plane signaling [MUST NOT]{.bcp14} be dependent on the
underlying access technology procedures, i.e., it is carried
transparently, like application data, on the user plane. The MAMS
framework [SHOULD]{.bcp14} support the delivery of control-plane
signaling over existing Internet protocols, e.g., TCP or
UDP.[¶](#section-4.13-1){.pilcrow}
:::

::: {#section-4.14 .section}
### [4.14.](#section-4.14){.section-number .selfRef} [Service Discovery and Reachability](#name-service-discovery-and-reach){.section-name .selfRef} {#name-service-discovery-and-reach}

There can be multiple instances of the control-plane and user-plane
functional elements of the framework, either collocated or hosted on
separate network elements and reachable via any of the available
user-plane paths. The client [MUST]{.bcp14} have the flexibility to
choose the appropriate control-plane instance in the network and use the
control-plane signaling to choose the desired user-plane functional
element instances. The client\'s choice can be based on considerations
such as, but not limited to, the quality of the link through which the
network function is reachable, client preferences, preconfiguration,
etc.[¶](#section-4.14-1){.pilcrow}
:::
:::

::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Solution Principles](#name-solution-principles){.section-name .selfRef} {#name-solution-principles}

This document describes the Multi-Access Management Services (MAMS)
framework for dynamic selection of a flexible combination of access and
core network paths for the uplink and downlink, as well as the
user-plane treatment for the traffic spread across the selected links.
The user-plane paths, and access and core network connections, can be
selected independently for the uplink and downlink. For example, the
network paths chosen for the uplink do not apply any constraints on the
choice of paths for the downlink. The uplink and downlink network paths
can be chosen based on the application needs and on the characteristics
and available resources on different network connections. For example, a
Wi-Fi connection can be chosen for the downlink for transporting
high-bandwidth data from the network to the client, whereas an LTE
connection can be chosen to carry the low-bandwidth feedback to the
application server.[¶](#section-5-1){.pilcrow}

Also, depending on the characteristics of the access network link,
different processing would be needed on the user-plane packets on
different network paths. Encryption would be needed on a Wi-Fi link to
secure user-plane packets, but not on an LTE link. Tunneling would be
needed to ensure client and network end-point reachability over NATs.
Such differentiated user-plane treatment can be accomplished by
configuration of user plane-protocols (e.g., IPsec) specific to each
link.[¶](#section-5-2){.pilcrow}

The MAMS framework consists of clearly separated control- and user-plane
functions in the network and the client. The control-plane protocol
allows the configuration of the user-plane protocols and desired network
paths for the transport of application traffic. The control-plane
messages are carried as user-plane data over any of the available
network paths between the peer control-plane functional elements in the
client and the network. Multiple user-plane paths are dynamically
distributed across multiple access networks and aggregated in the
network (by the N-MADP). The access network\'s diversity is not exposed
to the application servers, but is kept within the scope of the elements
defined in this framework. This reduces the burden placed on application
servers that would otherwise have to react to access link changes caused
by mobility events or changing link
characteristics.[¶](#section-5-3){.pilcrow}

The selection of paths and user-plane treatment of the traffic is based
on (1) the negotiation of client and network capabilities, and (2) link
probing (i.e., checking the quality of links between the user-plane
functional elements at the client and the network). This framework
enables leveraging network intelligence to set up and dynamically
configure the best access network path combination based on client and
network capabilities, an application\'s needs, and knowledge of the
network state.[¶](#section-5-4){.pilcrow}
:::

::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [MAMS Reference Architecture](#name-mams-reference-architecture){.section-name .selfRef} {#name-mams-reference-architecture}

[Figure 1](#figure1){.xref} illustrates the MAMS architecture for the
scenario where a client is served by multiple (n) networks. It also
introduces the following functional elements:[¶](#section-6-1){.pilcrow}

-   [The NCM and the CCM in the control
    plane.[¶](#section-6-2.1){.pilcrow}]{#section-6-2.1}
-   [The N-MADP and the C-MADP in the user
    plane.[¶](#section-6-2.2){.pilcrow}]{#section-6-2.2}

[]{#name-mams-reference-architecture-2}

::: {#figure1}
::: {#section-6-3.1 .artwork .art-text .alignCenter}

    +--------------------------------------------------------+
    |          +----------------+       +----------------+   |
    |          |                |       |                |   |
    |          |Core (IP anchor)| ..... |Core (IP anchor)|   |
    |          |Network 1       |       |Network "n"     |   |
    |          |                |       |                |   |
    |          +----------------+       +----------------+   |
    |                           \             /              |
    |                     Anchor \  ...... Anchor            |
    |                     Connection 1     Connection "n"    |
    |                              \       /                 |
    |              +---------------+\+---+/+------+          |
    |              | +-----+      +----------+    |          |
    | +--------------| NCM |      |  N-MADP  |    |          |
    | |            | +-----+      +----------+    |          |
    | |            +------------------------------+          |
    | |                           /           \              |
    | |Control-Plane       Delivery  ...... Delivery         |
    | |Path (over any      Connection 1     Connection "n"   |
    | |access user plane)      /                 \           |
    | |                       /                   \          |
    | |       +------------------+        +---------------+  |
    | |       |    Access        | ...... | Access        |  |
    | |       |    Network 1     |        | Network "n"   |  |
    | |       +------------------+        +---------------+  |
    +-----------------------------\----------------/---------+
      |                            \              /
      |                  +----------\------------/-+
      |                  | +---+     \ +------+ /  |
      +--------------------+CCM|      \|C-MADP|/   |
                         | +---+       +------+    |
                         |       Client            |
                         +-------------------------+
:::

[Figure 1](#figure-1){.selfRef}: [MAMS Reference
Architecture](#name-mams-reference-architecture-2){.selfRef}
:::

The NCM is the functional element in the network that handles the MAMS
control-plane procedures. It configures the network (N-MADP) and client
(C-MADP) user-plane functions, such as negotiating with the client for
the use of available access network paths, protocols, and rules for
processing the user-plane traffic, as well as link-monitoring
procedures. The control-plane messages between the NCM and the CCM are
transported as an overlay on the user plane, without any impact on the
underlying access networks.[¶](#section-6-4){.pilcrow}

The CCM is the peer functional element in the client for handling MAMS
control-plane procedures. It manages multiple network connections at the
client. The CCM exchanges MAMS signaling messages with the NCM to
support such functions as the configuration of the UL and DL user
network path for transporting user data packets and the adaptive
selection of network path by the NCM by reporting on the results of link
probing. In the downlink, for user data received by the client, it
configures the C-MADP such that application data packets can be received
over any access link so that the packets will reach the appropriate
application on the client. In the uplink, for the data transmitted by
the client, it configures the C-MADP to determine the best access links
to be used for uplink data based on a combination of local and network
policies delivered by the NCM.[¶](#section-6-5){.pilcrow}

The N-MADP is the functional element in the network that handles the
forwarding of user data traffic across multiple network paths, as well
as other user-plane functionalities (e.g., encapsulation, fragmentation,
concatenation, reordering, retransmission). The N-MADP is the
distribution node that routes (1) the uplink user-plane traffic to the
appropriate anchor connection toward the core network, and (2) the
downlink user traffic to the client over the appropriate delivery
connections. In the downlink, the NCM configures the use of delivery
connections and user-plane protocols at the N-MADP for transporting user
data traffic. The N-MADP [SHOULD]{.bcp14} implement ECMP support for the
downlink traffic. Alternatively, it [MAY]{.bcp14} be connected to a
router with ECMP functionality. The load-balancing algorithm at the
N-MADP is configured by the NCM, based on static and/or dynamic network
policies like assigning access and core paths for a specific user data
traffic type, user-volume-based percentage distribution, and link
availability and feedback information from the exchange of MAMS
signaling messages with the CCM at the client. The N-MADP can be
configured with appropriate user-plane protocols to support both
per-flow and per-packet traffic distribution across the delivery
connections. In the uplink, the N-MADP selects the appropriate anchor
connection over which to forward the user data traffic received from the
client (via the delivery connections). The forwarding rules in the
uplink at the N-MADP are configured by the NCM based on application
requirements, e.g., enterprise-hosted application flows via a Wi-Fi
anchor or mobile-operator-hosted applications via the cellular
core.[¶](#section-6-6){.pilcrow}

The C-MADP is the functional element in the client that handles the MAMS
user-plane data procedures. The C-MADP is configured by the CCM, based
on the signaling exchange with the NCM and local policies at the client.
The CCM configures the selection of delivery connections and the
user-plane protocols to be used for uplink user data traffic based on
the signaling messages exchanged with the NCM. The C-MADP entity handles
the forwarding of user-plane data across multiple delivery connections
and associated user-plane functions (e.g., encapsulation, fragmentation,
concatenation, reordering, retransmissions).[¶](#section-6-7){.pilcrow}

The NCM and N-MADP can be either collocated or instantiated on different
network nodes. The NCM can set up multiple N-MADP instances in the
network. The NCM controls the selection of the N-MADP instance by the
client and the rules for the distribution of user traffic across the
N-MADP instances. This is beneficial in multiple deployment scenarios,
like the following examples:[¶](#section-6-8){.pilcrow}

-   [Different N-MADP instances to handle different sets of clients for
    load balancing across
    clients.[¶](#section-6-9.1){.pilcrow}]{#section-6-9.1}
-   [Network topologies where the N-MADP is hosted at the user-plane
    node at the access edge or in the core network, while the NCM is
    hosted at the access edge
    node.[¶](#section-6-9.2){.pilcrow}]{#section-6-9.2}
-   [Access network technology architecture with an N-MADP instance at
    the core network node to manage traffic distribution across LTE and
    DSL networks, and an N-MADP instance at an access network node to
    manage traffic distribution across LTE and Wi-Fi
    networks.[¶](#section-6-9.3){.pilcrow}]{#section-6-9.3}
-   [A single client can be configured to use multiple N-MADP instances.
    This is beneficial in addressing different application requirements.
    For example, separate N-MADP instances to handle traffic that is
    based on TCP and UDP
    transport.[¶](#section-6-9.4){.pilcrow}]{#section-6-9.4}

Thus, the MAMS architecture flexibly addresses multiple network
deployments.[¶](#section-6-10){.pilcrow}
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [MAMS Protocol Architecture](#name-mams-protocol-architecture){.section-name .selfRef} {#name-mams-protocol-architecture}

This section describes the protocol structure for the MAMS user-plane
and control-plane functional elements.[¶](#section-7-1){.pilcrow}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [MAMS Control-Plane Protocol](#name-mams-control-plane-protocol){.section-name .selfRef} {#name-mams-control-plane-protocol}

[Figure 2](#figure2){.xref} shows the default MAMS control-plane
protocol stack. WebSocket \[[RFC6455](#RFC6455){.xref}\] is used for
transporting management and control messages between the NCM and the
CCM.[¶](#section-7.1-1){.pilcrow}

[]{#name-tcp-based-mams-control-plan}

::: {#figure2}
::: {#section-7.1-2.1 .artwork .art-text .alignCenter}

    +------------------------------------------+
    |                                          |
    |    Multi-Access (MX) Control Message     |
    |                                          |
    +------------------------------------------+
    |                                          |
    |                WebSocket                 |
    |                                          |
    +------------------------------------------+
    |                                          |
    |                 TCP/TLS                  |
    |                                          |
    +------------------------------------------+
:::

[Figure 2](#figure-2){.selfRef}: [TCP-Based MAMS Control-Plane Protocol
Stack](#name-tcp-based-mams-control-plan){.selfRef}
:::
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [MAMS User-Plane Protocol](#name-mams-user-plane-protocol){.section-name .selfRef} {#name-mams-user-plane-protocol}

[Figure 3](#figure3){.xref} shows the MAMS user-plane protocol stack for
transporting the user payload, e.g., an IP Protocol Data Unit
(PDU).[¶](#section-7.2-1){.pilcrow}

[]{#name-mams-user-plane-protocol-st}

::: {#figure3}
::: {#section-7.2-2.1 .artwork .art-text .alignCenter}

       +-----------------------------------------------------+
       |   User Payload, e.g., IP Protocol Data Unit (PDU)   |
       +-----------------------------------------------------+

    +-----------------------------------------------------------+
    |  +-----------------------------------------------------+  |
    |  | Multi-Access (MX) Convergence Layer                 |  |
    |  +-----------------------------------------------------+  |
    |  +-----------------------------------------------------+  |
    |  | MX Adaptation   | MX Adaptation   | MX Adaptation   |  |
    |  | Layer           | Layer           | Layer           |  |
    |  | (optional)      | (optional)      | (optional)      |  |
    |  +-----------------+-----------------+-----------------+  |
    |  | Access #1 IP    | Access #2 IP    | Access #3 IP    |  |
    |  +-----------------------------------------------------+  |
    |                            MAMS User-Plane Protocol Stack |
    +-----------------------------------------------------------+
:::

[Figure 3](#figure-3){.selfRef}: [MAMS User-Plane Protocol
Stack](#name-mams-user-plane-protocol-st){.selfRef}
:::

The MAMS user-plane protocol consists of the following two
layers:[¶](#section-7.2-3){.pilcrow}

-   [Multi-Access (MX) Convergence Layer: The MAMS framework configures
    the Convergence Layer to perform multi-access-specific tasks in the
    user plane. This layer performs such functions as access (path)
    selection, multi-link (path) aggregation, splitting/reordering,
    lossless switching, fragmentation, or concatenation. The MX
    Convergence Layer can be implemented by using existing user-plane
    protocols like MPTCP \[[RFC6824](#RFC6824){.xref}\] or Multipath
    QUIC (MPQUIC)
    \[[QUIC-MULTIPATH](#I-D.deconinck-quic-multipath){.xref}\], or by
    adapting encapsulating header/trailer schemes such as GRE
    \[[RFC2784](#RFC2784){.xref}\] \[[RFC2890](#RFC2890){.xref}\] or
    Generic Multi-Access (GMA)
    \[[INTAREA-GMA](#I-D.zhu-intarea-gma){.xref}\].[¶](#section-7.2-4.1){.pilcrow}]{#section-7.2-4.1}
-   [Multi-Access (MX) Adaptation Layer: The MAMS framework configures
    the Adaptation Layer to address transport-network-related aspects
    such as reachability and security in the user plane. This layer
    performs functions to handle tunneling, network-layer security, and
    NAT. The MX Adaptation Layer can be implemented using IPsec, DTLS
    \[[RFC6347](#RFC6347){.xref}\], or a Client NAT (Source NAT at the
    client with inverse mapping at the N-MADP
    \[[INTAREA-MAMS](#I-D.zhu-intarea-mams-user-protocol){.xref}\]). The
    MX Adaptation Layer is [OPTIONAL]{.bcp14} and can be independently
    configured for each of the access links. For example, in a
    deployment with LTE (assumed secure) and Wi-Fi (assumed to not be
    secure), the MX Adaptation Layer can be omitted for the LTE link,
    but is configured with IPsec to secure the Wi-Fi link. Further
    details on the MAMS user plane are provided in
    \[[INTAREA-MAMS](#I-D.zhu-intarea-mams-user-protocol){.xref}\].[¶](#section-7.2-4.2){.pilcrow}]{#section-7.2-4.2}
:::
:::

::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [MAMS Control-Plane Procedures](#name-mams-control-plane-procedur){.section-name .selfRef} {#name-mams-control-plane-procedur}

::: {#section-8.1 .section}
### [8.1.](#section-8.1){.section-number .selfRef} [Overview](#name-overview){.section-name .selfRef} {#name-overview}

The CCM and NCM exchange signaling messages to configure the user-plane
functions via the C-MADP and the N-MADP at the client and the network,
respectively. The means for the CCM to obtain the NCM credentials (Fully
Qualified Domain Name (FQDN) or IP address) for sending the initial
discovery messages are out of scope for this document. As an example,
the client can obtain the NCM credentials by using such methods as
provisioning or DNS queries. Once the discovery process is successful,
the (initial) NCM can update and assign additional NCM addresses, e.g.,
based on Mobile Country Code (MCC) / Mobile Network Code (MNC) tuple
information received in the MX Discover message, for sending subsequent
control-plane messages.[¶](#section-8.1-1){.pilcrow}

The CCM discovers and exchanges capabilities with the NCM. The NCM
provides the credentials of the N-MADP endpoint and negotiates the
parameters for the user plane with the CCM. The CCM configures the
C-MADP to set up the user-plane path (e.g., MPTCP/UDP Proxy connection)
with the N-MADP, based on the credentials (e.g., (MPTCP⁠/UDP) Proxy IP
address and port, associated core network path), and the parameters
exchanged with the NCM. Further, the NCM and CCM exchange link status
information to adapt traffic steering and user-plane treatment to
dynamic network conditions. The key procedures are described in detail
in the following subsections.[¶](#section-8.1-2){.pilcrow}

[]{#name-mams-control-plane-procedure}

::: {#figure4}
::: {#section-8.1-3.1 .artwork .art-text .alignCenter}

              +-----+                 +-----+
              | CCM |                 | NCM |
              +--+--+                 +--+--+
                 |     Discovery and     |
                 |     Capability        |
                 |     Exchange          |
                 |<--------------------->|
                 |                       |
                 |     Setup of          |
                 |     User-Plane        |
                 |     Protocols         |
                 |<--------------------->|
                 |                       |
                 |     Path Quality      |
                 |     Estimation        |
                 |<--------------------->|
                 |                       |
                 | Network Capabilities  |
                 | e.g., RNIS [ETSIRNIS] |
                 |<----------------------|
                 |                       |
                 |   Network Policies    |
                 |<----------------------|
                 +                       +

    "RNIS" stands for "Radio Network Information Service"
:::

[Figure 4](#figure-4){.selfRef}: [MAMS Control-Plane
Procedures](#name-mams-control-plane-procedure){.selfRef}
:::
:::

::: {#section-8.2 .section}
### [8.2.](#section-8.2){.section-number .selfRef} [Common Fields in MAMS Control Messages](#name-common-fields-in-mams-contr){.section-name .selfRef} {#name-common-fields-in-mams-contr}

Each MAMS control message consists of the following common
fields:[¶](#section-8.2-1){.pilcrow}

-   [Version: Indicates the version of the MAMS control
    protocol.[¶](#section-8.2-2.1){.pilcrow}]{#section-8.2-2.1}
-   [Message Type: Indicates the type of the message, e.g., MX Discover,
    MX Capability Request (REQ) / Response
    (RSP).[¶](#section-8.2-2.2){.pilcrow}]{#section-8.2-2.2}
-   [Sequence Number: Auto-incremented integer to uniquely identify a
    particular message exchange, e.g., MX Capability
    Request/Response.[¶](#section-8.2-2.3){.pilcrow}]{#section-8.2-2.3}
:::

::: {#section-8.3 .section}
### [8.3.](#section-8.3){.section-number .selfRef} [Common Procedures for MAMS Control Messages](#name-common-procedures-for-mams-){.section-name .selfRef} {#name-common-procedures-for-mams-}

This section describes the common procedures for MAMS control
messages.[¶](#section-8.3-1){.pilcrow}

::: {#section-8.3.1 .section}
#### [8.3.1.](#section-8.3.1){.section-number .selfRef} [Message Timeout](#name-message-timeout){.section-name .selfRef} {#name-message-timeout}

After sending a MAMS control message, the MAMS control-plane peer (NCM
or CCM) waits for a duration of MAMS_TIMEOUT ms before timing out in
cases where a response was expected. The sender of the message will
retransmit the message for MAMS_RETRY times before declaring failure if
no response is received. A failure implies that the MAMS peer is dead or
unreachable, and the sender reverts to native non-multi-access /
single-path mode. The CCM may initiate the MAMS discovery procedure for
re-establishing the MAMS session.[¶](#section-8.3.1-1){.pilcrow}
:::

::: {#keep-alive-procedure}
::: {#section-8.3.2 .section}
#### [8.3.2.](#section-8.3.2){.section-number .selfRef} [Keep-Alive Procedure](#name-keep-alive-procedure){.section-name .selfRef} {#name-keep-alive-procedure}

MAMS control-plane peers execute the keep-alive procedures to ensure
that the other peers are reachable and to recover from dead-peer
scenarios. Each MAMS control-plane endpoint maintains a Keep-Alive timer
that is set for a duration of MAMS_KEEP_ALIVE_TIMEOUT. The Keep-Alive
timer is reset whenever the peer receives a MAMS control message. When
the Keep-Alive timer expires, an MX Keep-Alive Request is
sent.[¶](#section-8.3.2-1){.pilcrow}

The values for MAMS_RETRY and MAMS_KEEP_ALIVE_TIMEOUT parameters used in
keep-alive procedures are deployment dependent, and the means for
obtaining them are out of scope for this document. As an example, the
client and network can obtain the values using provisioning. On receipt
of an MX Keep-Alive Request, the receiver responds with an MX Keep-Alive
Response. If the sender does not receive a MAMS control message in
response to MAMS_RETRY retries of the MX Keep-Alive Request, the MAMS
peer declares that the peer is dead or unreachable. The CCM
[MAY]{.bcp14} initiate the MAMS discovery procedure for re-establishing
the MAMS session.[¶](#section-8.3.2-2){.pilcrow}

Additionally, the CCM [SHALL]{.bcp14} immediately send an MX Keep-Alive
Request to the NCM whenever it detects a handover from one base station
/ access point to another. During this time, the client [SHALL]{.bcp14}
stop using MAMS user-plane functionality in the uplink direction until
it receives an MX Keep-Alive Response from the
NCM.[¶](#section-8.3.2-3){.pilcrow}

The MX Keep-Alive Request includes the following
information:[¶](#section-8.3.2-4){.pilcrow}

-   [Reason: Can be timeout or handover. Handover shall be used by the
    CCM only on detection of a
    handover.[¶](#section-8.3.2-5.1){.pilcrow}]{#section-8.3.2-5.1}
-   [Unique Session ID: See [Section
    8.4](#disc_cap_exch){.xref}.[¶](#section-8.3.2-5.2){.pilcrow}]{#section-8.3.2-5.2}
-   [Connection ID: If the reason is handover, the inclusion of this
    field is
    mandatory.[¶](#section-8.3.2-5.3){.pilcrow}]{#section-8.3.2-5.3}
-   [Delivery Node ID: Identity of the node to which the client is
    attached. In the case of LTE, this is an E-UTRAN Cell Global
    Identifier (ECGI). In the case of Wi-Fi, this is an AP ID or a Media
    Access Control (MAC) address. If the reason is \"Handover\", the
    inclusion of this field is
    mandatory.[¶](#section-8.3.2-5.4){.pilcrow}]{#section-8.3.2-5.4}
:::
:::
:::

::: {#disc_cap_exch}
::: {#section-8.4 .section}
### [8.4.](#section-8.4){.section-number .selfRef} [Discovery and Capability Exchange](#name-discovery-and-capability-ex){.section-name .selfRef} {#name-discovery-and-capability-ex}

[Figure 5](#figure5){.xref} shows the MAMS discovery and capability
exchange procedure.[¶](#section-8.4-1){.pilcrow}

[]{#name-mams-control-procedure-for-}

::: {#figure5}
::: {#section-8.4-2.1 .artwork .art-text .alignCenter}

    CCM                                                  NCM
     |                                                    |
     |------- MX Discover Message ----------------------->|
     |                                         +-----------------+
     |                                         | Learn CCM       |
     |                                         | IP address      |
     |                                         | and port        |
     |                                         +-----------------+
     |                                                    |
     |<----------------------------- MX System Info ------|
     |                                                    |
     |------------------------------ MX Capability REQ -->|
     |<----- MX Capability RSP ---------------------------|
     |------------------------------ MX Capability ACK -->|
     |                                                    |
     +                                                    +
:::

[Figure 5](#figure-5){.selfRef}: [MAMS Control Procedure for Discovery
and Capability Exchange](#name-mams-control-procedure-for-){.selfRef}
:::

This procedure consists of the following key
steps:[¶](#section-8.4-3){.pilcrow}

Step 1 (discovery): The CCM periodically sends an MX Discover message to
a predefined (NCM) IP address/port until an MX System Info message is
received in acknowledgment.[¶](#section-8.4-4){.pilcrow}

-   ::: {#section-8.4-5.1}
    The MX Discover message includes the following
    information:[¶](#section-8.4-5.1.1){.pilcrow}

    -   [MAMS
        Version.[¶](#section-8.4-5.1.2.1){.pilcrow}]{#section-8.4-5.1.2.1}
    -   [Mobile Country Code (MCC) / Mobile Network Code (MNC) Tuple:
        Optional parameter to identify the operator network to which the
        client is subscribed, in conformance with the format specified
        in
        \[[ITU-E212](#ITU-E212){.xref}\].[¶](#section-8.4-5.1.2.2){.pilcrow}]{#section-8.4-5.1.2.2}
    :::

-   ::: {#section-8.4-5.2}
    The MX System Info message includes the following
    information:[¶](#section-8.4-5.2.1){.pilcrow}

    -   ::: {#section-8.4-5.2.2.1}
        Number of Anchor
        Connections.[¶](#section-8.4-5.2.2.1.1){.pilcrow}

        For each anchor connection, the following parameters are
        included:[¶](#section-8.4-5.2.2.1.2){.pilcrow}

        -   [Connection ID: Unique identifier for the anchor
            connection.[¶](#section-8.4-5.2.2.1.3.1){.pilcrow}]{#section-8.4-5.2.2.1.3.1}

        -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
            LTE).[¶](#section-8.4-5.2.2.1.3.2){.pilcrow}]{#section-8.4-5.2.2.1.3.2}

        -   ::: {#section-8.4-5.2.2.1.3.3}
            NCM Endpoint Address (for control-plane messages over this
            connection):[¶](#section-8.4-5.2.2.1.3.3.1){.pilcrow}

            -   [IP Address or
                FQDN[¶](#section-8.4-5.2.2.1.3.3.2.1){.pilcrow}]{#section-8.4-5.2.2.1.3.3.2.1}
            -   [Port
                Number[¶](#section-8.4-5.2.2.1.3.3.2.2){.pilcrow}]{#section-8.4-5.2.2.1.3.3.2.2}
            :::
        :::
    :::

Step 2 (capability exchange): The CCM learns the IP address and port
from the MX System Info message. It then sends the MX Capability REQ
message, which includes the following
parameters:[¶](#section-8.4-6){.pilcrow}

-   [MX Feature Activation List: Indicates whether the corresponding
    feature is supported or not, e.g., lossless switching,
    fragmentation, concatenation, uplink aggregation, downlink
    aggregation, measurement,
    probing.[¶](#section-8.4-7.1){.pilcrow}]{#section-8.4-7.1}

-   ::: {#section-8.4-7.2}
    Number of Anchor Connections (core
    networks).[¶](#section-8.4-7.2.1){.pilcrow}

    For each anchor connection, the following parameters are
    included:[¶](#section-8.4-7.2.2){.pilcrow}

    -   [Connection
        ID[¶](#section-8.4-7.2.3.1){.pilcrow}]{#section-8.4-7.2.3.1}
    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.4-7.2.3.2){.pilcrow}]{#section-8.4-7.2.3.2}
    :::

-   ::: {#section-8.4-7.3}
    Number of Delivery Connections (access
    links).[¶](#section-8.4-7.3.1){.pilcrow}

    For each delivery connection, the following parameters are
    included:[¶](#section-8.4-7.3.2){.pilcrow}

    -   [Connection
        ID[¶](#section-8.4-7.3.3.1){.pilcrow}]{#section-8.4-7.3.3.1}
    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.4-7.3.3.2){.pilcrow}]{#section-8.4-7.3.3.2}
    :::

-   ::: {#section-8.4-7.4}
    MX Convergence Method Support List:[¶](#section-8.4-7.4.1){.pilcrow}

    -   [GMA[¶](#section-8.4-7.4.2.1){.pilcrow}]{#section-8.4-7.4.2.1}
    -   [MPTCP
        Proxy[¶](#section-8.4-7.4.2.2){.pilcrow}]{#section-8.4-7.4.2.2}
    -   [GRE Aggregation
        Proxy[¶](#section-8.4-7.4.2.3){.pilcrow}]{#section-8.4-7.4.2.3}
    -   [MPQUIC[¶](#section-8.4-7.4.2.4){.pilcrow}]{#section-8.4-7.4.2.4}
    :::

-   ::: {#section-8.4-7.5}
    MX Adaptation Method Support List:[¶](#section-8.4-7.5.1){.pilcrow}

    -   [UDP without
        DTLS[¶](#section-8.4-7.5.2.1){.pilcrow}]{#section-8.4-7.5.2.1}
    -   [UDP with
        DTLS[¶](#section-8.4-7.5.2.2){.pilcrow}]{#section-8.4-7.5.2.2}
    -   [IPsec
        \[[RFC3948](#RFC3948){.xref}\][¶](#section-8.4-7.5.2.3){.pilcrow}]{#section-8.4-7.5.2.3}
    -   [Client
        NAT[¶](#section-8.4-7.5.2.4){.pilcrow}]{#section-8.4-7.5.2.4}
    :::

In response, the NCM creates a unique identity for the CCM session and
sends the MX Capability Response, including the following
information:[¶](#section-8.4-8){.pilcrow}

-   [MX Feature Activation List: Indicates whether the corresponding
    feature is enabled or not, e.g., lossless switching, fragmentation,
    concatenation, uplink aggregation, downlink aggregation,
    measurement,
    probing.[¶](#section-8.4-9.1){.pilcrow}]{#section-8.4-9.1}

-   ::: {#section-8.4-9.2}
    Number of Anchor Connections (core
    networks):[¶](#section-8.4-9.2.1){.pilcrow}

    For each anchor connection, the following parameters are
    included:[¶](#section-8.4-9.2.2){.pilcrow}

    -   [Connection
        ID[¶](#section-8.4-9.2.3.1){.pilcrow}]{#section-8.4-9.2.3.1}
    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.4-9.2.3.2){.pilcrow}]{#section-8.4-9.2.3.2}
    :::

-   ::: {#section-8.4-9.3}
    Number of Delivery Connections (access
    links):[¶](#section-8.4-9.3.1){.pilcrow}

    For each delivery connection, the following parameters are
    included:[¶](#section-8.4-9.3.2){.pilcrow}

    -   [Connection
        ID[¶](#section-8.4-9.3.3.1){.pilcrow}]{#section-8.4-9.3.3.1}
    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.4-9.3.3.2){.pilcrow}]{#section-8.4-9.3.3.2}
    :::

-   ::: {#section-8.4-9.4}
    MX Convergence Method Support List:[¶](#section-8.4-9.4.1){.pilcrow}

    -   [GMA[¶](#section-8.4-9.4.2.1){.pilcrow}]{#section-8.4-9.4.2.1}
    -   [MPTCP
        Proxy[¶](#section-8.4-9.4.2.2){.pilcrow}]{#section-8.4-9.4.2.2}
    -   [GRE Aggregation
        Proxy[¶](#section-8.4-9.4.2.3){.pilcrow}]{#section-8.4-9.4.2.3}
    -   [MPQUIC[¶](#section-8.4-9.4.2.4){.pilcrow}]{#section-8.4-9.4.2.4}
    :::

-   ::: {#section-8.4-9.5}
    MX Adaptation Method Support List:[¶](#section-8.4-9.5.1){.pilcrow}

    -   [UDP without
        DTLS[¶](#section-8.4-9.5.2.1){.pilcrow}]{#section-8.4-9.5.2.1}
    -   [UDP with
        DTLS[¶](#section-8.4-9.5.2.2){.pilcrow}]{#section-8.4-9.5.2.2}
    -   [IPsec
        \[[RFC3948](#RFC3948){.xref}\][¶](#section-8.4-9.5.2.3){.pilcrow}]{#section-8.4-9.5.2.3}
    -   [Client
        NAT[¶](#section-8.4-9.5.2.4){.pilcrow}]{#section-8.4-9.5.2.4}
    :::

-   ::: {#section-8.4-9.6}
    Unique Session ID: Unique session identifier for the CCM that set up
    the connection. If the session already exists, then the existing
    unique session identifier is
    returned.[¶](#section-8.4-9.6.1){.pilcrow}

    -   [NCM ID: Unique identity of the NCM in the operator
        network.[¶](#section-8.4-9.6.2.1){.pilcrow}]{#section-8.4-9.6.2.1}
    -   [Session ID: Unique identity assigned to the CCM instance by
        this NCM
        instance.[¶](#section-8.4-9.6.2.2){.pilcrow}]{#section-8.4-9.6.2.2}
    :::

In response to the MX Capability Response, the CCM sends a confirmation
(or rejection) in the MX Capability Acknowledge. The MX Capability
Acknowledge includes the following
parameters:[¶](#section-8.4-10){.pilcrow}

-   [Unique Session ID: Same identifier as the identifier provided in
    the MX Capability
    Response.[¶](#section-8.4-11.1){.pilcrow}]{#section-8.4-11.1}

-   ::: {#section-8.4-11.2}
    Acknowledgment: An indication of whether the client has accepted or
    rejected the capability exchange
    phase.[¶](#section-8.4-11.2.1){.pilcrow}

    -   [MX ACCEPT: The CCM accepts the capability set proposed by the
        NCM.[¶](#section-8.4-11.2.2.1){.pilcrow}]{#section-8.4-11.2.2.1}
    -   [MX REJECT: The CCM rejects the capability set proposed by the
        NCM.[¶](#section-8.4-11.2.2.2){.pilcrow}]{#section-8.4-11.2.2.2}
    :::

If the NCM receives an MX_REJECT, the current MAMS session will be
terminated.[¶](#section-8.4-12){.pilcrow}

If the CCM can no longer continue with the current capabilities, it
[SHOULD]{.bcp14} send an MX Session Termination Request to terminate the
MAMS session. In response, the NCM [SHOULD]{.bcp14} send an MX Session
Termination Response to confirm the
termination.[¶](#section-8.4-13){.pilcrow}
:::
:::

::: {#section-8.5 .section}
### [8.5.](#section-8.5){.section-number .selfRef} [User-Plane Configuration](#name-user-plane-configuration){.section-name .selfRef} {#name-user-plane-configuration}

[Figure 6](#figure6){.xref} shows the user-plane (UP) configuration
procedure.[¶](#section-8.5-1){.pilcrow}

[]{#name-mams-control-procedure-for-u}

::: {#figure6}
::: {#section-8.5-2.1 .artwork .art-text .alignCenter}

        CCM                                              NCM
         |                                                |
         |---- MX Reconfiguration REQ (setup) ----------->|
         |<-------------------- MX Reconfiguration RSP ---|
         |                                  +-------------------------+
         |                                  | NCM prepares N-MADP for |
         |                                  | User-Plane Setup        |
         |                                  +-------------------------+
         |<-------------------- MX UP Setup Config -------|
         |---- MX UP Setup Confirmation ----------------->|
    +-------------------+                                 |
    |Link "X" is up/down|                                 |
    +-------------------+                                 |
         |---- MX Reconfiguration REQ (update/release) -->|
         |<-------------------- MX Reconfiguration RSP ---|
:::

[Figure 6](#figure-6){.selfRef}: [MAMS Control Procedure for User-Plane
Configuration](#name-mams-control-procedure-for-u){.selfRef}
:::

This procedure consists of the following two key
steps:[¶](#section-8.5-3){.pilcrow}

-   [Reconfiguration: The CCM informs the NCM about the changes to the
    client\'s connections - setup of a new connection, teardown of an
    existing connection, or update of parameters related to an existing
    connection. It consists of the client triggering the procedure by
    requesting an update to the connection configuration, and a response
    from the NCM.[¶](#section-8.5-4.1){.pilcrow}]{#section-8.5-4.1}
-   [UP Setup: The NCM configures the user-plane protocols at the client
    and the network. The NCM initiates the UP setup by sending the MX UP
    Setup Configuration Request to the client, which confirms the set of
    mutually acceptable parameters by using the User Plane Setup
    Confirmation (CNF)
    message.[¶](#section-8.5-4.2){.pilcrow}]{#section-8.5-4.2}

These steps are elaborated as follows.[¶](#section-8.5-5){.pilcrow}

Reconfiguration: When the client detects that the link is up/down or the
IP address changes (e.g., via APIs provided by the client OS), the CCM
sends an MX Reconfiguration Request to set up, update, or release the
connection. The message [SHOULD]{.bcp14} include the following
information:[¶](#section-8.5-6){.pilcrow}

-   [Unique Session ID: Identity of the CCM at the NCM, created by the
    NCM during the capability exchange
    phase.[¶](#section-8.5-7.1){.pilcrow}]{#section-8.5-7.1}
-   [Reconfiguration Action: Indicates the reconfiguration action
    (release, setup, or
    update).[¶](#section-8.5-7.2){.pilcrow}]{#section-8.5-7.2}
-   [Connection ID: Identifies the connection for
    reconfiguration.[¶](#section-8.5-7.3){.pilcrow}]{#section-8.5-7.3}

If the Reconfiguration Action is set to \"setup\" or \"update\", then
the message includes the following
parameters:[¶](#section-8.5-8){.pilcrow}

-   [IP address of the
    connection.[¶](#section-8.5-9.1){.pilcrow}]{#section-8.5-9.1}
-   [SSID (Service Set Identifier of the Wi-Fi
    connection).[¶](#section-8.5-9.2){.pilcrow}]{#section-8.5-9.2}
-   [MTU of the connection: The MTU of the delivery path that is
    calculated at the client for use by the NCM to configure
    fragmentation and concatenation procedures
    \[[INTAREA-MAMS](#I-D.zhu-intarea-mams-user-protocol){.xref}\] at
    the N-MADP.[¶](#section-8.5-9.3){.pilcrow}]{#section-8.5-9.3}
-   [Delivery Node ID: Identity of the node to which the client is
    attached. In the case of LTE, this is an ECGI. In the case of Wi-Fi,
    this is an AP ID or a MAC
    address.[¶](#section-8.5-9.4){.pilcrow}]{#section-8.5-9.4}

At the beginning of a connection setup, the CCM informs the NCM of the
connection status using the MX Reconfiguration Request with the
Reconfiguration Action set to \"setup\". The NCM acknowledges the
connection setup status and exchanges parameters with the CCM for
user-plane setup, as described below.[¶](#section-8.5-10){.pilcrow}

Setup of User-Plane Protocols: Based on the negotiated capabilities, the
NCM sets up the user-plane (Adaptation Layer and Convergence Layer)
protocols at the N-MADP and informs the CCM of the user-plane protocols
to be set up at the client (C-MADP) and the parameters for the C-MADP to
connect to the N-MADP.[¶](#section-8.5-11){.pilcrow}

The MX UP Setup Configuration Request is used to create one or more MADP
instances, with each anchor connection having one or more
configurations, namely MX Configurations. The MX UP Setup Configuration
Request consists of the following
parameters:[¶](#section-8.5-12){.pilcrow}

-   ::: {#section-8.5-13.1}
    Number of Anchor Connections (core
    networks).[¶](#section-8.5-13.1.1){.pilcrow}

    For each anchor connection, the following parameters are
    included:[¶](#section-8.5-13.1.2){.pilcrow}

    -   [Anchor Connection
        ID[¶](#section-8.5-13.1.3.1){.pilcrow}]{#section-8.5-13.1.3.1}

    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.5-13.1.3.2){.pilcrow}]{#section-8.5-13.1.3.2}

    -   ::: {#section-8.5-13.1.3.3}
        Number of Active MX Configurations (included only if more than
        one MX configuration is active for the anchor
        connection).[¶](#section-8.5-13.1.3.3.1){.pilcrow}

        For each active MX configuration, the following parameters are
        included:[¶](#section-8.5-13.1.3.3.2){.pilcrow}

        -   [MX Configuration ID (included if more than one MX
            configuration is
            present)[¶](#section-8.5-13.1.3.3.3.1){.pilcrow}]{#section-8.5-13.1.3.3.3.1}

        -   ::: {#section-8.5-13.1.3.3.3.2}
            MX Convergence Method. One of the
            following:[¶](#section-8.5-13.1.3.3.3.2.1){.pilcrow}

            -   [GMA[¶](#section-8.5-13.1.3.3.3.2.2.1){.pilcrow}]{#section-8.5-13.1.3.3.3.2.2.1}
            -   [MPTCP
                Proxy[¶](#section-8.5-13.1.3.3.3.2.2.2){.pilcrow}]{#section-8.5-13.1.3.3.3.2.2.2}
            -   [GRE Aggregation
                Proxy[¶](#section-8.5-13.1.3.3.3.2.2.3){.pilcrow}]{#section-8.5-13.1.3.3.3.2.2.3}
            -   [MPQUIC[¶](#section-8.5-13.1.3.3.3.2.2.4){.pilcrow}]{#section-8.5-13.1.3.3.3.2.2.4}
            :::

        -   ::: {#section-8.5-13.1.3.3.3.3}
            MX Convergence Method
            Parameters:[¶](#section-8.5-13.1.3.3.3.3.1){.pilcrow}

            -   [Convergence Proxy IP
                Address[¶](#section-8.5-13.1.3.3.3.3.2.1){.pilcrow}]{#section-8.5-13.1.3.3.3.3.2.1}
            -   [Convergence Proxy
                Port[¶](#section-8.5-13.1.3.3.3.3.2.2){.pilcrow}]{#section-8.5-13.1.3.3.3.3.2.2}
            -   [Client
                Key[¶](#section-8.5-13.1.3.3.3.3.2.3){.pilcrow}]{#section-8.5-13.1.3.3.3.3.2.3}
            :::

        -   ::: {#section-8.5-13.1.3.3.3.4}
            MX Convergence Control Parameters (included if any MX
            Control PDU types (e.g., Probe-REQ/ACK) are
            supported):[¶](#section-8.5-13.1.3.3.3.4.1){.pilcrow}

            -   [UDP port number for sending and receiving MX Control
                PDUs (e.g., Probe-REQ/ACK,
                Keep-Alive)[¶](#section-8.5-13.1.3.3.3.4.2.1){.pilcrow}]{#section-8.5-13.1.3.3.3.4.2.1}
            -   [Convergence Proxy
                Port[¶](#section-8.5-13.1.3.3.3.4.2.2){.pilcrow}]{#section-8.5-13.1.3.3.3.4.2.2}
            :::

        -   ::: {#section-8.5-13.1.3.3.3.5}
            Number of Delivery
            Connections.[¶](#section-8.5-13.1.3.3.3.5.1){.pilcrow}

            For each delivery connection, include the
            following:[¶](#section-8.5-13.1.3.3.3.5.2){.pilcrow}

            -   [Delivery Connection
                ID[¶](#section-8.5-13.1.3.3.3.5.3.1){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.1}

            -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
                LTE)[¶](#section-8.5-13.1.3.3.3.5.3.2){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.2}

            -   ::: {#section-8.5-13.1.3.3.3.5.3.3}
                MX Adaptation Method. One of the
                following:[¶](#section-8.5-13.1.3.3.3.5.3.3.1){.pilcrow}

                -   [UDP without
                    DTLS[¶](#section-8.5-13.1.3.3.3.5.3.3.2.1){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.3.2.1}
                -   [UDP with
                    DTLS[¶](#section-8.5-13.1.3.3.3.5.3.3.2.2){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.3.2.2}
                -   [IPsec[¶](#section-8.5-13.1.3.3.3.5.3.3.2.3){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.3.2.3}
                -   [Client
                    NAT[¶](#section-8.5-13.1.3.3.3.5.3.3.2.4){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.3.2.4}
                :::

            -   ::: {#section-8.5-13.1.3.3.3.5.3.4}
                MX Adaptation Method
                Parameters:[¶](#section-8.5-13.1.3.3.3.5.3.4.1){.pilcrow}

                -   [Tunnel Endpoint IP
                    Address[¶](#section-8.5-13.1.3.3.3.5.3.4.2.1){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.4.2.1}
                -   [Tunnel Endpoint
                    Port[¶](#section-8.5-13.1.3.3.3.5.3.4.2.2){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.4.2.2}
                -   [Shared
                    Secret[¶](#section-8.5-13.1.3.3.3.5.3.4.2.3){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.4.2.3}
                -   [Header Optimization (included only if the MX
                    Convergence Method is
                    GMA)[¶](#section-8.5-13.1.3.3.3.5.3.4.2.4){.pilcrow}]{#section-8.5-13.1.3.3.3.5.3.4.2.4}
                :::
            :::
        :::
    :::

For example, when LTE and Wi-Fi are the two user-plane accesses, the NCM
conveys to the CCM that IPsec needs to be set up as the MX Adaptation
Layer over the Wi-Fi access, using the following parameters: IPsec
endpoint IP address, and Pre-Shared Key. No Adaptation Layer is needed
if it is considered secure with no NAT, or a Client NAT may be used over
the LTE access.[¶](#section-8.5-14){.pilcrow}

Similarly, as an example of the MX Convergence Method, the configuration
indicates the convergence method as the MPTCP proxy, along with
parameters for a connection to the MPTCP proxy: namely the IP address
and port of the MPTCP proxy for TCP
applications.[¶](#section-8.5-15){.pilcrow}

Once the user-plane protocols are configured, the CCM informs the NCM of
the status via the MX UP Setup Confirmation. The MX UP Setup
Confirmation consists of the following
parameters:[¶](#section-8.5-16){.pilcrow}

-   [Unique Session ID: Session identifier provided to the client in an
    MX Capability
    Response.[¶](#section-8.5-17.1){.pilcrow}]{#section-8.5-17.1}

-   ::: {#section-8.5-17.2}
    MX Convergence Control Parameters (included if any MX Control PDU
    types (e.g., Probe-REQ/ACK, Keep-Alive) are
    supported):[¶](#section-8.5-17.2.1){.pilcrow}

    -   [UDP port number for sending and receiving MX Control PDUs
        (e.g., Probe-REQ/ACK,
        Keep-Alive)[¶](#section-8.5-17.2.2.1){.pilcrow}]{#section-8.5-17.2.2.1}
    -   [MX Configuration ID (if an MX Configuration ID is specified in
        an MX UP Setup Configuration Request) to indicate the MX
        Configuration that will be used for
        probing)[¶](#section-8.5-17.2.2.2){.pilcrow}]{#section-8.5-17.2.2.2}
    :::

-   ::: {#section-8.5-17.3}
    Client Adaptation-Layer
    Parameters:[¶](#section-8.5-17.3.1){.pilcrow}

    -   ::: {#section-8.5-17.3.2.1}
        Number of Delivery
        Connections.[¶](#section-8.5-17.3.2.1.1){.pilcrow}

        For each delivery connection, include the
        following:[¶](#section-8.5-17.3.2.1.2){.pilcrow}

        -   [Delivery Connection
            ID[¶](#section-8.5-17.3.2.1.3.1){.pilcrow}]{#section-8.5-17.3.2.1.3.1}
        -   [UDP port number: If UDP-based adaptation is in use, the UDP
            port on the C-MADP
            side[¶](#section-8.5-17.3.2.1.3.2){.pilcrow}]{#section-8.5-17.3.2.1.3.2}
        :::
    :::
:::

::: {#section-8.6 .section}
### [8.6.](#section-8.6){.section-number .selfRef} [MAMS Path Quality Estimation](#name-mams-path-quality-estimatio){.section-name .selfRef} {#name-mams-path-quality-estimatio}

Path quality estimations can be done either passively or actively.
Traffic measurements in the network can be performed passively by
comparing the real-time data throughput of the client with the capacity
available in the network. In special deployments where the NCM has
interfaces with access nodes, direct interfaces can be used to gather
information regarding path quality. For example, the utilization of the
LTE access node (also known as Evolved Node B), to which the client is
attached, could be used as data for the estimation of path quality
without creating any extra traffic overhead. Active measurements by the
client provide an alternative way to estimate path
quality.[¶](#section-8.6-1){.pilcrow}

[]{#name-mams-control-plane-procedure-}

::: {#figure7}
::: {#section-8.6-2.1 .artwork .art-text .alignCenter}

    CCM                                                  NCM
     |                                                    |
     |<-------------- MX Path Estimation Request ---------|
     |------ MX Path Estimation Results ----------------->|
     |                                                    |
:::

[Figure 7](#figure-7){.selfRef}: [MAMS Control-Plane Procedure for Path
Quality Estimation](#name-mams-control-plane-procedure-){.selfRef}
:::

The NCM sends the following configuration parameters in the MX Path
Estimation Request to the CCM:[¶](#section-8.6-3){.pilcrow}

-   [Connection ID (of the delivery connection whose path quality needs
    to be estimated)[¶](#section-8.6-4.1){.pilcrow}]{#section-8.6-4.1}
-   [Init Probe Test Duration
    (ms)[¶](#section-8.6-4.2){.pilcrow}]{#section-8.6-4.2}
-   [Init Probe Test Rate
    (Mbps)[¶](#section-8.6-4.3){.pilcrow}]{#section-8.6-4.3}
-   [Init Probe Size
    (bytes)[¶](#section-8.6-4.4){.pilcrow}]{#section-8.6-4.4}
-   [Init Probe-ACK Required (0 -\> No / 1 -\>
    Yes)[¶](#section-8.6-4.5){.pilcrow}]{#section-8.6-4.5}
-   [Active Probe Frequency
    (ms)[¶](#section-8.6-4.6){.pilcrow}]{#section-8.6-4.6}
-   [Active Probe Size
    (bytes)[¶](#section-8.6-4.7){.pilcrow}]{#section-8.6-4.7}
-   [Active Probe Test Duration
    (ms)[¶](#section-8.6-4.8){.pilcrow}]{#section-8.6-4.8}
-   [Active Probe-ACK Required (0 -\> No / 1 -\>
    Yes)[¶](#section-8.6-4.9){.pilcrow}]{#section-8.6-4.9}

The CCM configures the C-MADP for probe receipt based on these
parameters and for collection of the statistics according to the
following configuration.[¶](#section-8.6-5){.pilcrow}

-   [Unique Session ID: Session identifier provided to the client in an
    MX Capability
    Response.[¶](#section-8.6-6.1){.pilcrow}]{#section-8.6-6.1}

-   ::: {#section-8.6-6.2}
    Init Probe Results Configuration:[¶](#section-8.6-6.2.1){.pilcrow}

    -   [Lost Probes
        (percent)[¶](#section-8.6-6.2.2.1){.pilcrow}]{#section-8.6-6.2.2.1}
    -   [Probe Receiving Rate (packets per
        second)[¶](#section-8.6-6.2.2.2){.pilcrow}]{#section-8.6-6.2.2.2}
    :::

-   ::: {#section-8.6-6.3}
    Active Probe Results Configuration:[¶](#section-8.6-6.3.1){.pilcrow}

    -   [Average Throughput in the last Probe
        Duration[¶](#section-8.6-6.3.2.1){.pilcrow}]{#section-8.6-6.3.2.1}
    :::

The user-plane probing is divided into two phases: the Initialization
phase and the Active phase.[¶](#section-8.6-7){.pilcrow}

-   [Initialization Phase: A network path that is not included by the
    N-MADP for transmission of user data is deemed to be in the
    Initialization phase. The user data may be transmitted over other
    available network
    paths.[¶](#section-8.6-8.1){.pilcrow}]{#section-8.6-8.1}
-   [Active Phase: A network path that is included by the N-MADP for
    transmission of user data is deemed to be in the Active
    phase.[¶](#section-8.6-8.2){.pilcrow}]{#section-8.6-8.2}

During the Initialization phase, the NCM configures the N-MADP to send
an Init Probe-REQ message. The CCM collects the Init Probe statistics
from the C-MADP and sends the MX Path Estimation Results message to the
NCM per the Initialization Probe Results
configuration.[¶](#section-8.6-9){.pilcrow}

During the Active phase, the NCM configures the N-MADP to send an Active
Probe-REQ message. The C-MADP calculates the metrics as specified by the
Active Probe Results configuration. The CCM collects the Active Probe
statistics from the C-MADP and sends the MX Path Estimation Results
message to the NCM per the Active Probe Results
configuration.[¶](#section-8.6-10){.pilcrow}

The following subsections define the control PDU encoding for Keep-Alive
and Probe-REQ/ACK messages to support path quality
estimation.[¶](#section-8.6-11){.pilcrow}

::: {#section-8.6.1 .section}
#### [8.6.1.](#section-8.6.1){.section-number .selfRef} [MX Control PDU Definition](#name-mx-control-pdu-definition){.section-name .selfRef} {#name-mx-control-pdu-definition}

Control PDUs are sent as UDP messages between the C-MADP and the N-MADP
to exchange control messages for keep-alive or path quality estimation.
MX probe parameters are negotiated during the user-plane setup phase (MX
UP Setup Configuration Request and MX UP Setup Confirmation). [Figure
8](#figure_controlPdufmt){.xref} shows the MX Control PDU format with
the following fields:[¶](#section-8.6.1-1){.pilcrow}

-   ::: {#section-8.6.1-2.1}
    Type (1 byte): The type of the MX Control
    message.[¶](#section-8.6.1-2.1.1){.pilcrow}

    -   [0:
        Keep-Alive[¶](#section-8.6.1-2.1.2.1){.pilcrow}]{#section-8.6.1-2.1.2.1}
    -   [1:
        Probe-REQ/ACK[¶](#section-8.6.1-2.1.2.2){.pilcrow}]{#section-8.6.1-2.1.2.2}
    -   [Others:
        Reserved[¶](#section-8.6.1-2.1.2.3){.pilcrow}]{#section-8.6.1-2.1.2.3}
    :::

-   [CID (1 byte): The connection ID of the delivery connection for
    sending the MX Control
    message.[¶](#section-8.6.1-2.2){.pilcrow}]{#section-8.6.1-2.2}

-   [MX Control Message (variable): The payload of the MX Control
    message.[¶](#section-8.6.1-2.3){.pilcrow}]{#section-8.6.1-2.3}

The MX Control PDU is sent as a normal user-plane packet over the
desired delivery connection whose quality and reachability need to be
determined.[¶](#section-8.6.1-3){.pilcrow}

[]{#name-mx-control-pdu-format}

::: {#figure_controlPdufmt}
::: {#section-8.6.1-4.1 .artwork .art-text .alignCenter}

                             |                                          |
                             |<--------- MX Control PDU Payload ------->|
                             |                                          |
    +-----------+-------------------+-----+-----------------------------+
    | IP Header | UDP Header | Type | CID |       MX Control Message    |
    +-----------+-------------------+-----+-----------------------------+
:::

[Figure 8](#figure-8){.selfRef}: [MX Control PDU
Format](#name-mx-control-pdu-format){.selfRef}
:::
:::

::: {#section-8.6.2 .section}
#### [8.6.2.](#section-8.6.2){.section-number .selfRef} [Keep-Alive Message](#name-keep-alive-message){.section-name .selfRef} {#name-keep-alive-message}

The \"Type\" field is set to \"0\" for Keep-Alive messages. The C-MADP
may periodically send a Keep-Alive message over one or multiple delivery
connections, especially if UDP tunneling is used as the adaptation
method for the delivery connection with a NAT function on the
path.[¶](#section-8.6.2-1){.pilcrow}

A Keep-Alive message is 2 bytes long and consists of the following
field:[¶](#section-8.6.2-2){.pilcrow}

-   [Keep-Alive Sequence Number (2 bytes): The sequence number of the
    Keep-Alive
    message.[¶](#section-8.6.2-3.1){.pilcrow}]{#section-8.6.2-3.1}
:::

::: {#section-8.6.3 .section}
#### [8.6.3.](#section-8.6.3){.section-number .selfRef} [Probe-REQ/ACK Message](#name-probe-req-ack-message){.section-name .selfRef} {#name-probe-req-ack-message}

The \"Type\" field is set to \"1\" for Probe-REQ/ACK messages. The
N-MADP may send the Probe-REQ message for path quality estimation. In
response, the C-MADP may return the Probe-ACK
message.[¶](#section-8.6.3-1){.pilcrow}

A Probe-REQ message consists of the following
fields:[¶](#section-8.6.3-2){.pilcrow}

-   [Probing Sequence Number (2 bytes): The sequence number of the Probe
    REQ message.[¶](#section-8.6.3-3.1){.pilcrow}]{#section-8.6.3-3.1}

-   ::: {#section-8.6.3-3.2}
    Probing Flag (1 byte):[¶](#section-8.6.3-3.2.1){.pilcrow}

    -   [Bit 0: A Probe-ACK flag to indicate whether the Probe-ACK
        message is expected (1) or not
        (0).[¶](#section-8.6.3-3.2.2.1){.pilcrow}]{#section-8.6.3-3.2.2.1}
    -   [Bit 1: A Probe Type flag to indicate whether the Probe-REQ/ACK
        message was sent during the Initialization phase (0) when the
        network path is not included for transmission of user data, or
        during the Active phase (1) when the network path is included
        for transmission of user
        data.[¶](#section-8.6.3-3.2.2.2){.pilcrow}]{#section-8.6.3-3.2.2.2}
    -   [Bit 2: A bit flag to indicate the presence of the Reverse
        Connection ID (R-CID)
        field.[¶](#section-8.6.3-3.2.2.3){.pilcrow}]{#section-8.6.3-3.2.2.3}
    -   [Bits 3-7:
        Reserved.[¶](#section-8.6.3-3.2.2.4){.pilcrow}]{#section-8.6.3-3.2.2.4}
    :::

-   [Reverse Connection ID (R-CID) (1 byte): The connection ID of the
    delivery connection for sending the Probe-ACK message on the reverse
    path.[¶](#section-8.6.3-3.3){.pilcrow}]{#section-8.6.3-3.3}

-   [Padding
    (variable).[¶](#section-8.6.3-3.4){.pilcrow}]{#section-8.6.3-3.4}

The \"R-CID\" field is only present if both Bit 0 and Bit 2 of the
\"Probing Flag\" field are set to \"1\". Moreover, Bit 2 of the
\"Probing Flag\" field [SHOULD]{.bcp14} be set to \"0\" if Bit 0 is
\"0\", indicating that the Probe-ACK message is not
expected.[¶](#section-8.6.3-4){.pilcrow}

If the \"R-CID\" field is not present, but Bit 0 of the \"Probing Flag\"
field is set to \"1\", the Probe-ACK message [SHOULD]{.bcp14} be sent
over the same delivery connection as the Probe-REQ
message.[¶](#section-8.6.3-5){.pilcrow}

The \"Padding\" field is used to control the length of the Probe-REQ
message.[¶](#section-8.6.3-6){.pilcrow}

The C-MADP [SHOULD]{.bcp14} send the Probe-ACK message in response to a
Probe-REQ message with the Probe-ACK flag set to
\"1\".[¶](#section-8.6.3-7){.pilcrow}

A Probe-ACK message is 3 bytes long and consists of the following
field:[¶](#section-8.6.3-8){.pilcrow}

-   [Probing Acknowledgment Number (2 bytes): The sequence number of the
    corresponding Probe-REQ
    message.[¶](#section-8.6.3-9.1){.pilcrow}]{#section-8.6.3-9.1}
:::
:::

::: {#section-8.7 .section}
### [8.7.](#section-8.7){.section-number .selfRef} [MAMS Traffic Steering](#name-mams-traffic-steering){.section-name .selfRef} {#name-mams-traffic-steering}

[]{#name-mams-traffic-steering-proce}

::: {#figure_traffic_steering}
::: {#section-8.7-1.1 .artwork .art-text .alignCenter}

    CCM                                               NCM
     |                                                 |
     |                                +------------------------------+
     |                                |Steer user traffic to Path "X"|
     |                                +------------------------------+
     |<----------------- MX Traffic Steering REQ ------|
     |----- MX Traffic Steering RSP ------------------>|
:::

[Figure 9](#figure-9){.selfRef}: [MAMS Traffic-Steering
Procedure](#name-mams-traffic-steering-proce){.selfRef}
:::

The NCM sends an MX Traffic Steering Request to steer data traffic. It
is also possible to send data traffic over multiple connections
simultaneously, i.e., aggregation. The message includes the following
information:[¶](#section-8.7-2){.pilcrow}

-   [Anchor Connection ID: Connection ID of the anchor
    connection.[¶](#section-8.7-3.1){.pilcrow}]{#section-8.7-3.1}

-   [MX Configuration ID (if an MX Configuration ID is specified in an
    MX UP Setup Configuration
    Request).[¶](#section-8.7-3.2){.pilcrow}]{#section-8.7-3.2}

-   [DL Connection ID List: List of DL delivery connections, provided as
    Connection IDs.[¶](#section-8.7-3.3){.pilcrow}]{#section-8.7-3.3}

-   [UL Connection ID: Connection ID of the default UL delivery
    connection.[¶](#section-8.7-3.4){.pilcrow}]{#section-8.7-3.4}

-   ::: {#section-8.7-3.5}
    For the number of specific UL traffic templates, the message
    includes the following:[¶](#section-8.7-3.5.1){.pilcrow}

    -   [Traffic Flow Template for identifying the UL
        traffic.[¶](#section-8.7-3.5.2.1){.pilcrow}]{#section-8.7-3.5.2.1}
    -   [UL Connection ID List: List of UL delivery connections,
        provided as Connection IDs, to be used for sending the UL
        traffic.[¶](#section-8.7-3.5.2.2){.pilcrow}]{#section-8.7-3.5.2.2}
    :::

-   [MX Feature Activation List. Each parameter indicates whether the
    corresponding feature is enabled or not: lossless switching,
    fragmentation, concatenation, uplink aggregation, downlink
    aggregation, measurement,
    probing.[¶](#section-8.7-3.6){.pilcrow}]{#section-8.7-3.6}

In response, the CCM sends an MX Traffic Steering Response, including
the following information:[¶](#section-8.7-4){.pilcrow}

-   [Unique Session ID: Session identifier provided to the client in an
    MX Capability
    Response.[¶](#section-8.7-5.1){.pilcrow}]{#section-8.7-5.1}
-   [MX Feature Activation List. Each parameter indicates whether the
    corresponding feature is enabled or not: lossless switching,
    fragmentation, concatenation, uplink aggregation, downlink
    aggregation, measurement,
    probing.[¶](#section-8.7-5.2){.pilcrow}]{#section-8.7-5.2}
:::

::: {#section-8.8 .section}
### [8.8.](#section-8.8){.section-number .selfRef} [MAMS Application MADP Association](#name-mams-application-madp-assoc){.section-name .selfRef} {#name-mams-application-madp-assoc}

[]{#name-mams-application-madp-associ}

::: {#figure_AMAproc}
::: {#section-8.8-1.1 .artwork .art-text .alignCenter}

    CCM                                         NCM
     |                                           |
     |                        +-------------------------+
     |                        | Associate MADP instance |
     |                        | with application flow   |
     |                        +-------------------------+
     |---------- MX App MADP ------------------->|
     |           Association REQ                 |
     |                                           |
     |<----------------- MX App MADP ------------|
     |                   Association RSP         |
:::

[Figure 10](#figure-10){.selfRef}: [MAMS Application MADP Association
Procedure](#name-mams-application-madp-associ){.selfRef}
:::

The CCM sends an MX Application MADP Association Request to request the
association of a specific application flow with a specific MADP instance
ID for the anchor connection with multiple active MX configurations. The
MADP Instance ID is a tuple (Anchor Connection ID, MX Configuration ID).
This provides the capability for the client to indicate the user-plane
processing that needs to be associated with different application flows
depending on the needs of those flows. The application flow is
identified by its associated Traffic Flow
Template.[¶](#section-8.8-2){.pilcrow}

The MX Application MADP Association Request includes the following
information:[¶](#section-8.8-3){.pilcrow}

-   ::: {#section-8.8-4.1}
    Number of Application Flows.[¶](#section-8.8-4.1.1){.pilcrow}

    For each application flow, identified by the Traffic Flow
    Templates:[¶](#section-8.8-4.1.2){.pilcrow}

    -   [Anchor Connection
        ID[¶](#section-8.8-4.1.3.1){.pilcrow}]{#section-8.8-4.1.3.1}
    -   [MX Configuration ID (if more than one MX configuration is
        associated with an anchor
        connection)[¶](#section-8.8-4.1.3.2){.pilcrow}]{#section-8.8-4.1.3.2}
    -   [Traffic Flow Template for identifying the UL
        traffic[¶](#section-8.8-4.1.3.3){.pilcrow}]{#section-8.8-4.1.3.3}
    -   [Traffic Flow Template for identifying the DL
        traffic[¶](#section-8.8-4.1.3.4){.pilcrow}]{#section-8.8-4.1.3.4}
    :::

In response, the NCM sends an MX Application MADP Association Response,
including the following information:[¶](#section-8.8-5){.pilcrow}

-   ::: {#section-8.8-6.1}
    Number of Application Flows.[¶](#section-8.8-6.1.1){.pilcrow}

    For each application flow, identified by the Traffic Flow
    Templates:[¶](#section-8.8-6.1.2){.pilcrow}

    -   [Status (Success or
        Failure)[¶](#section-8.8-6.1.3.1){.pilcrow}]{#section-8.8-6.1.3.1}
    :::
:::

::: {#section-8.9 .section}
### [8.9.](#section-8.9){.section-number .selfRef} [MAMS Network ID Indication](#name-mams-network-id-indication){.section-name .selfRef} {#name-mams-network-id-indication}

[]{#name-mams-network-id-indication-}

::: {#figure9}
::: {#section-8.9-1.1 .artwork .art-text .alignCenter}

    CCM                                               NCM
     |                                                 |
     |                            +---------------------------------+
     |                            |NCM determines preferred networks|
     |                            +---------------------------------+
     |                                                 |
     |<----------------- MX SSID Indication -----------|
     |                                                 |
:::

[Figure 11](#figure-11){.selfRef}: [MAMS Network ID Indication
Procedure](#name-mams-network-id-indication-){.selfRef}
:::

The NCM indicates the preferred network list to the CCM to guide the
client regarding networks that it should connect to. To indicate
preferred Wi-Fi networks, the NCM sends the list of WLANs, each
represented by an SSID (Service Set Identifier)/BSSID (Basic Service Set
Identifier)/HESSID (Homogeneous Extended Service Set Identifier) as
defined in \[[IEEE-80211](#IEEE-80211){.xref}\]), available in the MX
SSID Indication.[¶](#section-8.9-2){.pilcrow}
:::

::: {#section-8.10 .section}
### [8.10.](#section-8.10){.section-number .selfRef} [MAMS Client Measurement Configuration and Reporting](#name-mams-client-measurement-con){.section-name .selfRef} {#name-mams-client-measurement-con}

[]{#name-mams-client-measurement-conf}

::: {#figure10}
::: {#section-8.10-1.1 .artwork .art-text .alignCenter}

         CCM                                               NCM
          |                                                 |
          |<--------------- MX Measurement Config ----------|
          |                                                 |
    +---------------------------------+                     |
    |Client ready to send measurements|                     |
    +---------------------------------+                     |
          |                                                 |
          |----- MX Measurement Report -------------------->|
          |                                                 |
:::

[Figure 12](#figure-12){.selfRef}: [MAMS Client Measurement
Configuration and Reporting
Procedure](#name-mams-client-measurement-conf){.selfRef}
:::

The NCM configures the CCM with the different parameters (e.g., radio
link information), with the associated thresholds to be reported by the
client. The MX Measurement Configuration message contains the following
parameters for each delivery connection:[¶](#section-8.10-2){.pilcrow}

-   [Delivery Connection
    ID.[¶](#section-8.10-3.1){.pilcrow}]{#section-8.10-3.1}

-   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
    LTE).[¶](#section-8.10-3.2){.pilcrow}]{#section-8.10-3.2}

-   ::: {#section-8.10-3.3}
    If the connection type is Wi-Fi:[¶](#section-8.10-3.3.1){.pilcrow}

    -   [High and low thresholds for the sending of average Received
        Signal Strength Indicator (RSSI) of the Wi-Fi
        link.[¶](#section-8.10-3.3.2.1){.pilcrow}]{#section-8.10-3.3.2.1}
    -   [Periodicity, in ms, for sending the average RSSI of the Wi-Fi
        link.[¶](#section-8.10-3.3.2.2){.pilcrow}]{#section-8.10-3.3.2.2}
    -   [High and low thresholds for sending the loading of the WLAN
        system.[¶](#section-8.10-3.3.2.3){.pilcrow}]{#section-8.10-3.3.2.3}
    -   [Periodicity, in ms, for sending the loading of the WLAN
        system.[¶](#section-8.10-3.3.2.4){.pilcrow}]{#section-8.10-3.3.2.4}
    -   [High and low thresholds for sending the reverse link throughput
        on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.5){.pilcrow}]{#section-8.10-3.3.2.5}
    -   [Periodicity, in ms, for sending the reverse link throughput on
        the Wi-Fi
        link.[¶](#section-8.10-3.3.2.6){.pilcrow}]{#section-8.10-3.3.2.6}
    -   [High and low thresholds for sending the forward link throughput
        on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.7){.pilcrow}]{#section-8.10-3.3.2.7}
    -   [Periodicity, in ms, for sending the forward link throughput on
        the Wi-Fi
        link.[¶](#section-8.10-3.3.2.8){.pilcrow}]{#section-8.10-3.3.2.8}
    -   [High and low thresholds for sending the reverse link throughput
        (EstimatedThroughputOutbound as defined in
        \[[IEEE-80211](#IEEE-80211){.xref}\]) on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.9){.pilcrow}]{#section-8.10-3.3.2.9}
    -   [Periodicity, in ms, for sending the reverse link throughput
        (EstimatedThroughputOutbound as defined in
        \[[IEEE-80211](#IEEE-80211){.xref}\]) on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.10){.pilcrow}]{#section-8.10-3.3.2.10}
    -   [High and low thresholds for sending the forward link throughput
        (EstimatedThroughputInbound, as defined in
        \[[IEEE-80211](#IEEE-80211){.xref}\]) on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.11){.pilcrow}]{#section-8.10-3.3.2.11}
    -   [Periodicity, in ms, for sending the forward link throughput
        (EstimatedThroughputInbound, as defined in
        \[[IEEE-80211](#IEEE-80211){.xref}\]) on the Wi-Fi
        link.[¶](#section-8.10-3.3.2.12){.pilcrow}]{#section-8.10-3.3.2.12}
    :::

-   ::: {#section-8.10-3.4}
    If the connection type is LTE:[¶](#section-8.10-3.4.1){.pilcrow}

    -   [High and low thresholds for sending the Reference Signal
        Received Power (RSRP) of the serving LTE
        link.[¶](#section-8.10-3.4.2.1){.pilcrow}]{#section-8.10-3.4.2.1}
    -   [Periodicity, in ms, for sending the RSRP of the serving LTE
        link.[¶](#section-8.10-3.4.2.2){.pilcrow}]{#section-8.10-3.4.2.2}
    -   [High and low thresholds for sending the RSRQ (Reference Signal
        Received Quality) of the serving LTE
        link.[¶](#section-8.10-3.4.2.3){.pilcrow}]{#section-8.10-3.4.2.3}
    -   [Periodicity, in ms, for sending the RSRP of the serving LTE
        link.[¶](#section-8.10-3.4.2.4){.pilcrow}]{#section-8.10-3.4.2.4}
    -   [High and low thresholds for sending the reverse link throughput
        on the serving LTE
        link.[¶](#section-8.10-3.4.2.5){.pilcrow}]{#section-8.10-3.4.2.5}
    -   [Periodicity, in ms, for sending the reverse link throughput on
        the serving LTE
        link.[¶](#section-8.10-3.4.2.6){.pilcrow}]{#section-8.10-3.4.2.6}
    -   [High and low thresholds, for sending the forward link
        throughput on the serving LTE
        link.[¶](#section-8.10-3.4.2.7){.pilcrow}]{#section-8.10-3.4.2.7}
    -   [Periodicity, in ms, for sending the forward link throughput on
        the serving LTE
        link.[¶](#section-8.10-3.4.2.8){.pilcrow}]{#section-8.10-3.4.2.8}
    :::

-   ::: {#section-8.10-3.5}
    If the connection type is 5G NR:[¶](#section-8.10-3.5.1){.pilcrow}

    -   [High and low thresholds for sending the RSRP of the serving NR
        link.[¶](#section-8.10-3.5.2.1){.pilcrow}]{#section-8.10-3.5.2.1}
    -   [Periodicity, in ms, for sending the RSRP of the serving NR
        link.[¶](#section-8.10-3.5.2.2){.pilcrow}]{#section-8.10-3.5.2.2}
    -   [High and low thresholds for sending the RSRQ of the serving NR
        link.[¶](#section-8.10-3.5.2.3){.pilcrow}]{#section-8.10-3.5.2.3}
    -   [Periodicity, in ms, for sending the RSRP of the serving NR
        link.[¶](#section-8.10-3.5.2.4){.pilcrow}]{#section-8.10-3.5.2.4}
    -   [High and low thresholds for sending the reverse link throughput
        on the serving NR
        link.[¶](#section-8.10-3.5.2.5){.pilcrow}]{#section-8.10-3.5.2.5}
    -   [Periodicity, in ms, for sending the reverse link throughput on
        the serving NR
        link.[¶](#section-8.10-3.5.2.6){.pilcrow}]{#section-8.10-3.5.2.6}
    -   [High and low thresholds for sending the forward link throughput
        on the serving NR
        link.[¶](#section-8.10-3.5.2.7){.pilcrow}]{#section-8.10-3.5.2.7}
    -   [Periodicity, in ms, for sending the forward link throughput on
        the serving NR
        link.[¶](#section-8.10-3.5.2.8){.pilcrow}]{#section-8.10-3.5.2.8}
    :::

The MX Measurement Report contains the following
parameters:[¶](#section-8.10-4){.pilcrow}

-   [Unique Session ID: Session identifier provided to the client in an
    MX Capability
    Response.[¶](#section-8.10-5.1){.pilcrow}]{#section-8.10-5.1}

-   ::: {#section-8.10-5.2}
    For each delivery connection, include the
    following:[¶](#section-8.10-5.2.1){.pilcrow}

    -   [Delivery Connection
        ID[¶](#section-8.10-5.2.2.1){.pilcrow}]{#section-8.10-5.2.2.1}

    -   [Connection Type (e.g., Wi-Fi, 5G NR, MulteFire,
        LTE)[¶](#section-8.10-5.2.2.2){.pilcrow}]{#section-8.10-5.2.2.2}

    -   [Delivery Node ID (ECGI in the case of LTE. In the case of
        Wi-Fi, this is an AP ID or a MAC
        address.)[¶](#section-8.10-5.2.2.3){.pilcrow}]{#section-8.10-5.2.2.3}

    -   ::: {#section-8.10-5.2.2.4}
        If the connection type is
        Wi-Fi:[¶](#section-8.10-5.2.2.4.1){.pilcrow}

        -   [Average RSSI of the Wi-Fi
            link.[¶](#section-8.10-5.2.2.4.2.1){.pilcrow}]{#section-8.10-5.2.2.4.2.1}
        -   [Loading of the WLAN
            system.[¶](#section-8.10-5.2.2.4.2.2){.pilcrow}]{#section-8.10-5.2.2.4.2.2}
        -   [Reverse link throughput on the Wi-Fi
            link.[¶](#section-8.10-5.2.2.4.2.3){.pilcrow}]{#section-8.10-5.2.2.4.2.3}
        -   [Forward link throughput on the Wi-Fi
            link.[¶](#section-8.10-5.2.2.4.2.4){.pilcrow}]{#section-8.10-5.2.2.4.2.4}
        -   [Estimated reverse link throughput on the Wi-Fi link
            (EstimatedThroughputOutbound as defined in
            \[[IEEE-80211](#IEEE-80211){.xref}\]).[¶](#section-8.10-5.2.2.4.2.5){.pilcrow}]{#section-8.10-5.2.2.4.2.5}
        -   [Estimated forward link throughput on the Wi-Fi link
            (EstimatedThroughputInbound, as defined in
            \[[IEEE-80211](#IEEE-80211){.xref}\]).[¶](#section-8.10-5.2.2.4.2.6){.pilcrow}]{#section-8.10-5.2.2.4.2.6}
        :::

    -   ::: {#section-8.10-5.2.2.5}
        If the connection type is
        LTE:[¶](#section-8.10-5.2.2.5.1){.pilcrow}

        -   [RSRP of the serving LTE
            link.[¶](#section-8.10-5.2.2.5.2.1){.pilcrow}]{#section-8.10-5.2.2.5.2.1}
        -   [RSRQ of the serving LTE
            link.[¶](#section-8.10-5.2.2.5.2.2){.pilcrow}]{#section-8.10-5.2.2.5.2.2}
        -   [Reverse link throughput on the serving LTE
            link.[¶](#section-8.10-5.2.2.5.2.3){.pilcrow}]{#section-8.10-5.2.2.5.2.3}
        -   [Forward link throughput on the serving LTE
            link.[¶](#section-8.10-5.2.2.5.2.4){.pilcrow}]{#section-8.10-5.2.2.5.2.4}
        :::

    -   ::: {#section-8.10-5.2.2.6}
        If the connection type is 5G
        NR:[¶](#section-8.10-5.2.2.6.1){.pilcrow}

        -   [RSRP of the serving NR
            link.[¶](#section-8.10-5.2.2.6.2.1){.pilcrow}]{#section-8.10-5.2.2.6.2.1}
        -   [RSRQ of the serving NR
            link.[¶](#section-8.10-5.2.2.6.2.2){.pilcrow}]{#section-8.10-5.2.2.6.2.2}
        -   [Reverse link throughput on the serving NR
            link.[¶](#section-8.10-5.2.2.6.2.3){.pilcrow}]{#section-8.10-5.2.2.6.2.3}
        -   [Forward link throughput on the serving NR
            link.[¶](#section-8.10-5.2.2.6.2.4){.pilcrow}]{#section-8.10-5.2.2.6.2.4}
        :::
    :::
:::

::: {#section-8.11 .section}
### [8.11.](#section-8.11){.section-number .selfRef} [MAMS Session Termination Procedure](#name-mams-session-termination-pr){.section-name .selfRef} {#name-mams-session-termination-pr}

[]{#name-mams-session-termination-pro}

::: {#figure11}
::: {#section-8.11-1.1 .artwork .art-text .alignCenter}

    CCM                                  NCM
     |                                    |
     |---- MX Session Termination REQ --->|
     |                                    |
     |                                    |
     |<--- MX Session Termination RSP ----|
     |                                    |
     |                           +------------------+
     |                           | Remove Resources |
     |                           +------------------+
     |                                    |
:::

[Figure 13](#figure-13){.selfRef}: [MAMS Session Termination Procedure -
Initiated by Client](#name-mams-session-termination-pro){.selfRef}
:::

[]{#name-mams-session-termination-proc}

::: {#figure12}
::: {#section-8.11-2.1 .artwork .art-text .alignCenter}

            CCM                                  NCM
             |                                    |
             |<--- MX Session Termination REQ ----|
             |                                    |
             |                                    |
             |---- MX Session Termination RSP --->|
             |                                    |
    +------------------+                          |
    | Remove Resources |                          |
    +------------------+                          |
             |                                    |
:::

[Figure 14](#figure-14){.selfRef}: [MAMS Session Termination Procedure -
Initiated by Network](#name-mams-session-termination-proc){.selfRef}
:::

At any point in MAMS processing, if the CCM or NCM is no longer able to
support the MAMS functions, then either of them can initiate a
termination procedure by sending an MX Session Termination Request to
the peer. The peer [SHALL]{.bcp14} acknowledge the termination by
sending an MX Session Termination Response message. After the session is
disconnected, the CCM [SHALL]{.bcp14} start a new procedure with an MX
Discover message. An MX Session Termination Request shall contain a
Unique Session ID and the reason for the termination. Possible reasons
for termination are:[¶](#section-8.11-3){.pilcrow}

-   [Normal Release[¶](#section-8.11-4.1){.pilcrow}]{#section-8.11-4.1}
-   [No Response from
    Peer[¶](#section-8.11-4.2){.pilcrow}]{#section-8.11-4.2}
-   [Internal Error[¶](#section-8.11-4.3){.pilcrow}]{#section-8.11-4.3}
:::

::: {#network_analytics_section}
::: {#section-8.12 .section}
### [8.12.](#section-8.12){.section-number .selfRef} [MAMS Network Analytics Request Procedure](#name-mams-network-analytics-requ){.section-name .selfRef} {#name-mams-network-analytics-requ}

[]{#name-mams-network-analytics-reque}

::: {#figure_NetAnalyticsReq}
::: {#section-8.12-1.1 .artwork .art-text .alignCenter}

    CCM                                 NCM
     |                                   |
     |----- MX Network Analytics REQ --->|
     |                                   |
     |                                   |
     |<--- MX Network Analytics RSP -----|
     |                                   |
:::

[Figure 15](#figure-15){.selfRef}: [MAMS Network Analytics Request
Procedure](#name-mams-network-analytics-reque){.selfRef}
:::

The CCM sends the MX Network Analytics Request to the NCM to request
information related to such network parameters as bandwidth, latency,
jitter, and signal quality, based on the application of analytics at the
network (utilizing the received path measurements and client measurement
reporting).[¶](#section-8.12-2){.pilcrow}

The MX Network Analytics Request consists of the following
parameters:[¶](#section-8.12-3){.pilcrow}

-   ::: {#section-8.12-4.1}
    Link Quality Indicators. One or more of the
    following:[¶](#section-8.12-4.1.1){.pilcrow}

    -   [Bandwidth[¶](#section-8.12-4.1.2.1){.pilcrow}]{#section-8.12-4.1.2.1}
    -   [Jitter[¶](#section-8.12-4.1.2.2){.pilcrow}]{#section-8.12-4.1.2.2}
    -   [Latency[¶](#section-8.12-4.1.2.3){.pilcrow}]{#section-8.12-4.1.2.3}
    -   [Signal
        Quality[¶](#section-8.12-4.1.2.4){.pilcrow}]{#section-8.12-4.1.2.4}
    :::

The NCM sends the MX Network Analytics Response to convey analytics
information that might be of interest to the CCM. This message will
include network parameters with their predicted
likelihoods.[¶](#section-8.12-5){.pilcrow}

The MX Network Analytics Response consists of the following
parameters:[¶](#section-8.12-6){.pilcrow}

-   ::: {#section-8.12-7.1}
    Number of Delivery Connections.[¶](#section-8.12-7.1.1){.pilcrow}

    For each delivery connection, include the
    following:[¶](#section-8.12-7.1.2){.pilcrow}

    -   ::: {#section-8.12-7.1.3.1}
        Access Link Identifier:[¶](#section-8.12-7.1.3.1.1){.pilcrow}

        -   [Connection
            Type[¶](#section-8.12-7.1.3.1.2.1){.pilcrow}]{#section-8.12-7.1.3.1.2.1}
        -   [Connection
            ID[¶](#section-8.12-7.1.3.1.2.2){.pilcrow}]{#section-8.12-7.1.3.1.2.2}
        :::

    -   ::: {#section-8.12-7.1.3.2}
        Link Quality Indicator:[¶](#section-8.12-7.1.3.2.1){.pilcrow}

        -   ::: {#section-8.12-7.1.3.2.2.1}
            Bandwidth:[¶](#section-8.12-7.1.3.2.2.1.1){.pilcrow}

            -   [Predicted Value
                (Mbps)[¶](#section-8.12-7.1.3.2.2.1.2.1){.pilcrow}]{#section-8.12-7.1.3.2.2.1.2.1}
            -   [Likelihood
                (percent)[¶](#section-8.12-7.1.3.2.2.1.2.2){.pilcrow}]{#section-8.12-7.1.3.2.2.1.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-8.12-7.1.3.2.2.1.2.3){.pilcrow}]{#section-8.12-7.1.3.2.2.1.2.3}
            :::

        -   ::: {#section-8.12-7.1.3.2.2.2}
            Jitter:[¶](#section-8.12-7.1.3.2.2.2.1){.pilcrow}

            -   [Predicted Value (in
                seconds)[¶](#section-8.12-7.1.3.2.2.2.2.1){.pilcrow}]{#section-8.12-7.1.3.2.2.2.2.1}
            -   [Likelihood
                (percent)[¶](#section-8.12-7.1.3.2.2.2.2.2){.pilcrow}]{#section-8.12-7.1.3.2.2.2.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-8.12-7.1.3.2.2.2.2.3){.pilcrow}]{#section-8.12-7.1.3.2.2.2.2.3}
            :::

        -   ::: {#section-8.12-7.1.3.2.2.3}
            Latency:[¶](#section-8.12-7.1.3.2.2.3.1){.pilcrow}

            -   [Predicted Value (in
                seconds)[¶](#section-8.12-7.1.3.2.2.3.2.1){.pilcrow}]{#section-8.12-7.1.3.2.2.3.2.1}
            -   [Likelihood
                (percent)[¶](#section-8.12-7.1.3.2.2.3.2.2){.pilcrow}]{#section-8.12-7.1.3.2.2.3.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-8.12-7.1.3.2.2.3.2.3){.pilcrow}]{#section-8.12-7.1.3.2.2.3.2.3}
            :::

        -   ::: {#section-8.12-7.1.3.2.2.4}
            Signal Quality:[¶](#section-8.12-7.1.3.2.2.4.1){.pilcrow}

            -   [If delivery connection type is LTE, LTE_RSRP Predicted
                Value in decibel-milliwatts
                (dBm)[¶](#section-8.12-7.1.3.2.2.4.2.1){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.1}
            -   [If delivery connection type is LTE, LTE_RSRQ Predicted
                Value
                (dBm)[¶](#section-8.12-7.1.3.2.2.4.2.2){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.2}
            -   [If delivery connection type is 5G NR, NR_RSRP Predicted
                Value
                (dBm)[¶](#section-8.12-7.1.3.2.2.4.2.3){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.3}
            -   [If delivery connection type is 5G NR, NR_RSRQ Predicted
                Value
                (dBm)[¶](#section-8.12-7.1.3.2.2.4.2.4){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.4}
            -   [If delivery connection type is Wi-Fi, WLAN_RSSI
                Predicted Value
                (dBm)[¶](#section-8.12-7.1.3.2.2.4.2.5){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.5}
            -   [Likelihood
                (percent)[¶](#section-8.12-7.1.3.2.2.4.2.6){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.6}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-8.12-7.1.3.2.2.4.2.7){.pilcrow}]{#section-8.12-7.1.3.2.2.4.2.7}
            :::
        :::
    :::
:::
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Generic MAMS Signaling Flow](#name-generic-mams-signaling-flow){.section-name .selfRef} {#name-generic-mams-signaling-flow}

[Figure 16](#figure13){.xref} illustrates the MAMS signaling mechanism
for negotiation of network paths and flow protocols between the client
and the network. In this example scenario, the client is connected to
two networks (LTE and Wi-Fi).[¶](#section-9-1){.pilcrow}

[]{#name-mams-call-flow}

::: {#figure13}
::: {#section-9-2.1 .artwork .art-text .alignCenter}
                           +--------------------------------------------+
                           |      MAMS-enabled Network of Networks      |
                           | +-------+   +-------+   +-----+   +------+ |
    +------------------+   | |       |   |       |   |     |   |      | |
    |      Client      |   | |Network|   |Network|   |     |   |      | |
    | +------+ +-----+ |   | |   1   |   |   2   |   | NCM |   |N-MADP| |
    | |C-MADP| | CCM | |   | | (LTE) |   |(Wi-Fi)|   |     |   |      | |
    | +------+ +-----+ |   | +-------+   +-------+   +-----+   +------+ |
    |    |        |    |   |     |           |          |          |    |
    ++---+--------+----+   +-----+-----------+----------+----------+----+
     |   |        |              |           |          |          |
     |   |        |              |           |          |          |
     |   |  1. Setup Connection  |           |          |          |
     |<-----------+------------->|           |          |          |
     |   |        |              |           |          |          |
     |   |        |  2. MAMS Capabilities Exchange      |          |
     |   |        |<-------------+-----------+--------->|          |
     |   |        |              |           |          |          |
     |   |  3. Setup Connection  |           |          |          |
     |<--+---------------------------------->|          |          |
     |   |        |              |           |          |          |
     | 4c. Config | 4a. Negotiate network paths,        |4b. Config|
     |   | C-MADP |     Flow protocol, and parameters   |    N-MADP|
     |   |<------>|<-------------+-----------+--------->|<-------->|
     |   |        |              |           |          |          |
     |   |        | 5. Establish user-plane path according         |
     |   |        |    to selected flow protocol        |          |
     |   |<----------------------+-----------+-------------------->|
     |   |        |              |           |          |          |
     +   +        +              +           +          +          +
:::

[Figure 16](#figure-16){.selfRef}: [MAMS Call
Flow](#name-mams-call-flow){.selfRef}
:::

1.  [The client connects to Network 1 and gets an IP address assigned by
    Network 1.[¶](#section-9-3.1){.pilcrow}]{#section-9-3.1}

2.  [The CCM communicates with the NCM functional element via the
    Network 1 connection and exchanges capabilities and parameters for
    MAMS operation. Note: The NCM credentials (e.g., the NCM\'s IP
    address) can be made known to the client by
    provisioning.[¶](#section-9-3.2){.pilcrow}]{#section-9-3.2}

3.  [The client sets up the connection with Network 2 and gets an IP
    address assigned by Network
    2.[¶](#section-9-3.3){.pilcrow}]{#section-9-3.3}

4.  ::: {#section-9-3.4}
    The CCM and NCM negotiate capabilities and parameters for
    establishing network paths. The negotiated capabilities and
    parameters are then used to configure user-plane functions, i.e.,
    the N-MADP at the network and the C-MADP at the
    client.[¶](#section-9-3.4.1){.pilcrow}

    4a.
    :   The CCM and NCM negotiate network paths, flow routing and
        aggregation protocols, and related
        parameters.[¶](#section-9-3.4.2.1){.pilcrow}

    4b.
    :   The NCM communicates with the N-MADP to exchange and configure
        flow aggregation protocols, policies, and parameters in
        alignment with those negotiated with the
        CCM.[¶](#section-9-3.4.2.2){.pilcrow}

    4c.
    :   The CCM communicates with the C-MADP to exchange and configure
        flow aggregation protocols, policies, and parameters in
        alignment with those negotiated with the
        NCM.[¶](#section-9-3.4.2.3){.pilcrow}
    :::

5.  [The C-MADP and N-MADP establish the user-plane paths, e.g., using
    Internet Key Exchange Protocol (IKE) \[[RFC7296](#RFC7296){.xref}\]
    signaling, based on the negotiated flow aggregation protocols and
    parameters specified by the
    NCM.[¶](#section-9-3.5){.pilcrow}]{#section-9-3.5}

The CCM and NCM can further exchange messages containing access link
measurements for link maintenance by the NCM. The NCM evaluates the link
conditions in the UL and DL across LTE and Wi-Fi, based on link
measurements reported by the CCM and/or link-probing techniques, and
determines the policy for UL and DL user data distribution. The NCM and
CCM also negotiate application-level policies for categorizing
applications, e.g., based on the Differentiated Services Code Point
(DSCP), destination IP address, and determination of which available
network path needs to be used for transporting data of that category of
applications. The NCM configures the N-MADP, and the CCM configures the
C-MADP, based on the negotiated application policies. The CCM may apply
local application policies, in addition to the application policy
conveyed by the NCM.[¶](#section-9-4){.pilcrow}
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [Relationship to IETF Technologies](#name-relationship-to-ietf-techno){.section-name .selfRef} {#name-relationship-to-ietf-techno}

The MAMS framework leverages technologies developed in the IETF (such as
MPTCP and GRE) and enables a control-plane framework to negotiate the
use of these protocols between the client and the network. It also
addresses the limitations in scope of other multihoming protocols. For
example, the IKEv2 Mobility and Multihoming Protocol (MOBIKE
\[[RFC4555](#RFC4555){.xref}\]) scope indicates that it is limited to
multihoming between IPsec clients (tunnel mode IPsec Security
Associations) and does not support load balancing. To address this
limitation regarding how the multihoming scenario is handled, the MAMS
framework supports load balancing with the simultaneous use of multiple
access paths by negotiating the use of protocols like MPTCP. Unlike
MOBIKE, which only applies to endpoints connected with an IPsec tunnel
mode Security Association, the MAMS framework allows the flexibility to
use a wide range of tunneling protocols in the Adaptation
Layer.[¶](#section-10-1){.pilcrow}
:::

::: {#section-11 .section}
## [11.](#section-11){.section-number .selfRef} [Applying MAMS Control Procedures with MPTCP Proxy as User Plane](#name-applying-mams-control-proce){.section-name .selfRef} {#name-applying-mams-control-proce}

If the NCM determines that the N-MADP is to be instantiated with MPTCP
as the MX Convergence Protocol, it exchanges the MPTCP capability
support in the discovery and capability exchange procedures. An MPTCP
proxy (e.g., see
\[[TCPM-CONVERTERS](#I-D.ietf-tcpm-converters){.xref}\]) is configured
to be the N-MADP instance. The NCM then provides the credentials of the
MPTCP Proxy instance, along with related parameters, to the CCM. The CCM
configures the C-MADP with these parameters to connect to this MPTCP
proxy instance.[¶](#section-11-1){.pilcrow}

[Figure 17](#figure_mptcp_mams_uplane){.xref} illustrates the user-plane
protocol layering when MPTCP is configured to be the \"MX Convergence
Layer\" protocol. MPTCP manages traffic distribution and aggregation
over multiple delivery connections.[¶](#section-11-2){.pilcrow}

[]{#name-mams-user-plane-protocol-sta}

::: {#figure_mptcp_mams_uplane}
::: {#section-11-3.1 .artwork .art-text .alignCenter}

    +-----------------------------------------------------+
    |                        MPTCP                        |
    +-----------------+-----------------+-----------------+
    |       TCP       |       TCP       |       TCP       |
    +-----------------------------------------------------+
    |  MX Adaptation  |  MX Adaptation  |  MX Adaptation  |
    |  Layer          |  Layer          |  Layer          |
    |  (optional)     |  (optional)     |  (optional)     |
    +-----------------------------------------------------+
    |  Access #1 IP   |  Access #2 IP   |  Access #3 IP   |
    +-----------------+-----------------+-----------------+
:::

[Figure 17](#figure-17){.selfRef}: [MAMS User-Plane Protocol Stack with
MPTCP as MX Convergence
Layer](#name-mams-user-plane-protocol-sta){.selfRef}
:::

The client (C-MADP) sets up an MPTCP connection with the N-MADP to begin
with. The MAMS control procedures are then applied to do the
following:[¶](#section-11-4){.pilcrow}

-   [Connect to the appropriate MPTCP network endpoint, e.g., the MPTCP
    proxy (illustrated in [Figure
    18](#figure_mams_mptcp_flow_init){.xref}).[¶](#section-11-5.1){.pilcrow}]{#section-11-5.1}
-   [Control the addition of a second TCP subflow after the Wi-Fi
    connection is established and is deemed good (illustrated in [Figure
    19](#figure_mams_mptcp_flow_add_wifi){.xref}).[¶](#section-11-5.2){.pilcrow}]{#section-11-5.2}
-   [Control the behavior of the MPTCP scheduler, e.g., by using only
    the LTE subflow in the UL and both the LTE and Wi-Fi subflows in the
    DL (illustrated in [Figure
    20](#figure_mams_mptcp_flow_wifi_degrades){.xref}).[¶](#section-11-5.3){.pilcrow}]{#section-11-5.3}
-   [Provide faster response to Wi-Fi link degradation by proactively
    deleting a TCP subflow over Wi-Fi when poor link conditions are
    reported, maintaining optimum performance (illustrated in [Figure
    21](#figure_mams_mptcp_flow_wifi_delete){.xref}).[¶](#section-11-5.4){.pilcrow}]{#section-11-5.4}

[Figure 18](#figure_mams_mptcp_flow_init){.xref} shows the call flow
describing MAMS control procedures applied to configure the user plane
and dynamic optimal path selection in a scenario with the MPTCP proxy as
the convergence protocol in the user plane.[¶](#section-11-6){.pilcrow}

[]{#name-mams-assisted-mptcp-proxy-a}

::: {#figure_mams_mptcp_flow_init}
::: {#section-11-7.1 .artwork .art-text .alignCenter}

    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    |      |   |        |   |        |   |       |   |       |   |      |
    | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
    |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
    +------+   +--------+   +--------+   +-------+   +-------+   +------+
     +------------------------------------------------------------------+
     |           1. LTE Session Setup and IP Address Allocation         |
     +-----------------------------------------+-----------+------------+
      |                                        |           |        |
      |2. MX Discover (MAMS Version, MCC/MNC)  |           |        |
      +----------------------------------------+---------->|        |
      |3. MX System Info (Serving NCM IP/Port Address)     |        |
      |<------------+-------------+-------------+----------+        |
      |             |             |             |          |        |
      |4. MX Capability REQ (Supported Anchor/Delivery     |        |
      |             |        Links (Wi-Fi, LTE))           |        |
      +--------------------------------------------------->|        |
      |5. MX Capability RSP (Convergence/Adaptation Parameters)     |
      |<----------------------------------------+----------+        |
      |6. MX Capability ACK (ACCEPT)            |          |        |
      +-------------+-------------+----------------------->|        |
      |             |             |             |          |        |
      |7. MX Meas Config (Wi-Fi/LTE Measurement Thresholds/Period)  |
      |<---------------------------------------------------+        |
      |8. MX Meas Report (LTE RSRP, UL/DL TPUT) |          |        |
      +-----------------------------------------+--------->|        |
      |9. MX SSID Indication (List of SSIDs)    |          |        |
      |<------------+-------------+------------------------+        |
      |             |             |             |          |        |
      |10. MX Reconfiguration REQ (LTE IP)      |          |        |
      +--------------------------------------------------->|        |
      |11. MX Reconfiguration RSP               |          |        |
      |<----------------------------------------+----------+        |
      |12. MX UP Setup REQ (MPTCP proxy IP/Port, Aggregation)       |
      |<--------------------------+-------------+----------+        |
      |13. MX UP Setup RSP        |             |          |        |
      +-------------+-------------+-------------+--------->|        |
      |             | 14. MPTCP connection with designated |        |
      |             |     MPTCP proxy over LTE             |        |
      |             +-------------+-------------+----------+------->|
      |             |             |             |          |        |
      +             +             +             +          +        +
:::

[Figure 18](#figure-18){.selfRef}: [MAMS-Assisted MPTCP Proxy as User
Plane - Initial Setup with LTE
Leg](#name-mams-assisted-mptcp-proxy-a){.selfRef}
:::

The salient steps described in the call flow are as follows. The client
connects to the LTE network and obtains an IP address (assume that LTE
is the first connection). It then initiates the NCM discovery procedures
and exchanges capabilities, including the support for MPTCP as the
convergence protocol at both the network and the
client.[¶](#section-11-8){.pilcrow}

The CCM provides the LTE connection parameters to the NCM. The NCM
provides the parameters like MPTCP proxy IP address/port, and MPTCP
Client Key for configuring the Convergence Layer. This is useful if the
N-MADP is reachable, via a different IP address or/and port, from
different access networks. The current MPTCP signaling can\'t identify
or differentiate the MPTCP proxy IP address and port from multiple
access networks. The client uses the MPTCP Client Key during the subflow
creation, and this enables the N-MADP to uniquely identify the client,
even if a NAT is present. The N-MADP can then inform the NCM of the
subflow creation and parameters related to creating additional subflows.
Since LTE is the only connection, the user-plane traffic flows over the
single TCP subflow over the LTE connection. Optionally, the NCM provides
assistance information to the client on the neighboring/preferred Wi-Fi
networks that it can associate with.[¶](#section-11-9){.pilcrow}

[Figure 19](#figure_mams_mptcp_flow_add_wifi){.xref} describes the steps
where the client establishes a Wi-Fi connection. The CCM informs the NCM
of the Wi-Fi connection, along with such parameters as the Wi-Fi IP
address or the SSID. The NCM determines that the Wi-Fi connection needs
to be secured, configures the Adaptation Layer to use IPsec, and
provides the required parameters to the CCM. In addition, the NCM
provides the information for configuring the Convergence Layer (e.g.,
MPTCP proxy IP address) and provides the MX Traffic Steering Request to
indicate that the client [SHOULD]{.bcp14} use only the LTE access. The
NCM may do this, for example, on determining from the measurements that
the Wi-Fi link is not consistently good enough. As the Wi-Fi link
conditions improve, the NCM sends an MX Traffic Steering Request to use
Wi-Fi access as well. This triggers the client to establish the TCP
subflow over the Wi-Fi link with the MPTCP
proxy.[¶](#section-11-10){.pilcrow}

[]{#name-mams-assisted-mptcp-proxy-as}

::: {#figure_mams_mptcp_flow_add_wifi}
::: {#section-11-11.1 .artwork .art-text .alignCenter}

    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    |      |   |        |   |        |   |       |   |       |   |      |
    | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
    |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    +-------------------------------------------------------------------+
    |    Traffic over LTE in UL and DL over MPTCP Connection            |
    +-------------------------------------------------------------------+
    +-------------------------------------------------------------------+
    |    Wi-Fi Connection Establishment and IP Address Allocation       |
    +----------------------------------------------------------------+--+
     |             |             |             |          |         |
     |15. MX Reconfiguration REQ (Wi-Fi IP)    |          |         |
     +--------------------------------------------------->|         |
     |16. MX Reconfiguration RSP               |          |         |
     |<----------------------------------------+----------+         |
     |17. MX UP Setup REQ (MPTCP proxy IP/Port, Aggregation)        |
     |<--------------------------+-------------+----------+         |
     |18. MX UP Setup RSP        |             |          |         |
     +-------------+-------------+-------------+--------->|         |
     |             |19. IPsec Tunnel Establishment over Wi-Fi Path  |
     |             |<-------------------------------------+-------->|
     |             |             |             |          |         |
     |20. MX Meas Report (Wi-Fi RSSI,          |          |         |
     |    LTE RSRP, UL/DL TPUT)                |          |+------------+
     +-------------+-------------+-------------+--------->||Wait for    |
     |             |             |             |          ||good reports|
     |             |             |             |          |+------------+
     |21. MX Traffic Steering REQ (UL/DL access,          |         |
     |    Traffic Flow Templates (TFTs))                  | +----------+
     |<----------------------------------------+----------+ |Allow use |
     |                                         |          | |    of    |
     |22. MX Traffic Steering RSP (...)        |          | |Wi-Fi link|
     +-------------+-------------+----------------------->| +----------+
     |             |             |             |          |         |
     |             | 23. Add TCP subflow to the MPTCP connection    |
     |             |     over Wi-Fi link (IPsec Tunnel)             |
     |             |<---------------------------------------------->|
     |             |             |             |          |         |
    +----------------------------------------------------------------+
    ||      Aggregated Wi-Fi and LTE capacity for UL and DL         ||
    +----------------------------------------------------------------+
     |                                                              |
     |                                                              |
:::

[Figure 19](#figure-19){.selfRef}: [MAMS-Assisted MPTCP Proxy as User
Plane - Add Wi-Fi Leg](#name-mams-assisted-mptcp-proxy-as){.selfRef}
:::

[Figure 20](#figure_mams_mptcp_flow_wifi_degrades){.xref} describes the
steps where the client reports that Wi-Fi link conditions degrade in UL.
The MAMS control plane is used to continuously monitor the access link
conditions on Wi-Fi and LTE connections. The NCM may at some point
determine an increase in UL traffic on the Wi-Fi network, and trigger
the client to use only LTE in the UL via a MX Traffic Steering Request
to improve UL performance.[¶](#section-11-12){.pilcrow}

[]{#name-mams-assisted-mptcp-proxy-as-}

::: {#figure_mams_mptcp_flow_wifi_degrades}
::: {#section-11-13.1 .artwork .art-text .alignCenter}

    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    |      |   |        |   |        |   |       |   |       |   |      |
    | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
    |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    +-------------------------------------------------------------------+
    |   Traffic over LTE and Wi-Fi in UL And DL over MPTCP              |
    ++------------+-------------+-------------+------------+--------+---+
     |            |             |             |            |        |
     |24. MX Meas Report (Wi-Fi RSSI, LTE RSRP, UL/DL TPUT)| +------+---+
     +------------+-------------+-------------+----------->| |Reports of|
     |            |             |             |            | |bad Wi-Fi |
     |            |             |             |            | |UL tput   |
     |            |             |             |            | +----------+
     |25. MX Traffic Steering REQ (UL/DL Access, TFTs)     | +----------+
     |<---------------------------------------+------------+ |Disallow  |
     |            |             |             |            | |use of    |
     |26. MX Traffic Steering RSP (...)       |            | |Wi-Fi UL  |
     |------------+-------------+------------------------->| +------+---+
     |            |             |             |            |        |
    ++------------+-------------+-------------+------------+--------+---+
    | UL data to use TCP subflow over LTE link only,                    |
    |    aggregated Wi-Fi+LTE capacity for DL                           |
    ++------------+-------------+-------------+------------+--------+---+
     |            |             |             |            |        |
     +            +             +             +            +        +
:::

[Figure 20](#figure-20){.selfRef}: [MAMS-Assisted MPTCP Proxy as User
Plane - Wi-Fi UL
Degrades](#name-mams-assisted-mptcp-proxy-as-){.selfRef}
:::

[Figure 21](#figure_mams_mptcp_flow_wifi_delete){.xref} describes the
steps where the client reports that Wi-Fi link conditions have degraded
in both the UL and DL. As the Wi-Fi link conditions deteriorate further,
the NCM may decide to send a MX Traffic Steering Request that instructs
the client to stop using Wi-Fi and to use only the LTE access in both
the UL and DL. This condition may be maintained until the NCM
determines, based on reported measurements, that the Wi-Fi link has
again become usable.[¶](#section-11-14){.pilcrow}

[]{#name-mams-assisted-mptcp-proxy-as-u}

::: {#figure_mams_mptcp_flow_wifi_delete}
::: {#section-11-15.1 .artwork .art-text .alignCenter}

    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    |      |   |        |   |        |   |       |   |       |   |      |
    | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
    |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    +------------------------------------------------------------------+
    |          UL data to use TCP subflow over LTE link only,          |
    |               aggregated Wi-Fi+LTE capacity for DL               |
    ++------------+-------------+-------------+----------+---------+---+
     |            |             |             |          |         |
     |            |             |             |          |         |
     |27. MX Meas Report (Wi-Fi RSSI,         |          |         |
     |    LTE RSRP, UL/DL TPUT)               |          | +-------+----+
     +------------+-------------+-------------+--------->| | Reports of |
     |            |             |             |          | | bad Wi-Fi  |
     |            |             |             |          | | UL/DL tput |
     |            |             |             |          | +------------+
     |28. MX Traffic Steering REQ (UL/DL Access, TFTs)   | +------------+
     |<---------------------------------------+----------+ | Disallow   |
     |            |             |             |          | | use of     |
     |29. MX Traffic Steering RSP (...)       |          | | Wi-Fi      |
     +----------------------------------------+--------->| +------------+
     |            |30. Delete TCP subflow from MPTCP     |         |
     |            |    connection over Wi-Fi link        |         |
     |            |<---------------------------------------------->|
     |            |             |             |          |         |
    +--------------------------------------------------------------+
    ||            Traffic over LTE link only for DL and UL         |
    ||      (until client reports better Wi-Fi link conditions)    |
    +--------------------------------------------------------------+
     |            |             |             |          |         |
     +            +             +             +          +         +
:::

[Figure 21](#figure-21){.selfRef}: [MAMS-Assisted MPTCP Proxy as User
Plane - Part 4](#name-mams-assisted-mptcp-proxy-as-u){.selfRef}
:::
:::

::: {#section-12 .section}
## [12.](#section-12){.section-number .selfRef} [Applying MAMS Control Procedures for Network-Assisted Traffic Steering When There Is No Convergence Layer](#name-applying-mams-control-proced){.section-name .selfRef} {#name-applying-mams-control-proced}

[Figure 22](#figure_no_convergence){.xref} shows the call flow
describing MAMS control procedures applied for dynamic optimal path
selection in a scenario where Convergence and Adaptation Layer protocols
are omitted. This scenario indicates the applicability of a solution for
only the MAMS control plane.[¶](#section-12-1){.pilcrow}

In the capability exchange messages, the NCM and CCM negotiate that
Convergence-Layer and Adaptation-Layer protocols are not needed (or
supported). The CCM informs the NCM of the availability of the LTE and
Wi-Fi links. The NCM dynamically determines the access links (Wi-Fi or
LTE) to be used based on the reported measurements of link
quality.[¶](#section-12-2){.pilcrow}

[]{#name-mams-with-no-convergence-la}

::: {#figure_no_convergence}
::: {#section-12-3.1 .artwork .art-text .alignCenter}

    +------+   +--------+   +--------+   +-------+   +-------+   +------+
    |      |   |        |   |        |   |       |   |       |   |      |
    | CCM  |   | C-MADP |   | Wi-Fi  |   |  LTE  |   |  NCM  |   |N-MADP|
    |      |   |        |   |  N/W   |   |  N/W  |   |       |   |      |
    +------+   +--------+   +--------+   +-------+   +-------+   +------+
     +------------------------------------------------------------------+
     |       1. LTE Session Setup and IP Address Allocation             |
     +---------------------------------------+-------------+----------+-+
      |2. MX Discover (MAMS Version, MCC/MNC )             |          |
      +--------------------------------------+------------>|          |
      |3. MX System Info (Serving NCM IP/Port address)     |          |
      |<------------+-------------+----------+-------------|          |
      |             |             |          |             |          |
      |4. MX Capability REQ (Supported       |             |          |
      |   Anchor/Delivery Links (Wi-Fi, LTE))|             |          |
      +--------------------------------------------------->|          |
      |5. MX Capability RSP (No Convergence/Adaptation parameters)    |
      |<-------------------------------------+-------------+          |
      |6. MX Capability ACK (ACCEPT)         |             |          |
      +-------------+-------------+----------------------->|          |
      |             |             |          |             |          |
      |7. MX Meas Config (Wi-Fi/LTE Measurement Thresholds/Period)    |
      |<---------------------------------------------------|          |
      |8. MX Meas Report (LTE RSRP, UL/DL TPUT)            |          |
      |--------------------------------------+------------>|          |
      |9. MX SSID Ind (List of SSIDs)        |             |          |
      |<---------------------------------------------------|          |
    +-----------------------------------------------------------------++
    |      10. Wi-Fi Connection Setup and IP Address Allocation        |
    +-+-------------+-------------+----------+-------------+----------++
      |             |             |          |             |          |
      |11. MX Reconfiguration REQ (LTE IP, Wi-Fi IP)       |          |
      |--------------------------------------+------------>|          |
      |12. MX Reconfiguration RSP            |             |          |
      |<---------------------------------------------------|          |
    +-----------------------------------------------------------------++
    | Initial Condition, Data over LTE link only, Wi-Fi link is poor   |
    +------------------------------------------------------+----------++
      |             |             |          |             |          |
      |13. MX Meas Report (Wi-Fi RSSI,       |             |          |
      |    LTE RSRP, UL/DL TPUT)|            |             |+----------+
      |--------------------------------------------------->||Wi-Fi link|
      |             |             |          |             ||conditions|
      |             |             |          |             ||reported  |
      |             |             |          |             ||good      |
      |             |             |          |             |+----------+
      |             |             |          |             |          |
      |14. MX Traffic Steering REQ (UL/DL Access, TFTs)    |+----------+
      |<------------+-------------+----------+-------------||Steer     |
      |             |             |          |             ||traffic to|
      |15. MX Traffic Steering RSP (...)     |             ||use Wi-Fi |
      |<------------+-------------+----------+-------------||link      |
      |             |             |          |             |+----------+
      |             |             |          |             |          |
    +-----------------------------------------------------------------++
    |    Use Wi-Fi link for Data                                       |
    +------------------------------------------------------+----------++
      |             |             |          |             |          |
      +             +             +          +             +          +
:::

[Figure 22](#figure-22){.selfRef}: [MAMS with No Convergence
Layer](#name-mams-with-no-convergence-la){.selfRef}
:::
:::

::: {#section-13 .section}
## [13.](#section-13){.section-number .selfRef} [Coexistence of MX Adaptation and MX Convergence Layers](#name-coexistence-of-mx-adaptatio){.section-name .selfRef} {#name-coexistence-of-mx-adaptatio}

The MAMS user plane supports multiple instances and combinations of
protocols to be used at the MX Adaptation and the Convergence
Layer.[¶](#section-13-1){.pilcrow}

For example, one instance of the MX Convergence Layer can be MPTCP Proxy
and another instance can be GMA. The MX Adaptation for each can be
either a UDP tunnel or IPsec. IPsec may be set up when the network path
needs to be secured, e.g., to protect the TCP subflow traversing the
network path between the client and the MPTCP
proxy.[¶](#section-13-2){.pilcrow}

Each instance of the MAMS user plane, i.e., the combination of MX
Convergence-Layer and MX Adaptation-Layer protocols, can coexist
simultaneously and independently handle different traffic
types.[¶](#section-13-3){.pilcrow}
:::

::: {#section-14 .section}
## [14.](#section-14){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

::: {#section-14.1 .section}
### [14.1.](#section-14.1){.section-number .selfRef} [MAMS Control-Plane Security](#name-mams-control-plane-security){.section-name .selfRef} {#name-mams-control-plane-security}

The NCM functional element is hosted on a network node that is assumed
to be within a secure network, e.g., within the operator\'s network, and
is assumed to be protected against hijack
attacks.[¶](#section-14.1-1){.pilcrow}

For deployment scenarios where the client is configured (e.g., by the
network operator) to use a specific network path for exchanging
control-plane messages, and if the network path is assumed to be secure,
MAMS control messages will rely on security provided by the underlying
network.[¶](#section-14.1-2){.pilcrow}

For deployment scenarios where the security of the network path cannot
be assumed, NCM and CCM implementations [MUST]{.bcp14} support the
\"wss\" URI scheme \[[RFC6455](#RFC6455){.xref}\] and Transport Layer
Security (TLS) \[[RFC8446](#RFC8446){.xref}\] to secure the exchange of
control-plane messages between the NCM and the
CCM.[¶](#section-14.1-3){.pilcrow}

For deployment scenarios where client authentication is desired, the
WebSocket server can use any client authentication mechanisms available
to a generic HTTP server, such as cookies, HTTP authentication, or TLS
authentication.[¶](#section-14.1-4){.pilcrow}
:::

::: {#section-14.2 .section}
### [14.2.](#section-14.2){.section-number .selfRef} [MAMS User-Plane Security](#name-mams-user-plane-security){.section-name .selfRef} {#name-mams-user-plane-security}

User data in the MAMS framework relies on the security of the underlying
network transport paths. When this security cannot be assumed, the NCM
configures the use of protocols (e.g., IPsec
\[[RFC4301](#RFC4301){.xref}\] \[[RFC3948](#RFC3948){.xref}\]) in the MX
Adaptation Layer, for security.[¶](#section-14.2-1){.pilcrow}
:::
:::

::: {#section-15 .section}
## [15.](#section-15){.section-number .selfRef} [Implementation Considerations](#name-implementation-consideratio){.section-name .selfRef} {#name-implementation-consideratio}

The MAMS architecture builds on commonly available functions in clients
that can be used to deliver software updates over popular client
operating systems, thereby enabling rapid deployment and addressing the
large base of deployed clients.[¶](#section-15-1){.pilcrow}
:::

::: {#section-16 .section}
## [16.](#section-16){.section-number .selfRef} [Applicability to Multi-Access Edge Computing](#name-applicability-to-multi-acce){.section-name .selfRef} {#name-applicability-to-multi-acce}

Multi-access Edge Computing (MEC), previously known as Mobile Edge
Computing, is an access-edge cloud platform being considered at the
European Telecommunications Standards Institute (ETSI)
\[[ETSIMEC](#ETSIMEC){.xref}\], whose initial focus was to improve the
QoE by leveraging intelligence at the cellular (e.g., 3GPP technologies
like LTE) access edge, and the scope is now being extended to support
access technologies beyond 3GPP. The applicability of the framework
described in this document to the MEC platform has been evaluated and
tested in different network configurations by the
authors.[¶](#section-16-1){.pilcrow}

The NCM can be hosted on a MEC cloud server that is located in the
user-plane path at the edge of the multi-technology access network. The
NCM and CCM can negotiate the network path combinations based on an
application\'s needs and the necessary user-plane protocols to be used
across the multiple paths. The network conditions reported by the CCM to
the NCM can be complemented by a Radio Analytics application
\[[ETSIRNIS](#ETSIRNIS){.xref}\] residing at the MEC cloud server to
configure the uplink and downlink access paths according to changing
radio and congestion conditions.[¶](#section-16-2){.pilcrow}

The user-plane functional element, N-MADP, can either be collocated with
the NCM at the MEC cloud server (e.g., MEC-hosted applications) or
placed at a separate network element like a common user-plane gateway
across the multiple networks.[¶](#section-16-3){.pilcrow}

Also, even in scenarios where an N-MADP is not deployed, the NCM can be
used to augment the traffic-steering decisions at the
client.[¶](#section-16-4){.pilcrow}

The aim of these enhancements is to improve the end user\'s QoE by
leveraging the best network path based on an application\'s needs and
network conditions, and building on the advantages of significantly
reduced latency and the dynamic and real-time exposure of radio network
information available at the MEC.[¶](#section-16-5){.pilcrow}
:::

::: {#section-17 .section}
## [17.](#section-17){.section-number .selfRef} [Related Work in Other Industry and Standards Forums](#name-related-work-in-other-indus){.section-name .selfRef} {#name-related-work-in-other-indus}

The MAMS framework described in this document has been incorporated or
is proposed for incorporation as a solution to address multi-access
integration in multiple industry forums and standards. This section
describes the related work in other industry forums and the standards
organizations.[¶](#section-17-1){.pilcrow}

Wireless Broadband Alliance industry partners have published a white
paper that describes the applicability of different technologies for
multi-access integration to different deployments as part of their
\"Unlicensed Integration with 5G Networks\" project
\[[WBAUnl5G](#WBAUnl5G){.xref}\]. The white paper includes the MAMS
framework described in this document as a technology for integrating
unlicensed (Wi-Fi) networks with 5G networks above the 5G core
network.[¶](#section-17-2){.pilcrow}

The 3GPP is developing a technical report as part of its work item Study
on Access Traffic Steering, Switching, and Splitting (ATSSS). That
report, TR 23.793 \[[ATSSS](#ATSSS){.xref}\], contains a number of
potential solutions; Solution 1 in \[[ATSSS](#ATSSS){.xref}\] utilizes a
separate control plane for the flexible negotiation of user-plane
protocols and path measurements in a way that is similar to the MAMS
architecture described in this document.[¶](#section-17-3){.pilcrow}

The Small Cell Forum (SCF) \[[SCFTECH5G](#SCFTECH5G){.xref}\] plans to
develop a white paper as part of its work item on LTE/5G and Wi-Fi.
There is a proposal to include MAMS in this white
paper.[¶](#section-17-4){.pilcrow}

The ETSI Multi-access Edge Computing Phase 2 technical work is examining
many aspects of this work, including use cases for optimizing QoE and
resource utilization. The MAMS architecture and procedures outlined in
this document are included in the ETSI\'s use cases and requirements
document \[[ETSIMAMS](#ETSIMAMS){.xref}\].[¶](#section-17-5){.pilcrow}
:::

::: {#section-18 .section}
## [18.](#section-18){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document has no IANA actions.[¶](#section-18-1){.pilcrow}
:::

::: {#section-19 .section}
## [19.](#section-19){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-19.1 .section}
### [19.1.](#section-19.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.

\[RFC4301\]
:   [Kent, S.]{.refAuthor}[ and K. Seo]{.refAuthor}, [\"Security
    Architecture for the Internet Protocol\"]{.refTitle}, [RFC
    4301]{.seriesInfo}, [DOI 10.17487/RFC4301]{.seriesInfo}, December
    2005, \<<https://www.rfc-editor.org/info/rfc4301>\>.

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:::

::: {#section-19.2 .section}
### [19.2.](#section-19.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[ANDSF\]
:   [3rd Generation Partnership Project]{.refAuthor}, [\"Access Network
    Discovery and Selection Function (ANDSF) Management Object
    (MO)\"]{.refTitle}, [3GPP TS 24.312 version 15.0.0]{.refContent},
    [Technical Specification Group Core Network and
    Terminals]{.refContent}, June 2018,
    \<<https://www.3gpp.org/ftp//Specs/archive/24_series/24.312/24312-f00.zip>\>.

\[ATSSS\]
:   [3rd Generation Partnership Project]{.refAuthor}, [\"Study on access
    traffic steering, switch and splitting support in the 5G System
    (5GS) architecture\"]{.refTitle}, [Work in Progress, 3GPP TR 23.793
    v16.0.0]{.refContent}, December 2018,
    \<<https://www.3gpp.org/ftp/Specs/archive/23_series/23.793/>\>.

\[ETSIMAMS\]
:   [European Telecommunications Standards Institute]{.refAuthor},
    [\"Multi-access Edge Computing (MEC); Phase 2: Use Cases and
    Requirements\"]{.refTitle}, [ETSI GS MEC 002 v2.1.1]{.refContent},
    October 2018,
    \<<https://www.etsi.org/deliver/etsi_gs/MEC/001_099/002/02.01.01_60/gs_MEC002v020101p.pdf>\>.

\[ETSIMEC\]
:   [European Telecommunications Standards Institute]{.refAuthor},
    [\"Multi-access Edge Computing (MEC)\"]{.refTitle},
    \<<https://www.etsi.org/technologies/multi-access-edge-computing>\>.

\[ETSIRNIS\]
:   [European Telecommunications Standards Institute]{.refAuthor},
    [\"Mobile Edge Computing (MEC) Radio Network Information
    API\"]{.refTitle}, [ETSI GS MEC 012 v1.1.1]{.refContent}, July 2017,
    \<<https://www.etsi.org/deliver/etsi_gs/MEC/001_099/012/01.01.01_60/gs_MEC012v010101p.pdf>\>.

\[IEEE-80211\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Information
    technology-Telecommunications and information exchange between
    systems - Local and metropolitan area networks-Specific
    requirements - Part 11: Wireless LAN Medium Access Control (MAC) and
    Physical Layer (PHY) Specifications\"]{.refTitle}, [IEEE
    802.11-2016]{.seriesInfo},
    \<<https://ieeexplore.ieee.org/document/7786995>\>.

\[INTAREA-GMA\]
:   [Zhu, J.]{.refAuthor}[ and S. Kanugovi]{.refAuthor}, [\"Generic
    Multi-Access (GMA) Convergence Encapsulation
    Protocols\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft, draft-zhu-intarea-gma-05]{.seriesInfo}, 16 December
    2019, \<<https://tools.ietf.org/html/draft-zhu-intarea-gma-05>\>.

\[INTAREA-MAMS\]
:   [Zhu, J.]{.refAuthor}[, Seo, S.]{.refAuthor}[,
    Kanugovi, S.]{.refAuthor}[, and S. Peng]{.refAuthor}, [\"User-Plane
    Protocols for Multiple Access Management Service\"]{.refTitle},
    [Work in Progress]{.refContent}, [Internet-Draft,
    draft-zhu-intarea-mams-user-protocol-09]{.seriesInfo}, 4 March 2020,
    \<<https://tools.ietf.org/html/draft-zhu-intarea-mams-user-protocol-09>\>.

\[ITU-E212\]
:   [International Telecommunication Union]{.refAuthor}, [\"The
    international identification plan for public networks and
    subscriptions\"]{.refTitle}, [ITU-T Recommendation
    E.212]{.seriesInfo}, September 2016,
    \<<https://www.itu.int/rec/T-REC-E.212-201609-I/en>\>.

\[QUIC-MULTIPATH\]
:   [Coninck, Q.]{.refAuthor}[ and O. Bonaventure]{.refAuthor},
    [\"Multipath Extensions for QUIC (MP-QUIC)\"]{.refTitle}, [Work in
    Progress]{.refContent}, [Internet-Draft,
    draft-deconinck-quic-multipath-04]{.seriesInfo}, 5 March 2020,
    \<<https://tools.ietf.org/html/draft-deconinck-quic-multipath-04>\>.

\[RFC2784\]
:   [Farinacci, D.]{.refAuthor}[, Li, T.]{.refAuthor}[,
    Hanks, S.]{.refAuthor}[, Meyer, D.]{.refAuthor}[, and P.
    Traina]{.refAuthor}, [\"Generic Routing Encapsulation
    (GRE)\"]{.refTitle}, [RFC 2784]{.seriesInfo}, [DOI
    10.17487/RFC2784]{.seriesInfo}, March 2000,
    \<<https://www.rfc-editor.org/info/rfc2784>\>.

\[RFC2890\]
:   [Dommety, G.]{.refAuthor}, [\"Key and Sequence Number Extensions to
    GRE\"]{.refTitle}, [RFC 2890]{.seriesInfo}, [DOI
    10.17487/RFC2890]{.seriesInfo}, September 2000,
    \<<https://www.rfc-editor.org/info/rfc2890>\>.

\[RFC3948\]
:   [Huttunen, A.]{.refAuthor}[, Swander, B.]{.refAuthor}[,
    Volpe, V.]{.refAuthor}[, DiBurro, L.]{.refAuthor}[, and M.
    Stenberg]{.refAuthor}, [\"UDP Encapsulation of IPsec ESP
    Packets\"]{.refTitle}, [RFC 3948]{.seriesInfo}, [DOI
    10.17487/RFC3948]{.seriesInfo}, January 2005,
    \<<https://www.rfc-editor.org/info/rfc3948>\>.

\[RFC4555\]
:   [Eronen, P.]{.refAuthor}, [\"IKEv2 Mobility and Multihoming Protocol
    (MOBIKE)\"]{.refTitle}, [RFC 4555]{.seriesInfo}, [DOI
    10.17487/RFC4555]{.seriesInfo}, June 2006,
    \<<https://www.rfc-editor.org/info/rfc4555>\>.

\[RFC4960\]
:   [Stewart, R., Ed.]{.refAuthor}, [\"Stream Control Transmission
    Protocol\"]{.refTitle}, [RFC 4960]{.seriesInfo}, [DOI
    10.17487/RFC4960]{.seriesInfo}, September 2007,
    \<<https://www.rfc-editor.org/info/rfc4960>\>.

\[RFC6347\]
:   [Rescorla, E.]{.refAuthor}[ and N. Modadugu]{.refAuthor},
    [\"Datagram Transport Layer Security Version 1.2\"]{.refTitle}, [RFC
    6347]{.seriesInfo}, [DOI 10.17487/RFC6347]{.seriesInfo}, January
    2012, \<<https://www.rfc-editor.org/info/rfc6347>\>.

\[RFC6455\]
:   [Fette, I.]{.refAuthor}[ and A. Melnikov]{.refAuthor}, [\"The
    WebSocket Protocol\"]{.refTitle}, [RFC 6455]{.seriesInfo}, [DOI
    10.17487/RFC6455]{.seriesInfo}, December 2011,
    \<<https://www.rfc-editor.org/info/rfc6455>\>.

\[RFC6824\]
:   [Ford, A.]{.refAuthor}[, Raiciu, C.]{.refAuthor}[,
    Handley, M.]{.refAuthor}[, and O. Bonaventure]{.refAuthor}, [\"TCP
    Extensions for Multipath Operation with Multiple
    Addresses\"]{.refTitle}, [RFC 6824]{.seriesInfo}, [DOI
    10.17487/RFC6824]{.seriesInfo}, January 2013,
    \<<https://www.rfc-editor.org/info/rfc6824>\>.

\[RFC7231\]
:   [Fielding, R., Ed.]{.refAuthor}[ and J. Reschke, Ed.]{.refAuthor},
    [\"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
    Content\"]{.refTitle}, [RFC 7231]{.seriesInfo}, [DOI
    10.17487/RFC7231]{.seriesInfo}, June 2014,
    \<<https://www.rfc-editor.org/info/rfc7231>\>.

\[RFC7296\]
:   [Kaufman, C.]{.refAuthor}[, Hoffman, P.]{.refAuthor}[,
    Nir, Y.]{.refAuthor}[, Eronen, P.]{.refAuthor}[, and T.
    Kivinen]{.refAuthor}, [\"Internet Key Exchange Protocol Version 2
    (IKEv2)\"]{.refTitle}, [STD 79]{.seriesInfo}, [RFC
    7296]{.seriesInfo}, [DOI 10.17487/RFC7296]{.seriesInfo}, October
    2014, \<<https://www.rfc-editor.org/info/rfc7296>\>.

\[RFC8259\]
:   [Bray, T., Ed.]{.refAuthor}, [\"The JavaScript Object Notation
    (JSON) Data Interchange Format\"]{.refTitle}, [STD 90]{.seriesInfo},
    [RFC 8259]{.seriesInfo}, [DOI 10.17487/RFC8259]{.seriesInfo},
    December 2017, \<<https://www.rfc-editor.org/info/rfc8259>\>.

\[RFC8446\]
:   [Rescorla, E.]{.refAuthor}, [\"The Transport Layer Security (TLS)
    Protocol Version 1.3\"]{.refTitle}, [RFC 8446]{.seriesInfo}, [DOI
    10.17487/RFC8446]{.seriesInfo}, August 2018,
    \<<https://www.rfc-editor.org/info/rfc8446>\>.

\[SCFTECH5G\]
:   [Small Cell Forum]{.refAuthor}, [\"Small Cell Forum\"]{.refTitle},
    \<<https://scf.io/>\>.

\[ServDesc3GPP\]
:   [3rd Generation Partnership Project]{.refAuthor}, [\"General Packet
    Radio Service (GPRS); Service description; Stage 2\"]{.refTitle},
    [3GPP TS 23.060 version 16.0.0]{.refContent}, [Technical
    Specification Group Services and System Aspects]{.refContent}, March
    2019,
    \<<https://www.3gpp.org/ftp/Specs/archive/23_series/23.060/23060-g00.zip>\>.

\[TCPM-CONVERTERS\]
:   [Bonaventure, O.]{.refAuthor}[, Boucadair, M.]{.refAuthor}[,
    Gundavelli, S.]{.refAuthor}[, Seo, S.]{.refAuthor}[, and B.
    Hesmans]{.refAuthor}, [\"0-RTT TCP Convert Protocol\"]{.refTitle},
    [Work in Progress]{.refContent}, [Internet-Draft,
    draft-ietf-tcpm-converters-19]{.seriesInfo}, 22 March 2020,
    \<<https://tools.ietf.org/html/draft-ietf-tcpm-converters-19>\>.

\[WBAUnl5G\]
:   [Wireless Broadband Alliance]{.refAuthor}, [\"Unlicensed Integration
    with 5G Networks\"]{.refTitle},
    \<<https://wballiance.com/resource/unlicensed-integration-with-5g-networks/>\>.
:::
:::

::: {#section-appendix.a .section}
## [Appendix A.](#section-appendix.a){.section-number .selfRef} [MAMS Control-Plane Optimization over Secure Connections](#name-mams-control-plane-optimiza){.section-name .selfRef} {#name-mams-control-plane-optimiza}

This appendix is informative, and provides indicative information about
how MAMS operates.[¶](#section-appendix.a-1){.pilcrow}

If the connection between the CCM and the NCM over which the MAMS
control-plane messages are transported is assumed to be secure, UDP is
used as the transport for management and control messages between the
NCM and the CCM (see [Figure
23](#figure19){.xref}).[¶](#section-appendix.a-2){.pilcrow}

[]{#name-udp-based-mams-control-plan}

::: {#figure19}
::: {#section-appendix.a-3.1 .artwork .art-text .alignCenter}

    +-------------------------------------------------+
    |        Multi-Access (MX) Control Message        |
    |-------------------------------------------------|
    |                       UDP                       |
    |-------------------------------------------------|
:::

[Figure 23](#figure-23){.selfRef}: [UDP-Based MAMS Control-Plane
Protocol Stack](#name-udp-based-mams-control-plan){.selfRef}
:::
:::

::: {#section-appendix.b .section}
## [Appendix B.](#section-appendix.b){.section-number .selfRef} [MAMS Application Interface](#name-mams-application-interface){.section-name .selfRef} {#name-mams-application-interface}

This appendix describes the MAMS Application Interface. It does not
provide normative text for the definition of the MAMS framework or
protocols, but offers additional information that may be used to
construct a system based on the MAMS
framework.[¶](#section-appendix.b-1){.pilcrow}

::: {#section-b.1 .section}
## [B.1.](#section-b.1){.section-number .selfRef} [Overall Design](#name-overall-design){.section-name .selfRef} {#name-overall-design}

The CCM hosts an HTTPS server for applications to communicate and
request services. This document assumes, from a security point of view,
that all CCMs and the communicating application instances are hosted in
a single administrative domain.[¶](#section-b.1-1){.pilcrow}

The content of messages is described in JavaScript Object Notation
(JSON) format. They offer RESTful APIs for
communication.[¶](#section-b.1-2){.pilcrow}

The exact mechanism regarding how the application knows about the
endpoint of the CCM is out of scope for this document. This mechanism
may instead be provided as part of the application
settings.[¶](#section-b.1-3){.pilcrow}
:::

::: {#section-b.2 .section}
## [B.2.](#section-b.2){.section-number .selfRef} [Notation](#name-notation){.section-name .selfRef} {#name-notation}

The documentation of APIs is provided in the OpenAPI format, using
Swagger v2.0. See [Appendix
D](#CCM_APP_APIs){.xref}.[¶](#section-b.2-1){.pilcrow}
:::

::: {#section-b.3 .section}
## [B.3.](#section-b.3){.section-number .selfRef} [Error Indication](#name-error-indication){.section-name .selfRef} {#name-error-indication}

For every API, there could be an error response if the objective of the
API could not be met; see
\[[RFC7231](#RFC7231){.xref}\].[¶](#section-b.3-1){.pilcrow}
:::

::: {#section-b.4 .section}
## [B.4.](#section-b.4){.section-number .selfRef} [CCM APIs](#name-ccm-apis){.section-name .selfRef} {#name-ccm-apis}

The following subsections describe the APIs exposed by the CCM to the
applications.[¶](#section-b.4-1){.pilcrow}

::: {#section-b.4.1 .section}
### [B.4.1.](#section-b.4.1){.section-number .selfRef} [GET Capabilities](#name-get-capabilities){.section-name .selfRef} {#name-get-capabilities}

The CCM provides an HTTPS GET interface as \"/ccm/v1.0/capabilities\"
for the application to query the capabilities supported by the CCM
instance.[¶](#section-b.4.1-1){.pilcrow}

[]{#name-ccm-api-get-procedures}

::: {#figure_ccm_api_get}
::: {#section-b.4.1-2.1 .artwork .art-text .alignCenter}

    +---------+                                            +-----------+
    |         |                                            |           |
    |   App   |--------- HTTPS GET / Capabilities -------->|    CCM    |
    |         |                                            |           |
    +---------+                                            +-----------+
:::

[Figure 24](#figure-24){.selfRef}: [CCM API - GET
Procedures](#name-ccm-api-get-procedures){.selfRef}
:::

The CCM shall provide information regarding its capabilities as
follows:[¶](#section-b.4.1-3){.pilcrow}

-   [Supported Features: One or more of the \"Feature Name\" values, as
    defined in the MX Feature Activation List parameter of the MX
    Capability Request ([Appendix
    C.2.5](#feat_act_stat){.xref}).[¶](#section-b.4.1-4.1){.pilcrow}]{#section-b.4.1-4.1}
-   [Supported Connections: Supported connection types and connection
    IDs.[¶](#section-b.4.1-4.2){.pilcrow}]{#section-b.4.1-4.2}
-   [Supported MX Adaptation Layers: List of MX Adaptation Layer
    protocols supported by the N-MADP instance, along with the
    connection types where these are supported and their respective
    parameters.[¶](#section-b.4.1-4.3){.pilcrow}]{#section-b.4.1-4.3}
-   [Supported MX Convergence Layers: List of supported MX Convergence
    Layer protocols, along with the parameters associated with the
    respective convergence
    technique.[¶](#section-b.4.1-4.4){.pilcrow}]{#section-b.4.1-4.4}
:::

::: {#section-b.4.2 .section}
### [B.4.2.](#section-b.4.2){.section-number .selfRef} [Posting Application Requirements](#name-posting-application-require){.section-name .selfRef} {#name-posting-application-require}

The CCM provides an HTTPS POST interface as
\"/ccm/v1.0/app_requirements\" for the application to post the needs of
the application data streams to the CCM
instance.[¶](#section-b.4.2-1){.pilcrow}

[]{#name-ccm-api-post-procedures}

::: {#figure_ccm_api_post}
::: {#section-b.4.2-2.1 .artwork .art-text .alignCenter}

    +---------+                                            +-----------+
    |         |                                            |           |
    |   App   |-------- HTTPS POST / App Requirements ---->|    CCM    |
    |         |                                            |           |
    +---------+                                            +-----------+
:::

[Figure 25](#figure-25){.selfRef}: [CCM API - POST
Procedures](#name-ccm-api-post-procedures){.selfRef}
:::

The CCM shall provide for the application to post the following
requirements for its different data
streams:[¶](#section-b.4.2-3){.pilcrow}

-   [Number of Data Stream
    Types.[¶](#section-b.4.2-4.1){.pilcrow}]{#section-b.4.2-4.1}

-   ::: {#section-b.4.2-4.2}
    For each data stream type, specify the following parameters for the
    link, which are preferred by the
    application:[¶](#section-b.4.2-4.2.1){.pilcrow}

    -   [Protocol Type: Transport-layer protocol associated with the
        application data stream
        packets.[¶](#section-b.4.2-4.2.2.1){.pilcrow}]{#section-b.4.2-4.2.2.1}

    -   [Port Range: Supported connection types and connection
        IDs.[¶](#section-b.4.2-4.2.2.2){.pilcrow}]{#section-b.4.2-4.2.2.2}

    -   ::: {#section-b.4.2-4.2.2.3}
        Traffic QoS: Quality of service parameters, as
        follows:[¶](#section-b.4.2-4.2.2.3.1){.pilcrow}

        -   [Bandwidth[¶](#section-b.4.2-4.2.2.3.2.1){.pilcrow}]{#section-b.4.2-4.2.2.3.2.1}
        -   [Latency[¶](#section-b.4.2-4.2.2.3.2.2){.pilcrow}]{#section-b.4.2-4.2.2.3.2.2}
        -   [Jitter[¶](#section-b.4.2-4.2.2.3.2.3){.pilcrow}]{#section-b.4.2-4.2.2.3.2.3}
        :::
    :::
:::

::: {#section-b.4.3 .section}
### [B.4.3.](#section-b.4.3){.section-number .selfRef} [Getting Predictive Link Parameters](#name-getting-predictive-link-par){.section-name .selfRef} {#name-getting-predictive-link-par}

The CCM provides an HTTPS GET interface as
\"/ccm/v1.0/predictive_link_params\" for the application to get the
predicted link parameters from the CCM
instance.[¶](#section-b.4.3-1){.pilcrow}

[]{#name-ccm-api-getting-predictive-}

::: {#figure_ccm_api_get_prediction}
::: {#section-b.4.3-2.1 .artwork .art-text .alignCenter}

    +---------+                                             +-----------+
    |         |                                             |           |
    |   App   |----- HTTPS GET / Predictive Link Params --->|    CCM    |
    |         |                                             |           |
    +---------+                                             +-----------+
:::

[Figure 26](#figure-26){.selfRef}: [CCM API - Getting Predictive Link
Parameters](#name-ccm-api-getting-predictive-){.selfRef}
:::

The CCM asks the NCM for link parameters via the MAMS Network Analytics
Request Procedure ([Section 8.12](#network_analytics_section){.xref})
and includes the information in response to the API
invocation.[¶](#section-b.4.3-3){.pilcrow}

-   ::: {#section-b.4.3-4.1}
    Number of Delivery Connections.[¶](#section-b.4.3-4.1.1){.pilcrow}

    For each delivery connection, include the
    following:[¶](#section-b.4.3-4.1.2){.pilcrow}

    -   ::: {#section-b.4.3-4.1.3.1}
        Access Link Identifier:[¶](#section-b.4.3-4.1.3.1.1){.pilcrow}

        -   [Connection
            Type[¶](#section-b.4.3-4.1.3.1.2.1){.pilcrow}]{#section-b.4.3-4.1.3.1.2.1}
        -   [Connection
            ID[¶](#section-b.4.3-4.1.3.1.2.2){.pilcrow}]{#section-b.4.3-4.1.3.1.2.2}
        :::

    -   ::: {#section-b.4.3-4.1.3.2}
        Link Quality Indicator[¶](#section-b.4.3-4.1.3.2.1){.pilcrow}

        -   ::: {#section-b.4.3-4.1.3.2.2.1}
            Bandwidth:[¶](#section-b.4.3-4.1.3.2.2.1.1){.pilcrow}

            -   [Predicted Value
                (Mbps)[¶](#section-b.4.3-4.1.3.2.2.1.2.1){.pilcrow}]{#section-b.4.3-4.1.3.2.2.1.2.1}
            -   [Likelihood
                (percent)[¶](#section-b.4.3-4.1.3.2.2.1.2.2){.pilcrow}]{#section-b.4.3-4.1.3.2.2.1.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.1.2.3){.pilcrow}]{#section-b.4.3-4.1.3.2.2.1.2.3}
            :::

        -   ::: {#section-b.4.3-4.1.3.2.2.2}
            Jitter:[¶](#section-b.4.3-4.1.3.2.2.2.1){.pilcrow}

            -   [Predicted Value (in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.2.2.1){.pilcrow}]{#section-b.4.3-4.1.3.2.2.2.2.1}
            -   [Likelihood
                (percent)[¶](#section-b.4.3-4.1.3.2.2.2.2.2){.pilcrow}]{#section-b.4.3-4.1.3.2.2.2.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.2.2.3){.pilcrow}]{#section-b.4.3-4.1.3.2.2.2.2.3}
            :::

        -   ::: {#section-b.4.3-4.1.3.2.2.3}
            Latency:[¶](#section-b.4.3-4.1.3.2.2.3.1){.pilcrow}

            -   [Predicted Value (in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.3.2.1){.pilcrow}]{#section-b.4.3-4.1.3.2.2.3.2.1}
            -   [Likelihood
                (percent)[¶](#section-b.4.3-4.1.3.2.2.3.2.2){.pilcrow}]{#section-b.4.3-4.1.3.2.2.3.2.2}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.3.2.3){.pilcrow}]{#section-b.4.3-4.1.3.2.2.3.2.3}
            :::

        -   ::: {#section-b.4.3-4.1.3.2.2.4}
            Signal Quality[¶](#section-b.4.3-4.1.3.2.2.4.1){.pilcrow}

            -   [If delivery connection type is LTE, LTE_RSRP Predicted
                Value
                (dBm)[¶](#section-b.4.3-4.1.3.2.2.4.2.1){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.1}
            -   [If delivery connection type is LTE, LTE_RSRQ Predicted
                Value
                (dBm)[¶](#section-b.4.3-4.1.3.2.2.4.2.2){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.2}
            -   [If delivery connection type is 5G NR, NR_RSRP Predicted
                Value
                (dBm)[¶](#section-b.4.3-4.1.3.2.2.4.2.3){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.3}
            -   [If delivery connection type is 5G NR, NR_RSRQ Predicted
                Value
                (dBm)[¶](#section-b.4.3-4.1.3.2.2.4.2.4){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.4}
            -   [If delivery connection type is Wi-Fi, WLAN_RSSI
                Predicted Value
                (dBm)[¶](#section-b.4.3-4.1.3.2.2.4.2.5){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.5}
            -   [Likelihood
                (percent)[¶](#section-b.4.3-4.1.3.2.2.4.2.6){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.6}
            -   [Prediction Validity (Validity Time, in
                seconds)[¶](#section-b.4.3-4.1.3.2.2.4.2.7){.pilcrow}]{#section-b.4.3-4.1.3.2.2.4.2.7}
            :::
        :::
    :::
:::
:::
:::

::: {#section-appendix.c .section}
## [Appendix C.](#section-appendix.c){.section-number .selfRef} [MAMS Control-Plane Messages Described Using JSON](#name-mams-control-plane-messages){.section-name .selfRef} {#name-mams-control-plane-messages}

MAMS control-plane messages are exchanged between the CCM and the NCM.
This non-normative appendix describes the format and content of messages
using JSON
\[[RFC8259](#RFC8259){.xref}\].[¶](#section-appendix.c-1){.pilcrow}

::: {#section-c.1 .section}
## [C.1.](#section-c.1){.section-number .selfRef} [Protocol Specification: General Processing](#name-protocol-specification-gene){.section-name .selfRef} {#name-protocol-specification-gene}

::: {#section-c.1.1 .section}
### [C.1.1.](#section-c.1.1){.section-number .selfRef} [Notation](#name-notation-2){.section-name .selfRef} {#name-notation-2}

This document uses JSONString, JSONNumber, and JSONBool to indicate the
JSON string, number, and boolean types,
respectively.[¶](#section-c.1.1-1){.pilcrow}

This document uses an adaptation of the C-style struct notation to
describe JSON objects. A JSON object consists of name/value pairs. This
document refers to each pair as a field. In some contexts, this document
also refers to a field as an attribute. The name of a field/attribute
may be referred to as the key. An optional field is enclosed by \"\[
\]\". In the definitions, the JSON names of the fields are case
sensitive. An array is indicated by two numbers in angle brackets,
\<m..n>, where m indicates the minimal number of values and n is the
maximum. When this document uses \* for n, it means no upper
bound.[¶](#section-c.1.1-2){.pilcrow}

For example, the text below describes a new type Type4, with three
fields: \"name1\", \"name2\", and \"name3\", respectively. The \"name3\"
field is optional, and the \"name2\" field is an array of at least one
value.[¶](#section-c.1.1-3){.pilcrow}

::: {#section-c.1.1-4}
``` {.sourcecode .lang-json}
    object { Type1 name1; Type2 name2 <1..*>; [Type3 name3;] } Type4;
```

[¶](#section-c.1.1-4){.pilcrow}
:::

This document uses subtyping to denote that one type is derived from
another type. The example below denotes that TypeDerived is derived from
TypeBase. TypeDerived includes all fields defined in TypeBase. If
TypeBase does not have a \"name1\" field, TypeDerived will have a new
field called \"name1\". If TypeBase already has a field called \"name1\"
but with a different type, TypeDerived will have a field called
\"name1\" with the type defined in TypeDerived (i.e., Type1 in the
example).[¶](#section-c.1.1-5){.pilcrow}

::: {#section-c.1.1-6}
``` {.sourcecode .lang-json}
    object { Type1 name1; } TypeDerived : TypeBase;
```

[¶](#section-c.1.1-6){.pilcrow}
:::

Note that, despite the notation, no standard, machine-readable interface
definition or schema is provided in this document. Extension documents
may describe these as necessary.[¶](#section-c.1.1-7){.pilcrow}

For compatibility with publishing requirements, line breaks have been
inserted inside long JSON strings, with the following continuation lines
indented. To form the valid JSON example, any line breaks inside a
string must be replaced with a space and any other white space after the
line break removed.[¶](#section-c.1.1-8){.pilcrow}
:::

::: {#section-c.1.2 .section}
### [C.1.2.](#section-c.1.2){.section-number .selfRef} [Discovery Procedure](#name-discovery-procedure){.section-name .selfRef} {#name-discovery-procedure}

::: {#section-c.1.2.1 .section}
#### [C.1.2.1.](#section-c.1.2.1){.section-number .selfRef} [MX Discover Message](#name-mx-discover-message){.section-name .selfRef} {#name-mx-discover-message}

This message is the first message sent by the CCM to discover the
presence of NCM in the network. It contains only the base information as
described in [Appendix C.2.1](#mx_base){.xref} with message_type set as
mx_discover.[¶](#section-c.1.2.1-1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.2.1-2){.pilcrow}

::: {#section-c.1.2.1-3}
``` {.sourcecode .lang-json}
    object {
        [JSONString MCC_MNC_Tuple;]
     } MXDiscover : MXBase;
```

[¶](#section-c.1.2.1-3){.pilcrow}
:::
:::
:::

::: {#section-c.1.3 .section}
### [C.1.3.](#section-c.1.3){.section-number .selfRef} [System Information Procedure](#name-system-information-procedur){.section-name .selfRef} {#name-system-information-procedur}

::: {#section-c.1.3.1 .section}
#### [C.1.3.1.](#section-c.1.3.1){.section-number .selfRef} [MX System Info Message](#name-mx-system-info-message){.section-name .selfRef} {#name-mx-system-info-message}

This message is sent by the NCM to the CCM to inform the endpoints that
the NCM supports MAMS functionality. In addition to the base information
([Appendix C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.3.1-1){.pilcrow}

\(a\)
:   NCM Connections ([Appendix
    C.2.3](#ncm_connx){.xref}).[¶](#section-c.1.3.1-2.1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.3.1-3){.pilcrow}

::: {#section-c.1.3.1-4}
``` {.sourcecode .lang-json}
    object {
       NCMConnections ncm_connections;
    } MXSystemInfo : MXBase;
```

[¶](#section-c.1.3.1-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.4 .section}
### [C.1.4.](#section-c.1.4){.section-number .selfRef} [Capability Exchange Procedure](#name-capability-exchange-procedu){.section-name .selfRef} {#name-capability-exchange-procedu}

::: {#section-c.1.4.1 .section}
#### [C.1.4.1.](#section-c.1.4.1){.section-number .selfRef} [MX Capability Request](#name-mx-capability-request){.section-name .selfRef} {#name-mx-capability-request}

This message is sent by the CCM to the NCM to indicate the capabilities
of the CCM instance available to the NCM indicated in the System Info
message earlier. In addition to the base information ([Appendix
C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.4.1-1){.pilcrow}

\(a\)
:   Features and their activation status: See [Appendix
    C.2.5](#feat_act_stat){.xref}.[¶](#section-c.1.4.1-2.1){.pilcrow}

\(b\)
:   Number of Anchor Connections: The number of anchor connections
    (toward the core) supported by the
    NCM.[¶](#section-c.1.4.1-2.2){.pilcrow}

\(c\)
:   Anchor connections: See [Appendix
    C.2.6](#anchor_conn){.xref}.[¶](#section-c.1.4.1-2.3){.pilcrow}

\(d\)
:   Number of Delivery Connections: The number of delivery connections
    (toward the access) supported by the
    NCM.[¶](#section-c.1.4.1-2.4){.pilcrow}

\(e\)
:   Delivery connections: See [Appendix
    C.2.7](#delivery_conn){.xref}.[¶](#section-c.1.4.1-2.5){.pilcrow}

\(f\)
:   Convergence methods: See [Appendix
    C.2.9](#conv_methods){.xref}.[¶](#section-c.1.4.1-2.6){.pilcrow}

\(g\)
:   Adaptation methods: See [Appendix
    C.2.10](#adapt_methods){.xref}.[¶](#section-c.1.4.1-2.7){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.4.1-3){.pilcrow}

::: {#section-c.1.4.1-4}
``` {.sourcecode .lang-json}
    object {
       FeaturesActive feature_active;
       JSONNumber num_anchor_connections;
       AnchorConnections anchor_connections;
       JSONNumber num_delivery_connections;
       DeliveryConnections delivery_connections;
       ConvergenceMethods convergence_methods;
       AdaptationMethods adaptation_methods
    } MXCapabilityReq : MXBase;
```

[¶](#section-c.1.4.1-4){.pilcrow}
:::
:::

::: {#section-c.1.4.2 .section}
#### [C.1.4.2.](#section-c.1.4.2){.section-number .selfRef} [MX Capability Response](#name-mx-capability-response){.section-name .selfRef} {#name-mx-capability-response}

This message is sent by the NCM to the CCM to indicate the capabilities
of the NCM instance and unique session identifier for the CCM. In
addition to the base information ([Appendix C.2.1](#mx_base){.xref}), it
contains the following information:[¶](#section-c.1.4.2-1){.pilcrow}

\(a\)
:   Features and their activation status: See [Appendix
    C.2.5](#feat_act_stat){.xref}.[¶](#section-c.1.4.2-2.1){.pilcrow}

\(b\)
:   Number of Anchor Connections: The number of anchor connections
    (toward the core) supported by the
    NCM.[¶](#section-c.1.4.2-2.2){.pilcrow}

\(c\)
:   Anchor connections: See [Appendix
    C.2.6](#anchor_conn){.xref}.[¶](#section-c.1.4.2-2.3){.pilcrow}

\(d\)
:   Number of Delivery Connections: The number of delivery connections
    (toward the access) supported by the
    NCM.[¶](#section-c.1.4.2-2.4){.pilcrow}

\(e\)
:   Delivery connections: See [Appendix
    C.2.7](#delivery_conn){.xref}.[¶](#section-c.1.4.2-2.5){.pilcrow}

\(f\)
:   Convergence methods: See [Appendix
    C.2.9](#conv_methods){.xref}.[¶](#section-c.1.4.2-2.6){.pilcrow}

\(g\)
:   Adaptation methods: See [Appendix
    C.2.10](#adapt_methods){.xref}.[¶](#section-c.1.4.2-2.7){.pilcrow}

\(h\)
:   Unique Session ID: This uniquely identifies the session between the
    CCM and the NCM in a network. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.4.2-2.8){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.4.2-3){.pilcrow}

::: {#section-c.1.4.2-4}
``` {.sourcecode .lang-json}
    object {
       FeaturesActive feature_active;
       JSONNumber num_anchor_connections;
       AnchorConnections anchor_connections;
       JSONNumber num_delivery_connections;
       DeliveryConnections delivery_connections;
       ConvergenceMethods convergence_methods;
       AdaptationMethods adaptation_methods
       UniqueSessionId unique_session_id;
    } MXCapabilityRsp : MXBase;
```

[¶](#section-c.1.4.2-4){.pilcrow}
:::
:::

::: {#section-c.1.4.3 .section}
#### [C.1.4.3.](#section-c.1.4.3){.section-number .selfRef} [MX Capability Acknowledge](#name-mx-capability-acknowledge){.section-name .selfRef} {#name-mx-capability-acknowledge}

This message is sent by the CCM to the NCM to indicate acceptance of
capabilities advertised by the NCM in an earlier MX Capability Response
message. In addition to the base information ([Appendix
C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.4.3-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.4.3-2.1){.pilcrow}

\(b\)
:   Capability Acknowledgment: Indicates either acceptance or rejection
    of the capabilities sent by the CCM. Can use either \"MX_ACCEPT\" or
    \"MX_REJECT\" as acceptable
    values.[¶](#section-c.1.4.3-2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.4.3-3){.pilcrow}

::: {#section-c.1.4.3-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       JSONString capability_ack;
    } MXCapabilityAck : MXBase;
```

[¶](#section-c.1.4.3-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.5 .section}
### [C.1.5.](#section-c.1.5){.section-number .selfRef} [User-Plane Configuration Procedure](#name-user-plane-configuration-pr){.section-name .selfRef} {#name-user-plane-configuration-pr}

::: {#section-c.1.5.1 .section}
#### [C.1.5.1.](#section-c.1.5.1){.section-number .selfRef} [MX User-Plane Configuration Request](#name-mx-user-plane-configuration){.section-name .selfRef} {#name-mx-user-plane-configuration}

This message is sent by the NCM to the CCM to configure the user plane
for MAMS. In addition to the base information ([Appendix
C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.5.1-1){.pilcrow}

\(a\)
:   Number of Anchor Connections: The number of anchor connections
    supported by the NCM.[¶](#section-c.1.5.1-2.1){.pilcrow}

\(b\)
:   Setup of anchor connections: See [Appendix
    C.2.11](#setup_anchor_conn){.xref}.[¶](#section-c.1.5.1-2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.5.1-3){.pilcrow}

::: {#section-c.1.5.1-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber num_anchor_connections;
       SetupAnchorConns anchor_connections;
    } MXUPSetupConfigReq : MXBase;
```

[¶](#section-c.1.5.1-4){.pilcrow}
:::
:::

::: {#section-c.1.5.2 .section}
#### [C.1.5.2.](#section-c.1.5.2){.section-number .selfRef} [MX User-Plane Configuration Confirmation](#name-mx-user-plane-configuration-){.section-name .selfRef} {#name-mx-user-plane-configuration-}

This message is the confirmation of the user-plane setup message sent
from the CCM after successfully configuring the user plane on the
client. This message contains the following
information:[¶](#section-c.1.5.2-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.5.2-2.1){.pilcrow}

\(b\)

:   MX probe parameters (included if probing is
    supported).[¶](#section-c.1.5.2-2.2.1){.pilcrow}

    \(1\)
    :   Probe Port: UDP port for accepting probe
        message.[¶](#section-c.1.5.2-2.2.2.1){.pilcrow}

    \(2\)
    :   Anchor connection ID: Identifier of the anchor connection to be
        used for probe function. Provided in the MX UP Setup
        Configuration Request.[¶](#section-c.1.5.2-2.2.2.2){.pilcrow}

    \(3\)
    :   MX Configuration ID: This parameter is included only if the MX
        Configuration ID parameter is available from the user-plane
        setup configuration. It indicates the MX configuration ID of the
        anchor connection to be used for probe
        function.[¶](#section-c.1.5.2-2.2.2.3){.pilcrow}

\(c\)

:   The following information is required for each delivery
    connection:[¶](#section-c.1.5.2-2.3.1){.pilcrow}

    \(1\)
    :   Connection ID: Delivery connection ID supported by the
        client.[¶](#section-c.1.5.2-2.3.2.1){.pilcrow}

    \(2\)
    :   Client Adaptation-Layer Parameters: If the UDP Adaptation Layer
        is in use, then the UDP port to be used on the C-MADP
        side.[¶](#section-c.1.5.2-2.3.2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.5.2-3){.pilcrow}

::: {#section-c.1.5.2-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       [ProbeParam probe_param;]
       JSONNumber num_delivery_conn;
       ClientParam client_params <1...*>;
    } MXUPSetupConfigCnf : MXBase;
```

[¶](#section-c.1.5.2-4){.pilcrow}
:::

Where ProbeParam is defined as follows:[¶](#section-c.1.5.2-5){.pilcrow}

::: {#section-c.1.5.2-6}
``` {.sourcecode .lang-json}
    object {
       JSONNumber probe_port;
       JSONNumber anchor_conn_id;
       [JSONNumber mx_configuration_id;]
    } ProbeParam;
```

[¶](#section-c.1.5.2-6){.pilcrow}
:::

Where ClientParam is defined as
follows:[¶](#section-c.1.5.2-7){.pilcrow}

::: {#section-c.1.5.2-8}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       [AdaptationParam adapt_param;]
    } ClientParam;
```

[¶](#section-c.1.5.2-8){.pilcrow}
:::

Where AdaptationParam is defined as
follows:[¶](#section-c.1.5.2-9){.pilcrow}

::: {#section-c.1.5.2-10}
``` {.sourcecode .lang-json}
    object {
       JSONNumber udp_adapt_port;
    } AdaptationParam;
```

[¶](#section-c.1.5.2-10){.pilcrow}
:::
:::
:::

::: {#section-c.1.6 .section}
### [C.1.6.](#section-c.1.6){.section-number .selfRef} [Reconfiguration Procedure](#name-reconfiguration-procedure){.section-name .selfRef} {#name-reconfiguration-procedure}

::: {#section-c.1.6.1 .section}
#### [C.1.6.1.](#section-c.1.6.1){.section-number .selfRef} [MX Reconfiguration Request](#name-mx-reconfiguration-request){.section-name .selfRef} {#name-mx-reconfiguration-request}

This message is sent by the CCM to the NCM in the case of
reconfiguration of any of the connections from the client\'s side. In
addition to the base information ([Appendix C.2.1](#mx_base){.xref}), it
contains the following information:[¶](#section-c.1.6.1-1){.pilcrow}

\(a\)
:   Unique Session ID: Identifier for the CCM-NCM association [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.6.1-2.1){.pilcrow}

\(b\)
:   Reconfiguration Action: The reconfiguration action type can be one
    of \"setup\", \"release\", or
    \"update\".[¶](#section-c.1.6.1-2.2){.pilcrow}

\(c\)
:   Connection ID: Connection ID for which the reconfiguration is taking
    place.[¶](#section-c.1.6.1-2.3){.pilcrow}

\(d\)
:   IP address: Included if Reconfiguration Action is either \"setup\"
    or \"update\".[¶](#section-c.1.6.1-2.4){.pilcrow}

\(e\)
:   SSID: If the connection type is Wi-Fi, then this parameter contains
    the SSID to which the client has
    attached.[¶](#section-c.1.6.1-2.5){.pilcrow}

\(f\)
:   MTU of the connection: The MTU of the delivery path that is
    calculated at the client for use by the NCM to configure
    fragmentation and concatenation procedures at the
    N-MADP.[¶](#section-c.1.6.1-2.6){.pilcrow}

\(g\)
:   Connection Status: This parameter indicates whether the connection
    is currently \"disabled\", \"enabled\", or \"connected\". Default:
    \"connected\".[¶](#section-c.1.6.1-2.7){.pilcrow}

\(h\)
:   Delivery Node ID: Identity of the node to which the client is
    attached. In the case of LTE, this is an ECGI. In the case of Wi-Fi,
    this is an AP ID or a MAC
    address.[¶](#section-c.1.6.1-2.8){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.6.1-3){.pilcrow}

::: {#section-c.1.6.1-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       JSONString reconf_action;
       JSONNumber connection_id;
       JSONString ip_address;
       JSONString ssid;
       JSONNumber mtu_size;
       JSONString connection_status;
       [JSONString delivery_node_id;]
    } MXReconfReq : MXBase;
```

[¶](#section-c.1.6.1-4){.pilcrow}
:::
:::

::: {#section-c.1.6.2 .section}
#### [C.1.6.2.](#section-c.1.6.2){.section-number .selfRef} [MX Reconfiguration Response](#name-mx-reconfiguration-response){.section-name .selfRef} {#name-mx-reconfiguration-response}

This message is sent by the NCM to the CCM as a confirmation of the
received MX Reconfiguration Request and contains only the base
information (as defined in [Appendix
C.2.1](#mx_base){.xref}).[¶](#section-c.1.6.2-1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.6.2-2){.pilcrow}

::: {#section-c.1.6.2-3}
``` {.sourcecode .lang-json}
    object {
    } MXReconfRsp : MXBase;
```

[¶](#section-c.1.6.2-3){.pilcrow}
:::
:::
:::

::: {#section-c.1.7 .section}
### [C.1.7.](#section-c.1.7){.section-number .selfRef} [Path Estimation Procedure](#name-path-estimation-procedure){.section-name .selfRef} {#name-path-estimation-procedure}

::: {#section-c.1.7.1 .section}
#### [C.1.7.1.](#section-c.1.7.1){.section-number .selfRef} [MX Path Estimation Request](#name-mx-path-estimation-request){.section-name .selfRef} {#name-mx-path-estimation-request}

This message is sent by the NCM toward the CCM to configure the CCM to
send MX Path Estimation Results. In addition to the base information
([Appendix C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.7.1-1){.pilcrow}

\(a\)
:   Connection ID: ID of the connection for which the path estimation
    report is required.[¶](#section-c.1.7.1-2.1){.pilcrow}

\(b\)
:   Init Probe Test Duration: Duration of initial probe test, in
    milliseconds.[¶](#section-c.1.7.1-2.2){.pilcrow}

\(c\)
:   Init Probe Test Rate: Initial testing rate, in megabits per
    second.[¶](#section-c.1.7.1-2.3){.pilcrow}

\(d\)
:   Init Probe Size: Size of each packet for initial probe, in
    bytes.[¶](#section-c.1.7.1-2.4){.pilcrow}

\(e\)
:   Init Probe-ACK: If an acknowledgment for probe is required.
    (Possible values: \"yes\",
    \"no\")[¶](#section-c.1.7.1-2.5){.pilcrow}

\(f\)
:   Active Probe Frequency: Frequency, in milliseconds, at which the
    active probes shall be sent.[¶](#section-c.1.7.1-2.6){.pilcrow}

\(g\)
:   Active Probe Size: Size of the active probe, in
    bytes.[¶](#section-c.1.7.1-2.7){.pilcrow}

\(h\)
:   Active Probe Duration: Duration, in seconds, for which the active
    probe shall be performed.[¶](#section-c.1.7.1-2.8){.pilcrow}

\(i\)
:   Active Probe-ACK: If an acknowledgment for probe is required.
    (Possible values: \"yes\",
    \"no\")[¶](#section-c.1.7.1-2.9){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.7.1-3){.pilcrow}

::: {#section-c.1.7.1-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONNumber init_probe_test_duration_ms;
       JSONNumber init_probe_test_rate_Mbps;
       JSONNumber init_probe_size_bytes;
       JSONString init_probe_ack_req;
       JSONNumber active_probe_freq_ms;
       JSONNumber active_probe_size_bytes;
       JSONNumber active_probe_duration_sec;
       JSONString active_probe_ack_req;
    } MXPathEstReq : MXBase;
```

[¶](#section-c.1.7.1-4){.pilcrow}
:::
:::

::: {#section-c.1.7.2 .section}
#### [C.1.7.2.](#section-c.1.7.2){.section-number .selfRef} [MX Path Estimation Results](#name-mx-path-estimation-results){.section-name .selfRef} {#name-mx-path-estimation-results}

This message is sent by the CCM to the NCM to report on the probe
estimation configured by the NCM. In addition to the base information
([Appendix C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.7.2-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.7.2-2.1){.pilcrow}

\(b\)
:   Connection ID: ID of the connection for which the MX Path Estimation
    Results message is required.[¶](#section-c.1.7.2-2.2){.pilcrow}

\(c\)
:   Init Probe Results: See [Appendix
    C.2.12](#init_probe_res){.xref}.[¶](#section-c.1.7.2-2.3){.pilcrow}

\(d\)
:   Active Probe Results: See [Appendix
    C.2.13](#act_probe_res){.xref}.[¶](#section-c.1.7.2-2.4){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.7.2-3){.pilcrow}

::: {#section-c.1.7.2-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       UniqueSessionId unique_session_id;
       [InitProbeResults init_probe_results;]
       [ActiveProbeResults active_probe_results;]
    } MXPathEstResults : MXBase;
```

[¶](#section-c.1.7.2-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.8 .section}
### [C.1.8.](#section-c.1.8){.section-number .selfRef} [Traffic-Steering Procedure](#name-traffic-steering-procedure){.section-name .selfRef} {#name-traffic-steering-procedure}

::: {#section-c.1.8.1 .section}
#### [C.1.8.1.](#section-c.1.8.1){.section-number .selfRef} [MX Traffic Steering Request](#name-mx-traffic-steering-request){.section-name .selfRef} {#name-mx-traffic-steering-request}

This message is sent by the NCM to the CCM to enable traffic steering on
the delivery side in uplink and downlink configurations. In addition to
the base information ([Appendix C.2.1](#mx_base){.xref}), it contains
the following information:[¶](#section-c.1.8.1-1){.pilcrow}

\(a\)
:   Connection ID: Anchor connection number for which the traffic
    steering is being defined.[¶](#section-c.1.8.1-2.1){.pilcrow}

\(b\)
:   MX Configuration ID: MX configuration for which the traffic steering
    is being defined.[¶](#section-c.1.8.1-2.2){.pilcrow}

\(c\)
:   Downlink Delivery: See [Appendix
    C.2.14](#dl_delivery){.xref}.[¶](#section-c.1.8.1-2.3){.pilcrow}

\(d\)
:   Default UL Delivery: The default delivery connection for the uplink.
    All traffic should be delivered on this connection in the uplink
    direction, and the Traffic Flow Template (TFT) filter should be
    applied only for the traffic mentioned in Uplink
    Delivery.[¶](#section-c.1.8.1-2.4){.pilcrow}

\(e\)
:   Uplink Delivery: See [Appendix
    C.2.15](#ul_delivery){.xref}.[¶](#section-c.1.8.1-2.5){.pilcrow}

\(f\)
:   Features and their activation status: See [Appendix
    C.2.5](#feat_act_stat){.xref}.[¶](#section-c.1.8.1-2.6){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.8.1-3){.pilcrow}

::: {#section-c.1.8.1-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       [JSONNumber mx_configuration_id;]
       DLDelivery downlink_delivery;
       JSONNumber default_uplink_delivery;
       ULDelivery uplink_delivery;
       FeaturesActive feature_active;
    } MXTrafficSteeringReq : MXBase;
```

[¶](#section-c.1.8.1-4){.pilcrow}
:::
:::

::: {#section-c.1.8.2 .section}
#### [C.1.8.2.](#section-c.1.8.2){.section-number .selfRef} [MX Traffic Steering Response](#name-mx-traffic-steering-respons){.section-name .selfRef} {#name-mx-traffic-steering-respons}

This message is a response to an MX Traffic Steering Request from the
CCM to the NCM. In addition to the base information ([Appendix
C.2.1](#mx_base){.xref}), it contains the following
information:[¶](#section-c.1.8.2-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.8.2-2.1){.pilcrow}

\(b\)
:   Features and their activation status: See [Appendix
    C.2.5](#feat_act_stat){.xref}.[¶](#section-c.1.8.2-2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.8.2-3){.pilcrow}

::: {#section-c.1.8.2-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       FeaturesActive feature_active;
    } MXTrafficSteeringResp : MXBase;
```

[¶](#section-c.1.8.2-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.9 .section}
### [C.1.9.](#section-c.1.9){.section-number .selfRef} [MAMS Application MADP Association](#name-mams-application-madp-associa){.section-name .selfRef} {#name-mams-application-madp-associa}

::: {#section-c.1.9.1 .section}
#### [C.1.9.1.](#section-c.1.9.1){.section-number .selfRef} [MX Application MADP Association Request](#name-mx-application-madp-associa){.section-name .selfRef} {#name-mx-application-madp-associa}

This message is sent by the CCM to the NCM to select MADP instances
provided earlier in the MX UP Setup Configuration Request, based on
requirements for the applications.[¶](#section-c.1.9.1-1){.pilcrow}

In addition to the base information ([Appendix C.2.1](#mx_base){.xref}),
it contains the following:[¶](#section-c.1.9.1-2){.pilcrow}

\(a\)
:   Unique Session ID: This uniquely identifies the session between the
    CCM and the NCM in a network. See [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.9.1-3.1){.pilcrow}

\(b\)

:   A list of MX Application MADP Associations, with each entry as
    follows:[¶](#section-c.1.9.1-3.2.1){.pilcrow}

    \(1\)
    :   Connection ID: Represents the anchor connection number of the
        MADP instance.[¶](#section-c.1.9.1-3.2.2.1){.pilcrow}

    \(2\)
    :   MX Configuration ID: Identifies the MX configuration of the MADP
        instance.[¶](#section-c.1.9.1-3.2.2.2){.pilcrow}

    \(3\)
    :   Traffic Flow Template Uplink: Traffic Flow Template, as defined
        in [Appendix C.2.16](#tft){.xref}, to be used in the uplink
        direction.[¶](#section-c.1.9.1-3.2.2.3){.pilcrow}

    \(4\)
    :   Traffic Flow Template Downlink: Traffic Flow Template, as
        defined in [Appendix C.2.16](#tft){.xref}, to be used in the
        downlink direction.[¶](#section-c.1.9.1-3.2.2.4){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.9.1-4){.pilcrow}

::: {#section-c.1.9.1-5}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       MXAppMADPAssoc app_madp_assoc_list <1..*>;
    } MXAppMADPAssocReq : MXBase;
```

[¶](#section-c.1.9.1-5){.pilcrow}
:::

Where each measurement MXAppMADPAssoc is represented by the
following:[¶](#section-c.1.9.1-6){.pilcrow}

::: {#section-c.1.9.1-7}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONNumber mx_configuration_id
       TrafficFlowTemplate tft_ul_list <1..*>;
       TrafficFlowTemplate tft_dl_list <1..*>;
    } MXAppMADPAssoc;
```

[¶](#section-c.1.9.1-7){.pilcrow}
:::
:::

::: {#section-c.1.9.2 .section}
#### [C.1.9.2.](#section-c.1.9.2){.section-number .selfRef} [MX Application MADP Association Response](#name-mx-application-madp-associat){.section-name .selfRef} {#name-mx-application-madp-associat}

This message is sent by the NCM to the CCM to confirm the selected MADP
instances provided in the MX Application MADP Association Request by the
CCM.[¶](#section-c.1.9.2-1){.pilcrow}

In addition to the base information ([Appendix C.2.1](#mx_base){.xref}),
it contains information if the request has been
successful.[¶](#section-c.1.9.2-2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.9.2-3){.pilcrow}

::: {#section-c.1.9.2-4}
``` {.sourcecode .lang-json}
    object {
       JSONBool is_success;
    } MXAppMADPAssocResp : MXBase;
```

[¶](#section-c.1.9.2-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.10 .section}
### [C.1.10.](#section-c.1.10){.section-number .selfRef} [MX SSID Indication](#name-mx-ssid-indication){.section-name .selfRef} {#name-mx-ssid-indication}

This message is sent by the NCM to the CCM to indicate the list of
allowed SSIDs that are supported by the MAMS entity on the network side.
It contains the list of SSIDs.[¶](#section-c.1.10-1){.pilcrow}

Each SSID consists of the type of SSID (which can be one of the
following: SSID, BSSID, or HESSID) and the SSID
itself.[¶](#section-c.1.10-2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.10-3){.pilcrow}

::: {#section-c.1.10-4}
``` {.sourcecode .lang-json}
    object {
       SSID ssid_list <1..*>;
    } MXSSIDIndication : MXBase;
```

[¶](#section-c.1.10-4){.pilcrow}
:::

Where each SSID is defined as follows:[¶](#section-c.1.10-5){.pilcrow}

::: {#section-c.1.10-6}
``` {.sourcecode .lang-json}
    object {
       JSONString ssid_type;
       JSONString ssid;
    } SSID;
```

[¶](#section-c.1.10-6){.pilcrow}
:::
:::

::: {#section-c.1.11 .section}
### [C.1.11.](#section-c.1.11){.section-number .selfRef} [Measurements](#name-measurements){.section-name .selfRef} {#name-measurements}

::: {#section-c.1.11.1 .section}
#### [C.1.11.1.](#section-c.1.11.1){.section-number .selfRef} [MX Measurement Configuration](#name-mx-measurement-configuratio){.section-name .selfRef} {#name-mx-measurement-configuratio}

This message is sent from the NCM to the CCM to configure the period
measurement reporting at the CCM. The message contains a list of
measurement configurations, with each element containing the following
information:[¶](#section-c.1.11.1-1){.pilcrow}

\(a\)
:   Connection ID: Connection ID of the delivery connection for which
    the reporting is being
    configured.[¶](#section-c.1.11.1-2.1){.pilcrow}

\(b\)
:   Connection Type: Connection type for which the reporting is being
    configured. Can be \"LTE\", \"Wi-Fi\",
    \"5G_NR\".[¶](#section-c.1.11.1-2.2){.pilcrow}

\(c\)
:   Measurement Report Configuration: Actual report configuration based
    on the Connection Type, as defined in [Appendix
    C.2.17](#meas_ref_conf){.xref}.[¶](#section-c.1.11.1-2.3){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.11.1-3){.pilcrow}

::: {#section-c.1.11.1-4}
``` {.sourcecode .lang-json}
    object {
       MeasReportConf measurement_configuration <1..*>;
    } MXMeasReportConf : MXBase;
```

[¶](#section-c.1.11.1-4){.pilcrow}
:::

Where each measurement MeasReportConf is represented by the
following:[¶](#section-c.1.11.1-5){.pilcrow}

::: {#section-c.1.11.1-6}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONString connection_type;
       MeasReportConfs meas_rep_conf <1..*>;
    } MeasReportConf;
```

[¶](#section-c.1.11.1-6){.pilcrow}
:::
:::

::: {#section-c.1.11.2 .section}
#### [C.1.11.2.](#section-c.1.11.2){.section-number .selfRef} [MX Measurement Report](#name-mx-measurement-report){.section-name .selfRef} {#name-mx-measurement-report}

This message is periodically sent by the CCM to the NCM after
measurement configuration. In addition to the base information, it
contains the following information:[¶](#section-c.1.11.2-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. Described in [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.11.2-2.1){.pilcrow}

\(b\)
:   Measurement report for each delivery connection is measured by the
    client as defined in [Appendix
    C.2.18](#meas_rep){.xref}.[¶](#section-c.1.11.2-2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.11.2-3){.pilcrow}

::: {#section-c.1.11.2-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       MXMeasRep measurement_reports <1..*>;
    } MXMeasurementReport : MXBase;
```

[¶](#section-c.1.11.2-4){.pilcrow}
:::
:::
:::

::: {#section-c.1.12 .section}
### [C.1.12.](#section-c.1.12){.section-number .selfRef} [Keep-Alive](#name-keep-alive){.section-name .selfRef} {#name-keep-alive}

::: {#section-c.1.12.1 .section}
#### [C.1.12.1.](#section-c.1.12.1){.section-number .selfRef} [MX Keep-Alive Request](#name-mx-keep-alive-request){.section-name .selfRef} {#name-mx-keep-alive-request}

An MX Keep-Alive Request can be sent from either the NCM or the CCM on
expiry of the Keep-Alive timer or a handover event. The peer shall
respond to this request with an MX Keep-Alive Response. In the case of
no response from the peer, the MAMS connection shall be assumed to be
broken, and the CCM shall establish a new connection by sending MX
Discover messages.[¶](#section-c.1.12.1-1){.pilcrow}

In addition to the base information, it contains the following
information:[¶](#section-c.1.12.1-2){.pilcrow}

\(a\)
:   Keep-Alive Reason: Reason for sending this message, can be
    \"Timeout\" or \"Handover\".[¶](#section-c.1.12.1-3.1){.pilcrow}

\(b\)
:   Unique Session ID: Identifier for the CCM-NCM association [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.12.1-3.2){.pilcrow}

\(c\)
:   Connection ID: Connection ID for which handover is detected, if the
    reason is \"Handover\".[¶](#section-c.1.12.1-3.3){.pilcrow}

\(d\)
:   Delivery Node ID: The target delivery node ID (ECGI or Wi-Fi AP
    ID/MAC address) to which the handover is
    executed.[¶](#section-c.1.12.1-3.4){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.12.1-4){.pilcrow}

::: {#section-c.1.12.1-5}
``` {.sourcecode .lang-json}
    object {
       JSONString keep_alive_reason;
       UniqueSessionId unique_session_id;
       JSONNumber connection_id;
       JSONString delivery_node_id;
    } MXKeepAliveReq : MXBase;
```

[¶](#section-c.1.12.1-5){.pilcrow}
:::
:::

::: {#section-c.1.12.2 .section}
#### [C.1.12.2.](#section-c.1.12.2){.section-number .selfRef} [MX Keep-Alive Response](#name-mx-keep-alive-response){.section-name .selfRef} {#name-mx-keep-alive-response}

On receiving an MX Keep-Alive Request from a peer, the NCM/CCM shall
immediately respond with an MX Keep-Alive Response on the same delivery
path from where the request arrived. In addition to the base
information, it contains the unique session identifier for the CCM-NCM
association (defined in [Appendix
C.2.2](#uniq_sess_id){.xref})[¶](#section-c.1.12.2-1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.12.2-2){.pilcrow}

::: {#section-c.1.12.2-3}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
    } MXKeepAliveResp : MXBase;
```

[¶](#section-c.1.12.2-3){.pilcrow}
:::
:::
:::

::: {#section-c.1.13 .section}
### [C.1.13.](#section-c.1.13){.section-number .selfRef} [Session Termination Procedure](#name-session-termination-procedu){.section-name .selfRef} {#name-session-termination-procedu}

::: {#section-c.1.13.1 .section}
#### [C.1.13.1.](#section-c.1.13.1){.section-number .selfRef} [MX Session Termination Request](#name-mx-session-termination-requ){.section-name .selfRef} {#name-mx-session-termination-requ}

In the event where the NCM or CCM can no longer handle MAMS for any
reason, it can send an MX Session Termination Request to the peer. In
addition to the base information, it contains a Unique Session ID and
the reason for the termination; this can be \"MX_NORMAL_RELEASE\",
\"MX_NO_RESPONSE\", or
\"INTERNAL_ERROR\".[¶](#section-c.1.13.1-1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.13.1-2){.pilcrow}

::: {#section-c.1.13.1-3}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       JSONString reason;
    } MXSessionTerminationReq : MXBase;
```

[¶](#section-c.1.13.1-3){.pilcrow}
:::
:::

::: {#section-c.1.13.2 .section}
#### [C.1.13.2.](#section-c.1.13.2){.section-number .selfRef} [MX Session Termination Response](#name-mx-session-termination-resp){.section-name .selfRef} {#name-mx-session-termination-resp}

On receipt of an MX Session Termination Request from a peer, the NCM/CCM
shall respond with MX Session Termination Response on the same delivery
path where the request arrived and clean up the MAMS-related resources
and settings. The CCM shall reinitiate a new session with MX Discover
messages.[¶](#section-c.1.13.2-1){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.13.2-2){.pilcrow}

::: {#section-c.1.13.2-3}
``` {.sourcecode .lang-json}
      object {
         UniqueSessionId unique_session_id;
      } MXSessionTerminationResp : MXBase;
```

[¶](#section-c.1.13.2-3){.pilcrow}
:::
:::
:::

::: {#section-c.1.14 .section}
### [C.1.14.](#section-c.1.14){.section-number .selfRef} [Network Analytics](#name-network-analytics){.section-name .selfRef} {#name-network-analytics}

::: {#section-c.1.14.1 .section}
#### [C.1.14.1.](#section-c.1.14.1){.section-number .selfRef} [MX Network Analytics Request](#name-mx-network-analytics-reques){.section-name .selfRef} {#name-mx-network-analytics-reques}

This message is sent by the CCM to the NCM to request parameters like
bandwidth, jitter, latency, and signal quality predicted by the network
analytics function. In addition to the base information, it contains the
following parameter:[¶](#section-c.1.14.1-1){.pilcrow}

\(a\)
:   Unique Session ID: Same identifier as the identifier provided in the
    MX Capability Response. Described in [Appendix
    C.2.2](#uniq_sess_id){.xref}.[¶](#section-c.1.14.1-2.1){.pilcrow}

\(b\)
:   Parameter List: List of parameters in which the CCM is interested:
    one or more of \"bandwidth\", \"jitter\", \"latency\", and
    \"signal_quality\".[¶](#section-c.1.14.1-2.2){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.14.1-3){.pilcrow}

::: {#section-c.1.14.1-4}
``` {.sourcecode .lang-json}
    object {
       UniqueSessionId unique_session_id;
       JSONString params <1..*>;
    } MXNetAnalyticsReq : MXBase;
```

[¶](#section-c.1.14.1-4){.pilcrow}
:::

Where the params object can take one or more of the following
values:[¶](#section-c.1.14.1-5){.pilcrow}

::: {#section-c.1.14.1-6}
``` {.sourcecode .lang-json}
    "bandwidth"
    "jitter"
    "latency"
    "signal_quality"
```

[¶](#section-c.1.14.1-6){.pilcrow}
:::
:::

::: {#section-c.1.14.2 .section}
#### [C.1.14.2.](#section-c.1.14.2){.section-number .selfRef} [MX Network Analytics Response](#name-mx-network-analytics-respon){.section-name .selfRef} {#name-mx-network-analytics-respon}

This message is sent by the NCM to the CCM in response to the MX Network
Analytics Request. For each delivery connection that the client has, the
NCM reports the requested parameter predictions and their respective
likelihoods (between 1 and 100
percent).[¶](#section-c.1.14.2-1){.pilcrow}

In addition to the base information, it contains the following
parameters:[¶](#section-c.1.14.2-2){.pilcrow}

\(a\)
:   Number of Delivery Connections: The number of delivery connections
    that are currently configured for the
    client.[¶](#section-c.1.14.2-3.1){.pilcrow}

\(b\)

:   The following information is provided for each delivery
    connection:[¶](#section-c.1.14.2-3.2.1){.pilcrow}

    \(1\)
    :   Connection ID: Connection ID of the delivery connection for
        which the parameters are being
        predicted.[¶](#section-c.1.14.2-3.2.2.1){.pilcrow}

    \(2\)
    :   Connection Type: Type of connection. Can be \"Wi-Fi\",
        \"5G_NR\", \"MulteFire\", or
        \"LTE\".[¶](#section-c.1.14.2-3.2.2.2){.pilcrow}

    \(3\)

    :   List of Parameters for which Prediction is requested, where each
        of the predicted parameters consists of the
        following:[¶](#section-c.1.14.2-3.2.2.3.1){.pilcrow}

        \(a\)
        :   Parameter Name: Name of the parameter being predicted. Can
            be one of \"bandwidth\", \"jitter\", \"latency\", or
            \"signal_quality\".[¶](#section-c.1.14.2-3.2.2.3.2.1){.pilcrow}

        \(b\)
        :   Additional Parameter: If Parameter name is
            \"signal_quality\", then this qualifies the quality
            parameter like \"lte_rsrp\", \"lte_rsrq\", \"nr_rsrp\",
            \"nr_rsrq\", or
            \"wifi_rssi\".[¶](#section-c.1.14.2-3.2.2.3.2.2){.pilcrow}

        \(c\)
        :   Predicted Value: Provides the predicted value of the
            parameter and, if applicable, the additional
            parameter.[¶](#section-c.1.14.2-3.2.2.3.2.3){.pilcrow}

        \(d\)
        :   Likelihood: Provides a stochastic likelihood of the
            predicted value.[¶](#section-c.1.14.2-3.2.2.3.2.4){.pilcrow}

        \(e\)
        :   Validity Time: The time duration for which the predictions
            are valid.[¶](#section-c.1.14.2-3.2.2.3.2.5){.pilcrow}

The representation of the message is as
follows:[¶](#section-c.1.14.2-4){.pilcrow}

::: {#section-c.1.14.2-5}
``` {.sourcecode .lang-json}
    object {
       MXAnalyticsList param_list <1..*>;
    } MXNetAnalyticsResp : MXBase;
```

[¶](#section-c.1.14.2-5){.pilcrow}
:::

Where MXAnalyticsList is defined as
follows:[¶](#section-c.1.14.2-6){.pilcrow}

::: {#section-c.1.14.2-7}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONString connection_type;
       ParamPredictions predictions <1..*>;
    } MXAnalyticsList;
```

[¶](#section-c.1.14.2-7){.pilcrow}
:::

Where each ParamPredictions item is defined
as:[¶](#section-c.1.14.2-8){.pilcrow}

::: {#section-c.1.14.2-9}
``` {.sourcecode .lang-json}
    object {
       JSONString param_name;
       [JSONString additional_param;]
       JSONNumber prediction;
       JSONNumber likelihood;
       JSONNumber validity_time;
    } ParamPredictions;
```

[¶](#section-c.1.14.2-9){.pilcrow}
:::
:::
:::
:::

::: {#section-c.2 .section}
## [C.2.](#section-c.2){.section-number .selfRef} [Protocol Specification: Data Types](#name-protocol-specification-data){.section-name .selfRef} {#name-protocol-specification-data}

::: {#mx_base}
::: {#section-c.2.1 .section}
### [C.2.1.](#section-c.2.1){.section-number .selfRef} [MXBase](#name-mxbase){.section-name .selfRef} {#name-mxbase}

This is the base information that every message between the CCM and NCM
exchanges shall have as mandatory information. It contains the following
information:[¶](#section-c.2.1-1){.pilcrow}

\(a\)
:   Version: Version of MAMS used.[¶](#section-c.2.1-2.1){.pilcrow}

\(b\)

:   Message Type: Message type being sent, where the following are
    considered valid values:[¶](#section-c.2.1-2.2.1){.pilcrow}

    ::: {#section-c.2.1-2.2.2}
    ``` {.sourcecode .lang-json}
        "mx_discover"
        "mx_system_info"
        "mx_capability_req"
        "mx_capability_rsp"
        "mx_capability_ack"
        "mx_up_setup_conf_req"
        "mx_up_setup_cnf"
        "mx_reconf_req"
        "mx_reconf_rsp"
        "mx_path_est_req"
        "mx_path_est_results"
        "mx_traffic_steering_req"
        "mx_traffic_steering_rsp"
        "mx_ssid_indication"
        "mx_keep_alive_req"
        "mx_keep_alive_rsp"
        "mx_measurement_conf"
        "mx_measurement_report"
        "mx_session_termination_req"
        "mx_session_termination_rsp"
        "mx_app_madp_assoc_req"
        "mx_app_madp_assoc_rsp"
        "mx_network_analytics_req"
        "mx_network_analytics_rsp"
    ```

    [¶](#section-c.2.1-2.2.2){.pilcrow}
    :::

\(c\)
:   Sequence Number: Sequence number to uniquely identify a particular
    message exchange, e.g., MX Capability
    Request/Response/Acknowledge.[¶](#section-c.2.1-2.3){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.1-3){.pilcrow}

::: {#section-c.2.1-4}
``` {.sourcecode .lang-json}
    object {
       JSONString version;
       JSONString message_type;
       JSONNumber sequence_num;
    } MXBase;
```

[¶](#section-c.2.1-4){.pilcrow}
:::
:::
:::

::: {#uniq_sess_id}
::: {#section-c.2.2 .section}
### [C.2.2.](#section-c.2.2){.section-number .selfRef} [Unique Session ID](#name-unique-session-id){.section-name .selfRef} {#name-unique-session-id}

This data type represents the unique session ID between a CCM and NCM
entity. It contains an NCM ID that is unique in the network and a
session ID that is allocated by the NCM for that session. On receipt of
the MX Discover message, if the session exists, then the old session ID
is returned in the MX System Info message; otherwise, the NCM allocates
a new session ID for the CCM and sends the new ID in the MX System Info
message.[¶](#section-c.2.2-1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.2-2){.pilcrow}

::: {#section-c.2.2-3}
``` {.sourcecode .lang-json}
    object {
       JSONNumber ncm_id;
       JSONNumber session_id;
    } UniqueSessionId;
```

[¶](#section-c.2.2-3){.pilcrow}
:::
:::
:::

::: {#ncm_connx}
::: {#section-c.2.3 .section}
### [C.2.3.](#section-c.2.3){.section-number .selfRef} [NCM Connections](#name-ncm-connections){.section-name .selfRef} {#name-ncm-connections}

This data type represents the connection available at the NCM for MAMS
connectivity toward the client. It contains a list of NCM connections
available, where each connection has the following
information:[¶](#section-c.2.3-1){.pilcrow}

\(a\)
:   Connection Information: See [Appendix
    C.2.4](#conn_info){.xref}.[¶](#section-c.2.3-2.1){.pilcrow}

\(b\)
:   NCM Endpoint Information: Contains the IP address and port exposed
    by the NCM endpoint for the CCM.[¶](#section-c.2.3-2.2){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.3-3){.pilcrow}

::: {#section-c.2.3-4}
``` {.sourcecode .lang-json}
    object {
       NCMConnection items <1..*>;
    } NCMConnections;
```

[¶](#section-c.2.3-4){.pilcrow}
:::

where NCMConnection is defined as:[¶](#section-c.2.3-5){.pilcrow}

::: {#section-c.2.3-6}
``` {.sourcecode .lang-json}
    object {
       NCMEndPoint ncm_end_point;
    } NCMConnection : ConnectionInfo;
```

[¶](#section-c.2.3-6){.pilcrow}
:::

where NCMEndPoint is defined as:[¶](#section-c.2.3-7){.pilcrow}

::: {#section-c.2.3-8}
``` {.sourcecode .lang-json}
    object {
       JSONString ip_address;
       JSONNumber port;
    } NCMEndPoint;
```

[¶](#section-c.2.3-8){.pilcrow}
:::
:::
:::

::: {#conn_info}
::: {#section-c.2.4 .section}
### [C.2.4.](#section-c.2.4){.section-number .selfRef} [Connection Information](#name-connection-information){.section-name .selfRef} {#name-connection-information}

This data type provides the mapping of connection ID and connection
type. It contains the following
information:[¶](#section-c.2.4-1){.pilcrow}

\(a\)
:   Connection ID: Unique number identifying the
    connection.[¶](#section-c.2.4-2.1){.pilcrow}

\(b\)
:   Connection Type: Type of connection can be \"Wi-Fi\", \"5G_NR\",
    \"MulteFire\", or \"LTE\".[¶](#section-c.2.4-2.2){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.4-3){.pilcrow}

::: {#section-c.2.4-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONString connection_type;
    } ConnectionInfo;
```

[¶](#section-c.2.4-4){.pilcrow}
:::
:::
:::

::: {#feat_act_stat}
::: {#section-c.2.5 .section}
### [C.2.5.](#section-c.2.5){.section-number .selfRef} [Features and Their Activation Status](#name-features-and-their-activati){.section-name .selfRef} {#name-features-and-their-activati}

This data type provides the list of all features with their activation
status. Each feature status contains the
following:[¶](#section-c.2.5-1){.pilcrow}

\(a\)
:   Feature Name: The name of the feature can be one of the
    following:[¶](#section-c.2.5-2.1){.pilcrow}

::: {#section-c.2.5-3}
``` {.sourcecode .lang-json}
    "lossless_switching"
    "fragmentation"
    "concatenation"
    "uplink_aggregation"
    "downlink_aggregation"
    "measurement"
```

[¶](#section-c.2.5-3){.pilcrow}
:::

\(b\)
:   Active status: Activation status of the feature: \"true\" means that
    the feature is active, and \"false\" means that the feature is
    inactive.[¶](#section-c.2.5-4.1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.5-5){.pilcrow}

::: {#section-c.2.5-6}
``` {.sourcecode .lang-json}
    object {
       FeatureInfo items <1..*>;
    } FeaturesActive;
```

[¶](#section-c.2.5-6){.pilcrow}
:::

where FeatureInfo is defined as:[¶](#section-c.2.5-7){.pilcrow}

::: {#section-c.2.5-8}
``` {.sourcecode .lang-json}
    object {
       JSONString feature_name;
       JSONBool active;
    } FeatureInfo;
```

[¶](#section-c.2.5-8){.pilcrow}
:::
:::
:::

::: {#anchor_conn}
::: {#section-c.2.6 .section}
### [C.2.6.](#section-c.2.6){.section-number .selfRef} [Anchor Connections](#name-anchor-connections){.section-name .selfRef} {#name-anchor-connections}

This data type contains the list of Connection Information items
([Appendix C.2.4](#conn_info){.xref}) that are supported on the anchor
(core) side.[¶](#section-c.2.6-1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.6-2){.pilcrow}

::: {#section-c.2.6-3}
``` {.sourcecode .lang-json}
    object {
       ConnectionInfo items <1..*>;
    } AnchorConnections;
```

[¶](#section-c.2.6-3){.pilcrow}
:::
:::
:::

::: {#delivery_conn}
::: {#section-c.2.7 .section}
### [C.2.7.](#section-c.2.7){.section-number .selfRef} [Delivery Connections](#name-delivery-connections){.section-name .selfRef} {#name-delivery-connections}

This data type contains the list of Connection Information ([Appendix
C.2.4](#conn_info){.xref}) that are supported on the delivery (access)
side.[¶](#section-c.2.7-1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.7-2){.pilcrow}

::: {#section-c.2.7-3}
``` {.sourcecode .lang-json}
    object {
       ConnectionInfo items <1..*>;
    } DeliveryConnections;
```

[¶](#section-c.2.7-3){.pilcrow}
:::
:::
:::

::: {#method_support}
::: {#section-c.2.8 .section}
### [C.2.8.](#section-c.2.8){.section-number .selfRef} [Method Support](#name-method-support){.section-name .selfRef} {#name-method-support}

This data type provides the support for a particular convergence or
adaptation method. It consists of the
following:[¶](#section-c.2.8-1){.pilcrow}

\(a\)
:   Method: Name of the method.[¶](#section-c.2.8-2.1){.pilcrow}

\(b\)
:   Supported: Whether the method listed above is supported or not.
    Possible values are \"true\" and
    \"false\".[¶](#section-c.2.8-2.2){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.8-3){.pilcrow}

::: {#section-c.2.8-4}
``` {.sourcecode .lang-json}
    object {
       JSONString method;
       JSONBool supported;
    } MethodSupport;
```

[¶](#section-c.2.8-4){.pilcrow}
:::
:::
:::

::: {#conv_methods}
::: {#section-c.2.9 .section}
### [C.2.9.](#section-c.2.9){.section-number .selfRef} [Convergence Methods](#name-convergence-methods){.section-name .selfRef} {#name-convergence-methods}

This data type contains the list of all convergence methods and their
support status. The possible convergence methods
are:[¶](#section-c.2.9-1){.pilcrow}

::: {#section-c.2.9-2}
``` {.sourcecode .lang-json}
    "GMA"
    "MPTCP_Proxy"
    "GRE_Aggregation_Proxy"
    "MPQUIC"
```

[¶](#section-c.2.9-2){.pilcrow}
:::

The representation of this data type is as
follows:[¶](#section-c.2.9-3){.pilcrow}

::: {#section-c.2.9-4}
``` {.sourcecode .lang-json}
    object {
       MethodSupport items <1..*>;
    } ConvergenceMethods;
```

[¶](#section-c.2.9-4){.pilcrow}
:::
:::
:::

::: {#adapt_methods}
::: {#section-c.2.10 .section}
### [C.2.10.](#section-c.2.10){.section-number .selfRef} [Adaptation Methods](#name-adaptation-methods){.section-name .selfRef} {#name-adaptation-methods}

This data type contains the list of all adaptation methods and their
support status. The possible adaptation methods
are:[¶](#section-c.2.10-1){.pilcrow}

::: {#section-c.2.10-2}
``` {.sourcecode .lang-json}
    "UDP_without_DTLS"
    "UDP_with_DTLS"
    "IPsec"
    "Client_NAT"
```

[¶](#section-c.2.10-2){.pilcrow}
:::

The representation of this data type is as
follows:[¶](#section-c.2.10-3){.pilcrow}

::: {#section-c.2.10-4}
``` {.sourcecode .lang-json}
    object {
       MethodSupport items <1..*>;
    } AdaptationMethods;
```

[¶](#section-c.2.10-4){.pilcrow}
:::
:::
:::

::: {#setup_anchor_conn}
::: {#section-c.2.11 .section}
### [C.2.11.](#section-c.2.11){.section-number .selfRef} [Setup of Anchor Connections](#name-setup-of-anchor-connections){.section-name .selfRef} {#name-setup-of-anchor-connections}

This data type represents the setup configuration for each anchor
connection that is required on the client\'s side. It contains the
following information, in addition to the connection ID and type of the
anchor connection:[¶](#section-c.2.11-1){.pilcrow}

\(a\)
:   Number of Active MX Configurations: If more than one active
    configuration is present for this anchor, then this identifies the
    number of such connections.[¶](#section-c.2.11-2.1){.pilcrow}

\(b\)

:   The following convergence parameters are provided for each active
    configuration:[¶](#section-c.2.11-2.2.1){.pilcrow}

    \(1\)
    :   MX Configuration ID: Present if there are multiple active
        configurations. Identifies the configuration for this MADP
        instance ID.[¶](#section-c.2.11-2.2.2.1){.pilcrow}

    \(2\)
    :   Convergence Method: Convergence method selected. Has to be one
        of the supported convergence methods listed in [Appendix
        C.2.9](#conv_methods){.xref}.[¶](#section-c.2.11-2.2.2.2){.pilcrow}

    \(3\)
    :   Convergence Method Parameters: Described in [Appendix
        C.2.11.1](#conv_method_params){.xref}[¶](#section-c.2.11-2.2.2.3){.pilcrow}

    \(4\)
    :   Number of Delivery Connections: The number of delivery
        connections (access side) that are supported for this anchor
        connection.[¶](#section-c.2.11-2.2.2.4){.pilcrow}

    \(5\)
    :   Setup of delivery connections: Described in [Appendix
        C.2.11.2](#setup_del_conn){.xref}.[¶](#section-c.2.11-2.2.2.5){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.11-3){.pilcrow}

::: {#section-c.2.11-4}
``` {.sourcecode .lang-json}
    object {
       SetupAnchorConn items <1..*>;
    } SetupAnchorConns;
```

[¶](#section-c.2.11-4){.pilcrow}
:::

Where each anchor connection configuration is defined as
follows:[¶](#section-c.2.11-5){.pilcrow}

::: {#section-c.2.11-6}
``` {.sourcecode .lang-json}
    object {
       [JSONNumber num_active_mx_conf;]
       ConvergenceConfig convergence_config
    } SetupAnchorConn : ConnectionInfo;
```

[¶](#section-c.2.11-6){.pilcrow}
:::

where each Convergence configuration is defined as
follows:[¶](#section-c.2.11-7){.pilcrow}

::: {#section-c.2.11-8}
``` {.sourcecode .lang-json}
    object {
       [JSONNumber mx_configuration_id;]
       JSONString convergence_method;
       ConvergenceMethodParam convergence_method_params;
       JSONNumber num_delivery_connections;
       SetupDeliveryConns delivery_connections;
    } ConvergenceConfig;
```

[¶](#section-c.2.11-8){.pilcrow}
:::

::: {#conv_method_params}
::: {#section-c.2.11.1 .section}
#### [C.2.11.1.](#section-c.2.11.1){.section-number .selfRef} [Convergence Method Parameters](#name-convergence-method-paramete){.section-name .selfRef} {#name-convergence-method-paramete}

This data type represents the parameters used for the convergence method
and contains the following:[¶](#section-c.2.11.1-1){.pilcrow}

\(a\)
:   Proxy IP: IP address of the proxy that is provided by the selected
    convergence method.[¶](#section-c.2.11.1-2.1){.pilcrow}

\(b\)
:   Proxy Port: Port of the proxy that is provided by the selected
    convergence method.[¶](#section-c.2.11.1-2.2){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.11.1-3){.pilcrow}

::: {#section-c.2.11.1-4}
``` {.sourcecode .lang-json}
    object {
       JSONString proxy_ip;
       JSONString proxy_port;
       JSONString client_key;
    } ConvergenceMethodParam;
```

[¶](#section-c.2.11.1-4){.pilcrow}
:::
:::
:::

::: {#setup_del_conn}
::: {#section-c.2.11.2 .section}
#### [C.2.11.2.](#section-c.2.11.2){.section-number .selfRef} [Setup Delivery Connections](#name-setup-delivery-connections){.section-name .selfRef} {#name-setup-delivery-connections}

This is the list of delivery connections and their parameters to be
configured on the client. Each delivery connection defined by its
connection information ([Appendix C.2.4](#conn_info){.xref}) optionally
contains the following:[¶](#section-c.2.11.2-1){.pilcrow}

\(a\)
:   Adaptation Method: Selected adaptation method name. This shall be
    one of the methods listed in [Appendix
    C.2.10](#adapt_methods){.xref}.[¶](#section-c.2.11.2-2.1){.pilcrow}

\(b\)

:   Adaptation Method Parameters: Depending on the adaptation method,
    one or more of the following parameters shall be
    provided.[¶](#section-c.2.11.2-2.2.1){.pilcrow}

    \(1\)
    :   Tunnel IP address[¶](#section-c.2.11.2-2.2.2.1){.pilcrow}

    \(2\)
    :   Tunnel Port number[¶](#section-c.2.11.2-2.2.2.2){.pilcrow}

    \(3\)
    :   Shared Secret[¶](#section-c.2.11.2-2.2.2.3){.pilcrow}

    \(4\)
    :   MX header optimization: If the adaptation method is
        UDP_without_DTLS or UDP_with_DTLS, and convergence is GMA, then
        this flag represents whether or not the checksum field and the
        length field in the IP header of an MX PDU should be
        recalculated by the MX Convergence Layer. The possible values
        are \"true\" and \"false\". If it is \"true\", both fields
        remain unchanged; otherwise, both fields should be recalculated.
        If this field is not present, then the default of \"false\"
        should be considered.[¶](#section-c.2.11.2-2.2.2.4){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.11.2-3){.pilcrow}

::: {#section-c.2.11.2-4}
``` {.sourcecode .lang-json}
    object {
       SetupDeliveryConn items <1..*>;
    } SetupDeliveryConns;
```

[¶](#section-c.2.11.2-4){.pilcrow}
:::

where each \"SetupDeliveryConn\" consists of the
following:[¶](#section-c.2.11.2-5){.pilcrow}

::: {#section-c.2.11.2-6}
``` {.sourcecode .lang-json}
    object {
      [JSONString adaptation_method;]
      [AdaptationMethodParam adaptation_method_param;]
    } SetupDeliveryConn : ConnectionInfo;
```

[¶](#section-c.2.11.2-6){.pilcrow}
:::

where AdaptationMethodParam is defined
as:[¶](#section-c.2.11.2-7){.pilcrow}

::: {#section-c.2.11.2-8}
``` {.sourcecode .lang-json}
    object {
       JSONString tunnel_ip_addr;
       JSONString tunnel_end_port;
       JSONString shared_secret;
       [JSONBool mx_header_optimization;]
    } AdaptationMethodParam;
```

[¶](#section-c.2.11.2-8){.pilcrow}
:::
:::
:::
:::
:::

::: {#init_probe_res}
::: {#section-c.2.12 .section}
### [C.2.12.](#section-c.2.12){.section-number .selfRef} [Init Probe Results](#name-init-probe-results){.section-name .selfRef} {#name-init-probe-results}

This data type provides the results of the init probe request made by
the NCM. It consists of the following
information:[¶](#section-c.2.12-1){.pilcrow}

\(a\)
:   Lost Probes: Percentage of probes
    lost.[¶](#section-c.2.12-2.1){.pilcrow}

\(b\)
:   Probe Delay: Average delay of probe message, in
    microseconds.[¶](#section-c.2.12-2.2){.pilcrow}

\(c\)
:   Probe Rate: Probe rate achieved, in megabits per
    second.[¶](#section-c.2.12-2.3){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.12-3){.pilcrow}

::: {#section-c.2.12-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber lost_probes_percentage;
       JSONNumber probe_rate_Mbps;
    } InitProbeResults;
```

[¶](#section-c.2.12-4){.pilcrow}
:::
:::
:::

::: {#act_probe_res}
::: {#section-c.2.13 .section}
### [C.2.13.](#section-c.2.13){.section-number .selfRef} [Active Probe Results](#name-active-probe-results){.section-name .selfRef} {#name-active-probe-results}

This data type provides the results of the active probe request made by
the NCM. It consists of the following
information:[¶](#section-c.2.13-1){.pilcrow}

\(a\)
:   Average Probe Throughput: Average active probe throughput achieved,
    in megabits per second.[¶](#section-c.2.13-2.1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.13-3){.pilcrow}

::: {#section-c.2.13-4}
``` {.sourcecode .lang-json}
    object {
       JSONNumber avg_tput_last_probe_duration_Mbps;
    } ActiveProbeResults;
```

[¶](#section-c.2.13-4){.pilcrow}
:::
:::
:::

::: {#dl_delivery}
::: {#section-c.2.14 .section}
### [C.2.14.](#section-c.2.14){.section-number .selfRef} [Downlink Delivery](#name-downlink-delivery){.section-name .selfRef} {#name-downlink-delivery}

This data type represents the list of connections that are enabled on
the delivery side to be used in the downlink
direction.[¶](#section-c.2.14-1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.14-2){.pilcrow}

::: {#section-c.2.14-3}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id <1..*>;
    } DLDelivery;
```

[¶](#section-c.2.14-3){.pilcrow}
:::
:::
:::

::: {#ul_delivery}
::: {#section-c.2.15 .section}
### [C.2.15.](#section-c.2.15){.section-number .selfRef} [Uplink Delivery](#name-uplink-delivery){.section-name .selfRef} {#name-uplink-delivery}

This data type represents the list of connections and parameters enabled
for the delivery side to be used in the uplink
direction.[¶](#section-c.2.15-1){.pilcrow}

The uplink delivery consists of multiple uplink delivery entities, where
each entity consists of a Traffic Flow Template (TFT) ([Appendix
C.2.16](#tft){.xref}) and a list of connection IDs in the uplink, where
traffic qualifying for such a Traffic Flow Template can be
redirected.[¶](#section-c.2.15-2){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.15-3){.pilcrow}

::: {#section-c.2.15-4}
``` {.sourcecode .lang-json}
    object {
       ULDeliveryEntity ul_del <1..*>;
    } ULDelivery;
```

[¶](#section-c.2.15-4){.pilcrow}
:::

Where each uplink delivery entity consists of the following data
type:[¶](#section-c.2.15-5){.pilcrow}

::: {#section-c.2.15-6}
``` {.sourcecode .lang-json}
    object {
       TrafficFlowTemplate ul_tft <1..*>;
       JSONNumber connection_id <1..*>;
    } ULDeliveryEntity;
```

[¶](#section-c.2.15-6){.pilcrow}
:::
:::
:::

::: {#tft}
::: {#section-c.2.16 .section}
### [C.2.16.](#section-c.2.16){.section-number .selfRef} [Traffic Flow Template](#name-traffic-flow-template){.section-name .selfRef} {#name-traffic-flow-template}

The Traffic Flow Template generally follows the guidelines specified in
\[[ServDesc3GPP](#ServDesc3GPP){.xref}\].[¶](#section-c.2.16-1){.pilcrow}

The Traffic Flow Template in MAMS consists of one or more of the
following:[¶](#section-c.2.16-2){.pilcrow}

\(a\)
:   Remote Address and Mask: IP address and subnet for remote addresses
    represented in Classless Inter-Domain Routing (CIDR) notation.
    Default: \"0.0.0.0/0\".[¶](#section-c.2.16-3.1){.pilcrow}

\(b\)
:   Local Address and Mask: IP address and subnet for local addresses
    represented in CIDR notation. Default:
    \"0.0.0.0/0\"[¶](#section-c.2.16-3.2){.pilcrow}

\(c\)
:   Protocol Type: IP protocol number of the payload being carried by an
    IP packet (e.g., UDP, TCP). Default:
    255.[¶](#section-c.2.16-3.3){.pilcrow}

\(d\)
:   Local Port Range: Range of ports for local ports for which the
    Traffic Flow Template is applicable. Default: Start=0,
    End=65535.[¶](#section-c.2.16-3.4){.pilcrow}

\(e\)
:   Remote Port Range: Range of ports for remote ports for which the
    Traffic Flow Template is applicable. Default: Start=0,
    End=65535.[¶](#section-c.2.16-3.5){.pilcrow}

\(f\)
:   Traffic Class: Represented by Type of Service in IPv4 and Traffic
    Class in IPv6. Default: 255[¶](#section-c.2.16-3.6){.pilcrow}

\(g\)
:   Flow Label: Flow label for IPv6, applicable only for IPv6 protocol
    type. Default: 0.[¶](#section-c.2.16-3.7){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.16-4){.pilcrow}

::: {#section-c.2.16-5}
``` {.sourcecode .lang-json}
    object {
       JSONString remote_addr_mask;
       JSONString local_addr_mask;
       JSONNumber protocol_type;
       PortRange local_port_range;
       PortRange remote_port_range;
       JSONNumber traffic_class;
       JSONNumber flow_label;
    } TrafficFlowTemplate;
```

[¶](#section-c.2.16-5){.pilcrow}
:::

Where the port range is defined as
follows:[¶](#section-c.2.16-6){.pilcrow}

::: {#section-c.2.16-7}
``` {.sourcecode .lang-json}
    object {
       JSONNumber start;
       JSONNumber end;
    } PortRange;
```

[¶](#section-c.2.16-7){.pilcrow}
:::
:::
:::

::: {#meas_ref_conf}
::: {#section-c.2.17 .section}
### [C.2.17.](#section-c.2.17){.section-number .selfRef} [Measurement Report Configuration](#name-measurement-report-configur){.section-name .selfRef} {#name-measurement-report-configur}

This data type represents the configuration done by the NCM toward the
CCM for reporting measurement events.[¶](#section-c.2.17-1){.pilcrow}

\(a\)

:   Measurement Report Parameter: Parameter that shall be measured and
    reported. This is dependent on the connection
    type:[¶](#section-c.2.17-2.1.1){.pilcrow}

    \(1\)
    :   For the connection type of \"Wi-Fi\", the allowed measurement
        type parameters are \"WLAN_RSSI\", \"WLAN_LOAD\", \"UL_TPUT\",
        \"DL_TPUT\", \"EST_UL_TPUT\", and
        \"EST_DL_TPUT\".[¶](#section-c.2.17-2.1.2.1){.pilcrow}

    \(2\)
    :   For the connection type of \"LTE\", the allowed measurement type
        parameters are \"LTE_RSRP\", \"LTE_RSRQ\", \"UL_TPUT\", and
        \"DL_TPUT\".[¶](#section-c.2.17-2.1.2.2){.pilcrow}

    \(3\)
    :   For the connection type of \"5G_NR\", the allowed measurement
        type parameters are \"NR_RSRP\", \"NR_RSRQ\", \"UL_TPUT\", and
        \"DL_TPUT\".[¶](#section-c.2.17-2.1.2.3){.pilcrow}

\(b\)
:   Threshold: High and low threshold for
    reporting.[¶](#section-c.2.17-2.2){.pilcrow}

\(c\)
:   Period: Period for reporting, in
    milliseconds.[¶](#section-c.2.17-2.3){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.17-3){.pilcrow}

::: {#section-c.2.17-4}
``` {.sourcecode .lang-json}
    object {
       JSONString meas_rep_param;
       Threshold meas_threshold;
       JSONNumber meas_period;
    } MeasReportConfs;
```

[¶](#section-c.2.17-4){.pilcrow}
:::

Where \"Threshold\" is defined as
follows:[¶](#section-c.2.17-5){.pilcrow}

::: {#section-c.2.17-6}
``` {.sourcecode .lang-json}
    object {
       JSONNumber high;
       JSONNumber low;
    } Threshold;
```

[¶](#section-c.2.17-6){.pilcrow}
:::
:::
:::

::: {#meas_rep}
::: {#section-c.2.18 .section}
### [C.2.18.](#section-c.2.18){.section-number .selfRef} [Measurement Report](#name-measurement-report){.section-name .selfRef} {#name-measurement-report}

This data type represents the measurements reported by the CCM for each
access network measured. This type contains the connection information,
the Delivery Node ID that identifies either the cell (ECGI) or the Wi-Fi
Access Point ID or MAC address (or equivalent identifier in other
technologies), and the actual measurement performed by the CCM in the
last measurement period.[¶](#section-c.2.18-1){.pilcrow}

The representation of this data type is as
follows:[¶](#section-c.2.18-2){.pilcrow}

::: {#section-c.2.18-3}
``` {.sourcecode .lang-json}
    object {
       JSONNumber connection_id;
       JSONString connection_type;
       JSONString delivery_node_id;
       Measurement measurements <1..*>;
    } MXMeasRep;
```

[¶](#section-c.2.18-3){.pilcrow}
:::

Where Measurement is defined as the key-value pair of the measurement
type and value. The exact measurement type parameter reported for a
given connection depends on its Connection Type. The measurement type
parameters, for each Connection Type, are specified in [Appendix
C.2.17](#meas_ref_conf){.xref}.[¶](#section-c.2.18-4){.pilcrow}

::: {#section-c.2.18-5}
``` {.sourcecode .lang-json}
    object {
       JSONString measurement_type;
       JSONNumber measurement_value;
    } Measurement;
```

[¶](#section-c.2.18-5){.pilcrow}
:::
:::
:::
:::

::: {#section-c.3 .section}
## [C.3.](#section-c.3){.section-number .selfRef} [Schemas in JSON](#name-schemas-in-json){.section-name .selfRef} {#name-schemas-in-json}

::: {#section-c.3.1 .section}
### [C.3.1.](#section-c.3.1){.section-number .selfRef} [MX Base Schema](#name-mx-base-schema){.section-name .selfRef} {#name-mx-base-schema}

::: {#section-c.3.1-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {
    "message_type_def": {
      "enum": [
        "mx_discover",
        "mx_system_info",
        "mx_capability_req",
        "mx_capability_rsp",
        "mx_capability_ack",
        "mx_up_setup_conf_req",
        "mx_up_setup_cnf",
        "mx_reconf_req",
        "mx_reconf_rsp",
        "mx_path_est_req",
        "mx_path_est_results",
        "mx_traffic_steering_req",
        "mx_traffic_steering_rsp",
        "mx_ssid_indication",
        "mx_keep_alive_req",
        "mx_keep_alive_rsp",
        "mx_measurement_conf",
        "mx_measurement_report",
        "mx_session_termination_req",
        "mx_session_termination_rsp",
        "mx_app_madp_assoc_req",
        "mx_app_madp_assoc_rsp",
        "mx_network_analytics_req",
        "mx_network_analytics_rsp"
      ],
      "type": "string"
    },
    "sequence_num_def": {
      "minimum": 1,
      "type": "integer"
    },
    "version_def": {
      "type": "string"
    }
   },
  "id": "https://example.com/mams/mx_base_def.json"
}
```

[¶](#section-c.3.1-1){.pilcrow}
:::
:::

::: {#section-c.3.2 .section}
### [C.3.2.](#section-c.3.2){.section-number .selfRef} [MX Definitions](#name-mx-definitions){.section-name .selfRef} {#name-mx-definitions}

::: {#section-c.3.2-1}
``` {.sourcecode .lang-json}
{
    "$schema": "https://json-schema.org/draft-04/schema#",
    "definitions": {
        "adapt_method": {
            "enum": [
                "UDP_without_DTLS",
                "UDP_with_DTLS",
                "IPsec",
                "Client_NAT"
            ],
            "type": "string"
        },
        "conv_method": {
            "enum": [
                "GMA",
                "MPTCP_Proxy",
                "GRE_Aggregation_Proxy",
                "MPQUIC"
            ],
            "type": "string"
        },
        "supported": {
            "type": "boolean"
        },
        "active": {
            "type": "boolean"
        },
        "connection_id": {
            "type": "integer"
        },
        "feature_name": {
            "enum": [
                "lossless_switching",
                "fragmentation",
                "concatenation",
                "uplink_aggregation",
                "downlink_aggregation",
                "measurement"
                "probing"
            ],
            "type": "string"
        },
        "connection_type": {
            "enum": [
                "Wi-Fi",
                "5G_NR",
                "MulteFire",
                "LTE"
            ],
            "type": "string"
        },
        "ip_address": {
                "type": "string"
        },
        "port": {
            "maximum": 65535,
            "minimum": 1,
            "type": "integer"
        },
        "adaptation_method": {
            "allOf" : [
                { "$ref": "#/definitions/adapt_method" },
                { "$ref": "#/definitions/supported" }
            ]
        },
        "connection": {
            "allOf" : [
                { "$ref": "#/definitions/connection_id" },
                { "$ref": "#/definitions/connection_type" }
            ]
        },
        "convergence_method": {
            "allOf": [
                { "$ref": "#/definitions/conv_method" },
                { "$ref": "#/definitions/supported" }
            ]
        },
        "feature_status": {
            "allOf": [
                { "$ref": "#/definitions/feature_name" },
                { "$ref": "#/definitions/active" }
            ]
        },
        "ncm_end_point": {
            "allOf" : [
                { "$ref" : "#/definitions/ip_address" },
                { "$ref" : "#/definitions/port" }
            ]
        },
        "capability_acknowledgment" : {
            "enum" : [
                "MX_ACCEPT",
                "MX_REJECT"
            ],
            "type" : "string"
        },
        "threshold" : {
            "high" : {
                "type" : "integer"
            },
            "low" : {
                "type" : "integer"
            },
            "type" : "object"
        },
        "meas_report_param" : {
            "enum" : [
                    "WLAN_RSSI",
                    "WLAN_LOAD",
                    "LTE_RSRP",
                    "LTE_RSRQ",
                    "UL_TPUT",
                    "DL_TPUT",
                    "EST_UL_TPUT",
                    "EST_DL_TPUT",
                    "NR_RSRP",
                    "NR_RSRQ"
            ],
            "type" : "string"
        },
        "meas_report_conf" : {
            "meas_rep_param" : {
                "$ref" : "#definitions/meas_report_param"
            },
            "meas_threshold" : {
                "$ref" : "#definitions/threshold"
            },
            "meas_period_ms" : {
                "type" : "integer"
            },
            "type" : "object"
        },
        "ssid_types" : {
            "enum" : [
                "ssid",
                "bssid",
                "hessid"
            ],
            "type" : "string"
        },
        "ip_addr_mask" : {
            "type" : "string",
            "default" : "0.0.0.0/0"
        },
        "port_range" : {
            "start" : {
                "type" : "integer",
                "default" : 0
            },
            "end" : {
                "type" : "integer",
                "default" : 65535
            }
        },
        "traffic_flow_template" : {
            "remote_addr_mask" : {
                "$ref" : "#definitions/ip_addr_mask" },
            "local_addr_mask" : {
                "$ref" : "#definitions/ip_addr_mask" },
            "protocol_type" : {
                "type" : "integer",
                "minimum" : 0,
                "maximum" : 255
            },
            "local_port_range" : {
                "$ref" : "#definitions/port_range" },
            "remote_port_range" : {
                "$ref" : "#definitions/port_range" },
            "traffic_class" : {
                "type" : "integer",
                "default" : 255
            },
            "flow_label" : {
                "type" : "integer",
                "default" : 0
            }
        },
        "delivery_node_id" : {
            "type" : "string"
        },
        "unique_session_id" : {
            "type" : "object",
            "ncm_id" : {
              "type" : "integer"
            },
            "session_id" : {
              "type" : "integer"
            }
        },
        "keep_alive_reason" : {
            "enum" : [
                "Timeout",
                "Handover"
            ],
            "type" : "string"
        },
        "connection_status" : {
            "enum" : [
                "disabled",
                "enabled",
                "connected"
            ],
            "type" : "string",
            "default" : "connected"
        },
        "adaptation_param" : {
           "udp_adapt_port" : {
              "type" : "integer"
           }
        },
        "probe_param" : {
            "probe_port" : {
                "type" : "integer"
            },
            "anchor_conn_id" : {
                "type" : "integer"
            },
            "mx_configuration_id" : {
                "type" : "integer"
            }
    },
        "client_param" : {
            "connection_id" : {
                "type" : "integer"
            },
            "adapt_param" : {
                "type" : {"$ref" : "#definitions/adaptation_param" }
            }
        }
    },
            "adapt_param": {
            "tunnel_ip_addr": {
                "type": "string"
            },
            "tunnel_end_port": {
                "type": "integer"
            },
            "shared_secret": {
                "type": "string"
            },
            "mx_header_optimization": {
                "type": "boolean",
                "default": false
            }
        },
        "delivery_connection": {
            "connection_id": {
                "$ref": "#definitions/connection_id"
            },
            "connection_type": {
                "$ref": "#definitions/connection_type"
            },
            "adaptation_method": {
                "$ref": "#definitions/adapt_method"
            },
            "adaptation_method_param": {
                "$ref": "#definitions/adapt_param"
            }
        },
        "app_madp_assoc": {
            "anchor_conn_id" : {
                "type" : "integer"
            },
            "mx_configuration_id" : {
                "type" : "integer"
            }

            "ul_tft_list": {
                "items": {
                    "$ref": "#definitions/traffic_flow_template"
                },
                "type": "array"
            },
            "dl_tft_list": {
                "items": {
                    "$ref": "#definitions/traffic_flow_template"
                },
                "type": "array"
            }
        },
        "predict_param_name": {
            "enum": [
                "validity_time",
                "bandwidth",
                "jitter",
                "latency",
                "signal_quality"
            ],
            "type": "string"
        },
        "predict_add_param_name": {
            "enum": [
                "WLAN_RSSI",
                "WLAN_LOAD",
                "LTE_RSRP",
                "LTE_RSRQ",
                "NR_RSRP",
                "NR_RSRQ"
            ],
            "type": "string"
        },
    "id": "https://example.com/mams/definitions.json"
}
```

[¶](#section-c.3.2-1){.pilcrow}
:::
:::

::: {#section-c.3.3 .section}
### [C.3.3.](#section-c.3.3){.section-number .selfRef} [MX Discover](#name-mx-discover){.section-name .selfRef} {#name-mx-discover}

::: {#section-c.3.3-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_discover.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"}
  },
  "type": "object"
}
```

[¶](#section-c.3.3-1){.pilcrow}
:::
:::

::: {#section-c.3.4 .section}
### [C.3.4.](#section-c.3.4){.section-number .selfRef} [MX System Info](#name-mx-system-info){.section-name .selfRef} {#name-mx-system-info}

::: {#section-c.3.4-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_system_info.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "ncm_connections": {
      "type": "array",
      "items": [
        {"$ref": "definitions.json#/connection"},
        {"$ref": "definitions.json#/ncm_end_point"}
      ]
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.4-1){.pilcrow}
:::
:::

::: {#section-c.3.5 .section}
### [C.3.5.](#section-c.3.5){.section-number .selfRef} [MX Capability Request](#name-mx-capability-request-2){.section-name .selfRef} {#name-mx-capability-request-2}

::: {#section-c.3.5-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_capability_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "adaptation_methods": {
      "items": {"$ref": "definitions.json#/adaptation_method"},
      "type": "array"
    },
    "anchor_connections": {
      "items": {"$ref": "definitions.json#/connection"},
      "type": "array"
    },
    "convergence_methods": {
      "items": {"$ref": "definitions.json#/convergence_method"},
      "type": "array"
    },
    "delivery_connections": {
      "items": {"$ref": "definitions.json#/connection"},
      "type": "array"
    },
    "feature_active": {
      "items": {"$ref": "definitions.json#/feature_status"},
      "type": "array"
    },
    "num_anchor_connections": {
      "type": "integer"
    },
    "num_delivery_connections": {
      "type": "integer"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.5-1){.pilcrow}
:::
:::

::: {#section-c.3.6 .section}
### [C.3.6.](#section-c.3.6){.section-number .selfRef} [MX Capability Response](#name-mx-capability-response-2){.section-name .selfRef} {#name-mx-capability-response-2}

::: {#section-c.3.6-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_capability_rsp.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "adaptation_methods": {
      "items": {"$ref": "definitions.json#/adaptation_method"},
      "type": "array"
    },
    "anchor_connections": {
      "items": {"$ref": "definitions.json#/connection"},
      "type": "array"
    },
    "convergence_methods": {
      "items": {"$ref": "definitions.json#/convergence_method"},
      "type": "array"
    },
    "delivery_connections": {
      "items": {"$ref": "definitions.json#/connection"},
      "type": "array"
    },
    "feature_active": {
      "items": {"$ref": "definitions.json#/feature_status"},
      "type": "array"
    },
    "num_anchor_connections": {
      "type": "integer"
    },
    "num_delivery_connections": {
      "type": "integer"
    },
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.6-1){.pilcrow}
:::
:::

::: {#section-c.3.7 .section}
### [C.3.7.](#section-c.3.7){.section-number .selfRef} [MX Capability Acknowledge](#name-mx-capability-acknowledge-2){.section-name .selfRef} {#name-mx-capability-acknowledge-2}

::: {#section-c.3.7-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_capability_ack.json",
  "properties": {
     "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
     "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
     "version": {"$ref": "mx_base_def.json#/version_def"},
     "unique_session_id": {
       "$ref": "definitions.json#/unique_session_id"},
     "capability_ack": {
       "$ref": "definitions.json#/capability_acknowledgment"}
  },
  "type": "object"
}
```

[¶](#section-c.3.7-1){.pilcrow}
:::
:::

::: {#section-c.3.8 .section}
### [C.3.8.](#section-c.3.8){.section-number .selfRef} [MX Reconfiguration Request](#name-mx-reconfiguration-request-2){.section-name .selfRef} {#name-mx-reconfiguration-request-2}

::: {#section-c.3.8-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_reconf_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"
    },
    "connection_id": {"$ref": "definitions.json#/connection_id"},
    "ip_address": {"$ref": "definitions.json#/ip_address"},
    "mtu_size": {
      "maximum": 65535,
      "minimum": 1,
      "type": "integer"
    },
    "ssid": {
      "type": "string"
    },
    "reconf_action": {
      "enum": [
        "release",
        "setup",
        "update"
      ],
      "id": "/properties/reconf_action",
      "type": "string"
    },
    "connection_status": {
       "$ref": "definitions.json#/connection_status"},
    "delivery_node_id": {
       "$ref": "definitions.json#/delivery_node_id"}
  },
  "type": "object"
}
```

[¶](#section-c.3.8-1){.pilcrow}
:::
:::

::: {#section-c.3.9 .section}
### [C.3.9.](#section-c.3.9){.section-number .selfRef} [MX Reconfiguration Response](#name-mx-reconfiguration-response-2){.section-name .selfRef} {#name-mx-reconfiguration-response-2}

::: {#section-c.3.9-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_reconf_rsp.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"}
  },
  "type": "object"
}
```

[¶](#section-c.3.9-1){.pilcrow}
:::
:::

::: {#section-c.3.10 .section}
### [C.3.10.](#section-c.3.10){.section-number .selfRef} [MX UP Setup Configuration Request](#name-mx-up-setup-configuration-r){.section-name .selfRef} {#name-mx-up-setup-configuration-r}

::: {#section-c.3.10-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "definitions": {
    "convergence_configuration": {
      "mx_configuration_id": {"type": "integer"},
      "convergence_method": {
        "$ref": "definitions.json#/conv_method"},
      "convergence_method_params": {
        "properties": {
          "proxy_ip": {"$ref": "definitions.json#/ip_address"},
          "proxy_port": {"$ref": "definitions.json#/port"},
          "client_key": {"$ref": "definitions.json#/client_key"}
        },
        "type": "object"
      },
      "num_delivery_connections": {
        "type": "integer"
      },
      "delivery_connections": {
        "items": {"$ref": "definitions.json#/delivery_connection"},
        "type": "array"
      }
    }
  },
  "id": "https://example.com/mams/mx_up_setup_conf_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "num_anchor_connections": {
      "type": "integer"
    },
    "anchor_connections": {
      "items": {
        "properties": {
          "connection_id": {
            "$ref": "definitions.json#/connection_id"},
          "connection_type": {
            "$ref": "definitions.json#/connection_type"},
          "num_active_mx_conf": {"type": "integer"},
          "convergence_config": {
            "items": {
              "$ref": "definitions/convergence_configuration"},
            "type": "array"
          }
        },
        "type": "object"
      },
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.10-1){.pilcrow}
:::
:::

::: {#section-c.3.11 .section}
### [C.3.11.](#section-c.3.11){.section-number .selfRef} [MX UP Setup Confirmation](#name-mx-up-setup-confirmation){.section-name .selfRef} {#name-mx-up-setup-confirmation}

::: {#section-c.3.11-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_up_setup_cnf.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "probe_param": {"$ref": "definitions.json#/probe_param"},
    "num_delivery_conn": {
      "type": "integer"
    },
    "client_params": {
      "type": "array",
      "items": [
        {"$ref": "definitions.json#/client_param"}
      ]
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.11-1){.pilcrow}
:::
:::

::: {#section-c.3.12 .section}
### [C.3.12.](#section-c.3.12){.section-number .selfRef} [MX Traffic Steering Request](#name-mx-traffic-steering-request-2){.section-name .selfRef} {#name-mx-traffic-steering-request-2}

::: {#section-c.3.12-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {
    "conn_list": {
      "items": {"$ref": "definitions.json#/connection_id"},
      "type": "array"
    },
    "ul_delivery": {
      "ul_tft": {
        "$ref": "definitions.json#/traffic_flow_template"},
      "connection_list": {"$ref": "#definitions/conn_list"}
    }
  },
  "id": "https://example.com/mams/mx_traffic_steering_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "connection_id": {"$ref": "definitions.json#/connection_id"},
    "mx_configuration_id": {"type": "integer"},
    "downlink_delivery": {
      "items": {"$ref": "definitions.json#/connection_id"},
      "type": "array"
    },
    "feature_active": {
      "items": {"$ref": "definitions.json#/feature_status"},
      "type": "array"
    },
    "default_uplink_delivery": {
      "type": "integer"
    },
    "uplink_delivery": {
      "items": {"$ref": "#definitions/ul_delivery"},
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.12-1){.pilcrow}
:::
:::

::: {#section-c.3.13 .section}
### [C.3.13.](#section-c.3.13){.section-number .selfRef} [MX Traffic Steering Response](#name-mx-traffic-steering-response){.section-name .selfRef} {#name-mx-traffic-steering-response}

::: {#section-c.3.13-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/example.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "feature_active": {
      "items": {"$ref": "definitions.json#/feature_status"},
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.13-1){.pilcrow}
:::
:::

::: {#section-c.3.14 .section}
### [C.3.14.](#section-c.3.14){.section-number .selfRef} [MX Application MADP Association Request](#name-mx-application-madp-associati){.section-name .selfRef} {#name-mx-application-madp-associati}

::: {#section-c.3.14-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/example.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "app_madp_assoc_list": {
      "items": {
        "$ref": "definitions.json#/app_madp_assoc"
       },
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.14-1){.pilcrow}
:::
:::

::: {#section-c.3.15 .section}
### [C.3.15.](#section-c.3.15){.section-number .selfRef} [MX Application MADP Association Response](#name-mx-application-madp-associatio){.section-name .selfRef} {#name-mx-application-madp-associatio}

::: {#section-c.3.15-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/example.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "is_success": {
      "type": "boolean"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.15-1){.pilcrow}
:::
:::

::: {#section-c.3.16 .section}
### [C.3.16.](#section-c.3.16){.section-number .selfRef} [MX Path Estimation Request](#name-mx-path-estimation-request-2){.section-name .selfRef} {#name-mx-path-estimation-request-2}

::: {#section-c.3.16-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_path_est_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "active_probe_ack_req": {
      "enum": [
        "no",
        "yes"
      ],
      "type": "string"
    },
    "active_probe_freq_ms": {
      "maximum": 10000,
      "minimum": 100,
      "type": "integer"
    },
    "active_probe_size_bytes": {
      "maximum": 1500,
      "minimum": 100,
      "type": "integer"
    },
    "active_probe_duration_sec": {
      "maximum": 100,
      "minimum": 10,
      "type":  "integer"
        },
    "connection_id": {"$ref": "definitions#/connection_id"},
    "init_probe_ack_req": {
      "enum": [
        "no",
        "yes"
      ],
      "type": "string"
    },
    "init_probe_size_bytes": {
      "maximum": 1500,
      "minimum": 100,
      "type": "integer"
    },
    "init_probe_test_duration_ms": {
      "maximum": 10000,
      "minimum": 100,
      "type": "integer"
    },
    "init_probe_test_rate_Mbps": {
      "maximum": 100,
      "minimum": 1,
      "type": "integer"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.16-1){.pilcrow}
:::
:::

::: {#section-c.3.17 .section}
### [C.3.17.](#section-c.3.17){.section-number .selfRef} [MX Path Estimation Results](#name-mx-path-estimation-results-2){.section-name .selfRef} {#name-mx-path-estimation-results-2}

::: {#section-c.3.17-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_path_est_results.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
              "$ref": "definitions.json#/unique_session_id"},
    "active_probe_results": {
      "properties": {
        "avg_tput_last_probe_duration_Mbps": {
          "maximum":100,
          "minimum": 1,
          "type": "number"
        }
      },
      "type": "object"
    },
    "connection_id": {"$ref": "definitions.json#/connection_id"},
    "init_probe_results": {
      "properties": {
        "lost_probes_percentage": {
          "maximum": 100,
          "minimum": 1,
          "type": "integer"
        },
       "probe_rate_Mbps": {
          "maximum": 100,
          "minimum": 1,
          "type": "number"
        }
      },
      "type": "object"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.17-1){.pilcrow}
:::
:::

::: {#section-c.3.18 .section}
### [C.3.18.](#section-c.3.18){.section-number .selfRef} [MX SSID Indication](#name-mx-ssid-indication-2){.section-name .selfRef} {#name-mx-ssid-indication-2}

::: {#section-c.3.18-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_ssid_indication.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "ssid_list": {
      "items": {
        "properties": {
          "ssid_type": {
            "$ref": "definitions.json#/ssid_types"},
          "ssid_id": {
            "type": "integer"
            }
          }
      },
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.18-1){.pilcrow}
:::
:::

::: {#section-c.3.19 .section}
### [C.3.19.](#section-c.3.19){.section-number .selfRef} [MX Measurement Configuration](#name-mx-measurement-configuration){.section-name .selfRef} {#name-mx-measurement-configuration}

::: {#section-c.3.19-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "definitions": {
    "meas_conf": {
      "connection_id" : {
        "$ref": "definitions.json#/connection_id"},
      "connection_type": {
        "$ref": "definitions.json#/connection_type"},
      "meas_rep_conf": {
        "items": {
          "$ref": "definitions.json#/meas_report_conf"},
        "type": "array"
      }
    }
  },
  "id": "https://example.com/mams/mx_measurement_conf.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "measurement_configuration": {
      "items": {"$ref": "#definitions/meas_conf"},
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.19-1){.pilcrow}
:::
:::

::: {#section-c.3.20 .section}
### [C.3.20.](#section-c.3.20){.section-number .selfRef} [MX Measurement Report](#name-mx-measurement-report-2){.section-name .selfRef} {#name-mx-measurement-report-2}

::: {#section-c.3.20-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "definitions": {},
  "id": "https://example.com/mams/mx_measurement_report.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "measurement_reports": {
      "items": {
        "properties": {
          "connection_id": {
            "$ref": "definitions.json#/connection_id"},
          "connection_type": {
            "$ref": "definitions.json#/connection_type"},
          "delivery_node_id": {
            "$ref": "definitions.json#/delivery_node_id"},
          "measurements": {
            "items": {
              "properties": {
                "measurement_type": {
                  "$ref": "definitions.json#/meas_report_param"},
                "measurement_value": {
                  "type": "integer"
                }
              },
              "type": "object"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.20-1){.pilcrow}
:::
:::

::: {#section-c.3.21 .section}
### [C.3.21.](#section-c.3.21){.section-number .selfRef} [MX Keep-Alive Request](#name-mx-keep-alive-request-2){.section-name .selfRef} {#name-mx-keep-alive-request-2}

::: {#section-c.3.21-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_keep_alive_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "keep_alive_reason": {
      "$ref": "definitions.json#/keep_alive_reason"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "connection_id": {
      "$ref": "definitions.json#/connection_id"},
    "delivery_node_id": {
      "$ref": "definitions.json#/connection_id"}
  },
  "type": "object"
}
```

[¶](#section-c.3.21-1){.pilcrow}
:::
:::

::: {#section-c.3.22 .section}
### [C.3.22.](#section-c.3.22){.section-number .selfRef} [MX Keep-Alive Response](#name-mx-keep-alive-response-2){.section-name .selfRef} {#name-mx-keep-alive-response-2}

::: {#section-c.3.22-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_keep_alive_rsp.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"}
  },
  "type": "object"
}
```

[¶](#section-c.3.22-1){.pilcrow}
:::
:::

::: {#section-c.3.23 .section}
### [C.3.23.](#section-c.3.23){.section-number .selfRef} [MX Session Termination Request](#name-mx-session-termination-reque){.section-name .selfRef} {#name-mx-session-termination-reque}

::: {#section-c.3.23-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_keep_alive_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "reason": {
      "enum": [
        "MX_NORMAL_RELEASE",
        "MX_NO_RESPONSE",
        "INTERNAL_ERROR"
      ],
      "type": "string"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.23-1){.pilcrow}
:::
:::

::: {#section-c.3.24 .section}
### [C.3.24.](#section-c.3.24){.section-number .selfRef} [MX Session Termination Response](#name-mx-session-termination-respo){.section-name .selfRef} {#name-mx-session-termination-respo}

::: {#section-c.3.24-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_session_termination_rsp.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"}
  },
  "type": "object"
}
```

[¶](#section-c.3.24-1){.pilcrow}
:::
:::

::: {#section-c.3.25 .section}
### [C.3.25.](#section-c.3.25){.section-number .selfRef} [MX Network Analytics Request](#name-mx-network-analytics-request){.section-name .selfRef} {#name-mx-network-analytics-request}

::: {#section-c.3.25-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "id": "https://example.com/mams/mx_network_analytics_req.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "unique_session_id": {
      "$ref": "definitions.json#/unique_session_id"},
    "params": {
      "items": {
        "$ref": "definitions.json#/predict_param_name"},
      "type": "array"
    }
  },
  "type": "object"
}
```

[¶](#section-c.3.25-1){.pilcrow}
:::
:::

::: {#section-c.3.26 .section}
### [C.3.26.](#section-c.3.26){.section-number .selfRef} [MX Network Analytics Response](#name-mx-network-analytics-respons){.section-name .selfRef} {#name-mx-network-analytics-respons}

::: {#section-c.3.26-1}
``` {.sourcecode .lang-json}
{
  "$schema": "https://json-schema.org/draft-04/schema#",
  "additionalProperties": false,
  "definitions": {
    "ParamPredictions": {
      "param_name": {
        "$ref": "definitions.json#/predict_param_name"},
      "additional_param": {
        "$ref": "definitions.json#/predict_add_param_name"},
      "prediction": {"type": "integer"},
      "likelihood": {"type": "integer"},
      "validity_time": {"type": "integer"}

    },
    "MXAnalyticsList": {
      "connection_id": {
        "$ref": "definitions.json#/connection_id"},
      "connection_type": {
        "$ref": "definitions.json#/connection_type"},
      "predictions": {
        "items": {
          "$ref": "#definitions/ParamPredictions"},
          "type": "array"
      }
    }
  },
  "id": "https://example.com/mams/mx_network_analytics_rsp.json",
  "properties": {
    "message_type": {"$ref": "mx_base_def.json#/message_type_def"},
    "sequence_num": {"$ref": "mx_base_def.json#/sequence_num_def"},
    "version": {"$ref": "mx_base_def.json#/version_def"},
    "param_list": {
      "items": {
        "$ref": "#definitions/MXAnalyticsList"},
        "type": "array"}
  },
  "type": "object"
}
```

[¶](#section-c.3.26-1){.pilcrow}
:::
:::
:::

::: {#section-c.4 .section}
## [C.4.](#section-c.4){.section-number .selfRef} [Examples in JSON](#name-examples-in-json){.section-name .selfRef} {#name-examples-in-json}

::: {#section-c.4.1 .section}
### [C.4.1.](#section-c.4.1){.section-number .selfRef} [MX Discover](#name-mx-discover-2){.section-name .selfRef} {#name-mx-discover-2}

::: {#section-c.4.1-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_discover",
  "sequence_num" : 1
}
```

[¶](#section-c.4.1-1){.pilcrow}
:::
:::

::: {#section-c.4.2 .section}
### [C.4.2.](#section-c.4.2){.section-number .selfRef} [MX System Info](#name-mx-system-info-2){.section-name .selfRef} {#name-mx-system-info-2}

::: {#section-c.4.2-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_system_info",
  "sequence_num" : 2,
  "ncm_connections" : [
    {
      "connection_id" : 0,
      "connection_type" : "LTE",
      "ncm_end_point" : {
        "ip_address" : "192.168.1.10",
        "port" : 1234
      }
    },
    {
      "connection_id" : 1,
      "connection_type" : "Wi-Fi",
      "ncm_end_point" : {
        "ip_address" : "192.168.1.10",
        "port" : 1234
      }
    }
  ]
}
```

[¶](#section-c.4.2-1){.pilcrow}
:::
:::

::: {#section-c.4.3 .section}
### [C.4.3.](#section-c.4.3){.section-number .selfRef} [MX Capability Request](#name-mx-capability-request-3){.section-name .selfRef} {#name-mx-capability-request-3}

::: {#section-c.4.3-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_capability_req",
  "sequence_num" : 3,
  "feature_active" : [
    {
      "feature_name" : "lossless_switching",
      "active" : true
    },
    {
      "feature_name" : "fragmentation",
      "active" : false
    }
  ],
  "num_anchor_connections" : 2,
  "anchor_connections" : [
    {
      "connection_id" : 0,
      "connection_type" : "LTE"
    },
    {
      "connection_id" : 1,
      "connection_type" : "Wi-Fi"
    }
  ],
  "num_delivery_connections" : 2,
  "delivery_connections" : [
    {
      "connection_id" : 0,
      "connection_type" : "LTE"
    },
    {
      "connection_id" : 1,
      "connection_type" : "Wi-Fi"
    }
  ],
  "convergence_methods" : [
    {
      "method" : "GMA",
      "supported" : true
    },
    {
      "method" : "MPTCP_Proxy",
      "supported" : false
    }
  ],
  "adaptation_methods" : [
    {
      "method" : "UDP_without_DTLS",
      "supported" : false
    },
    {
      "method" : "UDP_with_DTLS",
      "supported" : false
    },
    {
      "method" : "IPsec",
      "supported" : true
    },
    {
      "method" : "Client_NAT",
      "supported" : false
    }
  ]
}
```

[¶](#section-c.4.3-1){.pilcrow}
:::
:::

::: {#section-c.4.4 .section}
### [C.4.4.](#section-c.4.4){.section-number .selfRef} [MX Capability Response](#name-mx-capability-response-3){.section-name .selfRef} {#name-mx-capability-response-3}

::: {#section-c.4.4-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_capability_rsp",
  "sequence_num" : 3,
  "feature_active" : [
    {
      "feature_name" : "lossless_switching",
      "active" : true
    },
    {
      "feature_name" : "fragmentation",
      "active" : false
    }
  ],
  "num_anchor_connections" : 2,
  "anchor_connections" : [
    {
      "connection_id" : 0,
      "connection_type" : "LTE"
    },
    {
      "connection_id" : 1,
      "connection_type" : "Wi-Fi"
    }
  ],
  "num_delivery_connections" : 2,
  "delivery_connections" : [
    {
      "connection_id" : 0,
      "connection_type" : "LTE"
    },
    {
      "connection_id" : 1,
      "connection_type" : "Wi-Fi"
    }
  ],
  "convergence_methods" : [
    {
      "method" : "GMA",
      "supported" : true
    },
    {
      "method" : "MPTCP_Proxy",
      "supported" : false
    }
  ],
  "adaptation_methods" : [
    {
      "method" : "UDP_without_DTLS",
      "supported" : false
    },
    {
      "method" : "UDP_with_DTLS",
      "supported" : false
    },
    {
      "method" : "IPsec",
      "supported" : true
    },
    {
      "method" : "Client_NAT",
      "supported" : false
    }
  ],
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  }
}
```

[¶](#section-c.4.4-1){.pilcrow}
:::
:::

::: {#section-c.4.5 .section}
### [C.4.5.](#section-c.4.5){.section-number .selfRef} [MX Capability Acknowledge](#name-mx-capability-acknowledge-3){.section-name .selfRef} {#name-mx-capability-acknowledge-3}

::: {#section-c.4.5-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_capability_ack",
  "sequence_num" : 3,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "capability_ack" : "MX_ACCEPT"
}
```

[¶](#section-c.4.5-1){.pilcrow}
:::
:::

::: {#section-c.4.6 .section}
### [C.4.6.](#section-c.4.6){.section-number .selfRef} [MX Reconfiguration Request](#name-mx-reconfiguration-request-3){.section-name .selfRef} {#name-mx-reconfiguration-request-3}

::: {#section-c.4.6-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_reconf_req",
  "sequence_num" : 4,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "reconf_action" : "setup",
  "connection_id" : 0,
  "ip_address" : "192.168.110.1",
  "ssid" : "SSID_1",
  "mtu_size" : 1300,
  "connection_status" : "connected",
  "delivery_node_id" : "2A12C"
}
```

[¶](#section-c.4.6-1){.pilcrow}
:::
:::

::: {#section-c.4.7 .section}
### [C.4.7.](#section-c.4.7){.section-number .selfRef} [MX Reconfiguration Response](#name-mx-reconfiguration-response-3){.section-name .selfRef} {#name-mx-reconfiguration-response-3}

::: {#section-c.4.7-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_reconf_rsp",
  "sequence_num" : 4
}
```

[¶](#section-c.4.7-1){.pilcrow}
:::
:::

::: {#section-c.4.8 .section}
### [C.4.8.](#section-c.4.8){.section-number .selfRef} [MX UP Setup Configuration Request](#name-mx-up-setup-configuration-re){.section-name .selfRef} {#name-mx-up-setup-configuration-re}

::: {#section-c.4.8-1}
``` {.sourcecode .lang-json}
{
  "version": "1.0",
  "message_type": "mx_up_setup_conf_req",
  "sequence_num": 5,
  "num_anchor_connections": 2,
  "anchor_connections": [{
    "connection_id": 1,
    "connection_type": "Wi-Fi",
    "num_active_mx_conf" : 2,
    "convergence_config" : [
    {
      "mx_configuration_id" : 1,
      "convergence_method": "GMA",
      "convergence_method_params": {},
      "num_delivery_connections": 2,
      "delivery_connections": [{
        "connection_id": 0,
        "connection_type": "LTE",
        "adaptation_method": "UDP_without_DTLS",
        "adaptation_method_param": {
          "tunnel_ip_addr": "6.6.6.6",
          "tunnel_end_port": 9999,
          "mx_header_optimization": true
        }
      },
      {
        "connection_id": 1,
        "connection_type": "Wi-Fi"
      }
      ]
    },
    {
      "mx_configuration_id" : 2,
      "convergence_method": "GMA",
      "convergence_method_params": {},
      "num_delivery_connections": 1,
      "delivery_connections": [{
        "connection_id": 0,
        "connection_type": "LTE",
        "adaptation_method": "UDP_without_DTLS",
        "adaptation_method_param": {
          "tunnel_ip_addr": "6.6.6.6",
          "tunnel_end_port": 8877
        }
      }
      ]
    }
    ]
  },
  {
    "connection_id": 0,
    "connection_type": "LTE",
    "udp_port": 8888,
    "num_delivery_connections": 2,
    "delivery_connections": [{
      "connection_id": 0,
      "connection_type": "LTE"
    },
    {
      "connection_id": 1,
      "connection_type": "Wi-Fi",
      "adaptation_method": "UDP_without_DTLS",
      "adaptation_method_param": {
        "tunnel_ip_addr": "192.168.3.3",
        "tunnel_end_port": "6000"
      }
    }
    ]
  }
  ]
}
```

[¶](#section-c.4.8-1){.pilcrow}
:::
:::

::: {#section-c.4.9 .section}
### [C.4.9.](#section-c.4.9){.section-number .selfRef} [MX UP Setup Confirmation](#name-mx-up-setup-confirmation-2){.section-name .selfRef} {#name-mx-up-setup-confirmation-2}

::: {#section-c.4.9-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_up_setup_cnf",
  "sequence_num" : 5,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "probe_param" : {
    "probe_port" : 48700,
    "anchor_conn_id" : 0,
    "mx_configuration_id" : 1
  },
  "num_delivery_conn" : 2,
  "client_params" : [
    {
      "connection_id" : 0,
      "adapt_param" : {
        "udp_adapt_port" : 51000
      }
    },
    {
      "connection_id" : 1,
      "adapt_param" : {
        "udp_adapt_port" : 52000
      }
    }
  ]
}
```

[¶](#section-c.4.9-1){.pilcrow}
:::
:::

::: {#section-c.4.10 .section}
### [C.4.10.](#section-c.4.10){.section-number .selfRef} [MX Traffic Steering Request](#name-mx-traffic-steering-request-3){.section-name .selfRef} {#name-mx-traffic-steering-request-3}

::: {#section-c.4.10-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_traffic_steering_req",
  "sequence_num" : 6,
  "connection_id" : 0,
  "mx_configuration_id" : 1,
  "downlink_delivery" : [
    {
      "connection_id" : 0
    },
    {
      "connection_id" : 1
    }
  ],
  "default_uplink_delivery" : 0,
  "uplink_delivery" : [
    {
      "ul_tft" : {
         "remote_addr_mask" : "10.10.0.0/24",
         "local_addr_mask" : "192.168.0.0/24",
         "protocol_type" :  6,
         "local_port_range" : {
           "start" : 100,
           "end" : 1000
         },
         "remote_port_range" : {
           "start" : 100,
           "end" : 1000
         },
         "traffic_class" : 20,
         "flow_label" : 100
      },
      "conn_list" : [
         {
           "connection_id" : 1
         }
      ]
    },
    {
      "ul_tft" : {
         "remote_addr_mask" : "10.10.0.0/24",
         "local_addr_mask" : "192.168.0.0/24",
         "protocol_type" :  6,
         "local_port_range" : {
           "start" : 2000,
           "end" : 2000
         },
         "remote_port_range" : {
           "start" : 100,
           "end" : 1000
         },
         "traffic_class" : 20,
         "flow_label" : 50
      },
      "conn_list" : [
         {
          "connection_id" : 1
         }
      ]
    }
  ],
  "feature_active" : [
    {
      "feature_name" : "dl_aggregation",
      "active" : true
    },
    {
      "feature_name" : "ul_aggregation",
      "active" : false
    }
  ]
}
```

[¶](#section-c.4.10-1){.pilcrow}
:::
:::

::: {#section-c.4.11 .section}
### [C.4.11.](#section-c.4.11){.section-number .selfRef} [MX Traffic Steering Response](#name-mx-traffic-steering-response-2){.section-name .selfRef} {#name-mx-traffic-steering-response-2}

::: {#section-c.4.11-1}
``` {.sourcecode .lang-json}
{
  "version": "1.0",
  "message_type": "mx_traffic_steering_rsp",
  "sequence_num": 6,
  "unique_session_id": {
    "ncm_id": 110,
    "session_id": 1111
  },
  "feature_active": [{
    "feature_name": "lossless_switching",
    "active": true
  },
  {
    "feature_name": "fragmentation",
    "active": false
  }
  ]
}
```

[¶](#section-c.4.11-1){.pilcrow}
:::
:::

::: {#section-c.4.12 .section}
### [C.4.12.](#section-c.4.12){.section-number .selfRef} [MX Application MADP Association Request](#name-mx-application-madp-association){.section-name .selfRef} {#name-mx-application-madp-association}

::: {#section-c.4.12-1}
``` {.sourcecode .lang-json}
{
  "version": "1.0",
  "message_type": "mx_app_madp_assoc_req",
  "sequence_num": 6,
  "unique_session_id": {
    "ncm_id": 110,
    "session_id": 1111
  },
  "app_madp_assoc_list": [{
    "connection_id" : 0,
    "mx_configuration_id" : 1,
    "ul_tft_list": [{
      "protocol_type": 17,
      "local_port_range": {
        "start": 8888,
        "end": 8888
      }
      }],
        "dl_tft_list": [{
          "protocol_type": 17,
          "remote_port_range": {
            "start": 8888,
            "end": 8888
          }
        }]
  }
  ]
}
```

[¶](#section-c.4.12-1){.pilcrow}
:::
:::

::: {#section-c.4.13 .section}
### [C.4.13.](#section-c.4.13){.section-number .selfRef} [MX Application MADP Association Response](#name-mx-application-madp-association-){.section-name .selfRef} {#name-mx-application-madp-association-}

::: {#section-c.4.13-1}
``` {.sourcecode .lang-json}
{
  "version": "1.0",
  "message_type": "mx_app_madp_assoc_rsp",
  "sequence_num": 6,
  "is_success": true
}
```

[¶](#section-c.4.13-1){.pilcrow}
:::
:::

::: {#section-c.4.14 .section}
### [C.4.14.](#section-c.4.14){.section-number .selfRef} [MX Path Estimation Request](#name-mx-path-estimation-request-3){.section-name .selfRef} {#name-mx-path-estimation-request-3}

::: {#section-c.4.14-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_path_est_req",
  "sequence_num" : 7,
  "connection_id" : 0,
  "init_probe_test_duration_ms" : 100,
  "init_probe_test_rate_Mbps" : 10,
  "init_probe_size_bytes" : 1000,
  "init_probe_ack_req" : "yes",
  "active_probe_freq_ms" : 10000,
  "active_probe_size_bytes" : 1000,
  "active_probe_duration_sec" : 10,
  "active_probe_ack_req" : "no"
}
```

[¶](#section-c.4.14-1){.pilcrow}
:::
:::

::: {#section-c.4.15 .section}
### [C.4.15.](#section-c.4.15){.section-number .selfRef} [MX Path Estimation Results](#name-mx-path-estimation-results-3){.section-name .selfRef} {#name-mx-path-estimation-results-3}

::: {#section-c.4.15-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_path_est_results",
  "sequence_num" : 8,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "connection_id" : 0,
  "init_probe_results" : {
    "lost_probes_percentage" : 1,
    "probe_rate_Mbps" : 9.9
  },
  "active_probe_results" : {
    "avg_tput_last_probe_duration_Mbps" : 9.8
  }
}
```

[¶](#section-c.4.15-1){.pilcrow}
:::
:::

::: {#section-c.4.16 .section}
### [C.4.16.](#section-c.4.16){.section-number .selfRef} [MX SSID Indication](#name-mx-ssid-indication-3){.section-name .selfRef} {#name-mx-ssid-indication-3}

::: {#section-c.4.16-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_ssid_indication",
  "sequence_num" : 9,
  "ssid_list" : [
    {
      "ssid_type" : "ssid",
      "ssid_id" : "SSID_1"
    },
    {
      "ssid_type" : "bssid",
      "ssid_id" : "xxx-yyy"
    }
  ]
}
```

[¶](#section-c.4.16-1){.pilcrow}
:::
:::

::: {#section-c.4.17 .section}
### [C.4.17.](#section-c.4.17){.section-number .selfRef} [MX Measurement Configuration](#name-mx-measurement-configuration-2){.section-name .selfRef} {#name-mx-measurement-configuration-2}

::: {#section-c.4.17-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_measurement_conf",
  "sequence_num" : 10,
  "measurement_configuration" : [
  {
    "connection_id" : 0,
    "connection_type" : "Wi-Fi",
    "meas_rep_conf"  : [
      {
        "meas_rep_param" : "WLAN_RSSI",
        "meas_threshold" : {
          "high" : -10,
          "low" : -15
        },
        "meas_period_ms" : 500
      },
      {
        "meas_rep_param" : "WLAN_LOAD",
        "meas_threshold" : {
          "high" : -10,
          "low" : -15
        },
        "meas_period_ms" : 500
      },
      {
        "meas_rep_param" : "EST_UL_TPUT",
        "meas_threshold" : {
          "high" : 100,
          "low" : 30
        },
        "meas_period_ms" : 500
       }
     ]
  },
  {
    "connection_id" : 1,
    "connection_type" : "LTE",
    "meas_rep_conf"  : [
      {
        "meas_rep_param" : "LTE_RSRP",
        "meas_threshold" : {
          "high" : -10,
          "low" : -15
        },
        "meas_period_ms" : 500
      },
      {
        "meas_rep_param" : "LTE_RSRQ",
        "meas_threshold" : {
          "high" : -10,
          "low" : -15
        },
        "meas_period_ms" : 500
      }
    ]
  }
  ]
}
```

[¶](#section-c.4.17-1){.pilcrow}
:::
:::

::: {#section-c.4.18 .section}
### [C.4.18.](#section-c.4.18){.section-number .selfRef} [MX Measurement Report](#name-mx-measurement-report-3){.section-name .selfRef} {#name-mx-measurement-report-3}

::: {#section-c.4.18-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_measurement_report",
  "sequence_num" : 11,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "measurement_reports" : [
    {
      "connection_id" : 0,
      "connection_type" : "Wi-Fi",
      "delivery_node_id" : "2021A",
      "measurements"  : [
        {
          "measurement_type" : "WLAN_RSSI",
          "measurement_value" : -12
        },
        {
          "measurement_type" : "UL_TPUT",
          "measurement_value" : 10
        },
        {
          "measurement_type" : "EST_UL_TPUT",
          "measurement_value" : 20
        }
      ]
    },
    {
      "connection_id" : 1,
      "connection_type" : "LTE",
      "delivery_node_id" : "12323",
      "measurements"  : [
        {
          "measurement_type" : "LTE_RSRP",
          "measurement_value" : -12

         },
         {
           "measurement_type" : "LTE_RSRQ",
           "measurement_value" : -12

         }
      ]
    }
  ]
}
```

[¶](#section-c.4.18-1){.pilcrow}
:::
:::

::: {#section-c.4.19 .section}
### [C.4.19.](#section-c.4.19){.section-number .selfRef} [MX Keep-Alive Request](#name-mx-keep-alive-request-3){.section-name .selfRef} {#name-mx-keep-alive-request-3}

::: {#section-c.4.19-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_keep_alive_req",
  "sequence_num" : 12,
  "keep_alive_reason" : "Handover",
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "connection_id" : 0,
  "delivery_node_id" : "2021A"
}
```

[¶](#section-c.4.19-1){.pilcrow}
:::
:::

::: {#section-c.4.20 .section}
### [C.4.20.](#section-c.4.20){.section-number .selfRef} [MX Keep-Alive Response](#name-mx-keep-alive-response-3){.section-name .selfRef} {#name-mx-keep-alive-response-3}

::: {#section-c.4.20-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_keep_alive_rsp",
  "sequence_num" : 12,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  }
}
```

[¶](#section-c.4.20-1){.pilcrow}
:::
:::

::: {#section-c.4.21 .section}
### [C.4.21.](#section-c.4.21){.section-number .selfRef} [MX Session Termination Request](#name-mx-session-termination-reques){.section-name .selfRef} {#name-mx-session-termination-reques}

::: {#section-c.4.21-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_session_termination_req",
  "sequence_num" : 13,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "reason" : "MX_NORMAL_RELEASE"
}
```

[¶](#section-c.4.21-1){.pilcrow}
:::
:::

::: {#section-c.4.22 .section}
### [C.4.22.](#section-c.4.22){.section-number .selfRef} [MX Session Termination Response](#name-mx-session-termination-respon){.section-name .selfRef} {#name-mx-session-termination-respon}

::: {#section-c.4.22-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_session_termination_rsp",
  "sequence_num" : 13,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  }
}
```

[¶](#section-c.4.22-1){.pilcrow}
:::
:::

::: {#section-c.4.23 .section}
### [C.4.23.](#section-c.4.23){.section-number .selfRef} [MX Network Analytics Request](#name-mx-network-analytics-request-2){.section-name .selfRef} {#name-mx-network-analytics-request-2}

::: {#section-c.4.23-1}
``` {.sourcecode .lang-json}
{
  "version" : "1.0",
  "message_type" : "mx_network_analytics_req",
  "sequence_num" : 20,
  "unique_session_id" : {
    "ncm_id" : 110,
    "session_id" : 1111
  },
  "params" : [
    "jitter",
    "latency"
  ]
}
```

[¶](#section-c.4.23-1){.pilcrow}
:::
:::

::: {#section-c.4.24 .section}
### [C.4.24.](#section-c.4.24){.section-number .selfRef} [MX Network Analytics Response](#name-mx-network-analytics-response){.section-name .selfRef} {#name-mx-network-analytics-response}

::: {#section-c.4.24-1}
``` {.sourcecode .lang-json}
{
  "version": "1.0",
  "message_type": "mx_network_analytics_rsp",
  "sequence_num": 20,
  "param_list": [{
    "connection_id": 1,
    "connection_type": "Wi-Fi",
    "predictions": [{
      "param_name": "jitter",
      "prediction": 100,
      "likelihood": 50,
      "validity_time": 10
    },
    {
      "param_name": "latency",
      "prediction": 19,
      "likelihood": 40,
      "validity_time": 10
    }
    ]
  },
  {
    "connection_id": 2,
    "connection_type": "LTE",
    "predictions": [{
      "param_name": "jitter",
      "prediction": 10,
      "likelihood": 80,
      "validity_time": 10
    },
    {
      "param_name": "latency",
      "prediction": 4,
      "likelihood": 60,
      "validity_time": 10
    }
    ]
  }
  ]
}
```

[¶](#section-c.4.24-1){.pilcrow}
:::
:::
:::
:::

::: {#CCM_APP_APIs}
::: {#section-appendix.d .section}
## [Appendix D.](#section-appendix.d){.section-number .selfRef} [Definition of APIs Provided by the CCM to the Applications at the Client](#name-definition-of-apis-provided){.section-name .selfRef} {#name-definition-of-apis-provided}

This section provides an example implementation of the APIs exposed by
the CCM to the applications on the client, documented with OpenAPI using
Swagger 2.0.[¶](#section-appendix.d-1){.pilcrow}

::: {#section-appendix.d-2}
``` {.sourcecode .lang-json}
{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Client Connection Manager (CCM)",
    "description": "API provided by the CCM towards the application
                    on a MAMS client."
  },
  "host": "MAMS.ietf.org",
  "basePath": "/ccm/v1.0",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/capabilities": {
      "get": {
        "description": "This API can be used by an application to
                        request the capabilities of the CCM.",
        "produces": [
          "application/json",
          "text/html"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/capability"
            }
          },
          "default": {
            "description": "unexpected error",
            "schema": {
              "$ref": "#/definitions/errorModel"
            }
          }
        }
      }
    },
    "/app_requirements": {
      "post": {
        "description": "This API is used by the N-MADP to report
                        any types of MAMS user-specific errors to
                        the NCM.",
        "produces": [
          "application/json",
          "text/html"
        ],
        "parameters": [
          {
            "name": "app-requirements",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/app-requirements"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "default": {
            "description": "unexpected error",
            "schema": {
              "$ref": "#/definitions/errorModel"
            }
          }
        }
      }
    },
    "/predictive_link_params": {
      "get": {
        "description": "This API is used by applications to get the
                        information about predicted parameters for
                        each delivery connection.",
        "produces": [
          "application/json",
          "text/html"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/link-params"
            }
          },
          "default": {
            "description": "unexpected error",
            "schema": {
              "$ref": "#/definitions/errorModel"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "connection-id": {
      "type": "integer",
      "format": "uint8"
    },
    "connection-type": {
      "enum": [
        "Wi-Fi",
        "5G_NR",
        "MulteFire",
        "LTE"
      ],
      "type": "string"
    },
    "features": {
      "enum": [
        "lossless_switching",
        "fragmentation",
        "concatenation",
        "uplink_aggregation",
        "downlink_aggregation",
        "measurement"
        "probing"
      ],
      "type": "string"
    },
    "adaptation-methods": {
      "enum": [
        "UDP_without_DTLS",
        "UDP_with_DTLS",
        "IPsec",
        "Client_NAT"
      ],
      "type": "string"
    },
    "convergence-methods": {
      "enum": [
        "GMA",
        "MPTCP_Proxy",
        "GRE_Aggregation_Proxy",
        "MPQUIC"
      ],
      "type": "string"
    },
    "connection": {
      "type": "object",
      "properties": {
        "conn-id": {
          "$ref": "#/definitions/connection-id"
        },
        "conn-type": {
          "$ref": "#/definitions/connection-type"
        }
      }
    },
    "convergence-parameters": {
      "type": "object",
      "properties": {
        "conv-param-name": {
          "type": "string"
        },
        "conv-param-value": {
          "type": "string"
        }
      }
    },
    "convergence-details": {
      "type": "object",
      "properties": {
        "conv-method": {
          "$ref": "#/definitions/convergence-methods"
        },
        "conv-params": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/convergence-parameters"
          }
        }
      }
    },
    "capability": {
      "type": "object",
      "properties": {
        "connections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/connection"
          }
        },
        "features": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/features"
          }
        },
        "adapt-methods": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/adaptation-methods"
          }
        },
        "conv-methods": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/convergence-details"
          }
        }
      }
    },
    "qos-param-name": {
      "enum": [
        "jitter",
        "latency",
        "bandwidth"
      ],
      "type": "string"
    },
    "qos-param": {
      "type": "object",
      "properties": {
        "qos-param-name": {
          "$ref": "#/definitions/qos-param-name"
        },
        "qos-param-value": {
          "type": "integer"
        }
      }
    },
    "port-range": {
      "type": "object",
      "properties": {
        "start": {
          "type": "integer"
        },
        "end": {
          "type": "integer"
        }
      }
    },
    "protocol-type": {
      "type": "integer"
    },
    "stream-features": {
      "type": "object",
      "properties": {
        "proto": {
          "$ref": "#/definitions/protocol-type"
        },
        "port-range": {
          "$ref": "#/definitions/port-range"
        },
        "traffic-qos": {
          "$ref": "#/definitions/qos-param"
        }
      }
    },
    "app-requirements": {
      "type": "object",
      "properties": {
        "num-streams": {
          "type": "integer"
        },
        "stream-feature": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/stream-features"
          }
        }
      }
    },
    "param-name": {
      "enum": [
        "bandwidth",
        "jitter",
        "latency",
        "signal_quality"
      ],
      "type": "string"
    },
    "additional-param-name": {
      "enum": [
        "lte-rsrp",
        "lte-rsrq",
        "nr-rsrp",
        "nr-rsrq",
        "wifi-rssi"
      ],
      "type": "string"
    },
    "link-parameter": {
      "type": "object",
      "properties": {
        "connection": {
          "$ref": "#/definitions/connection"
        },
        "param": {
          "$ref": "#/definitions/param-name"
        },
        "additional-param": {
          "$ref": "#/definitions/additional-param-name"
        },
        "prediction": {
          "type": "integer"
        },
        "likelihood": {
          "type": "integer"
        },
        "validity_time": {
          "type": "integer"
        }
      }
    },
    "link-params": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/link-parameter"
      }
    },
    "errorModel": {
      "type": "object",
      "description": "Error indication containing the error code and
                      message.",
      "required": [
        "code",
        "message"
      ],
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        }
      }
    }
  }
}
```

[¶](#section-appendix.d-2){.pilcrow}
:::
:::
:::

::: {#section-appendix.e .section}
## [Appendix E.](#section-appendix.e){.section-number .selfRef} [Implementation Example Using Python for MAMS Client and Server](#name-implementation-example-usin){.section-name .selfRef} {#name-implementation-example-usin}

::: {#section-e.1 .section}
## [E.1.](#section-e.1){.section-number .selfRef} [Client-Side Implementation](#name-client-side-implementation){.section-name .selfRef} {#name-client-side-implementation}

A simple client-side implementation using Python can be as
follows:[¶](#section-e.1-1){.pilcrow}

::: {#section-e.1-2}
``` {.sourcecode .lang-python}
#!/usr/bin/env python
import asyncio
import websockets
import json
import ssl
import time
import sys

context = ssl.SSLContext(ssl.PROTOCOL_TLS)
context.verify_mode = ssl.CERT_REQUIRED
context.set_ciphers("RSA")
context.check_hostname = False
context.load_verify_locations("/home/mecadmin/certs/rootca.pem")

discoverMsg = {'version':'1.0',
'message_type':'mx_discover'}

MXCapabilityRes = {'version':'1.0',
'message_type':'mx_capability_res',
'FeatureActive':[{'feature_name':'fragmentation', 'active':'yes'},
    {'feature_name':'lossless_switching', 'active':'yes'}],
'num_anchor_connections':1,
'anchor_connections':[{'connection_id':0, 'connection_type':'LTE'}],
'num_delivery_connections':1,
'delivery_connections':[{'connection_id':1,
    'connection_type':"Wi-Fi"}],
'convergence_methods':[{'method':'GMA', 'supported':'true'}],
'adaptation_methods':[{'method':'client_nat', 'supported':'false'}]
}

async def hello():
    async with websockets.connect('wss://localhost:8765',
       ssl=context) as websocket:
     try:
      loopFlag=False
      while True:
          await websocket.send(json.dumps(discoverMsg))
          json_message = await websocket.recv()
          message = json.loads(json_message)
          if "message_type" in message.keys():
            print("Received message:{}".format(
               message["message_type"]),
               "version:{}".format(message["version"]))
            if message["message_type"] == "mx_capability_req" :
                await websocket.send(json.dumps(MXCapabilityRes))
                loopFlag=True
                while(loopFlag==True):
                      pass
     except:
          print("Client stopped")

asyncio.get_event_loop().run_until_complete(hello())
```

[¶](#section-e.1-2){.pilcrow}
:::
:::

::: {#section-e.2 .section}
## [E.2.](#section-e.2){.section-number .selfRef} [Server-Side Implementation](#name-server-side-implementation){.section-name .selfRef} {#name-server-side-implementation}

A server-side implementation using Python can be as
follows:[¶](#section-e.2-1){.pilcrow}

::: {#section-e.2-2}
``` {.sourcecode .lang-python}
#!/usr/bin/env python
import asyncio
import websockets
import json
import ssl

ctx = ssl.SSLContext(ssl.PROTOCOL_TLS)
#ctx.set_ciphers("RSA-AES256-SHA")
ctx.load_verify_locations("/home/mecadmin/certs/rootca.pem")
certfile = "/home/mecadmin/certs/server.pem"
keyfile = "/home/mecadmin/certs/serverkey.pem"
ctx.load_cert_chain(certfile, keyfile, password=None)

MXCapabilityReq = {'version':'1.0',
'message_type':'mx_capability_req',
'FeatureActive':[{'feature_name':'fragmentation', 'active':'yes'},
    {'feature_name':'lossless_switching', 'active':'yes'}],
'num_anchor_connections':1,
'anchor_connections':[{'connection_id':0, 'connection_type':'LTE'}],
'num_delivery_connections':1,
'delivery_connections':[{'connection_id':1,
    'connection_type':"Wi-Fi"}],
'convergence_methods':[{'method':'GMA', 'supported':'true'}],
'adaptation_methods':[{'method':'client_nat', 'supported':'false'}]
}

async def hello(websocket, path):
 try:
   while True:
     name = await websocket.recv()
     msg = json.loads(name)
     if "message_type" in msg.keys():
        print("Received message:{}".format(msg["message_type"]),
           "version:{}".format(msg["version"]))
        if msg['message_type'] == 'mx_discover':
           await websocket.send(json.dumps(MXCapabilityReq))

 except:
      print("Client disconnected")

try:
 start_server = websockets.serve(hello, 'localhost', 8765,ssl=ctx)

 asyncio.get_event_loop().run_until_complete(start_server)
 asyncio.get_event_loop().run_forever()
except:
 print("Server stopped")
```

[¶](#section-e.2-2){.pilcrow}
:::
:::
:::

::: {#section-appendix.f .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

This protocol is the outcome of work by many engineers, not just the
authors of this document. The people who contributed to this project,
listed in alphabetical order by first name, are [Barbara
Orlandi]{.contact-name}, [Bongho Kim]{.contact-name}, [David
Lopez-Perez]{.contact-name}, [Doru Calin]{.contact-name}, [Jonathan
Ling]{.contact-name}, [Lohith Nayak]{.contact-name}, and [Michael
Scharf]{.contact-name}.[¶](#section-appendix.f-1){.pilcrow}
:::

::: {#section-appendix.g .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

The authors gratefully acknowledge the following additional
contributors, in alphabetical order by first name: [A Krishna
Pramod]{.contact-name}/Nokia Bell Labs, [Hannu
Flinck]{.contact-name}/Nokia Bell Labs, [Hema
Pentakota]{.contact-name}/Nokia, [Julius Mueller]{.contact-name}/AT&T,
[Nurit Sprecher]{.contact-name}/Nokia, [Salil
Agarwal]{.contact-name}/Nokia, [Shuping Peng]{.contact-name}/Huawei, and
[Subramanian Vasudevan]{.contact-name}/Nokia Bell Labs. [Subramanian
Vasudevan]{.contact-name} has been instrumental in conceptualization and
development of solution principles for the MAMS framework. [Shuping
Peng]{.contact-name} has been a key contributor in refining the
framework and control-plane protocol
aspects.[¶](#section-appendix.g-1){.pilcrow}
:::

::: {#authors-addresses}
::: {#section-appendix.h .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Satish Kanugovi]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Nokia Bell Labs]{.org}
:::

::: email
Email: <satish.k@nokia-bell-labs.com>
:::

::: {.left dir="auto"}
[Florin Baboescu]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Broadcom]{.org}
:::

::: email
Email: <florin.baboescu@broadcom.com>
:::

::: {.left dir="auto"}
[Jing Zhu]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Intel]{.org}
:::

::: email
Email: <jing.z.zhu@intel.com>
:::

::: {.left dir="auto"}
[SungHoon Seo]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Korea Telecom]{.org}
:::

::: email
Email: <sh.seo@kt.com>
:::
:::
:::
