  RFC 9125         SR DC Gateways    August 2021
  ---------------- ----------------- -------------
  Farrel, et al.   Standards Track   \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9125](https://www.rfc-editor.org/rfc/rfc9125){.eref}

Category:
:   Standards Track

Published:
:   August 2021

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    A. Farrel
    :::

    ::: org
    Old Dog Consulting
    :::
    :::

    ::: author
    ::: author-name
    J. Drake
    :::

    ::: org
    Juniper Networks
    :::
    :::

    ::: author
    ::: author-name
    E. Rosen
    :::

    ::: org
    Juniper Networks
    :::
    :::

    ::: author
    ::: author-name
    K. Patel
    :::

    ::: org
    Arrcus, Inc.
    :::
    :::

    ::: author
    ::: author-name
    L. Jalil
    :::

    ::: org
    Verizon
    :::
    :::
:::

# RFC 9125 {#rfcnum}

# Gateway Auto-Discovery and Route Advertisement for Site Interconnection Using Segment Routing {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

Data centers are attached to the Internet or a backbone network by
gateway routers. One data center typically has more than one gateway for
commercial, load-balancing, and resiliency reasons. Other sites, such as
access networks, also need to be connected across backbone networks
through gateways.[¶](#section-abstract-1){.pilcrow}

This document defines a mechanism using the BGP Tunnel Encapsulation
attribute to allow data center gateway routers to advertise routes to
the prefixes reachable in the site, including advertising them on behalf
of other gateways at the same site. This allows segment routing to be
used to identify multiple paths across the Internet or backbone network
between different gateways. The paths can be selected for
load-balancing, resilience, and quality
purposes.[¶](#section-abstract-2){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9125>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2021 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Requirements
    Language](#name-requirements-language){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Site Gateway
    Auto-Discovery](#name-site-gateway-auto-discovery){.xref}
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Relationship to BGP - Link State and
    Egress Peer Engineering](#name-relationship-to-bgp-link-st){.xref}
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Advertising a Site Route
    Externally](#name-advertising-a-site-route-ex){.xref}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Encapsulation](#name-encapsulation){.xref}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [Manageability
    Considerations](#name-manageability-consideration){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Relationship to Route Target
        Constraint](#name-relationship-to-route-targe){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [10](#section-10){.xref}. [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.10.2.1}
        [10.1](#section-10.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.10.2.2}
        [10.2](#section-10.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-A){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-B){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

Data centers (DCs) are critical components of the infrastructure used by
network operators to provide services to their customers. DCs (sites)
are interconnected by a backbone network, which consists of any number
of private networks and/or the Internet. DCs are attached to the
backbone network by routers that are gateways (GWs). One DC typically
has more than one GW for various reasons including commercial
preferences, load balancing, or resiliency against connection or device
failure.[¶](#section-1-1){.pilcrow}

Segment Routing (SR) (\[[RFC8402](#RFC8402){.xref}\]) is a protocol
mechanism that can be used within a DC as well as for steering traffic
that flows between two DC sites. In order for a source site (also known
as an ingress site) that uses SR to load-balance the flows it sends to a
destination site (also known as an egress site), it needs to know the
complete set of entry nodes (i.e., GWs) for that egress DC from the
backbone network connecting the two DCs. Note that it is assumed that
the connected set of DC sites and the border nodes in the backbone
network on the paths that connect the DC sites are part of the same SR
BGP - Link State (LS) instance (see \[[RFC7752](#RFC7752){.xref}\] and
\[[RFC9086](#RFC9086){.xref}\]) so that traffic engineering using SR may
be used for these flows.[¶](#section-1-2){.pilcrow}

Other sites, such as access networks, also need to be connected across
backbone networks through gateways. For illustrative purposes, consider
the ingress and egress sites shown in [Figure 1](#david_hockney){.xref}
as separate Autonomous Systems (ASes) (noting that the sites could be
implemented as part of the ASes to which they are attached, or as
separate ASes). The various ASes that provide connectivity between the
ingress and egress sites could each be constructed differently and use
different technologies such as IP; MPLS using global table routing
information from BGP; MPLS IP VPN; SR-MPLS IP VPN; or SRv6 IP VPN. That
is, the ingress and egress sites can be connected by tunnels across a
variety of technologies. This document describes how SR Segment
Identifiers (SIDs) are used to identify the paths between the ingress
and egress sites.[¶](#section-1-3){.pilcrow}

The solution described in this document is agnostic as to whether the
transit ASes do or do not have SR capabilities. The solution uses SR to
stitch together path segments between GWs and through the Autonomous
System Border Routers (ASBRs). Thus, there is a requirement that the GWs
and ASBRs are SR capable. The solution supports the SR path being
extended into the ingress and egress sites if they are SR
capable.[¶](#section-1-4){.pilcrow}

The solution defined in this document can be seen in the broader context
of site interconnection in
\[[SR-INTERCONNECT](#I-D.farrel-spring-sr-domain-interconnect){.xref}\].
That document shows how other existing protocol elements may be combined
with the solution defined in this document to provide a full system, but
it is not a necessary reference for understanding this
document.[¶](#section-1-5){.pilcrow}

Suppose that there are two gateways, GW1 and GW2 as shown in [Figure
1](#david_hockney){.xref}, for a given egress site and that they each
advertise a route to prefix X, which is located within the egress site
with each setting itself as next hop. One might think that the GWs for X
could be inferred from the routes\' next-hop fields, but typically it is
not the case that both routes get distributed across the backbone:
rather only the best route, as selected by BGP, is distributed. This
precludes load-balancing flows across both
GWs.[¶](#section-1-6){.pilcrow}

[]{#name-example-site-interconnectio}

::: {#david_hockney}
::: {#section-1-7.1 .artwork .art-text .alignCenter}
          -----------------                    ---------------------
         | Ingress         |                  | Egress     ------   |
         | Site            |                  | Site      |Prefix|  |
         |                 |                  |           |   X  |  |
         |                 |                  |            ------   |
         |       --        |                  |   ---          ---  |
         |      |GW|       |                  |  |GW1|        |GW2| |
          -------++--------                    ----+-----------+-+--
                 | \                               |          /  |
                 |  \                              |         /   |
                 |  -+-------------        --------+--------+--  |
                 | ||ASBR|     ----|      |----  |ASBR| |ASBR| | |
                 | | ----     |ASBR+------+ASBR|  ----   ----  | |
                 | |           ----|      |----                | |
                 | |               |      |                    | |
                 | |           ----|      |----                | |
                 | | AS1      |ASBR+------+ASBR|           AS2 | |
                 | |           ----|      |----                | |
                 |  ---------------        --------------------  |
               --+-----------------------------------------------+--
              | |ASBR|                                       |ASBR| |
              |  ----               AS3                       ----  |
              |                                                     |
               -----------------------------------------------------
:::

[Figure 1](#figure-1){.selfRef}: [Example Site
Interconnection](#name-example-site-interconnectio){.selfRef}
:::

The obvious solution to this problem is to use the BGP feature that
allows the advertisement of multiple paths in BGP (known as Add-Paths)
(\[[RFC7911](#RFC7911){.xref}\]) to ensure that all routes to X get
advertised by BGP. However, even if this is done, the identity of the
GWs will be lost as soon as the routes get distributed through an ASBR
that will set itself to be the next hop. And if there are multiple ASes
in the backbone, not only will the next hop change several times, but
the Add-Paths technique will experience scaling issues. This all means
that the Add-Paths approach is effectively limited to sites connected
over a single AS.[¶](#section-1-8){.pilcrow}

This document defines a solution that overcomes this limitation and
works equally well with a backbone constructed from one or more ASes
using the Tunnel Encapsulation attribute
(\[[RFC9012](#RFC9012){.xref}\]) as follows:[¶](#section-1-9){.pilcrow}

-   [When a GW to a given site advertises a route to a prefix X within
    that site, it will include a Tunnel Encapsulation attribute that
    contains the union of the Tunnel Encapsulation attributes advertised
    by each of the GWs to that site, including
    itself.[¶](#section-1-10.1){.pilcrow}]{#section-1-10.1}

In other words, each route advertised by a GW identifies all of the GWs
to the same site (see [Section 3](#DCGWautodisco){.xref} for a
discussion of how GWs discover each other), i.e., the Tunnel
Encapsulation attribute advertised by each GW contains multiple Tunnel
TLVs, one or more from each active GW, and each Tunnel TLV will contain
a Tunnel Egress Endpoint sub-TLV that identifies the GW for that Tunnel
TLV. Therefore, even if only one of the routes is distributed to other
ASes, it will not matter how many times the next hop changes, as the
Tunnel Encapsulation attribute will remain
unchanged.[¶](#section-1-11){.pilcrow}

To put this in the context of [Figure 1](#david_hockney){.xref}, GW1 and
GW2 discover each other as gateways for the egress site. Both GW1 and
GW2 advertise themselves as having routes to prefix X. Furthermore, GW1
includes a Tunnel Encapsulation attribute, which is the union of its
Tunnel Encapsulation attribute and GW2\'s Tunnel Encapsulation
attribute. Similarly, GW2 includes a Tunnel Encapsulation attribute,
which is the union of its Tunnel Encapsulation attribute and GW1\'s
Tunnel Encapsulation attribute. The gateway in the ingress site can now
see all possible paths to X in the egress site regardless of which route
is propagated to it, and it can choose one or balance traffic flows as
it sees fit.[¶](#section-1-12){.pilcrow}
:::
:::

::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}
:::

::: {#DCGWautodisco}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Site Gateway Auto-Discovery](#name-site-gateway-auto-discovery){.section-name .selfRef} {#name-site-gateway-auto-discovery}

To allow a given site\'s GWs to auto-discover each other and to
coordinate their operations, the following procedures are
implemented:[¶](#section-3-1){.pilcrow}

-   [A route target (\[[RFC4360](#RFC4360){.xref}\]) [MUST]{.bcp14} be
    attached to each GW\'s auto-discovery route (defined below), and its
    value [MUST]{.bcp14} be set to a value that indicates the site
    identifier. The rules for constructing a route target are detailed
    in \[[RFC4360](#RFC4360){.xref}\]. It is [RECOMMENDED]{.bcp14} that
    a Type x00 or x02 route target be
    used.[¶](#section-3-2.1){.pilcrow}]{#section-3-2.1}
-   [Site identifiers are set through configuration. The site
    identifiers [MUST]{.bcp14} be the same across all GWs to the site
    (i.e., the same identifier is used by all GWs to the same site) and
    [MUST]{.bcp14} be unique across all sites that are connected (i.e.,
    across all GWs to all sites that are
    interconnected).[¶](#section-3-2.2){.pilcrow}]{#section-3-2.2}
-   [Each GW [MUST]{.bcp14} construct an import filtering rule to import
    any route that carries a route target with the same site identifier
    that the GW itself uses. This means that only these GWs will import
    those routes, and that all GWs to the same site will import each
    other\'s routes and will learn (auto-discover) the current set of
    active GWs for the
    site.[¶](#section-3-2.3){.pilcrow}]{#section-3-2.3}

The auto-discovery route that each GW advertises consists of the
following:[¶](#section-3-3){.pilcrow}

-   [IPv4 or IPv6 Network Layer Reachability Information (NLRI)
    (\[[RFC4760](#RFC4760){.xref}\]) containing one of the GW\'s
    loopback addresses (that is, with an AFI/SAFI pair that is one of
    the following: IPv4/NLRI used for unicast forwarding (1/1);
    IPv6/NLRI used for unicast forwarding (2/1); IPv4/NLRI with MPLS
    Labels (1/4); or IPv6/NLRI with MPLS Labels
    (2/4)).[¶](#section-3-4.1){.pilcrow}]{#section-3-4.1}
-   [A Tunnel Encapsulation attribute (\[[RFC9012](#RFC9012){.xref}\])
    containing the GW\'s encapsulation information encoded in one or
    more Tunnel TLVs.[¶](#section-3-4.2){.pilcrow}]{#section-3-4.2}

To avoid the side effect of applying the Tunnel Encapsulation attribute
to any packet that is addressed to the GW itself, the address advertised
for auto-discovery [MUST]{.bcp14} be a different loopback address than
is advertised for packets directed to the gateway
itself.[¶](#section-3-5){.pilcrow}

As described in [Section 1](#introduction){.xref}, each GW will include
a Tunnel Encapsulation attribute with the GW encapsulation information
for each of the site\'s active GWs (including itself) in every route
advertised externally to that site. As the current set of active GWs
changes (due to the addition of a new GW or the failure/removal of an
existing GW), each externally advertised route will be re-advertised
with a new Tunnel Encapsulation attribute, which reflects the current
set of active GWs.[¶](#section-3-6){.pilcrow}

If a gateway becomes disconnected from the backbone network, or if the
site operator decides to terminate the gateway\'s activity, it
[MUST]{.bcp14} withdraw the advertisements described above. This means
that remote gateways at other sites will stop seeing advertisements from
or about this gateway. Note that if the routing within a site is broken
(for example, such that there is a route from one GW to another but not
in the reverse direction), then it is possible that incoming traffic
will be routed to the wrong GW to reach the destination prefix; in this
degraded network situation, traffic may be
dropped.[¶](#section-3-7){.pilcrow}

Note that if a GW is (mis)configured with a different site identifier
from the other GWs to the same site, then it will not be auto-discovered
by the other GWs (and will not auto-discover the other GWs). This would
result in a GW for another site receiving only the Tunnel Encapsulation
attribute included in the BGP best route, i.e., the Tunnel Encapsulation
attribute of the (mis)configured GW or that of the other
GWs.[¶](#section-3-8){.pilcrow}
:::
:::

::: {#EPE}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Relationship to BGP - Link State and Egress Peer Engineering](#name-relationship-to-bgp-link-st){.section-name .selfRef} {#name-relationship-to-bgp-link-st}

When a remote GW receives a route to a prefix X, it uses the Tunnel
Egress Endpoint sub-TLVs in the containing Tunnel Encapsulation
attribute to identify the GWs through which X can be reached. It uses
this information to compute SR Traffic Engineering (SR TE) paths across
the backbone network looking at the information advertised to it in SR
BGP - Link State (BGP-LS) (\[[RFC9085](#RFC9085){.xref}\]) and
correlated using the site identity. SR Egress Peer Engineering (EPE)
(\[[RFC9086](#RFC9086){.xref}\]) can be used to supplement the
information advertised in BGP-LS.[¶](#section-4-1){.pilcrow}
:::
:::

::: {#advertising}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Advertising a Site Route Externally](#name-advertising-a-site-route-ex){.section-name .selfRef} {#name-advertising-a-site-route-ex}

When a packet destined for prefix X is sent on an SR TE path to a GW for
the site containing X (that is, the packet is sent in the ingress site
on an SR TE path that describes the whole path including those parts
that are within the egress site), it needs to carry the receiving GW\'s
SID for X such that this SID becomes the next SID that is due to be
processed before the GW completes its processing of the packet. To
achieve this, each Tunnel TLV in the Tunnel Encapsulation attribute
contains a Prefix-SID sub-TLV (\[[RFC9012](#RFC9012){.xref}\]) for
X.[¶](#section-5-1){.pilcrow}

As defined in \[[RFC9012](#RFC9012){.xref}\], the Prefix-SID sub-TLV is
only for IPv4/IPV6 Labeled Unicast routes, so the solution described in
this document only applies to routes of those types. If the use of the
Prefix-SID sub-TLV for routes of other types is defined in the future,
further documents will be needed to describe their use for site
interconnection consistent with this
document.[¶](#section-5-2){.pilcrow}

Alternatively, if MPLS SR is in use and if the GWs for a given egress
site are configured to allow GWs at remote ingress sites to perform SR
TE through that egress site for a prefix X, then each GW to the egress
site computes an SR TE path through the egress site to X and places each
in an MPLS Label Stack sub-TLV (\[[RFC9012](#RFC9012){.xref}\]) in the
SR Tunnel TLV for that GW.[¶](#section-5-3){.pilcrow}

Please refer to [Section
7](https://datatracker.ietf.org/doc/html/draft-farrel-spring-sr-domain-interconnect-06#section-7){.relref}
of
\[[SR-INTERCONNECT](#I-D.farrel-spring-sr-domain-interconnect){.xref}\]
for worked examples of how the SID stack is constructed in this case and
how the advertisements would work.[¶](#section-5-4){.pilcrow}
:::
:::

::: {#encaps}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Encapsulation](#name-encapsulation){.section-name .selfRef} {#name-encapsulation}

If a site is configured to allow remote GWs to send packets to the site
in the site\'s native encapsulation, then each GW to the site will also
include multiple instances of a Tunnel TLV for that native encapsulation
in externally advertised routes: one for each GW. Each Tunnel TLV
contains a Tunnel Egress Endpoint sub-TLV with the address of the GW
that the Tunnel TLV identifies. A remote GW may then encapsulate a
packet according to the rules defined via the sub-TLVs included in each
of the Tunnel TLVs.[¶](#section-6-1){.pilcrow}
:::
:::

::: {#iana}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA maintains the \"BGP Tunnel Encapsulation Attribute Tunnel Types\"
registry in the \"Border Gateway Protocol (BGP) Tunnel Encapsulation\"
registry.[¶](#section-7-1){.pilcrow}

IANA had previously assigned the value 17 from this subregistry for \"SR
Tunnel\", referencing this document as an Internet-Draft. At that time,
the assignment policy for this range of the registry was \"First Come
First Served\"
\[[RFC8126](#RFC8126){.xref}\].[¶](#section-7-2){.pilcrow}

IANA has marked that assignment as deprecated. IANA may reclaim that
codepoint at such a time that the registry is
depleted.[¶](#section-7-3){.pilcrow}
:::
:::

::: {#security}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

From a protocol point of view, the mechanisms described in this document
can leverage the security mechanisms already defined for BGP. Further
discussion of security considerations for BGP may be found in the BGP
specification itself (\[[RFC4271](#RFC4271){.xref}\]) and in the
security analysis for BGP (\[[RFC4272](#RFC4272){.xref}\]). The original
discussion of the use of the TCP MD5 signature option to protect BGP
sessions is found in \[[RFC5925](#RFC5925){.xref}\], while
\[[RFC6952](#RFC6952){.xref}\] includes an analysis of BGP keying and
authentication issues.[¶](#section-8-1){.pilcrow}

The mechanisms described in this document involve sharing routing or
reachability information between sites, which may mean disclosing
information that is normally contained within a site. So it needs to be
understood that normal security paradigms based on the boundaries of
sites are weakened and interception of BGP messages may result in
information being disclosed to third parties. Discussion of these issues
with respect to VPNs can be found in \[[RFC4364](#RFC4364){.xref}\],
while \[[RFC7926](#RFC7926){.xref}\] describes many of the issues
associated with the exchange of topology or TE information between
sites.[¶](#section-8-2){.pilcrow}

Particular exposures resulting from this work
include:[¶](#section-8-3){.pilcrow}

-   [Gateways to a site will know about all other gateways to the same
    site. This feature applies within a site, so it is not a substantial
    exposure, but it does mean that if the BGP exchanges within a site
    can be snooped or if a gateway can be subverted, then an attacker
    may learn the full set of gateways to a site. This would facilitate
    more effective attacks on that
    site.[¶](#section-8-4.1){.pilcrow}]{#section-8-4.1}
-   [The existence of multiple gateways to a site becomes more visible
    across the backbone and even into remote sites. This means that an
    attacker is able to prepare a more comprehensive attack than exists
    when only the locally attached backbone network (e.g., the AS that
    hosts the site) can see all of the gateways to a site. For example,
    a Denial-of-Service attack on a single GW is mitigated by the
    existence of other GWs, but if the attacker knows about all the
    gateways, then the whole set can be attacked at
    once.[¶](#section-8-4.2){.pilcrow}]{#section-8-4.2}
-   [A node in a site that does not have external BGP peering (i.e., is
    not really a site gateway and cannot speak BGP into the backbone
    network) may be able to get itself advertised as a gateway by
    letting other genuine gateways discover it (by speaking BGP to them
    within the site), so it may get those genuine gateways to advertise
    it as a gateway into the backbone network. This would allow the
    malicious node to attract traffic without having to have secure BGP
    peerings with out-of-site
    nodes.[¶](#section-8-4.3){.pilcrow}]{#section-8-4.3}
-   [An external party intercepting BGP messages anywhere between sites
    may learn information about the functioning of the sites and the
    locations of endpoints. While this is not necessarily a significant
    security or privacy risk, it is possible that the disclosure of this
    information could be used by an
    attacker.[¶](#section-8-4.4){.pilcrow}]{#section-8-4.4}
-   [If it is possible to modify a BGP message within the backbone, it
    may be possible to spoof the existence of a gateway. This could
    cause traffic to be attracted to a specific node and might result in
    traffic not being
    delivered.[¶](#section-8-4.5){.pilcrow}]{#section-8-4.5}

All of the issues in the list above could cause disruption to site
interconnection, but they are not new protocol vulnerabilities so much
as new exposures of information that [SHOULD]{.bcp14} be protected
against using existing protocol mechanisms such as securing the TCP
sessions over which the BGP messages flow. Furthermore, it is a general
observation that if these attacks are possible, then it is highly likely
that far more significant attacks can be made on the routing system. It
should be noted that BGP peerings are not discovered but always arise
from explicit configuration.[¶](#section-8-5){.pilcrow}

Given that the gateways and ASBRs are connected by tunnels that may run
across parts of the network that are not trusted, data center operators
using the approach set out in this network [MUST]{.bcp14} consider using
gateway-to-gateway encryption to protect the data center traffic.
Additionally, due consideration [MUST]{.bcp14} be given to encrypting
end-to-end traffic as it would be for any traffic that uses a public or
untrusted network for transport.[¶](#section-8-6){.pilcrow}
:::
:::

::: {#manageability}
::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [Manageability Considerations](#name-manageability-consideration){.section-name .selfRef} {#name-manageability-consideration}

The principal configuration item added by this solution is the
allocation of a site identifier. The same identifier [MUST]{.bcp14} be
assigned to every GW to the same site, and each site [MUST]{.bcp14} have
a different identifier. This requires coordination, probably through a
central management agent.[¶](#section-9-1){.pilcrow}

It should be noted that BGP peerings are not discovered but always arise
from explicit configuration. This is no different from any other BGP
operation.[¶](#section-9-2){.pilcrow}

The site identifiers that are configured and carried in route targets
(see [Section 3](#DCGWautodisco){.xref}) are an important feature to
ensure that all of the gateways to a site discover each other.
Therefore, it is important that this value is not misconfigured since
that would result in the gateways not discovering each other and not
advertising each other.[¶](#section-9-3){.pilcrow}

::: {#rtc}
::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Relationship to Route Target Constraint](#name-relationship-to-route-targe){.section-name .selfRef} {#name-relationship-to-route-targe}

In order to limit the VPN routing information that is maintained at a
given route reflector, \[[RFC4364](#RFC4364){.xref}\] suggests that
route reflectors use \"Cooperative Route Filtering\", which was renamed
\"Outbound Route Filtering\" and defined in
\[[RFC5291](#RFC5291){.xref}\]. \[[RFC4684](#RFC4684){.xref}\] defines
an extension to that mechanism to include support for multiple
autonomous systems and asymmetric VPN topologies such as hub-and-spoke.
The mechanism in RFC 4684 is known as Route Target Constraint
(RTC).[¶](#section-9.1-1){.pilcrow}

An operator would not normally configure RTC by default for any AFI/SAFI
combination and would only enable it after careful consideration. When
using the mechanisms defined in this document, the operator should
carefully consider the effects of filtering routes. In some cases, this
may be desirable, and in others, it could limit the effectiveness of the
procedures.[¶](#section-9.1-2){.pilcrow}
:::
:::
:::
:::

::: {#section-10 .section}
## [10.](#section-10){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-10.1 .section}
### [10.1.](#section-10.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC4271\]
:   [Rekhter, Y., Ed.]{.refAuthor}, [Li, T., Ed.]{.refAuthor}, and [S.
    Hares, Ed.]{.refAuthor}, [\"A Border Gateway Protocol 4
    (BGP-4)\"]{.refTitle}, [RFC 4271]{.seriesInfo}, [DOI
    10.17487/RFC4271]{.seriesInfo}, January 2006,
    \<<https://www.rfc-editor.org/info/rfc4271>\>.
:   

\[RFC4360\]
:   [Sangli, S.]{.refAuthor}, [Tappan, D.]{.refAuthor}, and [Y.
    Rekhter]{.refAuthor}, [\"BGP Extended Communities
    Attribute\"]{.refTitle}, [RFC 4360]{.seriesInfo}, [DOI
    10.17487/RFC4360]{.seriesInfo}, February 2006,
    \<<https://www.rfc-editor.org/info/rfc4360>\>.
:   

\[RFC4760\]
:   [Bates, T.]{.refAuthor}, [Chandra, R.]{.refAuthor},
    [Katz, D.]{.refAuthor}, and [Y. Rekhter]{.refAuthor},
    [\"Multiprotocol Extensions for BGP-4\"]{.refTitle}, [RFC
    4760]{.seriesInfo}, [DOI 10.17487/RFC4760]{.seriesInfo}, January
    2007, \<<https://www.rfc-editor.org/info/rfc4760>\>.
:   

\[RFC5925\]
:   [Touch, J.]{.refAuthor}, [Mankin, A.]{.refAuthor}, and [R.
    Bonica]{.refAuthor}, [\"The TCP Authentication Option\"]{.refTitle},
    [RFC 5925]{.seriesInfo}, [DOI 10.17487/RFC5925]{.seriesInfo}, June
    2010, \<<https://www.rfc-editor.org/info/rfc5925>\>.
:   

\[RFC7752\]
:   [Gredler, H., Ed.]{.refAuthor}, [Medved, J.]{.refAuthor},
    [Previdi, S.]{.refAuthor}, [Farrel, A.]{.refAuthor}, and [S.
    Ray]{.refAuthor}, [\"North-Bound Distribution of Link-State and
    Traffic Engineering (TE) Information Using BGP\"]{.refTitle}, [RFC
    7752]{.seriesInfo}, [DOI 10.17487/RFC7752]{.seriesInfo}, March 2016,
    \<<https://www.rfc-editor.org/info/rfc7752>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC9012\]
:   [Patel, K.]{.refAuthor}, [Van de Velde, G.]{.refAuthor},
    [Sangli, S.]{.refAuthor}, and [J. Scudder]{.refAuthor}, [\"The BGP
    Tunnel Encapsulation Attribute\"]{.refTitle}, [RFC
    9012]{.seriesInfo}, [DOI 10.17487/RFC9012]{.seriesInfo}, April 2021,
    \<<https://www.rfc-editor.org/info/rfc9012>\>.
:   
:::

::: {#section-10.2 .section}
### [10.2.](#section-10.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[RFC4272\]
:   [Murphy, S.]{.refAuthor}, [\"BGP Security Vulnerabilities
    Analysis\"]{.refTitle}, [RFC 4272]{.seriesInfo}, [DOI
    10.17487/RFC4272]{.seriesInfo}, January 2006,
    \<<https://www.rfc-editor.org/info/rfc4272>\>.
:   

\[RFC4364\]
:   [Rosen, E.]{.refAuthor} and [Y. Rekhter]{.refAuthor}, [\"BGP/MPLS IP
    Virtual Private Networks (VPNs)\"]{.refTitle}, [RFC
    4364]{.seriesInfo}, [DOI 10.17487/RFC4364]{.seriesInfo}, February
    2006, \<<https://www.rfc-editor.org/info/rfc4364>\>.
:   

\[RFC4684\]
:   [Marques, P.]{.refAuthor}, [Bonica, R.]{.refAuthor},
    [Fang, L.]{.refAuthor}, [Martini, L.]{.refAuthor},
    [Raszuk, R.]{.refAuthor}, [Patel, K.]{.refAuthor}, and [J.
    Guichard]{.refAuthor}, [\"Constrained Route Distribution for Border
    Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet
    Protocol (IP) Virtual Private Networks (VPNs)\"]{.refTitle}, [RFC
    4684]{.seriesInfo}, [DOI 10.17487/RFC4684]{.seriesInfo}, November
    2006, \<<https://www.rfc-editor.org/info/rfc4684>\>.
:   

\[RFC5291\]
:   [Chen, E.]{.refAuthor} and [Y. Rekhter]{.refAuthor}, [\"Outbound
    Route Filtering Capability for BGP-4\"]{.refTitle}, [RFC
    5291]{.seriesInfo}, [DOI 10.17487/RFC5291]{.seriesInfo}, August
    2008, \<<https://www.rfc-editor.org/info/rfc5291>\>.
:   

\[RFC6952\]
:   [Jethanandani, M.]{.refAuthor}, [Patel, K.]{.refAuthor}, and [L.
    Zheng]{.refAuthor}, [\"Analysis of BGP, LDP, PCEP, and MSDP Issues
    According to the Keying and Authentication for Routing Protocols
    (KARP) Design Guide\"]{.refTitle}, [RFC 6952]{.seriesInfo}, [DOI
    10.17487/RFC6952]{.seriesInfo}, May 2013,
    \<<https://www.rfc-editor.org/info/rfc6952>\>.
:   

\[RFC7911\]
:   [Walton, D.]{.refAuthor}, [Retana, A.]{.refAuthor},
    [Chen, E.]{.refAuthor}, and [J. Scudder]{.refAuthor},
    [\"Advertisement of Multiple Paths in BGP\"]{.refTitle}, [RFC
    7911]{.seriesInfo}, [DOI 10.17487/RFC7911]{.seriesInfo}, July 2016,
    \<<https://www.rfc-editor.org/info/rfc7911>\>.
:   

\[RFC7926\]
:   [Farrel, A., Ed.]{.refAuthor}, [Drake, J.]{.refAuthor},
    [Bitar, N.]{.refAuthor}, [Swallow, G.]{.refAuthor},
    [Ceccarelli, D.]{.refAuthor}, and [X. Zhang]{.refAuthor}, [\"Problem
    Statement and Architecture for Information Exchange between
    Interconnected Traffic-Engineered Networks\"]{.refTitle}, [BCP
    206]{.seriesInfo}, [RFC 7926]{.seriesInfo}, [DOI
    10.17487/RFC7926]{.seriesInfo}, July 2016,
    \<<https://www.rfc-editor.org/info/rfc7926>\>.
:   

\[RFC8126\]
:   [Cotton, M.]{.refAuthor}, [Leiba, B.]{.refAuthor}, and [T.
    Narten]{.refAuthor}, [\"Guidelines for Writing an IANA
    Considerations Section in RFCs\"]{.refTitle}, [BCP 26]{.seriesInfo},
    [RFC 8126]{.seriesInfo}, [DOI 10.17487/RFC8126]{.seriesInfo}, June
    2017, \<<https://www.rfc-editor.org/info/rfc8126>\>.
:   

\[RFC8402\]
:   [Filsfils, C., Ed.]{.refAuthor}, [Previdi, S., Ed.]{.refAuthor},
    [Ginsberg, L.]{.refAuthor}, [Decraene, B.]{.refAuthor},
    [Litkowski, S.]{.refAuthor}, and [R. Shakir]{.refAuthor}, [\"Segment
    Routing Architecture\"]{.refTitle}, [RFC 8402]{.seriesInfo}, [DOI
    10.17487/RFC8402]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8402>\>.
:   

\[RFC9085\]
:   [Previdi, S.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Gredler, H.]{.refAuthor}, and [M.
    Chen]{.refAuthor}, [\"Border Gateway Protocol - Link State (BGP-LS)
    Extensions for Segment Routing\"]{.refTitle}, [RFC
    9085]{.seriesInfo}, [DOI 10.17487/RFC9085]{.seriesInfo}, August
    2021, \<<https://www.rfc-editor.org/info/rfc9085>\>.
:   

\[RFC9086\]
:   [Previdi, S.]{.refAuthor}, [Talaulikar, K., Ed.]{.refAuthor},
    [Filsfils, C.]{.refAuthor}, [Patel, K.]{.refAuthor},
    [Ray, S.]{.refAuthor}, and [J. Dong]{.refAuthor}, [\"Border Gateway
    Protocol - Link State (BGP-LS) Extensions for Segment Routing BGP
    Egress Peer Engineering\"]{.refTitle}, [RFC 9086]{.seriesInfo}, [DOI
    10.17487/RFC9086]{.seriesInfo}, August 2021,
    \<<https://www.rfc-editor.org/info/rfc9086>\>.
:   

\[SR-INTERCONNECT\]
:   [Farrel, A.]{.refAuthor} and [J. Drake]{.refAuthor},
    [\"Interconnection of Segment Routing Sites - Problem Statement and
    Solution Landscape\"]{.refTitle}, [Work in Progress]{.refContent},
    [Internet-Draft,
    draft-farrel-spring-sr-domain-interconnect-06]{.seriesInfo}, 19 May
    2021,
    \<<https://datatracker.ietf.org/doc/html/draft-farrel-spring-sr-domain-interconnect-06>\>.
:   
:::
:::

::: {#acks}
::: {#appendix-A .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

Thanks to [Bruno Rijsman]{.contact-name}, [Stephane
Litkowski]{.contact-name}, [Boris Hassanov]{.contact-name}, [Linda
Dunbar]{.contact-name}, [Ravi Singh]{.contact-name}, and [Daniel
Migault]{.contact-name} for review comments, and to [Robert
Raszuk]{.contact-name} for useful discussions. [Gyan
Mishra]{.contact-name} provided a helpful GenArt review, and [John
Scudder]{.contact-name} and [Benjamin Kaduk]{.contact-name} made helpful
comments during IESG review.[¶](#appendix-A-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#appendix-B .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Adrian Farrel]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Old Dog Consulting]{.org}
:::

::: email
Email: <adrian@olddog.co.uk>
:::

::: {.left dir="auto"}
[John Drake]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <jdrake@juniper.net>
:::

::: {.left dir="auto"}
[Eric Rosen]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <erosen52@gmail.com>
:::

::: {.left dir="auto"}
[Keyur Patel]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Arrcus, Inc.]{.org}
:::

::: email
Email: <keyur@arrcus.com>
:::

::: {.left dir="auto"}
[Luay Jalil]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Verizon]{.org}
:::

::: email
Email: <luay.jalil@verizon.com>
:::
:::
:::
