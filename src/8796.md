  RFC 8796          RSVP-TE Summary FRR   July 2020
  ----------------- --------------------- -----------
  Taillon, et al.   Standards Track       \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8796](https://www.rfc-editor.org/rfc/rfc8796){.eref}

Updates:
:   [4090](https://www.rfc-editor.org/rfc/rfc4090){.eref}

Category:
:   Standards Track

Published:
:   July 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    M. Taillon
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    T. Saad, [Ed.]{.editor}
    :::

    ::: org
    Juniper Networks
    :::
    :::

    ::: author
    ::: author-name
    R. Gandhi
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    A. Deshmukh
    :::

    ::: org
    Juniper Networks
    :::
    :::

    ::: author
    ::: author-name
    M. Jork
    :::

    ::: org
    128 Technology
    :::
    :::

    ::: author
    ::: author-name
    V. Beeram
    :::

    ::: org
    Juniper Networks
    :::
    :::
:::

# RFC 8796 {#rfcnum}

# RSVP-TE Summary Fast Reroute Extensions for Label Switched Path (LSP) Tunnels {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This document updates RFC 4090 for the Resource Reservation Protocol
(RSVP) Traffic Engineering (TE) procedures defined for facility backup
protection. The updates include extensions that reduce the amount of
signaling and processing that occurs during Fast Reroute (FRR); as a
result, scalability when undergoing FRR convergence after a link or node
failure is improved. These extensions allow the RSVP message exchange
between the Point of Local Repair (PLR) and the Merge Point (MP) nodes
to be independent of the number of protected Label Switched Paths (LSPs)
traversing between them when facility bypass FRR protection is used. The
signaling extensions are fully backwards compatible with nodes that do
not support them.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8796>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Conventions Used in This
    Document](#name-conventions-used-in-this-do){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}

    -   ::: {#section-toc.1-1.2.2.1}
        [2.1](#section-2.1){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.2.2.2}
        [2.2](#section-2.2){.xref}.  [Acronyms and
        Abbreviations](#name-acronyms-and-abbreviations){.xref}[¶](#section-toc.1-1.2.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Extensions for Summary FRR
    Signaling](#name-extensions-for-summary-frr-){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [B-SFRR-Ready Extended ASSOCIATION
        Object](#name-b-sfrr-ready-extended-assoc){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.3.2.1.2.1}
            [3.1.1](#section-3.1.1){.xref}.  [IPv4 B-SFRR-Ready Extended
            Association
            ID](#name-ipv4-b-sfrr-ready-extended-){.xref}[¶](#section-toc.1-1.3.2.1.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.3.2.1.2.2}
            [3.1.2](#section-3.1.2){.xref}.  [IPv6 B-SFRR-Ready Extended
            Association
            ID](#name-ipv6-b-sfrr-ready-extended-){.xref}[¶](#section-toc.1-1.3.2.1.2.2.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.3.2.1.2.3}
            [3.1.3](#section-3.1.3){.xref}.  [Processing Rules for
            B-SFRR-Ready Extended ASSOCIATION
            Object](#name-processing-rules-for-b-sfrr){.xref}[¶](#section-toc.1-1.3.2.1.2.3.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [B-SFRR-Active Extended ASSOCIATION
        Object](#name-b-sfrr-active-extended-asso){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}

        -   ::: {#section-toc.1-1.3.2.2.2.1}
            [3.2.1](#section-3.2.1){.xref}.  [IPv4 B-SFRR-Active
            Extended Association
            ID](#name-ipv4-b-sfrr-active-extended){.xref}[¶](#section-toc.1-1.3.2.2.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.3.2.2.2.2}
            [3.2.2](#section-3.2.2){.xref}.  [IPv6 B-SFRR-Active
            Extended Association
            ID](#name-ipv6-b-sfrr-active-extended){.xref}[¶](#section-toc.1-1.3.2.2.2.2.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Signaling Procedures prior to
        Failure](#name-signaling-procedures-prior-){.xref}[¶](#section-toc.1-1.3.2.3.1){.pilcrow}

        -   ::: {#section-toc.1-1.3.2.3.2.1}
            [3.3.1](#section-3.3.1){.xref}.  [PLR Signaling
            Procedure](#name-plr-signaling-procedure){.xref}[¶](#section-toc.1-1.3.2.3.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.3.2.3.2.2}
            [3.3.2](#section-3.3.2){.xref}.  [MP Signaling
            Procedure](#name-mp-signaling-procedure){.xref}[¶](#section-toc.1-1.3.2.3.2.2.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [Signaling Procedures
        Post-Failure](#name-signaling-procedures-post-f){.xref}[¶](#section-toc.1-1.3.2.4.1){.pilcrow}

        -   ::: {#section-toc.1-1.3.2.4.2.1}
            [3.4.1](#section-3.4.1){.xref}.  [PLR Signaling
            Procedure](#name-plr-signaling-procedure-2){.xref}[¶](#section-toc.1-1.3.2.4.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.3.2.4.2.2}
            [3.4.2](#section-3.4.2){.xref}.  [MP Signaling
            Procedure](#name-mp-signaling-procedure-2){.xref}[¶](#section-toc.1-1.3.2.4.2.2.1){.pilcrow}
            :::
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [Refreshing Summary FRR Active
        LSPs](#name-refreshing-summary-frr-acti){.xref}[¶](#section-toc.1-1.3.2.5.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Backwards
    Compatibility](#name-backwards-compatibility){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [](#section-appendix.a){.xref}[Acknowledgments](#name-acknowledgments){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [](#section-appendix.b){.xref}[Contributors](#name-contributors){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::
:::
:::

::: {#introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The Fast Reroute (FRR) procedures defined in
\[[RFC4090](#RFC4090){.xref}\] describe the mechanisms for the Point of
Local Repair (PLR) to reroute traffic and signaling of a protected
RSVP-TE Label Switched Path (LSP) onto the bypass tunnel in the event of
a TE link or node failure. Such signaling procedures are performed
individually for each affected protected LSP. This may eventually lead
to control-plane scalability and latency issues on the PLR and/or the
Merge Point (MP) nodes due to limited memory and CPU processing
resources. This condition is exacerbated when the failure affects a
large number of protected LSPs that traverse the same PLR and MP
nodes.[¶](#section-1-1){.pilcrow}

For example, in a large-scale deployment of RSVP-TE LSPs, a single Label
Switching Router (LSR) acting as a PLR node may host tens of thousands
of protected RSVP-TE LSPs egressing the same protected link and also act
as an MP node for a similar number of LSPs that ingress on the same
link. In the event of the failure of the link or neighbor node, the
RSVP-TE control plane of the node (when acting as a PLR node) becomes
busy rerouting protected LSPs over the bypass tunnel(s) in one direction
and (when acting as an MP node) becomes busy merging RSVP states from
signaling received over bypass tunnels for one or more LSPs in the
reverse direction. Subsequently, the head-end Label Edge Routers (LERs)
that are notified of the local repair at any downstream LSRs will
attempt to (re)converge the affected RSVP-TE LSPs onto newly computed
paths \-- possibly traversing the same previously affected LSR(s). As a
result, the RSVP-TE control plane becomes overwhelmed (1) by the amount
of FRR RSVP-TE processing overhead following the link or node failure
and (2) due to other control-plane protocols (e.g., IGP) that undergo
convergence on the same node at the same
time.[¶](#section-1-2){.pilcrow}

Today, each protected RSVP-TE LSP is signaled individually over the
bypass tunnel after FRR. The changes introduced in this document allow
the PLR node to assign multiple protected LSPs to a bypass tunnel group
and to communicate this assignment to the MP, such that upon failure,
the signaling over the bypass tunnel happens on one or more bypass
tunnel groups. This document defines new extensions
that[¶](#section-1-3){.pilcrow}

1.  [update the procedures defined in \[[RFC4090](#RFC4090){.xref}\] for
    facility backup protection, to enable the MP node to become aware of
    the PLR node\'s bypass tunnel assignment group or
    groups.[¶](#section-1-4.1){.pilcrow}]{#section-1-4.1}
2.  [allow FRR procedures between the PLR and the MP nodes to be
    signaled and processed on one or more per-bypass tunnel
    groups.[¶](#section-1-4.2){.pilcrow}]{#section-1-4.2}

As defined in \[[RFC2961](#RFC2961){.xref}\], summary refresh procedures
use MESSAGE_ID to refresh the RSVP Path and Resv states to help with
scaling. The Summary FRR procedures introduced in this document build on
those concepts to allow the MESSAGE_ID(s) to be exchanged on one or more
per-bypass tunnel assignment groups and continue to use summary refresh
procedures while reducing the amount of messaging that occurs after
rerouting signaling over the bypass tunnel
post-FRR.[¶](#section-1-5){.pilcrow}
:::
:::

::: {#conventions-used-in-this-document}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Conventions Used in This Document](#name-conventions-used-in-this-do){.section-name .selfRef} {#name-conventions-used-in-this-do}

::: {#terminology}
::: {#section-2.1 .section}
### [2.1.](#section-2.1){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2.1-1){.pilcrow}
:::
:::

::: {#acronyms-and-abbreviations}
::: {#section-2.2 .section}
### [2.2.](#section-2.2){.section-number .selfRef} [Acronyms and Abbreviations](#name-acronyms-and-abbreviations){.section-name .selfRef} {#name-acronyms-and-abbreviations}

It is assumed that the reader is familiar with the terms and
abbreviations used in \[[RFC3209](#RFC3209){.xref}\] and
\[[RFC4090](#RFC4090){.xref}\].[¶](#section-2.2-1){.pilcrow}

The following abbreviations are also used in this
document:[¶](#section-2.2-2){.pilcrow}

[]{.break}

LSR:
:   Label Switching Router[¶](#section-2.2-3.2){.pilcrow}
:   

LER:
:   Label Edge Router[¶](#section-2.2-3.4){.pilcrow}
:   

MPLS:
:   Multiprotocol Label Switching[¶](#section-2.2-3.6){.pilcrow}
:   

LSP:
:   Label Switched Path[¶](#section-2.2-3.8){.pilcrow}
:   

MP:
:   Merge Point node as defined in
    \[[RFC4090](#RFC4090){.xref}\][¶](#section-2.2-3.10){.pilcrow}
:   

PLR:
:   Point of Local Repair node as defined in
    \[[RFC4090](#RFC4090){.xref}\][¶](#section-2.2-3.12){.pilcrow}
:   

FRR:
:   Fast Reroute as defined in
    \[[RFC4090](#RFC4090){.xref}\][¶](#section-2.2-3.14){.pilcrow}
:   

B-SFRR-Ready:
:   Bypass Summary FRR Ready Extended ASSOCIATION object. Added by the
    PLR node for each LSP protected by the bypass
    tunnel[¶](#section-2.2-3.16){.pilcrow}
:   

B-SFRR-Active:
:   Bypass Summary FRR Active Extended ASSOCIATION object. Used to
    notify the MP node that one or more groups of protected LSPs have
    been rerouted over the associated bypass
    tunnel[¶](#section-2.2-3.18){.pilcrow}
:   

MTU:
:   Maximum Transmission Unit[¶](#section-2.2-3.20){.pilcrow}
:   
:::
:::
:::
:::

::: {#extensions-for-summary-frr-signaling}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Extensions for Summary FRR Signaling](#name-extensions-for-summary-frr-){.section-name .selfRef} {#name-extensions-for-summary-frr-}

The RSVP ASSOCIATION object is defined in \[[RFC4872](#RFC4872){.xref}\]
as a means to associate LSPs with each other. For example, in the
context of one or more GMPLS-controlled LSPs, the ASSOCIATION object is
used to associate a recovery LSP with the LSP(s) it is protecting. The
Extended ASSOCIATION object is introduced in
\[[RFC6780](#RFC6780){.xref}\] to expand on the possible usage of the
ASSOCIATION object and generalize the definition of the Extended
Association ID field.[¶](#section-3-1){.pilcrow}

This document defines the use of the Extended ASSOCIATION object to
carry the Summary FRR information and associate the protected LSP or
LSPs with the bypass tunnel that protects them. Two new Association
Types for the Extended ASSOCIATION object, and new Extended Association
IDs, are defined in this document to describe the Bypass Summary FRR
Ready (B-SFRR-Ready) and Bypass Summary FRR Active (B‑SFRR-Active)
associations.[¶](#section-3-2){.pilcrow}

The PLR node creates and manages the Summary FRR LSP groups (identified
by Bypass_Group_Identifiers) and shares the group identifiers with the
MP via signaling.[¶](#section-3-3){.pilcrow}

A PLR node [SHOULD]{.bcp14} assign the same Bypass_Group_Identifier to
all protected LSPs provided that the protected
LSPs:[¶](#section-3-4){.pilcrow}

-   [share the same outgoing protected
    interface,[¶](#section-3-5.1){.pilcrow}]{#section-3-5.1}
-   [are protected by the same bypass tunnel,
    and[¶](#section-3-5.2){.pilcrow}]{#section-3-5.2}
-   [are assigned the same tunnel sender address that is used for backup
    path identification after FRR as described in
    \[[RFC4090](#RFC4090){.xref}\].[¶](#section-3-5.3){.pilcrow}]{#section-3-5.3}

This minimizes the number of bypass tunnel Summary FRR groups and
optimizes the amount of signaling that occurs between the PLR and the MP
nodes after FRR.[¶](#section-3-6){.pilcrow}

A PLR node that supports Summary FRR procedures adds an Extended
ASSOCIATION object with a B-SFRR-Ready Extended Association ID in the
RSVP Path message of the protected LSP. The PLR node adds the protected
LSP Bypass_Group_Identifier, information from the assigned bypass
tunnel, and a MESSAGE_ID object into the B-SFRR-Ready Extended
Association ID. The MP uses the information contained in the received
B-SFRR-Ready Extended Association ID to refresh and merge the protected
LSP Path state after FRR occurs.[¶](#section-3-7){.pilcrow}

An MP node that supports Summary FRR procedures adds the B-SFRR-Ready
Extended ASSOCIATION object and respective Extended Association ID in
the RSVP Resv message of the protected LSP to acknowledge the PLR\'s
bypass tunnel assignment and provide the MESSAGE_ID object that the MP
node will use to refresh the protected LSP Resv state after FRR
occurs.[¶](#section-3-8){.pilcrow}

The MP maintains the PLR node group assignments learned from signaling
and acknowledges the group assignments to the PLR node via signaling.
Once the PLR node receives the group assignment acknowledgment from the
MP, the FRR signaling can proceed based on Summary FRR procedures as
described in this document.[¶](#section-3-9){.pilcrow}

The B-SFRR-Active Extended ASSOCIATION object with Extended Association
ID is sent by the PLR node after activating the Summary FRR procedures.
The B-SFRR-Active Extended ASSOCIATION object with Extended Association
ID is sent within the RSVP Path message of the bypass tunnel to inform
the MP node that one or more groups of protected LSPs protected by the
bypass tunnel are now being rerouted over the bypass
tunnel.[¶](#section-3-10){.pilcrow}

::: {#sfrr-bypass-ready}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [B-SFRR-Ready Extended ASSOCIATION Object](#name-b-sfrr-ready-extended-assoc){.section-name .selfRef} {#name-b-sfrr-ready-extended-assoc}

The Extended ASSOCIATION object is populated using the rules defined
below to associate a protected LSP with the bypass tunnel that is
protecting it when Summary FRR procedures are
enabled.[¶](#section-3.1-1){.pilcrow}

The Association Type, Association ID, and Association Source
[MUST]{.bcp14} be set as defined in \[[RFC4872](#RFC4872){.xref}\] for
the ASSOCIATION object. More specifically:[¶](#section-3.1-2){.pilcrow}

[]{.break}

Association Source:
:   The Association Source is set to an address of the PLR
    node.[¶](#section-3.1-3.2){.pilcrow}
:   

Association Type:
:   A new Association Type is defined for B-SFRR-Ready as
    follows:[¶](#section-3.1-3.4){.pilcrow}
:   

[]{#name-the-b-sfrr-ready-associatio}

::: {#tab-1}
  Value   Type
  ------- -----------------------------------------------------
  5       Bypass Summary FRR Ready Association (B-SFRR-Ready)

  : [Table 1](#table-1){.selfRef}: [The B-SFRR-Ready Association
  Type](#name-the-b-sfrr-ready-associatio){.selfRef}
:::

The Extended ASSOCIATION object\'s Global Association Source
[MUST]{.bcp14} be set according to the rules defined in
\[[RFC6780](#RFC6780){.xref}\].[¶](#section-3.1-5){.pilcrow}

The B-SFRR-Ready Extended Association ID is populated by the PLR node
when performing Bypass Summary FRR Ready association for a protected
LSP. The rules governing its population are described in the subsequent
sections.[¶](#section-3.1-6){.pilcrow}

::: {#ipv4-b-sfrr-ready-extended-association-id}
::: {#section-3.1.1 .section}
#### [3.1.1.](#section-3.1.1){.section-number .selfRef} [IPv4 B-SFRR-Ready Extended Association ID](#name-ipv4-b-sfrr-ready-extended-){.section-name .selfRef} {#name-ipv4-b-sfrr-ready-extended-}

The IPv4 Extended Association ID for the B-SFRR-Ready Association Type
is carried inside the IPv4 Extended ASSOCIATION object and has the
following format:[¶](#section-3.1.1-1){.pilcrow}

[]{#name-the-ipv4-extended-associati}

::: {#fig_IPv4_Extended_Association_ID}
::: {#section-3.1.1-2.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Bypass_Tunnel_ID      |           Reserved            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                Bypass_Source_IPv4_Address                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                Bypass_Destination_IPv4_Address                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                Bypass_Group_Identifier                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                MESSAGE_ID                                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 1](#figure-1){.selfRef}: [The IPv4 Extended Association ID for
B-SFRR-Ready](#name-the-ipv4-extended-associati){.selfRef}
:::

[]{.break}

Bypass_Tunnel_ID:

:   16 bits[¶](#section-3.1.1-3.2.1){.pilcrow}

    The bypass tunnel identifier.[¶](#section-3.1.1-3.2.2){.pilcrow}

:   

Reserved:

:   16 bits[¶](#section-3.1.1-3.4.1){.pilcrow}

    Reserved for future use. [MUST]{.bcp14} be set to zero when sending
    and ignored on receipt.[¶](#section-3.1.1-3.4.2){.pilcrow}

:   

Bypass_Source_IPv4_Address:

:   32 bits[¶](#section-3.1.1-3.6.1){.pilcrow}

    The bypass tunnel source IPv4
    address.[¶](#section-3.1.1-3.6.2){.pilcrow}

:   

Bypass_Destination_IPv4_Address:

:   32 bits[¶](#section-3.1.1-3.8.1){.pilcrow}

    The bypass tunnel destination IPv4
    address.[¶](#section-3.1.1-3.8.2){.pilcrow}

:   

Bypass_Group_Identifier:

:   32 bits[¶](#section-3.1.1-3.10.1){.pilcrow}

    The bypass tunnel group identifier that is assigned to the
    LSP.[¶](#section-3.1.1-3.10.2){.pilcrow}

:   

MESSAGE_ID:
:   A MESSAGE_ID object as defined by
    \[[RFC2961](#RFC2961){.xref}\].[¶](#section-3.1.1-3.12){.pilcrow}
:   
:::
:::

::: {#ipv6-b-sfrr-ready-extended-association-id}
::: {#section-3.1.2 .section}
#### [3.1.2.](#section-3.1.2){.section-number .selfRef} [IPv6 B-SFRR-Ready Extended Association ID](#name-ipv6-b-sfrr-ready-extended-){.section-name .selfRef} {#name-ipv6-b-sfrr-ready-extended-}

The IPv6 Extended Association ID for the B-SFRR-Ready Association Type
is carried inside the IPv6 Extended ASSOCIATION object and has the
following format:[¶](#section-3.1.2-1){.pilcrow}

[]{#name-the-ipv6-extended-associati}

::: {#fig_IPv6_Extended_Association_ID}
::: {#section-3.1.2-2.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Bypass_Tunnel_ID      |           Reserved            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                Bypass_Source_IPv6_Address                     +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                Bypass_Destination_IPv6_Address                +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                Bypass_Group_Identifier                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                MESSAGE_ID                                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 2](#figure-2){.selfRef}: [The IPv6 Extended Association ID for
B-SFRR-Ready](#name-the-ipv6-extended-associati){.selfRef}
:::

[]{.break}

Bypass_Tunnel_ID:

:   16 bits[¶](#section-3.1.2-3.2.1){.pilcrow}

    The bypass tunnel identifier.[¶](#section-3.1.2-3.2.2){.pilcrow}

:   

Reserved:

:   16 bits[¶](#section-3.1.2-3.4.1){.pilcrow}

    Reserved for future use. [MUST]{.bcp14} be set to zero when sending
    and ignored on receipt.[¶](#section-3.1.2-3.4.2){.pilcrow}

:   

Bypass_Source_IPv6_Address:

:   128 bits[¶](#section-3.1.2-3.6.1){.pilcrow}

    The bypass tunnel source IPv6
    address.[¶](#section-3.1.2-3.6.2){.pilcrow}

:   

Bypass_Destination_IPv6_Address:

:   128 bits[¶](#section-3.1.2-3.8.1){.pilcrow}

    The bypass tunnel destination IPv6
    address.[¶](#section-3.1.2-3.8.2){.pilcrow}

:   

Bypass_Group_Identifier:

:   32 bits[¶](#section-3.1.2-3.10.1){.pilcrow}

    The bypass tunnel group identifier that is assigned to the
    LSP.[¶](#section-3.1.2-3.10.2){.pilcrow}

:   

MESSAGE_ID:
:   A MESSAGE_ID object as defined by
    \[[RFC2961](#RFC2961){.xref}\].[¶](#section-3.1.2-3.12){.pilcrow}
:   
:::
:::

::: {#processing-rules-for-b-sfrr-ready-extended-association-object}
::: {#section-3.1.3 .section}
#### [3.1.3.](#section-3.1.3){.section-number .selfRef} [Processing Rules for B-SFRR-Ready Extended ASSOCIATION Object](#name-processing-rules-for-b-sfrr){.section-name .selfRef} {#name-processing-rules-for-b-sfrr}

A PLR node assigns a bypass tunnel and Bypass_Group_Identifier for each
protected LSP. The same Bypass_Group_Identifier is used for the set of
protected LSPs that share the same bypass tunnel, traverse the same
egress link, and are not already rerouted. The PLR node [MUST]{.bcp14}
generate a MESSAGE_ID object with Epoch and Message_Identifier set
according to \[[RFC2961](#RFC2961){.xref}\]. The MESSAGE_ID object Flags
[MUST]{.bcp14} be cleared when transmitted by the PLR node and ignored
when received at the MP node.[¶](#section-3.1.3-1){.pilcrow}

A PLR node [MUST]{.bcp14} generate a new Message_Identifier each time
the contents of the B-SFRR-Ready Extended Association ID change (e.g.,
when the PLR node changes the bypass tunnel
assignment).[¶](#section-3.1.3-2){.pilcrow}

A PLR node notifies the MP node of the bypass tunnel assignment via
adding a B-SFRR-Ready Extended ASSOCIATION object and Extended
Association ID in the RSVP Path message for the protected LSP, using the
procedures described in [Section
3.3](#sig-prior-failure){.xref}.[¶](#section-3.1.3-3){.pilcrow}

An MP node acknowledges the assignment to the PLR node by signaling the
B-SFRR-Ready Extended ASSOCIATION object and Extended Association ID
within the RSVP Resv message of the protected LSP. With the exception of
the MESSAGE_ID object, all other fields from the received B-SFRR-Ready
Extended Association ID in the RSVP Path message are copied into the
B-SFRR-Ready Extended Association ID to be added in the Resv message.
The MESSAGE_ID object is set according to
\[[RFC2961](#RFC2961){.xref}\]. The MESSAGE_ID object Flags
[MUST]{.bcp14} be cleared when transmitted by the MP node and ignored
when received at the PLR node. A new Message_Identifier [MUST]{.bcp14}
be used to acknowledge an updated PLR node\'s
assignment.[¶](#section-3.1.3-4){.pilcrow}

A PLR node considers the protected LSP as Summary FRR capable only if
all the fields in the B-SFRR-Ready Extended Association ID that are sent
in the RSVP Path message match the fields received in the RSVP Resv
message (with the exception of the MESSAGE_ID). If the fields do not
match or if the B-SFRR-Ready Extended ASSOCIATION object is absent in a
subsequent refresh, the PLR node [MUST]{.bcp14} consider the protected
LSP as not Summary FRR capable.[¶](#section-3.1.3-5){.pilcrow}

A race condition may arise for a previously Summary FRR-capable
protected LSP when the MP node triggers a refresh that does not contain
the B-SFRR-Ready Extended ASSOCIATION object, while at the same time the
PLR triggers Summary FRR procedures due to a fault occurring
concurrently. In this case, it is possible that the PLR triggers Summary
FRR procedures on the protected LSP before it can receive and process
the refresh from the MP node. As a result, the MP will receive an
Srefresh with a Message_Identifier that is not associated with any
state. As per \[[RFC2961](#RFC2961){.xref}\], this results in the MP
generating an Srefresh NACK for this Message_Identifier and sending it
back to the PLR. The PLR processes the Srefresh NACK, replays the full
Path state associated with the Message_Identifier, and subsequently
recovers from this condition.[¶](#section-3.1.3-6){.pilcrow}
:::
:::
:::
:::

::: {#sfrr-bypass-active}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [B-SFRR-Active Extended ASSOCIATION Object](#name-b-sfrr-active-extended-asso){.section-name .selfRef} {#name-b-sfrr-active-extended-asso}

The Extended ASSOCIATION object for the B-SFRR-Active Association Type
is populated by a PLR node to indicate to the MP node (the bypass tunnel
destination) that one or more groups of Summary FRR‑capable protected
LSPs that are being protected by the bypass tunnel are being rerouted
over the bypass tunnel.[¶](#section-3.2-1){.pilcrow}

The B-SFRR-Active Extended ASSOCIATION object is carried in the RSVP
Path message of the bypass tunnel and signaled downstream towards the MP
(the bypass tunnel destination).[¶](#section-3.2-2){.pilcrow}

The Association Type, Association ID, and Association Source
[MUST]{.bcp14} be set as defined in \[[RFC4872](#RFC4872){.xref}\] for
the ASSOCIATION object. More specifically:[¶](#section-3.2-3){.pilcrow}

[]{.break}

Association Source:
:   The Association Source is set to an address of the PLR
    node.[¶](#section-3.2-4.2){.pilcrow}
:   

Association Type:
:   A new Association Type is defined for B-SFRR-Active as
    follows:[¶](#section-3.2-4.4){.pilcrow}
:   

[]{#name-the-b-sfrr-active-associati}

::: {#tab-2}
  Value   Type
  ------- -------------------------------------------------------
  6       Bypass Summary FRR Active Association (B-SFRR-Active)

  : [Table 2](#table-2){.selfRef}: [The B-SFRR-Active Association
  Type](#name-the-b-sfrr-active-associati){.selfRef}
:::

[]{.break}

Extended Association ID for B-SFRR-Active:
:   The B-SFRR-Active Extended Association ID is populated by the PLR
    node for the Bypass Summary FRR Active association. The rules to
    populate the Extended Association ID in this case are described
    below.[¶](#section-3.2-6.2){.pilcrow}
:   

::: {#V4_SFRR_ACTIVE}
::: {#section-3.2.1 .section}
#### [3.2.1.](#section-3.2.1){.section-number .selfRef} [IPv4 B-SFRR-Active Extended Association ID](#name-ipv4-b-sfrr-active-extended){.section-name .selfRef} {#name-ipv4-b-sfrr-active-extended}

The IPv4 Extended Association ID for the B-SFRR-Active Association Type
is carried inside the IPv4 Extended ASSOCIATION object and has the
following format:[¶](#section-3.2.1-1){.pilcrow}

[]{#name-the-ipv4-extended-associatio}

::: {#fig_IPv4_SFRR_ACTIVE}
::: {#section-3.2.1-2.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |            Num-BGIDs          |          Reserved             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Bypass_Group_Identifier                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                               :                               |
       //                              :                              //
       |                               :                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Bypass_Group_Identifier                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       //                      RSVP_HOP_Object                        //
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       //                      TIME_VALUES                            //
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       IPv4 tunnel sender address              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 3](#figure-3){.selfRef}: [The IPv4 Extended Association ID for
B-SFRR-Active](#name-the-ipv4-extended-associatio){.selfRef}
:::

[]{.break}

Num-BGIDs:

:   16 bits[¶](#section-3.2.1-3.2.1){.pilcrow}

    Number of Bypass_Group_Identifier
    fields.[¶](#section-3.2.1-3.2.2){.pilcrow}

:   

Reserved:

:   16 bits[¶](#section-3.2.1-3.4.1){.pilcrow}

    Reserved for future use.[¶](#section-3.2.1-3.4.2){.pilcrow}

:   

Bypass_Group_Identifier:

:   32 bits each[¶](#section-3.2.1-3.6.1){.pilcrow}

    A Bypass_Group_Identifier that was previously signaled by the PLR
    using the Extended ASSOCIATION object in the B-SFRR-Ready Extended
    Association ID. One or more Bypass_Group_Identifiers [MAY]{.bcp14}
    be included.[¶](#section-3.2.1-3.6.2){.pilcrow}

:   

RSVP_HOP_Object:

:   Class 3, as defined by
    \[[RFC2205](#RFC2205){.xref}\][¶](#section-3.2.1-3.8.1){.pilcrow}

    Replacement RSVP_HOP object to be applied to all LSPs associated
    with each of the following Bypass_Group_Identifiers. This
    corresponds to C-Type = 1 for IPv4
    RSVP_HOP.[¶](#section-3.2.1-3.8.2){.pilcrow}

:   

TIME_VALUES object:

:   Class 5, as defined by
    \[[RFC2205](#RFC2205){.xref}\][¶](#section-3.2.1-3.10.1){.pilcrow}

    Replacement TIME_VALUES object to be applied to all LSPs associated
    with each of the preceding Bypass_Group_Identifiers after receiving
    the B-SFRR-Active Extended ASSOCIATION
    object.[¶](#section-3.2.1-3.10.2){.pilcrow}

:   

[]{.break}

IPv4 tunnel sender address:
:   The IPv4 address that the PLR node sets to identify one or more
    backup paths as described in [Section
    6.1.1](https://www.rfc-editor.org/rfc/rfc4090#section-6.1.1){.relref}
    of \[[RFC4090](#RFC4090){.xref}\]. This address is applicable to all
    groups identified by any Bypass_Group_Identifiers carried in the
    B-SFRR-Active Extended Association
    ID.[¶](#section-3.2.1-4.2){.pilcrow}
:   
:::
:::

::: {#V6_SFRR_ACTIVE}
::: {#section-3.2.2 .section}
#### [3.2.2.](#section-3.2.2){.section-number .selfRef} [IPv6 B-SFRR-Active Extended Association ID](#name-ipv6-b-sfrr-active-extended){.section-name .selfRef} {#name-ipv6-b-sfrr-active-extended}

The IPv6 Extended Association ID for the B-SFRR-Active Association Type
is carried inside the IPv6 Extended ASSOCIATION object and has the
following format:[¶](#section-3.2.2-1){.pilcrow}

[]{#name-the-ipv6-extended-associatio}

::: {#fig_IPv6_SFRR_ACTIVE}
::: {#section-3.2.2-2.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |            Num-BGIDs          |          Reserved             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Bypass_Group_Identifier                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                               :                               |
       //                              :                              //
       |                               :                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Bypass_Group_Identifier                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       //                      RSVP_HOP_Object                        //
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       //                      TIME_VALUES                            //
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       +                                                               +
       |                                                               |
       +                       IPv6 tunnel sender address              +
       |                                                               |
       +                                                               +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 4](#figure-4){.selfRef}: [The IPv6 Extended Association ID for
B-SFRR-Active](#name-the-ipv6-extended-associatio){.selfRef}
:::

[]{.break}

Num-BGIDs:

:   16 bits[¶](#section-3.2.2-3.2.1){.pilcrow}

    Number of Bypass_Group_Identifier
    fields.[¶](#section-3.2.2-3.2.2){.pilcrow}

:   

Reserved:

:   16 bits[¶](#section-3.2.2-3.4.1){.pilcrow}

    Reserved for future use.[¶](#section-3.2.2-3.4.2){.pilcrow}

:   

Bypass_Group_Identifier:

:   32 bits each[¶](#section-3.2.2-3.6.1){.pilcrow}

    A Bypass_Group_Identifier that was previously signaled by the PLR
    using the Extended ASSOCIATION object in the B-SFRR-Ready Extended
    Association ID. One or more Bypass_Group_Identifiers [MAY]{.bcp14}
    be included.[¶](#section-3.2.2-3.6.2){.pilcrow}

:   

RSVP_HOP_Object:

:   Class 3, as defined by
    \[[RFC2205](#RFC2205){.xref}\][¶](#section-3.2.2-3.8.1){.pilcrow}

    Replacement RSVP_HOP object to be applied to all LSPs associated
    with each of the following Bypass_Group_Identifiers. This
    corresponds to C-Type = 2 for IPv6
    RSVP_HOP.[¶](#section-3.2.2-3.8.2){.pilcrow}

:   

TIME_VALUES object:

:   Class 5, as defined by
    \[[RFC2205](#RFC2205){.xref}\][¶](#section-3.2.2-3.10.1){.pilcrow}

    Replacement TIME_VALUES object to be applied to all LSPs associated
    with each of the following Bypass_Group_Identifiers after receiving
    the B-SFRR-Active Extended ASSOCIATION
    object.[¶](#section-3.2.2-3.10.2){.pilcrow}

:   

[]{.break}

IPv6 tunnel sender address:
:   The IPv6 address that the PLR node sets to identify one or more
    backup paths as described in [Section
    6.1.1](https://www.rfc-editor.org/rfc/rfc4090#section-6.1.1){.relref}
    of \[[RFC4090](#RFC4090){.xref}\]. This address is applicable to all
    groups identified by any Bypass_Group_Identifiers carried in the
    B-SFRR-Active Extended Association
    ID.[¶](#section-3.2.2-4.2){.pilcrow}
:   
:::
:::
:::
:::

::: {#sig-prior-failure}
::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Signaling Procedures prior to Failure](#name-signaling-procedures-prior-){.section-name .selfRef} {#name-signaling-procedures-prior-}

Before Summary FRR procedures can be used, a handshake [MUST]{.bcp14} be
completed between the PLR and MP nodes. This handshake is performed
using the Extended ASSOCIATION object that carries the B-SFRR-Ready
Extended Association ID in both the RSVP Path and Resv messages of the
protected LSP.[¶](#section-3.3-1){.pilcrow}

The facility backup method introduced in \[[RFC4090](#RFC4090){.xref}\]
takes advantage of MPLS label stacking (the PLR node imposes additional
MPLS labels post-FRR) to allow rerouting of protected traffic over the
backup path. The backup path may have stricter MTU requirements; due to
label stacking at the PLR node, the protected traffic may exceed the
backup path MTU. It is assumed that the operator engineers their network
to allow rerouting of protected traffic and the additional label
stacking at the PLR node in order to not exceed the backup path
MTU.[¶](#section-3.3-2){.pilcrow}

When using the procedures defined in this document, the PLR node
[MUST]{.bcp14} ensure that the bypass tunnel assignment can satisfy the
protected LSP MTU requirements post-FRR. This prevents any packets from
being dropped due to exceeding the MTU size of the backup path after
traffic is rerouted onto the bypass tunnel post-failure. [Section
2.6](https://www.rfc-editor.org/rfc/rfc3209#section-2.6){.relref} of
\[[RFC3209](#RFC3209){.xref}\] describes a mechanism to determine
whether a node needs to fragment or drop a packet when it exceeds the
path MTU discovered using RSVP signaling on the primary LSP path. A PLR
can leverage the RSVP-discovered path MTU on the backup and primary LSP
paths to ensure that the MTU is not exceeded before or after rerouting
the protected traffic onto the bypass
tunnel.[¶](#section-3.3-3){.pilcrow}

::: {#plr-signaling-procedure}
::: {#section-3.3.1 .section}
#### [3.3.1.](#section-3.3.1){.section-number .selfRef} [PLR Signaling Procedure](#name-plr-signaling-procedure){.section-name .selfRef} {#name-plr-signaling-procedure}

The B-SFRR-Ready Extended ASSOCIATION object is added by each PLR node
in the RSVP Path message of the protected LSP to record the bypass
tunnel assignment. This object is updated every time the PLR node
updates the bypass tunnel assignment. This results in triggering an RSVP
Path change message.[¶](#section-3.3.1-1){.pilcrow}

Upon receiving an RSVP Resv message with a B-SFRR-Ready Extended
ASSOCIATION object, the PLR node checks to see if the expected
subobjects from the B-SFRR-Ready Extended Association ID are present. If
present, the PLR node determines if the MP has acknowledged the current
PLR node\'s assignment.[¶](#section-3.3.1-2){.pilcrow}

To be a valid acknowledgment, the received B-SFRR-Ready Extended
Association ID contents within the RSVP Resv message of the protected
LSP [MUST]{.bcp14} match the latest B-SFRR-Ready Extended ASSOCIATION
object and Association ID contents that the PLR node had sent within the
RSVP Path message (with the exception of the
MESSAGE_ID).[¶](#section-3.3.1-3){.pilcrow}

Note that when forwarding an RSVP Resv message upstream, the PLR node
[SHOULD]{.bcp14} remove any/all B-SFRR-Ready Extended ASSOCIATION
objects whose Bypass_Source_IPv4_Address or Bypass_Source_IPv6_Address
field matches any of the PLR node
addresses.[¶](#section-3.3.1-4){.pilcrow}
:::
:::

::: {#mp-signaling-procedure}
::: {#section-3.3.2 .section}
#### [3.3.2.](#section-3.3.2){.section-number .selfRef} [MP Signaling Procedure](#name-mp-signaling-procedure){.section-name .selfRef} {#name-mp-signaling-procedure}

Upon receiving an RSVP Path message with a B-SFRR-Ready Extended
ASSOCIATION object, an MP node processes all (there may be multiple PLR
nodes for a single MP node) B-SFRR-Ready Extended ASSOCIATION objects
that have the MP node address as the bypass destination address in the
Extended Association ID.[¶](#section-3.3.2-1){.pilcrow}

The MP node first ensures the existence of the bypass tunnel and that
the Bypass_Group_Identifier is not already FRR Active. That is, an LSP
cannot join a group that is already FRR
rerouted.[¶](#section-3.3.2-2){.pilcrow}

The MP node builds a mirrored Summary FRR group database per PLR node by
associating the Bypass_Source_IPv4_Address or Bypass_Source_IPv6_Address
that is carried in the IPv4 or IPv6 B‑SFRR-Ready Extended Association
IDs, respectively.[¶](#section-3.3.2-3){.pilcrow}

The MESSAGE_ID is extracted and recorded for the protected LSP Path
state. The MP node signals a B-SFRR-Ready Extended ASSOCIATION object
and Extended Association ID in the RSVP Resv message of the protected
LSP. With the exception of the MESSAGE_ID objects, all other fields of
the received B-SFRR-Ready Extended ASSOCIATION object in the RSVP Path
message are copied into the B-SFRR-Ready Extended ASSOCIATION object to
be added in the Resv message. The MESSAGE_ID object is set according to
\[[RFC2961](#RFC2961){.xref}\] with the Flags
cleared.[¶](#section-3.3.2-4){.pilcrow}

Note that an MP may receive more than one RSVP Path message with the
B-SFRR-Ready Extended ASSOCIATION object from one or more different
upstream PLR nodes. In this case, the MP node is expected to save all
the received MESSAGE_IDs received from the different upstream PLR nodes.
After a failure, the MP node determines and activates the state(s)
associated with the Bypass_Group_Identifier(s) received in the RSVP Path
message containing the B-SFRR-Active Extended ASSOCIATION object that is
signaled over the bypass tunnel from the PLR node, as described in
[Section 3.4](#post-failure){.xref}.[¶](#section-3.3.2-5){.pilcrow}

When forwarding an RSVP Path message downstream, the MP node
[SHOULD]{.bcp14} remove any/all B-SFRR-Ready Extended ASSOCIATION
objects whose Bypass_Destination_IPv4_Address or
Bypass_Destination_IPv6_Address field matches any of the MP node
addresses.[¶](#section-3.3.2-6){.pilcrow}
:::
:::
:::
:::

::: {#post-failure}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [Signaling Procedures Post-Failure](#name-signaling-procedures-post-f){.section-name .selfRef} {#name-signaling-procedures-post-f}

Upon detection of a fault (egress link or node failure), the PLR node
will first perform the object modification procedures described by
[Section
6.4.3](https://www.rfc-editor.org/rfc/rfc4090#section-6.4.3){.relref} of
\[[RFC4090](#RFC4090){.xref}\] for all affected protected LSPs. For the
Summary FRR-capable LSPs that are assigned to the same bypass tunnel, a
common RSVP_HOP and SENDER_TEMPLATE [MUST]{.bcp14} be
used.[¶](#section-3.4-1){.pilcrow}

The PLR node [MUST]{.bcp14} signal non-Summary FRR-capable LSPs over the
bypass tunnel before signaling the Summary FRR-capable LSPs. This is
needed to allow for the case where the PLR node recently changed a
bypass assignment and the MP has not processed the change
yet.[¶](#section-3.4-2){.pilcrow}

The B-SFRR-Active Extended ASSOCIATION object is sent within the RSVP
Path message of the bypass tunnel to reroute the RSVP state of Summary
FRR-capable LSPs.[¶](#section-3.4-3){.pilcrow}

::: {#plr-sfrr}
::: {#section-3.4.1 .section}
#### [3.4.1.](#section-3.4.1){.section-number .selfRef} [PLR Signaling Procedure](#name-plr-signaling-procedure-2){.section-name .selfRef} {#name-plr-signaling-procedure-2}

After a failure event, when using the Summary FRR path signaling
procedures, an individual RSVP Path message is not signaled for each
Summary FRR LSP. Instead, to reroute Summary FRR LSPs via the bypass
tunnel, the PLR node adds the B-SFRR-Active Extended ASSOCIATION object
in the RSVP Path message of the RSVP session of the bypass
tunnel.[¶](#section-3.4.1-1){.pilcrow}

The RSVP_HOP_Object field in the B-SFRR-Active Extended Association ID
is set to a common object that will be applied to all LSPs associated
with the Bypass_Group_Identifiers that are carried in the B-SFRR-Active
Extended Association ID.[¶](#section-3.4.1-2){.pilcrow}

The PLR node adds the Bypass_Group_Identifier(s) of any group or groups
that have common group attributes, including the tunnel sender address,
to the same B-SFRR-Active Extended Association ID. Note that multiple
ASSOCIATION objects, each carrying a B-SFRR-Active Extended Association
ID, can be carried within a single RSVP Path message of the bypass
tunnel and sent towards the MP as described in
\[[RFC6780](#RFC6780){.xref}\].[¶](#section-3.4.1-3){.pilcrow}

Any previously received MESSAGE_IDs from the MP are activated on the
PLR. As a result, the PLR starts sending Srefresh messages containing
the specific Message_Identifier(s) for the states to be
refreshed.[¶](#section-3.4.1-4){.pilcrow}
:::
:::

::: {#mp-signaling-procedure-1}
::: {#section-3.4.2 .section}
#### [3.4.2.](#section-3.4.2){.section-number .selfRef} [MP Signaling Procedure](#name-mp-signaling-procedure-2){.section-name .selfRef} {#name-mp-signaling-procedure-2}

Upon receiving an RSVP Path message with a B-SFRR-Active Extended
ASSOCIATION object, the MP performs normal merge point processing for
each protected LSP associated with each Bypass_Group_Identifier, as if
it had received an individual RSVP Path message for that
LSP.[¶](#section-3.4.2-1){.pilcrow}

For each Summary FRR-capable LSP that is being merged, the MP first
modifies the Path state as follows:[¶](#section-3.4.2-2){.pilcrow}

1.  [The RSVP_HOP object is copied from the RSVP_HOP_Object field in the
    B-SFRR-Active Extended Association
    ID.[¶](#section-3.4.2-3.1){.pilcrow}]{#section-3.4.2-3.1}
2.  [The TIME_VALUES object is copied from the TIME_VALUES field in the
    B-SFRR-Active Extended Association ID. The TIME_VALUES object
    contains the refresh period of the PLR node, and it is used to
    generate periodic refreshes. The TIME_VALUES object carried in the
    B-SFRR-Active Extended Association ID matches the one that would
    have been exchanged in a full Path message sent to the MP after the
    failure when no Summary FRR procedures are
    used.[¶](#section-3.4.2-3.2){.pilcrow}]{#section-3.4.2-3.2}
3.  [The tunnel sender address field in the SENDER_TEMPLATE object is
    copied from the tunnel sender address field of the B-SFRR-Active
    Extended Association
    ID.[¶](#section-3.4.2-3.3){.pilcrow}]{#section-3.4.2-3.3}
4.  [The Explicit Route Object (ERO) is modified as per [Section
    6.4.4](https://www.rfc-editor.org/rfc/rfc4090#section-6.4.4){.relref}
    of \[[RFC4090](#RFC4090){.xref}\]. Once the above modifications are
    completed, the MP node performs merge processing as per
    \[[RFC4090](#RFC4090){.xref}\].[¶](#section-3.4.2-3.4){.pilcrow}]{#section-3.4.2-3.4}
5.  [Any previously received MESSAGE_IDs from the PLR node are
    activated. The MP is allowed to send Srefresh messages containing
    the specific Message_Identifier(s) for the states to be
    refreshed.[¶](#section-3.4.2-3.5){.pilcrow}]{#section-3.4.2-3.5}

A failure during merge processing of any individual rerouted LSP
[MUST]{.bcp14} result in an RSVP PathErr
message.[¶](#section-3.4.2-4){.pilcrow}

An individual RSVP Resv message for each successfully merged Summary FRR
LSP is not signaled. The MP node [SHOULD]{.bcp14} immediately use
summary refresh procedures to refresh the protected LSP Resv
state.[¶](#section-3.4.2-5){.pilcrow}
:::
:::
:::
:::

::: {#refreshing-summary-frr-active-lsps}
::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [Refreshing Summary FRR Active LSPs](#name-refreshing-summary-frr-acti){.section-name .selfRef} {#name-refreshing-summary-frr-acti}

The refreshing of Summary FRR Active LSPs is performed using summary
refresh as defined by
\[[RFC2961](#RFC2961){.xref}\].[¶](#section-3.5-1){.pilcrow}
:::
:::
:::
:::

::: {#backwards-compatibility}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Backwards Compatibility](#name-backwards-compatibility){.section-name .selfRef} {#name-backwards-compatibility}

The (Extended) ASSOCIATION object is defined in
\[[RFC4872](#RFC4872){.xref}\] with a class number in the form 11bbbbbb,
where b=0 or 1. This ensures compatibility with nodes that do not
provide support, in accordance with the procedures specified in [Section
3.10](https://www.rfc-editor.org/rfc/rfc2205#section-3.10){.relref} of
\[[RFC2205](#RFC2205){.xref}\] regarding unknown-class objects. Such
nodes will ignore the object and forward it without any
modification.[¶](#section-4-1){.pilcrow}
:::
:::

::: {#security-considerations}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

This document updates an existing RSVP object \-- the Extended
ASSOCIATION object as described in [Section
3](#extensions-for-summary-frr-signaling){.xref}. Thus, in the event of
the interception of a signaling message, slightly more information could
be deduced about the state of the network than was previously the
case.[¶](#section-5-1){.pilcrow}

When using the procedures defined in this document, FRR signaling for
rerouting of the states of one or more protected LSPs onto the bypass
tunnel can be performed on a group of protected LSPs with a single RSVP
message. This allows an intruder to potentially impact and manipulate a
set of protected LSPs that are assigned to the same bypass tunnel group.
Note that such an attack is possible even without the mechanisms defined
in this document, albeit at an extra cost resulting from the excessive
per-LSP signaling that will occur.[¶](#section-5-2){.pilcrow}

Existing mechanisms for maintaining the integrity and authenticity of
RSVP messages \[[RFC2747](#RFC2747){.xref}\] can be applied. Other
considerations mentioned in \[[RFC4090](#RFC4090){.xref}\] and
\[[RFC5920](#RFC5920){.xref}\] also apply.[¶](#section-5-3){.pilcrow}
:::
:::

::: {#iana-considerations}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA maintains the \"Generalized Multi-Protocol Label Switching (GMPLS)
Signaling Parameters\" registry. The \"Association Type\" subregistry is
included in this registry.[¶](#section-6-1){.pilcrow}

This registry has been updated with the new Association Types for the
Extended ASSOCIATION objects defined in this document as
follows:[¶](#section-6-2){.pilcrow}

[]{#name-new-extended-association-ob}

::: {#tab-3}
  Value   Name                        Reference
  ------- --------------------------- -------------------------------------------
  5       B-SFRR-Ready Association    [Section 3.1](#sfrr-bypass-ready){.xref}
  6       B-SFRR-Active Association   [Section 3.2](#sfrr-bypass-active){.xref}

  : [Table 3](#table-3){.selfRef}: [New Extended ASSOCIATION Object
  Association Types](#name-new-extended-association-ob){.selfRef}
:::
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2205\]
:   [Braden, R., Ed.]{.refAuthor}[, Zhang, L.]{.refAuthor}[,
    Berson, S.]{.refAuthor}[, Herzog, S.]{.refAuthor}[, and S.
    Jamin]{.refAuthor}, [\"Resource ReSerVation Protocol (RSVP) \--
    Version 1 Functional Specification\"]{.refTitle}, [RFC
    2205]{.seriesInfo}, [DOI 10.17487/RFC2205]{.seriesInfo}, September
    1997, \<<https://www.rfc-editor.org/info/rfc2205>\>.
:   

\[RFC2747\]
:   [Baker, F.]{.refAuthor}[, Lindell, B.]{.refAuthor}[, and M.
    Talwar]{.refAuthor}, [\"RSVP Cryptographic
    Authentication\"]{.refTitle}, [RFC 2747]{.seriesInfo}, [DOI
    10.17487/RFC2747]{.seriesInfo}, January 2000,
    \<<https://www.rfc-editor.org/info/rfc2747>\>.
:   

\[RFC2961\]
:   [Berger, L.]{.refAuthor}[, Gan, D.]{.refAuthor}[,
    Swallow, G.]{.refAuthor}[, Pan, P.]{.refAuthor}[,
    Tommasi, F.]{.refAuthor}[, and S. Molendini]{.refAuthor}, [\"RSVP
    Refresh Overhead Reduction Extensions\"]{.refTitle}, [RFC
    2961]{.seriesInfo}, [DOI 10.17487/RFC2961]{.seriesInfo}, April 2001,
    \<<https://www.rfc-editor.org/info/rfc2961>\>.
:   

\[RFC3209\]
:   [Awduche, D.]{.refAuthor}[, Berger, L.]{.refAuthor}[,
    Gan, D.]{.refAuthor}[, Li, T.]{.refAuthor}[,
    Srinivasan, V.]{.refAuthor}[, and G. Swallow]{.refAuthor},
    [\"RSVP-TE: Extensions to RSVP for LSP Tunnels\"]{.refTitle}, [RFC
    3209]{.seriesInfo}, [DOI 10.17487/RFC3209]{.seriesInfo}, December
    2001, \<<https://www.rfc-editor.org/info/rfc3209>\>.
:   

\[RFC4090\]
:   [Pan, P., Ed.]{.refAuthor}[, Swallow, G., Ed.]{.refAuthor}[, and A.
    Atlas, Ed.]{.refAuthor}, [\"Fast Reroute Extensions to RSVP-TE for
    LSP Tunnels\"]{.refTitle}, [RFC 4090]{.seriesInfo}, [DOI
    10.17487/RFC4090]{.seriesInfo}, May 2005,
    \<<https://www.rfc-editor.org/info/rfc4090>\>.
:   

\[RFC4872\]
:   [Lang, J.P., Ed.]{.refAuthor}[, Rekhter, Y., Ed.]{.refAuthor}[,
    and D. Papadimitriou, Ed.]{.refAuthor}, [\"RSVP-TE Extensions in
    Support of End-to-End Generalized Multi-Protocol Label Switching
    (GMPLS) Recovery\"]{.refTitle}, [RFC 4872]{.seriesInfo}, [DOI
    10.17487/RFC4872]{.seriesInfo}, May 2007,
    \<<https://www.rfc-editor.org/info/rfc4872>\>.
:   

\[RFC6780\]
:   [Berger, L.]{.refAuthor}[, Le Faucheur, F.]{.refAuthor}[, and A.
    Narayanan]{.refAuthor}, [\"RSVP ASSOCIATION Object
    Extensions\"]{.refTitle}, [RFC 6780]{.seriesInfo}, [DOI
    10.17487/RFC6780]{.seriesInfo}, October 2012,
    \<<https://www.rfc-editor.org/info/rfc6780>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[RFC5920\]
:   [Fang, L., Ed.]{.refAuthor}, [\"Security Framework for MPLS and
    GMPLS Networks\"]{.refTitle}, [RFC 5920]{.seriesInfo}, [DOI
    10.17487/RFC5920]{.seriesInfo}, July 2010,
    \<<https://www.rfc-editor.org/info/rfc5920>\>.
:   
:::
:::

::: {#acknowledgments}
::: {#section-appendix.a .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

The authors would like to thank [Alexander Okonnikov]{.contact-name},
[Loa Andersson]{.contact-name}, [Lou Berger]{.contact-name}, [Eric
Osborne]{.contact-name}, [Gregory Mirsky]{.contact-name}, and [Mach
Chen]{.contact-name} for reviewing and providing valuable comments on
this document.[¶](#section-appendix.a-1){.pilcrow}
:::
:::

::: {#contributors}
::: {#section-appendix.b .section}
## [Contributors](#name-contributors){.section-name .selfRef} {#name-contributors}

::: {.left dir="auto"}
[Nicholas Tan]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Arista Networks]{.org}
:::

::: email
Email: <ntan@arista.com>
:::
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Mike Taillon]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: email
Email: <mtaillon@cisco.com>
:::

::: {.left dir="auto"}
[Tarek Saad ([editor]{.role})]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <tsaad@juniper.net>
:::

::: {.left dir="auto"}
[Rakesh Gandhi]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: email
Email: <rgandhi@cisco.com>
:::

::: {.left dir="auto"}
[Abhishek Deshmukh]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <adeshmukh@juniper.net>
:::

::: {.left dir="auto"}
[Markus Jork]{.fn .nameRole}
:::

::: {.left dir="auto"}
[128 Technology]{.org}
:::

::: email
Email: <mjork@128technology.com>
:::

::: {.left dir="auto"}
[Vishnu Pavan Beeram]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Juniper Networks]{.org}
:::

::: email
Email: <vbeeram@juniper.net>
:::
:::
:::
