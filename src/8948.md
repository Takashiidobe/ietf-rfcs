  RFC 8948             DHCPv6 SLAP Quadrant Selection   December 2020
  -------------------- -------------------------------- ---------------
  Bernardos & Mourad   Standards Track                  \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [8948](https://www.rfc-editor.org/rfc/rfc8948){.eref}

Category:
:   Standards Track

Published:
:   December 2020

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    CJ. Bernardos
    :::

    ::: org
    UC3M
    :::
    :::

    ::: author
    ::: author-name
    A. Mourad
    :::

    ::: org
    InterDigital
    :::
    :::
:::

# RFC 8948 {#rfcnum}

# Structured Local Address Plan (SLAP) Quadrant Selection Option for DHCPv6 {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

The IEEE originally structured the 48-bit Media Access Control (MAC)
address space in such a way that half of it was reserved for local use.
In 2017, the IEEE published a new standard (IEEE Std 802c) with a new
optional Structured Local Address Plan (SLAP). It specifies different
assignment approaches in four specified regions of the local MAC address
space.[¶](#section-abstract-1){.pilcrow}

The IEEE is developing protocols to assign addresses (IEEE P802.1CQ).
There is also work in the IETF on specifying a new mechanism that
extends DHCPv6 operation to handle the local MAC address
assignments.[¶](#section-abstract-2){.pilcrow}

This document proposes extensions to DHCPv6 protocols to enable a DHCPv6
client or a DHCPv6 relay to indicate a preferred SLAP quadrant to the
server so that the server may allocate MAC addresses in the quadrant
requested by the relay or client. A new DHCPv6 option (QUAD) is defined
for this purpose.[¶](#section-abstract-3){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc8948>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2020 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Simplified BSD License text as described in Section 4.e of the Trust
Legal Provisions and are provided without warranty as described in the
Simplified BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}[¶](#section-toc.1-1.1.1){.pilcrow}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Problem
        Statement](#name-problem-statement){.xref}[¶](#section-toc.1-1.1.2.1.1){.pilcrow}

        -   ::: {#section-toc.1-1.1.2.1.2.1}
            [1.1.1](#section-1.1.1){.xref}.  [Wi-Fi (IEEE 802.11)
            Devices](#name-wi-fi-ieee-80211-devices){.xref}[¶](#section-toc.1-1.1.2.1.2.1.1){.pilcrow}
            :::

        -   ::: {#section-toc.1-1.1.2.1.2.2}
            [1.1.2](#section-1.1.2){.xref}.  [Hypervisor: Functions That
            Are and Are Not
            Migratable](#name-hypervisor-functions-that-a){.xref}[¶](#section-toc.1-1.1.2.1.2.2.1){.pilcrow}
            :::
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Terminology](#name-terminology){.xref}[¶](#section-toc.1-1.2.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [DHCPv6
    Extensions](#name-dhcpv6-extensions){.xref}[¶](#section-toc.1-1.3.1){.pilcrow}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Address Assignment from the
        Preferred SLAP Quadrant Indicated by the
        Client](#name-address-assignment-from-the){.xref}[¶](#section-toc.1-1.3.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Address Assignment from the
        Preferred SLAP Quadrant Indicated by the
        Relay](#name-address-assignment-from-the-){.xref}[¶](#section-toc.1-1.3.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [DHCPv6 Option
    Definition](#name-dhcpv6-option-definition){.xref}[¶](#section-toc.1-1.4.1){.pilcrow}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [QUAD
        Option](#name-quad-option){.xref}[¶](#section-toc.1-1.4.2.1.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}[¶](#section-toc.1-1.5.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}[¶](#section-toc.1-1.6.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [References](#name-references){.xref}[¶](#section-toc.1-1.7.1){.pilcrow}

    -   ::: {#section-toc.1-1.7.2.1}
        [7.1](#section-7.1){.xref}.  [Normative
        References](#name-normative-references){.xref}[¶](#section-toc.1-1.7.2.1.1){.pilcrow}
        :::

    -   ::: {#section-toc.1-1.7.2.2}
        [7.2](#section-7.2){.xref}.  [Informative
        References](#name-informative-references){.xref}[¶](#section-toc.1-1.7.2.2.1){.pilcrow}
        :::
    :::

-   ::: {#section-toc.1-1.8}
    [Appendix A](#section-appendix.a){.xref}.  [Example Uses of Quadrant
    Selection
    Mechanisms](#name-example-uses-of-quadrant-se){.xref}[¶](#section-toc.1-1.8.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.9}
    [](#section-appendix.b){.xref}[Acknowledgments](#name-acknowledgments){.xref}[¶](#section-toc.1-1.9.1){.pilcrow}
    :::

-   ::: {#section-toc.1-1.10}
    [](#section-appendix.c){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}[¶](#section-toc.1-1.10.1){.pilcrow}
    :::
:::
:::

::: {#sec_introduction}
::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The IEEE structures the 48-bit MAC address space in such a way that half
of it is reserved for local use (where the Universal/Local (U/L) bit is
set to 1). In 2017, the IEEE published a new standard
\[[IEEEStd802c](#IEEEStd802c){.xref}\] that defines a new optional
Structured Local Address Plan (SLAP) that specifies different assignment
approaches in four specified regions of the local MAC address space.
These four regions, called SLAP quadrants, are briefly described below
(see [Figure 1](#fig_ieee_48bit_mac){.xref} and [Table
1](#fig_slap_quadrants){.xref} for details):[¶](#section-1-1){.pilcrow}

-   [In SLAP Quadrant 01, Extended Local Identifier (ELI) MAC addresses
    are assigned based on a 24-bit Company ID (CID), which is assigned
    by the IEEE Registration Authority (RA). The remaining bits are
    specified as an extension by the CID assignee or by a protocol
    designated by the CID
    assignee.[¶](#section-1-2.1){.pilcrow}]{#section-1-2.1}
-   [In SLAP Quadrant 11, Standard Assigned Identifier (SAI) MAC
    addresses are assigned based on a protocol specified in an IEEE 802
    standard. For 48-bit MAC addresses, 44 bits are available. Multiple
    protocols for assigning SAIs may be specified in IEEE standards.
    Coexistence of multiple protocols may be supported by limiting the
    subspace available for assignment by each
    protocol.[¶](#section-1-2.2){.pilcrow}]{#section-1-2.2}
-   [In SLAP Quadrant 00, Administratively Assigned Identifier (AAI) MAC
    addresses are assigned locally by an administrator. Multicast IPv6
    packets use a destination address starting in 33-33, so AAI
    addresses in that range should not be assigned. For 48-bit MAC
    addresses, 44 bits are
    available.[¶](#section-1-2.3){.pilcrow}]{#section-1-2.3}
-   [SLAP Quadrant 10 is \"Reserved for future use\" where MAC addresses
    may be assigned using new methods yet to be defined or until then by
    an administrator as in the AAI quadrant. For 48-bit MAC addresses,
    44 bits would be
    available.[¶](#section-1-2.4){.pilcrow}]{#section-1-2.4}

[]{#name-ieee-48-bit-mac-address-str}

::: {#fig_ieee_48bit_mac}
::: {#section-1-3.1 .artwork .art-text .alignLeft}
           LSB                MSB
           M  X  Y  Z  -  -  -  -
           |  |  |  |
           |  |  |  +------------ SLAP Z-bit
           |  |  +--------------- SLAP Y-bit
           |  +------------------ X-bit (U/L) = 1 for locally assigned
           +--------------------- M-bit (I/G) (unicast/group)

           Legend:
           LSB: Least Significant Bit
           MSB: Most Significant Bit
:::

[Figure 1](#figure-1){.selfRef}: [IEEE 48-Bit MAC Address Structure (in
IEEE Representation)](#name-ieee-48-bit-mac-address-str){.selfRef}
:::

[]{#name-slap-quadrants}

::: {#fig_slap_quadrants}
  Quadrant   Y-bit   Z-bit   Local Identifier Type       Local Identifier
  ---------- ------- ------- --------------------------- ------------------
  01         0       1       Extended Local              ELI
  11         1       1       Standard Assigned           SAI
  00         0       0       Administratively Assigned   AAI
  10         1       0       Reserved                    Reserved

  : [Table 1](#table-1){.selfRef}: [SLAP
  Quadrants](#name-slap-quadrants){.selfRef}
:::

::: {#sec_ps}
::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Problem Statement](#name-problem-statement){.section-name .selfRef} {#name-problem-statement}

The IEEE is developing mechanisms to assign addresses
\[[IEEE-P802.1CQ-Project](#IEEE-P802.1CQ-Project){.xref}\]. And
\[[RFC8947](#RFC8947){.xref}\] specifies a new mechanism that extends
DHCPv6 operation to handle the local MAC address assignments. This
document proposes extensions to DHCPv6 protocols to enable a DHCPv6
client or a DHCPv6 relay to indicate a preferred SLAP quadrant to the
server so that the server may allocate the MAC addresses in the quadrant
requested by the relay or client.[¶](#section-1.1-1){.pilcrow}

In the following, we describe two application scenarios in which a need
arises to assign local MAC addresses according to preferred SLAP
quadrants.[¶](#section-1.1-2){.pilcrow}

::: {#sec_wifi_devices}
::: {#section-1.1.1 .section}
#### [1.1.1.](#section-1.1.1){.section-number .selfRef} [Wi-Fi (IEEE 802.11) Devices](#name-wi-fi-ieee-80211-devices){.section-name .selfRef} {#name-wi-fi-ieee-80211-devices}

Today, most Wi-Fi devices come with interfaces that have a \"burned-in\"
MAC address, allocated from the universal address space using a 24-bit
Organizationally Unique Identifier (OUI) (assigned to IEEE 802 interface
vendors). However, recently, the need to assign local (instead of
universal) MAC addresses has emerged particularly in the following two
scenarios:[¶](#section-1.1.1-1){.pilcrow}

-   [IoT (Internet of Things): In general, composed of constrained
    devices \[[RFC7228](#RFC7228){.xref}\] with constraints such as
    available power and energy, memory, and processing resources.
    Examples of this include sensors and actuators for health or home
    automation applications. Given the increasingly high number of these
    devices, manufacturers might prefer to equip devices with temporary
    MAC addresses used only at first boot. These temporary MAC addresses
    would just be used to send initial DHCP packets to available DHCP
    servers. IoT devices typically need a single MAC address for each
    available network interface. Once the server assigns a MAC address,
    the device would abandon its temporary MAC address. Home automation
    IoT devices typically do not move (however, note that there is an
    increase of mobile smart health monitoring devices). For this type
    of device, in general, any type of SLAP quadrant would be good for
    assigning addresses, but ELI/SAI quadrants might be more suitable in
    some scenarios. For example, the device might need to use an address
    from the CID assigned to the IoT communication device vendor, thus
    preferring the ELI
    quadrant.[¶](#section-1.1.1-2.1){.pilcrow}]{#section-1.1.1-2.1}
-   [Privacy: Today, MAC addresses allow the exposure of user locations
    making it relatively easy to track user movements. One of the
    mechanisms considered to mitigate this problem is the use of local
    random MAC addresses: changing them every time the user connects to
    a different network. In this scenario, devices are typically mobile.
    Here, AAI is probably the best SLAP quadrant from which to assign
    addresses; it is the best fit for randomization of addresses, and it
    is not required for the addresses to survive when changing
    networks.[¶](#section-1.1.1-2.2){.pilcrow}]{#section-1.1.1-2.2}
:::
:::

::: {#sec_hypervisors}
::: {#section-1.1.2 .section}
#### [1.1.2.](#section-1.1.2){.section-number .selfRef} [Hypervisor: Functions That Are and Are Not Migratable](#name-hypervisor-functions-that-a){.section-name .selfRef} {#name-hypervisor-functions-that-a}

In large-scale virtualization environments, thousands of virtual
machines (VMs) are active. These VMs are typically managed by a
hypervisor, which is in charge of spawning and stopping VMs as needed.
The hypervisor is also typically in charge of assigning new MAC
addresses to the VMs. If a DHCP solution is in place for that, the
hypervisor acts as a DHCP client and requests that available DHCP
servers assign one or more MAC addresses (an address block). The
hypervisor does not use those addresses for itself, but rather it uses
them to create new VMs with appropriate MAC addresses. If we assume very
large data-center environments, such as the ones that are typically used
nowadays, it is expected that the data center is divided in different
network regions, each one managing its own local address space. In this
scenario, there are two possible situations that need to be
tackled:[¶](#section-1.1.2-1){.pilcrow}

-   [Migratable functions: If a VM (providing a given function) needs to
    be migrated to another region of the data center (e.g., for
    maintenance, resilience, end-user mobility, etc.), the VM\'s
    networking context needs to migrate with the VM. This includes the
    VM\'s MAC address(es). Since the assignments from the ELI/SAI SLAP
    quadrants are governed by rules per IEEE Std 802c, they are more
    appropriate for use to ensure MAC address uniqueness globally in the
    data center.[¶](#section-1.1.2-2.1){.pilcrow}]{#section-1.1.2-2.1}
-   [Functions that are not migratable: If a VM will not be migrated to
    another region of the data center, there are no requirements
    associated with its MAC address. In this case, it is simpler to
    allocate it from the AAI SLAP quadrant, which does not need to be
    unique across multiple data centers (i.e., each region can manage
    its own MAC address assignment without checking for duplicates
    globally).[¶](#section-1.1.2-2.2){.pilcrow}]{#section-1.1.2-2.2}
:::
:::
:::
:::
:::
:::

::: {#sec_terminology}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Terminology](#name-terminology){.section-name .selfRef} {#name-terminology}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-2-1){.pilcrow}

Where relevant, the DHCPv6 terminology from
\[[RFC8415](#RFC8415){.xref}\] also applies here. Additionally, the
following definitions are updated for this
document.[¶](#section-2-2){.pilcrow}

[]{.break}

address
:   Unless specified otherwise, a link-layer (or MAC) address, as
    specified in \[[IEEEStd802](#IEEEStd802){.xref}\]. The address is 6
    or 8 bytes long.[¶](#section-2-3.2){.pilcrow}
:   

address block
:   A number of consecutive link-layer addresses. An address block is
    expressed as a first address plus a number that designates the
    number of additional (extra) addresses. A single address can be
    represented by the address itself and zero extra
    addresses.[¶](#section-2-3.4){.pilcrow}
:   

client
:   A node that is interested in obtaining link-layer addresses. It
    implements the basic DHCP mechanisms needed by a DHCP client, as
    described in \[[RFC8415](#RFC8415){.xref}\], and supports the
    options (IA_LL and LLADDR) specified in
    \[[RFC8947](#RFC8947){.xref}\] as well as the new option (QUAD)
    specified in this document. The client may or may not support IPv6
    address assignment and prefix delegation, as specified in
    \[[RFC8415](#RFC8415){.xref}\].[¶](#section-2-3.6){.pilcrow}
:   

IA_LL
:   Identity Association for Link-Layer Address, an identity association
    (IA) used to request or assign link-layer addresses. [Section
    11.1](https://www.rfc-editor.org/rfc/rfc8947#section-11.1){.relref}
    of \[[RFC8947](#RFC8947){.xref}\] provides details on the IA_LL
    option.[¶](#section-2-3.8){.pilcrow}
:   

LLADDR
:   Link-layer address option that is used to request or assign a block
    of link-layer addresses. [Section
    11.2](https://www.rfc-editor.org/rfc/rfc8947#section-11.2){.relref}
    of \[[RFC8947](#RFC8947){.xref}\] provides details on the LLADDR
    option.[¶](#section-2-3.10){.pilcrow}
:   

relay
:   A node that acts as an intermediary to deliver DHCP messages between
    clients and servers. A relay, based on local knowledge and policies,
    may include the preferred SLAP quadrant in a QUAD option sent to the
    server. The relay implements basic DHCPv6 relay agent functionality,
    as described in
    \[[RFC8415](#RFC8415){.xref}\].[¶](#section-2-3.12){.pilcrow}
:   

server
:   A node that manages link-layer address allocation and is able to
    respond to client queries. It implements basic DHCP server
    functionality, as described in \[[RFC8415](#RFC8415){.xref}\], and
    supports the options (IA_LL and LLADDR) specified in
    \[[RFC8947](#RFC8947){.xref}\] as well as the new option (QUAD)
    specified in this document. The server may or may not support IPv6
    address assignment and prefix delegation, as specified in
    \[[RFC8415](#RFC8415){.xref}\].[¶](#section-2-3.14){.pilcrow}
:   
:::
:::

::: {#sec_dhcpv6_extensions}
::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [DHCPv6 Extensions](#name-dhcpv6-extensions){.section-name .selfRef} {#name-dhcpv6-extensions}

::: {#sec_dhcpv6_ext_client}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Address Assignment from the Preferred SLAP Quadrant Indicated by the Client](#name-address-assignment-from-the){.section-name .selfRef} {#name-address-assignment-from-the}

Next, we describe the protocol operations for a client to select a
preferred SLAP quadrant using the DHCPv6 signaling procedures described
in \[[RFC8947](#RFC8947){.xref}\]. The signaling flow is shown in
[Figure 2](#fig_dhcpv6_flow_client){.xref}.[¶](#section-3.1-1){.pilcrow}

[]{#name-dhcpv6-signaling-flow-clien}

::: {#fig_dhcpv6_flow_client}
::: {#section-3.1-2.1 .artwork .art-text .alignLeft}
     +--------+                            +--------+
     | DHCPv6 |                            | DHCPv6 |
     | client |                            | server |
     +--------+                            +--------+
         |                                      |
         +----1. Solicit(IA_LL(LLADDR,QUAD))--->|
         |                                      |
         |<--2. Advertise(IA_LL(LLADDR,QUAD))---+
         |                                      |
         +---3. Request(IA_LL(LLADDR,QUAD))---->|
         |                                      |
         |<------4. Reply(IA_LL(LLADDR))--------+
         |                                      |
         .                                      .
         .          (timer expiring)            .
         .                                      .
         |                                      |
         +---5. Renew(IA_LL(LLADDR,QUAD))------>|
         |                                      |
         |<-----6. Reply(IA_LL(LLADDR))---------+
         |                                      |
:::

[Figure 2](#figure-2){.selfRef}: [DHCPv6 Signaling Flow
(Client-Server)](#name-dhcpv6-signaling-flow-clien){.selfRef}
:::

1.  [Link-layer addresses (i.e., MAC addresses) are assigned in blocks.
    The smallest block is a single address. To request an assignment,
    the client sends a Solicit message with an IA_LL option in the
    message. The IA_LL option [MUST]{.bcp14} contain an LLADDR option.
    In order to indicate the preferred SLAP quadrant(s), the IA_LL
    option includes the new OPTION_SLAP_QUAD option in the IA_LL-option
    field (alongside the LLADDR
    option).[¶](#section-3.1-3.1){.pilcrow}]{#section-3.1-3.1}
2.  [The server, upon receiving an IA_LL option in a Solicit message,
    inspects its contents. For each of the entries in the
    OPTION_SLAP_QUAD, in order of the preference field (highest to
    lowest), the server checks if it has a configured MAC address pool
    matching the requested quadrant identifier and an available range of
    addresses of the requested size. If suitable addresses are found,
    the server sends back an Advertise message with an IA_LL option
    containing an LLADDR option that specifies the addresses being
    offered. If the server manages a block of addresses belonging to a
    requested quadrant, the addresses being offered [MUST]{.bcp14}
    belong to a requested quadrant. If the server does not have a
    configured address pool matching the client\'s request, it
    [SHOULD]{.bcp14} return the IA_LL option with the addresses being
    offered belonging to a quadrant managed by the server (following a
    local policy to select from which of the available quadrants). If
    the server has a configured address pool of the correct quadrant but
    no available addresses, it [MUST]{.bcp14} return the IA_LL option
    containing a Status Code option with status set to
    NoAddrsAvail.[¶](#section-3.1-3.2){.pilcrow}]{#section-3.1-3.2}
3.  [The client waits for available servers to send Advertise responses
    and picks one server, as defined in [Section
    18.2.9](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.9){.relref}
    of \[[RFC8415](#RFC8415){.xref}\]. The client [SHOULD NOT]{.bcp14}
    pick a server that does not advertise an address in the requested
    quadrant(s). The client then sends a Request message that includes
    the IA_LL container option with the LLADDR option copied from the
    Advertise message sent by the chosen server. It includes the
    preferred SLAP quadrant(s) in a new QUAD IA_LL
    option.[¶](#section-3.1-3.3){.pilcrow}]{#section-3.1-3.3}
4.  [Upon reception of a Request message with an IA_LL container option,
    the server assigns requested addresses. The server [MAY]{.bcp14}
    alter the allocation at this time (e.g., by reducing the address
    block). It then generates and sends a Reply message back to the
    client. Upon receiving a Reply message, the client parses the IA_LL
    container option and may start using all provided addresses. Note
    that a client that has included a Rapid Commit option in the Solicit
    message may receive a Reply message in response to the Solicit
    message and skip the Advertise and Request message steps above
    (following standard DHCPv6
    procedures).[¶](#section-3.1-3.4){.pilcrow}]{#section-3.1-3.4}
5.  [The client is expected to periodically renew the link-layer
    addresses, as governed by T1 and T2 timers. This mechanism can be
    administratively disabled by the server sending \"infinity\" as the
    T1 and T2 values (see [Section
    7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
    \[[RFC8415](#RFC8415){.xref}\]). The client sends a Renew option
    after T1. It includes the preferred SLAP quadrant(s) in the new QUAD
    IA_LL option, so in case the server is unable to extend the lifetime
    on the existing address(es), the preferred quadrants are known for
    the allocation of any \"new\" (i.e., different)
    addresses.[¶](#section-3.1-3.5){.pilcrow}]{#section-3.1-3.5}
6.  [The server responds with a Reply message with an IA_LL option that
    includes an LLADDR option with extended
    lifetime.[¶](#section-3.1-3.6){.pilcrow}]{#section-3.1-3.6}

The client [SHOULD]{.bcp14} check if the received MAC address comes from
one of the requested quadrants. It [MAY]{.bcp14} repeat the process
selecting a different DHCP server.[¶](#section-3.1-4){.pilcrow}
:::
:::

::: {#sec_dhcpv6_ext_relay}
::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Address Assignment from the Preferred SLAP Quadrant Indicated by the Relay](#name-address-assignment-from-the-){.section-name .selfRef} {#name-address-assignment-from-the-}

Next, we describe the protocol operations for a relay to select a
preferred SLAP quadrant using the DHCPv6 signaling procedures described
in \[[RFC8947](#RFC8947){.xref}\]. This is useful when a DHCPv6 server
is operating over a large infrastructure split in different network
regions, where each region might have different requirements. The
signaling flow is shown in [Figure
3](#fig_dhcpv6_flow_relay){.xref}.[¶](#section-3.2-1){.pilcrow}

[]{#name-dhcpv6-signaling-flow-client}

::: {#fig_dhcpv6_flow_relay}
::: {#section-3.2-2.1 .artwork .art-text .alignLeft}
    +--------+                  +--------+                     +--------+
    | DHCPv6 |                  | DHCPv6 |                     | DHCPv6 |
    | client |                  | relay  |                     | server |
    +--------+                  +--------+                     +--------+
       |                            |                                |
       +-----1. Solicit(IA_LL)----->|                                |
       |                            +----2. Relay-forward            |
       |                            |    (Solicit(IA_LL),QUAD)------>|
       |                            |                                |
       |                            |<---3. Relay-reply              |
       |                            |    (Advertise(IA_LL(LLADDR)))--+
       |<4. Advertise(IA_LL(LLADDR))+                                |
       |-5. Request(IA_LL(LLADDR))->|                                |
       |                            +-6. Relay-forward               |
       |                            | (Request(IA_LL(LLADDR)),QUAD)->|
       |                            |                                |
       |                            |<--7. Relay-reply               |
       |                            |   (Reply(IA_LL(LLADDR)))-------+
       |<--8. Reply(IA_LL(LLADDR))--+                                |
       |                            |                                |
       .                            .                                .
       .                    (timer expiring)                         .
       .                            .                                .
       |                            |                                |
       +--9. Renew(IA_LL(LLADDR))-->|                                |
       |                            |--10. Relay-forward             |
       |                            |  (Renew(IA_LL(LLADDR)),QUAD)-->|
       |                            |                                |
       |                            |<---11. Relay-reply             |
       |                            |     (Reply(IA_LL(LLADDR)))-----+
       |<--12. Reply(IA_LL(LLADDR))-+                                |
       |                            |                                |
:::

[Figure 3](#figure-3){.selfRef}: [DHCPv6 Signaling Flow
(Client-Relay-Server)](#name-dhcpv6-signaling-flow-client){.selfRef}
:::

1.  [Link-layer addresses (i.e., MAC addresses) are assigned in blocks.
    The smallest block is a single address. To request an assignment,
    the client sends a Solicit message with an IA_LL option in the
    message. The IA_LL option [MUST]{.bcp14} contain an LLADDR
    option.[¶](#section-3.2-3.1){.pilcrow}]{#section-3.2-3.1}
2.  [The DHCP relay receives the Solicit message and encapsulates it in
    a Relay-forward message. The relay, based on local knowledge and
    policies, includes in the Relay-forward message the QUAD option with
    the preferred quadrant. The relay might know which quadrant to
    request based on local configuration (e.g., the served network
    contains IoT devices only, thus requiring ELI/SAI) or other means.
    Note that if a client sends multiple instances of the IA_LL option
    in the same message, the DHCP relay [MAY]{.bcp14} only add a single
    instance of the QUAD
    option.[¶](#section-3.2-3.2){.pilcrow}]{#section-3.2-3.2}
3.  [Upon receiving a relayed message containing an IA_LL option, the
    server inspects the contents for instances of OPTION_SLAP_QUAD in
    both the Relay-forward message and the client\'s message payload.
    Depending on the server\'s policy, the instance of the option to
    process is selected (see the end of this section). For each of the
    entries in OPTION_SLAP_QUAD, in order of the preference field
    (highest to lowest), the server checks if it has a configured MAC
    address pool matching the requested quadrant identifier and an
    available range of addresses of the requested size. If suitable
    addresses are found, the server sends back an Advertise message with
    an IA_LL option containing an LLADDR option that specifies the
    addresses being offered. This message is sent to the Relay in a
    Relay-reply message. If the server supports the semantics of the
    preferred quadrant included in the QUAD option and manages a block
    of addresses belonging to a requested quadrant, then the addresses
    being offered [MUST]{.bcp14} belong to a requested quadrant. The
    server [SHOULD]{.bcp14} apply the contents of the relay\'s supplied
    QUAD option for all of the client\'s IA_LLs, unless configured to do
    otherwise.[¶](#section-3.2-3.3){.pilcrow}]{#section-3.2-3.3}
4.  [The relay sends the received Advertise message to the
    client.[¶](#section-3.2-3.4){.pilcrow}]{#section-3.2-3.4}
5.  [The client waits for available servers to send Advertise responses
    and picks one server, as defined in [Section
    18.2.9](https://www.rfc-editor.org/rfc/rfc8415#section-18.2.9){.relref}
    of \[[RFC8415](#RFC8415){.xref}\]. The client then sends a Request
    message that includes the IA_LL container option with the LLADDR
    option copied from the Advertise message sent by the chosen
    server.[¶](#section-3.2-3.5){.pilcrow}]{#section-3.2-3.5}
6.  [The relay forwards the received Request in a Relay-forward message.
    It adds, in the Relay-forward, a QUAD IA_LL option with the
    preferred
    quadrant.[¶](#section-3.2-3.6){.pilcrow}]{#section-3.2-3.6}
7.  [Upon reception of the forwarded Request message with IA_LL
    container option, the server assigns requested addresses. The server
    [MAY]{.bcp14} alter the allocation at this time. It then generates
    and sends a Reply message in a Relay-reply message back to the
    relay.[¶](#section-3.2-3.7){.pilcrow}]{#section-3.2-3.7}
8.  [Upon receiving a Reply message, the client parses the IA_LL
    container option and may start using all provided
    addresses.[¶](#section-3.2-3.8){.pilcrow}]{#section-3.2-3.8}
9.  [The client is expected to periodically renew the link-layer
    addresses, as governed by T1 and T2 timers. This mechanism can be
    administratively disabled by the server sending \"infinity\" as the
    T1 and T2 values (see [Section
    7.7](https://www.rfc-editor.org/rfc/rfc8415#section-7.7){.relref} of
    \[[RFC8415](#RFC8415){.xref}\]). The client sends a Renew option
    after T1.[¶](#section-3.2-3.9){.pilcrow}]{#section-3.2-3.9}
10. [This message is forwarded by the relay in a Relay-forward message,
    including a QUAD IA_LL option with the preferred
    quadrant.[¶](#section-3.2-3.10){.pilcrow}]{#section-3.2-3.10}
11. [The server responds with a Reply message, including an LLADDR
    option with extended lifetime. This message is sent in a Relay-reply
    message.[¶](#section-3.2-3.11){.pilcrow}]{#section-3.2-3.11}
12. [The relay sends the Reply message back to the
    client.[¶](#section-3.2-3.12){.pilcrow}]{#section-3.2-3.12}

The server [SHOULD]{.bcp14} implement a configuration parameter to deal
with the case where the client\'s DHCP message contains an instance of
OPTION_SLAP_QUAD and the relay adds a second instance in its
Relay-forward message. This parameter configures the server to process
either the client\'s or the relay\'s instance of option QUAD. It is
[RECOMMENDED]{.bcp14} that the default for such a parameter is to
process the client\'s instance of the
option.[¶](#section-3.2-4){.pilcrow}

The client [MAY]{.bcp14} check if the received MAC address belongs to a
quadrant it is willing to use/configure and [MAY]{.bcp14} decide based
on that whether to use/configure the received
address.[¶](#section-3.2-5){.pilcrow}
:::
:::
:::
:::

::: {#sec_dhcpv6_options}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [DHCPv6 Option Definition](#name-dhcpv6-option-definition){.section-name .selfRef} {#name-dhcpv6-option-definition}

::: {#sec_quad_IA_LL}
::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [QUAD Option](#name-quad-option){.section-name .selfRef} {#name-quad-option}

The QUAD option is used to specify the preferences for the selected
quadrants within an IA_LL. The option [MUST]{.bcp14} be encapsulated
either in the IA_LL-options field of an IA_LL option or in a
Relay-forward message.[¶](#section-4.1-1){.pilcrow}

The format of the QUAD option is:[¶](#section-4.1-2){.pilcrow}

[]{#name-quad-option-format}

::: {#quad-option}
::: {#section-4.1-3.1 .artwork .art-text .alignLeft}
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |       OPTION_SLAP_QUAD        |          option-len           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   quadrant-1  |    pref-1     |   quadrant-2  |    pref-2     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |  quadrant-n-1 |   pref-n-1    |   quadrant-n  |    pref-n     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:::

[Figure 4](#figure-4){.selfRef}: [QUAD Option
Format](#name-quad-option-format){.selfRef}
:::

[]{.break}

option-code
:   OPTION_SLAP_QUAD (140).[¶](#section-4.1-4.2){.pilcrow}
:   

option-len
:   2 \* number of included (quadrant, preference). This is a 2-byte
    field containing the total length of all (quadrant, preference)
    pairs included in the option.[¶](#section-4.1-4.4){.pilcrow}
:   

quadrant-n
:   Identifier of the quadrant (0: AAI, 1: ELI, 2: Reserved by IEEE
    \[[IEEEStd802c](#IEEEStd802c){.xref}\], and 3: SAI). Each quadrant
    [MUST]{.bcp14} only appear once at most in the option. This is a
    1-byte field.[¶](#section-4.1-4.6){.pilcrow}
:   

pref-n
:   Preference associated to quadrant-n. A higher value means a more
    preferred quadrant. This is a 1-byte
    field.[¶](#section-4.1-4.8){.pilcrow}
:   

A quadrant identifier value [MUST]{.bcp14} only appear, at most, once in
the option. If an option includes more than one occurrence of the same
quadrant identifier, only the first occurrence is processed, and the
rest [MUST]{.bcp14} be ignored by the
server.[¶](#section-4.1-5){.pilcrow}

If the same preference value is used for more than one quadrant, the
server [MAY]{.bcp14} select which quadrant should be preferred (if the
server can assign addresses from all or some of the quadrants with the
same assigned preference). Note that this is not a simple list of
quadrants ordered by preference with no preference value, but a list of
quadrants with explicit preference values. This way it can support the
case whereby a client really has no preference between two or three
quadrants, leaving the decision to the
server.[¶](#section-4.1-6){.pilcrow}

If the client or relay agent provides the OPTION_SLAP_QUAD, the server
[MUST]{.bcp14} use the quadrant-n/pref-n values to order the selection
of the quadrants. If the server can provide an assignment from one of
the specified quadrants, it [SHOULD]{.bcp14} proceed with the
assignment. If the server does not have a configured address pool
matching any of the specified quadrant-n fields or if the server has a
configured address pool of the correct quadrant but no available
addresses, it [MUST]{.bcp14} return the IA_LL option containing a status
of NoAddrsAvail.[¶](#section-4.1-7){.pilcrow}

There is no requirement that the client or relay agent order the
quadrant/pref values in any specific order; hence, servers [MUST
NOT]{.bcp14} assume that quadrant-1/pref-1 have the highest preference
(except if there is only one set of
values).[¶](#section-4.1-8){.pilcrow}

For cases where a server may not be configured to have pools for the
client or relay quadrant preferences, clients and relays
[SHOULD]{.bcp14} specify all quadrants in the QUAD option to assure the
client gets an address (or addresses) \-- if any are available.
Specifying all quadrants also results in a QUAD option supporting server
responding like a non-QUAD option supporting server, i.e., an address
(or addresses) from any available quadrants can be
returned.[¶](#section-4.1-9){.pilcrow}
:::
:::
:::
:::

::: {#IANA}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

IANA has assigned the QUAD (140) option code from the \"Option Codes\"
subregistry of the \"Dynamic Host Configuration Protocol for IPv6
(DHCPv6)\" registry maintained at
\<[http://www.iana.org/assignments/dhcpv6-parameters](https://www.iana.org/assignments/dhcpv6-parameters)\>:[¶](#section-5-1){.pilcrow}

[]{.break}

Value:
:   140[¶](#section-5-2.2){.pilcrow}
:   

Description:
:   OPTION_SLAP_QUAD[¶](#section-5-2.4){.pilcrow}
:   

Client ORO:
:   No[¶](#section-5-2.6){.pilcrow}
:   

Singleton Option:
:   Yes[¶](#section-5-2.8){.pilcrow}
:   

Reference:
:   RFC 8948[¶](#section-5-2.10){.pilcrow}
:   
:::
:::

::: {#Security}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

See \[[RFC8415](#RFC8415){.xref}\] and \[[RFC7227](#RFC7227){.xref}\]
for the DHCPv6 security and privacy considerations. See
\[[RFC8200](#RFC8200){.xref}\] for the IPv6 security
considerations.[¶](#section-6-1){.pilcrow}

Also, see \[[RFC8947](#RFC8947){.xref}\] for security considerations
regarding link-layer address assignments using
DHCP.[¶](#section-6-2){.pilcrow}
:::
:::

::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-7.1 .section}
### [7.1.](#section-7.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8415\]
:   [Mrugalski, T.]{.refAuthor}[, Siodelski, M.]{.refAuthor}[,
    Volz, B.]{.refAuthor}[, Yourtchenko, A.]{.refAuthor}[,
    Richardson, M.]{.refAuthor}[, Jiang, S.]{.refAuthor}[,
    Lemon, T.]{.refAuthor}[, and T. Winters]{.refAuthor}, [\"Dynamic
    Host Configuration Protocol for IPv6 (DHCPv6)\"]{.refTitle}, [RFC
    8415]{.seriesInfo}, [DOI 10.17487/RFC8415]{.seriesInfo}, November
    2018, \<<https://www.rfc-editor.org/info/rfc8415>\>.
:   

\[RFC8947\]
:   [Volz, B.]{.refAuthor}[, Mrugalski, T.]{.refAuthor}[, and CJ.
    Bernardos]{.refAuthor}, [\"Link-Layer Address Assignment Mechanism
    for DHCPv6\"]{.refTitle}, [RFC 8947]{.seriesInfo}, [DOI
    10.17487/RFC8947]{.seriesInfo}, December 2020,
    \<<https://www.rfc-editor.org/info/rfc8947>\>.
:   
:::

::: {#section-7.2 .section}
### [7.2.](#section-7.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[IEEE-P802.1CQ-Project\]
:   [IEEE]{.refAuthor}, [\"P802.1CQ - Standard for Local and
    Metropolitan Area Networks: Multicast and Local Address
    Assignment\"]{.refTitle},
    \<<https://standards.ieee.org/project/802_1CQ.html>\>.
:   

\[IEEEStd802\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Local and Metropolitan Area
    Networks: Overview and Architecture\"]{.refTitle}, [IEEE Std
    802-2014]{.seriesInfo}, [DOI
    10.1109/IEEESTD.2014.6847097]{.seriesInfo}, June 2014,
    \<<https://doi.org/10.1109/IEEESTD.2014.6847097>\>.
:   

\[IEEEStd802c\]
:   [IEEE]{.refAuthor}, [\"IEEE Standard for Local and Metropolitan Area
    Networks: Overview and Architecture \-- Amendment 2: Local Medium
    Access Control (MAC) Address Usage\"]{.refTitle}, [IEEE Std
    802c-2017]{.seriesInfo}, [DOI
    10.1109/IEEESTD.2017.8016709]{.seriesInfo}, August 2017,
    \<<https://doi.org/10.1109/IEEESTD.2017.8016709>\>.
:   

\[RFC7227\]
:   [Hankins, D.]{.refAuthor}[, Mrugalski, T.]{.refAuthor}[,
    Siodelski, M.]{.refAuthor}[, Jiang, S.]{.refAuthor}[, and S.
    Krishnan]{.refAuthor}, [\"Guidelines for Creating New DHCPv6
    Options\"]{.refTitle}, [BCP 187]{.seriesInfo}, [RFC
    7227]{.seriesInfo}, [DOI 10.17487/RFC7227]{.seriesInfo}, May 2014,
    \<<https://www.rfc-editor.org/info/rfc7227>\>.
:   

\[RFC7228\]
:   [Bormann, C.]{.refAuthor}[, Ersue, M.]{.refAuthor}[, and A.
    Keranen]{.refAuthor}, [\"Terminology for Constrained-Node
    Networks\"]{.refTitle}, [RFC 7228]{.seriesInfo}, [DOI
    10.17487/RFC7228]{.seriesInfo}, May 2014,
    \<<https://www.rfc-editor.org/info/rfc7228>\>.
:   

\[RFC7548\]
:   [Ersue, M., Ed.]{.refAuthor}[, Romascanu, D.]{.refAuthor}[,
    Schoenwaelder, J.]{.refAuthor}[, and A. Sehgal]{.refAuthor},
    [\"Management of Networks with Constrained Devices: Use
    Cases\"]{.refTitle}, [RFC 7548]{.seriesInfo}, [DOI
    10.17487/RFC7548]{.seriesInfo}, May 2015,
    \<<https://www.rfc-editor.org/info/rfc7548>\>.
:   

\[RFC8200\]
:   [Deering, S.]{.refAuthor}[ and R. Hinden]{.refAuthor}, [\"Internet
    Protocol, Version 6 (IPv6) Specification\"]{.refTitle}, [STD
    86]{.seriesInfo}, [RFC 8200]{.seriesInfo}, [DOI
    10.17487/RFC8200]{.seriesInfo}, July 2017,
    \<<https://www.rfc-editor.org/info/rfc8200>\>.
:   
:::
:::

::: {#sec_quadrant_selection}
::: {#section-appendix.a .section}
## [Appendix A.](#section-appendix.a){.section-number .selfRef} [Example Uses of Quadrant Selection Mechanisms](#name-example-uses-of-quadrant-se){.section-name .selfRef} {#name-example-uses-of-quadrant-se}

This appendix describes some examples of how the quadrant preference
mechanisms could be used.[¶](#section-appendix.a-1){.pilcrow}

First, let\'s take an IoT scenario as an example. An IoT device might
decide on its own the SLAP quadrant it wants to use to obtain a local
MAC address, using the following information to make the
decision:[¶](#section-appendix.a-2){.pilcrow}

-   [Type of IoT deployment: For example, industrial, domestic, rural,
    etc. For small deployments, such as domestic ones, the IoT device
    itself can decide to use the AAI quadrant (this might not even
    involve the use of DHCP, by the device just configuring a random
    address computed by the device itself). For large deployments, such
    as industrial or rural ones, where thousands of devices might
    coexist, the IoT can decide to use the ELI or SAI
    quadrants.[¶](#section-appendix.a-3.1){.pilcrow}]{#section-appendix.a-3.1}
-   [Mobility: If the IoT device can move, then it might prefer to
    select the SAI or AAI quadrants to minimize address collisions when
    moving to another network. If the device is known to remain fixed,
    then the ELI is probably the most suitable one to
    use.[¶](#section-appendix.a-3.2){.pilcrow}]{#section-appendix.a-3.2}
-   [Managed/Unmanaged: Depending on whether the IoT device is managed
    during its lifetime or cannot be reconfigured
    \[[RFC7548](#RFC7548){.xref}\], the decision of what quadrant is
    more appropriate might be different. For example, if the IoT device
    can be managed (e.g., configured) and network topology changes might
    occur during its lifetime (e.g., due to changes on the deployment,
    such as extensions involving additional devices), this has an impact
    on the preferred quadrant (e.g., to avoid potential collisions in
    the
    future).[¶](#section-appendix.a-3.3){.pilcrow}]{#section-appendix.a-3.3}
-   [Operation / Battery Lifetime: Depending on the expected lifetime of
    the device, a different quadrant might be preferred (as before, to
    minimize potential address collisions in the
    future).[¶](#section-appendix.a-3.4){.pilcrow}]{#section-appendix.a-3.4}

The previous parameters are considerations that the device
vendor/administrator may wish to use when defining the IoT device\'s
MAC address request policy (i.e., how to select a given SLAP quadrant).
IoT devices are typically very resource constrained, so there may only
be a simple decision-making process based on preconfigured
preferences.[¶](#section-appendix.a-4){.pilcrow}

We now take the Wi-Fi device scenario, considering, for example, that a
laptop or smartphone connects to a network using its built-in MAC
address. Due to privacy/security concerns, the device might want to
configure a local MAC address. The device might use different parameters
and context information to decide, not only which SLAP quadrant to use
for the local MAC address configuration, but also when to perform a
change of address (e.g., it might be needed to change address several
times). This information includes, but it is not limited
to:[¶](#section-appendix.a-5){.pilcrow}

-   [Type of network the device is connected: public, work,
    home.[¶](#section-appendix.a-6.1){.pilcrow}]{#section-appendix.a-6.1}
-   [Trusted network:
    Yes/No.[¶](#section-appendix.a-6.2){.pilcrow}]{#section-appendix.a-6.2}
-   [First time visited network:
    Yes/No.[¶](#section-appendix.a-6.3){.pilcrow}]{#section-appendix.a-6.3}
-   [Network geographical
    location.[¶](#section-appendix.a-6.4){.pilcrow}]{#section-appendix.a-6.4}
-   [Mobility: Yes (the device might change its network attachment
    point) / No (the device is not going to change its network
    attachment
    point).[¶](#section-appendix.a-6.5){.pilcrow}]{#section-appendix.a-6.5}
-   [Operating System (OS) network profile, including
    security/trust-related parameters: Most modern OSs keep metadata
    associated with the networks they can attach to as, for example, the
    level of trust the user or administrator assigns to the network.
    This information is used to configure how the device behaves in
    terms of advertising itself on the network, firewall settings, etc.
    But this information can also be used to decide whether or not to
    configure a local MAC address, from which SLAP quadrant it should be
    assigned, and how often it may be
    assigned.[¶](#section-appendix.a-6.6){.pilcrow}]{#section-appendix.a-6.6}
-   [Triggers coming from applications regarding location privacy: An
    app might request that the OS maximize location privacy (due to the
    nature of the application), and this might require the OS to force
    the use of a local MAC address or the local MAC address to be
    changed.[¶](#section-appendix.a-6.7){.pilcrow}]{#section-appendix.a-6.7}

This information can be used by the device to select the SLAP quadrant.
For example, if the device is moving around (e.g., while connected to a
public network in an airport), it is likely that it might change access
points several times; therefore, it is best to minimize the chances of
address collision, using the SAI or AAI quadrants. If the device is not
expected to move and is attached to a trusted network (e.g., in some
scenarios at work), then it is probably best to select the ELI quadrant.
These are just some examples of how to use this information to select
the quadrant.[¶](#section-appendix.a-7){.pilcrow}

Additionally, the information can also be used to trigger subsequent
changes of MAC address to enhance location privacy. Besides, changing
the SLAP quadrant might also be used as an additional enhancement to
make it harder to track the user
location.[¶](#section-appendix.a-8){.pilcrow}

Last, if we consider the data-center scenario, a hypervisor might
request local MAC addresses be assigned to virtual machines. As in the
previous scenarios, the hypervisor might select the preferred SLAP
quadrant using information provided by the cloud management system or
virtualization infrastructure manager running on top of the hypervisor.
This information might include, but is not limited
to:[¶](#section-appendix.a-9){.pilcrow}

-   [Migratable VM: If the function implemented by the VM is subject to
    be moved to another physical server or not, this has an impact on
    the preference for the SLAP quadrant, as the ELI and SAI quadrants
    are better suited for supporting migration in a large data
    center.[¶](#section-appendix.a-10.1){.pilcrow}]{#section-appendix.a-10.1}
-   [VM connectivity characteristics: For example, standalone, part of a
    pool, and part of a service graph/chain. If the connectivity
    characteristics of the VM are known, this can be used by the
    hypervisor to select the best SLAP
    quadrant.[¶](#section-appendix.a-10.2){.pilcrow}]{#section-appendix.a-10.2}
:::
:::

::: {#Acknowledgments}
::: {#section-appendix.b .section}
## [Acknowledgments](#name-acknowledgments){.section-name .selfRef} {#name-acknowledgments}

The authors would like to thank [Bernie Volz]{.contact-name} for his
very valuable comments on this document. We also want to thank [Ian
Farrer]{.contact-name}, [Tomek Mrugalski]{.contact-name}, [Éric
Vyncke]{.contact-name}, [Tatuya Jinmei]{.contact-name}, [Carl
Wallace]{.contact-name}, [Ines Robles]{.contact-name}, [Ted
Lemon]{.contact-name}, [Jaime Jimenez]{.contact-name}, [Robert
Wilton]{.contact-name}, [Benjamin Kaduk]{.contact-name}, [Barry
Leiba]{.contact-name}, [Alvaro Retana]{.contact-name}, and [Murray
Kucherawy]{.contact-name} for their very detailed and helpful reviews.
And thanks to [Roger Marks]{.contact-name} and [Antonio de la
Oliva]{.contact-name} for comments related to IEEE work and
references.[¶](#section-appendix.b-1){.pilcrow}

The work in this document has been supported by the H2020 5GROWTH (Grant
856709) and 5G-DIVE projects (Grant
859881).[¶](#section-appendix.b-2){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#section-appendix.c .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[Carlos J. Bernardos]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universidad Carlos III de Madrid]{.org}
:::

::: {.left dir="auto"}
[Av. Universidad, 30]{.street-address}
:::

::: {.left dir="auto"}
[28911]{.postal-code} [Leganes, Madrid]{.locality}
:::

::: {.left dir="auto"}
[Spain]{.country-name}
:::

::: tel
Phone: [+34 91624 6236](tel:+34%2091624%206236){.tel}
:::

::: email
Email: <cjbc@it.uc3m.es>
:::

::: url
URI: <http://www.it.uc3m.es/cjbc/>
:::

::: {.left dir="auto"}
[Alain Mourad]{.fn .nameRole}
:::

::: {.left dir="auto"}
[InterDigital Europe]{.org}
:::

::: email
Email: <Alain.Mourad@InterDigital.com>
:::

::: url
URI: <http://www.InterDigital.com/>
:::
:::
:::
