  RFC 9198                  AURA Metrics & Methods   May 2022
  ------------------------- ------------------------ ----------
  Alvarez-Hamelin, et al.   Standards Track          \[Page\]

::: {#external-metadata .document-information}
:::

::: {#internal-metadata .document-information}

Stream:
:   Internet Engineering Task Force (IETF)

RFC:
:   [9198](https://www.rfc-editor.org/rfc/rfc9198){.eref}

Updates:
:   [2330](https://www.rfc-editor.org/rfc/rfc2330){.eref}

Category:
:   Standards Track

Published:
:   May 2022

ISSN:
:   2070-1721

Authors:

:   ::: author
    ::: author-name
    J. Alvarez-Hamelin
    :::

    ::: org
    Universidad de Buenos Aires
    :::
    :::

    ::: author
    ::: author-name
    A. Morton
    :::

    ::: org
    AT&T Labs
    :::
    :::

    ::: author
    ::: author-name
    J. Fabini
    :::

    ::: org
    TU Wien
    :::
    :::

    ::: author
    ::: author-name
    C. Pignataro
    :::

    ::: org
    Cisco Systems, Inc.
    :::
    :::

    ::: author
    ::: author-name
    R. Geib
    :::

    ::: org
    Deutsche Telekom
    :::
    :::
:::

# RFC 9198 {#rfcnum}

# Advanced Unidirectional Route Assessment (AURA) {#title}

::: {#section-abstract .section}
## [Abstract](#abstract){.selfRef}

This memo introduces an advanced unidirectional route assessment (AURA)
metric and associated measurement methodology based on the IP
Performance Metrics (IPPM) framework (RFC 2330). This memo updates RFC
2330 in the areas of path-related terminology and path description,
primarily to include the possibility of parallel subpaths between a
given Source and Destination pair, owing to the presence of multipath
technologies.[¶](#section-abstract-1){.pilcrow}
:::

::: {#status-of-memo}
::: {#section-boilerplate.1 .section}
## [Status of This Memo](#name-status-of-this-memo){.section-name .selfRef} {#name-status-of-this-memo}

This is an Internet Standards Track
document.[¶](#section-boilerplate.1-1){.pilcrow}

This document is a product of the Internet Engineering Task Force
(IETF). It represents the consensus of the IETF community. It has
received public review and has been approved for publication by the
Internet Engineering Steering Group (IESG). Further information on
Internet Standards is available in Section 2 of RFC
7841.[¶](#section-boilerplate.1-2){.pilcrow}

Information about the current status of this document, any errata, and
how to provide feedback on it may be obtained at
<https://www.rfc-editor.org/info/rfc9198>.[¶](#section-boilerplate.1-3){.pilcrow}
:::
:::

::: {#copyright}
::: {#section-boilerplate.2 .section}
## [Copyright Notice](#name-copyright-notice){.section-name .selfRef} {#name-copyright-notice}

Copyright (c) 2022 IETF Trust and the persons identified as the document
authors. All rights reserved.[¶](#section-boilerplate.2-1){.pilcrow}

This document is subject to BCP 78 and the IETF Trust\'s Legal
Provisions Relating to IETF Documents
(<https://trustee.ietf.org/license-info>) in effect on the date of
publication of this document. Please review these documents carefully,
as they describe your rights and restrictions with respect to this
document. Code Components extracted from this document must include
Revised BSD License text as described in Section 4.e of the Trust Legal
Provisions and are provided without warranty as described in the Revised
BSD License.[¶](#section-boilerplate.2-2){.pilcrow}
:::
:::

::: {#toc}
::: {#section-toc.1 .section}
[▲](#){.toplink}

## [Table of Contents](#name-table-of-contents){.section-name .selfRef} {#name-table-of-contents}

-   ::: {#section-toc.1-1.1}
    [1](#section-1){.xref}.  [Introduction](#name-introduction){.xref}

    -   ::: {#section-toc.1-1.1.2.1}
        [1.1](#section-1.1){.xref}.  [Issues with Earlier Work to Define
        a Route Metric](#name-issues-with-earlier-work-to){.xref}
        :::

    -   ::: {#section-toc.1-1.1.2.2}
        [1.2](#section-1.2){.xref}.  [Requirements
        Language](#name-requirements-language){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.2}
    [2](#section-2){.xref}.  [Scope](#name-scope){.xref}
    :::

-   ::: {#section-toc.1-1.3}
    [3](#section-3){.xref}.  [Route Metric
    Specifications](#name-route-metric-specifications){.xref}

    -   ::: {#section-toc.1-1.3.2.1}
        [3.1](#section-3.1){.xref}.  [Terms and
        Definitions](#name-terms-and-definitions){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.2}
        [3.2](#section-3.2){.xref}.  [Formal
        Name](#name-formal-name){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.3}
        [3.3](#section-3.3){.xref}.  [Parameters](#name-parameters){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.4}
        [3.4](#section-3.4){.xref}.  [Metric
        Definitions](#name-metric-definitions){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.5}
        [3.5](#section-3.5){.xref}.  [Related Round-Trip Delay and Loss
        Definitions](#name-related-round-trip-delay-an){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.6}
        [3.6](#section-3.6){.xref}.  [Discussion](#name-discussion){.xref}
        :::

    -   ::: {#section-toc.1-1.3.2.7}
        [3.7](#section-3.7){.xref}.  [Reporting the
        Metric](#name-reporting-the-metric){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.4}
    [4](#section-4){.xref}.  [Route Assessment
    Methodologies](#name-route-assessment-methodolog){.xref}

    -   ::: {#section-toc.1-1.4.2.1}
        [4.1](#section-4.1){.xref}.  [Active
        Methodologies](#name-active-methodologies){.xref}

        -   ::: {#section-toc.1-1.4.2.1.2.1}
            [4.1.1](#section-4.1.1){.xref}.  [Temporal Composition for
            Route Metrics](#name-temporal-composition-for-ro){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.2}
            [4.1.2](#section-4.1.2){.xref}.  [Routing Class
            Identification](#name-routing-class-identificatio){.xref}
            :::

        -   ::: {#section-toc.1-1.4.2.1.2.3}
            [4.1.3](#section-4.1.3){.xref}.  [Intermediate Observation
            Point Route
            Measurement](#name-intermediate-observation-po){.xref}
            :::
        :::

    -   ::: {#section-toc.1-1.4.2.2}
        [4.2](#section-4.2){.xref}.  [Hybrid
        Methodologies](#name-hybrid-methodologies){.xref}
        :::

    -   ::: {#section-toc.1-1.4.2.3}
        [4.3](#section-4.3){.xref}.  [Combining Different
        Methods](#name-combining-different-methods){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.5}
    [5](#section-5){.xref}.  [Background on Round-Trip Delay Measurement
    Goals](#name-background-on-round-trip-de){.xref}
    :::

-   ::: {#section-toc.1-1.6}
    [6](#section-6){.xref}.  [RTD Measurements
    Statistics](#name-rtd-measurements-statistics){.xref}
    :::

-   ::: {#section-toc.1-1.7}
    [7](#section-7){.xref}.  [Security
    Considerations](#name-security-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.8}
    [8](#section-8){.xref}.  [IANA
    Considerations](#name-iana-considerations){.xref}
    :::

-   ::: {#section-toc.1-1.9}
    [9](#section-9){.xref}.  [References](#name-references){.xref}

    -   ::: {#section-toc.1-1.9.2.1}
        [9.1](#section-9.1){.xref}.  [Normative
        References](#name-normative-references){.xref}
        :::

    -   ::: {#section-toc.1-1.9.2.2}
        [9.2](#section-9.2){.xref}.  [Informative
        References](#name-informative-references){.xref}
        :::
    :::

-   ::: {#section-toc.1-1.10}
    [Appendix A](#appendix-A){.xref}.  [MPLS Methods for Route
    Assessment](#name-mpls-methods-for-route-asse){.xref}
    :::

-   ::: {#section-toc.1-1.11}
    [](#appendix-B){.xref}[Acknowledgements](#name-acknowledgements){.xref}
    :::

-   ::: {#section-toc.1-1.12}
    [](#appendix-C){.xref}[Authors\'
    Addresses](#name-authors-addresses){.xref}
    :::
:::
:::

::: {#section-1 .section}
## [1.](#section-1){.section-number .selfRef} [Introduction](#name-introduction){.section-name .selfRef} {#name-introduction}

The IETF IP Performance Metrics (IPPM) Working Group first created a
framework for metric development in \[[RFC2330](#RFC2330){.xref}\]. This
framework has stood the test of time and enabled development of many
fundamental metrics. It has been updated in the area of metric
composition \[[RFC5835](#RFC5835){.xref}\] and in several areas related
to active stream measurement of modern networks with reactive properties
\[[RFC7312](#RFC7312){.xref}\].[¶](#section-1-1){.pilcrow}

The framework in \[[RFC2330](#RFC2330){.xref}\] motivated the
development of \"performance and reliability metrics for paths through
the Internet\"; [Section
5](https://www.rfc-editor.org/rfc/rfc2330#section-5){.relref} of
\[[RFC2330](#RFC2330){.xref}\] defines terms that support description of
a path under test. However, metrics for assessment of paths and related
performance aspects had not been attempted in IPPM when the framework in
\[[RFC2330](#RFC2330){.xref}\] was written.[¶](#section-1-2){.pilcrow}

This memo takes up the Route measurement challenge and specifies a new
Route metric, two practical frameworks for methods of measurement (using
either active or hybrid active-passive methods
\[[RFC7799](#RFC7799){.xref}\]), and Round-Trip Delay and link
information discovery using the results of measurements. All Route
measurements are limited by the willingness of Hosts along the path to
be discovered, to cooperate with the methods used, or to recognize that
the measurement operation is taking place (such as when tunnels are
present).[¶](#section-1-3){.pilcrow}

::: {#section-1.1 .section}
### [1.1.](#section-1.1){.section-number .selfRef} [Issues with Earlier Work to Define a Route Metric](#name-issues-with-earlier-work-to){.section-name .selfRef} {#name-issues-with-earlier-work-to}

[Section 7](https://www.rfc-editor.org/rfc/rfc2330#section-7){.relref}
of \[[RFC2330](#RFC2330){.xref}\] presents a simple example of a
\"Route\" metric along with several other examples. The example is
reproduced below (where the reference is to [Section
5](https://www.rfc-editor.org/rfc/rfc2330#section-5){.relref} of
\[[RFC2330](#RFC2330){.xref}\]):[¶](#section-1.1-1){.pilcrow}

> []{.break}
>
> route:
> :   The path, as defined in Section
>     [5](https://www.rfc-editor.org/rfc/rfc2330#section-5){.relref},
>     from A to B at a given time.[¶](#section-1.1-2.1.2){.pilcrow}
> :   

This example provides a starting point to develop a more complete
definition of Route. Areas needing clarification
include:[¶](#section-1.1-3){.pilcrow}

[]{.break}

Time:
:   In practice, the Route will be assessed over a time interval because
    active path detection methods like Paris-traceroute
    \[[PT](#PT){.xref}\] rely on Hop Limits for their operation and
    cannot accomplish discovery of all Hosts using a single
    packet.[¶](#section-1.1-4.2){.pilcrow}
:   

Type-P:
:   The legacy Route definition lacks the option to cater for
    packet-dependent routing. In this memo, we assess the Route for a
    specific packet of Type-P and reflect this in the metric definition.
    The methods of measurement determine the specific Type-P
    used.[¶](#section-1.1-4.4){.pilcrow}
:   

Parallel Paths:
:   Parallel paths are a reality of the Internet and a strength of
    advanced Route assessment methods, so the metric must acknowledge
    this possibility. Use of Equal-Cost Multipath (ECMP) and
    Unequal-Cost Multipath (UCMP) technologies are common sources of
    parallel subpaths.[¶](#section-1.1-4.6){.pilcrow}
:   

Cloud Subpath:
:   Cloud subpaths may contain Hosts that do not decrement the Hop Limit
    but may have two or more exchange links connecting \"discoverable\"
    Hosts or routers. Parallel subpaths contained within clouds cannot
    be discovered. The assessment methods only discover Hosts or routers
    on the path that decrement Hop Limit or cooperate with interrogation
    protocols. The presence of tunnels and nested tunnels further
    complicate assessment by hiding Hops.[¶](#section-1.1-4.8){.pilcrow}
:   

Hop:
:   The definition of Hop in \[[RFC2330](#RFC2330){.xref}\] was a
    link-Host pair. However, only Hosts that were discoverable and
    cooperated with interrogation protocols (where link information may
    be exposed) provided both link and Host
    information.[¶](#section-1.1-4.10){.pilcrow}
:   

Note that the actual definitions appear in [Section
3.1](#terms){.xref}.[¶](#section-1.1-5){.pilcrow}
:::

::: {#section-1.2 .section}
### [1.2.](#section-1.2){.section-number .selfRef} [Requirements Language](#name-requirements-language){.section-name .selfRef} {#name-requirements-language}

The key words \"[MUST]{.bcp14}\", \"[MUST NOT]{.bcp14}\",
\"[REQUIRED]{.bcp14}\", \"[SHALL]{.bcp14}\", \"[SHALL NOT]{.bcp14}\",
\"[SHOULD]{.bcp14}\", \"[SHOULD NOT]{.bcp14}\",
\"[RECOMMENDED]{.bcp14}\", \"[NOT RECOMMENDED]{.bcp14}\",
\"[MAY]{.bcp14}\", and \"[OPTIONAL]{.bcp14}\" in this document are to be
interpreted as described in BCP 14 \[[RFC2119](#RFC2119){.xref}\]
\[[RFC8174](#RFC8174){.xref}\] when, and only when, they appear in all
capitals, as shown here.[¶](#section-1.2-1){.pilcrow}
:::
:::

::: {#Scope}
::: {#section-2 .section}
## [2.](#section-2){.section-number .selfRef} [Scope](#name-scope){.section-name .selfRef} {#name-scope}

The purpose of this memo is to add new Route metrics and methods of
measurement to the existing set of IPPM
metrics.[¶](#section-2-1){.pilcrow}

The scope is to define Route metrics that can identify the path taken by
a packet or a flow traversing the Internet between two Hosts. Although
primarily intended for Hosts communicating on the Internet, the
definitions and metrics are constructed to be applicable to other
network domains, if desired. The methods of measurement to assess the
path may not be able to discover all Hosts comprising the path, but such
omissions are often deterministic and explainable sources of
error.[¶](#section-2-2){.pilcrow}

This memo also specifies a framework for active methods of measurement
that uses the techniques described in \[[PT](#PT){.xref}\] as well as a
framework for hybrid active-passive methods of measurement, such as the
Hybrid Type I method \[[RFC7799](#RFC7799){.xref}\] described in
\[[RFC9197](#RFC9197){.xref}\]. Methods using
\[[RFC9197](#RFC9197){.xref}\] are intended only for single
administrative domains that provide a protocol for explicit
interrogation of Nodes on a path. Combinations of active methods and
hybrid active-passive methods are also in
scope.[¶](#section-2-3){.pilcrow}

Further, this memo provides additional analysis of the Round-Trip Delay
measurements made possible by the methods in an effort to discover more
details about the path, such as the link technology in
use.[¶](#section-2-4){.pilcrow}

This memo updates [Section
5](https://www.rfc-editor.org/rfc/rfc2330#section-5){.relref} of
\[[RFC2330](#RFC2330){.xref}\] in the areas of path-related terminology
and path description, primarily to include the possibility of parallel
subpaths between a given Source and Destination address pair (possibly
resulting from ECMP and UCMP technologies).[¶](#section-2-5){.pilcrow}

There are several simple non-goals of this memo. There is no attempt to
assess the reverse path from any Host on the path to the Host attempting
the path measurement. The reverse path contribution to delay will be
that experienced by ICMP packets (in active methods) and may be
different from delays experienced by UDP or TCP packets. Also, the
Round-Trip Delay will include an unknown contribution of processing time
at the Host that generates the ICMP response. Therefore, the ICMP-based
active methods are not supposed to yield accurate, reproducible
estimations of the Round-Trip Delay that UDP or TCP packets will
experience.[¶](#section-2-6){.pilcrow}
:::
:::

::: {#section-3 .section}
## [3.](#section-3){.section-number .selfRef} [Route Metric Specifications](#name-route-metric-specifications){.section-name .selfRef} {#name-route-metric-specifications}

This section sets requirements for the components of the route
metric.[¶](#section-3-1){.pilcrow}

::: {#terms}
::: {#section-3.1 .section}
### [3.1.](#section-3.1){.section-number .selfRef} [Terms and Definitions](#name-terms-and-definitions){.section-name .selfRef} {#name-terms-and-definitions}

[]{.break}

Host
:   A Host (as defined in \[[RFC2330](#RFC2330){.xref}\]) is a computer
    capable of IP communication, including routers (aka an RFC 2330
    Host).[¶](#section-3.1-2.2){.pilcrow}
:   

Node
:   A Node is any network function on the path capable of IP-layer
    Communication, including RFC 2330
    Hosts.[¶](#section-3.1-2.4){.pilcrow}
:   

Node Identity
:   The Node identity is the unique address for Nodes communicating
    within the network domain. For Nodes communicating on the Internet
    with IP, it is the globally routable IP address that the Node uses
    when communicating with other Nodes under normal or error
    conditions. The Node identity revealed (and its connection to a Node
    name through reverse DNS) determines whether interfaces to parallel
    links can be associated with a single Node or appear to identify
    unique Nodes.[¶](#section-3.1-2.6){.pilcrow}
:   

Discoverable Node
:   Discoverable Nodes are Nodes that convey their Node identity
    according to the requirements of their network domain, such as when
    error conditions are detected by that Node. For Nodes communicating
    with IP packets, compliance with [Section
    3.2.2.4](https://www.rfc-editor.org/rfc/rfc1122#section-3.2.2.4){.relref}
    of \[[RFC1122](#RFC1122){.xref}\], when discarding a packet due to
    TTL or Hop Limit Exceeded condition, [MUST]{.bcp14} result in
    sending the corresponding Time Exceeded message (containing a form
    of Node identity) to the source. This requirement is also consistent
    with [Section
    5.3.1](https://www.rfc-editor.org/rfc/rfc1812#section-5.3.1){.relref}
    of \[[RFC1812](#RFC1812){.xref}\] for
    routers.[¶](#section-3.1-2.8){.pilcrow}
:   

Cooperating Node
:   Cooperating Nodes are Nodes that respond to direct queries for their
    Node identity as part of a previously established and agreed upon
    interrogation protocol. Nodes [SHOULD]{.bcp14} also provide
    information such as arrival/departure interface identification,
    arrival timestamp, and any relevant information about the Node or
    specific link that delivered the query to the
    Node.[¶](#section-3.1-2.10){.pilcrow}
:   

Hop specification
:   A Hop specification [MUST]{.bcp14} contain a Node identity and
    [MAY]{.bcp14} contain arrival and/or departure interface
    identification, Round-Trip Delay, and an arrival
    timestamp.[¶](#section-3.1-2.12){.pilcrow}
:   

Routing Class
:   Routing Class is a Route that treats a class of different types of
    packets, designated \"C\" (unrelated to address classes of the past)
    equally (\[[RFC2330](#RFC2330){.xref}\]
    \[[RFC8468](#RFC8468){.xref}\]). Knowledge of such a class allows
    any one of the types of packets within that class to be used for
    subsequent measurement of the Route. The designator \"class C\" is
    used for historical reasons; see
    \[[RFC2330](#RFC2330){.xref}\].[¶](#section-3.1-2.14){.pilcrow}
:   
:::
:::

::: {#section-3.2 .section}
### [3.2.](#section-3.2){.section-number .selfRef} [Formal Name](#name-formal-name){.section-name .selfRef} {#name-formal-name}

The formal name of the metric is:[¶](#section-3.2-1){.pilcrow}

Type-P-Route-Ensemble-Method-Variant[¶](#section-3.2-2){.pilcrow}

abbreviated as Route Ensemble.[¶](#section-3.2-3){.pilcrow}

Note that Type-P depends heavily on the chosen method and
variant.[¶](#section-3.2-4){.pilcrow}
:::

::: {#section-3.3 .section}
### [3.3.](#section-3.3){.section-number .selfRef} [Parameters](#name-parameters){.section-name .selfRef} {#name-parameters}

This section lists the [REQUIRED]{.bcp14} input factors to define and
measure a Route metric, as specified in this
memo.[¶](#section-3.3-1){.pilcrow}

[]{.break}

Src:
:   the address of a Node (such as the globally routable IP
    address).[¶](#section-3.3-2.2){.pilcrow}
:   

Dst:
:   the address of a Node (such as the globally routable IP
    address).[¶](#section-3.3-2.4){.pilcrow}
:   

i:
:   the limit on the number of Hops a specific packet may visit as it
    traverses from the Node at Src to the Node at Dst (such as the TTL
    or Hop Limit).[¶](#section-3.3-2.6){.pilcrow}
:   

MaxHops:
:   the maximum value of i used
    (i=1,2,3,\...MaxHops).[¶](#section-3.3-2.8){.pilcrow}
:   

T0:
:   a time (start of measurement
    interval).[¶](#section-3.3-2.10){.pilcrow}
:   

Tf:
:   a time (end of measurement
    interval).[¶](#section-3.3-2.12){.pilcrow}
:   

MP(address):
:   the Measurement Point at address, such as Src or Dst, usually at the
    same Node stack layer as
    \"address\".[¶](#section-3.3-2.14){.pilcrow}
:   

T:
:   the Node time of a packet as measured at MP(Src), meaning
    Measurement Point at the Source.[¶](#section-3.3-2.16){.pilcrow}
:   

Ta:
:   the Node time of a reply packet\'s **arrival** as measured at
    MP(Src), assigned to packets that arrive within a \"reasonable\"
    time (see parameter below).[¶](#section-3.3-2.18){.pilcrow}
:   

Tmax:
:   a maximum waiting time for reply packets to return to the source,
    set sufficiently long to disambiguate packets with long delays from
    packets that are discarded (lost), such that the distribution of
    Round-Trip Delay is not truncated.[¶](#section-3.3-2.20){.pilcrow}
:   

F:
:   the number of different flows simulated by the method and
    variant.[¶](#section-3.3-2.22){.pilcrow}
:   

flow:
:   the stream of packets with the same n-tuple of designated header
    fields that (when held constant) result in identical treatment in a
    multipath decision (such as the decision taken in load balancing).
    Note: The IPv6 flow label [MAY]{.bcp14} be included in the flow
    definition if the MP(Src) is a Tunnel Endpoint (TEP) complying with
    the guidelines in
    \[[RFC6438](#RFC6438){.xref}\].[¶](#section-3.3-2.24){.pilcrow}
:   

Type-P:
:   the complete description of the packets for which this assessment
    applies (including the flow-defining
    fields).[¶](#section-3.3-2.26){.pilcrow}
:   
:::

::: {#Metric}
::: {#section-3.4 .section}
### [3.4.](#section-3.4){.section-number .selfRef} [Metric Definitions](#name-metric-definitions){.section-name .selfRef} {#name-metric-definitions}

This section defines the [REQUIRED]{.bcp14} measurement components of
the Route metrics (unless otherwise
indicated):[¶](#section-3.4-1){.pilcrow}

[]{.break}

M:
:   the total number of packets sent between T0 and
    Tf.[¶](#section-3.4-2.2){.pilcrow}
:   

N:
:   the smallest value of i needed for a packet to be received at Dst
    (sent between T0 and Tf).[¶](#section-3.4-2.4){.pilcrow}
:   

Nmax:
:   the largest value of i needed for a packet to be received at Dst
    (sent between T0 and Tf). Nmax may be equal to
    N.[¶](#section-3.4-2.6){.pilcrow}
:   

Next, define a **singleton** for a Node on the path with sufficient
indexes to identify all Nodes identified in a measurement interval
(where **singleton** is part of the IPPM Framework
\[[RFC2330](#RFC2330){.xref}\]).[¶](#section-3.4-3){.pilcrow}

[]{.break}

singleton:
:   A Hop specification, designated h(i,j), the IP address and/or
    identity of Discoverable Nodes (or Cooperating Nodes) that are i
    Hops away from the Node with address = Src and part of Route j
    during the measurement interval T0 to Tf. As defined here, a Hop
    singleton measurement [MUST]{.bcp14} contain a Node identity,
    hid(i,j), and [MAY]{.bcp14} contain one or more of the following
    attributes:[¶](#section-3.4-4.2){.pilcrow}
:   

-   [a(i,j) Arrival Interface ID (e.g., when
    \[[RFC5837](#RFC5837){.xref}\] is
    supported)[¶](#section-3.4-5.1){.pilcrow}]{#section-3.4-5.1}
-   [d(i,j) Departure Interface ID (e.g., when
    \[[RFC5837](#RFC5837){.xref}\] is
    supported)[¶](#section-3.4-5.2){.pilcrow}]{#section-3.4-5.2}
-   [t(i,j) arrival timestamp, where t(i,j) is ideally supplied by the
    Hop (note that t(i,j) might be approximated from the sending time of
    the packet that revealed the Hop, e.g., when the round-trip response
    time is available and divided by
    2)[¶](#section-3.4-5.3){.pilcrow}]{#section-3.4-5.3}
-   [Measurements of Round-Trip Delay (for each packet that reveals the
    same Node identity and flow attributes, then this attribute is
    computed; see next
    section)[¶](#section-3.4-5.4){.pilcrow}]{#section-3.4-5.4}

Node identities and related information can be ordered by their distance
from the Node with address Src in Hops h(i,j). Based on this, two forms
of Routes are distinguished:[¶](#section-3.4-6){.pilcrow}

A Route Ensemble is defined as the combination of all Routes traversed
by different flows from the Node at Src address to the Node at Dst
address. A single Route traversed by a single flow (determined by an
unambiguous tuple of addresses Src and Dst and other identical flow
criteria) is a member of the Route Ensemble and called a Member
Route.[¶](#section-3.4-7){.pilcrow}

Using h(i,j) and components and parameters further
define:[¶](#section-3.4-8){.pilcrow}

When considering the set of Hops in the context of a single flow, a
Member Route j is an ordered list {h(1,j), \... h(Nj, j)} where h(i-1,
j) and h(i, j) are one Hop away from each other and Nj satisfying
h(Nj,j)=Dst is the minimum count of Hops needed by the packet on member
Route j to reach Dst. Member Routes must be unique. The uniqueness
property requires that any two Member Routes, j and k, that are part of
the same Route Ensemble differ either in terms of minimum Hop count Nj
and Nk to reach the destination Dst or, in the case of identical Hop
count Nj=Nk, they have at least one distinct Hop: h(i,j) != h(i,k) for
at least one i (i=1..Nj).[¶](#section-3.4-9){.pilcrow}

All the optional information collected to describe a Member Route, such
as the arrival interface, departure interface, and Round-Trip Delay at
each Hop, turns each list item into a rich structure. There may be
information on the links between Hops, possible information on the
routing (arrival interface and departure interface), an estimate of
distance between Hops based on Round-Trip Delay measurements and
calculations, and a timestamp indicating when all these additional
details were measured.[¶](#section-3.4-10){.pilcrow}

The Route Ensemble from Src to Dst, during the measurement interval T0
to Tf, is the aggregate of all m distinct Member Routes discovered
between the two Nodes with Src and Dst addresses. More formally, with
the Node having address Src omitted:[¶](#section-3.4-11){.pilcrow}

::: {#section-3.4-12}
``` sourcecode
Route Ensemble = {
{h(1,1), h(2,1), h(3,1), ... h(N1,1)=Dst},
{h(1,2), h(2,2), h(3,2),..., h(N2,2)=Dst},
...
{h(1,m), h(2,m), h(3,m), ....h(Nm,m)=Dst}
}
```

[¶](#section-3.4-12){.pilcrow}
:::

where the following conditions apply: i \<= Nj \<= Nmax
(j=1..m)[¶](#section-3.4-13){.pilcrow}

Note that some h(i,j) may be empty (null) in the case that systems do
not reply (not discoverable or not
cooperating).[¶](#section-3.4-14){.pilcrow}

h(i-1,j) and h(i,j) are the Hops on the same Member Route one Hop away
from each other.[¶](#section-3.4-15){.pilcrow}

Hop h(i,j) may be identical with h(k,l) for i!=k and j!=l, which means
there may be portions shared among different Member Routes (parts of
Member Routes may overlap).[¶](#section-3.4-16){.pilcrow}
:::
:::

::: {#section-3.5 .section}
### [3.5.](#section-3.5){.section-number .selfRef} [Related Round-Trip Delay and Loss Definitions](#name-related-round-trip-delay-an){.section-name .selfRef} {#name-related-round-trip-delay-an}

RTD(i,j,T) is defined as a singleton of the
\[[RFC2681](#RFC2681){.xref}\] Round-Trip Delay between the Node with
address = Src and the Node at Hop h(i,j) at time
T.[¶](#section-3.5-1){.pilcrow}

RTL(i,j,T) is defined as a singleton of the
\[[RFC6673](#RFC6673){.xref}\] Round-Trip Loss between the Node with
address = Src and the Node at Hop h(i,j) at time
T.[¶](#section-3.5-2){.pilcrow}
:::

::: {#section-3.6 .section}
### [3.6.](#section-3.6){.section-number .selfRef} [Discussion](#name-discussion){.section-name .selfRef} {#name-discussion}

Depending on the way that the Node identity is revealed, it may be
difficult to determine parallel subpaths between the same pair of Nodes
(i.e., multiple parallel links). It is easier to detect parallel
subpaths involving different Nodes.[¶](#section-3.6-1){.pilcrow}

-   [If a pair of discovered Nodes identify two different addresses (IP
    or not), then they will appear to be different Nodes. See item
    below.[¶](#section-3.6-2.1){.pilcrow}]{#section-3.6-2.1}
-   [If a pair of discovered Nodes identify two different IP addresses
    and the IP addresses resolve to the same Node name (in the DNS),
    then they will appear to be the same
    Node.[¶](#section-3.6-2.2){.pilcrow}]{#section-3.6-2.2}
-   [If a discovered Node always replies using the same network address,
    regardless of the interface a packet arrives on, then multiple
    parallel links cannot be detected in that network domain. This
    condition may apply to traceroute-style methods but may not apply to
    other hybrid methods based on In situ Operations, Administration,
    and Maintenance (IOAM). For example, if the ICMP extension mechanism
    described in \[[RFC5837](#RFC5837){.xref}\] is implemented, then
    parallel links can be detected with the discovery traceroute-style
    methods.[¶](#section-3.6-2.3){.pilcrow}]{#section-3.6-2.3}
-   [If parallel links between routers are aggregated below the IP
    layer, then, from the Node\'s point of view, all these links share
    the same pair of IP addresses. The existence of these parallel links
    can\'t be detected at the IP layer. This applies to other network
    domains with layers below them as well. This condition may apply to
    traceroute-style methods but may not apply to other hybrid methods
    based on IOAM.[¶](#section-3.6-2.4){.pilcrow}]{#section-3.6-2.4}

When a Route assessment employs IP packets (for example), the reality of
flow assignment to parallel subpaths involves layers above IP. Thus, the
measured Route Ensemble is applicable to IP and higher layers (as
described in the methodology\'s packet of Type-P and flow
parameters).[¶](#section-3.6-3){.pilcrow}
:::

::: {#section-3.7 .section}
### [3.7.](#section-3.7){.section-number .selfRef} [Reporting the Metric](#name-reporting-the-metric){.section-name .selfRef} {#name-reporting-the-metric}

An Information Model and an XML Data Model for Storing Traceroute
Measurements is available in \[[RFC5388](#RFC5388){.xref}\]. The
measured information at each Hop includes four pieces of information: a
one-dimensional Hop index, Node symbolic address, Node IP address, and
RTD for each response.[¶](#section-3.7-1){.pilcrow}

The description of Hop information that may be collected according to
this memo covers more dimensions, as defined in [Section
3.4](#Metric){.xref}. For example, the Hop index is two-dimensional to
capture the complexity of a Route Ensemble, and it contains
corresponding Node identities at a minimum. The models need to be
expanded to include these features as well as Arrival Interface ID,
Departure Interface ID, and arrival timestamp, when available. The
original sending Timestamp from the Src Node anchors a particular
measurement in time.[¶](#section-3.7-2){.pilcrow}
:::
:::

::: {#Methodologies}
::: {#section-4 .section}
## [4.](#section-4){.section-number .selfRef} [Route Assessment Methodologies](#name-route-assessment-methodolog){.section-name .selfRef} {#name-route-assessment-methodolog}

There are two classes of methods described in this section, active
methods relying on the reaction to TTL or Hop Limit Exceeded condition
to discover Nodes on a path and hybrid active-passive methods that
involve direct interrogation of Cooperating Nodes (usually within a
single domain). Description of these methods
follow.[¶](#section-4-1){.pilcrow}

::: {#section-4.1 .section}
### [4.1.](#section-4.1){.section-number .selfRef} [Active Methodologies](#name-active-methodologies){.section-name .selfRef} {#name-active-methodologies}

This section describes the method employed by current open-source tools,
thereby providing a practical framework for further advanced techniques
to be included as method variants. This method is applicable for use
across multiple administrative domains.[¶](#section-4.1-1){.pilcrow}

Internet routing is complex because it depends on the policies of
thousands of Autonomous Systems (ASes). Most routers perform load
balancing on flows using a form of ECMP. \[[RFC2991](#RFC2991){.xref}\]
describes a number of flow-based or hashed approaches (e.g., Modulo-N
Hash, Hash-Threshold, and Highest Random Weight (HRW)) and makes some
good suggestions. Flow-based ECMP avoids increased packet Delay
Variation and possibly overwhelming levels of packet reordering in
flows.[¶](#section-4.1-2){.pilcrow}

A few routers still divide the workload through packet-based techniques,
such as a round-robin scheme to distribute every new outgoing packet to
multiple links, as explained in \[[RFC2991](#RFC2991){.xref}\]. The
methods described in this section assume flow-based
ECMP.[¶](#section-4.1-3){.pilcrow}

Taking into account that Internet protocol was designed under the
\"end-to-end\" principle, the IP payload and its header do not provide
any information about the Routes or path necessary to reach some
destination. For this reason, the popular tool, traceroute, was
developed to gather the IP addresses of each Hop along a path using ICMP
\[[RFC0792](#RFC0792){.xref}\]. Traceroute also measures RTD from each
Hop. However, the growing complexity of the Internet makes it more
challenging to develop an accurate traceroute implementation. For
instance, the early traceroute tools would be inaccurate in the current
network, mainly because they were not designed to retain a flow state.
However, evolved traceroute tools, such as Paris-traceroute
(\[[PT](#PT){.xref}\] \[[MLB](#MLB){.xref}\]) and Scamper
(\[[SCAMPER](#SCAMPER){.xref}\]), expect to encounter ECMP and achieve
more accurate results when they do, where Scamper ensures traceroute
packets will follow the same path in 98% of cases
(\[[SCAMPER](#SCAMPER){.xref}\]).[¶](#section-4.1-4){.pilcrow}

Today\'s traceroute tools send Type-P of packets, which are either ICMP,
UDP, or TCP. UDP and TCP are used when a particular characteristic needs
to be verified, such as filtering or traffic shaping on specific ports
(i.e., services). UDP and TCP traceroute are also used when ICMP
responses are not received. \[[SCAMPER](#SCAMPER){.xref}\] supports IPv6
traceroute measurements, keeping the Flow Label constant in all
packets.[¶](#section-4.1-5){.pilcrow}

Paris-traceroute allows its users to measure the RTD to every Node of
the path for a particular flow. Furthermore, either Paris-traceroute or
Scamper is capable of unveiling the many available paths between a
source and destination (which are visible to active methods). This task
is accomplished by repeating complete traceroute measurements with
different flow parameters for each measurement; Paris-traceroute
provides an \"exhaustive\" mode, while Scamper provides \"tracelb\"
(which stands for \"traceroute load balance\"). [\"Framework for IP
Performance Metrics\"](#RFC2330){.xref} \[[RFC2330](#RFC2330){.xref}\],
updated by \[[RFC7312](#RFC7312){.xref}\], has the flexibility to
require that the Round-Trip Delay measurement
\[[RFC2681](#RFC2681){.xref}\] uses packets with the constraints to
assure that all packets in a single measurement appear as the same flow.
This flexibility covers ICMP, UDP, and TCP. The accompanying methodology
of \[[RFC2681](#RFC2681){.xref}\] needs to be expanded to report the
sequential Hop identifiers along with RTD measurements, but no new
metric definition is needed.[¶](#section-4.1-6){.pilcrow}

The advanced Route assessment methods used in Paris-traceroute
\[[PT](#PT){.xref}\] keep the critical fields constant for every packet
to maintain the appearance of the same flow. When considering IPv6
headers, it is necessary to ensure that the IP Source and Destination
addresses and Flow Label are constant (but note that many routers ignore
the Flow Label field at this time); see \[[RFC6437](#RFC6437){.xref}\].
Use of IPv6 Extension Headers may add critical fields and
[SHOULD]{.bcp14} be avoided. In IPv4, certain fields of the IP header
and the first 4 bytes of the IP payload should remain constant in a
flow. In the IPv4 header, the IP Source and Destination addresses,
protocol number, and Diffserv fields identify flows. The first 4 payload
bytes include the UDP and TCP ports and the ICMP type, code, and
checksum fields.[¶](#section-4.1-7){.pilcrow}

Maintaining a constant ICMP checksum in IPv4 is most challenging, as the
ICMP sequence number or identifier fields will usually change for
different probes of the same path. Probes should use arbitrary bytes in
the ICMP data field to offset changes to the sequence number and
identifier, thus keeping the checksum
constant.[¶](#section-4.1-8){.pilcrow}

Finally, it is also essential to Route the resulting ICMP Time Exceeded
messages along a consistent path. In IPv6, the fields above are
sufficient. In IPv4, the ICMP Time Exceeded message will contain the IP
header and the first 8 bytes of the IP payload, both of which affect its
ICMP checksum calculation. The TCP sequence number, UDP length, and UDP
checksum will affect this value and should remain
constant.[¶](#section-4.1-9){.pilcrow}

Formally, to maintain the same flow in the measurements to a particular
Hop, the Type-P-Route-Ensemble-Method-Variant packets should have the
following attributes (see
\[[PT](#PT){.xref}\]):[¶](#section-4.1-10){.pilcrow}

[]{.break}

TCP case:
:   For IPv4, the fields Src, Dst, port-Src, port_Dst, sequence number,
    and Diffserv [SHOULD]{.bcp14} be the same. For IPv6, the fields Flow
    Label, Src, and Dst [SHOULD]{.bcp14} be the
    same.[¶](#section-4.1-11.2){.pilcrow}
:   

UDP case:
:   For IPv4, the fields Src, Dst, port-Src, port-Dst, and Diffserv
    should be the same, and the UDP checksum [SHOULD]{.bcp14} change to
    keep the IP checksum of the ICMP Time Exceeded reply constant. Then,
    the data length should be fixed, and the data field is used to make
    it so (consider that ICMP checksum uses its data field, which
    contains the original IP header plus 8 bytes of UDP, where TTL, IP
    identification, IP checksum, and UDP checksum changes). For IPv6,
    the field Flow Label and Source and Destination addresses
    [SHOULD]{.bcp14} be the same.[¶](#section-4.1-11.4){.pilcrow}
:   

ICMP case:
:   For IPv4, the data field [SHOULD]{.bcp14} compensate variations on
    TTL or Hop Limit, IP identification, and IP checksum for every
    packet. There is no need to consider ICMPv6 because only Flow Label
    of IPv6 and Source and Destination addresses are used, and all of
    them [SHOULD]{.bcp14} be constant.[¶](#section-4.1-11.6){.pilcrow}
:   

Then, the way to identify different Hops and attempts of the same IPv4
flow is:[¶](#section-4.1-12){.pilcrow}

[]{.break}

TCP case:
:   The IP identification field.[¶](#section-4.1-13.2){.pilcrow}
:   

UDP case:
:   The IP identification field.[¶](#section-4.1-13.4){.pilcrow}
:   

ICMP case:
:   The IP identification field and ICMP sequence
    number.[¶](#section-4.1-13.6){.pilcrow}
:   

::: {#section-4.1.1 .section}
#### [4.1.1.](#section-4.1.1){.section-number .selfRef} [Temporal Composition for Route Metrics](#name-temporal-composition-for-ro){.section-name .selfRef} {#name-temporal-composition-for-ro}

The active Route assessment methods described above have the ability to
discover portions of a path where ECMP load balancing is present,
observed as two or more unique Member Routes having one or more distinct
Hops that are part of the Route Ensemble. Likewise, attempts to
deliberately vary the flow characteristics to discover all Member Routes
will reveal portions of the path that are flow
invariant.[¶](#section-4.1.1-1){.pilcrow}

[Section
9.2](https://www.rfc-editor.org/rfc/rfc2330#section-9.2){.relref} of
\[[RFC2330](#RFC2330){.xref}\] describes the Temporal Composition of
metrics and introduces the possibility of a relationship between earlier
measurement results and the results for measurement at the current time
(for a given metric). There is value in establishing a Temporal
Composition relationship for Route metrics; however, this relationship
does not represent a forecast of future Route conditions in any
way.[¶](#section-4.1.1-2){.pilcrow}

For Route-metric measurements, the value of Temporal Composition is to
reduce the measurement iterations required with repeated measurements.
Reduced iterations are possible by inferring that current measurements
using fixed and previously measured flow
characteristics:[¶](#section-4.1.1-3){.pilcrow}

-   [will have many common Hops with previous
    measurements.[¶](#section-4.1.1-4.1){.pilcrow}]{#section-4.1.1-4.1}
-   [will have relatively time-stable results at the ingress and egress
    portions of the path when measured from user locations, as opposed
    to measurements of backbone networks and across inter-domain
    gateways.[¶](#section-4.1.1-4.2){.pilcrow}]{#section-4.1.1-4.2}
-   [may have greater potential for time variation in path portions
    where ECMP load balancing is observed (because increasing or
    decreasing the pool of links changes the hash
    calculations).[¶](#section-4.1.1-4.3){.pilcrow}]{#section-4.1.1-4.3}

Optionally, measurement systems may take advantage of the inferences
above when seeking to reduce measurement iterations after exhaustive
measurements indicate that the time-stable properties are present.
Repetitive active Route measurement
systems:[¶](#section-4.1.1-5){.pilcrow}

1.  [[SHOULD]{.bcp14} occasionally check path portions that have
    exhibited stable results over time, particularly ingress and egress
    portions of the path (e.g., daily checks if measuring many times
    during a day).[¶](#section-4.1.1-6.1){.pilcrow}]{#section-4.1.1-6.1}
2.  [[SHOULD]{.bcp14} continue testing portions of the path that have
    previously exhibited ECMP load
    balancing.[¶](#section-4.1.1-6.2){.pilcrow}]{#section-4.1.1-6.2}
3.  [[SHALL]{.bcp14} trigger reassessment of the complete path and Route
    Ensemble if any change in Hops is observed for a specific (and
    previously tested)
    flow.[¶](#section-4.1.1-6.3){.pilcrow}]{#section-4.1.1-6.3}
:::

::: {#section-4.1.2 .section}
#### [4.1.2.](#section-4.1.2){.section-number .selfRef} [Routing Class Identification](#name-routing-class-identificatio){.section-name .selfRef} {#name-routing-class-identificatio}

There is an opportunity to apply the notion from
\[[RFC2330](#RFC2330){.xref}\] of equal treatment for a class of
packets, \"\...very useful to know if a given Internet component treats
equally a class C of different types of packets\", as it applies to
Route measurements. The notion of class C was examined further in
\[[RFC8468](#RFC8468){.xref}\] as it applied to load-balancing flows
over parallel paths, which is the case we develop here. Knowledge of
class C parameters (unrelated to address classes of the past) on a path
potentially reduces the number of flows required for a given method to
assess a Route Ensemble over time.[¶](#section-4.1.2-1){.pilcrow}

First, recognize that each Member Route of a Route Ensemble will have a
corresponding class C. Class C can be discovered by testing with
multiple flows, all of which traverse the unique set of Hops that
comprise a specific Member Route.[¶](#section-4.1.2-2){.pilcrow}

Second, recognize that the different classes depend primarily on the
hash functions used at each instance of ECMP load balancing on the
path.[¶](#section-4.1.2-3){.pilcrow}

Third, recognize the synergy with Temporal Composition methods
(described above), where evaluation intends to discover time-stable
portions of each Member Route so that more emphasis can be placed on
ECMP portions that also determine class
C.[¶](#section-4.1.2-4){.pilcrow}

The methods to assess the various class C characteristics benefit from
the following measurement capabilities:[¶](#section-4.1.2-5){.pilcrow}

-   [flows designed to determine which n-tuple header fields are
    considered by a given hash function and ECMP Hop on the path and
    which are not. This operation immediately narrows the search space,
    where possible, and partially defines a class
    C.[¶](#section-4.1.2-6.1){.pilcrow}]{#section-4.1.2-6.1}
-   [a priori knowledge of the possible types of hash functions in use
    also helps to design the flows for testing (major router vendors
    publish information about these hash functions; examples are in
    \[[LOAD_BALANCE](#LOAD_BALANCE){.xref}\]).[¶](#section-4.1.2-6.2){.pilcrow}]{#section-4.1.2-6.2}
-   [ability to direct the emphasis of current measurements on ECMP
    portions of the path, based on recent past measurement results (the
    Routing Class of some portions of the path is essentially \"all
    packets\").[¶](#section-4.1.2-6.3){.pilcrow}]{#section-4.1.2-6.3}
:::

::: {#section-4.1.3 .section}
#### [4.1.3.](#section-4.1.3){.section-number .selfRef} [Intermediate Observation Point Route Measurement](#name-intermediate-observation-po){.section-name .selfRef} {#name-intermediate-observation-po}

There are many examples where passive monitoring of a flow at an
Observation Point within the network can detect unexpected Round-Trip
Delay or Delay Variation. But how can the cause of the anomalous delay
be investigated further **from the Observation Point** possibly located
at an intermediate point on the path?[¶](#section-4.1.3-1){.pilcrow}

In this case, knowledge that the flow of interest belongs to a specific
Routing Class C will enable measurement of the Route where anomalous
delay has been observed. Specifically, Round-Trip Delay assessment to
each Hop on the path between the Observation Point and the Destination
for the flow of interest may discover high or variable delay on a
specific link and Hop combination.[¶](#section-4.1.3-2){.pilcrow}

The determination of a Routing Class C that includes the flow of
interest is as described in the section above, aided by computation of
the relevant hash function output as the
target.[¶](#section-4.1.3-3){.pilcrow}
:::
:::

::: {#section-4.2 .section}
### [4.2.](#section-4.2){.section-number .selfRef} [Hybrid Methodologies](#name-hybrid-methodologies){.section-name .selfRef} {#name-hybrid-methodologies}

The Hybrid Type I methods provide an alternative for Route assessment.
The \"Scope, Applicability, and Assumptions\" section of
\[[RFC9197](#RFC9197){.xref}\] provides one possible set of data fields
that would support Route identification.[¶](#section-4.2-1){.pilcrow}

In general, Nodes in the measured domain would be equipped with specific
abilities:[¶](#section-4.2-2){.pilcrow}

-   [Store the identity of Nodes that a packet has visited in header
    data fields in the order the packet visited the
    Nodes.[¶](#section-4.2-3.1){.pilcrow}]{#section-4.2-3.1}
-   [Support of a \"Loopback\" capability where a copy of the packet is
    returned to the encapsulating Node and the packet is processed like
    any other IOAM packet on the return
    transfer.[¶](#section-4.2-3.2){.pilcrow}]{#section-4.2-3.2}

In addition to Node identity, Nodes may also identify the ingress and
egress interfaces utilized by the tracing packet, the absolute time when
the packet was processed, and other generic data (as described in
[Section 3](https://www.rfc-editor.org/rfc/rfc9197#section-3){.relref}
of \[[RFC9197](#RFC9197){.xref}\]). Interface identification isn\'t
necessarily limited to IP, i.e., different links in a bundle (Link
Aggregation Control Protocol (LACP)) could be identified. Equally well,
links without explicit IP addresses can be identified (like with
unnumbered interfaces in an IGP
deployment).[¶](#section-4.2-4){.pilcrow}

Note that the Type-P packet specification for this method will likely be
a partial specification because most of the packet fields are determined
by the user traffic. The packet encapsulation header or headers added by
the hybrid method can certainly be specified in Type-P, in unpopulated
form.[¶](#section-4.2-5){.pilcrow}
:::

::: {#section-4.3 .section}
### [4.3.](#section-4.3){.section-number .selfRef} [Combining Different Methods](#name-combining-different-methods){.section-name .selfRef} {#name-combining-different-methods}

In principle, there are advantages if the entity conducting Route
measurements can utilize both forms of advanced methods (active and
hybrid) and combine the results. For example, if there are Nodes
involved in the path that qualify as Cooperating Nodes but not as
Discoverable Nodes, then a more complete view of Hops on the path is
possible when a hybrid method (or interrogation protocol) is applied and
the results are combined with the active method results collected across
all other domains.[¶](#section-4.3-1){.pilcrow}

In order to combine the results of active and hybrid/interrogation
methods, the network Nodes that are part of a domain supporting an
interrogation protocol have the following
attributes:[¶](#section-4.3-2){.pilcrow}

1.  [Nodes at the ingress to the domain [SHOULD]{.bcp14} be both
    Discoverable and
    Cooperating.[¶](#section-4.3-3.1){.pilcrow}]{#section-4.3-3.1}
2.  [Any Nodes within the domain that are both Discoverable and
    Cooperating [SHOULD]{.bcp14} reveal the same Node identity in
    response to both active and hybrid
    methods.[¶](#section-4.3-3.2){.pilcrow}]{#section-4.3-3.2}
3.  [Nodes at the egress to the domain [SHOULD]{.bcp14} be both
    Discoverable and Cooperating and [SHOULD]{.bcp14} reveal the same
    Node identity in response to both active and hybrid
    methods.[¶](#section-4.3-3.3){.pilcrow}]{#section-4.3-3.3}

When Nodes follow these requirements, it becomes a simple matter to
match single-domain measurements with the overlapping results from a
multidomain measurement.[¶](#section-4.3-4){.pilcrow}

In practice, Internet users do not typically have the ability to utilize
the Operations, Administrations, and Maintenance (OAM) capabilities of
networks that their packets traverse, so the results from a remote
domain supporting an interrogation protocol would not normally be
accessible. However, a network operator could combine interrogation
results from their access domain with other measurements revealing the
path outside their domain.[¶](#section-4.3-5){.pilcrow}
:::
:::
:::

::: {#Cases}
::: {#section-5 .section}
## [5.](#section-5){.section-number .selfRef} [Background on Round-Trip Delay Measurement Goals](#name-background-on-round-trip-de){.section-name .selfRef} {#name-background-on-round-trip-de}

The aim of this method is to use packet probes to unveil the paths
between any two End-Nodes of the network. Moreover, information derived
from RTD measurements might be meaningful to
identify:[¶](#section-5-1){.pilcrow}

1.  [Intercontinental submarine
    links[¶](#section-5-2.1){.pilcrow}]{#section-5-2.1}
2.  [Satellite
    communications[¶](#section-5-2.2){.pilcrow}]{#section-5-2.2}
3.  [Congestion[¶](#section-5-2.3){.pilcrow}]{#section-5-2.3}
4.  [Inter-domain paths[¶](#section-5-2.4){.pilcrow}]{#section-5-2.4}

This categorization is widely accepted in the literature and among
operators alike, and it can be trusted with empirical data and several
sources as ground of truth (e.g., \[[RTTSub](#RTTSub){.xref}\]), but it
is an inference measurement nonetheless \[[bdrmap](#bdrmap){.xref}\]
\[[IDCong](#IDCong){.xref}\].[¶](#section-5-3){.pilcrow}

The first two categories correspond to the physical distance dependency
on RTD, the next one binds RTD with queuing delay on routers, and the
last one helps to identify different ASes using traceroutes. Due to the
significant contribution of propagation delay in long-distance Hops, RTD
will be on the order of 100 ms on transatlantic Hops, depending on the
geolocation of the vantage points. Moreover, RTD is typically higher
than 480 ms when two Hops are connected using geostationary satellite
technology (i.e., their orbit is at 36000 km). Detecting congestion with
latency implies deeper mathematical understanding, since network traffic
load is not stationary. Nonetheless, as the first approach, a link seems
to be congested if observing different/varying statistical results after
sending several traceroute probes (e.g., see
\[[IDCong](#IDCong){.xref}\]). Finally, to recognize distinctive ASes in
the same traceroute path is challenging because more data is needed,
like AS relationships and Regional Internet Registry (RIR) delegations
among others (for more details, please consult
\[[bdrmap](#bdrmap){.xref}\]).[¶](#section-5-4){.pilcrow}
:::
:::

::: {#Statistics}
::: {#section-6 .section}
## [6.](#section-6){.section-number .selfRef} [RTD Measurements Statistics](#name-rtd-measurements-statistics){.section-name .selfRef} {#name-rtd-measurements-statistics}

Several articles have shown that network traffic presents a self-similar
nature \[[SSNT](#SSNT){.xref}\] \[[MLRM](#MLRM){.xref}\] that is
accountable for filling the queues of the routers. Moreover, router
queues are designed to handle traffic bursts, which is one of the most
remarkable features of self-similarity. Naturally, while queue length
increases, the delay to traverse the queue increases as well and leads
to an increase on RTD. Due to traffic bursts generating short-term
overflow on buffers (spiky patterns), every RTD only depicts the
queueing status on the instant when that packet probe was in transit.
For this reason, several RTD measurements during a time window could
begin to describe the random behavior of latency. Loss must also be
accounted for in the methodology.[¶](#section-6-1){.pilcrow}

To understand the ongoing process, examining the quartiles provides a
nonparametric way of analysis. Quartiles are defined by five values:
minimum RTD (m), RTD value of the 25% of the Empirical Cumulative
Distribution Function (ECDF) (Q1), the median value (Q2), the RTD value
of the 75% of the ECDF (Q3), and the maximum RTD (M). Congestion can be
inferred when RTD measurements are spread apart; consequently, the
Interquartile Range (IQR), i.e., the distance between Q3 and Q1,
increases its value.[¶](#section-6-2){.pilcrow}

This procedure requires the algorithm presented in \[[P2](#P2){.xref}\]
to compute quartile values \"on the fly\".[¶](#section-6-3){.pilcrow}

This procedure allows us to update the quartile values whenever a new
measurement arrives, which is radically different from classic methods
of computing quartiles, because they need to use the whole dataset to
compute the values. This way of calculus provides savings in memory and
computing time.[¶](#section-6-4){.pilcrow}

To sum up, the proposed measurement procedure consists of performing
traceroutes several times to obtain samples of the RTD in every Hop from
a path during a time window (W) and compute the quartiles for every Hop.
This procedure could be done for a single Member Route flow, for a
non-exhaustive search with parameter E (defined below) set to False, or
for every detected Route Ensemble flow
(E=True).[¶](#section-6-5){.pilcrow}

The identification of a specific Hop in a traceroute is based on the IP
origin address of the returned ICMP Time Exceeded packet and on the
distance identified by the value set in the TTL (or Hop Limit) field
inserted by traceroute. As this specific Hop can be reached by different
paths, the IP Source and Destination addresses of the traceroute packet
also need to be recorded. Finally, different return paths are
distinguished by evaluating the ICMP Time Exceeded TTL (or Hop Limit) of
the reply message; if this TTL (or Hop Limit) is constant for different
paths containing the same Hop, the return paths have the same distance.
Moreover, this distance can be estimated considering that the TTL (or
Hop Limit) value is normally initialized with values 64, 128, or 255.
The 5-tuple (origin IP, destination IP, reply IP, distance, and response
TTL or Hop Limit) unequivocally identifies every
measurement.[¶](#section-6-6){.pilcrow}

This algorithm below runs in the origin of the traceroute. It returns
the Qs quartiles for every Hop and Alt (alternative paths because of
balancing). Notice that the \"Alt\" parameter condenses the parameters
of the 5-tuple (origin IP, destination IP, reply IP, distance, and
response TTL), i.e., one for each possible
combination.[¶](#section-6-7){.pilcrow}

::: {#section-6-8}
``` {.lang-pseudocode .sourcecode}
================================================================
0  input:   W (window time of the measurement)
1           i_t (time between two measurements, set the i_t time
2                long enough to avoid incomplete results)
3           E (True: exhaustive, False: a single path)
4           Dst (destination IP address)
5  output:  Qs (quartiles for every Hop and Alt)
----------------------------------------------------------------
6  T := start_timer(W)
7  while T is not finished do:
8  |       start_timer(i_t)
9  |       RTD(Hop,Alt) = advanced-traceroute(Dst,E)
10 |       for each Hop and Alt in RTD do:
11 |       |     Qs[Dst,Hop,Alt] := ComputeQs(RTD(Hop,Alt))
12 |       done
13 |       wait until i_t timer is expired
14 done
15  return (Qs)
================================================================
```

[¶](#section-6-8){.pilcrow}
:::

During the time W, lines 6 and 7 assure that the measurement loop is
made. Lines 8 and 13 set a timer for each cycle of measurements. A cycle
comprises the traceroutes packets, considering every possible Hop and
the alternatives paths in the Alt variable (ensured in lines 9-12). In
line 9, the advanced-traceroute could be either Paris-traceroute or
Scamper, which will use the \"exhaustive\" mode or \"tracelb\" option if
E is set to True, respectively. The procedure returns a list of tuples
(m, Q1, Q2, Q3, and M) for each intermediate Hop, or \"Alt\" in as a
function of the 5-tuple, in the path towards the Dst. Finally, lines 10
through 12 store each measurement into the real-time quartiles
computation.[¶](#section-6-9){.pilcrow}

Notice there are cases where even having a unique Hop at distance h from
the Src to Dst, the returning path could have several possibilities,
yielding different total paths. In this situation, the algorithm will
return another \"Alt\" for this particular
Hop.[¶](#section-6-10){.pilcrow}
:::
:::

::: {#Security}
::: {#section-7 .section}
## [7.](#section-7){.section-number .selfRef} [Security Considerations](#name-security-considerations){.section-name .selfRef} {#name-security-considerations}

The security considerations that apply to any active measurement of live
paths are relevant here as well. See \[[RFC4656](#RFC4656){.xref}\] and
\[[RFC5357](#RFC5357){.xref}\].[¶](#section-7-1){.pilcrow}

The active measurement process of changing several fields to keep the
checksum of different packets identical does not require special
security considerations because it is part of synthetic traffic
generation and is designed to have minimal to zero impact on network
processing (to process the packets for ECMP).[¶](#section-7-2){.pilcrow}

Some of the protocols used (e.g., ICMP) do not provide cryptographic
protection for the requested/returned data, and there are risks of
processing untrusted data in general, but these are limitations of the
existing protocols where we are applying new
methods.[¶](#section-7-3){.pilcrow}

For applicable hybrid methods, the security considerations in
\[[RFC9197](#RFC9197){.xref}\] apply.[¶](#section-7-4){.pilcrow}

When considering the privacy of those involved in measurement or those
whose traffic is measured, the sensitive information available to
potential observers is greatly reduced when using active techniques that
are within this scope of work. Passive observations of user traffic for
measurement purposes raise many privacy issues. We refer the reader to
the privacy considerations described in the Large-scale Measurement of
Broadband Performance (LMAP) Framework \[[RFC7594](#RFC7594){.xref}\],
which covers active and passive techniques.[¶](#section-7-5){.pilcrow}
:::
:::

::: {#IANA}
::: {#section-8 .section}
## [8.](#section-8){.section-number .selfRef} [IANA Considerations](#name-iana-considerations){.section-name .selfRef} {#name-iana-considerations}

This document has no IANA actions.[¶](#section-8-1){.pilcrow}
:::
:::

::: {#section-9 .section}
## [9.](#section-9){.section-number .selfRef} [References](#name-references){.section-name .selfRef} {#name-references}

::: {#section-9.1 .section}
### [9.1.](#section-9.1){.section-number .selfRef} [Normative References](#name-normative-references){.section-name .selfRef} {#name-normative-references}

\[RFC0792\]
:   [Postel, J.]{.refAuthor}, [\"Internet Control Message
    Protocol\"]{.refTitle}, [STD 5]{.seriesInfo}, [RFC
    792]{.seriesInfo}, [DOI 10.17487/RFC0792]{.seriesInfo}, September
    1981, \<<https://www.rfc-editor.org/info/rfc792>\>.
:   

\[RFC1122\]
:   [Braden, R., Ed.]{.refAuthor}, [\"Requirements for Internet Hosts -
    Communication Layers\"]{.refTitle}, [STD 3]{.seriesInfo}, [RFC
    1122]{.seriesInfo}, [DOI 10.17487/RFC1122]{.seriesInfo}, October
    1989, \<<https://www.rfc-editor.org/info/rfc1122>\>.
:   

\[RFC1812\]
:   [Baker, F., Ed.]{.refAuthor}, [\"Requirements for IP Version 4
    Routers\"]{.refTitle}, [RFC 1812]{.seriesInfo}, [DOI
    10.17487/RFC1812]{.seriesInfo}, June 1995,
    \<<https://www.rfc-editor.org/info/rfc1812>\>.
:   

\[RFC2119\]
:   [Bradner, S.]{.refAuthor}, [\"Key words for use in RFCs to Indicate
    Requirement Levels\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    2119]{.seriesInfo}, [DOI 10.17487/RFC2119]{.seriesInfo}, March 1997,
    \<<https://www.rfc-editor.org/info/rfc2119>\>.
:   

\[RFC2330\]
:   [Paxson, V.]{.refAuthor}, [Almes, G.]{.refAuthor},
    [Mahdavi, J.]{.refAuthor}, and [M. Mathis]{.refAuthor}, [\"Framework
    for IP Performance Metrics\"]{.refTitle}, [RFC 2330]{.seriesInfo},
    [DOI 10.17487/RFC2330]{.seriesInfo}, May 1998,
    \<<https://www.rfc-editor.org/info/rfc2330>\>.
:   

\[RFC2681\]
:   [Almes, G.]{.refAuthor}, [Kalidindi, S.]{.refAuthor}, and [M.
    Zekauskas]{.refAuthor}, [\"A Round-trip Delay Metric for
    IPPM\"]{.refTitle}, [RFC 2681]{.seriesInfo}, [DOI
    10.17487/RFC2681]{.seriesInfo}, September 1999,
    \<<https://www.rfc-editor.org/info/rfc2681>\>.
:   

\[RFC4656\]
:   [Shalunov, S.]{.refAuthor}, [Teitelbaum, B.]{.refAuthor},
    [Karp, A.]{.refAuthor}, [Boote, J.]{.refAuthor}, and [M.
    Zekauskas]{.refAuthor}, [\"A One-way Active Measurement Protocol
    (OWAMP)\"]{.refTitle}, [RFC 4656]{.seriesInfo}, [DOI
    10.17487/RFC4656]{.seriesInfo}, September 2006,
    \<<https://www.rfc-editor.org/info/rfc4656>\>.
:   

\[RFC5388\]
:   [Niccolini, S.]{.refAuthor}, [Tartarelli, S.]{.refAuthor},
    [Quittek, J.]{.refAuthor}, [Dietz, T.]{.refAuthor}, and [M.
    Swany]{.refAuthor}, [\"Information Model and XML Data Model for
    Traceroute Measurements\"]{.refTitle}, [RFC 5388]{.seriesInfo}, [DOI
    10.17487/RFC5388]{.seriesInfo}, December 2008,
    \<<https://www.rfc-editor.org/info/rfc5388>\>.
:   

\[RFC6438\]
:   [Carpenter, B.]{.refAuthor} and [S. Amante]{.refAuthor}, [\"Using
    the IPv6 Flow Label for Equal Cost Multipath Routing and Link
    Aggregation in Tunnels\"]{.refTitle}, [RFC 6438]{.seriesInfo}, [DOI
    10.17487/RFC6438]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6438>\>.
:   

\[RFC6673\]
:   [Morton, A.]{.refAuthor}, [\"Round-Trip Packet Loss
    Metrics\"]{.refTitle}, [RFC 6673]{.seriesInfo}, [DOI
    10.17487/RFC6673]{.seriesInfo}, August 2012,
    \<<https://www.rfc-editor.org/info/rfc6673>\>.
:   

\[RFC7799\]
:   [Morton, A.]{.refAuthor}, [\"Active and Passive Metrics and Methods
    (with Hybrid Types In-Between)\"]{.refTitle}, [RFC
    7799]{.seriesInfo}, [DOI 10.17487/RFC7799]{.seriesInfo}, May 2016,
    \<<https://www.rfc-editor.org/info/rfc7799>\>.
:   

\[RFC8029\]
:   [Kompella, K.]{.refAuthor}, [Swallow, G.]{.refAuthor}, [Pignataro,
    C., Ed.]{.refAuthor}, [Kumar, N.]{.refAuthor},
    [Aldrin, S.]{.refAuthor}, and [M. Chen]{.refAuthor}, [\"Detecting
    Multiprotocol Label Switched (MPLS) Data-Plane
    Failures\"]{.refTitle}, [RFC 8029]{.seriesInfo}, [DOI
    10.17487/RFC8029]{.seriesInfo}, March 2017,
    \<<https://www.rfc-editor.org/info/rfc8029>\>.
:   

\[RFC8174\]
:   [Leiba, B.]{.refAuthor}, [\"Ambiguity of Uppercase vs Lowercase in
    RFC 2119 Key Words\"]{.refTitle}, [BCP 14]{.seriesInfo}, [RFC
    8174]{.seriesInfo}, [DOI 10.17487/RFC8174]{.seriesInfo}, May 2017,
    \<<https://www.rfc-editor.org/info/rfc8174>\>.
:   

\[RFC8468\]
:   [Morton, A.]{.refAuthor}, [Fabini, J.]{.refAuthor},
    [Elkins, N.]{.refAuthor}, [Ackermann, M.]{.refAuthor}, and [V.
    Hegde]{.refAuthor}, [\"IPv4, IPv6, and IPv4-IPv6 Coexistence:
    Updates for the IP Performance Metrics (IPPM)
    Framework\"]{.refTitle}, [RFC 8468]{.seriesInfo}, [DOI
    10.17487/RFC8468]{.seriesInfo}, November 2018,
    \<<https://www.rfc-editor.org/info/rfc8468>\>.
:   

\[RFC9197\]
:   [Brockners, F., Ed.]{.refAuthor}, [Bhandari, S., Ed.]{.refAuthor},
    and [T. Mizrahi, Ed.]{.refAuthor}, [\"Data Fields for In Situ
    Operations, Administration, and Maintenance (IOAM)\"]{.refTitle},
    [RFC 9197]{.seriesInfo}, [DOI 10.17487/RFC9197]{.seriesInfo}, May
    2022, \<<https://www.rfc-editor.org/info/rfc9197>\>.
:   
:::

::: {#section-9.2 .section}
### [9.2.](#section-9.2){.section-number .selfRef} [Informative References](#name-informative-references){.section-name .selfRef} {#name-informative-references}

\[bdrmap\]
:   [Luckie, M.]{.refAuthor}, [Dhamdhere, A.]{.refAuthor},
    [Huffaker, B.]{.refAuthor}, [Clark, D.]{.refAuthor}, and [KC.
    Claffy]{.refAuthor}, [\"bdrmap: Inference of Borders Between IP
    Networks\"]{.refTitle}, [Proceedings of the 2016 ACM on Internet
    Measurement Conference, pp. 381-396]{.refContent}, [DOI
    10.1145/2987443.2987467]{.seriesInfo}, November 2016,
    \<<https://doi.org/10.1145/2987443.2987467>\>.
:   

\[IDCong\]
:   [Luckie, M.]{.refAuthor}, [Dhamdhere, A.]{.refAuthor},
    [Clark, D.]{.refAuthor}, and [B. Huffaker]{.refAuthor},
    [\"Challenges in Inferring Internet Interdomain
    Congestion\"]{.refTitle}, [Proceedings of the 2014 Conference on
    Internet Measurement Conference, pp. 15-22]{.refContent}, [DOI
    10.1145/2663716.2663741]{.seriesInfo}, November 2014,
    \<<https://doi.org/10.1145/2663716.2663741>\>.
:   

\[LOAD_BALANCE\]
:   [Sanguanpong, S.]{.refAuthor}, [Pittayapitak, W.]{.refAuthor}, and
    [K. Kasom Koht-Arsa]{.refAuthor}, [\"COMPARISON OF HASH STRATEGIES
    FOR FLOW-BASED LOAD BALANCING\"]{.refTitle}, [International Journal
    of Electronic Commerce Studies, Vol.6, No.2,
    pp.259-268]{.refContent}, [DOI 10.7903/ijecs.1346]{.seriesInfo},
    December 2015, \<<https://doi.org/10.7903/ijecs.1346>\>.
:   

\[MLB\]
:   [Augustin, B.]{.refAuthor}, [Friedman, T.]{.refAuthor}, and [R.
    Teixeira]{.refAuthor}, [\"Measuring load-balanced paths in the
    internet\"]{.refTitle}, [Proceedings of the 7th ACM SIGCOMM
    conference on Internet measurement, pp. 149-160]{.refContent}, [DOI
    10.1145/1298306.1298329]{.seriesInfo}, October 2007,
    \<<https://doi.org/10.1145/1298306.1298329>\>.
:   

\[MLRM\]
:   [Fontugne, R.]{.refAuthor}, [Mazel, J.]{.refAuthor}, and [K.
    Fukuda]{.refAuthor}, [\"An empirical mixture model for large-scale
    RTT measurements\"]{.refTitle}, [2015 IEEE Conference on Computer
    Communications (INFOCOM), pp. 2470-2478]{.refContent}, [DOI
    10.1109/INFOCOM.2015.7218636]{.seriesInfo}, April 2015,
    \<<https://doi.org/10.1109/INFOCOM.2015.7218636>\>.
:   

\[P2\]
:   [Jain, R.]{.refAuthor} and [I. Chlamtac]{.refAuthor}, [\"The P 2
    algorithm for dynamic calculation of quartiles and histograms
    without storing observations\"]{.refTitle}, [Communications of the
    ACM 28.10 (1985): 1076-1085]{.refContent}, [DOI
    10.1145/4372.4378]{.seriesInfo}, October 1985,
    \<<https://doi.org/10.1145/4372.4378>\>.
:   

\[PT\]
:   [Augustin, B.]{.refAuthor}, [Cuvellier, X.]{.refAuthor},
    [Orgogozo, B.]{.refAuthor}, [Viger, F.]{.refAuthor},
    [Friedman, T.]{.refAuthor}, [Latapy, M.]{.refAuthor},
    [Magnien, C.]{.refAuthor}, and [R. Teixeira]{.refAuthor},
    [\"Avoiding traceroute anomalies with Paris
    traceroute\"]{.refTitle}, [Proceedings of the 6th ACM SIGCOMM
    conference on Internet measurement, pp. 153-158]{.refContent}, [DOI
    10.1145/1177080.1177100]{.seriesInfo}, October 2006,
    \<<https://doi.org/10.1145/1177080.1177100>\>.
:   

\[RFC2991\]
:   [Thaler, D.]{.refAuthor} and [C. Hopps]{.refAuthor}, [\"Multipath
    Issues in Unicast and Multicast Next-Hop Selection\"]{.refTitle},
    [RFC 2991]{.seriesInfo}, [DOI 10.17487/RFC2991]{.seriesInfo},
    November 2000, \<<https://www.rfc-editor.org/info/rfc2991>\>.
:   

\[RFC5357\]
:   [Hedayat, K.]{.refAuthor}, [Krzanowski, R.]{.refAuthor},
    [Morton, A.]{.refAuthor}, [Yum, K.]{.refAuthor}, and [J.
    Babiarz]{.refAuthor}, [\"A Two-Way Active Measurement Protocol
    (TWAMP)\"]{.refTitle}, [RFC 5357]{.seriesInfo}, [DOI
    10.17487/RFC5357]{.seriesInfo}, October 2008,
    \<<https://www.rfc-editor.org/info/rfc5357>\>.
:   

\[RFC5835\]
:   [Morton, A., Ed.]{.refAuthor} and [S. Van den Berghe,
    Ed.]{.refAuthor}, [\"Framework for Metric Composition\"]{.refTitle},
    [RFC 5835]{.seriesInfo}, [DOI 10.17487/RFC5835]{.seriesInfo}, April
    2010, \<<https://www.rfc-editor.org/info/rfc5835>\>.
:   

\[RFC5837\]
:   [Atlas, A., Ed.]{.refAuthor}, [Bonica, R., Ed.]{.refAuthor},
    [Pignataro, C., Ed.]{.refAuthor}, [Shen, N.]{.refAuthor}, and [JR.
    Rivers]{.refAuthor}, [\"Extending ICMP for Interface and Next-Hop
    Identification\"]{.refTitle}, [RFC 5837]{.seriesInfo}, [DOI
    10.17487/RFC5837]{.seriesInfo}, April 2010,
    \<<https://www.rfc-editor.org/info/rfc5837>\>.
:   

\[RFC6437\]
:   [Amante, S.]{.refAuthor}, [Carpenter, B.]{.refAuthor},
    [Jiang, S.]{.refAuthor}, and [J. Rajahalme]{.refAuthor}, [\"IPv6
    Flow Label Specification\"]{.refTitle}, [RFC 6437]{.seriesInfo},
    [DOI 10.17487/RFC6437]{.seriesInfo}, November 2011,
    \<<https://www.rfc-editor.org/info/rfc6437>\>.
:   

\[RFC7312\]
:   [Fabini, J.]{.refAuthor} and [A. Morton]{.refAuthor}, [\"Advanced
    Stream and Sampling Framework for IP Performance Metrics
    (IPPM)\"]{.refTitle}, [RFC 7312]{.seriesInfo}, [DOI
    10.17487/RFC7312]{.seriesInfo}, August 2014,
    \<<https://www.rfc-editor.org/info/rfc7312>\>.
:   

\[RFC7325\]
:   [Villamizar, C., Ed.]{.refAuthor}, [Kompella, K.]{.refAuthor},
    [Amante, S.]{.refAuthor}, [Malis, A.]{.refAuthor}, and [C.
    Pignataro]{.refAuthor}, [\"MPLS Forwarding Compliance and
    Performance Requirements\"]{.refTitle}, [RFC 7325]{.seriesInfo},
    [DOI 10.17487/RFC7325]{.seriesInfo}, August 2014,
    \<<https://www.rfc-editor.org/info/rfc7325>\>.
:   

\[RFC7594\]
:   [Eardley, P.]{.refAuthor}, [Morton, A.]{.refAuthor},
    [Bagnulo, M.]{.refAuthor}, [Burbridge, T.]{.refAuthor},
    [Aitken, P.]{.refAuthor}, and [A. Akhter]{.refAuthor}, [\"A
    Framework for Large-Scale Measurement of Broadband Performance
    (LMAP)\"]{.refTitle}, [RFC 7594]{.seriesInfo}, [DOI
    10.17487/RFC7594]{.seriesInfo}, September 2015,
    \<<https://www.rfc-editor.org/info/rfc7594>\>.
:   

\[RFC8403\]
:   [Geib, R., Ed.]{.refAuthor}, [Filsfils, C.]{.refAuthor}, [Pignataro,
    C., Ed.]{.refAuthor}, and [N. Kumar]{.refAuthor}, [\"A Scalable and
    Topology-Aware MPLS Data-Plane Monitoring System\"]{.refTitle}, [RFC
    8403]{.seriesInfo}, [DOI 10.17487/RFC8403]{.seriesInfo}, July 2018,
    \<<https://www.rfc-editor.org/info/rfc8403>\>.
:   

\[RTTSub\]
:   [Bischof, Z.]{.refAuthor}, [Rula, J.]{.refAuthor}, and [F.
    Bustamante]{.refAuthor}, [\"In and out of Cuba: Characterizing
    Cuba\'s Connectivity\"]{.refTitle}, [Proceedings of the 2015 ACM
    Conference on Internet Measurement Conference, pp.
    487-493]{.refContent}, [DOI 10.1145/2815675.2815718]{.seriesInfo},
    October 2015, \<<https://doi.org/10.1145/2815675.2815718>\>.
:   

\[SCAMPER\]
:   [Matthew Luckie, M.]{.refAuthor}, [\"Scamper: a scalable and
    extensible packet prober for active measurement of the
    internet\"]{.refTitle}, [Proceedings of the 10th ACM SIGCOMM
    conference on Internet measurement, pp. 239-245]{.refContent}, [DOI
    10.1145/1879141.1879171]{.seriesInfo}, November 2010,
    \<<https://doi.org/10.1145/1879141.1879171>\>.
:   

\[SSNT\]
:   [Park, K.]{.refAuthor} and [W. Willinger]{.refAuthor},
    [\"Self-Similar Network Traffic and Performance Evaluation (1st
    ed.)\"]{.refTitle}, [DOI 10.1002/047120644X]{.seriesInfo}, [ John
    Wiley & Sons, Inc., New York, NY, USA]{.seriesInfo}, August 2000,
    \<<https://doi.org/10.1002/047120644X>\>.
:   
:::
:::

::: {#appendix-A .section}
## [Appendix A.](#appendix-A){.section-number .selfRef} [MPLS Methods for Route Assessment](#name-mpls-methods-for-route-asse){.section-name .selfRef} {#name-mpls-methods-for-route-asse}

A Node assessing an MPLS path must be part of the MPLS domain where the
path is implemented. When this condition is met,
\[[RFC8029](#RFC8029){.xref}\] provides a powerful set of mechanisms to
detect \"correct operation of the data plane, as well as a mechanism to
verify the data plane against the control
plane\".[¶](#appendix-A-1){.pilcrow}

MPLS routing is based on the presence of a Forwarding Equivalence Class
(FEC) Stack in all visited Nodes. Selecting one of several Equal-Cost
Multipaths (ECMPs) is, however, based on information hidden deeper in
the stack. Late deployments may support a so-called \"Entropy label\"
for this purpose. State-of-the-art deployments base their choice of an
ECMP member interface on the complete MPLS label stack and on IP
addresses up to the complete 5-tuple IP header information (see [Section
2.4](https://www.rfc-editor.org/rfc/rfc7325#section-2.4){.relref} of
\[[RFC7325](#RFC7325){.xref}\]). Load sharing based on IP information
decouples this function from the actual MPLS routing information. Thus,
an MPLS traceroute is able to check how packets with a contiguous number
of ECMP-relevant IP addresses (and an identical MPLS label stack) are
forwarded by a particular router. The minimum number of equivalent MPLS
paths traceable at a router should be 32. Implementations supporting
more paths are available.[¶](#appendix-A-2){.pilcrow}

The MPLS echo request and reply messages offering this feature must
support the Downstream Detailed Mapping TLV (was Downstream Mapping
initially, but the latter has been deprecated). The MPLS echo response
includes the incoming interface where a router received the MPLS echo
request. The MPLS echo reply further informs which of the n addresses
relevant for the load-sharing decision results in a particular next-hop
interface and contains the next Hop\'s interface address (if available).
This ensures that the next Hop will receive a properly coded MPLS echo
request in the next step Route of
assessment.[¶](#appendix-A-3){.pilcrow}

\[[RFC8403](#RFC8403){.xref}\] explains how a central Path Monitoring
System could be used to detect arbitrary MPLS paths between any routers
within a single MPLS domain. The combination of MPLS forwarding, Segment
Routing, and MPLS traceroute offers a simple architecture and a powerful
mechanism to detect and validate (segment-routed) MPLS
paths.[¶](#appendix-A-4){.pilcrow}
:::

::: {#Acknowledgements}
::: {#appendix-B .section}
## [Acknowledgements](#name-acknowledgements){.section-name .selfRef} {#name-acknowledgements}

The original three authors (Ignacio, Al, Joachim) acknowledge [Ruediger
Geib]{.contact-name} for his penetrating comments on the initial
document and his initial text for the appendix on MPLS. [Carlos
Pignataro]{.contact-name} challenged the authors to consider a wider
scope and applied his substantial expertise with many technologies and
their measurement features in his extensive comments. [Frank
Brockners]{.contact-name} also shared useful comments and so did [Footer
Foote]{.contact-name}. We thank them all![¶](#appendix-B-1){.pilcrow}
:::
:::

::: {#authors-addresses}
::: {#appendix-C .section}
## [Authors\' Addresses](#name-authors-addresses){.section-name .selfRef} {#name-authors-addresses}

::: {.left dir="auto"}
[J. Ignacio Alvarez-Hamelin]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Universidad de Buenos Aires]{.org}
:::

::: {.left dir="auto"}
[Av. Paseo Colón 850]{.street-address}
:::

::: {.left dir="auto"}
[C1063ACV]{.postal-code} [Buenos Aires]{.locality}
:::

::: {.left dir="auto"}
[Argentina]{.country-name}
:::

::: tel
Phone: [+54 11 5285-0716](tel:+54%2011%205285-0716){.tel}
:::

::: email
Email: <ihameli@cnet.fi.uba.ar>
:::

::: url
URI: <http://cnet.fi.uba.ar/ignacio.alvarez-hamelin/>
:::

::: {.left dir="auto"}
[Al Morton]{.fn .nameRole}
:::

::: {.left dir="auto"}
[AT&T Labs]{.org}
:::

::: {.left dir="auto"}
[200 Laurel Avenue South]{.street-address}
:::

::: {.left dir="auto"}
[Middletown]{.locality}, [NJ]{.region} [07748]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: tel
Phone: [+1 732 420 1571](tel:+1%20732%20420%201571){.tel}
:::

::: email
Email: <acm@research.att.com>
:::

::: {.left dir="auto"}
[Joachim Fabini]{.fn .nameRole}
:::

::: {.left dir="auto"}
[TU Wien]{.org}
:::

::: {.left dir="auto"}
[Gusshausstrasse 25/E389]{.street-address}
:::

::: {.left dir="auto"}
[1040]{.postal-code} [Vienna]{.locality}
:::

::: {.left dir="auto"}
[Austria]{.country-name}
:::

::: tel
Phone: [+43 1 58801 38813](tel:+43%201%2058801%2038813){.tel}
:::

::: email
Email: <Joachim.Fabini@tuwien.ac.at>
:::

::: url
URI: <http://www.tc.tuwien.ac.at/about-us/staff/joachim-fabini/>
:::

::: {.left dir="auto"}
[Carlos Pignataro]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Cisco Systems, Inc.]{.org}
:::

::: {.left dir="auto"}
[7200-11 Kit Creek Road]{.street-address}
:::

::: {.left dir="auto"}
[Research Triangle Park]{.locality}, [NC]{.region} [27709]{.postal-code}
:::

::: {.left dir="auto"}
[United States of America]{.country-name}
:::

::: email
Email: <cpignata@cisco.com>
:::

::: {.left dir="auto"}
[Ruediger Geib]{.fn .nameRole}
:::

::: {.left dir="auto"}
[Deutsche Telekom]{.org}
:::

::: {.left dir="auto"}
[Heinrich Hertz Str. 3-7]{.street-address}
:::

::: {.left dir="auto"}
[64295]{.postal-code} [Darmstadt]{.locality}
:::

::: {.left dir="auto"}
[Germany]{.country-name}
:::

::: tel
Phone: [+49 6151 5812747](tel:+49%206151%205812747){.tel}
:::

::: email
Email: <Ruediger.Geib@telekom.de>
:::
:::
:::
